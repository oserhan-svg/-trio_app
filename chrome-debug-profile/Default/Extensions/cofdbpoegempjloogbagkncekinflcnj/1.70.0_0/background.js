var background=function(e){"use strict";var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},t(e,n)};function n(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}function r(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function o(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function i(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function s(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function l(e){return this instanceof l?(this.v=e,this):new l(e)}function c(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",(function(e){return function(t){return Promise.resolve(t).then(e,u)}})),r[Symbol.asyncIterator]=function(){return this},r;function a(e,t){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||s(e,t)}))},t&&(r[e]=t(r[e])))}function s(e,t){try{!function(e){e.value instanceof l?Promise.resolve(e.value.v).then(c,u):d(i[0][2],e)}(o[e](t))}catch(e){d(i[0][3],e)}}function c(e){s("next",e)}function u(e){s("throw",e)}function d(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function u(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=i(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}"function"==typeof SuppressedError&&SuppressedError;const d=[];for(let e=0;e<256;++e)d.push((e+256).toString(16).slice(1));let p;const g=new Uint8Array(16);var h={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function f(e,t,n){if(h.randomUUID&&!e)return h.randomUUID();const r=(e=e||{}).random??e.rng?.()??function(){if(!p){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");p=crypto.getRandomValues.bind(crypto)}return p(g)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=15&r[6]|64,r[8]=63&r[8]|128,function(e,t=0){return(d[e[t+0]]+d[e[t+1]]+d[e[t+2]]+d[e[t+3]]+"-"+d[e[t+4]]+d[e[t+5]]+"-"+d[e[t+6]]+d[e[t+7]]+"-"+d[e[t+8]]+d[e[t+9]]+"-"+d[e[t+10]]+d[e[t+11]]+d[e[t+12]]+d[e[t+13]]+d[e[t+14]]+d[e[t+15]]).toLowerCase()}(r)}function _(){let e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}function m(){return crypto.randomUUID?crypto.randomUUID():f()}class v extends Error{}function T(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,t)=>{let n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return atob(t)}}function y(){const e=new Uint32Array(28);return crypto.getRandomValues(e),Array.from(e,(e=>("0"+e.toString(16)).slice(-2))).join("")}function E(e){if(void 0!==e)try{return function(e,t){if("string"!=typeof e)throw new v("Invalid token specified: must be a string");t||(t={});const n=!0===t.header?0:1,r=e.split(".")[n];if("string"!=typeof r)throw new v(`Invalid token specified: missing part #${n+1}`);let o;try{o=T(r)}catch(e){throw new v(`Invalid token specified: invalid base64 for part #${n+1} (${e.message})`)}try{return JSON.parse(o)}catch(e){throw new v(`Invalid token specified: invalid json for part #${n+1} (${e.message})`)}}(e)}catch(e){return null}}v.prototype.name="InvalidTokenError";const S=[{langCode:"AR",langCodeForSpeech:"ar-AR",langCodeForIta:"ar"},{langCode:"BG",langCodeForSpeech:"bg-BG",langCodeForIta:"bg"},{langCode:"CS",langCodeForSpeech:"cs-CZ",langCodeForIta:"cs"},{langCode:"DA",langCodeForSpeech:"da-DK",langCodeForIta:"da"},{langCode:"DE",langCodeForSpeech:"de-DE",supportsFormality:!0,langCodeForIta:"de"},{langCode:"EL",langCodeForSpeech:"el-GR",langCodeForIta:"el"},{langCode:"EN-GB",langCodeForSpeech:"en",voice:"Google UK English Male",langCodeForIta:"en-GB"},{langCode:"EN-US",langCodeForSpeech:"en",voice:"Google UK English Male",langCodeForIta:"en-US"},{langCode:"ES",langCodeForSpeech:"es-ES",voice:"Google español",label:"ES",supportsFormality:!0,langCodeForIta:"es"},{langCode:"ES-419",langCodeForSpeech:"es-ES",voice:"Google español",supportsFormality:!0,langCodeForIta:"es-419"},{langCode:"ET",langCodeForSpeech:"et",langCodeForIta:"et"},{langCode:"FI",langCodeForSpeech:"fi-FI",voice:"Satu",langCodeForIta:"fi"},{langCode:"FR",langCodeForSpeech:"fr-FR",voice:"Thomas",supportsFormality:!0,langCodeForIta:"fr"},{langCode:"HE",langCodeForSpeech:"he",langCodeForIta:"he"},{langCode:"HU",langCodeForSpeech:"hu-HU",langCodeForIta:"hu"},{langCode:"ID",langCodeForSpeech:"id-ID",langCodeForIta:"id"},{langCode:"IT",langCodeForSpeech:"it-IT",supportsFormality:!0,langCodeForIta:"it"},{langCode:"JA",langCodeForSpeech:"ja-JP",supportsFormality:!0,langCodeForIta:"ja"},{langCode:"KO",langCodeForSpeech:"ko-KR",langCodeForIta:"ko"},{langCode:"LT",langCodeForSpeech:"lt",langCodeForIta:"lt"},{langCode:"LV",langCodeForSpeech:"lv",langCodeForIta:"lv"},{langCode:"NB",langCodeForSpeech:"nb-NO",langCodeForIta:"nb"},{langCode:"NL",langCodeForSpeech:"nl-NL",voice:"Google Nederlands",label:"NL",supportsFormality:!0,langCodeForIta:"nl"},{langCode:"PL",langCodeForSpeech:"pl-PL",supportsFormality:!0,langCodeForIta:"pl"},{langCode:"PT-BR",langCodeForSpeech:"pt-PT",supportsFormality:!0,langCodeForIta:"pt-BR"},{langCode:"PT-PT",langCodeForSpeech:"pt-PT",supportsFormality:!0,langCodeForIta:"pt-PT"},{langCode:"RO",langCodeForSpeech:"ro-RO",langCodeForIta:"ro"},{langCode:"RU",langCodeForSpeech:"ru-RU",supportsFormality:!0,langCodeForIta:"ru"},{langCode:"SK",langCodeForSpeech:"sk-SK",langCodeForIta:"sk"},{langCode:"SL",langCodeForSpeech:"sl",langCodeForIta:"sl"},{langCode:"SV",langCodeForSpeech:"sv-SE",langCodeForIta:"sv"},{langCode:"TR",langCodeForSpeech:"tr-TR",langCodeForIta:"tr"},{langCode:"UK",langCodeForSpeech:"uk-UA",langCodeForIta:"uk"},{langCode:"VI",langCodeForSpeech:"vi",langCodeForIta:"vi"},{langCode:"ZH",langCodeForSpeech:"zh-CN",langCodeForIta:"zh-Hans"},{langCode:"ZH-HANT",langCodeForSpeech:"zh-HANT",langCodeForIta:"zh-Hant"}],I={"EN-US":"EN","EN-GB":"EN","ES-419":"ES","PT-PT":"PT","PT-BR":"PT","ZH-HANT":"ZH"},A=[{langCode:"EN",langCodeForIta:"en"},{langCode:"PT",langCodeForIta:"pt"}],b=["EN-GB","EN-US","EN","DE","FR","ES","PT-PT","PT-BR","PT","IT","JA","KO","ZH"],w="EN",O=0,N="inline",R="automatic",L="manual",P="input",C="input_alternatives",x="side_panel",k="customization",D="",U=1,M=2,G=3,V={notLoggedIn:1500,loggedInFree:5e3},$={notLoggedIn:2e3,loggedInFree:2e3},F=1,j=2,W=3,q=1,B=2,H=1,J=2,z=3,Y="HINT_KEYBOARD_SHORTCUT",X="SHOW_ADS_FOR_MS_ADDINS",K="NOTIFICATION_TYPE_REQUIRE_LOGIN_POLICY",Q="INLINE_TRANSLATION_TRIGGER_ICON",Z="INLINE_TRANSLATION_SETTINGS_ICON",ee="INLINE_TRANSLATION_SETTING_POPUP",te="INLINE_TRANSLATION_TOOLBAR_TARGET_LANGUAGE_SELECTOR",ne="INLINE_TRANSLATION_WRITE_TOOLBAR_LANGUAGE_SELECTOR",re="INPUT_TRANSLATION_SETTING_USE_ADVANCED_WINDOW",oe="INPUT_TRANSLATION_TRIGGER_ICON",ie="INPUT_IMPROVE_TRIGGER_ICON",ae="INPUT_TRANSLATION_SETTINGS_ICON",se="INPUT_TRANSLATION_SETTING_POPUP",le="INPUT_TRANSLATION_SETTING_LANGUAGE_SELECTOR",ce="SETTINGS_PAGE_FPT",ue="SETTINGS_PAGE_READING",de="SETTINGS_PAGE_WRITING",pe="SETTINGS_PAGE_INTEGRATIONS",ge="SETTINGS_PAGE_TRANSLATOR_READING_TARGET_LANGUAGE_SELECTOR",he="SETTINGS_PAGE_TRANSLATOR_WRITING_TARGET_LANGUAGE_SELECTOR",fe="SETTINGS_PAGE_FULL_PAGE_TRANSLATION_TARGET_LANGUAGE_SELECTOR",_e="FPT_HIDE_MODAL",me="INPUT_TRANSLATION_READ_MORE_LINK",ve="INLINE_TRANSLATION_READ_MORE_LINK",Te="FPT_TRANSLATION_READ_MORE_LINK",ye="FPT_TRANSLATION_POPUP_MENU_OPTION",Ee="FPT_TRANSLATION_POPUP_OPEN_SETTINGS",Se="FPT_TRANSLATION_POPUP_CLOSE_BUTTON",Ie="FPT_TRANSLATION_POPUP_SHOW_ORIGINAL",Ae="FPT_TRANSLATION_POPUP_OPEN_SIDEBAR_BUTTON",be="EXTENSION_HUB_TOGGLE_SWITCH",we="HUB_CUSTOMIZE_SHORTCUT",Oe="HUB_LOGIN_BUTTON",Ne="HUB_UPGRADE_TO_PRO_LINK",Re="HUB_TRY_PRO_LINK",Le="SETTINGS_PAGE_CUSTOMIZE_SHORTCUT_BUTTON",Pe="HUB_FPT_ENABLE_CHECKBOX",Ce="HUB_FPT_DISABLE_CHECKBOX",xe="DEEPL_WRITE_ICON",ke="gmailOnboardingPopup",De="gmailOnboardingIcon",Ue="gmailCharLimitLogin",Me="gmailFeedbackSurvey",Ge="HUB_VIEW_INTEGRATIONS",Ve="HUB_CLOSE_CUSTOMIZATIONS_WIDGET",$e="GSLIDES_FEEDBACK_SURVEY",Fe="GSLIDES_CHAR_LIMIT_LOGIN",je="ZENDESK_TRY_PRO_LINK",We="ONBOARDING_SIGN_UP",qe="ONBOARDING_SKIP_SIGN_UP",Be="ONBOARDING_LOGIN_LINK",He="ONBOARDING_SEE_ALL_INTEGRATIONS",Je="ICON_TOGGLE_IN_HUB_TRANSLATOR",ze="ICON_TOGGLE_IN_HUB_WRITE",Ye="MANAGE_ICON_SETTINGS",Xe="WRITE_LANGUAGE_SWITCHED_IN_HUB",Ke="WRITE_LANGUAGE_SWITCHED_IN_SETTINGS",Qe="SIDE_PANEL_ICON_ON_WEBSITE",Ze="HUB_ONBOARDING_LINK",et="INLINE_SELECTION_TRANSLATE_ICON",tt="INLINE_SELECTION__WRITE_ICON",nt="INPUT_SELECTION_TRANSLATE_ICON",rt="INPUT_SELECTION__WRITE_ICON",ot="INLINE_SELECTION_TRIGGER_OFF_ICON",it="INPUT_SELECTION_TRIGGER_OFF_ICON",at="SIDE_PANEL_LOGIN_BUTTON",st="SIDE_PANEL_SETTINGS_BUTTON",lt="SIDE_PANEL_LOGOUT_BUTTON",ct="SIDE_PANEL_UPGRADE_BUTTON",ut="SIDE_PANEL_TRANSLATOR_TAB",dt="SIDE_PANEL_TRANSLATOR_TARGET_LANG",pt="SIDE_PANEL_TRANSLATOR_SOURCE_LANG",gt="SIDE_PANEL_TRANSLATION_DIR_INDICATOR",ht="SIDE_PANEL_SOURCE_TEXT_FIELD",ft="SIDE_PANEL_TARGET_TEXT_FIELD",_t="REVIEW_WINDOW_CLOSE_ICON",mt="REVIEW_WINDOW_TRANSLATE_ALTERNATIVES",vt="REVIEW_WINDOW_WRITE_ALTERNATIVES",Tt="USER_PROFILE_SURVEY_CLOSE_BUTTON",yt="USER_PROFILE_SURVEY_REMIND_LATER_BUTTON",Et="USER_PROFILE_SURVEY_LAUNCH_BUTTON",St="EXPERIENCE_FEEDBACK_AMAZING_BUTTON",It="EXPERIENCE_FEEDBACK_NOT_GOOD_BUTTON",At="EXPERIENCE_FEEDBACK_CLOSE_BUTTON",bt="EXPERIENCE_FEEDBACK_REMIND_LATER_BUTTON",wt="EXPERIENCE_FEEDBACK_WRITE_REVIEW_BUTTON",Ot="DOWNLOAD_LOGS_BUTTON",Nt="SIDE_PANEL_SOURCE_TEXT_FIELD_OCR_ICON",Rt="OCR_TRANSLATION_INSTRUCTIONS_OPEN_SHORTCUT_SETTINGS_BUTTON",Lt="SIDE_PANEL_VIEW_PORT",Pt="INPUT_INLINE_HIGHLIGHT",Ct="SIDE_PANEL_ENABLE_INLINE_HIGHLIGHTS_BUTTON",xt="SIDE_PANEL_DISABLE_INLINE_HIGHLIGHTS_BUTTON",kt="INLINE_HIGHLIGHT_DISMISS_BUTTON",Dt="trigger-translation",Ut="change-language",Mt="screenshot-translation",Gt="unknown",Vt="CLICK_ON_SHORTCUT_NOTIFICATION",$t="CLICK_ON_INLINE_TRANSLATION_SHOW_ALTERNATIVES",Ft="CLICK_ON_INLINE_TRANSLATION_CLOSE_ICON",jt="CLICK_ON_LOGOUT_MENU_ENTRY",Wt="DISABLE_PER_SITE",qt="DISABLE_EVERYWHERE",Bt="ENABLE_EVERYWHERE",Ht="ENABLE_PER_SITE",Jt="INPUT_TRANSLATION",zt="INLINE_TRANSLATION",Yt="FULL_PAGE_TRANSLATION",Xt=1,Kt=2,Qt=3,Zt=4,en="OPEN_PAGE",tn="BACK_BUTTON",nn="NEXT_BUTTON",rn="NAVIGATION",on=0,an=1,sn=2,ln=3,cn=4,un="cofdbpoegempjloogbagkncekinflcnj",dn="fancfknaplihpclbhbpclnmmjcjanbaf",pn="ocpdpnakdghopjcifldjidbdmfobmmoi",gn="firefox-extension@deepl.com",hn={deepl:1,linguee:2,google_translate:3,word_365:4,power_point_365:5,jira:6,confluence:7,gmail:8},fn=1,_n=2,mn=3,vn=1,Tn=2;const yn="DEFAULT",En="GDOCS",Sn="ZENDESK",In="WHATSAPP_WEB",An="TWITTER",bn="GMAIL",wn="GSLIDES",On="LINKEDIN",Nn="YOUTUBE",Rn="source",Ln="target",Pn="translate",Cn="write",xn="USER",kn="EXTENSION",Dn="USER",Un="AUTOMATIC",Mn="OPEN_TICKET",Gn="DETECT_TICKET_LANGUAGE",Vn="SWITCH_TICKET_LANGUAGE",$n="ENABLE_AUTOTRANSLATE",Fn="DISABLE_AUTOTRANSLATE",jn="TRANSLATE_MESSAGE",Wn="TRANSLATE_INPUT",qn="ERROR",Bn="TRANSLATION",Hn="LOGIN",Jn="CHAT",zn="MESSAGE",Yn={TRANSLATOR:"TRANSLATOR",WRITE:"WRITE",API:"API",DOC_TRANSLATOR:"DOC_TRANSLATOR"},Xn="free",Kn="pro",Qn="none",Zn="TEXT_REFINEMENT_REQUEST",er="GDOCS_INSERT_COPY",tr="GDOCS_DISCARD_COPY",nr="GDOCS_CHAR_LIMIT_REACHED",rr="RESULT_ACCEPTED",or="RESULT_REVERTED",ir="GET_ALTERNATIVES_FOR_INPUT",ar="ERROR",sr="RESULT_ACCEPTED",lr="RESULT_REVERTED",cr="ALTERNATIVES_OPENED",ur="SEGMENTATION_SELECTED",dr="ALTERNATIVE_SELECTED",pr="READING_VIEW_TRANSLATE",gr="COMPOSE_VIEW_TRANSLATE",hr="COMPOSE_VIEW_IMPROVE",fr="ANONYMOUS_USER_LIMIT_EXCEEDED",_r="FREE_ACCOUNT_LIMIT_EXCEEDED",mr="WRITE_ANONYMOUS_USER_LIMIT_EXCEEDED",vr="WRITE_FREE_ACCOUNT_LIMIT_EXCEEDED",Tr="PRO_TRIAL",yr="LOGIN",Er="SIGNUP",Sr="word",Ir="sentence",Ar="None",br="Pro",wr="Free",Or=Object.assign(Object.assign({},{simple:"simple",business:"business",academic:"academic",casual:"casual"}),{enthusiastic:"enthusiastic",friendly:"friendly",confident:"confident",diplomatic:"diplomatic"}),Nr="auto",Rr="formal",Lr="informal";Or.simple,Or.business,Or.academic,Or.casual,Or.enthusiastic,Or.friendly,Or.confident,Or.diplomatic;const Pr="admin",Cr="development",xr="normal",kr="sideload",Dr="other",Ur="permissions_increase",Mr="unknown",Gr="inline",Vr="input",$r="input_alternatives",Fr="customization",jr="inline_highlights",Wr="",qr="translation",Br="improvement",Hr="inline_correction",Jr="login",zr="auto_login",Yr="ocr",Xr="fpt",Kr="translate",Qr="write",Zr="new_session",eo="recreated_session",to="error",no="user_interaction",ro="connection",oo="session",io="update_target_language",ao="update_source_language",so="update_formality",lo="update_style",co="select_alternative",uo="page_load",po="right_click",go="sidebar_closed",ho="SIDEPANEL_PORT",fo="Translate",_o="FullPageTranslation",mo={auth:{accessToken:"a_t",refreshToken:"r_t",idToken:"i_t",isLoggedIn:"isLoggedIn",writeServiceType:"writeServiceType",docTranslatorServiceType:"docTranslatorServiceType",apiServiceType:"apiServiceType",translatorServiceType:"translatorServiceType",accountId:"accountId",lastLogoutTrigger:"last_logout_trigger",last_login:"last_login",organizationId:"organizationId"},glossary:{activeTermbaseId:"activeTermbaseId",isGlossaryEnabled:"isGlossaryEnabled",hasTermbaseService:"hasTermbaseService",canCreateGlossary:"canCreateGlossary"},browserInstanceId:"browserInstanceId",whiteLabelLogoId:"whiteLabelLogoId",accountCountry:"accountCountry",translationLanguages:"translationLanguages",selectedTargetLanguage:"selectedTargetLanguage",targetLanguageUserInput:"targetLanguageUserInput",targetLanguageSidePanel:"targetLanguageSidePanel",installationId:"installationId",customTranslatorName:"customTranslatorName"},vo={brave:"Brave",chrome:"Chrome",edge:"Edge",firefox:"Firefox",opera:"Opera",safari:"Safari"};function To(e,t){let n;try{switch(e){case vo.chrome:case vo.brave:n=t.split("Chrome/")[1].split(" ")[0];break;case vo.edge:n=t.split("Edg/")[1].split(" ")[0];break;case vo.firefox:n=t.split("Firefox/")[1].split(" ")[0];break;case vo.opera:n=t.split("OPR/")[1].split(" ")[0];break;case vo.safari:n=t.split("Version/")[1].split(" ")[0]}}catch(t){console.error(`Could not get the browsers (${e}) version from user agent`,t)}try{!n&&(null===navigator||void 0===navigator?void 0:navigator.userAgentData)&&function(e){return e===vo.chrome||e===vo.edge||e===vo.brave||e===vo.opera}(e)&&(n=yo(e).version)}catch(t){console.error(`Could not get the chromium browsers (${e}) version`,t)}return n&&"string"==typeof n?n:"unknown_browser_version"}function yo(e){if(!navigator.userAgentData||!e)return;const t=new RegExp(`${e}`,"i");return navigator.userAgentData.brands.filter((e=>t.test(e.brand)))[0]}const Eo="unknown_user_agent",So="unknown_platform",Io="unknown_browser",Ao="unknown_browser_version",bo="unknown_browser_language";function wo(e){return r(this,void 0,void 0,(function*(){const t=Oo(),{browserInstanceId:n}=yield nI([mo.browserInstanceId]),r=function(){switch(chrome.runtime.id){case un:return"chrome_web_store";case dn:return"edge_addon_store";case gn:return"firefox_addon_store";case pn:return"local";default:return"unknown"}}();return(null==e?void 0:e.isSnakeCase)?{os:`brex_${t.platform}`,os_version:`brex_${t.browser}_${t.browserVersion}`,app_version:"1.70.0",app_build:r,instance_id:null!=n?n:"unknown"}:{os:`brex_${t.platform}`,osVersion:`brex_${t.browser}_${t.browserVersion}`,appVersion:"1.70.0",appBuild:r,instanceId:null!=n?n:"unknown"}}))}function Oo(){var e,t;const n=(null===navigator||void 0===navigator?void 0:navigator.userAgent)||Eo,r=(null===(e=null===navigator||void 0===navigator?void 0:navigator.userAgentData)||void 0===e?void 0:e.platform)||(null===navigator||void 0===navigator?void 0:navigator.platform)||So;let o=Io,i=Ao,a=(null===navigator||void 0===navigator?void 0:navigator.language)||bo;(null===(t=null===chrome||void 0===chrome?void 0:chrome.i18n)||void 0===t?void 0:t.getUILanguage)&&(a=chrome.i18n.getUILanguage());try{o=No(n),i=To(o,n)}catch(e){console.error("Could not get the name of the brower",e)}return{userAgent:n,platform:r,browser:o,browserVersion:i,browserLang:a}}const No=e=>{let t=Io;try{const n=e.match(/chrome|chromium|crios/i),r=e.match(/edg/i)||yo(vo.edge),o=e.match(/firefox|fxios/i),i=e.match(/opr\//i)||yo(vo.opera),a=e.match(/safari/i),s=yo(vo.brave);n?(t=vo.chrome,r&&(t=vo.edge),i&&(t=vo.opera),s&&(t=vo.brave)):r?t=vo.edge:o?t=vo.firefox:i?t=vo.opera:a&&(t=vo.safari)}catch(e){console.error("Could not get the name of the brower",e)}return t};function Ro(){if({IS_PROD:!0,BASE_URLS:{auth:"https://auth.deepl.com",legacyAuth:"https://www.deepl.com",dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.70.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.70.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.70.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiFree:"https://oneshot-free.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.www.deepl.com/v1",login:"https://www.deepl.com/auth/login",ssoLogin:"https://w.deepl.com/oidc/auth",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",allBrowserFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_5hVyvZAQlQOL5RQ",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chromewebstore.google.com/detail/deepl-translate-and-write/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-and-writ/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall",accountApi:"https://w.deepl.com/account?request_type=jsonrpc&il=en&method=getCurrentAccount",organizationApi:"https://w.deepl.com/organization",learnWhyGeoBlocked:"https://www.deepl.com/restricted-territories"},APP_VERSION:"1.70.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,IMPROVE_WRITING:!0,INLINE_HIGHLIGHTS:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!1,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,BATCH_TRANSLATE_HTML_REQUEST:!0,SIDE_PANEL_FIREFOX:!0}}.browserBuild)return{IS_PROD:!0,BASE_URLS:{auth:"https://auth.deepl.com",legacyAuth:"https://www.deepl.com",dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.70.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.70.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.70.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiFree:"https://oneshot-free.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.www.deepl.com/v1",login:"https://www.deepl.com/auth/login",ssoLogin:"https://w.deepl.com/oidc/auth",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",allBrowserFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_5hVyvZAQlQOL5RQ",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chromewebstore.google.com/detail/deepl-translate-and-write/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-and-writ/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall",accountApi:"https://w.deepl.com/account?request_type=jsonrpc&il=en&method=getCurrentAccount",organizationApi:"https://w.deepl.com/organization",learnWhyGeoBlocked:"https://www.deepl.com/restricted-territories"},APP_VERSION:"1.70.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,IMPROVE_WRITING:!0,INLINE_HIGHLIGHTS:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!1,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,BATCH_TRANSLATE_HTML_REQUEST:!0,SIDE_PANEL_FIREFOX:!0}}.browserBuild.toLowerCase()===vo.firefox.toLowerCase();const e=chrome.runtime.getURL("");return Oo().browser===vo.firefox||/moz-extension:\/\//gm.test(e)}const Lo={try_DeepL_Pro:"DEEPL_COM_PRO",try_DeepL_Pro_Write:"DEEPL_COM_PRO_WRITE",show_more_translation:"DEEPL_COM_TRANSLATOR",deepl_translator_home:"DEEPL_COM_HOMEPAGE",deepl_write_home:"DEEPL_COM_WRITE",deepl_terms_of_service_free:"DEEPL_COM_TERMS_OF_SERVICE_FREE",deepl_create_account:"DEEPL_CREATE_ACCOUNT",deepl_translator_docs:"DEEPL_COM_DOCTRANS",shortcut_settings:"SHORTCUT_SETTINGS",support_article:"SUPPORT_ARTICLE",chrome_write_a_review:"CHROME_WRITE_A_REVIEW",edge_write_a_review:"EDGE_WRITE_A_REVIEW",firefox_write_a_review:"FIREFOX_WRITE_A_REVIEW",external:{whatsapp:"EXTERNAL_WHATSAPP",twitter:"EXTERNAL_TWITTER",youtube:"EXTERNAL_YOUTUBE",facebook:"EXTERNAL_FACEBOOK",github:"EXTERNAL_GITHUB",discord:"EXTERNAL_DISCORD",telegram:"EXTERNAL_TELEGRAM",reddit:"EXTERNAL_REDDIT",gmail:"EXTERNAL_GMAIL",gdocs:"EXTERNAL_GDOCS",gslides:"EXTERNAL_GSLIDES",linkedIn:"EXTERNAL_LINKEDIN",msOffice:"EXTERNAL_MS_OFFICE"},deepl_support:"DEEPL_SUPPORT",firefox_shortcut_docs:"FIREFOX_SHORTCUT_DOCS",firefox_privacy_policy:"FIREFOX_PRIVACY_POLICY",ms_office_addins_ads:"ADDINS_ADS",get_free_account:"GET_FREE_ACCOUNT",learn_why_geo_blocked:"LEARN_WHY_GEO_BLOCKED"},Po={DEEPL_COM_PRO:"https://www.deepl.com/pro",DEEPL_COM_PRO_WRITE:"https://www.deepl.com/pro-write",DEEPL_COM_TRANSLATOR:"https://www.deepl.com/translator",DEEPL_COM_WRITE:{auth:"https://auth.deepl.com",legacyAuth:"https://www.deepl.com",dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.70.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.70.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.70.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiFree:"https://oneshot-free.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.www.deepl.com/v1",login:"https://www.deepl.com/auth/login",ssoLogin:"https://w.deepl.com/oidc/auth",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",allBrowserFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_5hVyvZAQlQOL5RQ",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chromewebstore.google.com/detail/deepl-translate-and-write/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-and-writ/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall",accountApi:"https://w.deepl.com/account?request_type=jsonrpc&il=en&method=getCurrentAccount",organizationApi:"https://w.deepl.com/organization",learnWhyGeoBlocked:"https://www.deepl.com/restricted-territories"}.deeplWrite,DEEPL_COM_DOCTRANS:"https://www.deepl.com/translator/files",DEEPL_COM_TERMS_OF_SERVICE_FREE:"https://www.deepl.com/en/pro-license?tab=free",DEEPL_CREATE_ACCOUNT:"https://www.deepl.com/signup",SHORTCUT_SETTINGS:"chrome://extensions/shortcuts",SUPPORT_ARTICLE:"https://support.deepl.com/hc/articles/4407580229522",CHROME_WEBSTORE:"https://chromewebstore.google.com/detail/deepl-translate-and-write/cofdbpoegempjloogbagkncekinflcnj",FIREFOX_WEBSTORE:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/",EDGE_WEBSTORE:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-and-writ/fancfknaplihpclbhbpclnmmjcjanbaf",EXTERNAL:{WHATSAPP:"https://web.whatsapp.com",TWITTER:"https://www.twitter.com",YOUTUBE:"https://www.youtube.com",FACEBOOK:"https://www.facebook.com",GITHUB:"https://www.github.com",DISCORD:"https://www.discord.com",TELEGRAM:"https://web.telegram.org",REDDIT:"https://www.reddit.com",GMAIL:"https://www.gmail.com",GDOCS:"https://docs.google.com",GSLIDES:"https://slides.google.com",LINKEDIN:"https://www.linkedin.com/",MSOFFICE:"https://www.office.com/"},DEEPL_SUPPORT:"https://support.deepl.com/hc",FIREFOX_SHORTCUT_DOCS:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",FIREFOX_PRIVACY_POLICY:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",MSOFFICE_ADDINS_ADS:"https://www.deepl.com/en/microsoft-365",GET_FREE_ACCOUNT:"https://www.deepl.com/en/signup?cta=free-login-signup",LEARN_WHY_GEO_BLOCKED:"https://www.deepl.com/restricted-territories"};function Co(e){if(void 0!==e.destination)switch(e.destination){case Lo.try_DeepL_Pro:return e.utmContent?ko(Po.DEEPL_COM_PRO,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",null==e?void 0:e.utmContent]]):Po.DEEPL_COM_PRO;case Lo.try_DeepL_Pro_Write:return(null==e?void 0:e.utmContent)?ko(Po.DEEPL_COM_PRO_WRITE,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",null==e?void 0:e.utmContent]]):Po.DEEPL_COM_PRO_WRITE;case Lo.show_more_translation:return e?function({sourceLang:e,targetLang:t,textToShare:n}){if(!e||!t||!n)return"";const r=new URL(Po.DEEPL_COM_TRANSLATOR),o=`${e.toLowerCase()}/${t.toLowerCase()}/${encodeURIComponent(n)}`;return r.hash=o,r.href}(e):void console.error("Invalid action.");case Lo.deepl_translator_home:return(null==e?void 0:e.utmContent)?ko(Po.DEEPL_COM_TRANSLATOR,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",null==e?void 0:e.utmContent]]):Po.DEEPL_COM_TRANSLATOR;case Lo.deepl_write_home:return(null==e?void 0:e.utmContent)?ko(Po.DEEPL_COM_WRITE,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",null==e?void 0:e.utmContent]]):Po.DEEPL_COM_WRITE;case Lo.deepl_translator_docs:return(null==e?void 0:e.utmContent)?ko(Po.DEEPL_COM_DOCTRANS,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",null==e?void 0:e.utmContent]]):Po.DEEPL_COM_DOCTRANS;case Lo.deepl_terms_of_service_free:return Po.DEEPL_COM_TERMS_OF_SERVICE_FREE;case Lo.shortcut_settings:return Po.SHORTCUT_SETTINGS;case Lo.support_article:return Po.SUPPORT_ARTICLE;case Lo.external.whatsapp:return Po.EXTERNAL.WHATSAPP;case Lo.external.twitter:return Po.EXTERNAL.TWITTER;case Lo.external.youtube:return Po.EXTERNAL.YOUTUBE;case Lo.external.facebook:return Po.EXTERNAL.FACEBOOK;case Lo.external.github:return Po.EXTERNAL.GITHUB;case Lo.external.discord:return Po.EXTERNAL.DISCORD;case Lo.external.telegram:return Po.EXTERNAL.TELEGRAM;case Lo.external.reddit:return Po.EXTERNAL.REDDIT;case Lo.external.gmail:return Po.EXTERNAL.GMAIL;case Lo.external.gdocs:return Po.EXTERNAL.GDOCS;case Lo.external.gslides:return Po.EXTERNAL.GSLIDES;case Lo.external.linkedIn:return Po.EXTERNAL.LINKEDIN;case Lo.external.msOffice:return Po.EXTERNAL.MSOFFICE;case Lo.deepl_support:return Po.DEEPL_SUPPORT;case Lo.chrome_write_a_review:return Po.CHROME_WEBSTORE;case Lo.edge_write_a_review:return Po.EDGE_WEBSTORE;case Lo.firefox_write_a_review:return Po.FIREFOX_WEBSTORE;case Lo.firefox_privacy_policy:return Po.FIREFOX_PRIVACY_POLICY;case Lo.firefox_shortcut_docs:return Po.FIREFOX_SHORTCUT_DOCS;case Lo.deepl_create_account:if(e){let t=[];if(e.utmContent){t=[...[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",e.utmContent]]]}if(e.redirectToOnboarding&&!Ro()){const e=`${chrome.runtime.getURL("")}onboarding.html`;t.push(["redirectUri",e])}return ko(Po.DEEPL_CREATE_ACCOUNT,t)}return Po.DEEPL_CREATE_ACCOUNT;case Lo.ms_office_addins_ads:return Po.MSOFFICE_ADDINS_ADS;case Lo.get_free_account:return Po.GET_FREE_ACCOUNT;case Lo.learn_why_geo_blocked:return Po.LEARN_WHY_GEO_BLOCKED;default:return}}function xo(e){const t=Co(e),{openInSameTab:n}=e;if(!t)return;const r=new URL(t).href;n?chrome.tabs.query({active:!0,currentWindow:!0},(function(e){const t=e[0];t.id&&chrome.tabs.update(t.id,{url:r})})):chrome.tabs.create({url:r,active:!0})}function ko(e,t){if(0===t.length||!e)return;const n=new URL(e);return t.forEach((e=>{2===e.length&&n.searchParams.append(e[0],e[1])})),n.href}const Do=Object.prototype.toString;function Uo(e){switch(Do.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Jo(e,Error)}}function Mo(e,t){return Do.call(e)===`[object ${t}]`}function Go(e){return Mo(e,"ErrorEvent")}function Vo(e){return Mo(e,"DOMError")}function $o(e){return Mo(e,"String")}function Fo(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function jo(e){return null===e||Fo(e)||"object"!=typeof e&&"function"!=typeof e}function Wo(e){return Mo(e,"Object")}function qo(e){return"undefined"!=typeof Event&&Jo(e,Event)}function Bo(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function Ho(e){return"number"==typeof e&&e!=e}function Jo(e,t){try{return e instanceof t}catch(e){return!1}}function zo(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}function Yo(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function Xo(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let i=Math.min(o+140,r);return i>r-5&&(i=r),i===r&&(o=Math.max(i-140,0)),n=n.slice(o,i),o>0&&(n=`'{snip} ${n}`),i<r&&(n+=" {snip}"),n}function Ko(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const r=e[t];try{zo(r)?n.push("[VueViewModel]"):n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function Qo(e,t,n=!1){return!!$o(e)&&(Mo(t,"RegExp")?t.test(e):!!$o(t)&&(n?e===t:e.includes(t)))}function Zo(e,t=[],n=!1){return t.some((t=>Qo(e,t,n)))}function ei(e,t,n=250,r,o,i,a){if(!(i.exception&&i.exception.values&&a&&Jo(a.originalException,Error)))return;const s=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;var l,c;s&&(i.exception.values=(l=ti(e,t,o,a.originalException,r,i.exception.values,s,0),c=n,l.map((e=>(e.value&&(e.value=Yo(e.value,c)),e)))))}function ti(e,t,n,r,o,i,a,s){if(i.length>=n+1)return i;let l=[...i];if(Jo(r[o],Error)){ni(a,s);const i=e(t,r[o]),c=l.length;ri(i,o,c,s),l=ti(e,t,n,r[o],o,[i,...l],i,c)}return Array.isArray(r.errors)&&r.errors.forEach(((r,i)=>{if(Jo(r,Error)){ni(a,s);const c=e(t,r),u=l.length;ri(c,`errors[${i}]`,u,s),l=ti(e,t,n,r,o,[c,...l],c,u)}})),l}function ni(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function ri(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function oi(e){return e&&e.Math==Math?e:void 0}const ii="object"==typeof globalThis&&oi(globalThis)||"object"==typeof window&&oi(window)||"object"==typeof self&&oi(self)||"object"==typeof global&&oi(global)||function(){return this}()||{};function ai(){return ii}function si(e,t,n){const r=n||ii,o=r.__SENTRY__=r.__SENTRY__||{};return o[e]||(o[e]=t())}const li=ai();function ci(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let i=0,a=0;const s=" > ",l=s.length;let c;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&i++<r&&(c=ui(n,u),!("html"===c||i>1&&a+o.length*l+c.length>=d));)o.push(c),a+=c.length,n=n.parentNode;return o.reverse().join(s)}catch(e){return"<unknown>"}}function ui(e,t){const n=e,r=[];let o,i,a,s,l;if(!n||!n.tagName)return"";if(li.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const c=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(c&&c.length)c.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),o=n.className,o&&$o(o))for(i=o.split(/\s+/),l=0;l<i.length;l++)r.push(`.${i[l]}`);const u=["aria-label","type","name","title","alt"];for(l=0;l<u.length;l++)a=u[l],s=n.getAttribute(a),s&&r.push(`[${a}="${s}"]`);return r.join("")}function di(){try{return li.document.location.href}catch(e){return""}}function pi(e){return li.document&&li.document.querySelector?li.document.querySelector(e):null}function gi(e){if(!li.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const hi="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,fi=["debug","info","warn","error","log","assert","trace"],_i={};function mi(e){if(!("console"in ii))return e();const t=ii.console,n={},r=Object.keys(_i);r.forEach((e=>{const r=_i[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const vi=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return hi?fi.forEach((n=>{t[n]=(...t)=>{e&&mi((()=>{ii.console[n](`Sentry Logger [${n}]:`,...t)}))}})):fi.forEach((e=>{t[e]=()=>{}})),t}(),Ti=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function yi(e,t=!1){const{host:n,path:r,pass:o,port:i,projectId:a,protocol:s,publicKey:l}=e;return`${s}://${l}${t&&o?`:${o}`:""}@${n}${i?`:${i}`:""}/${r?`${r}/`:r}${a}`}function Ei(e){const t=Ti.exec(e);if(!t)return void mi((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,r,o="",i,a="",s]=t.slice(1);let l="",c=s;const u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){const e=c.match(/^\d+/);e&&(c=e[0])}return Si({host:i,pass:o,path:l,projectId:c,port:a,protocol:n,publicKey:r})}function Si(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Ii(e){const t="string"==typeof e?Ei(e):Si(e);if(t&&function(e){if(!hi)return!0;const{port:t,projectId:n,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(vi.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(vi.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(vi.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(vi.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}class Ai extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function bi(e,t,n){if(!(t in e))return;const r=e[t],o=n(r);"function"==typeof o&&Oi(o,r),e[t]=o}function wi(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){hi&&vi.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Oi(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,wi(e,"__sentry_original__",t)}catch(e){}}function Ni(e){return e.__sentry_original__}function Ri(e){if(Uo(e))return{message:e.message,name:e.name,stack:e.stack,...Pi(e)};if(qo(e)){const t={type:e.type,target:Li(e.target),currentTarget:Li(e.currentTarget),...Pi(e)};return"undefined"!=typeof CustomEvent&&Jo(e,CustomEvent)&&(t.detail=e.detail),t}return e}function Li(e){try{return t=e,"undefined"!=typeof Element&&Jo(t,Element)?ci(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}var t}function Pi(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function Ci(e){return xi(e,new Map)}function xi(e,t){if(function(e){if(!Wo(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.keys(e))void 0!==e[n]&&(r[n]=xi(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(xi(e,t))})),r}return e}const ki=/\(error: (.*)\)/,Di=/captureMessage|captureException/;function Ui(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0)=>{const r=[],o=e.split("\n");for(let e=n;e<o.length;e++){const n=o[e];if(n.length>1024)continue;const i=ki.test(n)?n.replace(ki,"$1"):n;if(!i.match(/\S*Error: /)){for(const e of t){const t=e(i);if(t){r.push(t);break}}if(r.length>=50)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop();t.reverse(),Di.test(t[t.length-1].function||"")&&(t.pop(),Di.test(t[t.length-1].function||"")&&t.pop());return t.slice(0,50).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(r)}}const Mi="<anonymous>";function Gi(e){try{return e&&"function"==typeof e&&e.name||Mi}catch(e){return Mi}}const Vi={},$i={};function Fi(e,t){Vi[e]=Vi[e]||[],Vi[e].push(t)}function ji(e,t){$i[e]||(t(),$i[e]=!0)}function Wi(e,t){const n=e&&Vi[e];if(n)for(const r of n)try{r(t)}catch(t){hi&&vi.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Gi(r)}\nError:`,t)}}function qi(e){const t="console";Fi(t,e),ji(t,Bi)}function Bi(){"console"in ii&&fi.forEach((function(e){e in ii.console&&bi(ii.console,e,(function(t){return _i[e]=t,function(...t){Wi("console",{args:t,level:e});const n=_i[e];n&&n.apply(ii.console,t)}}))}))}function Hi(){const e=ii,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function Ji(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function zi(e){const{message:t,event_id:n}=e;if(t)return t;const r=Ji(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Yi(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=t||""),i.type||(i.type="Error")}function Xi(e,t){const n=Ji(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}}function Ki(e){if(e&&e.__sentry_captured__)return!0;try{wi(e,"__sentry_captured__",!0)}catch(e){}return!1}function Qi(e){return Array.isArray(e)?e:[e]}const Zi=ii;let ea,ta,na;function ra(e){Fi("dom",e),ji("dom",oa)}function oa(){if(!Zi.document)return;const e=Wi.bind(null,"dom"),t=ia(e,!0);Zi.document.addEventListener("click",t,!1),Zi.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=Zi[t]&&Zi[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(bi(n,"addEventListener",(function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{const r=this,i=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},a=i[n]=i[n]||{refCount:0};if(!a.handler){const r=ia(e);a.handler=r,t.call(this,n,r,o)}a.refCount++}catch(e){}return t.call(this,n,r,o)}})),bi(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this,o=n.__sentry_instrumentation_handlers__||{},i=o[t];i&&(i.refCount--,i.refCount<=0&&(e.call(this,t,i.handler,r),i.handler=void 0,delete o[t]),0===Object.keys(o).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}function ia(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;wi(n,"_sentryCaptured",!0),r&&!r._sentryId&&wi(r,"_sentryId",Hi());const o="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==ta)return!1;try{if(!e.target||e.target._sentryId!==na)return!1}catch(e){}return!0}(n)){e({event:n,name:o,global:t}),ta=n.type,na=r?r._sentryId:void 0}clearTimeout(ea),ea=Zi.setTimeout((()=>{na=void 0,ta=void 0}),1e3)}}const aa=ai();function sa(){if(!("fetch"in aa))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function la(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function ca(){if("string"==typeof EdgeRuntime)return!0;if(!sa())return!1;if(la(aa.fetch))return!0;let e=!1;const t=aa.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=la(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){hi&&vi.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e}function ua(e){const t="fetch";Fi(t,e),ji(t,da)}function da(){ca()&&bi(ii,"fetch",(function(e){return function(...t){const{method:n,url:r}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:ga(t),method:pa(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:ga(t),method:pa(t,"method")?String(t.method).toUpperCase():"GET"}}(t),o={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return Wi("fetch",{...o}),e.apply(ii,t).then((e=>(Wi("fetch",{...o,endTimestamp:Date.now(),response:e}),e)),(e=>{throw Wi("fetch",{...o,endTimestamp:Date.now(),error:e}),e}))}}))}function pa(e,t){return!!e&&"object"==typeof e&&!!e[t]}function ga(e){return"string"==typeof e?e:e?pa(e,"url")?e.url:e.toString?e.toString():"":""}let ha=null;function fa(e){const t="error";Fi(t,e),ji(t,_a)}function _a(){ha=ii.onerror,ii.onerror=function(e,t,n,r,o){return Wi("error",{column:r,error:o,line:n,msg:e,url:t}),!(!ha||ha.__SENTRY_LOADER__)&&ha.apply(this,arguments)},ii.onerror.__SENTRY_INSTRUMENTED__=!0}let ma=null;function va(e){const t="unhandledrejection";Fi(t,e),ji(t,Ta)}function Ta(){ma=ii.onunhandledrejection,ii.onunhandledrejection=function(e){return Wi("unhandledrejection",e),!(ma&&!ma.__SENTRY_LOADER__)||ma.apply(this,arguments)},ii.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const ya=ai();const Ea=ii;let Sa;function Ia(e){const t="history";Fi(t,e),ji(t,Aa)}function Aa(){if(!function(){const e=ya.chrome,t=e&&e.app&&e.app.runtime,n="history"in ya&&!!ya.history.pushState&&!!ya.history.replaceState;return!t&&n}())return;const e=Ea.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=Sa,t=String(n);Sa=t;Wi("history",{from:e,to:t})}return e.apply(this,t)}}Ea.onpopstate=function(...t){const n=Ea.location.href,r=Sa;Sa=n;if(Wi("history",{from:r,to:n}),e)try{return e.apply(this,t)}catch(e){}},bi(Ea.history,"pushState",t),bi(Ea.history,"replaceState",t)}const ba=ii,wa="__sentry_xhr_v3__";function Oa(e){Fi("xhr",e),ji("xhr",Na)}function Na(){if(!ba.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;bi(e,"open",(function(e){return function(...t){const n=Date.now(),r=$o(t[0])?t[0].toUpperCase():void 0,o=function(e){if($o(e))return e;try{return e.toString()}catch(e){}return}(t[1]);if(!r||!o)return e.apply(this,t);this[wa]={method:r,url:o,request_headers:{}},"POST"===r&&o.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const i=()=>{const e=this[wa];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}Wi("xhr",{args:[r,o],endTimestamp:Date.now(),startTimestamp:n,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?bi(this,"onreadystatechange",(function(e){return function(...t){return i(),e.apply(this,t)}})):this.addEventListener("readystatechange",i),bi(this,"setRequestHeader",(function(e){return function(...t){const[n,r]=t,o=this[wa];return o&&$o(n)&&$o(r)&&(o.request_headers[n.toLowerCase()]=r),e.apply(this,t)}})),e.apply(this,t)}})),bi(e,"send",(function(e){return function(...t){const n=this[wa];if(!n)return e.apply(this,t);void 0!==t[0]&&(n.body=t[0]);return Wi("xhr",{args:[n.method,n.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}function Ra(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function La(){return"undefined"!=typeof window&&(!Ra()||void 0!==ii.process&&"renderer"===ii.process.type)}function Pa(e,t=100,n=1/0){try{return xa("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function Ca(e,t=3,n=102400){const r=Pa(e,t);return o=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(o))>n?Ca(e,t-1,n):r;var o}function xa(e,t,n=1/0,r=1/0,o=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[i,a]=o;if(null==t||["number","boolean","string"].includes(typeof t)&&!Ho(t))return t;const s=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(zo(t))return"[VueViewModel]";if(Wo(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${Gi(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const r=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(e){return`**non-serializable** (${e})`}var n}(e,t);if(!s.startsWith("[object "))return s;if(t.__sentry_skip_normalization__)return t;const l="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===l)return s.replace("object ","");if(i(t))return"[Circular ~]";const c=t;if(c&&"function"==typeof c.toJSON)try{return xa("",c.toJSON(),l-1,r,o)}catch(e){}const u=Array.isArray(t)?[]:{};let d=0;const p=Ri(t);for(const e in p){if(!Object.prototype.hasOwnProperty.call(p,e))continue;if(d>=r){u[e]="[MaxProperties ~]";break}const t=p[e];u[e]=xa(e,t,l-1,r,o),d++}return a(t),u}const ka=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Da(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const o=r>=0?e[r]:"/";o&&(t=`${o}/${t}`,n="/"===o.charAt(0))}return t=function(e,t){let n=0;for(let t=e.length-1;t>=0;t--){const r=e[t];"."===r?e.splice(t,1):".."===r?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}(t.split("/").filter((e=>!!e)),!n).join("/"),(n?"/":"")+t||"."}function Ua(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}function Ma(e,t){return function(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=ka.exec(t);return n?n.slice(1):[]}(e)[2]}var Ga;function Va(e){return new Fa((t=>{t(e)}))}function $a(e){return new Fa(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(Ga||(Ga={}));class Fa{constructor(e){Fa.prototype.__init.call(this),Fa.prototype.__init2.call(this),Fa.prototype.__init3.call(this),Fa.prototype.__init4.call(this),this._state=Ga.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new Fa(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new Fa(((t,n)=>{let r,o;return this.then((t=>{o=!1,r=t,e&&e()}),(t=>{o=!0,r=t,e&&e()})).then((()=>{o?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(Ga.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Ga.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Ga.PENDING&&(Bo(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Ga.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Ga.RESOLVED&&e[1](this._value),this._state===Ga.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function ja(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return $a(new Ai("Not adding Promise because buffer limit was reached."));const o=r();return-1===t.indexOf(o)&&t.push(o),o.then((()=>n(o))).then(null,(()=>n(o).then(null,(()=>{})))),o},drain:function(e){return new Fa(((n,r)=>{let o=t.length;if(!o)return n(!0);const i=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{Va(e).then((()=>{--o||(clearTimeout(i),n(!0))}),r)}))}))}}}function Wa(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const qa=["fatal","error","warning","log","info","debug"];function Ba(e){return"warn"===e?"warning":qa.includes(e)?e:"log"}function Ha(){return Date.now()/1e3}const Ja=function(){const{performance:e}=ii;if(!e||!e.now)return Ha;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/1e3}(),za=(()=>{const{performance:e}=ii;if(!e||!e.now)return;const t=36e5,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=o<t,a=e.timing&&e.timing.navigationStart,s="number"==typeof a?Math.abs(a+n-r):t;return i||s<t?o<=s?e.timeOrigin:a:r})(),Ya="baggage",Xa="sentry-",Ka=/^sentry-/;function Qa(e){if(!$o(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce(((e,t)=>{const n=es(t);for(const t of Object.keys(n))e[t]=n[t];return e}),{});else{if(!e)return;t=es(e)}const n=Object.entries(t).reduce(((e,[t,n])=>{if(t.match(Ka)){e[t.slice(7)]=n}return e}),{});return Object.keys(n).length>0?n:void 0}function Za(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce(((e,[t,n],r)=>{const o=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,i=0===r?o:`${e},${o}`;return i.length>8192?(hi&&vi.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):i}),"")}(Object.entries(e).reduce(((e,[t,n])=>(n&&(e[`${Xa}${t}`]=n),e)),{}))}function es(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(e[t]=n,e)),{})}const ts=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function ns(e){if(!e)return;const t=e.match(ts);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function rs(e,t){const n=ns(e),r=Qa(t),{traceId:o,parentSpanId:i,parentSampled:a}=n||{};return n?{traceId:o||Hi(),parentSpanId:i||Hi().substring(16),spanId:Hi().substring(16),sampled:a,dsc:r||{}}:{traceId:o||Hi(),spanId:Hi().substring(16)}}function os(e=Hi(),t=Hi().substring(16),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function is(e,t=[]){return[e,t]}function as(e,t){const[n,r]=e;return[n,[...r,t]]}function ss(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function ls(e,t){return(t||new TextEncoder).encode(e)}function cs(e,t){const[n,r]=e;let o=JSON.stringify(n);function i(e){"string"==typeof o?o="string"==typeof e?o+e:[ls(o,t),e]:o.push("string"==typeof e?ls(e,t):e)}for(const e of r){const[t,n]=e;if(i(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)i(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(Pa(n))}i(e)}}return"string"==typeof o?o:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(o)}function us(e,t){const n="string"==typeof e.data?ls(e.data,t):e.data;return[Ci({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const ds={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function ps(e){return ds[e]}function gs(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function hs(e,t,n,r){const o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:yi(r)},...o&&{trace:Ci({...o})}}}function fs(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}function _s(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}function ms(e,{statusCode:t,headers:n},r=Date.now()){const o={...e},i=n&&n["x-sentry-rate-limits"],a=n&&n["retry-after"];if(i)for(const e of i.trim().split(",")){const[t,n,,,i]=e.split(":",5),a=parseInt(t,10),s=1e3*(isNaN(a)?60:a);if(n)for(const e of n.split(";"))"metric_bucket"===e&&i&&!i.split(";").includes("custom")||(o[e]=r+s);else o.all=r+s}else a?o.all=r+fs(a,r):429===t&&(o.all=r+6e4);return o}function vs(e,t){const n={type:t.name||t.constructor.name,value:t.message},r=function(e,t){return e(t.stack||"",1)}(e,t);return r.length&&(n.stacktrace={frames:r}),n}function Ts(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}const ys="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Es="production";function Ss(){return si("globalEventProcessors",(()=>[]))}function Is(e){Ss().push(e)}function As(e,t,n,r=0){return new Fa(((o,i)=>{const a=e[r];if(null===t||"function"!=typeof a)o(t);else{const s=a({...t},n);ys&&a.id&&null===s&&vi.log(`Event processor "${a.id}" dropped event`),Bo(s)?s.then((t=>As(e,t,n,r+1).then(o))).then(null,i):As(e,s,n,r+1).then(o).then(null,i)}}))}function bs(e){const t=Ja(),n={sid:Hi(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return Ci({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&ws(n,e),n}function ws(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Ja(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:Hi()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Os(e,t){let n={};"ok"===e.status&&(n={status:"exited"}),ws(e,n)}function Ns(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:i,status:a,tags:s,origin:l}=Cs(e);return Ci({data:r,op:o,parent_span_id:i,span_id:t,status:a,tags:s,trace_id:n,origin:l})}function Rs(e){const{traceId:t,spanId:n}=e.spanContext();return os(t,n,xs(e))}function Ls(e){return"number"==typeof e?Ps(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Ps(e.getTime()):Ja()}function Ps(e){return e>9999999999?e/1e3:e}function Cs(e){return function(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}function xs(e){const{traceFlags:t}=e.spanContext();return Boolean(1&t)}function ks(e,t,n,r,o,i){const{normalizeDepth:a=3,normalizeMaxBreadth:s=1e3}=e,l={...t,event_id:t.event_id||n.event_id||Hi(),timestamp:t.timestamp||Ha()},c=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:r,dist:o,maxValueLength:i=250}=t;"environment"in e||(e.environment="environment"in t?n:Es);void 0===e.release&&void 0!==r&&(e.release=r);void 0===e.dist&&void 0!==o&&(e.dist=o);e.message&&(e.message=Yo(e.message,i));const a=e.exception&&e.exception.values&&e.exception.values[0];a&&a.value&&(a.value=Yo(a.value,i));const s=e.request;s&&s.url&&(s.url=Yo(s.url,i))}(l,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(l,c),void 0===t.type&&function(e,t){const n=ii._sentryDebugIds;if(!n)return;let r;const o=Ds.get(t);o?r=o:(r=new Map,Ds.set(t,r));const i=Object.keys(n).reduce(((e,o)=>{let i;const a=r.get(o);a?i=a:(i=t(o),r.set(o,i));for(let t=i.length-1;t>=0;t--){const r=i[t];if(r.filename){e[r.filename]=n[o];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=i[e.filename])}))}))}catch(e){}}(l,e.stackParser);const u=function(e,t){if(!t)return e;const n=e?e.clone():new rl;return n.update(t),n}(r,n.captureContext);n.mechanism&&Xi(l,n.mechanism);const d=o&&o.getEventProcessors?o.getEventProcessors():[],p=function(){nl||(nl=new rl);return nl}().getScopeData();if(i){el(p,i.getScopeData())}if(u){el(p,u.getScopeData())}const g=[...n.attachments||[],...p.attachments];g.length&&(n.attachments=g),Zs(l,p);return As([...d,...Ss(),...p.eventProcessors],l,n).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach((e=>{n.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof a&&a>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:Pa(e.data,t,n)}})))},...e.user&&{user:Pa(e.user,t,n)},...e.contexts&&{contexts:Pa(e.contexts,t,n)},...e.extra&&{extra:Pa(e.extra,t,n)}};e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Pa(e.contexts.trace.data,t,n)));e.spans&&(r.spans=e.spans.map((e=>{const r=Cs(e).data;return r&&(e.data=Pa(r,t,n)),e})));return r}(e,a,s):e)))}const Ds=new WeakMap;function Us(e){if(e)return function(e){return e instanceof rl||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>Ms.includes(e)))}(e)?{captureContext:e}:e}const Ms=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Gs(e,t){return dl().captureException(e,Us(t))}function Vs(e,t){const n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return dl().captureMessage(e,n,r)}function $s(e,t){return dl().captureEvent(e,t)}function Fs(e,t){dl().addBreadcrumb(e,t)}function js(e,t){dl().setContext(e,t)}function Ws(...e){const t=dl();if(2===e.length){const[n,r]=e;return n?t.withScope((()=>(t.getStackTop().scope=n,r(n)))):t.withScope(r)}return t.withScope(e[0])}function qs(){return dl().getClient()}function Bs(){return dl().getScope()}function Hs(e){const t=qs(),n=pl(),r=Bs(),{release:o,environment:i=Es}=t&&t.getOptions()||{},{userAgent:a}=ii.navigator||{},s=bs({release:o,environment:i,user:r.getUser()||n.getUser(),...a&&{userAgent:a},...e}),l=n.getSession();return l&&"ok"===l.status&&ws(l,{status:"exited"}),Js(),n.setSession(s),r.setSession(s),s}function Js(){const e=pl(),t=Bs(),n=t.getSession()||e.getSession();n&&Os(n),zs(),e.setSession(),t.setSession()}function zs(){const e=pl(),t=Bs(),n=qs(),r=t.getSession()||e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function Ys(e=!1){e?Js():zs()}function Xs(e){return e.transaction}function Ks(e,t,n){const r=t.getOptions(),{publicKey:o}=t.getDsn()||{},{segment:i}=n&&n.getUser()||{},a=Ci({environment:r.environment||Es,release:r.release,user_segment:i,public_key:o,trace_id:e});return t.emit&&t.emit("createDsc",a),a}function Qs(e){const t=qs();if(!t)return{};const n=Ks(Cs(e).trace_id||"",t,Bs()),r=Xs(e);if(!r)return n;const o=r&&r._frozenDynamicSamplingContext;if(o)return o;const{sampleRate:i,source:a}=r.metadata;null!=i&&(n.sample_rate=`${i}`);const s=Cs(r);return a&&"url"!==a&&(n.transaction=s.description),n.sampled=String(xs(r)),t.emit&&t.emit("createDsc",n),n}function Zs(e,t){const{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:i}=t;!function(e,t){const{extra:n,tags:r,user:o,contexts:i,level:a,transactionName:s}=t,l=Ci(n);l&&Object.keys(l).length&&(e.extra={...l,...e.extra});const c=Ci(r);c&&Object.keys(c).length&&(e.tags={...c,...e.tags});const u=Ci(o);u&&Object.keys(u).length&&(e.user={...u,...e.user});const d=Ci(i);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts});a&&(e.level=a);s&&(e.transaction=s)}(e,t),r&&function(e,t){e.contexts={trace:Ns(t),...e.contexts};const n=Xs(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:Qs(t),...e.sdkProcessingMetadata};const r=Cs(n).description;r&&(e.tags={transaction:r,...e.tags})}}(e,r),function(e,t){e.fingerprint=e.fingerprint?Qi(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,o),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,i)}function el(e,t){const{extra:n,tags:r,user:o,contexts:i,level:a,sdkProcessingMetadata:s,breadcrumbs:l,fingerprint:c,eventProcessors:u,attachments:d,propagationContext:p,transactionName:g,span:h}=t;tl(e,"extra",n),tl(e,"tags",r),tl(e,"user",o),tl(e,"contexts",i),tl(e,"sdkProcessingMetadata",s),a&&(e.level=a),g&&(e.transactionName=g),h&&(e.span=h),l.length&&(e.breadcrumbs=[...e.breadcrumbs,...l]),c.length&&(e.fingerprint=[...e.fingerprint,...c]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function tl(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}let nl;class rl{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=ol()}static clone(e){return e?e.clone():new rl}clone(){const e=new rl;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&ws(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e;if(t instanceof rl){const e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if(Wo(t)){const t=e;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=ol(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:Ha(),...e},o=this._breadcrumbs;return o.push(r),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:n,_tags:r,_extra:o,_user:i,_level:a,_fingerprint:s,_eventProcessors:l,_propagationContext:c,_sdkProcessingMetadata:u,_transactionName:d,_span:p}=this;return{breadcrumbs:e,attachments:t,contexts:n,tags:r,extra:o,user:i,level:a,fingerprint:s||[],eventProcessors:l,propagationContext:c,sdkProcessingMetadata:u,transactionName:d,span:p}}applyToEvent(e,t={},n=[]){Zs(e,this.getScopeData());return As([...n,...Ss(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:Hi();if(!this._client)return vi.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n&&n.event_id?n.event_id:Hi();if(!this._client)return vi.warn("No client configured on scope - will not capture message!"),r;const o=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r},this),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Hi();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(vi.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function ol(){return{traceId:Hi(),spanId:Hi().substring(16)}}const il="7.120.3",al=parseFloat(il),sl=100;class ll{constructor(e,t,n,r=al){let o,i;this._version=r,t?o=t:(o=new rl,o.setClient(e)),n?i=n:(i=new rl,i.setClient(e)),this._stack=[{scope:o}],e&&this.bindClient(e),this._isolationScope=i}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const t=this.pushScope();let n;try{n=e(t)}catch(e){throw this.popScope(),e}return Bo(n)?n.then((e=>(this.popScope(),e)),(e=>{throw this.popScope(),e})):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:Hi(),r=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:r,...t,event_id:n}),n}captureMessage(e,t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:Hi(),o=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r}),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Hi();return e.type||(this._lastEventId=n),this.getScope().captureEvent(e,{...t,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:r}=this.getStackTop();if(!r)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:i=sl}=r.getOptions&&r.getOptions()||{};if(i<=0)return;const a={timestamp:Ha(),...e},s=o?mi((()=>o(a,t))):a;null!==s&&(r.emit&&r.emit("beforeAddBreadcrumb",s,t),n.addBreadcrumb(s,i))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=ul(this);try{e(this)}finally{ul(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return ys&&vi.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);if(ys&&!n){this.getClient()?vi.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):vi.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&Os(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:r,environment:o=Es}=n&&n.getOptions()||{},{userAgent:i}=ii.navigator||{},a=bs({release:r,environment:o,user:t.getUser(),...i&&{userAgent:i},...e}),s=t.getSession&&t.getSession();return s&&"ok"===s.status&&ws(s,{status:"exited"}),this.endSession(),t.setSession(a),a}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_callExtensionMethod(e,...t){const n=cl().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);ys&&vi.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function cl(){return ii.__SENTRY__=ii.__SENTRY__||{extensions:{},hub:void 0},ii}function ul(e){const t=cl(),n=hl(t);return fl(t,e),n}function dl(){const e=cl();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=cl()){t=e,t&&t.__SENTRY__&&t.__SENTRY__.hub&&!hl(e).isOlderThan(al)||fl(e,new ll);var t;return hl(e)}(e)}function pl(){return dl().getIsolationScope()}function gl(e,t={}){const n=cl();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(e,t):e()}function hl(e){return si("hub",(()=>new ll),e)}function fl(e,t){if(!e)return!1;return(e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0}function _l(e){return(e||dl()).getScope().getTransaction()}const ml=ns;let vl=!1;function Tl(){const e=_l();if(e){const t="internal_error";ys&&vi.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}var yl;function El(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}Tl.tag="sentry_tracingErrorCallback",function(e){e.Ok="ok";e.DeadlineExceeded="deadline_exceeded";e.Unauthenticated="unauthenticated";e.PermissionDenied="permission_denied";e.NotFound="not_found";e.ResourceExhausted="resource_exhausted";e.InvalidArgument="invalid_argument";e.Unimplemented="unimplemented";e.Unavailable="unavailable";e.InternalError="internal_error";e.UnknownError="unknown_error";e.Cancelled="cancelled";e.AlreadyExists="already_exists";e.FailedPrecondition="failed_precondition";e.Aborted="aborted";e.OutOfRange="out_of_range";e.DataLoss="data_loss"}(yl||(yl={}));const Sl=El;function Il(e,t){e.setTag("http.status_code",String(t)),e.setData("http.response.status_code",t);const n=El(t);"unknown_error"!==n&&e.setStatus(n)}function Al(e,t,n=()=>{}){let r;try{r=e()}catch(e){throw t(e),n(),e}return function(e,t,n){if(Bo(e))return e.then((e=>(n(),e)),(e=>{throw t(e),n(),e}));return n(),e}(r,t,n)}function bl(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=qs(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function wl(e){if(!bl())return;const t=Rl(e),n=dl(),r=e.scope?e.scope.getSpan():Ol();if(e.onlyIfParent&&!r)return;const o=(e.scope||Bs()).clone();return Nl(n,{parentSpan:r,spanContext:t,forceTransaction:e.forceTransaction,scope:o})}function Ol(){return Bs().getSpan()}function Nl(e,{parentSpan:t,spanContext:n,forceTransaction:r,scope:o}){if(!bl())return;const i=pl();let a;if(t&&!r)a=t.startChild(n);else if(t){const r=Qs(t),{traceId:o,spanId:i}=t.spanContext(),s=xs(t);a=e.startTransaction({traceId:o,parentSpanId:i,parentSampled:s,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}else{const{traceId:t,dsc:r,parentSpanId:s,sampled:l}={...i.getPropagationContext(),...o.getPropagationContext()};a=e.startTransaction({traceId:t,parentSpanId:s,parentSampled:l,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}return o.setSpan(a),function(e,t,n){e&&(wi(e,Pl,n),wi(e,Ll,t))}(a,o,i),a}function Rl(e){if(e.startTime){const t={...e};return t.startTimestamp=Ls(e.startTime),delete t.startTime,t}return e}const Ll="_sentryScope",Pl="_sentryIsolationScope";let Cl;function xl(e){return Cl?Cl.get(e):void 0}function kl(e){const t=xl(e);if(!t)return;const n={};for(const[,[e,r]]of t)n[e]||(n[e]=[]),n[e].push(Ci(r));return n}const Dl="sentry.source",Ul="sentry.sample_rate",Ml="sentry.op",Gl="sentry.origin";class Vl{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class $l{constructor(e={}){this._traceId=e.traceId||Hi(),this._spanId=e.spanId||Hi().substring(16),this._startTime=e.startTimestamp||Ja(),this.tags=e.tags?{...e.tags}:{},this.data=e.data?{...e.data}:{},this.instrumenter=e.instrumenter||"sentry",this._attributes={},this.setAttributes({[Gl]:e.origin||"manual",[Ml]:e.op,...e.attributes}),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp),void 0!==e.exclusiveTime&&(this._exclusiveTime=e.exclusiveTime),this._measurements=e.measurements?{...e.measurements}:{}}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[Ml]}set op(e){this.setAttribute(Ml,e)}get origin(){return this._attributes[Gl]}set origin(e){this.setAttribute(Gl,e)}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?1:0}}startChild(e){const t=new $l({...e,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t);const n=Xs(this);if(t.transaction=n,ys&&n){const r=`[Tracing] Starting '${e&&e.op||"< unknown op >"}' span on transaction '${Cs(t).description||"< unknown name >"}' (${n.spanContext().spanId}).`;vi.log(r),this._logMessage=r}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setAttribute(e,t){void 0===t?delete this._attributes[e]:this._attributes[e]=t}setAttributes(e){Object.keys(e).forEach((t=>this.setAttribute(t,e[t])))}setStatus(e){return this._status=e,this}setHttpStatus(e){return Il(this,e),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return"ok"===this._status}finish(e){return this.end(e)}end(e){if(this._endTime)return;const t=Xs(this);if(ys&&t&&t.spanContext().spanId!==this._spanId){const e=this._logMessage;e&&vi.log(e.replace("Starting","Finishing"))}this._endTime=Ls(e)}toTraceparent(){return Rs(this)}toContext(){return Ci({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return Ns(this)}getSpanJSON(){return Ci({data:this._getData(),description:this._name,op:this._attributes[Ml],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Gl],_metrics_summary:kl(this),profile_id:this._attributes.profile_id,exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:e,_attributes:t}=this,n=Object.keys(e).length>0,r=Object.keys(t).length>0;if(n||r)return n&&r?{...e,...t}:n?e:t}}class Fl extends $l{constructor(e,t){super(e),this._contexts={},this._hub=t||dl(),this._name=e.name||"",this._metadata={...e.metadata},this._trimEnd=e.trimEnd,this.transaction=this;const n=this._metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[Dl]&&{source:this._attributes[Dl]},...this._attributes[Ul]&&{sampleRate:this._attributes[Ul]}}}set metadata(e){this._metadata=e}setName(e,t="custom"){this._name=e,this.setAttribute(Dl,t)}updateName(e){return this._name=e,this}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new Vl(e)),this.spanRecorder.add(this)}setContext(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t}setMeasurement(e,t,n=""){this._measurements[e]={value:t,unit:n}}setMetadata(e){this._metadata={...this._metadata,...e}}end(e){const t=Ls(e),n=this._finishTransaction(t);if(n)return this._hub.captureEvent(n)}toContext(){return Ci({...super.toContext(),name:this._name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return Qs(this)}setHub(e){this._hub=e}getProfileId(){if(void 0!==this._contexts&&void 0!==this._contexts.profile)return this._contexts.profile.profile_id}_finishTransaction(e){if(void 0!==this._endTime)return;this._name||(ys&&vi.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);const t=this._hub.getClient();if(t&&t.emit&&t.emit("finishTransaction",this),!0!==this._sampled)return ys&&vi.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(t&&t.recordDroppedEvent("sample_rate","transaction"));const n=this.spanRecorder?this.spanRecorder.spans.filter((e=>e!==this&&Cs(e).timestamp)):[];if(this._trimEnd&&n.length>0){const e=n.map((e=>Cs(e).timestamp)).filter(Boolean);this._endTime=e.reduce(((e,t)=>e>t?e:t))}const{scope:r,isolationScope:o}={scope:(i=this)[Ll],isolationScope:i[Pl]};var i;const{metadata:a}=this,{source:s}=a,l={contexts:{...this._contexts,trace:Ns(this)},spans:n,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...a,capturedSpanScope:r,capturedSpanIsolationScope:o,...Ci({dynamicSamplingContext:Qs(this)})},_metrics_summary:kl(this),...s&&{transaction_info:{source:s}}};return Object.keys(this._measurements).length>0&&(ys&&vi.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),l.measurements=this._measurements),ys&&vi.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),l}}const jl={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},Wl=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class ql extends Vl{constructor(e,t,n,r){super(r),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=n}add(e){if(e.spanContext().spanId!==this.transactionSpanId){const t=e.end;e.end=(...n)=>(this._popActivity(e.spanContext().spanId),t.apply(e,n)),void 0===Cs(e).timestamp&&this._pushActivity(e.spanContext().spanId)}super.add(e)}}class Bl extends Fl{constructor(e,t,n=jl.idleTimeout,r=jl.finalTimeout,o=jl.heartbeatInterval,i=!1,a=!1){super(e,t),this._idleHub=t,this._idleTimeout=n,this._finalTimeout=r,this._heartbeatInterval=o,this._onScope=i,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=Wl[4],this._autoFinishAllowed=!a,i&&(ys&&vi.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),t.getScope().setSpan(this)),a||this._restartIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=Wl[3],this.end())}),this._finalTimeout)}end(e){const t=Ls(e);if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setAttribute("finishReason",this._finishReason),this.spanRecorder){ys&&vi.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);for(const e of this._beforeFinishCallbacks)e(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter((e=>{if(e.spanContext().spanId===this.spanContext().spanId)return!0;Cs(e).timestamp||(e.setStatus("cancelled"),e.end(t),ys&&vi.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));const{start_timestamp:n,timestamp:r}=Cs(e),o=n&&n<t,i=(this._finalTimeout+this._idleTimeout)/1e3,a=r&&n&&r-n<i;if(ys){const t=JSON.stringify(e,void 0,2);o?a||vi.log("[Tracing] discarding Span since it finished after Transaction final timeout",t):vi.log("[Tracing] discarding Span since it happened after Transaction was finished",t)}return o&&a})),ys&&vi.log("[Tracing] flushing IdleTransaction")}else ys&&vi.log("[Tracing] No active IdleTransaction");if(this._onScope){const e=this._idleHub.getScope();e.getTransaction()===this&&e.setSpan(void 0)}return super.end(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const t=e=>{this._finished||this._pushActivity(e)},n=e=>{this._finished||this._popActivity(e)};this.spanRecorder=new ql(t,n,this.spanContext().spanId,e),ys&&vi.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:t}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===t,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=Wl[5],this.end(e)))}setFinishReason(e){this._finishReason=e}sendAutoFinishSignal(){this._autoFinishAllowed||(ys&&vi.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=Wl[1],this.end(e))}),this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),ys&&vi.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,ys&&vi.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(ys&&vi.log(`[Tracing] popActivity ${e}`),delete this.activities[e],ys&&vi.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const e=Ja();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=Wl[5],this.end(e)):this._restartIdleTimeout(e+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?this._autoFinishAllowed&&(ys&&vi.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=Wl[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){ys&&vi.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}function Hl(e,t,n){if(!bl(t))return e.sampled=!1,e;if(void 0!==e.sampled)return e.setAttribute(Ul,Number(e.sampled)),e;let r;return"function"==typeof t.tracesSampler?(r=t.tracesSampler(n),e.setAttribute(Ul,Number(r))):void 0!==n.parentSampled?r=n.parentSampled:void 0!==t.tracesSampleRate?(r=t.tracesSampleRate,e.setAttribute(Ul,Number(r))):(r=1,e.setAttribute(Ul,r)),Jl(r)?r?(e.sampled=Math.random()<r,e.sampled?(ys&&vi.log(`[Tracing] starting ${e.op} transaction - ${Cs(e).description}`),e):(ys&&vi.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(ys&&vi.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(ys&&vi.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function Jl(e){return Ho(e)||"number"!=typeof e&&"boolean"!=typeof e?(ys&&vi.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):!(e<0||e>1)||(ys&&vi.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1)}function zl(){const e=this.getScope().getSpan();return e?{"sentry-trace":Rs(e)}:{}}function Yl(e,t){const n=this.getClient(),r=n&&n.getOptions()||{},o=r.instrumenter||"sentry",i=e.instrumenter||"sentry";o!==i&&(ys&&vi.error(`A transaction was started with instrumenter=\`${i}\`, but the SDK is configured with the \`${o}\` instrumenter.\nThe transaction will not be sampled. Please use the ${o} instrumentation to start transactions.`),e.sampled=!1);let a=new Fl(e,this);return a=Hl(a,r,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...t}),a.isRecording()&&a.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",a),a}function Xl(e,t,n,r,o,i,a,s=!1){const l=e.getClient(),c=l&&l.getOptions()||{};let u=new Bl(t,e,n,r,a,o,s);return u=Hl(u,c,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...i}),u.isRecording()&&u.initSpanRecorder(c._experiments&&c._experiments.maxSpans),l&&l.emit&&l.emit("startTransaction",u),u}function Kl(){const e=cl();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=Yl),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=zl),vl||(vl=!0,fa(Tl),va(Tl)))}function Ql(e,t,n){const r=_l();r&&r.setMeasurement(e,t,n)}function Zl(e,t,n,r){const o=gs(n),i=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const a=hs(e,o,r,t);delete e.sdkProcessingMetadata;return is(a,[[{type:i},e]])}function ec(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function tc(e,t){return n={sentry_key:e.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join("&");var n}function nc(e,t={}){const n="string"==typeof t?t:t.tunnel,r="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${ec(e)}${e.projectId}/envelope/`}(e)}?${tc(e,r)}`}const rc=[];function oc(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;t.forEach((e=>{e.isDefaultInstance=!0})),r=Array.isArray(n)?[...t,...n]:"function"==typeof n?Qi(n(t)):t;const o=function(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.keys(t).map((e=>t[e]))}(r),i=function(e,t){for(let n=0;n<e.length;n++)if(!0===t(e[n]))return n;return-1}(o,(e=>"Debug"===e.name));if(-1!==i){const[e]=o.splice(i,1);o.push(e)}return o}function ic(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function ac(e,t,n){if(n[t.name])ys&&vi.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===rc.indexOf(t.name)&&(t.setupOnce(Is,dl),rc.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,r)=>n(t,r,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}ys&&vi.log(`Integration installed: ${t.name}`)}}function sc(e,t){return Object.assign((function(...e){return t(...e)}),{id:e})}function lc(e){return e.replace(/[^\w\-./]+/gi,"")}const cc=[["\n","\\n"],["\r","\\r"],["\t","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function uc(e){return[...e].reduce(((e,t)=>e+function(e){for(const[t,n]of cc)if(e===t)return n;return e}(t)),"")}function dc(e,t,n,r){const o={sent_at:(new Date).toISOString()};n&&n.sdk&&(o.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(o.dsn=yi(t));const i=function(e){const t=function(e){let t="";for(const n of e){const e=Object.entries(n.tags),r=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return is(o,[i])}const pc="Not capturing exception because it's already been captured.";class gc{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Ii(e.dsn):ys&&vi.warn("No DSN provided, client will not send events."),this._dsn){const t=nc(this._dsn,e);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){if(Ki(e))return void(ys&&vi.log(pc));let r=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{r=e}))),r}captureMessage(e,t,n,r){let o=n&&n.event_id;const i=Fo(e)?e:String(e),a=jo(e)?this.eventFromMessage(i,t,n):this.eventFromException(e,n);return this._process(a.then((e=>this._captureEvent(e,n,r))).then((e=>{o=e}))),o}captureEvent(e,t,n){if(t&&t.originalException&&Ki(t.originalException))return void(ys&&vi.log(pc));let r=t&&t.event_id;const o=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,t,o||n).then((e=>{r=e}))),r}captureSession(e){"string"!=typeof e.release?ys&&vi.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),ws(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):Va(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return ys&&vi.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){const t=this._integrations[e.name];ac(this,e,this._integrations),t||ic(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=Zl(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=as(n,us(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const r=this._sendEnvelope(n);r&&r.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,n,r){const o=gs(n);return is({sent_at:(new Date).toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:yi(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const r="number"==typeof n?n:1,o=`${e}:${t}`;ys&&vi.log(`Recording outcome: "${o}"${r>1?` (${r} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+r}}captureAggregateMetrics(e){ys&&vi.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=dc(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&ac(e,t,n)})),n}(this,e),ic(this,e),this._integrationsInitialized=!0}_updateSessionFromEvent(e,t){let n=!1,r=!1;const o=t.exception&&t.exception.values;if(o){r=!0;for(const e of o){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const i="ok"===e.status;(i&&0===e.errors||i&&n)&&(ws(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Fa((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r=pl()){const o=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i.length>0&&(t.integrations=i),this.emit("preprocessEvent",e,t),ks(o,e,t,n,this,r).then((e=>{if(null===e)return e;const t={...r.getPropagationContext(),...n?n.getPropagationContext():void 0};if(!(e.contexts&&e.contexts.trace)&&t){const{traceId:r,spanId:o,parentSpanId:i,dsc:a}=t;e.contexts={trace:{trace_id:r,span_id:o,parent_span_id:i},...e.contexts};const s=a||Ks(r,this,n);e.sdkProcessingMetadata={dynamicSamplingContext:s,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(ys){const t=e;"log"===t.logLevel?vi.log(t.message):vi.warn(t)}}))}_processEvent(e,t,n){const r=this.getOptions(),{sampleRate:o}=r,i=fc(e),a=hc(e),s=e.type||"error",l=`before send for type \`${s}\``;if(a&&"number"==typeof o&&Math.random()>o)return this.recordDroppedEvent("sample_rate","error",e),$a(new Ai(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const c="replay_event"===s?"replay":s,u=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,u).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",c,e),new Ai("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const o=function(e,t,n){const{beforeSend:r,beforeSendTransaction:o}=e;if(hc(t)&&r)return r(t,n);if(fc(t)&&o){if(t.spans){const e=t.spans.length;t.sdkProcessingMetadata={...t.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return o(t,n)}return t}(r,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(Bo(e))return e.then((e=>{if(!Wo(e)&&null!==e)throw new Ai(n);return e}),(e=>{throw new Ai(`${t} rejected with ${e}`)}));if(!Wo(e)&&null!==e)throw new Ai(n);return e}(o,l)})).then((r=>{if(null===r){if(this.recordDroppedEvent("before_send",c,e),i){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw new Ai(`${l} returned \`null\`, will not send event.`,"log")}const o=n&&n.getSession();if(!i&&o&&this._updateSessionFromEvent(o,r),i){const e=(r.sdkProcessingMetadata&&r.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(r.spans?r.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const a=r.transaction_info;if(i&&a&&r.transaction!==e.transaction){const e="custom";r.transaction_info={...a,source:e}}return this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof Ai)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new Ai(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,(e=>{ys&&vi.error("Error while sending event:",e)}));ys&&vi.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,r]=t.split(":");return{reason:n,category:r,quantity:e[t]}}))}}function hc(e){return void 0===e.type}function fc(e){return"transaction"===e.type}function _c(e){const t=qs();t&&t.addEventProcessor&&t.addEventProcessor(e)}const mc="c",vc="g",Tc="s",yc="d";const Ec={[mc]:class{constructor(e){this._value=e}get weight(){return 1}add(e){this._value+=e}toString(){return`${this._value}`}},[vc]:class{constructor(e){this._last=e,this._min=e,this._max=e,this._sum=e,this._count=1}get weight(){return 5}add(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}},[yc]:class{constructor(e){this._value=[e]}get weight(){return this._value.length}add(e){this._value.push(e)}toString(){return this._value.join(":")}},[Tc]:class{constructor(e){this.first=e,this._value=new Set([e])}get weight(){return this._value.size}add(e){this._value.add(e)}toString(){return Array.from(this._value).map((e=>"string"==typeof e?function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t>>>0}(e):e)).join(":")}}};function Sc(e){const t=dl().getStackTop();t.client=e,t.scope.setClient(e)}function Ic(e,t,n=ja(e.bufferSize||30)){let r={};function o(o){const i=[];if(ss(o,((t,n)=>{const o=ps(n);if(_s(r,o)){const r=Ac(t,n);e.recordDroppedEvent("ratelimit_backoff",o,r)}else i.push(t)})),0===i.length)return Va();const a=is(o[0],i),s=t=>{ss(a,((n,r)=>{const o=Ac(n,r);e.recordDroppedEvent(t,ps(r),o)}))};return n.add((()=>t({body:cs(a,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&ys&&vi.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=ms(r,e),e)),(e=>{throw s("network_error"),e})))).then((e=>e),(e=>{if(e instanceof Ai)return ys&&vi.error("Skipped sending event because buffer is full."),s("queue_overflow"),Va();throw e}))}return o.__sentry__baseTransport__=!0,{send:o,flush:e=>n.drain(e)}}function Ac(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}function bc(e,t){ys&&vi.info(`[Offline]: ${e}`,t)}function wc(e){return t=>{const n=e(t),r=t.createStore?t.createStore(t):void 0;let o,i=5e3;function a(e,n,r){return o=["replay_event","replay_recording","client_report"],!ss(e,((e,t)=>o.includes(t)))&&(!t.shouldStore||t.shouldStore(e,n,r));var o}function s(e){r&&(o&&clearTimeout(o),o=setTimeout((async()=>{o=void 0;const e=await r.pop();e&&(bc("Attempting to send previously queued event"),c(e).catch((e=>{bc("Failed to retry sending",e)})))}),e),"number"!=typeof o&&o.unref&&o.unref())}function l(){o||(s(i),i=Math.min(2*i,36e5))}async function c(e){try{const t=await n.send(e);let r=100;if(t)if(t.headers&&t.headers["retry-after"])r=fs(t.headers["retry-after"]);else if((t.statusCode||0)>=400)return t;return s(r),i=5e3,t}catch(t){if(r&&await a(e,t,i))return await r.insert(e),l(),bc("Error sending. Event queued",t),{};throw t}}return t.flushAtStartup&&l(),{send:c,flush:e=>n.flush(e)}}}function Oc(e,t){let n;return ss(e,((e,r)=>(t.includes(r)&&(n=Array.isArray(e)?e[1]:void 0),!!n))),n}function Nc(e){return[{type:"span"},e]}function Rc(e,t){const n=t&&function(e){return void 0!==e.getClient}(t)?t.getClient():t,r=n&&n.getDsn(),o=n&&n.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,r)||function(e,t){if(!t)return!1;return Lc(e)===Lc(t)}(e,o)}function Lc(e){return"/"===e[e.length-1]?e.slice(0,-1):e}const Pc=new Map,Cc=new Set;function xc(e,t){return function(e){if(ii._sentryModuleMetadata)for(const t of Object.keys(ii._sentryModuleMetadata)){const n=ii._sentryModuleMetadata[t];if(Cc.has(t))continue;Cc.add(t);const r=e(t);for(const e of r.reverse())if(e.filename){Pc.set(e.filename,n);break}}}(e),Pc.get(t)}const kc="ModuleMetadata",Dc=()=>({name:kc,setupOnce(){},setup(e){"function"==typeof e.on&&e.on("beforeEnvelope",(e=>{ss(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(!function(e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata}))}catch(e){}}(t),e[1]=t)}}))}))},processEvent:(e,t,n)=>(function(e,t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename)continue;const t=xc(e,n.filename);t&&(n.module_metadata=t)}}))}catch(e){}}(n.getOptions().stackParser,e),e)}),Uc=sc(kc,Dc),Mc=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],Gc=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],Vc="InboundFilters",$c=(e={})=>({name:Vc,setupOnce(){},processEvent(t,n,r){const o=r.getOptions(),i=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Mc],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:Gc],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,o);return function(e,t){if(t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e))return ys&&vi.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${zi(e)}`),!0;if(function(e,t){if(e.type||!t||!t.length)return!1;return function(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch(e){}n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`));ys&&0===t.length&&vi.error(`Could not extract message for event ${zi(e)}`);return t}(e).some((e=>Zo(e,t)))}(e,t.ignoreErrors))return ys&&vi.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${zi(e)}`),!0;if(function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&Zo(n,t)}(e,t.ignoreTransactions))return ys&&vi.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${zi(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;const n=jc(e);return!!n&&Zo(n,t)}(e,t.denyUrls))return ys&&vi.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${zi(e)}.\nUrl: ${jc(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;const n=jc(e);return!n||Zo(n,t)}(e,t.allowUrls))return ys&&vi.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${zi(e)}.\nUrl: ${jc(e)}`),!0;return!1}(t,i)?null:t}}),Fc=sc(Vc,$c);function jc(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return ys&&vi.error(`Cannot extract url for event ${zi(e)}`),null}}let Wc;const qc="FunctionToString",Bc=new WeakMap,Hc=()=>({name:qc,setupOnce(){Wc=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=Ni(this),n=Bc.has(qs())&&void 0!==t?t:this;return Wc.apply(n,e)}}catch(e){}},setup(e){Bc.set(e,!0)}}),Jc=sc(qc,Hc),zc="LinkedErrors",Yc=sc(zc,((e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:zc,setupOnce(){},preprocessEvent(e,r,o){const i=o.getOptions();ei(vs,i.stackParser,i.maxValueLength,n,t,e,r)}}}));var Xc=Object.freeze({__proto__:null,FunctionToString:Jc,InboundFilters:Fc,LinkedErrors:Yc});class Kc{constructor(e){this._client=e,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),5e3)}add(e,t,n,r="none",o={},i=Ja()){const a=Math.floor(i),s=t.replace(/[^\w\-.]+/gi,"_");const l=function(e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[lc(n)]=uc(String(e[n])));return t}(o),c=function(e){return e.replace(/[^\w]+/gi,"_")}(r),u=function(e,t,n,r){return`${e}${t}${n}${Object.entries(Ci(r)).sort(((e,t)=>e[0].localeCompare(t[0])))}`}(e,s,c,l);let d=this._buckets.get(u);const p=d&&"s"===e?d.metric.weight:0;d?(d.metric.add(n),d.timestamp<a&&(d.timestamp=a)):(d={metric:new Ec[e](n),timestamp:a,metricType:e,name:s,unit:c,tags:l},this._buckets.set(u,d));!function(e,t,n,r,o,i){const a=Ol();if(a){const s=xl(a)||new Map,l=`${e}:${t}@${r}`,c=s.get(i);if(c){const[,e]=c;s.set(i,[l,{min:Math.min(e.min,n),max:Math.max(e.max,n),count:e.count+=1,sum:e.sum+=n,tags:e.tags}])}else s.set(i,[l,{min:n,max:n,count:1,sum:n,tags:o}]);Cl||(Cl=new WeakMap),Cl.set(a,s)}}(e,s,"string"==typeof n?d.metric.weight-p:n,c,o,u)}flush(){if(0!==this._buckets.size){if(this._client.captureAggregateMetrics){const e=Array.from(this._buckets).map((([,e])=>e));this._client.captureAggregateMetrics(e)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}}const Qc="MetricsAggregator",Zc=()=>({name:Qc,setupOnce(){},setup(e){e.metricsAggregator=new Kc(e)}});function eu(e,t,n,r={}){const o=qs(),i=Bs();if(o){if(!o.metricsAggregator)return void(ys&&vi.warn("No metrics aggregator enabled. Please add the MetricsAggregator integration to use metrics APIs"));const{unit:a,tags:s,timestamp:l}=r,{release:c,environment:u}=o.getOptions(),d=i.getTransaction(),p={};c&&(p.release=c),u&&(p.environment=u),d&&(p.transaction=Cs(d).description||""),ys&&vi.log(`Adding value of ${n} to ${e} metric ${t}`),o.metricsAggregator.add(e,t,n,a,{...p,...s},l)}}const tu={increment:function(e,t=1,n){eu("c",e,t,n)},distribution:function(e,t,n){eu("d",e,t,n)},set:function(e,t,n){eu("s",e,t,n)},gauge:function(e,t,n){eu("g",e,t,n)},MetricsAggregator:sc(Qc,Zc),metricsAggregatorIntegration:Zc},nu=Xc,ru="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,ou=ii;function iu(){ou.document?ou.document.addEventListener("visibilitychange",(()=>{const e=_l();if(ou.document.hidden&&e){const t="cancelled",{op:n,status:r}=Cs(e);ru&&vi.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${n}`),r||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}})):ru&&vi.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const au=(e,t,n)=>{let r,o;return i=>{t.value>=0&&(i||n)&&(o=t.value-(r||0),(o||void 0===r)&&(r=t.value,t.delta=o,e(t)))}},su=()=>ou.__WEB_VITALS_POLYFILL__?ou.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const e=ou.performance.timing,t=ou.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==t?"back_forward":1===t?"reload":"navigate"};for(const t in e)"navigationStart"!==t&&"toJSON"!==t&&(n[t]=Math.max(e[t]-e.navigationStart,0));return n})()):ou.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],lu=()=>{const e=su();return e&&e.activationStart||0},cu=(e,t)=>{const n=su();let r="navigate";return n&&(r=ou.document&&ou.document.prerendering||lu()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},uu=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{t(e.getEntries())}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},du=(e,t)=>{const n=r=>{"pagehide"!==r.type&&"hidden"!==ou.document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};ou.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))};let pu=-1;const gu=()=>(pu<0&&(ou.document&&ou.document.visibilityState&&(pu="hidden"!==ou.document.visibilityState||ou.document.prerendering?1/0:0),du((({timeStamp:e})=>{pu=e}),!0)),{get firstHiddenTime(){return pu}});let hu=0,fu=1/0,_u=0;const mu=e=>{e.forEach((e=>{e.interactionId&&(fu=Math.min(fu,e.interactionId),_u=Math.max(_u,e.interactionId),hu=_u?(_u-fu)/7+1:0)}))};let vu;const Tu=()=>{"interactionCount"in performance||vu||(vu=uu("event",mu,{type:"event",buffered:!0,durationThreshold:0}))},yu=()=>vu?hu:performance.interactionCount||0,Eu=[],Su={},Iu=e=>{const t=Eu[Eu.length-1],n=Su[e.interactionId];if(n||Eu.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};Su[t.id]=t,Eu.push(t)}Eu.sort(((e,t)=>t.latency-e.latency)),Eu.splice(10).forEach((e=>{delete Su[e.id]}))}},Au=(e,t)=>{t=t||{},Tu();const n=cu("INP");let r;const o=e=>{e.forEach((e=>{if(e.interactionId&&Iu(e),"first-input"===e.entryType){!Eu.some((t=>t.entries.some((t=>e.duration===t.duration&&e.startTime===t.startTime))))&&Iu(e)}}));const t=(()=>{const e=Math.min(Eu.length-1,Math.floor(yu()/50));return Eu[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,r())},i=uu("event",o,{durationThreshold:t.durationThreshold||40});r=au(e,n,t.reportAllChanges),i&&(i.observe({type:"first-input",buffered:!0}),du((()=>{o(i.takeRecords()),n.value<0&&yu()>0&&(n.value=0,n.entries=[]),r(!0)})))},bu={},wu=e=>{ou.document&&(ou.document.prerendering?addEventListener("prerenderingchange",(()=>wu(e)),!0):"complete"!==ou.document.readyState?addEventListener("load",(()=>wu(e)),!0):setTimeout(e,0))},Ou={},Nu={};let Ru,Lu,Pu,Cu,xu;function ku(e,t=!1){return ju("lcp",e,Vu,Pu,t)}function Du(e,t){return Wu(e,t),Nu[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);uu(e,(t=>{Uu(e,{entries:t})}),t)}(e),Nu[e]=!0),qu(e,t)}function Uu(e,t){const n=Ou[e];if(n&&n.length)for(const r of n)try{r(t)}catch(t){ru&&vi.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Gi(r)}\nError:`,t)}}function Mu(){return((e,t={})=>{const n=cu("CLS",0);let r,o=0,i=[];const a=e=>{e.forEach((e=>{if(!e.hadRecentInput){const t=i[0],a=i[i.length-1];o&&0!==i.length&&e.startTime-a.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,i.push(e)):(o=e.value,i=[e]),o>n.value&&(n.value=o,n.entries=i,r&&r())}}))},s=uu("layout-shift",a);if(s){r=au(e,n,t.reportAllChanges);const o=()=>{a(s.takeRecords()),r(!0)};return du(o),o}})((e=>{Uu("cls",{metric:e}),Ru=e}),{reportAllChanges:!0})}function Gu(){return(e=>{const t=gu(),n=cu("FID");let r;const o=e=>{e.startTime<t.firstHiddenTime&&(n.value=e.processingStart-e.startTime,n.entries.push(e),r(!0))},i=e=>{e.forEach(o)},a=uu("first-input",i);r=au(e,n),a&&du((()=>{i(a.takeRecords()),a.disconnect()}),!0)})((e=>{Uu("fid",{metric:e}),Lu=e}))}function Vu(){return(e=>{const t=gu(),n=cu("LCP");let r;const o=e=>{const o=e[e.length-1];if(o){const e=Math.max(o.startTime-lu(),0);e<t.firstHiddenTime&&(n.value=e,n.entries=[o],r())}},i=uu("largest-contentful-paint",o);if(i){r=au(e,n);const t=()=>{bu[n.id]||(o(i.takeRecords()),i.disconnect(),bu[n.id]=!0,r(!0))};return["keydown","click"].forEach((e=>{ou.document&&addEventListener(e,t,{once:!0,capture:!0})})),du(t,!0),t}})((e=>{Uu("lcp",{metric:e}),Pu=e}))}function $u(){return((e,t)=>{t=t||{};const n=cu("TTFB"),r=au(e,n,t.reportAllChanges);wu((()=>{const e=su();if(e){if(n.value=Math.max(e.responseStart-lu(),0),n.value<0||n.value>performance.now())return;n.entries=[e],r(!0)}}))})((e=>{Uu("ttfb",{metric:e}),Cu=e}))}function Fu(){return Au((e=>{Uu("inp",{metric:e}),xu=e}))}function ju(e,t,n,r,o=!1){let i;return Wu(e,t),Nu[e]||(i=n(),Nu[e]=!0),r&&t({metric:r}),qu(e,t,o?i:void 0)}function Wu(e,t){Ou[e]=Ou[e]||[],Ou[e].push(t)}function qu(e,t,n){return()=>{n&&n();const r=Ou[e];if(!r)return;const o=r.indexOf(t);-1!==o&&r.splice(o,1)}}function Bu(e){return"number"==typeof e&&isFinite(e)}function Hu(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}function Ju(e){return e/1e3}function zu(){return ou.addEventListener&&ou.performance}let Yu,Xu,Ku=0,Qu={};function Zu(){const e=zu();if(e&&za){e.mark&&ou.performance.mark("sentry-tracing-init");const t=ju("fid",(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=Ju(za),r=Ju(t.startTime);ru&&vi.log("[Measurements] Adding FID"),Qu.fid={value:e.value,unit:"millisecond"},Qu["mark.fid"]={value:n+r,unit:"second"}}),Gu,Lu),n=function(e,t=!1){return ju("cls",e,Mu,Ru,t)}((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(ru&&vi.log("[Measurements] Adding CLS"),Qu.cls={value:e.value,unit:""},Xu=t)}),!0),r=ku((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(ru&&vi.log("[Measurements] Adding LCP"),Qu.lcp={value:e.value,unit:"millisecond"},Yu=t)}),!0),o=function(e){return ju("ttfb",e,$u,Cu)}((({metric:e})=>{e.entries[e.entries.length-1]&&(ru&&vi.log("[Measurements] Adding TTFB"),Qu.ttfb={value:e.value,unit:"millisecond"})}));return()=>{t(),n(),r(),o()}}return()=>{}}function ed(){Du("longtask",(({entries:e})=>{for(const t of e){const e=_l();if(!e)return;const n=Ju(za+t.startTime),r=Ju(t.duration);e.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r})}}))}function td(){Du("event",(({entries:e})=>{for(const t of e){const e=_l();if(!e)return;if("click"===t.name){const n=Ju(za+t.startTime),r=Ju(t.duration),o={description:ci(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r},i=gi(t.target);i&&(o.attributes={"ui.component_name":i}),e.startChild(o)}}}))}function nd(e,t){if(zu()&&za){const n=function(e,t){return n=({metric:n})=>{if(void 0===n.value)return;const r=n.entries.find((e=>e.duration===n.value&&void 0!==rd[e.name])),o=qs();if(!r||!o)return;const i=rd[r.name],a=o.getOptions(),s=Ju(za+r.startTime),l=Ju(n.value),c=void 0!==r.interactionId?e[r.interactionId]:void 0;if(void 0===c)return;const{routeName:u,parentContext:d,activeTransaction:p,user:g,replayId:h}=c,f=void 0!==g?g.email||g.id||g.ip_address:void 0,_=void 0!==p?p.getProfileId():void 0,m=new $l({startTimestamp:s,endTimestamp:s+l,op:`ui.interaction.${i}`,name:ci(r.target),attributes:{release:a.release,environment:a.environment,transaction:u,...void 0!==f&&""!==f?{user:f}:{},...void 0!==_?{profile_id:_}:{},...void 0!==h?{replay_id:h}:{}},exclusiveTime:n.value,measurements:{inp:{value:n.value,unit:"millisecond"}}}),v=function(e,t,n){if(!bl(t))return!1;let r;return r=void 0!==e&&"function"==typeof t.tracesSampler?t.tracesSampler({transactionContext:e,name:e.name,parentSampled:e.parentSampled,attributes:{...e.data,...e.attributes},location:ou.location}):void 0!==e&&void 0!==e.sampled?e.sampled:void 0!==t.tracesSampleRate?t.tracesSampleRate:1,Jl(r)?!0===r?n:!1===r?0:r*n:(ru&&vi.warn("[Tracing] Discarding interaction span because of invalid sample rate."),!1)}(d,a,t);if(v&&Math.random()<v){const e=m?function(e,t){const n={sent_at:(new Date).toISOString()};return t&&(n.dsn=yi(t)),is(n,e.map(Nc))}([m],o.getDsn()):void 0,t=o&&o.getTransport();t&&e&&t.send(e).then(null,(e=>{ru&&vi.error("Error while sending interaction:",e)}))}},ju("inp",n,Fu,xu);var n}(e,t);return()=>{n()}}return()=>{}}const rd={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function od(e){const t=zu();if(!t||!ou.performance.getEntries||!za)return;ru&&vi.log("[Tracing] Adding & adjusting spans using Performance API");const n=Ju(za),r=t.getEntries(),{op:o,start_timestamp:i}=Cs(e);if(r.slice(Ku).forEach((t=>{const r=Ju(t.startTime),o=Ju(t.duration);if(!("navigation"===e.op&&i&&n+r<i))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{id(e,t,r,n)})),id(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),id(e,t,"fetch",n,"cache","domainLookupStart"),id(e,t,"domainLookup",n,"DNS"),function(e,t,n){t.responseEnd&&(Hu(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+Ju(t.requestStart),endTimestamp:n+Ju(t.responseEnd)}),Hu(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+Ju(t.responseStart),endTimestamp:n+Ju(t.responseEnd)}))}(e,t,n)}(e,t,n);break;case"mark":case"paint":case"measure":{!function(e,t,n,r,o){const i=o+n,a=i+r;Hu(e,{description:t.name,endTimestamp:a,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:i})}(e,t,r,o,n);const i=gu(),a=t.startTime<i.firstHiddenTime;"first-paint"===t.name&&a&&(ru&&vi.log("[Measurements] Adding FP"),Qu.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&a&&(ru&&vi.log("[Measurements] Adding FCP"),Qu.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,r,o,i){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const a=Wa(n),s={};ad(s,t,"transferSize","http.response_transfer_size"),ad(s,t,"encodedBodySize","http.response_content_length"),ad(s,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(s["resource.render_blocking_status"]=t.renderBlockingStatus);a.protocol&&(s["url.scheme"]=a.protocol.split(":").pop());a.host&&(s["server.address"]=a.host);s["url.same_origin"]=n.includes(ou.location.origin);const l=i+r,c=l+o;Hu(e,{description:n.replace(ou.location.origin,""),endTimestamp:c,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:l,data:s})}(e,t,t.name,r,o,n)}})),Ku=Math.max(r.length-1,0),function(e){const t=ou.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),Bu(n.rtt)&&(Qu["connection.rtt"]={value:n.rtt,unit:"millisecond"}));Bu(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`);Bu(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===o){!function(e){const t=su();if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(ru&&vi.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(Qu),["fcp","fp","lcp"].forEach((e=>{if(!Qu[e]||!i||n>=i)return;const t=Qu[e].value,r=n+Ju(t),o=Math.abs(1e3*(r-i)),a=o-t;ru&&vi.log(`[Measurements] Normalized ${e} from ${t} to ${o} (${a})`),Qu[e].value=o}));const t=Qu["mark.fid"];t&&Qu.fid&&(Hu(e,{description:"first input delay",endTimestamp:t.value+Ju(Qu.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:t.value}),delete Qu["mark.fid"]),"fcp"in Qu||delete Qu.cls,Object.keys(Qu).forEach((e=>{Ql(e,Qu[e].value,Qu[e].unit)})),function(e){Yu&&(ru&&vi.log("[Measurements] Adding LCP Data"),Yu.element&&e.setTag("lcp.element",ci(Yu.element)),Yu.id&&e.setTag("lcp.id",Yu.id),Yu.url&&e.setTag("lcp.url",Yu.url.trim().slice(0,200)),e.setTag("lcp.size",Yu.size));Xu&&Xu.sources&&(ru&&vi.log("[Measurements] Adding CLS Data"),Xu.sources.forEach(((t,n)=>e.setTag(`cls.source.${n+1}`,ci(t.node)))))}(e)}Yu=void 0,Xu=void 0,Qu={}}function id(e,t,n,r,o,i){const a=i?t[i]:t[`${n}End`],s=t[`${n}Start`];s&&a&&Hu(e,{op:"browser",origin:"auto.browser.browser.metrics",description:o||n,startTimestamp:r+Ju(s),endTimestamp:r+Ju(a)})}function ad(e,t,n,r){const o=t[n];null!=o&&o<2147483647&&(e[r]=o)}function sd(e,t,n,r,o="auto.http.browser"){if(!bl()||!e.fetchData)return;const i=t(e.fetchData.url);if(e.endTimestamp&&i){const t=e.fetchData.__span;if(!t)return;const n=r[t];return void(n&&(!function(e,t){if(t.response){Il(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus("internal_error");e.end()}(n,e),delete r[t]))}const a=Bs(),s=qs(),{method:l,url:c}=e.fetchData,u=function(e){try{return new URL(e).href}catch(e){return}}(c),d=u?Wa(u).host:void 0,p=i?wl({name:`${l} ${c}`,onlyIfParent:!0,attributes:{url:c,type:"fetch","http.method":l,"http.url":u,"server.address":d,[Gl]:o},op:"http.client"}):void 0;if(p&&(e.fetchData.__span=p.spanContext().spanId,r[p.spanContext().spanId]=p),n(e.fetchData.url)&&s){const t=e.args[0];e.args[1]=e.args[1]||{};const n=e.args[1];n.headers=function(e,t,n,r,o){const i=o||n.getSpan(),a=pl(),{traceId:s,spanId:l,sampled:c,dsc:u}={...a.getPropagationContext(),...n.getPropagationContext()},d=i?Rs(i):os(s,l,c),p=Za(u||(i?Qs(i):Ks(s,t,n))),g=r.headers||("undefined"!=typeof Request&&Jo(e,Request)?e.headers:void 0);if(g){if("undefined"!=typeof Headers&&Jo(g,Headers)){const e=new Headers(g);return e.append("sentry-trace",d),p&&e.append(Ya,p),e}if(Array.isArray(g)){const e=[...g,["sentry-trace",d]];return p&&e.push([Ya,p]),e}{const e="baggage"in g?g.baggage:void 0,t=[];return Array.isArray(e)?t.push(...e):e&&t.push(e),p&&t.push(p),{...g,"sentry-trace":d,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":d,baggage:p}}(t,s,a,n,p)}return p}const ld=["localhost",/^\/(?!\/)/],cd={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:ld,tracePropagationTargets:ld};function ud(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:o,shouldCreateSpanForRequest:i,enableHTTPTimings:a}={traceFetch:cd.traceFetch,traceXHR:cd.traceXHR,...e},s="function"==typeof i?i:e=>!0,l=e=>function(e,t){return Zo(e,t||ld)}(e,r||o),c={};t&&ua((e=>{const t=sd(e,s,l,c);if(t){const n=gd(e.fetchData.url),r=n?Wa(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r})}a&&t&&dd(t)})),n&&Oa((e=>{const t=function(e,t,n,r){const o=e.xhr,i=o&&o[wa];if(!bl()||!o||o.__sentry_own_request__||!i)return;const a=t(i.url);if(e.endTimestamp&&a){const e=o.__sentry_xhr_span_id__;if(!e)return;const t=r[e];return void(t&&void 0!==i.status_code&&(Il(t,i.status_code),t.end(),delete r[e]))}const s=Bs(),l=pl(),c=gd(i.url),u=c?Wa(c).host:void 0,d=a?wl({name:`${i.method} ${i.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":i.method,"http.url":c,url:i.url,"server.address":u,[Gl]:"auto.http.browser"},op:"http.client"}):void 0;d&&(o.__sentry_xhr_span_id__=d.spanContext().spanId,r[o.__sentry_xhr_span_id__]=d);const p=qs();if(o.setRequestHeader&&n(i.url)&&p){const{traceId:e,spanId:t,sampled:n,dsc:r}={...l.getPropagationContext(),...s.getPropagationContext()};!function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(Ya,n)}catch(e){}}(o,d?Rs(d):os(e,t,n),Za(r||(d?Qs(d):Ks(e,p,s))))}return d}(e,s,l,c);a&&t&&dd(t)}))}function dd(e){const{url:t}=Cs(e).data||{};if(!t||"string"!=typeof t)return;const n=Du("resource",(({entries:r})=>{r.forEach((r=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(r)&&r.name.endsWith(t)){(function(e){const{name:t,version:n}=function(e){let t="unknown",n="unknown",r="";for(const o of e){if("/"===o){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=o}r===e&&(t=r);return{name:t,version:n}}(e.nextHopProtocol),r=[];if(r.push(["network.protocol.version",n],["network.protocol.name",t]),!za)return r;return[...r,["http.request.redirect_start",pd(e.redirectStart)],["http.request.fetch_start",pd(e.fetchStart)],["http.request.domain_lookup_start",pd(e.domainLookupStart)],["http.request.domain_lookup_end",pd(e.domainLookupEnd)],["http.request.connect_start",pd(e.connectStart)],["http.request.secure_connection_start",pd(e.secureConnectionStart)],["http.request.connection_end",pd(e.connectEnd)],["http.request.request_start",pd(e.requestStart)],["http.request.response_start",pd(e.responseStart)],["http.request.response_end",pd(e.responseEnd)]]})(r).forEach((t=>e.setAttribute(...t))),setTimeout(n)}}))}))}function pd(e=0){return((za||performance.timeOrigin)+e)/1e3}function gd(e){try{return new URL(e,ou.location.origin).href}catch(e){return}}const hd={...jl,markBackgroundTransactions:!0,routingInstrumentation:function(e,t=!0,n=!0){if(!ou||!ou.location)return void(ru&&vi.warn("Could not initialize routing instrumentation due to invalid location"));let r,o=ou.location.href;t&&(r=e({name:ou.location.pathname,startTimestamp:za?za/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&Ia((({to:t,from:n})=>{void 0===n&&o&&-1!==o.indexOf(t)?o=void 0:n!==t&&(o=void 0,r&&(ru&&vi.log(`[Tracing] Finishing current transaction with op: ${r.op}`),r.end()),r=e({name:ou.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...cd};function fd(e){const t=pi(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function _d(e){const t=e.attributes&&e.attributes[Dl],n=e.data&&e.data[Dl],r=e.metadata&&e.metadata.source;return t||n||r}const md={...jl,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...cd};function vd(e,t){if(!e.emit)return;e.emit("startPageLoadSpan",t);const n=Ol();return"pageload"===(n&&Cs(n).op)?n:void 0}function Td(e,t){if(!e.emit)return;e.emit("startNavigationSpan",t);const n=Ol();return"navigation"===(n&&Cs(n).op)?n:void 0}function yd(e){const t=pi(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}const Ed=10;function Sd(e){const t=e.attributes&&e.attributes[Dl],n=e.data&&e.data[Dl],r=e.metadata&&e.metadata.source;return t||n||r}const Id=ii;let Ad=0;function bd(){return Ad>0}function wd(e,t={},n){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(Ni(e))return e}catch(t){return e}const r=function(){const n=Array.prototype.slice.call(arguments);try{const r=n.map((e=>wd(e,t)));return e.apply(this,r)}catch(e){throw Ad++,setTimeout((()=>{Ad--})),Ws((r=>{r.addEventProcessor((e=>(t.mechanism&&(Yi(e,void 0),Xi(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),Gs(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}catch(e){}Oi(r,e),wi(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>e.name})}catch(e){}return r}const Od="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Nd(e,t){const n=Ld(e,t),r={type:t&&t.name,value:Cd(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function Rd(e,t){return{exception:{values:[Nd(e,t)]}}}function Ld(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(Pd.test(e.message))return 1}return 0}(t);try{return e(n,r)}catch(e){}return[]}const Pd=/Minified React error #\d+;/i;function Cd(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function xd(e,t,n,r){const o=Dd(e,t,n&&n.syntheticException||void 0,r);return Xi(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),Va(o)}function kd(e,t,n="info",r,o){const i=Ud(e,t,r&&r.syntheticException||void 0,o);return i.level=n,r&&r.event_id&&(i.event_id=r.event_id),Va(i)}function Dd(e,t,n,r,o){let i;if(Go(t)&&t.error){return Rd(e,t.error)}if(Vo(t)||Mo(t,"DOMException")){const o=t;if("stack"in t)i=Rd(e,t);else{const t=o.name||(Vo(o)?"DOMError":"DOMException"),a=o.message?`${t}: ${o.message}`:t;i=Ud(e,a,n,r),Yi(i,a)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}if(Uo(t))return Rd(e,t);if(Wo(t)||qo(t)){return i=function(e,t,n,r){const o=qs(),i=o&&o.getOptions().normalizeDepth,a={exception:{values:[{type:qo(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:Md(t,{isUnhandledRejection:r})}]},extra:{__serialized__:Ca(t,i)}};if(n){const t=Ld(e,n);t.length&&(a.exception.values[0].stacktrace={frames:t})}return a}(e,t,n,o),Xi(i,{synthetic:!0}),i}return i=Ud(e,t,n,r),Yi(i,`${t}`),Xi(i,{synthetic:!0}),i}function Ud(e,t,n,r){const o={};if(r&&n){const r=Ld(e,n);r.length&&(o.exception={values:[{value:t,stacktrace:{frames:r}}]})}if(Fo(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return o.logentry={message:e,params:n},o}return o.message=t,o}function Md(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(Ri(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Yo(n[0],t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:Yo(r,t)}return""}(e),r=t?"promise rejection":"exception";if(Go(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(qo(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}function Gd(e,{metadata:t,tunnel:n,dsn:r}){const o={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:yi(r)}},i=function(e){return[{type:"user_report"},e]}(e);return is(o,[i])}class Vd extends gc{constructor(e){!function(e,t,n=[t],r="npm"){const o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${r}:@sentry/${e}`,version:il}))),version:il}),e._metadata=o}(e,"browser",["browser"],Id.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&Id.document&&Id.document.addEventListener("visibilitychange",(()=>{"hidden"===Id.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return xd(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return kd(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(Od&&vi.warn("SDK not enabled, will not capture user feedback."));const t=Gd(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(Od&&vi.log("No outcomes to send"));if(!this._dsn)return void(Od&&vi.log("No dsn provided, will not send outcomes"));Od&&vi.log("Sending outcomes:",e);const t=(n=e,is((r=this._options.tunnel&&yi(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:Ha(),discarded_events:n}]]));var n,r;this._sendEnvelope(t)}}let $d;function Fd(e,t=function(){if($d)return $d;if(la(Id.fetch))return $d=Id.fetch.bind(Id);const e=Id.document;let t=Id.fetch;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(e){Od&&vi.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return $d=t.bind(Id)}()){let n=0,r=0;return Ic(e,(function(o){const i=o.body.length;n+=i,r++;const a={body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,a).then((e=>(n-=i,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return $d=void 0,n-=i,r--,$a(e)}}))}function jd(e){return Ic(e,(function(t){return new Fa(((n,r)=>{const o=new XMLHttpRequest;o.onerror=r,o.onreadystatechange=()=>{4===o.readyState&&n({statusCode:o.status,headers:{"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")}})},o.open("POST",e.url);for(const t in e.headers)Object.prototype.hasOwnProperty.call(e.headers,t)&&o.setRequestHeader(t,e.headers[t]);o.send(t.body)}))}))}const Wd="?";function qd(e,t,n,r){const o={filename:e,function:t,in_app:!0};return void 0!==n&&(o.lineno=n),void 0!==r&&(o.colno=r),o}const Bd=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Hd=/\((\S*)(?::(\d+))(?::(\d+))\)/,Jd=[30,e=>{const t=Bd.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=Hd.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,n]=ip(t[1]||Wd,t[2]);return qd(n,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],zd=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Yd=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Xd=[50,e=>{const t=zd.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=Yd.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||Wd;return[n,e]=ip(n,e),qd(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],Kd=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Qd=[40,e=>{const t=Kd.exec(e);return t?qd(t[2],t[1]||Wd,+t[3],t[4]?+t[4]:void 0):void 0}],Zd=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,ep=[10,e=>{const t=Zd.exec(e);return t?qd(t[2],t[3]||Wd,+t[1]):void 0}],tp=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,np=[20,e=>{const t=tp.exec(e);return t?qd(t[5],t[3]||t[4]||Wd,+t[1],+t[2]):void 0}],rp=[Jd,Xd,Qd],op=Ui(...rp),ip=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:Wd,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},ap=1024,sp="Breadcrumbs",lp=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:sp,setupOnce(){},setup(e){t.console&&qi(function(e){return function(t){if(qs()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:Ba(t.level),message:Ko(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${Ko(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}Fs(n,{input:t.args,level:t.level})}}(e)),t.dom&&ra(function(e,t){return function(n){if(qs()!==e)return;let r,o,i="object"==typeof t?t.serializeAttribute:void 0,a="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;a&&a>ap&&(Od&&vi.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${a} was configured. Sentry will use 1024 instead.`),a=ap),"string"==typeof i&&(i=[i]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=ci(t,{keyAttrs:i,maxStringLength:a}),o=gi(t)}catch(e){r="<unknown>"}if(0===r.length)return;const s={category:`ui.${n.name}`,message:r};o&&(s.data={"ui.component_name":o}),Fs(s,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&Oa(function(e){return function(t){if(qs()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,o=t.xhr[wa];if(!n||!r||!o)return;const{method:i,url:a,status_code:s,body:l}=o;Fs({category:"xhr",data:{method:i,url:a,status_code:s},type:"http"},{xhr:t.xhr,input:l,startTimestamp:n,endTimestamp:r})}}(e)),t.fetch&&ua(function(e){return function(t){if(qs()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){Fs({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:r})}else{const e=t.response;Fs({category:"fetch",data:{...t.fetchData,status_code:e&&e.status},type:"http"},{input:t.args,response:e,startTimestamp:n,endTimestamp:r})}}}(e)),t.history&&Ia(function(e){return function(t){if(qs()!==e)return;let n=t.from,r=t.to;const o=Wa(Id.location.href);let i=n?Wa(n):void 0;const a=Wa(r);i&&i.path||(i=o),o.protocol===a.protocol&&o.host===a.host&&(r=a.relative),o.protocol===i.protocol&&o.host===i.host&&(n=i.relative),Fs({category:"navigation",data:{from:n,to:r}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function(e){return function(t){qs()===e&&Fs({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:zi(t)},{event:t})}}(e))}}},cp=sc(sp,lp);const up="Dedupe",dp=()=>{let e;return{name:up,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!hp(e,t))return!1;if(!gp(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=fp(t),r=fp(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!hp(e,t))return!1;if(!gp(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return Od&&vi.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}},pp=sc(up,dp);function gp(e,t){let n=_p(e),r=_p(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function hp(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function fp(e){return e.exception&&e.exception.values&&e.exception.values[0]}function _p(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}const mp="GlobalHandlers",vp=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:mp,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){fa((t=>{const{stackParser:n,attachStacktrace:r}=Sp();if(qs()!==e||bd())return;const{msg:o,url:i,line:a,column:s,error:l}=t,c=void 0===l&&$o(o)?function(e,t,n,r){const o=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let i=Go(e)?e.message:e,a="Error";const s=i.match(o);s&&(a=s[1],i=s[2]);const l={exception:{values:[{type:a,value:i}]}};return yp(l,t,n,r)}(o,i,a,s):yp(Dd(n,l||o,void 0,r,!1),i,a,s);c.level="error",$s(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})}))}(e),Ep("onerror")),t.onunhandledrejection&&(!function(e){va((t=>{const{stackParser:n,attachStacktrace:r}=Sp();if(qs()!==e||bd())return;const o=function(e){if(jo(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(e){}return e}(t),i=jo(o)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(o)}`}]}}:Dd(n,o,void 0,r,!0);i.level="error",$s(i,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),Ep("onunhandledrejection"))}}},Tp=sc(mp,vp);function yp(e,t,n,r){const o=e.exception=e.exception||{},i=o.values=o.values||[],a=i[0]=i[0]||{},s=a.stacktrace=a.stacktrace||{},l=s.frames=s.frames||[],c=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(n,10))?void 0:n,d=$o(t)&&t.length>0?t:di();return 0===l.length&&l.push({colno:c,filename:d,function:"?",in_app:!0,lineno:u}),e}function Ep(e){Od&&vi.log(`Global Handler attached: ${e}`)}function Sp(){const e=qs();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Ip="HttpContext",Ap=()=>({name:Ip,setupOnce(){},preprocessEvent(e){if(!Id.navigator&&!Id.location&&!Id.document)return;const t=e.request&&e.request.url||Id.location&&Id.location.href,{referrer:n}=Id.document||{},{userAgent:r}=Id.navigator||{},o={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},i={...e.request,...t&&{url:t},headers:o};e.request=i}}),bp=sc(Ip,Ap),wp="LinkedErrors",Op=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:wp,setupOnce(){},preprocessEvent(e,r,o){const i=o.getOptions();ei(Nd,i.stackParser,i.maxValueLength,n,t,e,r)}}},Np=sc(wp,Op),Rp=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Lp="TryCatch",Pp=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:Lp,setupOnce(){t.setTimeout&&bi(Id,"setTimeout",xp),t.setInterval&&bi(Id,"setInterval",xp),t.requestAnimationFrame&&bi(Id,"requestAnimationFrame",kp),t.XMLHttpRequest&&"XMLHttpRequest"in Id&&bi(XMLHttpRequest.prototype,"send",Dp);const e=t.eventTarget;if(e){(Array.isArray(e)?e:Rp).forEach(Up)}}}},Cp=sc(Lp,Pp);function xp(e){return function(...t){const n=t[0];return t[0]=wd(n,{mechanism:{data:{function:Gi(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function kp(e){return function(t){return e.apply(this,[wd(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Gi(e)},handled:!1,type:"instrument"}})])}}function Dp(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&bi(n,e,(function(t){const n={mechanism:{data:{function:e,handler:Gi(t)},handled:!1,type:"instrument"}},r=Ni(t);return r&&(n.mechanism.data.handler=Gi(r)),wd(t,n)}))})),e.apply(this,t)}}function Up(e){const t=Id,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(bi(n,"addEventListener",(function(t){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=wd(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Gi(r),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,wd(r,{mechanism:{data:{function:"addEventListener",handler:Gi(r),target:e},handled:!1,type:"instrument"}}),o])}})),bi(n,"removeEventListener",(function(e){return function(t,n,r){const o=n;try{const n=o&&o.__sentry_wrapped__;n&&e.call(this,t,n,r)}catch(e){}return e.call(this,t,o,r)}})))}const Mp=[$c(),Hc(),Pp(),lp(),vp(),Op(),dp(),Ap()];function Gp(e){return[...Mp]}function Vp(e={}){void 0===e.defaultIntegrations&&(e.defaultIntegrations=Gp()),void 0===e.release&&("string"==typeof __SENTRY_RELEASE__&&(e.release=__SENTRY_RELEASE__),Id.SENTRY_RELEASE&&Id.SENTRY_RELEASE.id&&(e.release=Id.SENTRY_RELEASE.id)),void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0);const t={...e,stackParser:(n=e.stackParser||op,Array.isArray(n)?Ui(...n):n),integrations:oc(e),transport:e.transport||(sa()?Fd:jd)};var n;!function(e,t){!0===t.debug&&(ys?vi.enable():mi((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),Bs().update(t.initialScope);const n=new e(t);Sc(n),function(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}(n)}(Vd,t),e.autoSessionTracking&&function(){if(void 0===Id.document)return void(Od&&vi.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));Hs({ignoreDuration:!0}),Ys(),Ia((({from:e,to:t})=>{void 0!==e&&e!==t&&(Hs({ignoreDuration:!0}),Ys())}))}()}var $p=Object.freeze({__proto__:null,Breadcrumbs:cp,Dedupe:pp,GlobalHandlers:Tp,HttpContext:bp,LinkedErrors:Np,TryCatch:Cp});const Fp=ii,jp="sentryReplaySession",Wp="Unable to send Replay",qp=15e4,Bp=5e3,Hp=2e7,Jp=36e5;function zp(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}var Yp;function Xp(e){const t=zp([e,"optionalAccess",e=>e.host]);return Boolean(zp([t,"optionalAccess",e=>e.shadowRoot])===e)}function Kp(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function Qp(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,Zp).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}var t}function Zp(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=Qp(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if(function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":"))return function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(e.cssText);return t||e.cssText}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Yp||(Yp={}));class eg{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;const t=zp([this,"access",e=>e.getMeta,"call",t=>t(e),"optionalAccess",e=>e.id]);return r=()=>-1,null!=(n=t)?n:r();var n,r}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function tg({maskInputOptions:e,tagName:t,type:n}){return"OPTION"===t&&(t="SELECT"),Boolean(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function ng({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function rg(e){return e.toLowerCase()}function og(e){return e.toUpperCase()}const ig="__rrweb_original__";function ag(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?rg(t):null}function sg(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}let lg=1;const cg=new RegExp("[^a-z0-9-_:]");function ug(){return lg++}let dg,pg;const gg=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,hg=/^(?:[a-z+]+:)?\/\//i,fg=/^www\..*/i,_g=/^(data:)([^,]*),(.*)/i;function mg(e,t){return(e||"").replace(gg,((e,n,r,o,i,a)=>{const s=r||i||a,l=n||o||"";if(!s)return e;if(hg.test(s)||fg.test(s))return`url(${l}${s}${l})`;if(_g.test(s))return`url(${l}${s}${l})`;if("/"===s[0])return`url(${l}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+s}${l})`;const c=t.split("/"),u=s.split("/");c.pop();for(const e of u)"."!==e&&(".."===e?c.pop():c.push(e));return`url(${l}${c.join("/")}${l})`}))}const vg=/^[^ \t\n\r\u000c]+/,Tg=/^[, \t\n\r\u000c]+/;function yg(e,t){if(!t||""===t.trim())return t;const n=e.createElement("a");return n.href=t,n.href}function Eg(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function Sg(){const e=document.createElement("a");return e.href="",e.href}function Ig(e,t,n,r,o,i){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?yg(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}const o=[];for(;r(Tg),!(n>=t.length);){let i=r(vg);if(","===i.slice(-1))i=yg(e,i.substring(0,i.length-1)),o.push(i);else{let r="";i=yg(e,i);let a=!1;for(;;){const e=t.charAt(n);if(""===e){o.push((i+r).trim());break}if(a)")"===e&&(a=!1);else{if(","===e){n+=1,o.push((i+r).trim());break}"("===e&&(a=!0)}r+=e,n+=1}}}return o.join(", ")}(e,r):"style"===n?mg(r,Sg()):"object"===t&&"data"===n?yg(e,r):"function"==typeof i?i(n,r,o):r:yg(e,r):r}function Ag(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function bg(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:bg(e.parentNode,t,n,r+1):-1}function wg(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}function Og(e,t,n,r,o,i){try{const a=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===a)return!1;if("INPUT"===a.tagName){const e=a.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let s=-1,l=-1;if(i){if(l=bg(a,wg(r,o)),l<0)return!0;s=bg(a,wg(t,n),l>=0?l:1/0)}else{if(s=bg(a,wg(t,n)),s<0)return!1;l=bg(a,wg(r,o),s>=0?s:1/0)}return s>=0?!(l>=0)||s<=l:!(l>=0)&&!!i}catch(e){}return!!i}function Ng(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:a,maskAllText:s,maskAttributeFn:l,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:g,maskInputOptions:h={},maskTextFn:f,maskInputFn:_,dataURLOptions:m={},inlineImages:v,recordCanvas:T,keepIframeSrcFn:y,newlyAddedElement:E=!1}=t,S=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:Yp.Document,childNodes:[],compatMode:e.compatMode}:{type:Yp.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Yp.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:S};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:o,unblockSelector:i,inlineStylesheet:a,maskInputOptions:s={},maskAttributeFn:l,maskInputFn:c,dataURLOptions:u={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:g,newlyAddedElement:h=!1,rootId:f,maskAllText:_,maskTextClass:m,unmaskTextClass:v,maskTextSelector:T,unmaskTextSelector:y}=t,E=function(e,t,n,r){try{if(r&&e.matches(r))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,r,o,i),S=function(e){if(e instanceof HTMLFormElement)return"form";const t=rg(e.tagName);return cg.test(t)?"div":t}(e);let I={};const A=e.attributes.length;for(let t=0;t<A;t++){const r=e.attributes[t];r.name&&!Ag(S,r.name,r.value)&&(I[r.name]=Ig(n,S,rg(r.name),r.value,e,l))}if("link"===S&&a){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let r=null;t&&(r=Qp(t)),r&&(delete I.rel,delete I.href,I._cssText=mg(r,t.href))}if("style"===S&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=Qp(e.sheet);t&&(I._cssText=mg(t,Sg()))}if("input"===S||"textarea"===S||"select"===S||"option"===S){const t=e,n=ag(t),r=sg(t,og(S),n),o=t.checked;if("submit"!==n&&"button"!==n&&r){const e=Og(t,m,T,v,y,tg({type:n,tagName:og(S),maskInputOptions:s}));I.value=ng({isMasked:e,element:t,value:r,maskInputFn:c})}o&&(I.checked=o)}"option"===S&&(e.selected&&!s.select?I.selected=!0:delete I.selected);if("canvas"===S&&p)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const o=t.getImageData,i=ig in o?o[ig]:o;if(new Uint32Array(i.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(I.rr_dataURL=e.toDataURL(u.type,u.quality));else if(!("__context"in e)){const t=e.toDataURL(u.type,u.quality),n=document.createElement("canvas");n.width=e.width,n.height=e.height;t!==n.toDataURL(u.type,u.quality)&&(I.rr_dataURL=t)}if("img"===S&&d){dg||(dg=n.createElement("canvas"),pg=dg.getContext("2d"));const t=e,r=t.crossOrigin;t.crossOrigin="anonymous";const o=()=>{t.removeEventListener("load",o);try{dg.width=t.naturalWidth,dg.height=t.naturalHeight,pg.drawImage(t,0,0),I.rr_dataURL=dg.toDataURL(u.type,u.quality)}catch(e){console.warn(`Cannot inline img src=${t.currentSrc}! Error: ${e}`)}r?I.crossOrigin=r:t.removeAttribute("crossorigin")};t.complete&&0!==t.naturalWidth?o():t.addEventListener("load",o)}"audio"!==S&&"video"!==S||(I.rr_mediaState=e.paused?"paused":"played",I.rr_mediaCurrentTime=e.currentTime);h||(e.scrollLeft&&(I.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(I.rr_scrollTop=e.scrollTop));if(E){const{width:t,height:n}=e.getBoundingClientRect();I={class:I.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==S||g(I.src)||(e.contentDocument||(I.rr_src=I.src),delete I.src);let b;try{customElements.get(S)&&(b=!0)}catch(e){}return{type:Yp.Element,tagName:S,attributes:I,childNodes:[],isSVG:Eg(e)||void 0,needBlock:E,rootId:f,isCustom:b}}(e,{doc:n,blockClass:o,blockSelector:i,unblockSelector:a,inlineStylesheet:g,maskAttributeFn:l,maskInputOptions:h,maskInputFn:_,dataURLOptions:m,inlineImages:v,recordCanvas:T,keepIframeSrcFn:y,newlyAddedElement:E,rootId:S,maskAllText:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:i,unmaskTextSelector:a,maskTextFn:s,maskInputOptions:l,maskInputFn:c,rootId:u}=t,d=e.parentNode&&e.parentNode.tagName;let p=e.textContent;const g="STYLE"===d||void 0,h="SCRIPT"===d||void 0,f="TEXTAREA"===d||void 0;if(g&&p){try{e.nextSibling||e.previousSibling||zp([e,"access",e=>e.parentNode,"access",e=>e.sheet,"optionalAccess",e=>e.cssRules])&&(p=Qp(e.parentNode.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}p=mg(p,Sg())}h&&(p="SCRIPT_PLACEHOLDER");const _=Og(e,r,i,o,a,n);g||h||f||!p||!_||(p=s?s(p,e.parentElement):p.replace(/[\S]/g,"*"));f&&p&&(l.textarea||_)&&(p=c?c(p,e.parentNode):p.replace(/[\S]/g,"*"));if("OPTION"===d&&p){p=ng({isMasked:Og(e,r,i,o,a,tg({type:null,tagName:d,maskInputOptions:l})),element:e,value:p,maskInputFn:c})}return{type:Yp.Text,textContent:p||"",isStyle:g,rootId:u}}(e,{maskAllText:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:f,maskInputOptions:h,maskInputFn:_,rootId:S});case e.CDATA_SECTION_NODE:return{type:Yp.CDATA,textContent:"",rootId:S};case e.COMMENT_NODE:return{type:Yp.Comment,textContent:e.textContent||"",rootId:S};default:return!1}}function Rg(e){return null==e?"":e.toLowerCase()}function Lg(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:a,maskAllText:s,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:g=!0,maskInputOptions:h={},maskAttributeFn:f,maskTextFn:_,maskInputFn:m,slimDOMOptions:v,dataURLOptions:T={},inlineImages:y=!1,recordCanvas:E=!1,onSerialize:S,onIframeLoad:I,iframeLoadTimeout:A=5e3,onStylesheetLoad:b,stylesheetLoadTimeout:w=5e3,keepIframeSrcFn:O=()=>!1,newlyAddedElement:N=!1}=t;let{preserveWhiteSpace:R=!0}=t;const L=Ng(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:s,unblockSelector:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,inlineStylesheet:g,maskInputOptions:h,maskAttributeFn:f,maskTextFn:_,maskInputFn:m,dataURLOptions:T,inlineImages:y,recordCanvas:E,keepIframeSrcFn:O,newlyAddedElement:N});if(!L)return console.warn(e,"not serialized"),null;let P;P=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===Yp.Comment)return!0;if(e.type===Yp.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(Rg(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Rg(e.attributes.name)||"icon"===Rg(e.attributes.rel)||"apple-touch-icon"===Rg(e.attributes.rel)||"shortcut icon"===Rg(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&Rg(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Rg(e.attributes.property).match(/^(og|twitter|fb):/)||Rg(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===Rg(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===Rg(e.attributes.name)||"googlebot"===Rg(e.attributes.name)||"bingbot"===Rg(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===Rg(e.attributes.name)||"generator"===Rg(e.attributes.name)||"framework"===Rg(e.attributes.name)||"publisher"===Rg(e.attributes.name)||"progid"===Rg(e.attributes.name)||Rg(e.attributes.property).match(/^article:/)||Rg(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===Rg(e.attributes.name)||"yandex-verification"===Rg(e.attributes.name)||"csrf-token"===Rg(e.attributes.name)||"p:domain_verify"===Rg(e.attributes.name)||"verify-v1"===Rg(e.attributes.name)||"verification"===Rg(e.attributes.name)||"shopify-checkout-api-token"===Rg(e.attributes.name)))return!0}}return!1}(L,v)&&(R||L.type!==Yp.Text||L.isStyle||L.textContent.replace(/^\s+|\s+$/gm,"").length)?ug():-2;const C=Object.assign(L,{id:P});if(r.add(e,C),-2===P)return null;S&&S(e);let x=!p;if(C.type===Yp.Element){x=x&&!C.needBlock,delete C.needBlock;const t=e.shadowRoot;t&&Kp(t)&&(C.isShadowHost=!0)}if((C.type===Yp.Document||C.type===Yp.Element)&&x){v.headWhitespace&&C.type===Yp.Element&&"head"===C.tagName&&(R=!1);const t={doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:s,unblockSelector:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:p,inlineStylesheet:g,maskInputOptions:h,maskAttributeFn:f,maskTextFn:_,maskInputFn:m,slimDOMOptions:v,dataURLOptions:T,inlineImages:y,recordCanvas:E,preserveWhiteSpace:R,onSerialize:S,onIframeLoad:I,iframeLoadTimeout:A,onStylesheetLoad:b,stylesheetLoadTimeout:w,keepIframeSrcFn:O};for(const n of Array.from(e.childNodes)){const e=Lg(n,t);e&&C.childNodes.push(e)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=Lg(n,t);r&&(Kp(e.shadowRoot)&&(r.isShadow=!0),C.childNodes.push(r))}}return e.parentNode&&Xp(e.parentNode)&&Kp(e.parentNode)&&(C.isShadow=!0),C.type===Yp.Element&&"iframe"===C.tagName&&function(e,t,n){const r=e.contentWindow;if(!r)return;let o,i=!1;try{o=r.document.readyState}catch(e){return}if("complete"!==o){const r=setTimeout((()=>{i||(t(),i=!0)}),n);return void e.addEventListener("load",(()=>{clearTimeout(r),i=!0,t()}))}const a="about:blank";if(r.location.href!==a||e.src===a||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=e.contentDocument;if(t&&I){const n=Lg(t,{doc:t,mirror:r,blockClass:o,blockSelector:i,unblockSelector:a,maskAllText:s,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:g,maskInputOptions:h,maskAttributeFn:f,maskTextFn:_,maskInputFn:m,slimDOMOptions:v,dataURLOptions:T,inlineImages:y,recordCanvas:E,preserveWhiteSpace:R,onSerialize:S,onIframeLoad:I,iframeLoadTimeout:A,onStylesheetLoad:b,stylesheetLoadTimeout:w,keepIframeSrcFn:O});n&&I(e,n)}}),A),C.type===Yp.Element&&"link"===C.tagName&&"stylesheet"===C.attributes.rel&&function(e,t,n){let r,o=!1;try{r=e.sheet}catch(e){return}if(r)return;const i=setTimeout((()=>{o||(t(),o=!0)}),n);e.addEventListener("load",(()=>{clearTimeout(i),o=!0,t()}))}(e,(()=>{if(b){const t=Lg(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:a,maskAllText:s,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:g,maskInputOptions:h,maskAttributeFn:f,maskTextFn:_,maskInputFn:m,slimDOMOptions:v,dataURLOptions:T,inlineImages:y,recordCanvas:E,preserveWhiteSpace:R,onSerialize:S,onIframeLoad:I,iframeLoadTimeout:A,onStylesheetLoad:b,stylesheetLoadTimeout:w,keepIframeSrcFn:O});t&&b(e,t)}}),w),C}function Pg(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}function Cg(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const xg="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let kg={map:{},getId:()=>(console.error(xg),-1),getNode:()=>(console.error(xg),null),removeNodeFromMap(){console.error(xg)},has:()=>(console.error(xg),!1),reset(){console.error(xg)}};function Dg(e,t,n={}){let r=null,o=0;return function(...i){const a=Date.now();o||!1!==n.leading||(o=a);const s=t-(a-o),l=this;s<=0||s>t?(r&&(!function(...e){th("clearTimeout")(...e)}(r),r=null),o=a,e.apply(l,i)):r||!1===n.trailing||(r=nh((()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(l,i)}),s))}}function Ug(e,t,n,r,o=window){const i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){nh((()=>{n.set.call(this,e)}),0),i&&i.set&&i.set.call(this,e)}}),()=>Ug(e,t,i||{},!0)}function Mg(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(kg=new Proxy(kg,{get:(e,t,n)=>("map"===t&&console.error(xg),Reflect.get(e,t,n))}));let Gg=Date.now;function Vg(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:Pg([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollLeft])||Pg([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollLeft])||Pg([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:Pg([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollTop])||Pg([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollTop])||Pg([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollTop])||0}}function $g(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Fg(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function jg(e){if(!e)return null;return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}function Wg(e,t,n,r,o){if(!e)return!1;const i=jg(e);if(!i)return!1;const a=wg(t,n);if(!o){const e=r&&i.matches(r);return a(i)&&!e}const s=bg(i,a);let l=-1;return!(s<0)&&(r&&(l=bg(i,wg(null,r))),s>-1&&l<0||s<l)}function qg(e,t){return-2===t.getId(e)}function Bg(e,t){if(Xp(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||Bg(e.parentNode,t))}function Hg(e){return Boolean(e.changedTouches)}function Jg(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function zg(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function Yg(e){return Boolean(Pg([e,"optionalAccess",e=>e.shadowRoot]))}/[1-9][0-9]{12}/.test(Date.now().toString())||(Gg=()=>(new Date).getTime());class Xg{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return t=this.styleIDMap.get(e),n=()=>-1,null!=t?t:n();var t,n}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Kg(e){let t=null;return Pg([e,"access",e=>e.getRootNode,"optionalCall",e=>e(),"optionalAccess",e=>e.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function Qg(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=Kg(n);)n=t;return n}(e);return t.contains(n)}function Zg(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||Qg(e))}const eh={};function th(e){const t=eh[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return eh[e]=r.bind(window)}function nh(...e){return th("setTimeout")(...e)}var rh=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(rh||{}),oh=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(oh||{}),ih=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(ih||{}),ah=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(ah||{});function sh(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}function lh(e){return"__ln"in e}class ch{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=sh([t,"optionalAccess",e=>e.next])||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&lh(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&lh(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const uh=(e,t)=>`${e}@${t}`;class dh{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new ch,r=e=>{let t=e,n=-2;for(;-2===n;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},o=o=>{if(!o.parentNode||!Zg(o))return;const i=Xp(o.parentNode)?this.mirror.getId(Kg(o)):this.mirror.getId(o.parentNode),a=r(o);if(-1===i||-1===a)return n.addNode(o);const s=Lg(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{Jg(e,this.mirror)&&this.iframeManager.addIframe(e),zg(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),Yg(o)&&this.shadowDomManager.addShadowRoot(o.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});s&&(e.push({parentId:i,nextId:a,node:s}),t.add(s.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)gh(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||o(e);for(const e of this.addedSet)fh(this.droppedSet,e)||gh(this.removes,e,this.mirror)?fh(this.movedSet,e)?o(e):this.droppedSet.add(e):o(e);let i=null;for(;n.length;){let e=null;if(i){const t=this.mirror.getId(i.value.parentNode),n=r(i.value);-1!==t&&-1!==n&&(e=i)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}i=e.previous,n.removeNode(e.value),o(e.value)}const a={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(a.texts.length||a.attributes.length||a.removes.length||a.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=e=>{if(!qg(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;Wg(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:Og(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,jg(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.attributeName,r=e.target.getAttribute(n);if("value"===n){const n=ag(t),o=t.tagName;r=sg(t,o,n);const i=tg({maskInputOptions:this.maskInputOptions,tagName:o,type:n});r=ng({isMasked:Og(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,i),element:t,value:r,maskInputFn:this.maskInputFn})}if(Wg(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||r===e.oldValue)return;let o=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===n&&!this.keepIframeSrcFn(r)){if(t.contentDocument)return;n="rr_src"}if(o||(o={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(e.target,o)),"type"===n&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!Ag(t.tagName,n)&&(o.attributes[n]=Ig(this.doc,rg(t.tagName),rg(n),r,t,this.maskAttributeFn),"style"===n)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}const n=this.unattachedDoc.createElement("span");e.oldValue&&n.setAttribute("style",e.oldValue);for(const e of Array.from(t.style)){const r=t.style.getPropertyValue(e),i=t.style.getPropertyPriority(e);r!==n.style.getPropertyValue(e)||i!==n.style.getPropertyPriority(e)?o.styleDiff[e]=""===i?r:[r,i]:o._unchangedStyles[e]=[r,i]}for(const e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(o.styleDiff[e]=!1)}break}case"childList":if(Wg(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=Xp(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);Wg(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||qg(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(ph(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||Bg(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[uh(n,r)]?ph(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!Xp(e.target)||!Kp(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(qg(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[uh(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Wg(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),Yg(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function ph(e,t){e.delete(t),t.childNodes.forEach((t=>ph(e,t)))}function gh(e,t,n){return 0!==e.length&&hh(e,t,n)}function hh(e,t,n){const{parentNode:r}=t;if(!r)return!1;const o=n.getId(r);return!!e.some((e=>e.id===o))||hh(e,r,n)}function fh(e,t){return 0!==e.size&&_h(e,t)}function _h(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||_h(e,n))}let mh;const vh=e=>{if(!mh)return e;return(...t)=>{try{return e(...t)}catch(e){if(mh&&!0===mh(e))return()=>{};throw e}}};function Th(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}const yh=[];function Eh(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function Sh(e,t){const n=new dh;yh.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const o=Th([window,"optionalAccess",e=>e.Zone,"optionalAccess",e=>e.__symbol__,"optionalCall",e=>e("MutationObserver")]);o&&window[o]&&(r=window[o]);const i=new r(vh((t=>{e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)})));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function Ih({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:a}){if(!1===a.mouseInteraction)return()=>{};const s=!0===a.mouseInteraction||void 0===a.mouseInteraction?{}:a.mouseInteraction,l=[];let c=null;return Object.keys(ih).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==s[e])).forEach((a=>{let s=rg(a);const u=(t=>a=>{const s=Eh(a);if(Wg(s,r,o,i,!0))return;let l=null,u=t;if("pointerType"in a){switch(a.pointerType){case"mouse":l=ah.Mouse;break;case"touch":l=ah.Touch;break;case"pen":l=ah.Pen}l===ah.Touch?ih[t]===ih.MouseDown?u="TouchStart":ih[t]===ih.MouseUp&&(u="TouchEnd"):ah.Pen}else Hg(a)&&(l=ah.Touch);null!==l?(c=l,(u.startsWith("Touch")&&l===ah.Touch||u.startsWith("Mouse")&&l===ah.Mouse)&&(l=null)):ih[t]===ih.Click&&(l=c,c=null);const d=Hg(a)?a.changedTouches[0]:a;if(!d)return;const p=n.getId(s),{clientX:g,clientY:h}=d;vh(e)({type:ih[u],id:p,x:g,y:h,...null!==l&&{pointerType:l}})})(a);if(window.PointerEvent)switch(ih[a]){case ih.MouseDown:case ih.MouseUp:s=s.replace("mouse","pointer");break;case ih.TouchStart:case ih.TouchEnd:return}l.push(Cg(s,u,t))})),vh((()=>{l.forEach((e=>e()))}))}function Ah({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:a}){return Cg("scroll",vh(Dg(vh((a=>{const s=Eh(a);if(!s||Wg(s,r,o,i,!0))return;const l=n.getId(s);if(s===t&&t.defaultView){const n=Vg(t.defaultView);e({id:l,x:n.left,y:n.top})}else e({id:l,x:s.scrollLeft,y:s.scrollTop})})),a.scroll||100)),t)}const bh=["INPUT","TEXTAREA","SELECT"],wh=new WeakMap;function Oh({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,ignoreClass:a,ignoreSelector:s,maskInputOptions:l,maskInputFn:c,sampling:u,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:g,maskTextSelector:h,unmaskTextSelector:f}){function _(e){let n=Eh(e);const u=e.isTrusted,_=n&&og(n.tagName);if("OPTION"===_&&(n=n.parentElement),!n||!_||bh.indexOf(_)<0||Wg(n,r,o,i,!0))return;const v=n;if(v.classList.contains(a)||s&&v.matches(s))return;const T=ag(n);let y=sg(v,_,T),E=!1;const S=tg({maskInputOptions:l,tagName:_,type:T}),I=Og(n,p,h,g,f,S);"radio"!==T&&"checkbox"!==T||(E=n.checked),y=ng({isMasked:I,element:n,value:y,maskInputFn:c}),m(n,d?{text:y,isChecked:E,userTriggered:u}:{text:y,isChecked:E});const A=n.name;"radio"===T&&A&&E&&t.querySelectorAll(`input[type="radio"][name="${A}"]`).forEach((e=>{if(e!==n){const t=ng({isMasked:I,element:e,value:sg(e,_,T),maskInputFn:c});m(e,d?{text:t,isChecked:!E,userTriggered:!1}:{text:t,isChecked:!E})}}))}function m(t,r){const o=wh.get(t);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){wh.set(t,r);const o=n.getId(t);vh(e)({...r,id:o})}}const v=("last"===u.input?["change"]:["input","change"]).map((e=>Cg(e,vh(_),t))),T=t.defaultView;if(!T)return()=>{v.forEach((e=>e()))};const y=T.Object.getOwnPropertyDescriptor(T.HTMLInputElement.prototype,"value"),E=[[T.HTMLInputElement.prototype,"value"],[T.HTMLInputElement.prototype,"checked"],[T.HTMLSelectElement.prototype,"value"],[T.HTMLTextAreaElement.prototype,"value"],[T.HTMLSelectElement.prototype,"selectedIndex"],[T.HTMLOptionElement.prototype,"selected"]];return y&&y.set&&v.push(...E.map((e=>Ug(e[0],e[1],{set(){vh(_)({target:this,isTrusted:!1})}},!1,T)))),vh((()=>{v.forEach((e=>e()))}))}function Nh(e){return function(e,t){if(Ch("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||Ch("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||Ch("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||Ch("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function Rh(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function Lh({mirror:e,stylesheetManager:t},n){let r=null;r="#document"===n.nodeName?e.getId(n):e.getId(n.host);const o="#document"===n.nodeName?Th([n,"access",e=>e.defaultView,"optionalAccess",e=>e.Document]):Th([n,"access",e=>e.ownerDocument,"optionalAccess",e=>e.defaultView,"optionalAccess",e=>e.ShadowRoot]),i=Th([o,"optionalAccess",e=>e.prototype])?Object.getOwnPropertyDescriptor(Th([o,"optionalAccess",e=>e.prototype]),"adoptedStyleSheets"):void 0;return null!==r&&-1!==r&&o&&i?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return Th([i,"access",e=>e.get,"optionalAccess",e=>e.call,"call",e=>e(this)])},set(e){const n=Th([i,"access",e=>e.set,"optionalAccess",e=>e.call,"call",t=>t(this,e)]);if(null!==r&&-1!==r)try{t.adoptStyleSheets(e,r)}catch(e){}return n}}),vh((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))):()=>{}}function Ph(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const r=Sh(e,e.doc),o=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,i="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let a,s=[];const l=Dg(vh((t=>{const n=Date.now()-a;e(s.map((e=>(e.timeOffset-=n,e))),t),s=[],a=null})),i),c=vh(Dg(vh((e=>{const t=Eh(e),{clientX:n,clientY:o}=Hg(e)?e.changedTouches[0]:e;a||(a=Gg()),s.push({x:n,y:o,id:r.getId(t),timeOffset:Gg()-a}),l("undefined"!=typeof DragEvent&&e instanceof DragEvent?oh.Drag:e instanceof MouseEvent?oh.MouseMove:oh.TouchMove)})),o,{trailing:!1})),u=[Cg("mousemove",c,n),Cg("touchmove",c,n),Cg("drag",c,n)];return vh((()=>{u.forEach((e=>e()))}))}(e),i=Ih(e),a=Ah(e),s=function({viewportResizeCb:e},{win:t}){let n=-1,r=-1;return Cg("resize",vh(Dg(vh((()=>{const t=$g(),o=Fg();n===t&&r===o||(e({width:Number(o),height:Number(t)}),n=t,r=o)})),200)),t)}(e,{win:n}),l=Oh(e),c=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:i,doc:a}){const s=vh((a=>Dg(vh((i=>{const s=Eh(i);if(!s||Wg(s,t,n,r,!0))return;const{currentTime:l,volume:c,muted:u,playbackRate:d}=s;e({type:a,id:o.getId(s),currentTime:l,volume:c,muted:u,playbackRate:d})})),i.media||500))),l=[Cg("play",s(0),a),Cg("pause",s(1),a),Cg("seeked",s(2),a),Cg("volumechange",s(3),a),Cg("ratechange",s(4),a)];return vh((()=>{l.forEach((e=>e()))}))}(e),u=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:vh(((r,o,i)=>{const[a,s]=i,{id:l,styleId:c}=Rh(o,t,n.styleMirror);return(l&&-1!==l||c&&-1!==c)&&e({id:l,styleId:c,adds:[{rule:a,index:s}]}),r.apply(o,i)}))});const i=r.CSSStyleSheet.prototype.deleteRule;let a,s;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:vh(((r,o,i)=>{const[a]=i,{id:s,styleId:l}=Rh(o,t,n.styleMirror);return(s&&-1!==s||l&&-1!==l)&&e({id:s,styleId:l,removes:[{index:a}]}),r.apply(o,i)}))}),r.CSSStyleSheet.prototype.replace&&(a=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(a,{apply:vh(((r,o,i)=>{const[a]=i,{id:s,styleId:l}=Rh(o,t,n.styleMirror);return(s&&-1!==s||l&&-1!==l)&&e({id:s,styleId:l,replace:a}),r.apply(o,i)}))})),r.CSSStyleSheet.prototype.replaceSync&&(s=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(s,{apply:vh(((r,o,i)=>{const[a]=i,{id:s,styleId:l}=Rh(o,t,n.styleMirror);return(s&&-1!==s||l&&-1!==l)&&e({id:s,styleId:l,replaceSync:a}),r.apply(o,i)}))}));const l={};xh("CSSGroupingRule")?l.CSSGroupingRule=r.CSSGroupingRule:(xh("CSSMediaRule")&&(l.CSSMediaRule=r.CSSMediaRule),xh("CSSConditionRule")&&(l.CSSConditionRule=r.CSSConditionRule),xh("CSSSupportsRule")&&(l.CSSSupportsRule=r.CSSSupportsRule));const c={};return Object.entries(l).forEach((([r,o])=>{c[r]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=new Proxy(c[r].insertRule,{apply:vh(((r,o,i)=>{const[a,s]=i,{id:l,styleId:c}=Rh(o.parentStyleSheet,t,n.styleMirror);return(l&&-1!==l||c&&-1!==c)&&e({id:l,styleId:c,adds:[{rule:a,index:[...Nh(o),s||0]}]}),r.apply(o,i)}))}),o.prototype.deleteRule=new Proxy(c[r].deleteRule,{apply:vh(((r,o,i)=>{const[a]=i,{id:s,styleId:l}=Rh(o.parentStyleSheet,t,n.styleMirror);return(s&&-1!==s||l&&-1!==l)&&e({id:s,styleId:l,removes:[{index:[...Nh(o),a]}]}),r.apply(o,i)}))})})),vh((()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=i,a&&(r.CSSStyleSheet.prototype.replace=a),s&&(r.CSSStyleSheet.prototype.replaceSync=s),Object.entries(l).forEach((([e,t])=>{t.prototype.insertRule=c[e].insertRule,t.prototype.deleteRule=c[e].deleteRule}))}))}(e,{win:n}),d=Lh(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:vh(((o,a,s)=>{const[l,c,u]=s;if(n.has(l))return i.apply(a,[l,c,u]);const{id:d,styleId:p}=Rh(Th([a,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(d&&-1!==d||p&&-1!==p)&&e({id:d,styleId:p,set:{property:l,value:c,priority:u},index:Nh(a.parentRule)}),o.apply(a,s)}))});const a=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(a,{apply:vh(((o,i,s)=>{const[l]=s;if(n.has(l))return a.apply(i,[l]);const{id:c,styleId:u}=Rh(Th([i,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(c&&-1!==c||u&&-1!==u)&&e({id:c,styleId:u,remove:{property:l},index:Nh(i.parentRule)}),o.apply(i,s)}))}),vh((()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=a}))}(e,{win:n}),g=e.collectFonts?function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,i=n.FontFace;n.FontFace=function(e,t,n){const r=new i(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const a=Mg(t.fonts,"add",(function(t){return function(n){return nh(vh((()=>{const t=o.get(n);t&&(e(t),o.delete(n))})),0),t.apply(this,[n])}}));return r.push((()=>{n.FontFace=i})),r.push(a),vh((()=>{r.forEach((e=>e()))}))}(e):()=>{},h=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,selectionCb:a}=e;let s=!0;const l=vh((()=>{const e=t.getSelection();if(!e||s&&Th([e,"optionalAccess",e=>e.isCollapsed]))return;s=e.isCollapsed||!1;const l=[],c=e.rangeCount||0;for(let t=0;t<c;t++){const a=e.getRangeAt(t),{startContainer:s,startOffset:c,endContainer:u,endOffset:d}=a;Wg(s,r,o,i,!0)||Wg(u,r,o,i,!0)||l.push({start:n.getId(s),startOffset:c,end:n.getId(u),endOffset:d})}a({ranges:l})}));return l(),Cg("selectionchange",l)}(e),f=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?Mg(n.customElements,"define",(function(e){return function(n,r,o){try{t({define:{name:n}})}catch(e){}return e.apply(this,[n,r,o])}})):()=>{}}(e),_=[];for(const t of e.plugins)_.push(t.observer(t.callback,n,t.options));return vh((()=>{yh.forEach((e=>e.reset())),r.disconnect(),o(),i(),a(),s(),l(),c(),u(),d(),p(),g(),h(),f(),_.forEach((e=>e()))}))}function Ch(e){return void 0!==window[e]}function xh(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class kh{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),i=r||this.getRemoteIdToIdMap(e);let a=o.get(t);return a||(a=this.generateIdFn(),o.set(t,a),i.set(a,t)),a}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const o=r.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}function Dh(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}class Uh{constructor(){this.crossOriginIframeMirror=new kh(ug),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class Mh{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new kh(ug),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new kh(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),Dh([this,"access",e=>e.loadListener,"optionalCall",t=>t(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case rh.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:rh.IncrementalSnapshot,data:{source:oh.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case rh.Meta:case rh.Load:case rh.DomContentLoaded:return!1;case rh.Plugin:return t;case rh.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case rh.IncrementalSnapshot:switch(t.data.source){case oh.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case oh.Drag:case oh.TouchMove:case oh.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case oh.ViewportResize:return!1;case oh.MediaInteraction:case oh.MouseInteraction:case oh.Scroll:case oh.CanvasMutation:case oh.Input:return this.replaceIds(t.data,e,["id"]),t;case oh.StyleSheetRule:case oh.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case oh.Font:return t;case oh.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case oh.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),Dh([t,"access",e=>e.data,"access",e=>e.styles,"optionalAccess",e=>e.forEach,"call",t=>t((t=>{this.replaceStyleIds(t,e,["styleId"])}))]),t}}return!1}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===Yp.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class Gh{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Vh{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!Kp(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=Sh({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Ah({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),nh((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(Lh({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(Mg(e.prototype,"attachShadow",(function(e){return function(r){const o=e.call(this,r);return this.shadowRoot&&Zg(this)&&n.addShadowRoot(this.shadowRoot,t),o}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class $h{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class Fh{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new Xg,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),r.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,t)=>({rule:Zp(e),index:t})))})),n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class jh{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){!function(...e){th("requestAnimationFrame")(...e)}((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let Wh,qh;const Bh=new eg;function Hh(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:i=null,unblockSelector:a=null,ignoreClass:s="rr-ignore",ignoreSelector:l=null,maskAllText:c=!1,maskTextClass:u="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:g=null,inlineStylesheet:h=!0,maskAllInputs:f,maskInputOptions:_,slimDOMOptions:m,maskAttributeFn:v,maskInputFn:T,maskTextFn:y,maxCanvasSize:E=null,packFn:S,sampling:I={},dataURLOptions:A={},mousemoveWait:b,recordCanvas:w=!1,recordCrossOriginIframes:O=!1,recordAfter:N=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:R=!1,collectFonts:L=!1,inlineImages:P=!1,plugins:C,keepIframeSrcFn:x=()=>!1,ignoreCSSAttributes:k=new Set([]),errorHandler:D,onMutation:U,getCanvasManager:M}=e;mh=D;const G=!O||window.parent===window;let V=!1;if(!G)try{window.parent.document&&(V=!1)}catch(e){V=!0}if(G&&!t)throw new Error("emit function is required");void 0!==b&&void 0===I.mousemove&&(I.mousemove=b),Bh.reset();const $=!0===f?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==_?_:{},F=!0===m||"all"===m?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===m,headMetaDescKeywords:"all"===m}:m||{};let j;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let W=0;const q=e=>{for(const t of C||[])t.eventProcessor&&(e=t.eventProcessor(e));return S&&!V&&(e=S(e)),e};Wh=(e,o)=>{const i=e;if(i.timestamp=Gg(),!Ts([yh,"access",e=>e[0],"optionalAccess",e=>e.isFrozen,"call",e=>e()])||i.type===rh.FullSnapshot||i.type===rh.IncrementalSnapshot&&i.data.source===oh.Mutation||yh.forEach((e=>e.unfreeze())),G)Ts([t,"optionalCall",e=>e(q(i),o)]);else if(V){const e={type:"rrweb",event:q(i),origin:window.location.origin,isCheckout:o};window.parent.postMessage(e,"*")}if(i.type===rh.FullSnapshot)j=i,W=0;else if(i.type===rh.IncrementalSnapshot){if(i.data.source===oh.Mutation&&i.data.isAttachIframe)return;W++;const e=r&&W>=r,t=n&&j&&i.timestamp-j.timestamp>n;(e||t)&&Z(!0)}};const B=e=>{Wh({type:rh.IncrementalSnapshot,data:{source:oh.Mutation,...e}})},H=e=>Wh({type:rh.IncrementalSnapshot,data:{source:oh.Scroll,...e}}),J=e=>Wh({type:rh.IncrementalSnapshot,data:{source:oh.CanvasMutation,...e}}),z=new Fh({mutationCb:B,adoptedStyleSheetCb:e=>Wh({type:rh.IncrementalSnapshot,data:{source:oh.AdoptedStyleSheet,...e}})}),Y="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new Uh:new Mh({mirror:Bh,mutationCb:B,stylesheetManager:z,recordCrossOriginIframes:O,wrappedEmit:Wh});for(const e of C||[])e.getMirror&&e.getMirror({nodeMirror:Bh,crossOriginIframeMirror:Y.crossOriginIframeMirror,crossOriginIframeStyleMirror:Y.crossOriginIframeStyleMirror});const X=new jh,K=function(e,t){try{return e?e(t):new $h}catch(e){return console.warn("Unable to initialize CanvasManager"),new $h}}(M,{mirror:Bh,win:window,mutationCb:e=>Wh({type:rh.IncrementalSnapshot,data:{source:oh.CanvasMutation,...e}}),recordCanvas:w,blockClass:o,blockSelector:i,unblockSelector:a,maxCanvasSize:E,sampling:I.canvas,dataURLOptions:A,errorHandler:D}),Q="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Gh:new Vh({mutationCb:B,scrollCb:H,bypassOptions:{onMutation:U,blockClass:o,blockSelector:i,unblockSelector:a,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:g,inlineStylesheet:h,maskInputOptions:$,dataURLOptions:A,maskAttributeFn:v,maskTextFn:y,maskInputFn:T,recordCanvas:w,inlineImages:P,sampling:I,slimDOMOptions:F,iframeManager:Y,stylesheetManager:z,canvasManager:K,keepIframeSrcFn:x,processedNodeManager:X},mirror:Bh}),Z=(e=!1)=>{Wh({type:rh.Meta,data:{href:window.location.href,width:Fg(),height:$g()}},e),z.reset(),Q.init(),yh.forEach((e=>e.lock()));const t=function(e,t){const{mirror:n=new eg,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:i=null,maskAllText:a=!1,maskTextClass:s="rr-mask",unmaskTextClass:l=null,maskTextSelector:c=null,unmaskTextSelector:u=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:g=!1,maskAllInputs:h=!1,maskAttributeFn:f,maskTextFn:_,maskInputFn:m,slimDOM:v=!1,dataURLOptions:T,preserveWhiteSpace:y,onSerialize:E,onIframeLoad:S,iframeLoadTimeout:I,onStylesheetLoad:A,stylesheetLoadTimeout:b,keepIframeSrcFn:w=()=>!1}=t;return Lg(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:s,unmaskTextClass:l,maskTextSelector:c,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===h?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===h?{}:h,maskAttributeFn:f,maskTextFn:_,maskInputFn:m,slimDOMOptions:!0===v||"all"===v?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===v,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===v?{}:v,dataURLOptions:T,inlineImages:p,recordCanvas:g,preserveWhiteSpace:y,onSerialize:E,onIframeLoad:S,iframeLoadTimeout:I,onStylesheetLoad:A,stylesheetLoadTimeout:b,keepIframeSrcFn:w,newlyAddedElement:!1})}(document,{mirror:Bh,blockClass:o,blockSelector:i,unblockSelector:a,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:g,inlineStylesheet:h,maskAllInputs:$,maskAttributeFn:v,maskInputFn:T,maskTextFn:y,slimDOM:F,dataURLOptions:A,recordCanvas:w,inlineImages:P,onSerialize:e=>{Jg(e,Bh)&&Y.addIframe(e),zg(e,Bh)&&z.trackLinkElement(e),Yg(e)&&Q.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{Y.attachIframe(e,t),Q.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{z.attachLinkElement(e,t)},keepIframeSrcFn:x});if(!t)return console.warn("Failed to snapshot the document");Wh({type:rh.FullSnapshot,data:{node:t,initialOffset:Vg(window)}}),yh.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&z.adoptStyleSheets(document.adoptedStyleSheets,Bh.getId(document))};qh=Z;try{const e=[],t=e=>vh(Ph)({onMutation:U,mutationCb:B,mousemoveCb:(e,t)=>Wh({type:rh.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>Wh({type:rh.IncrementalSnapshot,data:{source:oh.MouseInteraction,...e}}),scrollCb:H,viewportResizeCb:e=>Wh({type:rh.IncrementalSnapshot,data:{source:oh.ViewportResize,...e}}),inputCb:e=>Wh({type:rh.IncrementalSnapshot,data:{source:oh.Input,...e}}),mediaInteractionCb:e=>Wh({type:rh.IncrementalSnapshot,data:{source:oh.MediaInteraction,...e}}),styleSheetRuleCb:e=>Wh({type:rh.IncrementalSnapshot,data:{source:oh.StyleSheetRule,...e}}),styleDeclarationCb:e=>Wh({type:rh.IncrementalSnapshot,data:{source:oh.StyleDeclaration,...e}}),canvasMutationCb:J,fontCb:e=>Wh({type:rh.IncrementalSnapshot,data:{source:oh.Font,...e}}),selectionCb:e=>{Wh({type:rh.IncrementalSnapshot,data:{source:oh.Selection,...e}})},customElementCb:e=>{Wh({type:rh.IncrementalSnapshot,data:{source:oh.CustomElement,...e}})},blockClass:o,ignoreClass:s,ignoreSelector:l,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:g,maskInputOptions:$,inlineStylesheet:h,sampling:I,recordCanvas:w,inlineImages:P,userTriggeredOnInput:R,collectFonts:L,doc:e,maskAttributeFn:v,maskInputFn:T,maskTextFn:y,keepIframeSrcFn:x,blockSelector:i,unblockSelector:a,slimDOMOptions:F,dataURLOptions:A,mirror:Bh,iframeManager:Y,stylesheetManager:z,shadowDomManager:Q,processedNodeManager:X,canvasManager:K,ignoreCSSAttributes:k,plugins:Ts([C,"optionalAccess",e=>e.filter,"call",e=>e((e=>e.observer)),"optionalAccess",e=>e.map,"call",e=>e((e=>({observer:e.observer,options:e.options,callback:t=>Wh({type:rh.Plugin,data:{plugin:e.name,payload:t}})})))])||[]},{});Y.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}}));const n=()=>{Z(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(Cg("DOMContentLoaded",(()=>{Wh({type:rh.DomContentLoaded,data:{}}),"DOMContentLoaded"===N&&n()}))),e.push(Cg("load",(()=>{Wh({type:rh.Load,data:{}}),"load"===N&&n()}),window))),()=>{e.forEach((e=>e())),X.destroy(),qh=void 0,mh=void 0}}catch(e){console.warn(e)}}Hh.mirror=Bh,Hh.takeFullSnapshot=function(e){if(!qh)throw new Error("please take full snapshot after start recording");qh(e)};function Jh(e){return e>9999999999?e:1e3*e}function zh(e){return e>9999999999?e/1e3:e}function Yh(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate((()=>(e.throttledAddEvent({type:rh.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:Pa(t,10,1e3)}}),"console"===t.category))))}function Xh(e){return e.closest("button,a")||e}function Kh(e){const t=Qh(e);return t&&t instanceof Element?Xh(t):t}function Qh(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let Zh;function ef(e){return Zh||(Zh=[],bi(Fp,"open",(function(e){return function(...t){if(Zh)try{Zh.forEach((e=>e()))}catch(e){}return e.apply(Fp,t)}}))),Zh.push(e),()=>{const t=Zh?Zh.indexOf(e):-1;t>-1&&Zh.splice(t,1)}}class tf{constructor(e,t,n=Yh){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=ef((()=>{this._lastMutation=rf()}));this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){if(!nf.includes(e.tagName))return!0;if("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||""))return!0;if("A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))return!0;if(t&&e.matches(t))return!0;return!1}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:zh(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some((e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=zh(e)}registerScroll(e=Date.now()){this._lastScroll=zh(e)}registerClick(e){const t=Xh(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach((e=>{e.clickCount++}))}_getClicks(e){return this._clicks.filter((t=>t.node===e))}_checkClicks(){const e=[],t=rf();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)}));for(const t of e){const e=this._clicks.indexOf(t);e>-1&&(this._generateBreadcrumbs(t),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,r=e.mutationAfter&&e.mutationAfter<=this._threshold,o=!n&&!r,{clickCount:i,clickBreadcrumb:a}=e;if(o){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",o={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:Fp.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:i||1}};this._addBreadcrumbEvent(t,o)}else if(i>1){const e={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:Fp.location.href,route:t.getCurrentRoute(),clickCount:i,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout((()=>this._checkClicks()),1e3)}}const nf=["A","BUTTON","INPUT"];function rf(){return Date.now()/1e3}function of(e,t){try{if(!function(e){return 3===e.type}(t))return;const{source:n}=t.data;if(n===oh.Mutation&&e.registerMutation(t.timestamp),n===oh.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===oh.MouseInteraction}(t)){const{type:n,id:r}=t.data,o=Hh.mirror.getNode(r);o instanceof HTMLElement&&n===ih.Click&&e.registerClick(o)}}catch(e){}}function af(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var sf;!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(sf||(sf={}));const lf=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function cf(e){const t={};for(const n in e)if(lf.has(n)){let r=n;"data-testid"!==n&&"data-test-id"!==n||(r="testId"),t[r]=e[n]}return t}const uf=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,r=null;try{r=t?Kh(e.event):Qh(e.event),n=ci(r,{maxStringLength:200})||"<unknown>"}catch(e){n="<unknown>"}return{target:r,message:n}}(e);return af({category:`ui.${e.name}`,...df(t,n)})}(t);if(!n)return;const r="click"===t.name,o=r?t.event:void 0;var i,a,s;!(r&&e.clickDetector&&o&&o.target)||o.altKey||o.metaKey||o.ctrlKey||o.shiftKey||(i=e.clickDetector,a=n,s=Kh(t.event),i.handleClick(a,s)),Yh(e,n)};function df(e,t){const n=Hh.mirror.getId(e),r=n&&Hh.mirror.getNode(n),o=r&&Hh.mirror.getMeta(r),i=o&&function(e){return e.type===sf.Element}(o)?o:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map((e=>e.type===sf.Text&&e.textContent)).filter(Boolean).map((e=>e.trim())).join(""),attributes:cf(i.attributes)}}:{}}}function pf(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i,target:a}=e;if(!a||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(a)||!i)return null;const s=t||r||o,l=1===i.length;if(!s&&l)return null;const c=ci(a,{maxStringLength:200})||"<unknown>",u=df(a,c);return af({category:"ui.keyDown",message:c,data:{...u.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i}})}(t);n&&Yh(e,n)}const gf={resource:function(e){const{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:i,decodedBodySize:a,encodedBodySize:s,responseStatus:l,transferSize:c}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:ff(i),end:ff(o),name:r,data:{size:c,statusCode:l,decodedBodySize:a,encodedBodySize:s}}},paint:function(e){const{duration:t,entryType:n,name:r,startTime:o}=e,i=ff(o);return{type:n,name:r,start:i,end:i+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:i,encodedBodySize:a,domContentLoadedEventStart:s,domContentLoadedEventEnd:l,domInteractive:c,loadEventStart:u,loadEventEnd:d,redirectCount:p,startTime:g,transferSize:h,type:f}=e;if(0===o)return null;return{type:`${t}.${f}`,start:ff(g),end:ff(i),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:a,duration:o,domInteractive:c,domContentLoadedEventStart:s,domContentLoadedEventEnd:l,loadEventStart:u,loadEventEnd:d,domComplete:i,redirectCount:p}}}};function hf(e){return gf[e.entryType]?gf[e.entryType](e):null}function ff(e){return((za||Fp.performance.timeOrigin)+e)/1e3}function _f(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const r=[];return["navigation","paint","resource"].forEach((e=>{r.push(Du(e,n))})),r.push(ku((({metric:t})=>{e.replayPerformanceEntries.push(function(e){const t=e.entries,n=t[t.length-1],r=n?n.element:void 0,o=e.value,i=ff(o);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:i,end:i,data:{value:o,size:o,nodeId:r?Hh.mirror.getId(r):void 0}}}(t))}))),()=>{r.forEach((e=>e()))}}const mf="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function vf(e,t){mf&&(vi.info(e),t&&yf(e))}function Tf(e,t){mf&&(vi.info(e),t&&setTimeout((()=>{yf(e)}),0))}function yf(e){Fs({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class Ef extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class Sf{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>Hp)throw new Ef;this.events.push(e)}finish(){return new Promise((e=>{const t=this.events;this.clear(),e(JSON.stringify(t))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map((e=>e.timestamp)).sort()[0];return e?Jh(e):null}}class If{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((e,t)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?e():t()}),{once:!0}),this._worker.addEventListener("error",(e=>{t(e)}),{once:!0})}))),this._ensureReadyPromise}destroy(){vf("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise(((r,o)=>{const i=({data:t})=>{const a=t;if(a.method===e&&a.id===n){if(this._worker.removeEventListener("message",i),!a.success)return mf&&vi.error("[Replay]",a.response),void o(new Error("Error in compression worker"));r(a.response)}};this._worker.addEventListener("message",i),this._worker.postMessage({id:n,method:e,arg:t})}))}_getAndIncrementId(){return this._id++}}class Af{constructor(e){this._worker=new If(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=Jh(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>Hp?Promise.reject(new Ef):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(e=>{mf&&vi.warn('[Replay] Sending "clear" message to worker failed',e)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class bf{constructor(e){this._fallback=new Sf,this._compression=new Af(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void vf("[Replay] Failed to load the compression worker, falling back to simple buffer")}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t}=this._fallback,n=[];for(const t of e)n.push(this._compression.addEvent(t));this._compression.hasCheckout=t,this._used=this._compression;try{await Promise.all(n)}catch(e){mf&&vi.warn("[Replay] Failed to add events when switching buffers.",e)}}}function wf({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const e=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});']);return URL.createObjectURL(e)}();return""}();if(!t)return;vf("[Replay] Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new bf(n)}catch(e){vf("[Replay] Failed to create compression worker")}}(t);if(e)return e}return vf("[Replay] Using simple buffer"),new Sf}function Of(){try{return"sessionStorage"in Fp&&!!Fp.sessionStorage}catch(e){return!1}}function Nf(e){!function(){if(!Of())return;try{Fp.sessionStorage.removeItem(jp)}catch(e){}}(),e.session=void 0}function Rf(e){return void 0!==e&&Math.random()<e}function Lf(e){const t=Date.now();return{id:e.id||Hi(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function Pf(e){if(Of())try{Fp.sessionStorage.setItem(jp,JSON.stringify(e))}catch(e){}}function Cf({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const o=function(e,t){return Rf(e)?"session":!!t&&"buffer"}(e,t),i=Lf({sampled:o,previousSessionId:r});return n&&Pf(i),i}function xf(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function kf(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return xf(e.started,t,r)||xf(e.lastActivity,n,r)}function Df(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!!kf(e,{sessionIdleExpire:t,maxReplayDuration:n})&&("buffer"!==e.sampled||0!==e.segmentId)}function Uf({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:r},o){const i=o.stickySession&&function(e){if(!Of())return null;try{const t=Fp.sessionStorage.getItem(jp);if(!t)return null;const n=JSON.parse(t);return Tf("[Replay] Loading existing session",e),Lf(n)}catch(e){return null}}(e);return i?Df(i,{sessionIdleExpire:t,maxReplayDuration:n})?(Tf("[Replay] Session in sessionStorage is expired, creating new one..."),Cf(o,{previousSessionId:i.id})):i:(Tf("[Replay] Creating new session",e),Cf(o,{previousSessionId:r}))}function Mf(e,t,n){return!!Vf(e,t)&&(Gf(e,t,n),!0)}async function Gf(e,t,n){if(!e.eventBuffer)return null;try{n&&"buffer"===e.recordingMode&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const r=function(e,t){try{if("function"==typeof t&&function(e){return e.type===rh.Custom}(e))return t(e)}catch(e){return mf&&vi.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",e),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!r)return;return await e.eventBuffer.addEvent(r)}catch(t){const n=t&&t instanceof Ef?"addEventSizeExceeded":"addEvent";mf&&vi.error(t),await e.stop({reason:n});const r=qs();r&&r.recordDroppedEvent("internal_sdk_error","replay")}}function Vf(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Jh(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||(vf(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1))}function $f(e){return!e.type}function Ff(e){return"transaction"===e.type}function jf(e){return"feedback"===e.type}function Wf(e){const t=function(){const e=qs();if(!e)return!1;const t=e.getTransport();if(!t)return!1;return t.send.__sentry__baseTransport__||!1}();return(n,r)=>{if(!e.isEnabled()||!$f(n)&&!Ff(n))return;const o=r&&r.statusCode;t&&(!o||o<200||o>=300)||(Ff(n)?function(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,n):function(e,t){const n=e.getContext();t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id);if("buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();if("function"==typeof r&&!r(t))return;setTimeout((()=>{e.sendBufferedReplayOrFlush()}))}(e,n))}}function qf(e){return t=>{e.isEnabled()&&$f(t)&&function(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0].value;if("string"!=typeof n)return;if(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){Yh(e,af({category:"replay.hydrate-error"}))}}(e,t)}}function Bf(e,t=!1){const n=t?Wf(e):void 0;return Object.assign(((t,r)=>{if(!e.isEnabled())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!$f(t)&&!Ff(t)&&!jf(t))return t;if(!e.checkAndHandleExpiredSession())return t;if(jf(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate((()=>!t.timestamp||(e.throttledAddEvent({type:rh.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)))}(e,t),t;if(function(e,t){return!(e.type||!e.exception||!e.exception.values||!e.exception.values.length||!t.originalException||!t.originalException.__rrweb__)}(t,r)&&!e.getOptions()._experiments.captureExceptions)return mf&&vi.log("[Replay] Ignoring error from rrweb internals",t),null;const o=function(e,t){return"buffer"===e.recordingMode&&t.message!==Wp&&!(!t.exception||t.type)&&Rf(e.getOptions().errorSampleRate)}(e,t);return(o||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()}),n&&n(t,{statusCode:200}),t}),{id:"Replay"})}function Hf(e,t){return t.map((({type:t,start:n,end:r,name:o,data:i})=>{const a=e.throttledAddEvent({type:rh.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:o,startTimestamp:n,endTimestamp:r,data:i}}});return"string"==typeof a?Promise.resolve(null):a}))}function Jf(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate((()=>(Hf(e,[n]),!1))))}}function zf(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!mf||!e.getOptions()._experiments.traceInternals)&&Rc(t,qs())}(e,t.name)||e.addUpdate((()=>(Hf(e,[t]),!0))))}function Yf(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,xhr:r}=e,o=r[wa];if(!t||!n||!o)return null;const{method:i,url:a,status_code:s}=o;return void 0===a?null:{type:"resource.xhr",name:a,start:t/1e3,end:n/1e3,data:{method:i,statusCode:s}}}(t);zf(e,n)}}function Xf(e,t){if(e)try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=o_(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}function Kf(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Qf(e){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[o_(e)];if(!e)return[void 0]}catch(t){return mf&&vi.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return mf&&vi.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Zf(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function e_(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:o,method:i,statusCode:a,request:s,response:l}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:Ci({method:i,statusCode:a,request:s,response:l})}}function t_(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function n_(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:o,warnings:i}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>qp,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,qp);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}…`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(n);return r.body=o,i&&i.length>0&&(r._meta={warnings:i}),r}function r_(e,t){return Object.keys(e).reduce(((n,r)=>{const o=r.toLowerCase();return t.includes(o)&&e[r]&&(n[o]=e[r]),n}),{})}function o_(e){return new URLSearchParams(e).toString()}function i_(e,t){const n=function(e,t=Fp.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(Fp.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;if(!e.endsWith("/")&&r.endsWith("/"))return r.slice(0,-1);return r}(e);return Zo(n,t)}async function a_(e,t,n){try{const r=await async function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r}=t,{url:a,method:s,status_code:l=0,request_body_size:c,response_body_size:u}=e.data,d=i_(a,n.networkDetailAllowUrls)&&!i_(a,n.networkDetailDenyUrls),p=d?function({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const o=n?function(e,t){if(1===e.length&&"string"!=typeof e[0])return c_(e[0],t);if(2===e.length)return c_(e[1],t);return{}}(n,t):{};if(!e)return n_(o,r,void 0);const i=s_(n),[a,s]=Qf(i),l=n_(o,r,a);if(s)return Zf(l,s);return l}(n,t.input,c):t_(c),g=await async function(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:r},o,i){if(!e&&void 0!==i)return t_(i);const a=o?l_(o.headers,r):{};if(!o||!t&&void 0!==i)return n_(a,i,void 0);const[s,l]=await async function(e){const t=function(e){try{return e.clone()}catch(e){mf&&vi.warn("[Replay] Failed to clone response body",e)}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise(((t,n)=>{const r=setTimeout((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(e){return await e.text()})(e).then((e=>t(e)),(e=>n(e))).finally((()=>clearTimeout(r)))}))}(t);return[e]}catch(e){return mf&&vi.warn("[Replay] Failed to get text body from response",e),[void 0,"BODY_PARSE_ERROR"]}}(o),c=function(e,{networkCaptureBodies:t,textEncoder:n,responseBodySize:r,captureDetails:o,headers:i}){try{const a=e&&e.length&&void 0===r?Xf(e,n):r;return o?n_(i,a,t?e:void 0):t_(a)}catch(e){return mf&&vi.warn("[Replay] Failed to serialize response body",e),n_(i,r,void 0)}}(s,{networkCaptureBodies:t,textEncoder:n,responseBodySize:i,captureDetails:e,headers:a});if(l)return Zf(c,l);return c}(d,n,t.response,u);return{startTimestamp:o,endTimestamp:i,url:a,method:s,statusCode:l,request:p,response:g}}(e,t,n),o=e_("resource.fetch",r);zf(n.replay,o)}catch(e){mf&&vi.error("[Replay] Failed to capture fetch breadcrumb",e)}}function s_(e=[]){if(2===e.length&&"object"==typeof e[1])return e[1].body}function l_(e,t){const n={};return t.forEach((t=>{e.get(t)&&(n[t]=e.get(t))})),n}function c_(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?l_(n,t):Array.isArray(n)?{}:r_(n,t):{}}async function u_(e,t,n){try{const r=function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r,input:a,xhr:s}=t,{url:l,method:c,status_code:u=0,request_body_size:d,response_body_size:p}=e.data;if(!l)return null;if(!s||!i_(l,n.networkDetailAllowUrls)||i_(l,n.networkDetailDenyUrls)){return{startTimestamp:o,endTimestamp:i,url:l,method:c,statusCode:u,request:t_(d),response:t_(p)}}const g=s[wa],h=g?r_(g.request_headers,n.networkRequestHeaders):{},f=r_(function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n.toLowerCase()]=r,e}),{})}(s),n.networkResponseHeaders),[_,m]=n.networkCaptureBodies?Qf(a):[void 0],[v,T]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(e){t.push(e)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(t){return mf&&vi.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return mf&&vi.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(e){t.push(e)}return mf&&vi.warn("[Replay] Failed to get xhr response body",...t),[void 0]}(s):[void 0],y=n_(h,d,_),E=n_(f,p,v);return{startTimestamp:o,endTimestamp:i,url:l,method:c,statusCode:u,request:m?Zf(y,m):y,response:T?Zf(E,T):E}}(e,t,n),o=e_("resource.xhr",r);zf(n.replay,o)}catch(e){mf&&vi.error("[Replay] Failed to capture xhr breadcrumb",e)}}function d_(e,t,n){const{xhr:r,input:o}=t;if(!r)return;const i=Xf(o,n.textEncoder),a=r.getResponseHeader("content-length")?Kf(r.getResponseHeader("content-length")):function(e,t,n){try{return Xf("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e,n)}catch(e){return}}(r.response,r.responseType,n.textEncoder);void 0!==i&&(e.data.request_body_size=i),void 0!==a&&(e.data.response_body_size=a)}function p_(e){const t=qs();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:o,networkCaptureBodies:i,networkRequestHeaders:a,networkResponseHeaders:s}=e.getOptions(),l={replay:e,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:o,networkCaptureBodies:i,networkRequestHeaders:a,networkResponseHeaders:s};t&&t.on?t.on("beforeAddBreadcrumb",((e,t)=>function(e,t,n){if(!t.data)return;try{(function(e){return"xhr"===e.category})(t)&&function(e){return e&&e.xhr}(n)&&(d_(t,n,e),u_(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return e&&e.response}(n)&&(!function(e,t,n){const{input:r,response:o}=t,i=Xf(r?s_(r):void 0,n.textEncoder),a=o?Kf(o.headers.get("content-length")):void 0;void 0!==i&&(e.data.request_body_size=i),void 0!==a&&(e.data.response_body_size=a)}(t,n,e),a_(t,n,e))}catch(e){mf&&vi.warn("Error when enriching network breadcrumb")}}(l,e,t))):(ua(function(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,fetchData:r,response:o}=e;if(!n)return null;const{method:i,url:a}=r;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:a,data:{method:i,statusCode:o?o.status:void 0}}}(t);zf(e,n)}}(e)),Oa(Yf(e)))}catch(e){}}let g_=null;const h_=e=>t=>{if(!e.isEnabled())return;const n=function(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();if(g_===t||!t)return null;if(g_=t,!function(e){return!!e.category}(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))return null;if("console"===t.category)return function(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||0===t.length)return af(e);let n=!1;const r=t.map((e=>{if(!e)return e;if("string"==typeof e)return e.length>Bp?(n=!0,`${e.slice(0,Bp)}…`):e;if("object"==typeof e)try{const t=Pa(e,7);return JSON.stringify(t).length>Bp?(n=!0,`${JSON.stringify(t,null,2).slice(0,Bp)}…`):t}catch(e){}return e}));return af({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(t);return af(t)}(t);n&&Yh(e,n)};function f_(e){return!(!e||!e.on)}function __(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function m_(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession())return void(mf&&vi.warn("[Replay] Received replay event after session expired."));const o=r||!t;t=!0,e.clickDetector&&of(e.clickDetector,n),e.addUpdate((()=>{if("buffer"===e.recordingMode&&o&&e.setInitialState(),!Mf(e,n,o))return!0;if(!o)return!1;if(function(e,t){if(!t||!e.session||0!==e.session.segmentId)return;Mf(e,function(e){const t=e.getOptions();return{type:rh.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,o),e.session&&e.session.previousSessionId)return!0;if("buffer"===e.recordingMode&&e.session&&e.eventBuffer){const t=e.eventBuffer.getEarliestTimestamp();t&&(vf(`[Replay] Updating session start time to earliest event in buffer to ${new Date(t)}`,e.getOptions()._experiments.traceInternals),e.session.started=t,e.getOptions().stickySession&&Pf(e.session))}return"session"===e.recordingMode&&e.flush(),!0}))}}async function v_({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:i}){const a=function({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}\n`;if("string"==typeof e)n=`${r}${e}`;else{const t=(new TextEncoder).encode(r);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:s,errorIds:l,traceIds:c,initialTimestamp:u}=r,d=qs(),p=Bs(),g=d&&d.getTransport(),h=d&&d.getDsn();if(!(d&&g&&h&&i.sampled))return;const f={type:"replay_event",replay_start_timestamp:u/1e3,timestamp:o/1e3,error_ids:l,trace_ids:c,urls:s,replay_id:t,segment_id:n,replay_type:i.sampled},_=await async function({client:e,scope:t,replayId:n,event:r}){const o={event_id:n,integrations:"object"!=typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit&&e.emit("preprocessEvent",r,o);const i=await ks(e.getOptions(),r,o,t,e,pl());if(!i)return null;i.platform=i.platform||"javascript";const a=e.getSdkMetadata&&e.getSdkMetadata(),{name:s,version:l}=a&&a.sdk||{};return i.sdk={...i.sdk,name:s||"sentry.javascript.unknown",version:l||"0.0.0"},i}({scope:p,client:d,replayId:t,event:f});if(!_)return d.recordDroppedEvent("event_processor","replay",f),void vf("An event processor returned `null`, will not send event.");delete _.sdkProcessingMetadata;const m=function(e,t,n,r){return is(hs(e,gs(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(_,a,h,d.getOptions().tunnel);let v;try{v=await g.send(m)}catch(e){const t=new Error(Wp);try{t.cause=e}catch(e){}throw t}if(!v)return v;if("number"==typeof v.statusCode&&(v.statusCode<200||v.statusCode>=300))throw new T_(v.statusCode);const T=ms({},v);if(_s(T,"replay"))throw new y_(T);return v}class T_ extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class y_ extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function E_(e,t={count:0,interval:5e3}){const{recordingData:n,options:r}=e;if(n.length)try{return await v_(e),!0}catch(n){if(n instanceof T_||n instanceof y_)throw n;if(js("Replays",{_retryCount:t.count}),mf&&r._experiments&&r._experiments.captureExceptions&&Gs(n),t.count>=3){const e=new Error(`${Wp} - max retries exceeded`);try{e.cause=n}catch(e){}throw e}return t.interval*=++t.count,new Promise(((n,r)=>{setTimeout((async()=>{try{await E_(e,t),n(!0)}catch(e){r(e)}}),t.interval)}))}}const S_="__THROTTLED";function I_(e,t,n){const r=new Map;let o=!1;return(...i)=>{const a=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;r.forEach(((e,n)=>{n<t&&r.delete(n)}))})(a),[...r.values()].reduce(((e,t)=>e+t),0)>=t){const e=o;return o=!0,e?"__SKIPPED":S_}o=!1;const s=r.get(a)||0;return r.set(a,s+1),e(...i)}}class A_{constructor({options:e,recordingOptions:t}){A_.prototype.__init.call(this),A_.prototype.__init2.call(this),A_.prototype.__init3.call(this),A_.prototype.__init4.call(this),A_.prototype.__init5.call(this),A_.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=function(e,t,n){let r,o,i;const a=n.maxWait?Math.max(n.maxWait,t):0;function s(){return l(),r=e(),r}function l(){void 0!==o&&clearTimeout(o),void 0!==i&&clearTimeout(i),o=i=void 0}function c(){return o&&clearTimeout(o),o=setTimeout(s,t),a&&void 0===i&&(i=setTimeout(s,a)),r}return c.cancel=l,c.flush=function(){return void 0!==o||void 0!==i?s():r},c}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=I_(((e,t)=>function(e,t,n){return Vf(e,t)?Gf(e,t,n):Promise.resolve(null)}(this,e,t)),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:r}=this.getOptions(),o=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:r?r.join(","):""}:void 0;o&&(this.clickDetector=new tf(this,o))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options;t<=0&&n<=0||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",Tf(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording()):this._handleException(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)throw new Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw new Error("Replay buffering is in progress, call `flush()` to save the replay");Tf("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const e=Uf({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");Tf("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const e=Uf({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=Hh({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:m_(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this._handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;try{vf("[Replay] Stopping Replay"+(t?` triggered by ${t}`:""),this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,Nf(this)}catch(e){this._handleException(e)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),vf("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),vf("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();vf("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&xf(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${Fp.location.pathname}${Fp.location.hash}${Fp.location.search}`,t=`${Fp.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===S_){const e=af({category:"replay.throttled"});this.addUpdate((()=>!Mf(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}})))}return n}getCurrentRoute(){const e=this.lastTransaction||Bs().getTransaction(),t=(e&&Cs(e).data||{})[Dl];if(e&&t&&["route","custom"].includes(t))return Cs(e).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=wf({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(e){mf&&vi.error("[Replay]",e),mf&&this._options._experiments&&this._options._experiments.captureExceptions&&Gs(e)}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=Uf({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!Df(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{Fp.document.addEventListener("visibilitychange",this._handleVisibilityChange),Fp.addEventListener("blur",this._handleWindowBlur),Fp.addEventListener("focus",this._handleWindowFocus),Fp.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(!function(e){const t=Bs(),n=qs();t.addScopeListener(h_(e)),ra(uf(e)),Ia(Jf(e)),p_(e);const r=Bf(e,!f_(n));n&&n.addEventProcessor?n.addEventProcessor(r):_c(r),f_(n)&&(n.on("beforeSendEvent",qf(e)),n.on("afterSendEvent",Wf(e)),n.on("createDsc",(t=>{const n=e.getSessionId();n&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=n)})),n.on("startTransaction",(t=>{e.lastTransaction=t})),n.on("finishTransaction",(t=>{e.lastTransaction=t})),n.on("beforeSendFeedback",((t,n)=>{const r=e.getSessionId();n&&n.includeReplay&&e.isEnabled()&&r&&t.contexts&&t.contexts.feedback&&(t.contexts.feedback.replay_id=r)})))}(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=_f(this)}_removeListeners(){try{Fp.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Fp.removeEventListener("blur",this._handleWindowBlur),Fp.removeEventListener("focus",this._handleWindowFocus),Fp.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}}__init(){this._handleVisibilityChange=()=>{"visible"===Fp.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=af({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=af({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{pf(this,e)}}_doChangeToBackgroundTasks(e){if(!this.session)return;kf(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):vf("[Replay] Document has become active, but session has expired")}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate((()=>{this.throttledAddEvent({type:rh.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}_addPerformanceEntries(){const e=(t=this.performanceEntries,t.map(hf).filter(Boolean)).concat(this.replayPerformanceEntries);var t;return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(Hf(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(e){try{return Promise.all(Hf(e,[__(Fp.performance.memory)]))}catch(e){return[]}}(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await E_({replayId:e,recordingData:o,segmentId:r,eventContext:n,session:this.session,options:this.getOptions(),timestamp:t})}catch(e){this._handleException(e),this.stop({reason:"sendReplay"});const t=qs();t&&t.recordDroppedEvent("send_error","replay")}}else mf&&vi.error("[Replay] No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(mf&&vi.error("[Replay] Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,o=n>this._options.maxReplayDuration+5e3;if(r||o)return vf(`[Replay] Session duration (${Math.floor(n/1e3)}s) is too ${r?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),void(r&&this._debouncedFlush());const i=this.eventBuffer;if(i&&0===this.session.segmentId&&!i.hasCheckout&&vf("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock)return this._flushLock=this._runFlush(),await this._flushLock,void(this._flushLock=void 0);try{await this._flushLock}catch(e){mf&&vi.error(e)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Pf(this.session)}__init6(){this._onMutationHandler=e=>{const t=e.length,n=this._options.mutationLimit,r=n&&t>n;if(t>this._options.mutationBreadcrumbLimit||r){const e=af({category:"replay.mutations",data:{count:t,limit:r}});this._createCustomBreadcrumb(e)}return!r||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function b_(e,t,n,r){const o=[...e,..."string"==typeof r?r.split(","):[],...t];return void 0!==n&&("string"==typeof n&&o.push(`.${n}`),mi((()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")}))),o.join(",")}const w_='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',O_=["content-length","content-type","accept"];let N_=!1;class R_{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:r=36e5,stickySession:o=!0,useCompression:i=!0,workerUrl:a,_experiments:s={},sessionSampleRate:l,errorSampleRate:c,maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:p=!0,mutationBreadcrumbLimit:g=750,mutationLimit:h=1e4,slowClickTimeout:f=7e3,slowClickIgnoreSelectors:_=[],networkDetailAllowUrls:m=[],networkDetailDenyUrls:v=[],networkCaptureBodies:T=!0,networkRequestHeaders:y=[],networkResponseHeaders:E=[],mask:S=[],maskAttributes:I=["title","placeholder"],unmask:A=[],block:b=[],unblock:w=[],ignore:O=[],maskFn:N,beforeAddRecordingEvent:R,beforeErrorSampling:L,blockClass:P,blockSelector:C,maskInputOptions:x,maskTextClass:k,maskTextSelector:D,ignoreClass:U}={}){this.name=R_.id;const M=function({mask:e,unmask:t,block:n,unblock:r,ignore:o,blockClass:i,blockSelector:a,maskTextClass:s,maskTextSelector:l,ignoreClass:c}){const u={maskTextSelector:b_(e,[".sentry-mask","[data-sentry-mask]"],s,l),unmaskTextSelector:b_(t,[".sentry-unmask","[data-sentry-unmask]"]),blockSelector:b_(n,[".sentry-block","[data-sentry-block]",'base[href="/"]'],i,a),unblockSelector:b_(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:b_(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],c)};return i instanceof RegExp&&(u.blockClass=i),s instanceof RegExp&&(u.maskTextClass=s),u}({mask:S,unmask:A,block:b,unblock:w,ignore:O,blockClass:P,blockSelector:C,maskTextClass:k,maskTextSelector:D,ignoreClass:U});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{...x||{},password:!0},maskTextFn:N,maskInputFn:N,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:i}){return r?o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?i:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i:i}({maskAttributes:I,maskAllText:u,privacyOptions:M,key:e,value:t,el:n}),...M,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(e){}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(r,Jp),stickySession:o,sessionSampleRate:l,errorSampleRate:c,useCompression:i,workerUrl:a,blockAllMedia:p,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:g,mutationLimit:h,slowClickTimeout:f,slowClickIgnoreSelectors:_,networkDetailAllowUrls:m,networkDetailDenyUrls:v,networkCaptureBodies:T,networkRequestHeaders:L_(y),networkResponseHeaders:L_(E),beforeAddRecordingEvent:R,beforeErrorSampling:L,_experiments:s},"number"==typeof l&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ${l} })`),this._initialOptions.sessionSampleRate=l),"number"==typeof c&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ${c} })`),this._initialOptions.errorSampleRate=c),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${w_}`:w_),this._isInitialized&&La())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return N_}set _isInitialized(e){N_=e}setupOnce(){La()&&(this._setup(),setTimeout((()=>this._initialize())))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const e=function(e){const t=qs(),n=t&&t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...Ci(e)};if(!n)return mi((()=>{console.warn("SDK client is not available.")})),r;null==e.sessionSampleRate&&null==e.errorSampleRate&&null==n.replaysSessionSampleRate&&null==n.replaysOnErrorSampleRate&&mi((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}));"number"==typeof n.replaysSessionSampleRate&&(r.sessionSampleRate=n.replaysSessionSampleRate);"number"==typeof n.replaysOnErrorSampleRate&&(r.errorSampleRate=n.replaysOnErrorSampleRate);return r}(this._initialOptions);this._replay=new A_({options:e,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const e=qs().getIntegrationByName("ReplayCanvas");if(!e)return;this._replay._canvas=e.getOptions()}catch(e){}}}function L_(e){return[...O_,...e.map((e=>e.toLowerCase()))]}var P_;function C_(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:C_(e.parentNode,t,n,r+1):-1}function x_(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}R_.__initStatic(),function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(P_||(P_={}));const k_="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let D_={map:{},getId:()=>(console.error(k_),-1),getNode:()=>(console.error(k_),null),removeNodeFromMap(){console.error(k_)},has:()=>(console.error(k_),!1),reset(){console.error(k_)}};function U_(e,t,n,r,o=window){const i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){j_((()=>{n.set.call(this,e)}),0),i&&i.set&&i.set.call(this,e)}}),()=>U_(e,t,i||{},!0)}function M_(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}function G_(e,t,n,r,o){if(!e)return!1;const i=function(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}(e);if(!i)return!1;const a=C_(i,x_(t,n));let s=-1;return!(a<0)&&(r&&(s=C_(i,x_(null,r))),a>-1&&s<0||a<s)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(D_=new Proxy(D_,{get:(e,t,n)=>("map"===t&&console.error(k_),Reflect.get(e,t,n))})),/[1-9][0-9]{12}/.test(Date.now().toString());const V_={};function $_(e){const t=V_[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return V_[e]=r.bind(window)}function F_(...e){return $_("requestAnimationFrame")(...e)}function j_(...e){return $_("setTimeout")(...e)}var W_=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(W_||{});let q_;function B_(e){q_=e}const H_=e=>{if(!q_)return e;return(...t)=>{try{return e(...t)}catch(e){if(q_&&!0===q_(e))return()=>{};throw e}}};for(var J_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",z_="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Y_=0;Y_<64;Y_++)z_[J_.charCodeAt(Y_)]=Y_;const X_=new Map;const K_=(e,t,n)=>{if(!e||!em(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=X_.get(e);return n||(n=new Map,X_.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let o=r.indexOf(e);return-1===o&&(o=r.length,r.push(e)),o};function Q_(e,t,n){if(e instanceof Array)return e.map((e=>Q_(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=J_[n[t]>>2],o+=J_[(3&n[t])<<4|n[t+1]>>4],o+=J_[(15&n[t+1])<<2|n[t+2]>>6],o+=J_[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e);return{rr_type:t,base64:n}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[Q_(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[Q_(e.data,t,n),e.width,e.height]}}if(em(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:K_(e,t,n)}}return e}const Z_=(e,t,n)=>e.map((e=>Q_(e,t,n))),em=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function tm(e,t,n,r,o){const i=[];try{const a=M_(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(i,...a){if(!G_(this,t,n,r)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(i);if("__context"in this||(this.__context=e),o&&["webgl","webgl2"].includes(e))if(a[0]&&"object"==typeof a[0]){const e=a[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else a.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[i,...a])}}));i.push(a)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach((e=>e()))}}function nm(e,t,n,r,o,i,a,s){const l=[],c=Object.getOwnPropertyNames(e);for(const a of c)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(a))try{if("function"!=typeof e[a])continue;const c=M_(e,a,(function(e){return function(...l){const c=e.apply(this,l);if(K_(c,s,this),"tagName"in this.canvas&&!G_(this.canvas,r,o,i)){const e=Z_(l,s,this),r={type:t,property:a,args:e};n(this.canvas,r)}return c}}));l.push(c)}catch(r){const o=U_(e,a,{set(e){n(this.canvas,{type:t,property:a,args:[e],setter:!0})}});l.push(o)}return l}class rm{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:o,unblockSelector:i,maxCanvasSize:a,recordCanvas:s,dataURLOptions:l,errorHandler:c}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,c&&B_(c),e.enableManualSnapshot||H_((()=>{s&&"all"===t&&this.initCanvasMutationObserver(n,r,o,i),s&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,r,o,i,a,{dataURLOptions:l})}))()}initCanvasFPSObserver(e,t,n,r,o,i,a){const s=tm(t,n,r,o,!0),l=this.takeSnapshot(!1,e,t,n,r,o,i,a.dataURLOptions);this.resetObservers=()=>{s(),cancelAnimationFrame(l)}}initCanvasMutationObserver(e,t,n,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const o=tm(e,t,n,r,!1),i=function(e,t,n,r,o){const i=[],a=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const s of a)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[s])continue;const a=M_(t.CanvasRenderingContext2D.prototype,s,(function(i){return function(...a){return G_(this.canvas,n,r,o)||j_((()=>{const n=Z_(a,t,this);e(this.canvas,{type:W_["2D"],property:s,args:n})}),0),i.apply(this,a)}}));i.push(a)}catch(n){const r=U_(t.CanvasRenderingContext2D.prototype,s,{set(t){e(this.canvas,{type:W_["2D"],property:s,args:[t],setter:!0})}});i.push(r)}return()=>{i.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r),a=function(e,t,n,r,o){const i=[];return i.push(...nm(t.WebGLRenderingContext.prototype,W_.WebGL,e,n,r,o,0,t)),void 0!==t.WebGL2RenderingContext&&i.push(...nm(t.WebGL2RenderingContext.prototype,W_.WebGL2,e,n,r,o,0,t)),()=>{i.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r,this.mirror);this.resetObservers=()=>{o(),i(),a()}}snapshot(e){const{options:t}=this,n=this.takeSnapshot(!0,"all"===t.sampling?2:t.sampling||2,t.win,t.blockClass,t.blockSelector,t.unblockSelector,t.maxCanvasSize,t.dataURLOptions,e);this.resetObservers=()=>{cancelAnimationFrame(n)}}takeSnapshot(e,t,n,r,o,i,a,s,l){const c=new Map,u=new Worker(function(){const e=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']);return URL.createObjectURL(e)}());u.onmessage=e=>{const t=e.data,{id:n}=t;if(c.set(n,!1),!("base64"in t))return;const{base64:r,type:o,width:i,height:a}=t;this.mutationCb({id:n,type:W_["2D"],commands:[{property:"clearRect",args:[0,0,i,a]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:o}]},0,0,i,a]}]})};const d=1e3/t;let p,g=0;const h=t=>{g&&t-g<d||(g=t,(e=>{if(e)return[e];const t=[];return n.document.querySelectorAll("canvas").forEach((e=>{G_(e,r,o,i)||t.push(e)})),t})(l).forEach((t=>{const n=this.mirror.getId(t);if(!c.get(n)&&t.width&&t.height){if(c.set(n,!0),!e&&["webgl","webgl2"].includes(t.__context)){const e=t.getContext(t.__context);!1===Ts([e,"optionalAccess",e=>e.getContextAttributes,"call",e=>e(),"optionalAccess",e=>e.preserveDrawingBuffer])&&e.clear(e.COLOR_BUFFER_BIT)}createImageBitmap(t).then((e=>{u.postMessage({id:n,bitmap:e,width:t.width,height:t.height,dataURLOptions:s,maxCanvasSize:a},[e])})).catch((e=>{H_((()=>{throw e}))()}))}}))),p=F_(h)};return p=F_(h),p}startPendingCanvasMutationFlusher(){F_((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,F_(e)};F_(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),F_((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const{type:t,...n}=e;return n})),{type:o}=n[0];this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}const om={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},im="ReplayCanvas",am=1280,sm=(e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,am):am,n?Math.min(n,am):am]};let o;const i=new Promise((e=>o=e));return{name:im,setupOnce(){},getOptions(){const{quality:e,enableManualSnapshot:t,maxCanvasSize:n}=r;return{enableManualSnapshot:t,recordCanvas:!0,getCanvasManager:e=>{const r=new rm({...e,enableManualSnapshot:t,maxCanvasSize:n,errorHandler:e=>{try{"object"==typeof e&&(e.__rrweb__=!0)}catch(e){}}});return o(r),r},...om[e||"medium"]||om.medium}},async snapshot(e){(await i).snapshot(e)}}},lm=sc(im,sm),cm=ii,um="#ffffff",dm="inherit",pm="rgba(108, 95, 199, 1)",gm={fontFamily:"system-ui, 'Helvetica Neue', Arial, sans-serif",fontSize:"14px",background:um,backgroundHover:"#f6f6f7",foreground:"#2b2233",border:"1.5px solid rgba(41, 35, 47, 0.13)",borderRadius:"25px",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",success:"#268d75",error:"#df3338",submitBackground:"rgba(88, 74, 192, 1)",submitBackgroundHover:pm,submitBorder:pm,submitOutlineFocus:"#29232f",submitForeground:um,submitForegroundHover:um,cancelBackground:"transparent",cancelBackgroundHover:"var(--background-hover)",cancelBorder:"var(--border)",cancelOutlineFocus:"var(--input-outline-focus)",cancelForeground:"var(--foreground)",cancelForegroundHover:"var(--foreground)",inputBackground:dm,inputForeground:dm,inputBorder:"var(--border)",inputOutlineFocus:pm,formBorderRadius:"20px",formContentBorderRadius:"6px"},hm=gm,fm={...gm,background:"#29232f",backgroundHover:"#352f3b",foreground:"#ebe6ef",border:"1.5px solid rgba(235, 230, 239, 0.15)",success:"#2da98c",error:"#f55459"},_m="widget",mm="api";async function vm({feedback:{message:e,email:t,name:n,source:r,url:o}},{includeReplay:i=!0}={}){const a=qs(),s=a&&a.getTransport(),l=a&&a.getDsn();if(!a||!s||!l)return;const c={contexts:{feedback:{contact_email:t,name:n,message:e,url:o,source:r}},type:"feedback"};return Ws((async e=>{e.clearBreadcrumbs(),[mm,_m].includes(String(r))&&e.setLevel("info");const t=await async function({client:e,scope:t,event:n}){const r={};e.emit&&e.emit("preprocessEvent",n,r);const o=await ks(e.getOptions(),n,r,t,e,pl());return null===o?(e.recordDroppedEvent("event_processor","feedback",n),null):(o.platform=o.platform||"javascript",o)}({scope:e,client:a,event:c});if(!t)return;a.emit&&a.emit("beforeSendFeedback",t,{includeReplay:Boolean(i)});const n=Zl(t,l,a.getOptions()._metadata,a.getOptions().tunnel);let o;try{o=await s.send(n)}catch(e){const t=new Error("Unable to send Feedback");try{t.cause=e}catch(e){}throw t}if(o){if("number"==typeof o.statusCode&&(o.statusCode<200||o.statusCode>=300))throw new Error("Unable to send Feedback");return o}}))}function Tm({name:e,email:t,message:n,source:r=mm,url:o=di()},i={}){if(!n)throw new Error("Unable to submit feedback with empty message");return vm({feedback:{name:e,email:t,message:n,url:o,source:r}},i)}const ym="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Em(e,t){return{...e,...t,themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function Sm(e){return`\n  --background: ${e.background};\n  --background-hover: ${e.backgroundHover};\n  --foreground: ${e.foreground};\n  --error: ${e.error};\n  --success: ${e.success};\n  --border: ${e.border};\n  --border-radius: ${e.borderRadius};\n  --box-shadow: ${e.boxShadow};\n\n  --submit-background: ${e.submitBackground};\n  --submit-background-hover: ${e.submitBackgroundHover};\n  --submit-border: ${e.submitBorder};\n  --submit-outline-focus: ${e.submitOutlineFocus};\n  --submit-foreground: ${e.submitForeground};\n  --submit-foreground-hover: ${e.submitForegroundHover};\n\n  --cancel-background: ${e.cancelBackground};\n  --cancel-background-hover: ${e.cancelBackgroundHover};\n  --cancel-border: ${e.cancelBorder};\n  --cancel-outline-focus: ${e.cancelOutlineFocus};\n  --cancel-foreground: ${e.cancelForeground};\n  --cancel-foreground-hover: ${e.cancelForegroundHover};\n\n  --input-background: ${e.inputBackground};\n  --input-foreground: ${e.inputForeground};\n  --input-border: ${e.inputBorder};\n  --input-outline-focus: ${e.inputOutlineFocus};\n\n  --form-border-radius: ${e.formBorderRadius};\n  --form-content-border-radius: ${e.formContentBorderRadius};\n  `}function Im({id:e,colorScheme:t,themeDark:n,themeLight:r}){try{const o=cm.document,i=o.createElement("div");i.id=e;const a=i.attachShadow({mode:"open"});return a.appendChild(function(e,t,n){const r=e.createElement("style");return r.textContent=`\n:host {\n  --bottom: 1rem;\n  --right: 1rem;\n  --top: auto;\n  --left: auto;\n  --z-index: 100000;\n  --font-family: ${n.light.fontFamily};\n  --font-size: ${n.light.fontSize};\n\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${Sm("dark"===t?n.dark:n.light)}\n}\n\n${"system"===t?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${Sm(n.dark)}\n  }\n}`:""}\n}`,r}(o,t,{dark:n,light:r})),a.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.dialog {\n  line-height: 25px;\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  position: fixed;\n  inset: 0;\n  z-index: 10000;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n\n  border: var(--border);\n  border-radius: var(--form-border-radius);\n  background-color: var(--background);\n  color: var(--foreground);\n\n  width: 320px;\n  max-width: 100%;\n  max-height: calc(100% - 2rem);\n  display: flex;\n  flex-direction: column;\n  box-shadow: var(--box-shadow);\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n\n.dialog__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 20px;\n  font-weight: 600;\n  padding: 24px 24px 0 24px;\n  margin: 0;\n  margin-bottom: 16px;\n}\n\n.brand-link {\n  display: inline-flex;\n}\n\n.error {\n  color: var(--error);\n  margin-bottom: 16px;\n}\n\n.form {\n  display: grid;\n  overflow: auto;\n  flex-direction: column;\n  gap: 16px;\n  padding: 0 24px 24px;\n}\n\n.form__error-container {\n  color: var(--error);\n}\n\n.form__error-container--hidden {\n  display: none;\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: grid;\n  gap: 4px;\n  align-items: center;\n  grid-auto-flow: column;\n  grid-auto-columns: max-content;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  line-height: inherit;\n  background-color: var(--input-background);\n  box-sizing: border-box;\n  border: var(--input-border);\n  border-radius: var(--form-content-border-radius);\n  color: var(--input-foreground);\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 500;\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  color: var(--input-foreground);\n  opacity: 0.65;\n}\n\n.form__input:focus-visible {\n  outline: 1px auto var(--input-outline-focus);\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n  margin-top: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--cancel-border);\n  border-radius: var(--form-content-border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 6px 16px;\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  background-color: var(--submit-background);\n  border-color: var(--submit-border);\n  color: var(--submit-foreground);\n}\n.btn--primary:hover {\n  background-color: var(--submit-background-hover);\n  color: var(--submit-foreground-hover);\n}\n.btn--primary:focus-visible {\n  outline: 1px auto var(--submit-outline-focus);\n}\n\n.btn--default {\n  background-color: var(--cancel-background);\n  color: var(--cancel-foreground);\n  font-weight: 500;\n}\n.btn--default:hover {\n  background-color: var(--cancel-background-hover);\n  color: var(--cancel-foreground-hover);\n}\n.btn--default:focus-visible {\n  outline: 1px auto var(--cancel-outline-focus);\n}\n\n.success-message {\n  background-color: var(--background);\n  border: var(--border);\n  border-radius: var(--border-radius);\n  box-shadow: var(--box-shadow);\n  font-weight: 600;\n  color: var(--success);\n  padding: 12px 24px;\n  line-height: 25px;\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success-icon path {\n  fill: var(--success);\n}\n",t}(o)),{shadow:a,host:i}}catch(e){throw vi.warn("[Feedback] Browser does not support shadow DOM API"),new Error("Browser does not support shadow DOM API.")}}async function Am(e,t,n){if(!e)return;e.hideError();try{return await Tm({...t,source:_m},n)}catch(t){ym&&vi.error(t),e&&e.showError("There was a problem submitting feedback, please wait and try again.")}}function bm(e,t){return Object.entries(t).forEach((([t,n])=>{e.setAttributeNS(null,t,n)})),e}function wm(e,t,...n){const r=cm.document.createElement(e);t&&Object.entries(t).forEach((([e,t])=>{"className"===e&&"string"==typeof t?r.setAttribute("class",t):"boolean"==typeof t&&t?r.setAttribute(e,""):"string"==typeof t?r.setAttribute(e,t):e.startsWith("on")&&"function"==typeof t&&r.addEventListener(e.substring(2).toLowerCase(),t)}));for(const e of n)Om(r,e);return r}function Om(e,t){const n=cm.document;if(null!=t)if(Array.isArray(t))for(const n of t)Om(e,n);else!1===t||("string"==typeof t?e.appendChild(n.createTextNode(t)):t instanceof Node?e.appendChild(t):e.appendChild(n.createTextNode(String(t))))}function Nm({buttonLabel:e,onClick:t}){const n=wm("button",{type:"button",className:"widget__actor","aria-label":e,"aria-hidden":"false"},function(){const e=e=>cm.document.createElementNS("http://www.w3.org/2000/svg",e),t=bm(e("svg"),{class:"feedback-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"}),n=bm(e("g"),{clipPath:"url(#clip0_57_80)"}),r=bm(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const o=e("defs"),i=bm(e("clipPath"),{id:"clip0_57_80"}),a=bm(e("rect"),{width:"20",height:"20",fill:"white"});return i.appendChild(a),o.appendChild(i),t.appendChild(o).appendChild(i).appendChild(a),{get el(){return t}}}().el,e?wm("span",{className:"widget__actor__text"},e):null);return n.addEventListener("click",(function(e){t&&t(e)})),{get el(){return n},show:()=>{n.classList.remove("widget__actor--hidden"),n.setAttribute("aria-hidden","false")},hide:()=>{n.classList.add("widget__actor--hidden"),n.setAttribute("aria-hidden","true")}}}function Rm(e,t){const n=e.get(t);return"string"==typeof n?n.trim():""}function Lm({nameLabel:e,namePlaceholder:t,emailLabel:n,emailPlaceholder:r,messageLabel:o,messagePlaceholder:i,isRequiredLabel:a,cancelButtonLabel:s,submitButtonLabel:l,showName:c,showEmail:u,isNameRequired:d,isEmailRequired:p,defaultName:g,defaultEmail:h,onCancel:f,onSubmit:_}){const{el:m}=function({label:e}){return{el:wm("button",{type:"submit",className:"btn btn--primary","aria-label":e},e)}}({label:l});const v=wm("div",{className:"form__error-container form__error-container--hidden","aria-hidden":"true"});const T=wm("input",{id:"name",type:c?"text":"hidden","aria-hidden":c?"false":"true",name:"name",required:d,className:"form__input",placeholder:t,value:g}),y=wm("input",{id:"email",type:u?"text":"hidden","aria-hidden":u?"false":"true",name:"email",required:p,className:"form__input",placeholder:r,value:h}),E=wm("textarea",{id:"message",autoFocus:"true",rows:"5",name:"message",required:!0,className:"form__input form__input--textarea",placeholder:i}),S=wm("button",{type:"button",className:"btn btn--default","aria-label":s,onClick:e=>{f&&f(e)}},s),I=wm("form",{className:"form",onSubmit:function(e){if(e.preventDefault(),e.target instanceof HTMLFormElement)try{if(_){const t=new FormData(e.target),n={name:Rm(t,"name"),email:Rm(t,"email"),message:Rm(t,"message")};_(n)}}catch(e){}}},[v,c&&wm("label",{htmlFor:"name",className:"form__label"},[wm("span",{className:"form__label__text"},e,d&&wm("span",{className:"form__label__text--required"},` ${a}`)),T]),!c&&T,u&&wm("label",{htmlFor:"email",className:"form__label"},[wm("span",{className:"form__label__text"},n,p&&wm("span",{className:"form__label__text--required"},` ${a}`)),y]),!u&&y,wm("label",{htmlFor:"message",className:"form__label"},[wm("span",{className:"form__label__text"},o,wm("span",{className:"form__label__text--required"},` ${a}`)),E]),wm("div",{className:"btn-group"},[m,S])]);return{get el(){return I},showError:function(e){v.textContent=e,v.classList.remove("form__error-container--hidden"),v.setAttribute("aria-hidden","false")},hideError:function(){v.textContent="",v.classList.add("form__error-container--hidden"),v.setAttribute("aria-hidden","true")}}}function Pm({formTitle:e,showBranding:t,showName:n,showEmail:r,isNameRequired:o,isEmailRequired:i,colorScheme:a,defaultName:s,defaultEmail:l,onClosed:c,onCancel:u,onSubmit:d,...p}){let g=null;function h(){g&&(g.open=!1)}const{el:f,showError:_,hideError:m}=Lm({showEmail:r,showName:n,isEmailRequired:i,isNameRequired:o,defaultName:s,defaultEmail:l,onSubmit:d,onCancel:u,...p});return g=wm("dialog",{className:"dialog",open:!0,onClick:function(){h(),c&&c()}},wm("div",{className:"dialog__content",onClick:e=>{e.stopPropagation()}},wm("h2",{className:"dialog__header"},e,t&&wm("a",{className:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer"},function({colorScheme:e}){const t=e=>cm.document.createElementNS("http://www.w3.org/2000/svg",e),n=bm(t("svg"),{class:"sentry-logo",width:"32",height:"30",viewBox:"0 0 72 66",fill:"none"}),r=bm(t("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});n.append(r);const o=t("defs"),i=t("style");return i.textContent=`\n    path {\n      fill: ${"dark"===e?"#fff":"#362d59"};\n    }`,"system"===e&&(i.textContent+="\n    @media (prefers-color-scheme: dark) {\n      path: {\n        fill: '#fff';\n      }\n    }\n    "),o.append(i),n.append(o),{get el(){return n}}}({colorScheme:a}).el)),f)),{get el(){return g},showError:_,hideError:m,open:function(){g&&(g.open=!0)},close:h,checkIsOpen:function(){return g&&!0===g.open||!1}}}function Cm({message:e,onRemove:t}){function n(){r&&(r.remove(),t&&t())}const r=wm("div",{className:"success-message",onClick:n},function(){const e=e=>cm.document.createElementNS("http://www.w3.org/2000/svg",e),t=bm(e("svg"),{class:"success-icon",width:"16",height:"17",viewBox:"0 0 16 17",fill:"none"}),n=bm(e("g"),{clipPath:"url(#clip0_57_156)"}),r=bm(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=bm(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);const i=e("defs"),a=bm(e("clipPath"),{id:"clip0_57_156"}),s=bm(e("rect"),{width:"16",height:"16",fill:"white",transform:"translate(0 0.5)"});return a.appendChild(s),i.appendChild(a),t.appendChild(i).appendChild(a).appendChild(s),{get el(){return t}}}().el,e);return{el:r,remove:n}}function xm({shadow:e,options:{shouldCreateActor:t=!0,...n},attachTo:r}){let o,i,a=!1;async function s(t){if(!i)return;const r=[];if(n.isNameRequired&&!t.name&&r.push(n.nameLabel),n.isEmailRequired&&!t.email&&r.push(n.emailLabel),t.message||r.push(n.messageLabel),r.length>0)return void i.showError(`Please enter in the following required fields: ${r.join(", ")}`);await Am(i,t)?(g(),function(){if(e)try{const t=Cm({message:n.successMessageText,onRemove:()=>{r&&clearTimeout(r),c()}});if(!t.el)throw new Error("Unable to show success message");e.appendChild(t.el);const r=setTimeout((()=>{t&&t.remove()}),5e3)}catch(e){vi.error(e)}}(),n.onSubmitSuccess&&n.onSubmitSuccess()):n.onSubmitError&&n.onSubmitError()}function l(){const e=qs(),t=e&&e.getIntegrationByName&&e.getIntegrationByName("Replay");t&&t.flush().catch((e=>{ym&&vi.error(e)}))}function c(){o&&o.show()}function u(){o&&o.hide()}function d(){try{if(i)return i.open(),a=!0,n.onFormOpen&&n.onFormOpen(),void l();const t=n.useSentryUser,r=Bs(),o=r&&r.getUser();if(i=Pm({colorScheme:n.colorScheme,showBranding:n.showBranding,showName:n.showName||n.isNameRequired,showEmail:n.showEmail||n.isEmailRequired,isNameRequired:n.isNameRequired,isEmailRequired:n.isEmailRequired,formTitle:n.formTitle,cancelButtonLabel:n.cancelButtonLabel,submitButtonLabel:n.submitButtonLabel,emailLabel:n.emailLabel,emailPlaceholder:n.emailPlaceholder,messageLabel:n.messageLabel,messagePlaceholder:n.messagePlaceholder,nameLabel:n.nameLabel,namePlaceholder:n.namePlaceholder,isRequiredLabel:n.isRequiredLabel,defaultName:t&&o&&o[t.name]||"",defaultEmail:t&&o&&o[t.email]||"",onClosed:()=>{c(),a=!1,n.onFormClose&&n.onFormClose()},onCancel:()=>{p(),c()},onSubmit:s}),!i.el)throw new Error("Unable to open Feedback dialog");e.appendChild(i.el),u(),n.onFormOpen&&n.onFormOpen(),l()}catch(e){vi.error(e)}}function p(){i&&(i.close(),a=!1,n.onFormClose&&n.onFormClose())}function g(){if(i){p();const e=i.el;e&&e.remove(),i=void 0}}function h(){a||d(),u()}return r?r.addEventListener("click",h):t&&(o=Nm({buttonLabel:n.buttonLabel,onClick:h}),o.el&&e.appendChild(o.el)),{get actor(){return o},get dialog(){return i},showActor:c,hideActor:u,removeActor:function(){o&&o.el&&o.el.remove()},openDialog:d,closeDialog:p,removeDialog:g}}const km=cm.document;class Dm{static __initStatic(){this.id="Feedback"}constructor({autoInject:e=!0,id:t="sentry-feedback",isEmailRequired:n=!1,isNameRequired:r=!1,showBranding:o=!0,showEmail:i=!0,showName:a=!0,useSentryUser:s={email:"email",name:"username"},themeDark:l,themeLight:c,colorScheme:u="system",buttonLabel:d="Report a Bug",cancelButtonLabel:p="Cancel",submitButtonLabel:g="Send Bug Report",formTitle:h="Report a Bug",emailPlaceholder:f="your.email@example.org",emailLabel:_="Email",messagePlaceholder:m="What's the bug? What did you expect?",messageLabel:v="Description",namePlaceholder:T="Your Name",nameLabel:y="Name",isRequiredLabel:E="(required)",successMessageText:S="Thank you for your report!",onFormClose:I,onFormOpen:A,onSubmitError:b,onSubmitSuccess:w}={}){this.name=Dm.id,this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1,this.options={autoInject:e,showBranding:o,id:t,isEmailRequired:n,isNameRequired:r,showEmail:i,showName:a,useSentryUser:s,colorScheme:u,themeDark:{...fm,...l},themeLight:{...hm,...c},buttonLabel:d,cancelButtonLabel:p,submitButtonLabel:g,formTitle:h,emailLabel:_,emailPlaceholder:f,messageLabel:v,messagePlaceholder:m,nameLabel:y,namePlaceholder:T,isRequiredLabel:E,successMessageText:S,onFormClose:I,onFormOpen:A,onSubmitError:b,onSubmitSuccess:w}}setupOnce(){if(La())try{this._cleanupWidgetIfExists();const{autoInject:e}=this.options;if(!e)return;this._createWidget(this.options)}catch(e){ym&&vi.error(e)}}openDialog(){this._widget||this._createWidget({...this.options,shouldCreateActor:!1}),this._widget&&this._widget.openDialog()}closeDialog(){this._widget&&this._widget.closeDialog()}attachTo(e,t){try{const n=Em(this.options,t||{});return this._ensureShadowHost(n,(({shadow:t})=>{const r="string"==typeof e?km.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!r)return ym&&vi.error("[Feedback] Unable to attach to target element"),null;const o=xm({shadow:t,options:n,attachTo:r});return this._widgets.add(o),this._widget||(this._widget=o),o}))}catch(e){return ym&&vi.error(e),null}}createWidget(e){try{return this._createWidget(Em(this.options,e||{}))}catch(e){return ym&&vi.error(e),null}}removeWidget(e){if(!e)return!1;try{if(this._widgets.has(e))return e.removeActor(),e.removeDialog(),this._widgets.delete(e),this._widget===e&&(this._widget=null),!0}catch(e){ym&&vi.error(e)}return!1}getWidget(){return this._widget}remove(){this._host&&this._host.remove(),this._initialize()}_initialize(){this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1}_cleanupWidgetIfExists(){this._host&&this.remove();const e=km.querySelector(`#${this.options.id}`);e&&e.remove()}_createWidget(e){return this._ensureShadowHost(e,(({shadow:t})=>{const n=xm({shadow:t,options:e});return!this._hasInsertedActorStyles&&n.actor&&(t.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.widget__actor {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  line-height: 16px;\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n\n  border-radius: var(--border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 16px;\n  text-decoration: none;\n  z-index: 9000;\n\n  color: var(--foreground);\n  background-color: var(--background);\n  border: var(--border);\n  box-shadow: var(--box-shadow);\n  opacity: 1;\n  transition: opacity 0.1s ease-in-out;\n}\n\n.widget__actor:hover {\n  background-color: var(--background-hover);\n}\n\n.widget__actor svg {\n  width: 16px;\n  height: 16px;\n}\n\n.widget__actor--hidden {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n\n.widget__actor__text {\n}\n\n@media (max-width: 600px) {\n  .widget__actor__text {\n    display: none;\n  }\n}\n\n.feedback-icon path {\n  fill: var(--foreground);\n}\n",t}(km)),this._hasInsertedActorStyles=!0),this._widgets.add(n),this._widget||(this._widget=n),n}))}_ensureShadowHost(e,t){let n=!1;if(!this._shadow||!this._host){const{id:t,colorScheme:r,themeLight:o,themeDark:i}=e,{shadow:a,host:s}=Im({id:t,colorScheme:r,themeLight:o,themeDark:i});this._shadow=a,this._host=s,n=!0}this._host.dataset.sentryFeedbackColorscheme=e.colorScheme;const r=t({shadow:this._shadow,host:this._host});return n&&km.body.appendChild(this._host),r}}Dm.__initStatic();const Um="CaptureConsole",Mm=(e={})=>{const t=e.levels||fi;return{name:Um,setupOnce(){},setup(e){"console"in ii&&qi((({args:n,level:r})=>{qs()===e&&t.includes(r)&&function(e,t){const n={level:Ba(t),extra:{arguments:e}};Ws((r=>{if(r.addEventProcessor((e=>(e.logger="console",Xi(e,{handled:!1,type:"console"}),e))),"assert"===t&&!1===e[0]){const t=`Assertion failed: ${Ko(e.slice(1)," ")||"console.assert"}`;return r.setExtra("arguments",e.slice(1)),void Vs(t,n)}const o=e.find((e=>e instanceof Error));if("error"===t&&o)return void Gs(o,n);Vs(Ko(e," "),n)}))}(n,r)}))}}};sc(Um,Mm);const Gm="Debug",Vm=(e={})=>{const t={debugger:!1,stringify:!1,...e};return{name:Gm,setupOnce(){},setup(e){e.on&&e.on("beforeSendEvent",((e,n)=>{t.debugger,mi((()=>{t.stringify?(console.log(JSON.stringify(e,null,2)),n&&Object.keys(n).length&&console.log(JSON.stringify(n,null,2))):(console.log(e),n&&Object.keys(n).length&&console.log(n))}))}))}}};sc(Gm,Vm);const $m="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Fm="Dedupe",jm=()=>{let e;return{name:Fm,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!qm(e,t))return!1;if(!Wm(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=Bm(t),r=Bm(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!qm(e,t))return!1;if(!Wm(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return $m&&vi.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}};function Wm(e,t){let n=Hm(e),r=Hm(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function qm(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function Bm(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Hm(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}sc(Fm,jm);const Jm="ExtraErrorData",zm=(e={})=>{const t=e.depth||3,n=e.captureErrorCause||!1;return{name:Jm,setupOnce(){},processEvent:(e,r)=>function(e,t={},n,r){if(!t.originalException||!Uo(t.originalException))return e;const o=t.originalException.name||t.originalException.constructor.name,i=function(e,t){try{const n=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],r={};for(const t of Object.keys(e)){if(-1!==n.indexOf(t))continue;const o=e[t];r[t]=Uo(o)?o.toString():o}if(t&&void 0!==e.cause&&(r.cause=Uo(e.cause)?e.cause.toString():e.cause),"function"==typeof e.toJSON){const t=e.toJSON();for(const e of Object.keys(t)){const n=t[e];r[e]=Uo(n)?n.toString():n}}return r}catch(e){$m&&vi.error("Unable to extract extra data from the Error object:",e)}return null}(t.originalException,r);if(i){const t={...e.contexts},r=Pa(i,n);return Wo(r)&&(wi(r,"__sentry_skip_normalization__",!0),t[o]=r),{...e,contexts:t}}return e}(e,r,t,n)}};sc(Jm,zm);var Ym="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};const Xm=ii,Km="ReportingObserver",Qm=new WeakMap,Zm=(e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(e){if(Qm.has(qs()))for(const t of e)Ws((e=>{e.setExtra("url",t.url);const n=`ReportingObserver [${t.type}]`;let r="No details available";if(t.body){const n={};for(const e in t.body)n[e]=t.body[e];if(e.setExtra("body",n),"crash"===t.type){const e=t.body;r=[e.crashId||"",e.reason||""].join(" ").trim()||r}else{r=t.body.message||r}}Vs(`${n}: ${r}`)}))}return{name:Km,setupOnce(){if(!("ReportingObserver"in aa))return;new Xm.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(e){Qm.set(e,!0)}}};sc(Km,Zm);const ev="RewriteFrames",tv=(e={})=>{const t=e.root,n=e.prefix||"app:///",r=e.iteratee||(e=>{if(!e.filename)return e;const r=/^[a-zA-Z]:\\/.test(e.filename)||e.filename.includes("\\")&&!e.filename.includes("/"),o=/^\//.test(e.filename);if(r||o){const o=r?e.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):e.filename,i=t?function(e,t){e=Da(e).slice(1),t=Da(t).slice(1);const n=Ua(e.split("/")),r=Ua(t.split("/")),o=Math.min(n.length,r.length);let i=o;for(let e=0;e<o;e++)if(n[e]!==r[e]){i=e;break}let a=[];for(let e=i;e<n.length;e++)a.push("..");return a=a.concat(r.slice(i)),a.join("/")}(t,o):Ma(o);e.filename=`${n}${i}`}return e});return{name:ev,setupOnce(){},processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map((e=>{return{...e,...e.stacktrace&&{stacktrace:(t=e.stacktrace,{...t,frames:t&&t.frames&&t.frames.map((e=>r(e)))})}};var t}))}}}catch(t){return e}}(t)),t}}};sc(ev,tv);const nv="SessionTiming",rv=()=>{const e=Date.now();return{name:nv,setupOnce(){},processEvent(t){const n=Date.now();return{...t,extra:{...t.extra,"session:start":e,"session:duration":n-e,"session:end":n}}}}};sc(nv,rv);const ov="HttpClient",iv=(e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:ov,setupOnce(){},setup(e){!function(e,t){if(!ca())return;ua((n=>{if(qs()!==e)return;const{response:r,args:o}=n,[i,a]=o;r&&function(e,t,n,r){if(lv(e,n.status,n.url)){const e=function(e,t){if(!t&&e instanceof Request)return e;if(e instanceof Request&&e.bodyUsed)return e;return new Request(e,t)}(t,r);let o,i,a,s;uv()&&([{headers:o,cookies:a},{headers:i,cookies:s}]=[{cookieHeader:"Cookie",obj:e},{cookieHeader:"Set-Cookie",obj:n}].map((({cookieHeader:e,obj:t})=>{const n=function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(t.headers);let r;try{const t=n[e]||n[e.toLowerCase()]||void 0;t&&(r=sv(t))}catch(t){$m&&vi.log(`Could not extract cookies from header ${e}`)}return{headers:n,cookies:r}})));$s(cv({url:e.url,method:e.method,status:n.status,requestHeaders:o,responseHeaders:i,requestCookies:a,responseCookies:s}))}}(t,i,r,a)}))}(e,t),function(e,t){if(!("XMLHttpRequest"in ii))return;Oa((n=>{if(qs()!==e)return;const r=n.xhr,o=r[wa];if(!o)return;const{method:i,request_headers:a}=o;try{!function(e,t,n,r){if(lv(e,t.status,t.responseURL)){let e,o,i;if(uv()){try{const e=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;e&&(o=sv(e))}catch(e){$m&&vi.log("Could not extract cookies from response headers")}try{i=function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n]=r,e}),{})}(t)}catch(e){$m&&vi.log("Could not extract headers from response")}e=r}$s(cv({url:t.responseURL,method:n,status:t.status,requestHeaders:e,responseHeaders:i,responseCookies:o}))}}(t,r,i,a)}catch(e){$m&&vi.warn("Error while extracting response event form XHR response",e)}}))}(e,t)}}};function av(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function sv(e){return e.split("; ").reduce(((e,t)=>{const[n,r]=t.split("=");return e[n]=r,e}),{})}function lv(e,t,n){return function(e,t){return e.some((e=>"number"==typeof e?e===t:t>=e[0]&&t<=e[1]))}(e.failedRequestStatusCodes,t)&&(r=e.failedRequestTargets,o=n,r.some((e=>"string"==typeof e?o.includes(e):e.test(o))))&&!Rc(n,qs());var r,o}function cv(e){const t=`HTTP Client Error with status code: ${e.status}`,n={message:t,exception:{values:[{type:"Error",value:t}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:av(e.responseHeaders)}}};return Xi(n,{type:"http.client",handled:!1}),n}function uv(){const e=qs();return!!e&&Boolean(e.getOptions().sendDefaultPii)}sc(ov,iv);const dv=ii,pv="ContextLines",gv=(e={})=>{const t=null!=e.frameContextLines?e.frameContextLines:7;return{name:pv,setupOnce(){},processEvent:e=>function(e,t){const n=dv.document,r=dv.location&&(o=dv.location.href,o.split(/[\?#]/,1)[0]);var o;if(!n||!r)return e;const i=e.exception&&e.exception.values;if(!i||!i.length)return e;const a=n.documentElement.innerHTML;if(!a)return e;const s=["<!DOCTYPE html>","<html>",...a.split("\n"),"</html>"];return i.forEach((e=>{const n=e.stacktrace;n&&n.frames&&(n.frames=n.frames.map((e=>function(e,t,n,r){if(e.filename!==n||!e.lineno||!t.length)return e;return function(e,t,n=5){if(void 0===t.lineno)return;const r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map((e=>Xo(e,0))),t.context_line=Xo(e[Math.min(r-1,o)],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map((e=>Xo(e,0)))}(t,e,r),e}(e,s,r,t))))})),e}(e,t)}};function hv(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function fv(e){return hv(e.getAllKeys())}function _v(e){let t;function n(){return null==t&&(t=function(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=hv(n);return e=>r.then((n=>e(n.transaction(t,"readwrite").objectStore(t))))}(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{insert:async t=>{try{const r=await cs(t,e.textEncoder);await function(e,t,n){return e((e=>fv(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.max(...r,0)+1),hv(e.transaction)}))))}(n(),r,e.maxQueueSize||30)}catch(e){}},pop:async()=>{try{const t=await function(e){return e((e=>fv(e).then((t=>{if(0!==t.length)return hv(e.get(t[0])).then((n=>(e.delete(t[0]),hv(e.transaction).then((()=>n)))))}))))}(n());if(t)return function(e,t,n){let r="string"==typeof e?t.encode(e):e;function o(e){const t=r.subarray(0,e);return r=r.subarray(e+1),t}function i(){let e=r.indexOf(10);return e<0&&(e=r.length),JSON.parse(n.decode(o(e)))}const a=i(),s=[];for(;r.length;){const e=i(),t="number"==typeof e.length?e.length:void 0;s.push([e,t?o(t):i()])}return[a,s]}(t,e.textEncoder||new TextEncoder,e.textDecoder||new TextDecoder)}catch(e){}}}}sc(pv,gv);const mv=1e6,vv=String(0),Tv="main";let yv="",Ev="",Sv="",Iv=Id.navigator&&Id.navigator.userAgent||"",Av="";const bv=Id.navigator&&Id.navigator.language||Id.navigator&&Id.navigator.languages&&Id.navigator.languages[0]||"";const wv=Id.navigator&&Id.navigator.userAgentData;var Ov;function Nv(e){return function(e){return!("thread_metadata"in e)}(e)?function(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[vv]:{name:Tv}}};if(!e.samples.length)return r;const o=e.samples[0].timestamp,i="number"==typeof performance.timeOrigin?performance.timeOrigin:za||0,a=i-(za||i);for(let i=0;i<e.samples.length;i++){const s=e.samples[i];if(void 0===s.stackId){void 0===t&&(t=n,r.stacks[t]=[],n++),r.samples[i]={elapsed_since_start_ns:((s.timestamp+a-o)*mv).toFixed(0),stack_id:t,thread_id:vv};continue}let l=e.stacks[s.stackId];const c=[];for(;l;){c.push(l.frameId);const t=e.frames[l.frameId];void 0===r.frames[l.frameId]&&(r.frames[l.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column}),l=void 0===l.parentId?void 0:e.stacks[l.parentId]}const u={elapsed_since_start_ns:((s.timestamp+a-o)*mv).toFixed(0),stack_id:n,thread_id:vv};r.stacks[n]=c,r.samples[i]=u,n++}return r}(e):e}function Rv(e,t,n,r){if("transaction"!==r.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const o=function(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return"string"==typeof t&&32!==t.length&&Od&&vi.log(`[Profiling] Invalid traceId: ${t} on profiled event`),"string"!=typeof t?"":t}(r),i=Nv(n),a=t||("number"==typeof r.start_timestamp?1e3*r.start_timestamp:Date.now()),s="number"==typeof r.timestamp?1e3*r.timestamp:Date.now();return{event_id:e,timestamp:new Date(a).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||Es,runtime:{name:"javascript",version:Id.navigator.userAgent},os:{name:yv,version:Ev,build_number:Iv},device:{locale:bv,model:Av,manufacturer:Iv,architecture:Sv,is_emulator:!1},debug_meta:{images:Cv(n.resources)},profile:i,transactions:[{name:r.transaction||"",id:r.event_id||Hi(),trace_id:o,active_thread_id:vv,relative_start_ns:"0",relative_end_ns:(1e6*(s-a)).toFixed(0)}]}}function Lv(e){return"pageload"===e.op}"object"==typeof(Ov=wv)&&null!==Ov&&"getHighEntropyValues"in Ov&&wv.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((e=>{if(yv=e.platform||"",Sv=e.architecture||"",Av=e.model||"",Ev=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];Iv=`${t.brand} ${t.version}`}})).catch((e=>{}));const Pv=new WeakMap;function Cv(e){const t=ii._sentryDebugIds;if(!t)return[];const n=qs(),r=n&&n.getOptions(),o=r&&r.stackParser;if(!o)return[];let i;const a=Pv.get(o);a?i=a:(i=new Map,Pv.set(o,i));const s=Object.keys(t).reduce(((e,n)=>{let r;const a=i.get(n);a?r=a:(r=o(n),i.set(n,r));for(let o=r.length-1;o>=0;o--){const i=r[o],a=i&&i.filename;if(i&&a){e[a]=t[n];break}}return e}),{}),l=[];for(const t of e)t&&s[t]&&l.push({type:"sourcemap",code_file:t,debug_id:s[t]});return l}let xv=!1;function kv(e){if(xv)return Od&&vi.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return Od&&vi.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=qs(),n=t&&t.getOptions();if(!n)return Od&&vi.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;if(!("number"!=typeof(o=r)&&"boolean"!=typeof o||"number"==typeof o&&isNaN(o)?(Od&&vi.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),0):!0===o||!1===o||!(o<0||o>1)||(Od&&vi.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${o}.`),0)))return Od&&vi.warn("[Profiling] Discarding profile because of invalid sample rate."),!1;var o;if(!r)return Od&&vi.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1;return!!(!0===r||Math.random()<r)||(Od&&vi.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1)}function Dv(e,t,n,r){return function(e){return e.samples.length<2?(Od&&vi.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!e.frames.length||(Od&&vi.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?Rv(e,t,n,r):null}const Uv=new Map;function Mv(e){const t=Uv.get(e);return t&&Uv.delete(e),t}function Gv(e){let t;Lv(e)&&(t=1e3*Ja());const n=function(){const e=Id.Profiler;if("function"!=typeof e)return void(Od&&vi.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const t=Math.floor(3e3);try{return new e({sampleInterval:10,maxBufferSize:t})}catch(e){Od&&(vi.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),vi.log("[Profiling] Disabling profiling for current user session.")),xv=!0}}();if(!n)return e;Od&&vi.log(`[Profiling] started profiling transaction: ${Cs(e).description}`);const r=Hi();async function o(){return e&&n?n.stop().then((t=>(i&&(Id.clearTimeout(i),i=void 0),Od&&vi.log(`[Profiling] stopped profiling of transaction: ${Cs(e).description}`),t?(function(e,t){if(Uv.set(e,t),Uv.size>30){const e=Uv.keys().next().value;Uv.delete(e)}}(r,t),null):(Od&&vi.log(`[Profiling] profiler returned null profile for: ${Cs(e).description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started"),null)))).catch((e=>(Od&&vi.log("[Profiling] error while stopping profiler:",e),null))):null}let i=Id.setTimeout((()=>{Od&&vi.log("[Profiling] max profile duration elapsed, stopping profiling for:",Cs(e).description),o()}),3e4);const a=e.end.bind(e);return e.end=function(){return e?(o().then((()=>{e.setContext("profile",{profile_id:r,start_timestamp:t}),a()}),(()=>{a()})),e):a()},e}const Vv="BrowserProfiling",$v=()=>({name:Vv,setupOnce(){},setup(e){const t=Bs().getTransaction();t&&Lv(t)&&kv(t)&&Gv(t),"function"==typeof e.on?(e.on("startTransaction",(e=>{kv(e)&&Gv(e)})),e.on("beforeEnvelope",(e=>{if(!Uv.size)return;const t=function(e){const t=[];return ss(e,((e,n)=>{if("transaction"===n)for(let n=1;n<e.length;n++){const r=e[n];r&&r.contexts&&r.contexts.profile&&r.contexts.profile.profile_id&&t.push(e[n])}})),t}(e);if(!t.length)return;const n=[];for(const e of t){const t=e&&e.contexts,r=t&&t.profile&&t.profile.profile_id,o=t&&t.profile&&t.profile.start_timestamp;if("string"!=typeof r){Od&&vi.log("[Profiling] cannot find profile for a transaction without a profile context");continue}if(!r){Od&&vi.log("[Profiling] cannot find profile for a transaction without a profile context");continue}t&&t.profile&&delete t.profile;const i=Mv(r);if(!i){Od&&vi.log(`[Profiling] Could not retrieve profile for transaction: ${r}`);continue}const a=Dv(r,o,i,e);a&&n.push(a)}!function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n])}(e,n)}))):vi.warn("[Profiling] Client does not support hooks, profiling will be disabled")}}),Fv=sc(Vv,$v);let jv={};Id.Sentry&&Id.Sentry.Integrations&&(jv=Id.Sentry.Integrations);const Wv={...jv,...nu,...$p};var qv=Object.freeze({__proto__:null,Breadcrumbs:cp,BrowserClient:Vd,BrowserProfilingIntegration:Fv,BrowserTracing:class{constructor(e){this.name="BrowserTracing",this._hasSetTracePropagationTargets=!1,Kl(),ru&&(this._hasSetTracePropagationTargets=!(!e||!e.tracePropagationTargets&&!e.tracingOrigins)),this.options={...hd,...e},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),this._collectWebVitals=Zu(),this._interactionIdToRouteNameMapping={},this.options.enableInp&&nd(this._interactionIdToRouteNameMapping,this.options.interactionsSampleRate),this.options.enableLongTask&&ed(),this.options._experiments.enableInteractions&&td(),this._latestRoute={name:void 0,context:void 0}}setupOnce(e,t){this._getCurrentHub=t;const n=t().getClient(),r=n&&n.getOptions(),{routingInstrumentation:o,startTransactionOnLocationChange:i,startTransactionOnPageLoad:a,markBackgroundTransactions:s,traceFetch:l,traceXHR:c,shouldCreateSpanForRequest:u,enableHTTPTimings:d,_experiments:p}=this.options,g=r&&r.tracePropagationTargets,h=g||this.options.tracePropagationTargets;ru&&this._hasSetTracePropagationTargets&&g&&vi.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),o((e=>{const n=this._createRouteTransaction(e);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(n,e,t),n}),a,i),s&&iu(),p.enableInteractions&&this._registerInteractionListener(),this.options.enableInp&&this._registerInpInteractionListener(),ud({traceFetch:l,traceXHR:c,tracePropagationTargets:h,shouldCreateSpanForRequest:u,enableHTTPTimings:d})}_createRouteTransaction(e){if(!this._getCurrentHub)return void(ru&&vi.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`));const t=this._getCurrentHub(),{beforeNavigate:n,idleTimeout:r,finalTimeout:o,heartbeatInterval:i}=this.options,a="pageload"===e.op;let s;if(a){const t=a?fd("sentry-trace"):"",n=a?fd("baggage"):void 0,{traceId:r,dsc:o,parentSpanId:i,sampled:l}=rs(t,n);s={traceId:r,parentSpanId:i,parentSampled:l,...e,metadata:{...e.metadata,dynamicSamplingContext:o},trimEnd:!0}}else s={trimEnd:!0,...e};const l="function"==typeof n?n(s):s,c=void 0===l?{...s,sampled:!1}:l;c.metadata=c.name!==s.name?{...c.metadata,source:"custom"}:c.metadata,this._latestRoute.name=c.name,this._latestRoute.context=c,!1===c.sampled&&ru&&vi.log(`[Tracing] Will not send ${c.op} transaction because of beforeNavigate.`),ru&&vi.log(`[Tracing] Starting ${c.op} transaction on scope`);const{location:u}=ou,d=Xl(t,c,r,o,!0,{location:u},i,a);return a&&ou.document&&(ou.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(ou.document.readyState)&&d.sendAutoFinishSignal()})),["interactive","complete"].includes(ou.document.readyState)&&d.sendAutoFinishSignal()),d.registerBeforeFinishCallback((e=>{this._collectWebVitals(),od(e)})),d}_registerInteractionListener(){let e;const t=()=>{const{idleTimeout:t,finalTimeout:n,heartbeatInterval:r}=this.options,o="ui.action.click",i=_l();if(i&&i.op&&["navigation","pageload"].includes(i.op))return void(ru&&vi.warn(`[Tracing] Did not create ${o} transaction because a pageload or navigation transaction is in progress.`));if(e&&(e.setFinishReason("interactionInterrupted"),e.end(),e=void 0),!this._getCurrentHub)return void(ru&&vi.warn(`[Tracing] Did not create ${o} transaction because _getCurrentHub is invalid.`));if(!this._latestRoute.name)return void(ru&&vi.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`));const a=this._getCurrentHub(),{location:s}=ou,l={name:this._latestRoute.name,op:o,trimEnd:!0,data:{[Dl]:this._latestRoute.context?_d(this._latestRoute.context):"url"}};e=Xl(a,l,t,n,!0,{location:s},r)};["click"].forEach((e=>{ou.document&&addEventListener(e,t,{once:!1,capture:!0})}))}_registerInpInteractionListener(){const e=({entries:e})=>{const t=qs(),n=void 0!==t&&void 0!==t.getIntegrationByName?t.getIntegrationByName("Replay"):void 0,r=void 0!==n?n.getReplayId():void 0,o=_l(),i=Bs(),a=void 0!==i?i.getUser():void 0;e.forEach((e=>{if(function(e){return"duration"in e}(e)){const t=e.interactionId;if(void 0===t)return;const n=this._interactionIdToRouteNameMapping[t],i=e.duration,s=e.startTime,l=Object.keys(this._interactionIdToRouteNameMapping),c=l.length>0?l.reduce(((e,t)=>this._interactionIdToRouteNameMapping[e].duration<this._interactionIdToRouteNameMapping[t].duration?e:t)):void 0;if("first-input"===e.entryType){if(l.map((e=>this._interactionIdToRouteNameMapping[e])).some((e=>e.duration===i&&e.startTime===s)))return}if(!t)return;if(n)n.duration=Math.max(n.duration,i);else if(l.length<10||void 0===c||i>this._interactionIdToRouteNameMapping[c].duration){const e=this._latestRoute.name,n=this._latestRoute.context;e&&n&&(c&&Object.keys(this._interactionIdToRouteNameMapping).length>=10&&delete this._interactionIdToRouteNameMapping[c],this._interactionIdToRouteNameMapping[t]={routeName:e,duration:i,parentContext:n,user:a,activeTransaction:o,replayId:r,startTime:s})}}}))};Du("event",e),Du("first-input",e)}},Dedupe:pp,Feedback:Dm,FunctionToString:Jc,GlobalHandlers:Tp,HttpContext:bp,Hub:ll,InboundFilters:Fc,Integrations:Wv,LinkedErrors:Np,ModuleMetadata:Uc,Replay:R_,ReplayCanvas:lm,SDK_VERSION:il,SEMANTIC_ATTRIBUTE_SENTRY_OP:Ml,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:Gl,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:Ul,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:Dl,Scope:rl,TryCatch:Cp,WINDOW:Id,addBreadcrumb:Fs,addEventProcessor:_c,addGlobalEventProcessor:Is,addIntegration:function(e){const t=qs();t&&t.addIntegration?t.addIntegration(e):ys&&vi.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)},addTracingExtensions:Kl,breadcrumbsIntegration:lp,browserApiErrorsIntegration:Pp,browserProfilingIntegration:$v,browserTracingIntegration:(e={})=>{const t=!!ru&&!(!e.tracePropagationTargets&&!e.tracingOrigins);Kl(),!e.tracePropagationTargets&&e.tracingOrigins&&(e.tracePropagationTargets=e.tracingOrigins);const n={...md,...e},r=Zu(),o={};n.enableInp&&nd(o,n.interactionsSampleRate),n.enableLongTask&&ed(),n._experiments.enableInteractions&&td();const i={name:void 0,context:void 0};function a(e){const t=dl(),{beforeStartSpan:o,idleTimeout:a,finalTimeout:s,heartbeatInterval:l}=n,c="pageload"===e.op;let u;if(c){const t=c?yd("sentry-trace"):"",n=c?yd("baggage"):void 0,{traceId:r,dsc:o,parentSpanId:i,sampled:a}=rs(t,n);u={traceId:r,parentSpanId:i,parentSampled:a,...e,metadata:{...e.metadata,dynamicSamplingContext:o},trimEnd:!0}}else u={trimEnd:!0,...e};const d=o?o(u):u;d.metadata=d.name!==u.name?{...d.metadata,source:"custom"}:d.metadata,i.name=d.name,i.context=d,!1===d.sampled&&ru&&vi.log(`[Tracing] Will not send ${d.op} transaction because of beforeNavigate.`),ru&&vi.log(`[Tracing] Starting ${d.op} transaction on scope`);const{location:p}=ou,g=Xl(t,d,a,s,!0,{location:p},l,c);return c&&ou.document&&(ou.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(ou.document.readyState)&&g.sendAutoFinishSignal()})),["interactive","complete"].includes(ou.document.readyState)&&g.sendAutoFinishSignal()),g.registerBeforeFinishCallback((e=>{r(),od(e)})),g}return{name:"BrowserTracing",setupOnce:()=>{},afterAllSetup(e){const r=e.getOptions(),{markBackgroundSpan:s,traceFetch:l,traceXHR:c,shouldCreateSpanForRequest:u,enableHTTPTimings:d,_experiments:p}=n,g=r&&r.tracePropagationTargets,h=g||n.tracePropagationTargets;let f;ru&&t&&g&&vi.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used.");let _=ou.location&&ou.location.href;if(e.on&&(e.on("startNavigationSpan",(e=>{f&&(ru&&vi.log(`[Tracing] Finishing current transaction with op: ${Cs(f).op}`),f.end()),f=a({op:"navigation",...e})})),e.on("startPageLoadSpan",(e=>{f&&(ru&&vi.log(`[Tracing] Finishing current transaction with op: ${Cs(f).op}`),f.end()),f=a({op:"pageload",...e})}))),n.instrumentPageLoad&&e.emit&&ou.location){const t={name:ou.location.pathname,startTimestamp:za?za/1e3:void 0,origin:"auto.pageload.browser",attributes:{[Dl]:"url"}};vd(e,t)}n.instrumentNavigation&&e.emit&&ou.location&&Ia((({to:t,from:n})=>{if(void 0===n&&_&&-1!==_.indexOf(t))_=void 0;else if(n!==t){_=void 0;const t={name:ou.location.pathname,origin:"auto.navigation.browser",attributes:{[Dl]:"url"}};Td(e,t)}})),s&&iu(),p.enableInteractions&&function(e,t){let n;const r=()=>{const{idleTimeout:r,finalTimeout:o,heartbeatInterval:i}=e,a="ui.action.click",s=_l();if(s&&s.op&&["navigation","pageload"].includes(s.op))return void(ru&&vi.warn(`[Tracing] Did not create ${a} transaction because a pageload or navigation transaction is in progress.`));if(n&&(n.setFinishReason("interactionInterrupted"),n.end(),n=void 0),!t.name)return void(ru&&vi.warn(`[Tracing] Did not create ${a} transaction because _latestRouteName is missing.`));const{location:l}=ou,c={name:t.name,op:a,trimEnd:!0,data:{[Dl]:t.context?Sd(t.context):"url"}};n=Xl(dl(),c,r,o,!0,{location:l},i)};["click"].forEach((e=>{ou.document&&addEventListener(e,r,{once:!1,capture:!0})}))}(n,i),n.enableInp&&function(e,t){const n=({entries:n})=>{const r=qs(),o=void 0!==r&&void 0!==r.getIntegrationByName?r.getIntegrationByName("Replay"):void 0,i=void 0!==o?o.getReplayId():void 0,a=_l(),s=Bs(),l=void 0!==s?s.getUser():void 0;n.forEach((n=>{if(function(e){return"duration"in e}(n)){const r=n.interactionId;if(void 0===r)return;const o=e[r],s=n.duration,c=n.startTime,u=Object.keys(e),d=u.length>0?u.reduce(((t,n)=>e[t].duration<e[n].duration?t:n)):void 0;if("first-input"===n.entryType){if(u.map((t=>e[t])).some((e=>e.duration===s&&e.startTime===c)))return}if(!r)return;if(o)o.duration=Math.max(o.duration,s);else if(u.length<Ed||void 0===d||s>e[d].duration){const n=t.name,o=t.context;n&&o&&(d&&Object.keys(e).length>=Ed&&delete e[d],e[r]={routeName:n,duration:s,parentContext:o,user:l,activeTransaction:a,replayId:i,startTime:c})}}}))};Du("event",n),Du("first-input",n)}(o,i),ud({traceFetch:l,traceXHR:c,tracePropagationTargets:h,shouldCreateSpanForRequest:u,enableHTTPTimings:d})},options:n}},captureConsoleIntegration:Mm,captureEvent:$s,captureException:Gs,captureMessage:Vs,captureSession:Ys,captureUserFeedback:function(e){const t=qs();t&&t.captureUserFeedback(e)},chromeStackLineParser:Jd,close:async function(e){const t=qs();return t?t.close(e):(ys&&vi.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))},configureScope:function(e){dl().configureScope(e)},contextLinesIntegration:gv,continueTrace:({sentryTrace:e,baggage:t},n)=>{const r=Bs(),{traceparentData:o,dynamicSamplingContext:i,propagationContext:a}=function(e,t){const n=ns(e),r=Qa(t),{traceId:o,parentSpanId:i,parentSampled:a}=n||{};return n?{traceparentData:n,dynamicSamplingContext:r||{},propagationContext:{traceId:o||Hi(),parentSpanId:i||Hi().substring(16),spanId:Hi().substring(16),sampled:a,dsc:r||{}}}:{traceparentData:n,dynamicSamplingContext:void 0,propagationContext:{traceId:o||Hi(),spanId:Hi().substring(16)}}}(e,t);r.setPropagationContext(a),ys&&o&&vi.log(`[Tracing] Continuing trace ${o.traceId}.`);const s={...o,metadata:Ci({dynamicSamplingContext:i})};return n?gl((()=>n(s))):s},createTransport:Ic,createUserFeedbackEnvelope:Gd,debugIntegration:Vm,dedupeIntegration:jm,defaultIntegrations:Mp,defaultRequestInstrumentationOptions:cd,defaultStackLineParsers:rp,defaultStackParser:op,endSession:Js,eventFromException:xd,eventFromMessage:kd,exceptionFromError:Nd,extraErrorDataIntegration:zm,extractTraceparentData:ml,feedbackIntegration:e=>new Dm(e),flush:async function(e){const t=qs();return t?t.flush(e):(ys&&vi.warn("Cannot flush events. No client defined."),Promise.resolve(!1))},forceLoad:function(){},functionToStringIntegration:Hc,geckoStackLineParser:Xd,getActiveSpan:Ol,getActiveTransaction:_l,getClient:qs,getCurrentHub:dl,getCurrentScope:Bs,getDefaultIntegrations:Gp,getHubFromCarrier:hl,getReplay:function(){const e=qs();return e&&e.getIntegrationByName&&e.getIntegrationByName("Replay")},getSpanStatusFromHttpCode:El,globalHandlersIntegration:vp,httpClientIntegration:iv,httpContextIntegration:Ap,inboundFiltersIntegration:$c,init:Vp,instrumentOutgoingRequests:ud,isInitialized:function(){return!!qs()},lastEventId:function(){return dl().lastEventId()},linkedErrorsIntegration:Op,makeBrowserOfflineTransport:function(e){return function(e){return t=>e({...t,createStore:_v})}(wc(e))},makeFetchTransport:Fd,makeMain:ul,makeMultiplexedTransport:function(e,t){return n=>{const r=e(n),o=new Map;function i(t,r){const i=r?`${t}:${r}`:t;let a=o.get(i);if(!a){const s=Ei(t);if(!s)return;const l=nc(s,n.tunnel);a=r?function(e,t){return n=>{const r=e(n);return{...r,send:async e=>{const n=Oc(e,["event","transaction","profile","replay_event"]);return n&&(n.release=t),r.send(e)}}}}(e,r)({...n,url:l}):e({...n,url:l}),o.set(i,a)}return[t,a]}return{send:async function(e){const n=t({envelope:e,getEvent:function(t){const n=t&&t.length?t:["event"];return Oc(e,n)}}).map((e=>"string"==typeof e?i(e,void 0):i(e.dsn,e.release))).filter((e=>!!e));0===n.length&&n.push(["",r]);return(await Promise.all(n.map((([t,n])=>n.send(function(e,t){return is(t?{...e[0],dsn:t}:e[0],e[1])}(e,t))))))[0]},flush:async function(e){const t=[await r.flush(e)];for(const[,n]of o)t.push(await n.flush(e));return t.every((e=>e))}}}},makeXHRTransport:jd,metrics:tu,moduleMetadataIntegration:Dc,onLoad:function(e){e()},onProfilingStartRouteTransaction:function(e){return e?kv(e)?Gv(e):e:(Od&&vi.log("[Profiling] Transaction is undefined, skipping profiling"),e)},opera10StackLineParser:ep,opera11StackLineParser:np,parameterize:function(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n},replayCanvasIntegration:sm,replayIntegration:e=>new R_(e),reportingObserverIntegration:Zm,rewriteFramesIntegration:tv,sendFeedback:Tm,sessionTimingIntegration:rv,setContext:js,setCurrentClient:Sc,setExtra:function(e,t){dl().setExtra(e,t)},setExtras:function(e){dl().setExtras(e)},setHttpStatus:Il,setMeasurement:Ql,setTag:function(e,t){dl().setTag(e,t)},setTags:function(e){dl().setTags(e)},setUser:function(e){dl().setUser(e)},showReportDialog:(e={},t=dl())=>{if(!Id.document)return void(Od&&vi.error("Global document not defined in showReportDialog call"));const{client:n,scope:r}=t.getStackTop(),o=e.dsn||n&&n.getDsn();if(!o)return void(Od&&vi.error("DSN not configured for showReportDialog call"));r&&(e.user={...r.getUser(),...e.user}),e.eventId||(e.eventId=t.lastEventId());const i=Id.document.createElement("script");i.async=!0,i.crossOrigin="anonymous",i.src=function(e,t){const n=Ii(e);if(!n)return"";const r=`${ec(n)}embed/error-page/`;let o=`dsn=${yi(n)}`;for(const e in t)if("dsn"!==e&&"onClose"!==e)if("user"===e){const e=t.user;if(!e)continue;e.name&&(o+=`&name=${encodeURIComponent(e.name)}`),e.email&&(o+=`&email=${encodeURIComponent(e.email)}`)}else o+=`&${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`;return`${r}?${o}`}(o,e),e.onLoad&&(i.onload=e.onLoad);const{onClose:a}=e;if(a){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{a()}finally{Id.removeEventListener("message",e)}};Id.addEventListener("message",e)}const s=Id.document.head||Id.document.body;s?s.appendChild(i):Od&&vi.error("Not injecting report dialog. No injection point found in HTML")},spanStatusfromHttpCode:Sl,startBrowserTracingNavigationSpan:Td,startBrowserTracingPageLoadSpan:vd,startInactiveSpan:wl,startSession:Hs,startSpan:function(e,t){const n=Rl(e);return gl((()=>Ws(e.scope,(r=>{const o=dl(),i=r.getSpan(),a=e.onlyIfParent&&!i?void 0:Nl(o,{parentSpan:i,spanContext:n,forceTransaction:e.forceTransaction,scope:r});return Al((()=>t(a)),(()=>{if(a){const{status:e}=Cs(a);e&&"ok"!==e||a.setStatus("internal_error")}}),(()=>a&&a.end()))}))))},startSpanManual:function(e,t){const n=Rl(e);return gl((()=>Ws(e.scope,(r=>{const o=dl(),i=r.getSpan(),a=e.onlyIfParent&&!i?void 0:Nl(o,{parentSpan:i,spanContext:n,forceTransaction:e.forceTransaction,scope:r});function s(){a&&a.end()}return Al((()=>t(a,s)),(()=>{if(a&&a.isRecording()){const{status:e}=Cs(a);e&&"ok"!==e||a.setStatus("internal_error")}}))}))))},startTransaction:function(e,t){return dl().startTransaction({...e},t)},trace:function(e,t,n=()=>{},r=()=>{}){const o=dl(),i=Bs(),a=i.getSpan(),s=Rl(e),l=Nl(o,{parentSpan:a,spanContext:s,forceTransaction:!1,scope:i});return i.setSpan(l),Al((()=>t(l)),(e=>{l&&l.setStatus("internal_error"),n(e,l)}),(()=>{l&&l.end(),i.setSpan(a),r()}))},winjsStackLineParser:Qd,withActiveSpan:function(e,t){return Ws((n=>(n.setSpan(e),t(n))))},withIsolationScope:function(e){return gl((()=>e(pl())))},withScope:Ws,wrap:function(e){return wd(e)()}});function Bv(e){if(void 0===e||""===e)return{langCode:void 0,regionalVariant:void 0};let t,n=e.toUpperCase();return e.toUpperCase()in I&&(n=Jv(e).toUpperCase(),t=function(e){const t=e.split("-");if(2===t.length)return t[0].toLowerCase()+"-"+t[1].toUpperCase();return e}(e.toUpperCase())),{langCode:n,regionalVariant:t}}function Hv(e){return e in I?I[e]:e}function Jv(e){return e.split("-")[0]}const zv=()=>{let e=navigator.languages?Jv(navigator.languages[0]).toUpperCase():w;var t;e="EN"===(t=e)?"EN-GB":"PT"===t?"PT-PT":t;return S.map((e=>e.langCode)).includes(e)?e:w},Yv=()=>{var e;if(!(null===(e=null===chrome||void 0===chrome?void 0:chrome.i18n)||void 0===e?void 0:e.getUILanguage))return zv();{let e=chrome.i18n.getUILanguage();if(!e)return w;switch(e){case"en-US":return"EN-US";case"en-GB":return"EN-GB";case"pt-PT":return"PT-PT";case"pt-BR":return"PT-BR";case"zh-CN":return"ZH";default:{const t=Jv(e).toUpperCase();return S.filter((e=>t===e.langCode)).length>0?t:w}}}},Xv=()=>{const e={};return S.forEach((t=>{const n=Hv(t.langCode);e[n]=0})),e};function Kv(e){if(!e.lang)throw new Error("getLanguageInITAFormat - Language is required");const t=(e.languageList&&e.languageList.length>0?[...e.languageList,...A]:[...S,...A]).find((t=>t.langCode===e.lang.toUpperCase()));let n=null==t?void 0:t.langCodeForIta;return e.direction&&"source"===e.direction?"zh-Hans"==(null==t?void 0:t.langCodeForIta)?"zh":null!=n?n:"autodetect":null!=n?n:e.lang}const Qv="production",Zv="development",eT="testing";function tT(){return Qv}function nT(){return tT()===Zv}function rT(){return tT()===Qv}function oT(){return tT()===eT}function iT(){return r(this,void 0,void 0,(function*(){try{if(!(null===chrome||void 0===chrome?void 0:chrome.cookies)&&!localStorage)return!1;if(!chrome.cookies){return"true"===localStorage.getItem("dl_brex_playwright_env")}const e=yield chrome.cookies.getAll({domain:"deepl.com",name:"dl_brex_playwright_env"});return 0!==e.length&&"true"===e[0].value}catch(e){return!1}}))}function aT(...e){nT()&&console.log(...e)}const sT="Unidentified service name supplied to getServiceType",lT=(e,t)=>{if(!e)throw new Error("No settings supplied to getServiceType");if(!t||!Object.keys(Yn).includes(t))throw new Error(sT);if(!e.isLoggedIn)return Xn;switch(t){case Yn.TRANSLATOR:return e.translatorServiceType;case Yn.WRITE:return e.writeServiceType;case Yn.API:return e.apiServiceType;case Yn.DOC_TRANSLATOR:return e.docTranslatorServiceType}throw new Error(sT)},cT=(e,t)=>lT(e,t)===Kn,uT=e=>e.isLoggedIn&&e.hasTermbaseService,dT=e=>!![/Receiving end does not exist/,/message channel closed before a response was received/,/Extension context invalidated/,/The message port closed before a response was received/,/NetworkError when attempting to fetch resource/,/JSON.parse: unexpected character at line 1 column 1 of the JSON data/].some((t=>t.test(e))),pT={dsn:"https://0d368beeb4bc3e66f983b2c83eb342dc@o4509354486530048.ingest.de.sentry.io/4509882758201424",release:"deepl-browser-extension@1.70.0",environment:tT(),tracesSampleRate:rT()?.001:1,sampleRate:rT()?.001:1,ignoreErrors:[/Receiving end does not exist/,/message channel closed before a response was received/,/Extension context invalidated/,/The message port closed before a response was received/,/NetworkError when attempting to fetch resource/,/JSON.parse: unexpected character at line 1 column 1 of the JSON data/],beforeSend(e){const t=e.message||e.exception&&e.exception.values&&e.exception.values[0].value||"";return dT(t)?null:(nT()&&console.error(e),e)}};function gT(e,t){null==t||t.captureException(e)}const hT="GEO_BLOCKED",fT="ENTRY_NOT_FOUND",_T="SERVER_ERROR",mT="INSTALLATION_ERROR",vT="TRANSLATED_INPUT_NOT_SET",TT="OCR_ERROR_OPENING_SIDE_PANEL",yT="OCR_ERROR_IN_TRANSLATE_CAPTURE",ET="SSO_ENFORCED_AUTO_LOGIN_ERROR",ST="TRANSLATOR_FREE_ACCOUNT_LIMIT_EXCEEDED",IT="TRANSLATOR_ANONYMOUS_LIMIT_EXCEEDED",AT="TRANSLATOR_FREE_ANON_WITH_WRITE_PRO",bT="WRITE_ANON_OR_FREE_LIMIT_EXCEEDED",wT="WRITE_WITH_PRO_TRANSLATOR_LIMIT_EXCEEDED",OT="LOGIN_REQUIRED";class NT extends Error{constructor(e){super(e),this.name=OT,e&&(this.message=e)}}class RT extends Error{constructor(e){super(e),this.name=hT}}class LT extends Error{constructor(e,t){super(t),this.name=ST,this.limit=e,t&&(this.message=t)}}class PT extends Error{constructor(e,t){super(t),this.name=IT,this.limit=e,t&&(this.message=t)}}class CT extends Error{constructor(e,t){super(t),this.name=bT,this.limit=e,t&&(this.message=t)}}class xT extends Error{constructor(e,t){super(t),this.name=wT,this.limit=e,t&&(this.message=t)}}class kT extends Error{constructor(e,t){super(t),this.name=AT,this.limit=e,t&&(this.message=t)}}class DT extends Error{constructor(e,t){super(t),this.name=e,t&&(this.message=t)}}function UT(e,t){try{gT(e,t),console.error(e)}catch(e){console.error(e)}return{error:e.name}}const MT={EVENT_ID_UNSPECIFIED:0,EVENT_ID_TRANSLATION_REQUEST:60001,EVENT_ID_ERROR:60002,EVENT_ID_TRANSLATION_ERROR:60003,EVENT_ID_CONTENT_SCRIPT_ERROR:60004,EVENT_ID_INPUT_INJECTION_DATA:60005,EVENT_ID_FPT_BLOCK_SIZE_EXCEEDED:60006,EVENT_ID_EXTENSION_OPENED:60007,EVENT_ID_LOGO_CLICKED:60008,EVENT_ID_NOTIFICATION_VIEWED:60009,EVENT_ID_SHORTCUT_USED:60010,EVENT_ID_UI_ACTION_CLICK_ON_SHORTCUT_NOTIFICATION:60011,EVENT_ID_DOC_TRANS_CLICKED:60012,EVENT_ID_RECOMMEND_TO_A_FRIEND_CLICKED:60013,EVENT_ID_INLINE_SETTING_OPENED:60014,EVENT_ID_SETTING_CHANGED:60015,EVENT_ID_AUTO_DETECT_LANG:60016,EVENT_ID_RIGHT_CLICK:60017,EVENT_ID_INLINE_POSITION_CHANGE:60018,EVENT_ID_INLINE_DRAG_START:60019,EVENT_ID_WHATSAPP_MESSAGE_TRANSLATED:60020,EVENT_ID_WHATSAPP_MESSAGE_TRANSLATION_FAILED:60021,EVENT_ID_FPT_HIDE:60022,EVENT_ID_INLINE_COPY:60023,EVENT_ID_INLINE_LISTEN:60024,EVENT_ID_ICON_HOVER:60025,EVENT_ID_UI_ACTION_CLICK_ON_INLINE_SHOW_ALTERNATIVES:60026,EVENT_ID_UI_ACTION_CLICK_ON_INLINE_TRANSLATION_CLOSE:60027,EVENT_ID_UI_ACTION_CLICK_ON_LOGOUT_MENU_ENTRY:60028,EVENT_ID_ONBOARDING_STEP_CHANGE:60029,EVENT_ID_ONBOARDING_OPEN_EXTERNAL_PAGE:60030,EVENT_ID_READ_MORE_CLICKED:60031,EVENT_ID_LAND_ON_WEBSITE:60032,EVENT_ID_CLOSE_VOICE_OVER:60033,EVENT_ID_OPEN_INPUT_HIGHLIGHTER:60034,EVENT_ID_CLOSE_INPUT_HIGHLIGHTER:60035,EVENT_ID_GDOCS_REPLACE_TEXT:60036,EVENT_ID_INSTALL_SUCCESS:60037,EVENT_ID_OPEN_INLINE_HIGHLIGHTER:60038,EVENT_ID_CLOSE_INLINE_HIGHLIGHTER:60039,EVENT_ID_DICTIONARY_STATUS:60040,EVENT_ID_OPEN_DICTIONARY_SECTION:60041,EVENT_ID_HOVER_DISABLED_DICTIONARY:60042,EVENT_ID_DICTIONARY_ERROR:60043,EVENT_ID_ZENDESK_CUSTOMIZATION_OPEN_TICKET:60044,EVENT_ID_ZENDESK_CUSTOMIZATION_DETECT_TICKET_LANGUAGE:60045,EVENT_ID_ZENDESK_CUSTOMIZATION_SWITCH_TICKET_LANGUAGE:60046,EVENT_ID_ZENDESK_CUSTOMIZATION_ENABLE_AUTOTRANSLATE:60047,EVENT_ID_ZENDESK_CUSTOMIZATION_DISABLE_AUTOTRANSLATE:60048,EVENT_ID_ZENDESK_CUSTOMIZATION_TRANSLATE_MESSAGE:60049,EVENT_ID_ZENDESK_CUSTOMIZATION_TRANSLATE_INPUT:60050,EVENT_ID_ZENDESK_CUSTOMIZATION_ERROR:60051,EVENT_ID_GDOCS_MAX_CHAR_EXCEEDED_SHOWN:60052,EVENT_ID_GDOCS_MAX_CHAR_EXCEEDED_TRY_PRO_CLICKED:60053,EVENT_ID_LOGIN:60054,EVENT_ID_LOGOUT:60055,EVENT_ID_SESSION_TYPE:60056,EVENT_ID_TWITTER_TWEET_TRANSLATION_FAILED:60057,EVENT_ID_ONBOARDING_MODAL_SHOWN:60058,EVENT_ID_UI_LOCATION_CLICKED:60059,EVENT_ID_INSTALLATION_ID_CREATED:60060,EVENT_ID_BROWSER_INSTANCE_ID_CREATED:60061,EVENT_ID_DEEPL_WRITE_TEXT_REFINEMENT_REQUEST:60062,EVENT_ID_DEEPL_WRITE_GDOCS_INSERT_COPY:60063,EVENT_ID_DEEPL_WRITE_GDOCS_DISCARD_COPY:60064,EVENT_ID_DEEPL_WRITE_GDOCS_CHAR_LIMIT_REACHED:60065,EVENT_ID_DEEPL_WRITE_ERROR:60066,EVENT_ID_SESSION_STARTED:60067,EVENT_ID_LOGGED_IN:60068,EVENT_ID_LOGGED_OUT:60069,EVENT_ID_CUSTOMIZATION_ON_OFF:60070,EVENT_ID_WRITE_RESULT_ACCEPTED:60071,EVENT_ID_WRITE_RESULT_REVERTED:60072,EVENT_ID_TRANSLATION_RESULT_ACCEPTED:60073,EVENT_ID_TRANSLATION_RESULT_REVERTED:60074,EVENT_ID_GMAIL_CHAR_LIMIT_REACHED:60075,EVENT_ID_UPGRADE_NOTIFICATION_DISPLAYED:60076,EVENT_ID_UPGRADE_NOTIFICATION_CLOSED:60077,EVENT_ID_UPGRADE_NOTIFICATION_ACTION:60078,EVENT_ID_ALTERNATIVES_ALTERNATIVES_OPENED:60079,EVENT_ID_ALTERNATIVES_SEGMENTATION_SELECTED:60080,EVENT_ID_ALTERNATIVES_ALTERNATIVE_SELECTED:80081,EVENT_ID_GLOSSARY_ENABLED:60082,EVENT_ID_GLOSSARY_DISABLED:60083,EVENT_ID_ZENDESK_GLOSSARY_TAB_OPENED_FREE_USER:60084,EVENT_ID_ZENDESK_GLOSSARY_TAB_OPENED_NO_GLOSSARIES:60085,EVENT_ID_LANGUAGE_DETECTION_FOR_TEXT_PROCESSING:60086,EVENT_ID_SEE_ALTERNATIVES_FOR_INPUT_CLICKED:60087,EVENT_ID_DEEPL_WRITE_GET_ALTERNATIVES_FOR_INPUT:60088,EVENT_ID_ALTERNATIVE_SELECTED:60089,EVENT_ID_IFRAME_TRANSLATION_SUCCESSFUL:60090,EVENT_ID_IFRAME_TRANSLATION_FAILED:60091,EVENT_ID_ADS_BUTTON_CLICKED:60092,EVENT_ID_ADS_SHOWN:60093,EVENT_ID_YOUTUBE_COMMENT_TRANSLATION_FAILED:60094,EVENT_ID_EXTENSION_INSTALL_WITH_WEBSITE_USER_LOGIN_STATUS_CHECK:60095,EVENT_ID_DAILY_WEBSITE_USER_LOGIN_STATUS_CHECK:60096,EVENT_ID_GET_WEBSITE_USER_DATA_FAILED:60097,EVENT_ID_WRITE_TEXT_STYLES_CHANGED:60098,EVENT_ID_WRITE_TEXT_STYLES_APPLIED:60099,EVENT_ID_WRITE_TEXT_TONES_CHANGED:60100,EVENT_ID_EXPERIMENT_TRIGGER:60101,EVENT_ID_TRANSLATION_FORMALITY_CHANGED:60102,EVENT_ID_SIDE_PANEL_OPENED:60103,EVENT_ID_UI_INTERACTION_SIDE_PANEL:60104,EVENT_ID_UI_INTERACTION_SIDE_PANEL_FAILS:60105,EVENT_ID_SIDE_PANEL_TRANSLATOR_TARGET_LANG_CHANGED:60106,EVENT_ID_SEND_EXTENSION_INFO_DATA:60107,EVENT_ID_REPLACE_INPUT_FIELD_SELECTION:60108,EVENT_ID_ITA_SESSION:60109,EVENT_ID_SCREEN_CAPTURE_OCR_ERROR:60110,EVENT_ID_FPT_POPUP_OPEN:60111,EVENT_ID_NATIVE_MESSAGE_RECEIVED_FROM_DESKTOP_APP:60112,EVENT_ID_OCR_TRANSLATION_INSTRUCTIONS_CLOSED:60113,EVENT_ID_VIEW_PORT_DIMENSION:60114,EVENT_ID_INLINE_HIGHLIGHTS_SHOWN:60115,EVENT_ID_OPTIONAL_PERMISSION:60116},GT={FPT_POPUP_OPEN_DATA_TRIGGER_TYPE_UNSPECIFIED:0,FPT_POPUP_OPEN_DATA_TRIGGER_TYPE_PAGE_LOAD:1,FPT_POPUP_OPEN_DATA_TRIGGER_TYPE_RIGHT_CLICK:2,FPT_POPUP_OPEN_DATA_TRIGGER_TYPE_SIDEBAR_CLOSED:3},VT={CLOSE_INPUT_HIGHLIGHTER_TRIGGER_TYPE_UNSPECIFIED:0,CLOSE_INPUT_HIGHLIGHTER_TRIGGER_TYPE_ON_CLOSE_ICON:1,CLOSE_INPUT_HIGHLIGHTER_TRIGGER_TYPE_ON_DEEPL_ICON:2},$T={CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_UNSPECIFIED:0,CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_ON_CLOSE_ICON:1,CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_ON_DEEPL_ICON:2,CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_ON_OUTSIDE_CLICK:3},FT={ITA_SESSION_TYPE_UNSPECIFIED:0,ITA_SESSION_TYPE_TRANSLATE:1,ITA_SESSION_TYPE_WRITE:2},jT={ITA_SESSION_EVENT_TYPE_UNSPECIFIED:0,ITA_SESSION_EVENT_TYPE_NEW_SESSION:1,ITA_SESSION_EVENT_TYPE_RECREATED_SESSION:2,ITA_SESSION_EVENT_TYPE_ERROR:3,ITA_SESSION_EVENT_TYPE_USER_INTERACTION:4},WT={ITA_ERROR_TYPE_UNSPECIFIED:0,ITA_ERROR_TYPE_CONNECTION:1,ITA_ERROR_TYPE_SESSION:2},qT={ITA_USER_INTERACTION_TYPE_UNSPECIFIED:0,ITA_USER_INTERACTION_TYPE_UPDATE_TARGET_LANGUAGE:1,ITA_USER_INTERACTION_TYPE_UPDATE_SOURCE_LANGUAGE:2,ITA_USER_INTERACTION_TYPE_UPDATE_FORMALITY:3,ITA_USER_INTERACTION_TYPE_UPDATE_STYLE:4,ITA_USER_INTERACTION_TYPE_SELECT_ALTERNATIVE:5};function BT(){return{url:"https://s.deepl.com/chrome/statistics"}}function HT(e){switch(e){case L:return 1;case R:return 2;case N:return 3;case P:return 4;case C:return 5;case x:return 6;case k:return 7;default:return 0}}function JT(e){switch(e){case fT:return 1;case _T:return 2}}function zT(e){switch(e){case F:return q;case j:return B;default:return 0}}function YT(e){switch(e){case F:return H;case j:return J;case W:return z;default:return 0}}function XT(e){switch(e){case Y:return 1;case K:return 2;default:return 0}}function KT(e){switch(e){case oe:return 1;case Q:return 2;case ee:return 3;case se:return 4;case ce:return 5;case ue:return 6;case de:return 7;case _e:return 8;case ae:return 9;case Z:return 10;case me:return 11;case ve:return 12;case Te:return 13;case be:return 14;case we:return 15;case Oe:return 16;case Ne:return 17;case Re:return 18;case Le:return 19;case Pe:return 20;case Ce:return 21;case xe:return 22;case Ge:return 23;case Ve:return 24;case ke:return 25;case De:return 26;case Ue:return 27;case Me:return 28;case $e:return 29;case Fe:return 30;case je:return 31;case pe:return 32;case We:return 33;case qe:return 34;case Be:return 35;case He:return 36;case ie:return 37;case Je:return 38;case ze:return 39;case Ye:return 40;case Xe:return 41;case Ke:return 42;case Qe:return 43;case Ze:return 44;case et:return 45;case tt:return 46;case nt:return 47;case rt:return 48;case ot:return 49;case it:return 50;case at:return 51;case st:return 52;case lt:return 53;case ct:return 54;case ut:return 55;case dt:return 56;case pt:return 57;case gt:return 58;case ht:return 59;case ft:return 60;case re:return 61;case _t:return 62;case mt:return 63;case vt:return 64;case Tt:return 65;case yt:return 66;case Et:return 67;case St:return 68;case It:return 69;case ye:return 70;case Ee:return 71;case Se:return 72;case Ie:return 73;case Ae:return 74;case te:return 75;case ne:return 76;case le:return 77;case ge:return 78;case he:return 79;case fe:return 80;case At:return 81;case bt:return 82;case wt:return 83;case Ot:return 84;case Nt:return 85;case Rt:return 86;case Lt:return 87;case Pt:return 88;case Ct:return 89;case xt:return 90;case kt:return 96;default:return 0}}function QT(e){switch(e){case Dt:return 1;case Mt:return 2;default:return 0}}function ZT(e){switch(e){case Vt:return MT.EVENT_ID_UI_ACTION_CLICK_ON_SHORTCUT_NOTIFICATION;case $t:return MT.EVENT_ID_UI_ACTION_CLICK_ON_INLINE_SHOW_ALTERNATIVES;case Ft:return MT.EVENT_ID_UI_ACTION_CLICK_ON_INLINE_TRANSLATION_CLOSE;case jt:return MT.EVENT_ID_UI_ACTION_CLICK_ON_LOGOUT_MENU_ENTRY;default:return 0}}function ey(e){switch(e){case Jt:return 1;case zt:return 2;case Yt:return 3;default:return 0}}function ty(e){switch(e){case qt:return 1;case Wt:return 2;case Bt:return 3;case Ht:return 4;default:return 0}}function ny(e){switch(e){case"top":return Xt;case"right":return Kt;case"bottom":return Qt;case"left":return Zt;default:return 0}}function ry(e){switch(e){case Lo.shortcut_settings:return Po.SHORTCUT_SETTINGS;case Lo.support_article:return Po.SUPPORT_ARTICLE;case Lo.external.whatsapp:return Po.EXTERNAL.WHATSAPP;case Lo.external.twitter:return Po.EXTERNAL.TWITTER;case Lo.external.youtube:return Po.EXTERNAL.YOUTUBE;case Lo.external.facebook:return Po.EXTERNAL.FACEBOOK;case Lo.external.github:return Po.EXTERNAL.GITHUB;case Lo.external.discord:return Po.EXTERNAL.DISCORD;case Lo.external.telegram:return Po.EXTERNAL.TELEGRAM;case Lo.external.reddit:return Po.EXTERNAL.REDDIT;case Lo.external.gmail:return Po.EXTERNAL.GMAIL;case Lo.external.gdocs:return Po.EXTERNAL.GDOCS;case Lo.external.gslides:return Po.EXTERNAL.GSLIDES;case Lo.external.msOffice:return Po.EXTERNAL.MSOFFICE;default:return""}}function oy(e){switch(e){case en:return 1;case tn:return 2;case nn:return 3;case rn:return 4;default:return 0}}function iy(e){switch(e){case un:return an;case dn:return sn;case gn:return cn;case pn:return ln;default:return on}}function ay(e){return hn[e]||0}function sy(e){switch(e){case yn:return 1;case En:return 2;case In:return 3;case An:return 4;case Sn:return 5;case bn:return 6;case wn:return 7;case On:return 8;case Nn:return 9;default:return 0}}function ly(e){switch(e){case Rn:return 1;case Ln:return 2;default:return 0}}function cy(e){switch(e){case Pn:return 1;case Cn:return 2;default:return 0}}function uy(e){switch(e){case Or.simple:return 1;case Or.business:return 2;case Or.academic:return 3;case Or.casual:return 4;case Or.enthusiastic:return 5;case Or.friendly:return 6;case Or.confident:return 7;case Or.diplomatic:return 8;default:return 0}}function dy(e){switch(e){case Nr:return 0;case Rr:return 1;case Lr:return 2;default:return 0}}function py(e){switch(e){case MT.EVENT_ID_UI_ACTION_CLICK_ON_INLINE_SHOW_ALTERNATIVES:case MT.EVENT_ID_UI_ACTION_CLICK_ON_INLINE_TRANSLATION_CLOSE:return!0;default:return!1}}function gy(e){switch(e){case xn:return 1;case kn:return 2;default:return 0}}function hy(e){switch(e){case Dn:return 1;case Un:return 2;default:return 0}}function fy(e){switch(e){case Bn:return 1;case Hn:return 2;default:return 0}}function _y(e){switch(e){case zn:return 1;case Jn:return 2;default:return 0}}function my(e){switch(e){case Xn:return 1;case Kn:return 2;case Qn:return 3;default:return 0}}function vy(e){switch(e){case pr:return 1;case gr:return 2;case hr:return 3;default:return 0}}function Ty(e){switch(e){case fr:return 1;case _r:return 2;case mr:return 3;case vr:return 4;default:return 0}}function yy(e){switch(e){case Pn:return 1;case Cn:return 2;default:return 0}}function Ey(e){switch(e){case yr:return 1;case Er:return 2;case Tr:return 3;default:return 0}}function Sy(e){switch(e){case Sr:return 1;case Ir:return 2;default:return 0}}function Iy(e){switch(e){case Ar:return 1;case br:return 2;case wr:return 3;default:return 0}}function Ay(e){switch(e){case xr:return 1;case Cr:return 2;case Pr:return 3;case kr:return 4;case Dr:return 5;default:return 0}}function by(e){switch(e){case Ur:return 1;case Mr:return 2;default:return 0}}function wy(e){switch(e){case chrome.runtime.OnInstalledReason.INSTALL:return 1;case chrome.runtime.OnInstalledReason.UPDATE:return 2;case chrome.runtime.OnInstalledReason.CHROME_UPDATE:return 3;case chrome.runtime.OnInstalledReason.SHARED_MODULE_UPDATE:return 4;default:return 0}}function Oy(e){switch(e){case Gr:return 1;case Vr:return 2;case $r:return 3;case Fr:return 4;case jr:return 5;default:return 0}}function Ny(e){switch(e){case qr:return 1;case Br:return 2;case Hr:return 3;default:return 0}}function Ry(e){switch(e){case Jr:return 1;case zr:return 2;case Yr:return 3;case Xr:return 4;default:return 0}}function Ly(e){switch(e){case Kr:return FT.ITA_SESSION_TYPE_TRANSLATE;case Qr:return FT.ITA_SESSION_TYPE_WRITE;default:return FT.ITA_SESSION_TYPE_UNSPECIFIED}}function Py(e){switch(e){case Zr:return jT.ITA_SESSION_EVENT_TYPE_NEW_SESSION;case eo:return jT.ITA_SESSION_EVENT_TYPE_RECREATED_SESSION;case to:return jT.ITA_SESSION_EVENT_TYPE_ERROR;case no:return jT.ITA_SESSION_EVENT_TYPE_USER_INTERACTION;default:return jT.ITA_SESSION_EVENT_TYPE_UNSPECIFIED}}function Cy(e){switch(e){case ro:return WT.ITA_ERROR_TYPE_CONNECTION;case oo:return WT.ITA_ERROR_TYPE_SESSION;default:return WT.ITA_ERROR_TYPE_UNSPECIFIED}}function xy(e){switch(e){case io:return qT.ITA_USER_INTERACTION_TYPE_UPDATE_TARGET_LANGUAGE;case ao:return qT.ITA_USER_INTERACTION_TYPE_UPDATE_SOURCE_LANGUAGE;case so:return qT.ITA_USER_INTERACTION_TYPE_UPDATE_FORMALITY;case lo:return qT.ITA_USER_INTERACTION_TYPE_UPDATE_STYLE;case co:return qT.ITA_USER_INTERACTION_TYPE_SELECT_ALTERNATIVE;default:return qT.ITA_USER_INTERACTION_TYPE_UNSPECIFIED}}const ky=e=>{switch(e){case vn:return VT.CLOSE_INPUT_HIGHLIGHTER_TRIGGER_TYPE_ON_CLOSE_ICON;case Tn:return $T.CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_ON_DEEPL_ICON;default:return $T.CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_UNSPECIFIED}},Dy=e=>{switch(e){case fn:return $T.CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_ON_CLOSE_ICON;case _n:return $T.CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_ON_DEEPL_ICON;case mn:return $T.CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_ON_OUTSIDE_CLICK;default:return $T.CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_UNSPECIFIED}};function Uy(e){switch(e){case uo:return GT.FPT_POPUP_OPEN_DATA_TRIGGER_TYPE_PAGE_LOAD;case po:return GT.FPT_POPUP_OPEN_DATA_TRIGGER_TYPE_RIGHT_CLICK;case go:return GT.FPT_POPUP_OPEN_DATA_TRIGGER_TYPE_SIDEBAR_CLOSED;default:return GT.FPT_POPUP_OPEN_DATA_TRIGGER_TYPE_UNSPECIFIED}}const My=["accountData","domainName"],Gy=[MT.EVENT_ID_SESSION_STARTED,MT.EVENT_ID_LOGGED_IN,MT.EVENT_ID_LOGGED_OUT],Vy=(e,t)=>e&&"object"==typeof e?Array.isArray(e)?e.map((e=>Vy(e,t))):Object.keys(e).reduce(((n,r)=>(t.includes(r)||(n[r]=Vy(e[r],t)),n)),{}):e,$y=(e,t=!1,n=!1)=>e?n&&t?e:!n&&Gy.includes(null==e?void 0:e.eventId)?null:Vy(e,My):null,Fy=(e=!1,t=!1)=>!(!e&&!t)&&(!(!e&&t)&&(!(!e||t)||(!(!e||!t)||void 0)));function jy(e,t,n){return{jsonrpc:"2.0",method:e,params:t,id:n}}const Wy=e=>{var t,n,r,o,i,a,s,l,c;return{isLoggedIn:!!(null===(t=null==e?void 0:e.loginState)||void 0===t?void 0:t.accountId),translatorServiceType:my(null===(r=null===(n=null==e?void 0:e.featureSet)||void 0===n?void 0:n.translator)||void 0===r?void 0:r.service),docTranslatorServiceType:my(null===(i=null===(o=null==e?void 0:e.featureSet)||void 0===o?void 0:o.documentTranslation)||void 0===i?void 0:i.service),apiServiceType:my(null===(s=null===(a=null==e?void 0:e.featureSet)||void 0===a?void 0:a.api)||void 0===s?void 0:s.service),writeServiceType:my(null===(c=null===(l=null==e?void 0:e.featureSet)||void 0===l?void 0:l.write)||void 0===c?void 0:c.service)}};function qy(e){return r(this,void 0,void 0,(function*(){let t,n,r,o,i,a,s,l,c,u,d,p,g=!1;try{const e=yield nI(["session","installationId","firefoxAnonPermissionGranted","firefoxPersonalPermissionGranted"]);n=e.session.id,t=e.installationId,u=e.firefoxAnonPermissionGranted,d=e.firefoxPersonalPermissionGranted}catch(e){e instanceof Error&&console.error(`DAP: Failed to fetch settings. Error: ${e.message}`)}try{p=yield RI()}catch(e){console.error(e)}try{const e=yield _I();g=!!e.accountId,r=my(e.translatorServiceType),o=my(e.apiServiceType),i=my(e.docTranslatorServiceType),c=my(e.writeServiceType),s=g?2===r||2===o||2===c||2===i?M:G:U,l=e.sessionType?Iy(e.sessionType):Iy(Ar)}catch(e){e instanceof Error&&console.error(`DAP: Failed to fetch user information. Error: ${e.message}`)}try{a=yield vI()}catch(e){console.error(e)}const h=Oo(),f=yield yI();let _,m;try{_=yield TI()}catch(e){console.error(e)}try{m=yield bI()}catch(e){console.error(e)}const v=Object.assign({eventId:void 0,extensionVersion:"1.70.0",sessionId:n,sessionType:l,installationId:t,browserInstanceId:a,originStore:iy(chrome.runtime.id),userInfos:Object.assign(Object.assign({},_&&{accountData:Object.assign({accountId:_},p&&{organizationId:p})}),{userType:s,translatorServiceType:r,apiServiceType:o,docTranslatorServiceType:i,writeServiceType:c}),userAgent:h.userAgent,platform:h.platform,browser:h.browser,browserVersion:h.browserVersion,browserLang:h.browserLang,clientExperiments:f},m&&{webInstanceId:m});let T=e?e(v):v;if(Ro()){if(!Fy(u,d))return;if(T=$y(T,u,d),!T)return}return fetch("https://s.deepl.com/chrome/statistics",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(T),credentials:"omit"}).then((e=>{e.ok||console.log(`DAP ${T.eventId} request failed: ${e}`)}))}))}function By(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_TRANSLATION_REQUEST,translationRequestData:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({extensionVersion:"1.70.0",domainName:e.domainName,userId:e.installationId,translationTrigger:HT(e.trigger),translationData:{sourceLang:e.websiteLanguage,targetLang:e.targetLanguage,sourceLength:e.characterCount}},e.translationPerformance&&{translationPerformance:e.translationPerformance}),{nicheIntegration:sy(e.nicheIntegration||yn)}),e.glossaryTrackingInfo&&{isGlossaryEnabled:e.glossaryTrackingInfo.isGlossaryEnabled,isGlossaryShared:e.glossaryTrackingInfo.isGlossaryShared,didGlossaryChangeTranslation:e.glossaryTrackingInfo.didGlossaryChangeTranslation,isAutoTermbase:e.glossaryTrackingInfo.isAutoTermbase}),e.isIta&&{isIta:e.isIta}),e.isInputReviewUiUsed&&{isInputReviewUiUsed:e.isInputReviewUiUsed})})))}))}function Hy(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_ERROR,errorData:{extensionVersion:"1.70.0",errorCode:e.errorCode,errorMessage:e.errorMessage,errorCategory:Ry(e.errorCategory)}})))}))}function Jy(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_TRANSLATION_ERROR,translationErrorData:{errorData:{extensionVersion:"1.70.0",errorCode:e.errorCode,errorMessage:e.errorMessage},targetLang:e.targetLang,domainName:e.domainName,websiteLanguage:e.websiteLanguage,sourceLength:e.characterCount,translationTrigger:HT(e.trigger),nicheIntegration:sy(e.nicheIntegration||yn)}})))}))}function zy(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_CONTENT_SCRIPT_ERROR,contentScriptErrorData:{errorData:{extensionVersion:"1.70.0",errorCode:e.errorCode,errorMessage:e.errorMessage},domainName:e.domainName}})))}))}function Yy(e){return r(this,void 0,void 0,(function*(){return qy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_INPUT_INJECTION_DATA,inputInjectionData:{extensionVersion:"1.70.0"}})))}))}function Xy(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_EXTENSION_OPENED,extensionOpenedData:{extensionVersion:"1.70.0",domainName:e.domainName,pathName:e.pathName,extensionOpenedFrom:e.extensionOpenedFrom}})))}))}function Ky(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_LOGO_CLICKED,logoClickedData:{extensionVersion:"1.70.0",logoClickedFrom:e.logoClickedFrom}})))}))}function Qy(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_NOTIFICATION_VIEWED,notificationViewedData:{extensionVersion:"1.70.0",notificationType:XT(e.notificationType)}})))}))}function Zy(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_SHORTCUT_USED,shortcutUsedData:{shortcutType:QT(e.shortcutType),uiLocation:e.location?KT(e.location):void 0,shortcut:e.shortcut,nicheIntegration:sy(e.nicheIntegration||yn)}})))}))}function eE(e){return r(this,void 0,void 0,(function*(){const t={eventId:ZT(e.uiAction)};return py(t.eventId)&&(t.payload={nicheIntegration:sy(e.nicheIntegration||yn)}),qy((e=>Object.assign(Object.assign({},e),t)))}))}function tE(){return r(this,void 0,void 0,(function*(){return qy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_DOC_TRANS_CLICKED})))}))}function nE(){return r(this,void 0,void 0,(function*(){return qy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_RECOMMEND_TO_A_FRIEND_CLICKED})))}))}function rE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_INLINE_SETTING_OPENED,inlineSettingOpenedData:{uiFunction:ey(e.uiFunction),uiLocation:KT(e.uiLocation),nicheIntegration:sy(e.nicheIntegration)}})))}))}function oE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_SETTING_CHANGED,settingChangedData:{settingType:ty(e.settingType),uiFunction:ey(e.uiFunction),uiLocation:KT(e.uiLocation),domainName:e.domainName}})))}))}function iE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_AUTO_DETECT_LANG,detectLanguageData:{language:e.language}})))}))}function aE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_RIGHT_CLICK,rightClickData:{domainName:e.domainName,translationType:e.translationType}})))}))}function sE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_INLINE_POSITION_CHANGE,inlinePositionChangeData:{newPosition:ny(e.newPosition)}})))}))}function lE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_INLINE_DRAG_START,inlineDragStartData:{nicheIntegration:sy((null==e?void 0:e.nicheIntegration)||yn)}})))}))}function cE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_WHATSAPP_MESSAGE_TRANSLATED,whatsAppMessageTranslatedData:{messageLang:e.messageLang,targetLang:e.targetLang,messageLength:e.messageLength,translator:_y(e.translator),numberOfLanguages:e.numberOfLanguages,numberOfMessages:e.numberOfMessages}})))}))}function uE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_WHATSAPP_MESSAGE_TRANSLATION_FAILED,whatsAppMessageTranslationFailedData:{errorCode:e.errorCode,domainName:e.domainName,translationConfig:{messageLength:e.messageLength,targetLang:e.targetLang,messageLang:e.messageLang,translator:_y(e.translator),numberOfLanguages:e.numberOfLanguages,numberOfMessages:e.numberOfMessages}}})))}))}function dE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_TWITTER_TWEET_TRANSLATION_FAILED,twitterTweetTranslationFailedData:{errorCode:e.errorCode,domainName:e.domainName,translationConfig:{messageLength:e.messageLength,targetLang:e.targetLang,messageLang:e.messageLang}}})))}))}function pE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_YOUTUBE_COMMENT_TRANSLATION_FAILED,youtubeCommentTranslationFailedData:{errorCode:e.errorCode,domainName:e.domainName,translationConfig:{messageLength:e.messageLength,targetLang:e.targetLang,messageLang:e.messageLang}}})))}))}function gE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_FPT_HIDE,fptHideData:{hideOption:e.hideOption,sourceLang:e.sourceLang,domainName:e.domainName,uiLocation:KT(e.uiLocation)}})))}))}function hE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_INLINE_COPY,inlineCopyData:{targetLang:e.targetLang,targetLength:e.targetLength,nicheIntegration:sy(e.nicheIntegration||yn)}})))}))}function fE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_INLINE_LISTEN,inlineListenData:{targetLang:e.targetLang,targetLength:e.targetLength,actionType:e.actionType,textKind:ly(e.textKind),context:cy(e.context),nicheIntegration:sy(e.nicheIntegration||yn)}})))}))}function _E(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_ICON_HOVER,iconHoverData:{uiLocation:KT(e.uiLocation),domainName:e.domainName,nicheIntegration:sy(e.nicheIntegration||yn)}})))}))}function mE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_ONBOARDING_STEP_CHANGE,onboardingStepChangeData:{previousStep:e.previousStep,newStep:e.newStep,trigger:oy(e.trigger),secondsOnOnboarding:e.secondsOnOnboarding,secondsOnPreviousStep:e.secondsOnPreviousStep}})))}))}function vE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_ONBOARDING_OPEN_EXTERNAL_PAGE,onboardingOpenExternalPageData:{url:ry(e.url)}})))}))}function TE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_LAND_ON_WEBSITE,landOnWebsiteData:{website:ay(e.website)}})))}))}function yE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_CLOSE_VOICE_OVER,inlineListenData:{targetLang:e.targetLang,targetLength:e.targetLength,triggerType:e.triggerType,textKind:ly(e.textKind),context:cy(e.context),nicheIntegration:sy(e.nicheIntegration||yn)}})))}))}function EE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_OPEN_INPUT_HIGHLIGHTER,openInputHighlighterData:{domainName:e.domainName}})))}))}function SE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_CLOSE_INPUT_HIGHLIGHTER,closeInputHighlighterData:{triggerType:ky(e)}})))}))}function IE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_GDOCS_REPLACE_TEXT,gdocsReplaceTextData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength,targetLength:e.targetLength}})))}))}function AE(){return r(this,void 0,void 0,(function*(){return qy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_INSTALL_SUCCESS})))}))}function bE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_OPEN_INLINE_HIGHLIGHTER,openInputHighlighterData:{domainName:e.domainName}})))}))}function wE(e){return r(this,arguments,void 0,(function*({trigger:e}){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_CLOSE_INLINE_HIGHLIGHTER,closeInputHighlighterData:{triggerType:Dy(e)}})))}))}function OE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_DICTIONARY_STATUS,dictionaryStatus:{status:e.status,langPair:e.langPair}})))}))}function NE(){return r(this,void 0,void 0,(function*(){return qy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_OPEN_DICTIONARY_SECTION})))}))}function RE(){return r(this,void 0,void 0,(function*(){return qy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_HOVER_DISABLED_DICTIONARY})))}))}function LE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_DICTIONARY_ERROR,errorData:{dictionaryError:JT(e.lingueeError)}})))}))}function PE(e,t){return r(this,void 0,void 0,(function*(){let n;switch(e){case Mn:n=MT.EVENT_ID_ZENDESK_CUSTOMIZATION_OPEN_TICKET;break;case Gn:n=MT.EVENT_ID_ZENDESK_CUSTOMIZATION_DETECT_TICKET_LANGUAGE;break;case Vn:n=MT.EVENT_ID_ZENDESK_CUSTOMIZATION_SWITCH_TICKET_LANGUAGE;break;case $n:n=MT.EVENT_ID_ZENDESK_CUSTOMIZATION_ENABLE_AUTOTRANSLATE;break;case Fn:n=MT.EVENT_ID_ZENDESK_CUSTOMIZATION_DISABLE_AUTOTRANSLATE;break;case jn:n=MT.EVENT_ID_ZENDESK_CUSTOMIZATION_TRANSLATE_MESSAGE;break;case Wn:n=MT.EVENT_ID_ZENDESK_CUSTOMIZATION_TRANSLATE_INPUT;break;case qn:n=MT.EVENT_ID_ZENDESK_CUSTOMIZATION_ERROR;break;default:return}return qy((e=>Object.assign(Object.assign({},e),{eventId:n,zendeskMetaData:{agentLanguage:t.agentLanguage,ticketLanguage:t.ticketLanguage,isTicketLanguageAutodetected:t.isTicketLanguageAutodetected,isTicketLanguageSupported:t.isTicketLanguageSupported,isAutoTranslateEnabled:t.isAutoTranslateEnabled,sourceTextLength:t.sourceTextLength,targetTextLength:t.targetTextLength,inputHasSelection:t.inputHasSelection,error:t.error}})))}))}function CE(e){return r(this,void 0,void 0,(function*(){let t;if(e.glossaryConfigOpenedWithoutGlossaryPermissions?t=MT.EVENT_ID_ZENDESK_GLOSSARY_TAB_OPENED_FREE_USER:e.glossaryConfigOpenedWithNoGlossariesFound&&(t=MT.EVENT_ID_ZENDESK_GLOSSARY_TAB_OPENED_NO_GLOSSARIES),t)return qy((e=>Object.assign(Object.assign({},e),{eventId:t})))}))}function xE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_LOGIN,loginData:{trigger:hy(e.trigger),reason:e.reason}})))}))}function kE(e){return r(this,void 0,void 0,(function*(){const t=Math.round((yield hI())/60);return qy((n=>Object.assign(Object.assign({},n),{eventId:MT.EVENT_ID_LOGOUT,logoutData:{trigger:gy(e.trigger),minutesSinceLastLogin:t,reason:e.reason}})))}))}function DE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_GDOCS_MAX_CHAR_EXCEEDED_SHOWN,gdocsMaxCharExceededData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength}})))}))}function UE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_GDOCS_MAX_CHAR_EXCEEDED_TRY_PRO_CLICKED,gdocsMaxCharExceededData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength}})))}))}function ME(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_SESSION_TYPE,sessionTypeData:{sessionType:e.sessionType,trigger:fy(e.trigger)}})))}))}function GE(e){return r(this,void 0,void 0,(function*(){let t="";try{t=yield uI()}catch(e){e instanceof Error&&console.log(`DAP: Failed to fetch session type. Error: ${e.message}`)}return qy((n=>Object.assign(Object.assign({},n),{eventId:MT.EVENT_ID_ONBOARDING_MODAL_SHOWN,onboardingModalShownData:{nicheIntegration:sy(e.nicheIntegration||yn),sessionType:t}})))}))}function VE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_UI_LOCATION_CLICKED,UILocationClickedData:{uiLocation:KT(e)}})))}))}function $E(){return r(this,void 0,void 0,(function*(){return qy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_INSTALLATION_ID_CREATED})))}))}function FE(){return r(this,void 0,void 0,(function*(){return qy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_BROWSER_INSTANCE_ID_CREATED})))}))}function jE(e,t){return r(this,void 0,void 0,(function*(){let n;switch(e){case Zn:n=MT.EVENT_ID_DEEPL_WRITE_TEXT_REFINEMENT_REQUEST;break;case er:n=MT.EVENT_ID_DEEPL_WRITE_GDOCS_INSERT_COPY;break;case tr:n=MT.EVENT_ID_DEEPL_WRITE_GDOCS_DISCARD_COPY;break;case nr:n=MT.EVENT_ID_DEEPL_WRITE_GDOCS_CHAR_LIMIT_REACHED;break;case ar:n=MT.EVENT_ID_DEEPL_WRITE_ERROR;break;case rr:n=MT.EVENT_ID_WRITE_RESULT_ACCEPTED;break;case or:n=MT.EVENT_ID_WRITE_RESULT_REVERTED;break;case ir:n=MT.EVENT_ID_DEEPL_WRITE_GET_ALTERNATIVES_FOR_INPUT;break;default:return}return qy((e=>Object.assign(Object.assign({},e),{eventId:n,deeplWriteMetaData:Object.assign({lang:t.lang,sourceLength:t.sourceLength,targetLength:t.targetLength,nicheIntegration:sy(t.nicheIntegration||yn),error:t.error,style:uy(t.style),trigger:Oy(t.trigger),domainName:t.domainName},t.isInputReviewUiUsed&&{isInputReviewUiUsed:t.isInputReviewUiUsed})})))}))}function WE(){return r(this,void 0,void 0,(function*(){if(!(yield cI()))return;const e=yield TI();return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_SESSION_STARTED,accountData:{accountUuid:e}})))}))}function qE(){return r(this,void 0,void 0,(function*(){const e=yield TI();return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_LOGGED_IN,accountData:{accountUuid:e}})))}))}function BE(){return r(this,void 0,void 0,(function*(){const e=yield TI();return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_LOGGED_OUT,accountData:{accountUuid:e}})))}))}function HE(e,t){return r(this,void 0,void 0,(function*(){let n;switch(e){case sr:n=MT.EVENT_ID_TRANSLATION_RESULT_ACCEPTED;break;case lr:n=MT.EVENT_ID_TRANSLATION_RESULT_REVERTED;break;default:return}return qy((e=>Object.assign(Object.assign({},e),{eventId:n,translationResultActionData:{sourceLang:t.sourceLang,sourceLength:t.sourceLength,targetLength:t.targetLength,nicheIntegration:sy(t.nicheIntegration||yn),error:t.error}})))}))}function JE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_CUSTOMIZATION_ON_OFF,customizationOnOffData:{nicheIntegration:sy(e.nicheIntegration||yn),uiLocation:KT(e.uiLocation),customizationEnabled:e.customizationEnabled}})))}))}function zE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_GMAIL_CHAR_LIMIT_REACHED,gmailCharLimitReachedData:{gmailActionType:vy(e.gmailActionType)}})))}))}function YE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_UPGRADE_NOTIFICATION_DISPLAYED,upgradeNotificationDisplayedData:{type:Ty(e)}})))}))}function XE(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_UPGRADE_NOTIFICATION_CLOSED,upgradeNotificationClosedData:{type:Ty(e)}})))}))}function KE(e,t){return r(this,void 0,void 0,(function*(){return qy((n=>Object.assign(Object.assign({},n),{eventId:MT.EVENT_ID_UPGRADE_NOTIFICATION_ACTION,upgradeNotificationActionData:{type:Ty(e),action:Ey(t)}})))}))}function QE(e,t){return r(this,void 0,void 0,(function*(){let n;switch(e){case cr:n=MT.EVENT_ID_ALTERNATIVES_ALTERNATIVES_OPENED;break;case ur:n=MT.EVENT_ID_ALTERNATIVES_SEGMENTATION_SELECTED;break;case dr:n=MT.EVENT_ID_ALTERNATIVES_ALTERNATIVE_SELECTED;break;default:return}return qy((e=>Object.assign(Object.assign({},e),{eventId:n,alternativesMetaData:Object.assign({sourceLang:t.sourceLang,targetLang:t.targetLang,nicheIntegration:sy(t.nicheIntegration||yn),contentProcessingMode:yy(t.contentProcessingMode)},t.alternativesSegmentation&&{alternativesSegmentation:Sy(t.alternativesSegmentation)})})))}))}function ZE(e,t){return r(this,void 0,void 0,(function*(){const n=e?MT.EVENT_ID_GLOSSARY_ENABLED:MT.EVENT_ID_GLOSSARY_DISABLED;return qy((e=>Object.assign(Object.assign({},e),{eventId:n,glossaryMetadata:{nicheIntegration:sy(t.nicheIntegration||yn)}})))}))}function eS(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_LANGUAGE_DETECTION_FOR_TEXT_PROCESSING,languageDetectionTextProcessingData:{detectedLanguageCode:e.lang,textLength:e.textLength,domainName:e.domainName,isReliable:e.isReliable,translationTrigger:HT(e.trigger),nicheIntegration:sy(e.nicheIntegration||yn)}})))}))}function tS(){return r(this,void 0,void 0,(function*(){return qy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_SEE_ALTERNATIVES_FOR_INPUT_CLICKED})))}))}function nS(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_ALTERNATIVE_SELECTED,alternativesMetaData:Object.assign({sourceLang:e.sourceLang,targetLang:e.targetLang,numberOfAlternatives:e.numberOfAlternatives,selectedAlternativeIndex:e.selectedAlternative,nicheIntegration:sy(e.nicheIntegration||yn),contentProcessingMode:yy(e.contentProcessingMode)},e.alternativesSegmentation&&{alternativesSegmentation:Sy(e.alternativesSegmentation)})})))}))}function rS(){return r(this,void 0,void 0,(function*(){return qy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_IFRAME_TRANSLATION_SUCCESSFUL})))}))}function oS(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_IFRAME_TRANSLATION_FAILED,errorData:{extensionVersion:"1.70.0",errorCode:e.errorCode,errorMessage:e.errorMessage}})))}))}function iS(){return r(this,void 0,void 0,(function*(){return qy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_ADS_BUTTON_CLICKED})))}))}function aS(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_ADS_SHOWN,adsShownData:{matchedWord:e.matchedWord}})))}))}function sS(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_WRITE_TEXT_STYLES_CHANGED,writeTextStylesData:{style:uy(e.style)}})))}))}function lS(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_WRITE_TEXT_STYLES_APPLIED,writeTextStylesData:{style:uy(e.style)}})))}))}function cS(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_WRITE_TEXT_TONES_CHANGED,writeTextStylesData:{style:uy(e.tone)}})))}))}function uS(e){return r(this,void 0,void 0,(function*(){const t=Wy(e);return qy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_EXTENSION_INSTALL_WITH_WEBSITE_USER_LOGIN_STATUS_CHECK,webUserInfoData:t})))}))}function dS(e){return r(this,void 0,void 0,(function*(){const t=Wy(e);return qy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_DAILY_WEBSITE_USER_LOGIN_STATUS_CHECK,webUserInfoData:t})))}))}function pS(){return r(this,void 0,void 0,(function*(){return qy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_GET_WEBSITE_USER_DATA_FAILED})))}))}function gS(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_TRANSLATION_FORMALITY_CHANGED,translationFormalityData:{formality:dy(e.formality)}})))}))}function hS(){return r(this,void 0,void 0,(function*(){return qy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_SIDE_PANEL_OPENED})))}))}function fS(){return r(this,void 0,void 0,(function*(){return qy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_UI_INTERACTION_SIDE_PANEL_FAILS})))}))}function _S(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_SEND_EXTENSION_INFO_DATA,extensionInfoData:Object.assign(Object.assign({enabled:e.enabled,id:e.id,version:e.version,installType:Ay(e.installType)},e.installReason&&{installReason:wy(e.installReason)}),e.disabledReason&&{disabledReason:by(e.disabledReason)})})))}))}function mS(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_REPLACE_INPUT_FIELD_SELECTION,replaceInputFieldData:{replacementType:Ny(e.replacementType)}})))}))}function vS(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_INLINE_HIGHLIGHTS_SHOWN,inlineHighlightData:{numberOfCorrections:e.numberOfCorrections}})))}))}function TS(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_ITA_SESSION,itaSessionData:Object.assign(Object.assign(Object.assign({itaSessionType:Ly(e.itaSessionType),itaSessionEventType:Py(e.itaSessionEventType)},e.itaErrorType&&{itaErrorType:Cy(e.itaErrorType)}),e.itaErrorMessage&&{itaErrorMessage:e.itaErrorMessage}),e.itaUserInteractionType&&{itaUserInteractionType:xy(e.itaUserInteractionType)})})))}))}function yS(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_SCREEN_CAPTURE_OCR_ERROR,errorData:{extensionVersion:"1.70.0",errorCode:e.errorCode,errorMessage:e.errorMessage,errorCategory:Ry(Yr)}})))}))}function ES(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_FPT_POPUP_OPEN,fptPopupOpenData:{trigger:Uy(e.trigger)}})))}))}function SS(){return r(this,void 0,void 0,(function*(){return qy((e=>Object.assign(Object.assign({},e),{eventId:MT.EVENT_ID_OCR_TRANSLATION_INSTRUCTIONS_CLOSED})))}))}const IS="TG-2929",AS="PT-247",bS="PT-1003",wS="PT-1252",OS="PT-1209",NS="PT-1269",RS=(e,t)=>{if(!e||!Array.isArray(e)||0===e.length)return 1;const n=e.find((e=>e.name===t));return n?n.variant:1},LS=(e,t)=>2===RS(e,t);let PS;const CS="dlBrowserExtension",xS="dlCache",kS="actionLogs",DS="dlclientstate",US="dlexperiments",MS="dlcustomlogo",GS={newWebsiteState:50,dlTrackDictionaryStatus:50,dlTrackIconHover:50,dlTrackInlinePositionChange:50,dlExperimentsUpdated:50,default:300},VS=1500;function $S(e){return GS[e]||GS.default}function FS(){return new Promise(((e,t)=>{let n=indexedDB.open(CS,1);n.onerror=function(){t(n.error)},n.onsuccess=function(t){PS=t.target.result,e()},n.onupgradeneeded=function(t){if(PS=t.target.result,PS.objectStoreNames.contains(xS)||PS.createObjectStore(xS,{keyPath:"id"}),!PS.objectStoreNames.contains(kS)){PS.createObjectStore(kS,{keyPath:"id"}).createIndex("action","action",{unique:!1})}e()}}))}function jS(e,t,n){return r(this,void 0,void 0,(function*(){return PS||(yield FS()),new Promise(((r,o)=>{let i=PS.transaction(n,"readwrite").objectStore(n).put({id:e,data:t,meta:{createdAt:Date.now()}});i.onsuccess=function(){r()},i.onerror=function(e){o(e)}}))}))}function WS(e,t){return r(this,void 0,void 0,(function*(){return PS||(yield FS()),new Promise(((n,r)=>{let o=PS.transaction(t,"readonly").objectStore(t).get(e);o.onerror=function(e){r(e)},o.onsuccess=function(){o.result?n(o.result):n(null)}}))}))}function qS(e){return r(this,void 0,void 0,(function*(){try{yield jS(DS,e,xS)}catch(e){gT(e,qv)}}))}function BS(){return r(this,void 0,void 0,(function*(){const e=yield WS(DS,xS);if(!e||!e.meta)return;return(Date.now()-e.meta.createdAt)/6e4>20?void 0:e.data}))}function HS(e){return r(this,void 0,void 0,(function*(){try{yield jS(US,e,xS)}catch(e){gT(e,qv)}}))}function JS(){return r(this,void 0,void 0,(function*(){const e=yield WS(US,xS);if(!e||!e.meta)return[];return(Date.now()-e.meta.createdAt)/6e4>9?[]:e.data&&0!==e.data.length?e.data:[]}))}function zS(e){return r(this,void 0,void 0,(function*(){try{yield jS(MS,e,xS)}catch(e){gT(e,qv)}}))}function YS(){return r(this,void 0,void 0,(function*(){const e=yield WS(MS,xS);if(e)return{imageBlob:e.data,imageCachedAt:e.meta.createdAt}}))}function XS(e){return r(this,void 0,void 0,(function*(){if(PS||(yield FS()),!function(){if(!PS)return!1;if(null===PS.version)return!1;if(Ro())try{return"readonly"===PS.transaction(xS,"readonly").mode}catch(e){return!1}return!0}())return void aT("Database not ready for mutations, skipping action log");if(!PS.objectStoreNames.contains(kS))return;const t=Date.now(),n={id:`${t}-${Math.random().toString(36).substring(2,11)}`,action:e.action,timestamp:t,error:e.error};return new Promise(((e,t)=>{const r=PS.transaction(kS,"readwrite").objectStore(kS).put(n);r.onsuccess=function(){e()},r.onerror=function(e){t(e)}}))}))}function KS(){return r(this,void 0,void 0,(function*(){return PS||(yield FS()),PS.objectStoreNames.contains(kS)?new Promise(((e,t)=>{const n=PS.transaction(kS,"readonly").objectStore(kS).getAll();n.onsuccess=function(){e(n.result||[])},n.onerror=function(e){t(e)}})):[]}))}function QS(){return r(this,void 0,void 0,(function*(){try{aT("Starting efficient action logs cleanup...");const e=yield KS();if(aT(`Found ${e.length} total logs`),e.length>VS){aT(`Total logs (${e.length}) exceed global limit (1500)`);const t=e.sort(((e,t)=>e.timestamp-t.timestamp)),n=t.slice(-1500),r=t.slice(0,t.length-VS);aT(`Global cleanup: keeping ${n.length}, removing ${r.length} oldest logs`),PS||(yield FS());const o=PS.transaction(kS,"readwrite"),i=o.objectStore(kS);yield new Promise(((e,t)=>{o.oncomplete=()=>e(),o.onerror=()=>t(o.error);for(const e of r)i.delete(e.id)})),aT(`Successfully removed ${r.length} log entries due to global limit`),e.splice(0,e.length,...n)}const t=new Map;for(const n of e)t.has(n.action)||t.set(n.action,[]),t.get(n.action).push(n);const n=[];for(const[e,r]of t){const t=$S(e);if(r.length>t){const o=r.sort(((e,t)=>e.timestamp-t.timestamp)),i=o.slice(-t),a=o.slice(0,o.length-t);n.push(...a.map((e=>e.id))),aT(`Action "${e}": keeping ${i.length}, removing ${a.length} old logs`)}else aT(`Action "${e}": ${r.length} logs (within limit of ${t})`)}if(n.length>0){aT(`Removing ${n.length} total log entries...`),PS||(yield FS());const e=PS.transaction(kS,"readwrite"),t=e.objectStore(kS);yield new Promise(((r,o)=>{e.oncomplete=()=>r(),e.onerror=()=>o(e.error);for(const e of n)t.delete(e)})),aT(`Successfully removed ${n.length} log entries`);aT(`Remaining logs after cleanup: ${(yield KS()).length}`)}else aT("No cleanup needed - all actions within limits")}catch(e){aT("Error during efficient action logs cleanup:",e),gT(e,qv)}}))}function ZS(e){return r(this,void 0,void 0,(function*(){try{if(e.error&&(t=e.error,[/Could not establish connection\. Receiving end does not exist\./,/Receiving end does not exist/,/message channel closed before a response was received/,/Extension context invalidated/].some((e=>e.test(t)))))return;const n=yield JS();if(!LS(n,bS))return}catch(e){return void aT("Failed to get experiment data for action logging feature:",e)}var t;try{yield XS(e)}catch(e){gT(e,qv)}}))}function eI(){return r(this,void 0,void 0,(function*(){aT("=== MANUAL CLEANUP STARTED ===");try{const e=yield KS();aT(`Before cleanup: ${e.length} total logs`),yield QS();const t=yield KS();return aT(`After cleanup: ${t.length} total logs`),aT(`Removed: ${e.length-t.length} logs`),aT("=== MANUAL CLEANUP COMPLETED ==="),{beforeCount:e.length,afterCount:t.length,removedCount:e.length-t.length}}catch(e){throw aT("Manual cleanup failed:",e),gT(e,qv),e}}))}function tI(){return r(this,void 0,void 0,(function*(){try{const e=yield KS(),t=new Map;for(const n of e)t.has(n.action)||t.set(n.action,[]),t.get(n.action).push(n);const n={totalLogs:e.length,totalLogsLimit:VS,totalLogsExceeded:e.length>VS,totalLogsExcess:Math.max(0,e.length-VS),actionTypes:t.size,actionsNeedingCleanup:[],allActions:[]};for(const[e,r]of t){const t=$S(e),o=r.length>t;n.allActions.push({action:e,currentCount:r.length,limit:t,needsCleanup:o}),o&&n.actionsNeedingCleanup.push({action:e,currentCount:r.length,limit:t,excessCount:r.length-t})}return n.allActions.sort(((e,t)=>t.currentCount-e.currentCount)),aT("=== CLEANUP STATS DEBUG ==="),aT(`Total logs: ${n.totalLogs}/${n.totalLogsLimit} ${n.totalLogsExceeded?"(EXCEEDS GLOBAL LIMIT)":""}`),n.totalLogsExceeded&&aT(`Global limit excess: ${n.totalLogsExcess} logs`),aT(`Action types: ${n.actionTypes}`),aT(`Actions needing cleanup: ${n.actionsNeedingCleanup.length}`),aT("Top 10 actions by log count:"),n.allActions.slice(0,10).forEach(((e,t)=>{aT(`${t+1}. ${e.action}: ${e.currentCount}/${e.limit} ${e.needsCleanup?"(NEEDS CLEANUP)":""}`)})),n.actionsNeedingCleanup.length>0&&(aT("Actions needing cleanup:"),n.actionsNeedingCleanup.forEach((e=>{aT(`- ${e.action}: ${e.currentCount}/${e.limit} (excess: ${e.excessCount})`)}))),aT("=== END CLEANUP STATS DEBUG ==="),n}catch(e){return aT("Error getting cleanup stats:",e),gT(e,qv),null}}))}function nI(e){return r(this,void 0,void 0,(function*(){if(e.includes("session")){const e=yield chrome.storage.sync.get(["session"]);e&&!e.session&&(yield rI())}return new Promise(((t,n)=>{chrome.storage.sync.get(e,(r=>{r?t(r):n(`Can not get ${e}`)}))}))}))}function rI(){return r(this,void 0,void 0,(function*(){const e=m();yield chrome.storage.sync.set({session:{id:e,timestamp:Date.now()}});try{yield WE()}catch(e){console.error(e)}}))}function oI(){return r(this,void 0,void 0,(function*(){const{session:e}=yield nI(["session"]);!e||(Date.now()-e.timestamp)/6e4>30?yield rI():yield chrome.storage.sync.set({session:Object.assign(Object.assign({},e),{timestamp:Date.now()})})}))}function iI(e,t,n){return r(this,void 0,void 0,(function*(){const r=E(e);return yield chrome.storage.local.set({a_t:e,r_t:t,[mo.auth.idToken]:n,isLoggedIn:!(!e||!t),isProUser:!(!r||"Pro"!==r.sessionType),sessionType:null==r?void 0:r.sessionType,organizationId:null==r?void 0:r.organizationId}),null==r?void 0:r.sessionType}))}function aI(){return r(this,void 0,void 0,(function*(){yield chrome.storage.local.remove([mo.auth.accessToken,mo.auth.refreshToken,mo.auth.idToken,"delegatedLoginMapping",mo.auth.organizationId]),yield chrome.storage.local.set({isLoggedIn:!1,isProUser:!1,sessionType:""})}))}function sI(){return r(this,void 0,void 0,(function*(){yield chrome.storage.sync.remove(["activeTermbaseId","isGlossaryEnabled"]),yield chrome.storage.sync.set({activeTermbaseId:"",isGlossaryEnabled:!1})}))}function lI(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get([mo.auth.accessToken,mo.auth.refreshToken,mo.auth.idToken]);return{access_token:e?e[mo.auth.accessToken]:void 0,refresh_token:e?e[mo.auth.refreshToken]:void 0,id_token:e?e[mo.auth.idToken]:void 0}}))}function cI(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get([mo.auth.isLoggedIn]);return!(!e||!e.isLoggedIn)}))}function uI(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get(["sessionType"]);return null==e?void 0:e.sessionType}))}function dI(){return r(this,void 0,void 0,(function*(){return(yield chrome.storage.sync.get(["installationId"])).installationId}))}function pI(){return r(this,void 0,void 0,(function*(){yield chrome.storage.local.set({[mo.auth.last_login]:Date.now()})}))}function gI(){return r(this,void 0,void 0,(function*(){yield chrome.storage.local.remove([mo.auth.last_login])}))}function hI(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get([mo.auth.last_login]);return e&&e.last_login?(Date.now()-e.last_login)/1e3:0}))}function fI(e){return r(this,void 0,void 0,(function*(){var t,n,r,o,i;const a=e.featureSet.translator.service,s=e.featureSet.write.service,l=e.featureSet.api.service,c=e.featureSet.documentTranslation.service,u=e.featureSet.glossary.termbaseService,d=e.featureSet.glossary.maxGlossaries,p=e.featureSet.glossary.creation;let g,h;(null===(t=e.loginState)||void 0===t?void 0:t.accountId)&&(g=e.loginState.accountId),(null===(r=null===(n=e.featureSet)||void 0===n?void 0:n.integrations)||void 0===r?void 0:r.browserExtension)&&(h=null===(i=null===(o=e.featureSet)||void 0===o?void 0:o.integrations)||void 0===i?void 0:i.browserExtension);let f=null==e?void 0:e.menuTranslatePageHead;yield chrome.storage.local.set({translatorServiceType:a,writeServiceType:s,apiServiceType:l,docTranslatorServiceType:c,accountId:g||"",featureSet:h,hasTermbaseService:u&&d>0,customTranslatorName:null!=f?f:"",canCreateGlossary:p})}))}function _I(){return r(this,void 0,void 0,(function*(){return yield chrome.storage.local.get([mo.auth.isLoggedIn,"isProUser","sessionType",mo.auth.translatorServiceType,mo.auth.writeServiceType,mo.auth.apiServiceType,mo.auth.docTranslatorServiceType,mo.auth.accountId,mo.glossary.hasTermbaseService,mo.auth.organizationId])}))}function mI(){return r(this,void 0,void 0,(function*(){yield chrome.storage.local.set({browserInstanceId:m()})}))}function vI(){return r(this,void 0,void 0,(function*(){return(yield chrome.storage.local.get(["browserInstanceId"])).browserInstanceId}))}function TI(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get([mo.auth.accountId,mo.auth.accessToken,mo.auth.idToken]);if(e&&e.accountId)return e.accountId;if(e&&e.a_t){const t=E(e.a_t),n=E(e[mo.auth.idToken]);return(null==t?void 0:t.sub)||(null==n?void 0:n.sub)}}))}function yI(){return r(this,void 0,void 0,(function*(){let e=[];try{e=yield JS()}catch(e){}if(!e||0===e.length)return[];const t=e.map((e=>({id:e.id,variant:e.variant,breakout:e.breakout})));return t}))}function EI(){return r(this,arguments,void 0,(function*(e=mo.auth.translatorServiceType){const t=yield _I(),n=!!t.accountId,r=t[e];return n?r===Kn?M:G:U}))}function SI(){return r(this,arguments,void 0,(function*(e=mo.auth.translatorServiceType){const t=yield EI(e);let n;switch(e){case mo.auth.translatorServiceType:n=V;break;case mo.auth.writeServiceType:n=$;break;default:n=V}switch(t){case U:return n.notLoggedIn;case G:return n.loggedInFree;case M:return;default:return n.notLoggedIn}}))}function II(e){return r(this,void 0,void 0,(function*(){const t=yield chrome.storage.local.get([mo.auth.translatorServiceType,mo.auth.writeServiceType,mo.auth.apiServiceType,mo.auth.docTranslatorServiceType,mo.auth.isLoggedIn]);return cT(t,e)}))}function AI(){return r(this,void 0,void 0,(function*(){var e;const t=yield chrome.storage.local.get([mo.auth.translatorServiceType,mo.auth.writeServiceType,mo.auth.apiServiceType,mo.auth.docTranslatorServiceType,mo.auth.isLoggedIn]);return Object.assign(Object.assign({},t),{isLoggedIn:null!==(e=t.isLoggedIn)&&void 0!==e&&e})}))}function bI(){return r(this,void 0,void 0,(function*(){if(Ro())return;const e=yield chrome.cookies.get({name:"dapUid",url:"https://www.deepl.com"});return e?e.value:void 0}))}function wI(e){return r(this,void 0,void 0,(function*(){yield chrome.storage.local.set({[mo.whiteLabelLogoId]:e.whiteLabelLogoId,[mo.accountCountry]:e.locale.countryCode})}))}function OI(){return r(this,void 0,void 0,(function*(){yield chrome.storage.local.remove([mo.whiteLabelLogoId]),yield chrome.storage.local.remove([mo.accountCountry])}))}function NI(){return r(this,void 0,void 0,(function*(){var e;let t;try{t=yield chrome.storage.local.get([mo.translationLanguages])}catch(e){return console.error("Failed to get translation languages, fallback to static supported languages:",e),S}return null!==(e=null==t?void 0:t.translationLanguages)&&void 0!==e?e:S}))}function RI(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get([mo.auth.organizationId]);return null==e?void 0:e.organizationId}))}const LI=["requireLogin","suggestIdp","customExtensionIcon","enforceSsoAutologin","skipOnboarding","preventFeedbackSurvey","hideWrite"],PI=()=>r(void 0,void 0,void 0,(function*(){try{return yield chrome.storage.managed.get(LI)}catch(e){return}})),CI=()=>r(void 0,void 0,void 0,(function*(){const e=yield PI();if(void 0===e)return;const{isLoggedIn:t}=yield _I();if(e.requireLogin&&!t)throw new NT})),xI=()=>r(void 0,void 0,void 0,(function*(){var e;const t=yield PI();return void 0!==t&&(null!==(e=t.customExtensionIcon)&&void 0!==e&&e)})),kI=()=>r(void 0,void 0,void 0,(function*(){var e,t;const n=yield PI();return void 0===n?{enforceSsoAutologin:!1,autoLoginSsoDomain:void 0}:{enforceSsoAutologin:null!==(e=n.enforceSsoAutologin)&&void 0!==e&&e,autoLoginSsoDomain:null!==(t=n.suggestIdp)&&void 0!==t?t:void 0}}));function DI(){return r(this,arguments,void 0,(function*(e=!1){if(!e){let e;try{e=yield JS()}catch(e){}if(e&&e.length)return e}const t=yield dI();if(!t)throw new Error("Installation ID is not valid");let n=[];try{n=yield JS()}catch(e){}const r=`https://experimentation.deepl.com/experiments/${t}`;let o;try{const e=yield fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:JSON.stringify(n),credentials:"omit"});if(o=(yield e.json()).client_experiments,!o)return[];const t=yield UI();return t.length&&(o=o.map((e=>{const n=t.find((t=>t.id===e.id));return n?Object.assign(Object.assign({},e),{variant:n.variant}):e}))),yield HS(o),o}catch(e){return[]}}))}function UI(){return r(this,void 0,void 0,(function*(){if(Ro())return[];const e=yield chrome.cookies.get({name:"dl_experiment_override",url:"https://www.deepl.com"});if(!e)return[];return e.value.split("|").map((e=>{const[t,n]=e.split("-");return{id:parseInt(t),variant:parseInt(n)}})).filter((e=>!isNaN(e.id)&&!isNaN(e.variant)))}))}const MI=new Map([["ZH_EN","chinese-english"],["EN_ZH","english-chinese"],["NL_EN","dutch-english"],["EN_NL","english-dutch"],["FR_EN","french-english"],["EN_FR","english-french"],["FR_DE","french-german"],["DE_FR","german-french"],["FR_PT","french-portuguese"],["PT_FR","portuguese-french"],["FR_ES","french-spanish"],["ES_FR","spanish-french"],["DE_EN","german-english"],["EN_DE","english-german"],["DE_PT","german-portuguese"],["PT_DE","portuguese-german"],["DE_ES","german-spanish"],["ES_DE","spanish-german"],["IT_EN","italian-english"],["EN_IT","english-italian"],["JA_EN","japanese-english"],["EN_JA","english-japanese"],["PL_EN","polish-english"],["EN_PL","english-polish"],["PT_EN","portuguese-english"],["EN_PT","english-portuguese"],["PT_ES","portuguese-spanish"],["ES_PT","spanish-portuguese"],["RU_EN","russian-english"],["EN_RU","english-russian"],["ES_EN","spanish-english"],["EN_ES","english-spanish"]]);function GI(e){return r(this,void 0,void 0,(function*(){const t=function(e,t){const n=`${e.toUpperCase()}_${t.toUpperCase()}`;return MI.get(n)}(Hv(e.sourceLang),Hv(e.targetLang)),n=encodeURIComponent(e.text),o=`https://www-app.linguee.com/${t}/search?dlApp=BrowserExtension&il=${e.interfaceLang}&query=${n}`;let i=function(e){return r(this,void 0,void 0,(function*(){let t;if(200!==e.status)throw 404===e.status?(console.error("Dictionary Entry not found: 404"),new DT(fT)):(console.error("Dictionary Server Error"),new DT(_T));{try{t=yield e.text()}catch(e){throw new DT(_T)}const n=/href=["']([^"']*)["']/g;t=t.replace(n,"")}return t}))}(yield fetch(o));return i}))}function VI(e,t){const n=1e-5;return n*Math.floor((.97*e+t)/n)}const $I="ACCESS_DENIED",FI="INVALID_REQUEST",jI="INVALID_GRANT",WI="GET_TOKEN_ERROR",qI="INVALID_NONCE",BI="TOO_MANY_REQUESTS",HI="REGION_UNAVAILABLE";class JI extends Error{constructor(e,t){super(e),this.httpStatusCode=t,this.name=$I}}class zI extends Error{constructor(e,t){super(e),this.httpStatusCode=t,this.name=FI}}class YI extends Error{constructor(e,t){super(e),this.httpStatusCode=t,this.name=jI}}class XI extends Error{constructor(e,t){super(e),this.httpStatusCode=t,this.name=BI}}class KI extends Error{constructor(e,t){super(e),this.httpStatusCode=t,this.name=WI}}class QI extends Error{constructor(e){super(e),this.name=qI}}class ZI extends Error{constructor(e,t){super(e),this.httpStatusCode=t,this.name=HI}}function eA(e,t,n){if(200!==e){if(451===e)throw new ZI(`dl-oidc (get tokens): region unavailable - http status: ${e}`,e);if("invalid_request"===t.error)throw new zI(`dl-oidc (get tokens): invalid request - http status: ${e}`,e);if("invalid_grant"===t.error)throw new YI(`dl-oidc (get tokens): invalid grant - http status: ${e}`,e);if("too_many_requests"===t.error)throw new XI(`dl-oidc (get tokens): too many requests - http status: ${e}`,e);throw new KI(`dl-oidc (get tokens): http status: ${e}`,e)}if(null==n?void 0:n.scopes){if(n.scopes.split(" ").includes("openid")){if(!t||!t.id_token)throw new zI("dl-oidc (get tokens): missing id_token in response",400);const e=E(t.id_token);if(!e)throw new zI("dl-oidc (get tokens): invalid id_token payload",400);if(n.nonce&&(null==e?void 0:e.nonce)!==n.nonce)throw new QI("dl-oidc (get tokens): invalid nonce")}}}function tA(e,t){const n=e.split("?")[1];if(!n)return;const r=n.split("&");for(let e=0;e<r.length;e++){const n=r[e].split("=");if(decodeURIComponent(n[0])===t)return decodeURIComponent(n[1])}}let nA;function rA(e){return r(this,void 0,void 0,(function*(){if(nA)return nA;try{const t=yield fetch(`${e}/.well-known/openid-configuration`);if(!t.ok)throw t;const n=yield t.json();return nA=((e,t,n)=>{const r=new URL(t),o=new URL(e);return r.origin===o.origin?n:{authorization_endpoint:n.authorization_endpoint,token_endpoint:n.token_endpoint.replace(r.origin,o.href),introspection_endpoint:n.introspection_endpoint.replace(r.origin,o.href),end_session_endpoint:n.end_session_endpoint,revocation_endpoint:n.revocation_endpoint.replace(r.origin,o.href),userinfo_endpoint:n.userinfo_endpoint.replace(r.origin,o.href),jwks_uri:n.jwks_uri.replace(r.origin,o.href)}})(e,n.issuer,n),nA}catch(t){return console.error("Error while fetching OIDC endpoints",t,e),{authorization_endpoint:`${e}/authorize`,token_endpoint:`${e}/token`,introspection_endpoint:`${e}/introspect`,end_session_endpoint:`${e}/endsession`,revocation_endpoint:`${e}/revoke`,userinfo_endpoint:`${e}/userinfo`,jwks_uri:`${e}/.well-known/jwks`}}}))}const oA=["email","idp","offline_access","openid","profile","service_level","organization"].join(" ");function iA(e,t){return r(this,arguments,void 0,(function*(e,t,n=void 0){const{authorization_endpoint:o}=yield rA(e.authURL),i=y(),a=y(),s=yield function(e){return r(this,void 0,void 0,(function*(){const t=yield crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e));return btoa(String.fromCharCode(...new Uint8Array(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}))}(a),l=new URLSearchParams([["client_id",e.clientId],["response_type","code"],["redirect_uri",t],["scope",oA],["code_challenge",s],["code_challenge_method","S256"],["nonce",i]]);n&&l.append("identity_provider",n),e.isSignUp?l.append("prompt","create"):l.append("prompt","select_account");const c=new URL(o);return c.search=l.toString(),{url:c.toString(),nonce:i,codeVerifier:a}}))}const aA=new class{get state(){return this._state}constructor(e,t,n){this.failureCountThreshold=e,this.openTimeRange=t,this.openDefaultErrorGenerator=n,this._state="CLOSED",this._failureCount=0,this._failureTripTimeoutHandle=void 0}execute(e){return r(this,void 0,void 0,(function*(){if("OPEN"===this._state)throw this.openDefaultErrorGenerator();try{return yield e()}catch(e){throw this.handleFailure(),e}}))}handleFailure(){if(this._failureCount++,this._failureCount<this.failureCountThreshold)return;this._state="OPEN",void 0!==this._failureTripTimeoutHandle&&clearTimeout(this._failureTripTimeoutHandle);const e=Math.random()*(this.openTimeRange.maxMs-this.openTimeRange.minMs)+this.openTimeRange.minMs;this._failureTripTimeoutHandle=setTimeout((()=>{this._state="CLOSED",this._failureCount=0}),e)}}(1,{minMs:2e4,maxMs:4e4},(()=>new KI("dl-oidc (get tokens): circuit breaker open")));function sA(e){return r(this,arguments,void 0,(function*(e,t=!1,n=2e3,o=!0){const i=yield e.storage.getTokens();if(!i)return null;const{token_endpoint:a}=yield rA(e.authURL),s=()=>r(this,void 0,void 0,(function*(){const n=yield fetch(a,{method:"POST",credentials:"omit",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(Object.assign({client_id:e.clientId},t?{grant_type:"legacy_session",scope:oA,id_token:i.id_token}:{grant_type:"refresh_token",refresh_token:i.refresh_token}))}),r=yield n.json();eA(n.status,r,{scopes:oA});const{access_token:o,refresh_token:s,id_token:l}=r;return{access_token:o,refresh_token:s,id_token:l}})),l=()=>new Promise(((e,t)=>{let o=0;const i=()=>r(this,void 0,void 0,(function*(){try{const t=yield s();e(t)}catch(e){if(e instanceof zI||e instanceof YI||e instanceof JI)return void t(e);if(o>=2)return void t(e);o++,setTimeout(i,o*n)}}));i()}));return yield o?aA.execute((()=>l())):l()}))}const lA=(e,...t)=>r(void 0,[e,...t],void 0,(function*(e,t=!1,n=6e4){const r=yield e.storage.getTokens();if(!r)return;const o=function(e){var t;const n=E(e);return 1e3*(null!==(t=null==n?void 0:n.exp)&&void 0!==t?t:0)}(r.access_token)-Date.now()<n,i=((e,t)=>{if(!e)return!1;const n=E(e);return(null==n?void 0:n.iss)===t})(r.id_token,e.legacyAuthURL);if(t||o||i){const t=yield sA(e,i);return t&&(yield e.storage.saveTokens(t)),null==t?void 0:t.access_token}return r.access_token}));function cA(e,t){return r(this,arguments,void 0,(function*(e,t,n={},o){var{omitCookies:i}=n,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(n,["omitCookies"]);function s(t){return r(this,void 0,void 0,(function*(){return yield fetch(e,Object.assign(Object.assign(Object.assign({},a),{headers:Object.assign(Object.assign({},a.headers),{Authorization:t?`Bearer ${t}`:"None"})}),i&&{credentials:"omit"}))}))}void 0===o&&(o=!1);const l=yield lA(t,o);let c=yield s(l);if(401===c.status||403===c.status){if(!l)throw c;const e=yield sA(t);if(!e)throw c;yield t.storage.saveTokens(e),c=yield s(e.access_token)}if(451===c.status)throw new ZI(`dl-oidc (auth fetch): region unavailable - http status: ${c.status}`,c.status);return c}))}const uA=(e=>({fetch:(t,n={},r=!1)=>cA(t,e,n,r),getAccessToken:(...t)=>r(void 0,[...t],void 0,(function*(t=!1,n=6e4){return lA(e,t,n)})),initTokens:(t,n=!0)=>function(e,t){return r(this,arguments,void 0,(function*(e,{redirect_uri:t,response_url:n,nonce:r,code_verifier:o},i=!0){const{token_endpoint:a}=yield rA(e.authURL),s=tA(n,"code");if(!s){const e=tA(n,"error");if("access_denied"===e)throw new JI("dl-oidc (get tokens): access denied - undefined code",401);if("invalid_request"===e)throw new zI("dl-oidc (get tokens): invalid request - undefined code",400)}let l={client_id:e.clientId,code_verifier:o,grant_type:"authorization_code",redirect_uri:t};s&&(l.code=s);const c=yield fetch(a,{method:"POST",credentials:"omit",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(l)}),u=yield c.json();return eA(c.status,u,{nonce:r,scopes:oA}),i&&(yield e.storage.saveTokens(u)),u}))}(e,t,n),createLoginParameters:(t,n)=>iA(e,t,n),createSignUpParameters:(t,n)=>iA(Object.assign(Object.assign({},e),{isSignUp:!0}),t,n),createLogoutParameters:t=>function(e,t){return r(this,void 0,void 0,(function*(){const n=yield e.storage.getTokens();if(!n)return;const r=n.id_token,{end_session_endpoint:o}=yield rA(e.authURL),i=new URLSearchParams([["client_id",e.clientId],["id_token_hint",r],["post_logout_redirect_uri",t]]),a=new URL(o);return a.search=i.toString(),{url:a.toString()}}))}(e,t)}))({clientId:"chromeExtension",authURL:"https://auth.deepl.com",legacyAuthURL:"https://www.deepl.com",storage:{getTokens:()=>r(void 0,void 0,void 0,(function*(){const e=yield lI();return e.access_token&&e.refresh_token&&e.id_token?e:null})),saveTokens:e=>r(void 0,void 0,void 0,(function*(){iI(e.access_token,e.refresh_token,e.id_token)}))}});function dA(){return r(this,arguments,void 0,(function*(e=!1,t=!0){if(!e){const e=yield BS();if(e)return e}const n=jy("getClientState",{v:"20180814"},_()),r=yield uA.fetch("https://w.deepl.com/web",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(n),credentials:"omit"},t),o=(yield r.json()).result;return o&&(qS(o),fI(o)),o}))}const pA=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=yield iI(e.access_token,e.refresh_token,e.id_token);try{yield dA(!0,!1),yield HL(),xE(t),qE(),n&&ME({sessionType:n,trigger:"LOGIN"})}catch(e){console.error(e)}yield pI()})),gA=()=>r(void 0,void 0,void 0,(function*(){const e=yield r(void 0,void 0,void 0,(function*(){const e=new URL("https://deepl.qualtrics.com/jfe/form/SV_5hVyvZAQlQOL5RQ");try{const t=yield hA();e.search=t.toString()}catch(e){console.error("Error setting query parameters on feedback survey URL:",e)}return e.toString()}));e&&chrome.tabs.create({url:e,active:!0})}));function hA(){return r(this,void 0,void 0,(function*(){const e=new URLSearchParams,t=SA();e.set(t.key,t.value);const n=yield IA();n&&e.set(n.key,n.value);const r=AA();e.set(r.key,r.value);const o=yield bA();return e.set(o.key,o.value),e}))}const fA=(e,t,n=void 0,r=void 0)=>{const o=[];let i=[],a=0;for(const s of e){const e=n?n(s):s,l=_A(e);i.length>0&&(a+l>t||r&&i.length>=r)&&(o.push(i),i=[],a=0),i.push(s),a+=l}return i.length>0&&o.push(i),o},_A=e=>(new TextEncoder).encode(e).length;function mA(e){return r(this,void 0,void 0,(function*(){const t=yield createImageBitmap(e);try{const e=[16,32,48,128],n={};for(const r of e){const e=new OffscreenCanvas(r,r).getContext("2d",{alpha:!0,desynchronized:!1});if(!e)throw new Error(`Failed to get 2D rendering context for size ${r}`);e.imageSmoothingEnabled=!0,e.imageSmoothingQuality="high",e.drawImage(t,0,0,r,r),n[r]=e.getImageData(0,0,r,r)}yield chrome.action.setIcon({imageData:n})}finally{t.close()}}))}function vA(){return r(this,void 0,void 0,(function*(){yield chrome.action.setIcon({path:"images/deepl_32.png"})}))}const TA=e=>r(void 0,void 0,void 0,(function*(){try{yield e()}catch(e){nT()&&console.log(e)}}));function yA(){return r(this,void 0,void 0,(function*(){if((yield II(Yn.TRANSLATOR))||(yield II(Yn.WRITE)))return!0;const e=yield MR();return LS(e,AS)}))}const EA=()=>r(void 0,void 0,void 0,(function*(){const e=new URL("https://www.deepl.com/extension-uninstall");try{const{installationId:t}=yield chrome.storage.sync.get(["installationId"]),n=new URLSearchParams({installation_id:t||"",utm_source:"browser_extension",utm_content:"uninstall_event"});if(yield yA()){n.set("survey","1");(yield hA()).forEach(((e,t)=>{n.set(t,e)}))}e.search=n.toString()}catch(e){console.error("Error setting query parameters on uninstall URL:",e)}chrome.runtime.setUninstallURL(e.toString())}));function SA(){const{browser:e}=Oo(),t="0",n="1",r="2",o="3",i="4",a="5";let s=a;switch(e){case vo.chrome:s=t;break;case vo.firefox:s=n;break;case vo.edge:s=r;break;case vo.opera:s=o;break;case vo.brave:s=i;break;default:s=a}return{key:"br",value:s}}function IA(){return r(this,void 0,void 0,(function*(){const{accountCountry:e}=yield chrome.storage.local.get([mo.accountCountry]);return e?{key:"c",value:e}:null}))}function AA(){return{key:"il",value:chrome.i18n.getUILanguage()}}function bA(){return r(this,void 0,void 0,(function*(){const e="0",t="1",n="2",r=yield cI(),o=(yield II(Yn.TRANSLATOR))||(yield II(Yn.WRITE));return{key:"ut",value:r?o?n:t:e}}))}const wA="ITA_REQUEST_TRANSLATION",OA="ITA_CLOSE_TRANSLATION_SESSION",NA="ITA_REQUEST_WRITE",RA="ITA_WRITE_UPDATE_SOURCE_TEXT",LA="ITA_RESTORE_TRANSLATE_SESSION",PA="ITA_TRANSLATE_SOURCE_LANGUAGE",CA="ITA_TRANSLATE_SOURCE_LANGUAGE_IS_AUTO_DETECTED",xA="ITA_TARGET_TEXT_FIELD",kA="ITA_WRITE_TARGET_TEXT_FIELD",DA="ITA_UPDATE_FORMALITY",UA="ERROR",MA="ITA_DOCUMENT_STATE",GA="ITA_WRITE_DOCUMENT_STATE",VA="ITA_WRITE_UPDATE_REQUESTED_LANGUAGE",$A="ITA_WRITE_UPDATE_STYLE_VARIANT",FA="ITA_RESTORE_WRITE_SESSION",jA="ITA_WRITE_SOURCE_LANGUAGE",WA="ITA_WRITE_SOURCE_LANGUAGE_IS_AUTO_DETECTED",qA="ITA_CLOSE_WRITE_SESSION",BA="ITA_TRANSLATE_SOURCE_LANGUAGE_IS_UNSUPPORTED",HA="ITA_WRITE_SOURCE_LANGUAGE_IS_UNSUPPORTED",JA="ITA_TRANSLATE_GENERIC_ERROR",zA="ITA_WRITE_GENERIC_ERROR",YA="ITA_TRANSLATE_GEO_BLOCKED_ERROR",XA={REQUEST:{ITA_SELECT_ALTERNATIVE:"ITA_SELECT_WRITE_ALTERNATIVE"},REPLY:{ITA_BACKEND_IDLE:"ITA_BACKEND_WRITE_IDLE",ITA_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS:"ITA_TRANSLATE_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS"}},KA={REQUEST:{ITA_UPDATE_TARGET_LANGUAGE:"ITA_UPDATE_TARGET_LANGUAGE",ITA_SELECT_ALTERNATIVE:"ITA_SELECT_TRANSLATE_ALTERNATIVE",ITA_UPDATE_SOURCE_LANGUAGE:"ITA_UPDATE_SOURCE_LANGUAGE"},REPLY:{ITA_BACKEND_IDLE:"ITA_BACKEND_TRANSLATE_IDLE",ITA_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS:"ITA_WRITE_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS",ITA_TARGET_LANGUAGE:"ITA_TARGET_LANGUAGE"}},QA={dlTranslate:"dlTranslate",dlTranslateInline:"dlTranslateInline",dlTranslateInput:"dlTranslateInput",dlTranslateSelectionRightClick:"dlTranslateSelectionRightClick",dlTranslateSelectedArea:"dlTranslateSelectedArea",dlTriggerTranslationShortcut:"dlTriggerTranslationShortcut"},ZA={dlImproveInline:"dlImproveInline",dlImproveInput:"dlImproveInput"},eb={dlShowOriginal:"dlShowOriginal",dlTabChanged:"dlTabChanged",dlDefaultPopUpMounting:"dlDefaultPopUpMounting",dlGetWebsiteData:"dlGetWebsiteData",dlShowNotification:"dlShowNotification",dlErrorVisibility:"dlErrorVisibility",dlShowAskForAReviewPopup:"dlShowAskForAReviewPopup",dlShowCustomerSegmentationSurvey:"dlShowCustomerSegmentationSurvey",dlShowArabicSurveyPopup:"dlShowArabicSurveyPopup",dlShowAlert:"dlShowAlert",dlSelectCaptureArea:"dlSelectCaptureArea",dlChangeActiveTabStatus:"dlChangeActiveTabStatus",dlShowPageLoadPopup:"dlShowPageLoadPopup",dlTranslateWebPageByRightMenuClick:"dlTranslateWebPageByRightMenuClick",dlChangeLanguageShortcut:"dlChangeLanguageShortcut"};function tb(e){return r(this,void 0,void 0,(function*(){let t,n=!1;try{const e=yield kI();n=e.enforceSsoAutologin,t=e.autoLoginSsoDomain}catch(e){console.error(e),Hy({errorCode:e.name,errorMessage:e.message,errorCategory:Jr})}yield(()=>r(this,void 0,void 0,(function*(){var r;const o=e?uA.createSignUpParameters:uA.createLoginParameters,i=yield o(chrome.identity.getRedirectURL(),n?t:void 0);let a;(oT()||(yield iT()))&&(i.url="http://localhost:3000/loginPage?regularUrl="+encodeURIComponent(i.url));try{a=yield chrome.identity.launchWebAuthFlow({interactive:!0,url:i.url})}catch(e){throw console.error(e),Hy({errorCode:e.name,errorMessage:e.message,errorCategory:Jr}),e}if(!a){const e=null===(r=chrome.runtime.lastError)||void 0===r?void 0:r.message;if(console.error("response url undefined",e),e&&(/The user did not approve access/gm.test(e)||/User cancelled or denied access/gm.test(e)))return;throw gT(`login - response url undefined. ${e}`,qv),Hy({errorCode:e,errorMessage:e,errorCategory:Jr}),new Error(`login - response url undefined. ${e}`)}try{const e=yield uA.initTokens({redirect_uri:chrome.identity.getRedirectURL(),response_url:a,nonce:i.nonce,code_verifier:i.codeVerifier},!1);yield pA(e,{trigger:Dn,reason:"explicit_login"}),ZS({action:"LOGIN_SUCCESS"})}catch(e){throw console.error(e),ZS({action:"LOGIN_ERROR",error:e.message}),Hy({errorCode:e.name,errorMessage:e.message,errorCategory:Jr}),e}})))(),EA()}))}function nb(e){return r(this,void 0,void 0,(function*(){const t=yield lI(),n=yield uA.createLogoutParameters(chrome.identity.getRedirectURL());if(!n)return;const o=()=>r(this,void 0,void 0,(function*(){try{yield BE()}catch(e){console.error(e)}yield Promise.all([gI(),aI(),OI(),vA()]),yield chrome.storage.local.set({[mo.auth.lastLogoutTrigger]:e.trigger});try{yield kE({trigger:e.trigger,reason:e.reason}),ZS({action:`LOGOUT_${e.trigger}-TRIGGER_${e.reason}-REASON`})}catch(e){console.error(e)}yield dA(!0),sI(),e.showAlert&&chrome.tabs.query({active:!0,currentWindow:!0},(function(t){chrome.tabs.sendMessage(t[0].id,{action:eb.dlShowAlert,payload:{error:e.reason}})})),EA()}));t.id_token?chrome.identity.launchWebAuthFlow({url:n.url,interactive:!0},(()=>{o(),ZS({action:"LOGOUT_SUCCESS"})})):yield o()}))}function rb(){return r(this,void 0,void 0,(function*(){const e=jy("getClientState",{v:"20180814"},_()),t=yield fetch("https://w.deepl.com/web",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(e)});return(yield t.json()).result}))}const ob="PROTOCOL_ERROR",ib="FULL_PAGE_SERVER_ERROR",ab="-32003",sb="403",lb="401";class cb extends Error{constructor(e){super(e),this.name=ob,this.message=e}}class ub extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}class db extends Error{constructor(e){super(e),this.name=ib,this.message=e}}function pb(){let e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}function gb(e,t){return{jsonrpc:"2.0",method:e,params:t,id:pb()}}const hb={TRANSLATE:"translate",WRITE:"write"},fb="pro",_b="LMT_split_text",mb="LMT_handle_jobs",vb="getTermbases";const Tb=async({mode:e,texts:t,config:n,sourceLang:r="auto",queryParameter:o,textType:i,advancedMode:a})=>{const s=await Sb(n,e),l=o?`${s}&method=${_b}&${o}`:`${s}&method=${_b}`,c=gb(_b,{commonJobParams:{mode:e,...!0===a&&{advancedMode:!0},textType:i},lang:{lang_user_selected:r},texts:t});return await Eb(l,{method:"POST",headers:{"Content-Type":"application/json"},body:Ab(c)},n)},yb=async({mode:e,jobs:t,sourceLang:n,targetLang:r,config:o,textType:i,formality:a,termbase:s,styleVariant:l,queryParameter:c,regionalVariant:u})=>{const d=await Sb(o,e),p=c?`${d}&method=${mb}&${c}`:`${d}&method=${mb}`,g=gb(mb,{commonJobParams:{mode:e,...i&&{textType:i},...a&&{formality:a},...l&&{style_variant:l},...s&&{termbase:s},...l&&{style_variant:l},...u&&{regionalVariant:u}},lang:{source_lang_computed:n,target_lang:r},jobs:t,priority:1,timestamp:Ib(t)});return await Eb(p,{method:"POST",headers:{"Content-Type":"application/json"},body:Ab(g)},o)},Eb=async(e,t,n)=>{const r=await cA(e,{authURL:n.auth.authUrl,legacyAuthURL:n.auth.legacyAuthUrl,clientId:n.auth.clientId,storage:{getTokens:()=>n.auth.getAuthTokens(),saveTokens:async e=>{await n.auth.setAuthTokens(e.access_token,e.refresh_token,e.id_token)}}},{...t,omitCookies:n.omitCookies});return await bb({response:r,isHtml:!1})},Sb=async({auth:e,baseUrls:t,isTermbase:n},r=void 0)=>{const o=await e.getAuthTokens(),i=r===hb.WRITE?t.write:t.translate;if(n)return t.glossary;if(!o||!o.access_token)return i.free;if(!e.getServiceLevels){const e=(e=>{try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}})(o.access_token),t=e&&"Pro"===e.sessionType;return o.access_token&&t?i.pro:i.free}{const t=await e.getServiceLevels();switch(r){case hb.WRITE:return t.write===fb?i.pro:i.free;case hb.TRANSLATE:return t.translator===fb?i.pro:i.free;default:return i.free}}},Ib=e=>{const t=e.reduce(((e,t)=>[...e,...t.sentences.map((e=>e.text))]),[]);let n=1;const r=Date.now();return t.forEach((e=>n+=(e.match(/[i]/g)||[]).length)),r-r%n+n},Ab=e=>{let t=JSON.stringify(e);return t=(e.id+3)%13==0||(e.id+5)%29==0?t.replace('"method":"','"method" : "'):t.replace('"method":"','"method": "'),t},bb=async({response:e,isHtml:t})=>{let n;try{if(403===e.status)throw new ub(e.status.toString(),`Translation failed: Http status code ${e.status} forbidden request. re-authenticating makes no difference.`);if(401===e.status)throw new ub(e.status.toString(),`Translation failed: Http status code ${e.status} unauthorized request.`);n=JSON.parse(await e.text())}catch(n){throw 200===e.status?new cb("JSON_RPC: Parsing of response object failed"):e.status>=500&&t?new db(`FPT failed: Http status code ${e.status}`):new ub(e.status.toString(),`Translation failed: Http status code ${e.status}`)}if("2.0"!==n.jsonrpc||void 0!==n.result&&200!==e.status||void 0===n.result&&void 0===n.error)throw new cb("JSON_RPC: missing field, wrong id, proper result without 200 status, or missing data");if(n.error){if(void 0===n.error.code)throw new cb('JSON_RPC: Missing field "code" in error response');throw new ub(n.error.code.toString(),n.error.message)}if(200!==e.status)throw new ub(e.status.toString(),`Http status code ${e.status}`);return n},wb=hb;function Ob(e){return r(this,arguments,void 0,(function*({texts:e,mode:t=hb.TRANSLATE,targetLang:n}){return Cb((o=>r(this,void 0,void 0,(function*(){return yield async function({texts:e,mode:t=hb.TRANSLATE,targetLang:n,config:r}){const o=await Tb({mode:t,texts:e,config:r}),i=o.result.texts[0].chunks.map(((e,n,r)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:n<r.length-1&&r.length>1?[r[n+1].sentences[0].text]:[],raw_en_context_before:n>0?[r[n-1].sentences[0].text]:[],sentences:[{...e.sentences[0],id:n}],...t===hb.WRITE&&{write_variant_requests:["main","variants"]}})));return await yb({mode:t,jobs:i,sourceLang:o.result.lang.detected,targetLang:t===hb.WRITE?o.result.lang.detected:n,config:r})}({texts:e,mode:t,targetLang:n,config:o})}))))}))}const Nb=e=>r(void 0,[e],void 0,(function*({mode:e,texts:t,sourceLang:n="auto",textType:o="plaintext",advancedMode:i}){return Cb((a=>r(void 0,void 0,void 0,(function*(){return yield Tb({mode:e,texts:t,sourceLang:n,config:a,textType:o,advancedMode:i})}))))})),Rb=e=>r(void 0,[e],void 0,(function*({mode:e,jobs:t,sourceLang:n,targetLang:o,textType:i,formality:a,termbase:s,styleVariant:l,regionalVariant:c}){return Cb((u=>r(void 0,void 0,void 0,(function*(){return yield yb({mode:e,jobs:t,sourceLang:n,targetLang:o,config:u,textType:i,formality:a,termbase:s,styleVariant:l,regionalVariant:c})}))))})),Lb=()=>r(void 0,void 0,void 0,(function*(){return Cb((e=>r(void 0,void 0,void 0,(function*(){return yield(async({config:e})=>{const t=`${await Sb({...e,isTermbase:!0})}&method=${vb}`,n=gb(vb,{});return await Eb(t,{method:"POST",headers:{"Content-Type":"application/json"},body:Ab(n)},e)})({config:e})}))))}));let Pb;const Cb=e=>r(void 0,void 0,void 0,(function*(){try{return yield e(xb())}catch(e){if(e.name===$I||e.name===FI||e.name===jI||e.name===ab||e.name===sb||e.name===lb){if(Pb)throw e;Pb=setTimeout((()=>r(void 0,void 0,void 0,(function*(){try{yield nb({trigger:kn,reason:e.name})}finally{clearTimeout(Pb),Pb=void 0}}))),5e3)}throw e}})),xb=()=>({baseUrls:{translate:{free:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.70.0",pro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.70.0"},write:{free:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",pro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0"},glossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.70.0"},auth:{clientId:"chromeExtension",authUrl:"https://auth.deepl.com",legacyAuthUrl:"https://www.deepl.com",getAuthTokens:lI,setAuthTokens:iI,getServiceLevels:()=>r(void 0,void 0,void 0,(function*(){const e=yield AI();return{translator:e.translatorServiceType,write:e.writeServiceType}})),tokenUrl:"https://w.deepl.com/oidc/token"},omitCookies:!0}),kb=e=>r(void 0,void 0,void 0,(function*(){const t=e.nicheIntegration===yn||e.nicheIntegration===bn||e.nicheIntegration===wn||!e.nicheIntegration,n=yield II(Yn.TRANSLATOR),r=yield II(Yn.WRITE);if(!((!n||!r)&&t))return;const o=e.sourceTexts.reduce(((e,t)=>e+t.length),0),i=e.isWriteRequest?mo.auth.writeServiceType:mo.auth.translatorServiceType,a=yield SI(i);if(e.isWriteRequest){if(n&&!r&&o>a)throw new xT(a,"Char limit exceeded (Translator Pro, Write Free)");if(!r&&o>a)throw new CT(a,"Char limit exceeded (Write Free Or Anonymous)")}else{let e;try{e=yield EI()}catch(t){e=U,console.log(t)}if(e===G&&r&&o>a)throw new kT(a,"Char limit exceeded (Free or Anon Translator, Write Pro)");if(e===G&&o>a)throw new LT(a,"Char limit exceeded (Translator Free)");if(e===U&&o>a)throw new PT(a,"Char limit exceeded (Translator Anon)")}})),Db=(e,t=[])=>{if(!e||0===t.length)return null;if(t.map((e=>e.id)).includes(e)){return t.find((t=>t.id===e))}return null},Ub=e=>e.translations[0].beams.map((e=>e.sentences[0])).some((e=>e.glossary_highlights&&e.glossary_highlights.length>0)),Mb=(e,...t)=>r(void 0,[e,...t],void 0,(function*(e,t=void 0){yield CI(),yield kb(e);const n=yield _I(),r=lT(n,Yn.TRANSLATOR)===Qn;const o=e.isWriteRequest?wb.WRITE:wb.TRANSLATE;if(r&&o===wb.TRANSLATE)throw new ub(sb,"User is not allowed to use the DeepL Translator, please contact your admin");const{activeTermbaseId:i,isGlossaryEnabled:a}=yield nI([mo.glossary.activeTermbaseId,mo.glossary.isGlossaryEnabled]),{isLoggedIn:s,hasTermbaseService:l}=yield _I(),{textLinesComponents:c,sentences:u,sourceLang:d}=yield Gb(e);let p,g=!1,h=!1;const f=Bv(e.targetLangCode);if(uT({isLoggedIn:s,hasTermbaseService:l})&&i&&!e.isWriteRequest&&a)try{const[e]=yield mR(),t=Db(i,e);if(t)for(let e of t.termDictionaries)if(e.languagePair===`${Jv(d)}>${Jv(f.langCode)}`.toLowerCase()){p={id:t.id,dictionaryId:e.id},g=!0,h=t.shared;break}}catch(e){console.log({e:e,message:"fetching glossaries failed"})}let _;o===wb.WRITE?"EN"===d&&f.regionalVariant&&["EN-GB","EN-US"].includes(f.regionalVariant.toUpperCase())&&(_=f.regionalVariant):_=f.regionalVariant;const m=Object.assign(Object.assign(Object.assign({mode:o,sourceLang:d,targetLang:e.isWriteRequest?d:f.langCode,textType:e.textType},e.formality&&{formality:e.formality}),p&&{termbase:p}),_&&{regionalVariant:_}),v=null!=t?t:$b;let T=(yield v(m,u)).result;const y=Ub(T);e.autoImproveForTranslate&&o===wb.TRANSLATE&&(T=yield Vb(e,m,T));const E=T.translations.map(((e,t)=>{var n,r;return`${u[t].prefix}${null!==(r=null===(n=e.beams[0])||void 0===n?void 0:n.sentences[0].text)&&void 0!==r?r:""}`})),S=c.map((e=>e.map((e=>E[e]))));return Object.assign({processedText:S,result:T},g&&{glossaryTrackingInfo:{isGlossaryEnabled:!!p,isGlossaryShared:h,didGlossaryChangeTranslation:y}})})),Gb=e=>r(void 0,void 0,void 0,(function*(){const t=[],n=[],r=e.isWriteRequest?wb.WRITE:wb.TRANSLATE,o=yield Nb({texts:e.sourceTexts,mode:r,textType:e.textType});for(const e of o.result.texts){const r=[];for(const t of e.chunks)for(const e of t.sentences)n.push(e),r.push(n.length-1);t.push(r)}return{sentences:n,textLinesComponents:t,sourceLang:o.result.lang.detected}})),Vb=(e,t,n)=>r(void 0,void 0,void 0,(function*(){const r=Jv(e.targetLangCode).toUpperCase();if(Jv(n.source_lang).toUpperCase()===r&&function(e){try{return e.replace(/[^\p{L}]/gu,"").length}catch(t){return e.replace(/[^a-zA-Z]/g,"").length}}(e.sourceTexts.join(""))>4&&(o=r,b.includes(Jv(o).toUpperCase()))){return(yield Rb(Object.assign(Object.assign({},t),{mode:wb.WRITE}))).result}var o;return n})),$b=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=t.map(((e,n)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:n<t.length-1?[t[n+1].text]:[],raw_en_context_before:n>0?[t[n-1].text]:[],sentences:[Object.assign(Object.assign({},e),{id:n+1})]}))),r=Object.assign(Object.assign({},e),{jobs:n});return yield Rb(r)}));function Fb(){return r(this,void 0,void 0,(function*(){if(!(yield lI()).access_token)return;const e=jy("getCurrentAccount",{v:"20180814"},_()),t=yield uA.fetch("https://w.deepl.com/account?request_type=jsonrpc&il=en&method=getCurrentAccount",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(e),credentials:"omit"}),n=(yield t.json()).result;return wI(n),n}))}const jb=20;function Wb(e){return r(this,void 0,void 0,(function*(){if(!(yield lI()).access_token)throw Error("User is not authenticated");let t;try{const e=yield YS();t=null==e?void 0:e.imageBlob;const n=null==e?void 0:e.imageCachedAt;if(t&&n){const e=Date.now()-n;if(e/6e4<jb){return{imageObjectURL:yield qb(t),imageBlob:t}}}}catch(e){console.error("Error getting cached custom logo",e)}try{const t=`https://w.deepl.com/organization/logo/${e}`,n=yield uA.fetch(t,{method:"GET",credentials:"omit"}),r=yield n.blob();yield createImageBitmap(r);const o=yield qb(r);return yield zS(r),{imageObjectURL:o,imageBlob:r}}catch(e){if(t){return{imageObjectURL:yield qb(t),imageBlob:t}}throw e}}))}function qb(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=()=>n(r.error),r.readAsDataURL(e)}))}))}const Bb=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=yield AI();return`${cT(n,e)?"https://oneshot-pro.www.deepl.com/v1":"https://oneshot-free.www.deepl.com/v1"}/${"translate"===t?"translate":"write"}`})),Hb=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=yield uA.fetch(t,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),r=yield n.json();if(200===n.status)return r;if(451===n.status)throw new RT;const o=r;throw aT(o),new Error(JSON.stringify(o.errors))})),Jb=e=>Xb(e,Qb),zb=e=>Xb(e,Zb),Yb=(e,t,n)=>{const r=!!e.glossary_id,o=t.some((e=>{var t,n;return null!==(n=null===(t=e.glossary_highlights)||void 0===t?void 0:t.some((e=>e.replacement.source!==e.replacement.target)))&&void 0!==n&&n}));return{isGlossaryEnabled:r,didGlossaryChangeTranslation:o,isGlossaryShared:n}},Xb=(e,t)=>r(void 0,void 0,void 0,(function*(){if(0===e.sourceTexts.length)throw new Error("No text to translate");yield CI(),yield kb(e);const n=yield Kb(e);let o=Promise.resolve(!1);var i;n.glossary_id&&(i=n.glossary_id,o=r(void 0,void 0,void 0,(function*(){var e;try{const[t]=yield mR(),n=Db(i,t);return null!==(e=null==n?void 0:n.shared)&&void 0!==e&&e}catch(e){return aT({e:e,message:"fetching glossaries failed"}),!1}})));const a=yield t(n);return{translations:a,glossaryTrackingInfo:Yb(n,a,yield o)}})),Kb=e=>r(void 0,void 0,void 0,(function*(){const{activeTermbaseId:t,isLoggedIn:n,isGlossaryEnabled:r,hasTermbaseService:o}=yield nI([mo.glossary.activeTermbaseId,mo.auth.isLoggedIn,mo.glossary.isGlossaryEnabled,mo.glossary.hasTermbaseService]);let i,a,s=yield NI();uT({isLoggedIn:n,hasTermbaseService:o})&&t&&r&&(i=t);try{a=yield wo({isSnakeCase:!0})}catch(e){console.error(e)}return{text:e.sourceTexts,target_lang:Kv({lang:e.targetLangCode,languageList:s}),glossary_id:null!=i?i:void 0,source_lang:e.sourceLang,formality:e.formality,usage_type:e.usageType,language_model:e.language_model,app_information:a}})),Qb=e=>r(void 0,void 0,void 0,(function*(){return yield ew(e)})),Zb=e=>r(void 0,void 0,void 0,(function*(){const t=e.text,n=fA(t,24576,(e=>JSON.stringify(e)),100).map((t=>Object.assign(Object.assign({},e),{text:t})));if(1===n.length)return yield ew(n[0]);return(yield Promise.all(n.map(ew))).flat()})),ew=e=>r(void 0,void 0,void 0,(function*(){const t=yield Bb(Yn.TRANSLATOR,"translate");return(yield Hb(e,t)).translations})),tw=(e,t=()=>!1)=>{if(e.length>100)return zb;return t(e)?zb:Jb},nw=e=>r(void 0,[e],void 0,(function*({sourceTexts:e,selectedTargetLanguage:t,sourceLanguage:n,formality:r,isFullPageTranslation:o}){const i=o?_o:fo,a=yield MR(),s=LS(a,wS),l=o&&!s?"classic":void 0,c=tw(e),u=yield c({sourceTexts:e,targetLangCode:t,sourceLang:n,formality:r,usageType:i,language_model:l});return{glossaryTrackingInfo:u.glossaryTrackingInfo,processedTranslation:u.translations.map((e=>({text:e.text,detected_source_language:e.detected_source_language})))}})),rw=e=>r(void 0,[e],void 0,(function*({payload:e}){yield oI();const t=yield nI(["selectedTargetLanguage","installationId"]),n=new Date;let r;const o=e.texts,i=o.reduce(((e,t)=>e+t.length),0);try{r=yield nw({sourceTexts:o,selectedTargetLanguage:t.selectedTargetLanguage,sourceLanguage:e.sourceLang,isFullPageTranslation:e.isFullPageTranslation})}catch(n){try{n instanceof Error&&Jy({errorCode:n.name,errorMessage:n.message,domainName:e.domainName,targetLang:t.selectedTargetLanguage,websiteLanguage:e.sourceLang,trigger:e.trigger,characterCount:i})}catch(e){console.log(e)}throw n}const a=(new Date).getTime()-n.getTime();QR();try{By({installationId:t.installationId,trigger:e.trigger,websiteLanguage:e.sourceLang,targetLanguage:t.selectedTargetLanguage,characterCount:i,translationPerformance:{isFirstRequest:e.isFirstTime,processingTimeInMs:a},domainName:e.domainName,glossaryTrackingInfo:r.glossaryTrackingInfo})}catch(e){console.error(e)}return r.processedTranslation.map((e=>e.text))})),ow=e=>r(void 0,[e],void 0,(function*({payload:{message:e,messageLang:t,domainName:n}}){yield oI();const r=yield nI(["selectedTargetLanguage","installationId"]);let o;try{o=yield nw({sourceTexts:[e],selectedTargetLanguage:r.selectedTargetLanguage,sourceLanguage:t})}catch(o){throw TA((()=>pE({errorCode:o.name,domainName:n,targetLang:r.selectedTargetLanguage,messageLang:t,messageLength:e.length}))),o}return QR(),TA((()=>By({installationId:r.installationId,trigger:k,websiteLanguage:t,targetLanguage:r.selectedTargetLanguage,characterCount:e.length,domainName:n,nicheIntegration:Nn,glossaryTrackingInfo:o.glossaryTrackingInfo}))),o.processedTranslation})),iw=e=>r(void 0,[e],void 0,(function*({payload:{domainName:e,messageLang:t,message:n}}){yield oI();const r=yield nI(["selectedTargetLanguage","installationId"]);let o;try{o=yield nw({sourceTexts:[n],selectedTargetLanguage:r.selectedTargetLanguage,sourceLanguage:t})}catch(o){throw o instanceof Error&&TA((()=>uE({errorCode:o.name,domainName:e,targetLang:r.selectedTargetLanguage,messageLang:t,messageLength:n.length,numberOfLanguages:1,numberOfMessages:1,translator:zn}))),o}return QR(),TA((()=>cE({messageLang:t,targetLang:r.selectedTargetLanguage,messageLength:n.length,numberOfLanguages:1,numberOfMessages:1,translator:zn}))),TA((()=>By({installationId:r.installationId,trigger:k,websiteLanguage:t,targetLanguage:r.selectedTargetLanguage,characterCount:n.length,domainName:e,nicheIntegration:In,glossaryTrackingInfo:o.glossaryTrackingInfo}))),o.processedTranslation})),aw=e=>r(void 0,[e],void 0,(function*({payload:{domainName:e,messageLang:t,messages:n,detectedLanguages:r}}){yield oI();const o=yield nI(["selectedTargetLanguage","installationId"]);let i;try{i=yield nw({sourceTexts:n,selectedTargetLanguage:o.selectedTargetLanguage,sourceLanguage:t})}catch(i){if(i instanceof Error)try{uE({errorCode:i.name,domainName:e,targetLang:o.selectedTargetLanguage,messageLang:t,messageLength:n.reduce(((e,t)=>e+t.length),0),numberOfLanguages:null==r?void 0:r.length,numberOfMessages:n.length,translator:Jn})}catch(e){console.log(e)}throw i}QR();try{cE({messageLang:t,targetLang:o.selectedTargetLanguage,messageLength:n.reduce(((e,t)=>e+t.length),0),numberOfLanguages:null==r?void 0:r.length,numberOfMessages:n.length,translator:Jn}),By({installationId:o.installationId,trigger:k,websiteLanguage:t,targetLanguage:o.selectedTargetLanguage,characterCount:n.reduce(((e,t)=>e+t.length),0),domainName:e,nicheIntegration:In})}catch(e){console.error(e)}return[{detected_source_language:i.processedTranslation[0].detected_source_language,texts:i.processedTranslation.map((e=>e.text))}]})),sw=e=>r(void 0,[e],void 0,(function*({payload:{domainName:e,message:t,messageLang:n}}){yield oI();const{selectedTargetLanguage:r,installationId:o}=yield nI(["selectedTargetLanguage","installationId"]),i=t.replace(/\n/g,"<br>");let a;try{a=yield nw({sourceTexts:[i],selectedTargetLanguage:r,sourceLanguage:n})}catch(o){throw o instanceof Error&&TA((()=>dE({errorCode:o.name,domainName:e,targetLang:r,messageLang:n,messageLength:t.length}))),o}QR(),TA((()=>By({installationId:o,trigger:k,websiteLanguage:n,targetLanguage:r,characterCount:t.length,domainName:e,nicheIntegration:An})));return a.processedTranslation[0].text.replace(/<br\s*\/?>/gi,"\n")})),lw=e=>r(void 0,[e],void 0,(function*({payload:{domainName:e,message:t,messageLang:n,trigger:r}}){yield oI();const o=yield nI(["selectedTargetLanguage","installationId"]);let i;try{i=yield nw({sourceTexts:[t],selectedTargetLanguage:o.selectedTargetLanguage})}catch(i){throw i instanceof Error&&TA((()=>Jy({errorCode:i.name,errorMessage:i.message,domainName:e,targetLang:o.selectedTargetLanguage,websiteLanguage:n,characterCount:t.length,trigger:r,nicheIntegration:On}))),i}return QR(),TA((()=>By({installationId:o.installationId,trigger:r||k,websiteLanguage:n,targetLanguage:o.selectedTargetLanguage,characterCount:t.length,domainName:e,nicheIntegration:On,glossaryTrackingInfo:i.glossaryTrackingInfo}))),i.processedTranslation})),cw=e=>r(void 0,[e],void 0,(function*({payload:{domainName:e,requests:t,sourceLang:n,targetLang:r}}){yield oI();const o=yield nI(["selectedTargetLanguage","installationId"]),i=bn,a=t.reduce(((e,t)=>e+t.text.length),0);let s;try{s=yield nw({sourceTexts:t.map((e=>e.text))||[],selectedTargetLanguage:r,sourceLanguage:n})}catch(t){throw t instanceof Error&&TA((()=>Jy({errorCode:t.name,errorMessage:t.message,domainName:e,targetLang:r,trigger:P,characterCount:a}))),t}QR(),yL();const l=s.processedTranslation[0].detected_source_language;TA((()=>By({installationId:o.installationId,trigger:k,websiteLanguage:l,targetLanguage:r,characterCount:a,domainName:e,nicheIntegration:i,glossaryTrackingInfo:s.glossaryTrackingInfo})));const c=s.processedTranslation.map((e=>e.text));return[{detected_source_language:l,text:c.join(""),texts:c}]})),uw=e=>r(void 0,void 0,void 0,(function*(){if(0===e.sourceTexts.length)throw new Error("No text to translate");yield CI(),yield kb(Object.assign(Object.assign({},e),{isWriteRequest:!0}));const t=yield dw(e);return{improvements:yield pw(t)}})),dw=e=>r(void 0,void 0,void 0,(function*(){let t;try{t=yield wo({isSnakeCase:!0})}catch(e){console.error(e)}return{text:e.sourceTexts,requested_language:e.sourceLangCode?Kv({lang:e.sourceLangCode,direction:"source"}):void 0,style_variant:e.style_variant,app_information:t,corrections_only:e.correctionsOnly,allow_partial_failures:e.allowPartialFailures}})),pw=e=>r(void 0,void 0,void 0,(function*(){const t=yield Bb(Yn.WRITE,"write");return(yield Hb(e,t)).improvements})),gw=(e,...t)=>r(void 0,[e,...t],void 0,(function*(e,t=void 0,n=void 0,r=void 0){if(0===e.length)return{processedImprovements:[]};return{processedImprovements:(yield uw({sourceTexts:e,sourceLangCode:t||void 0,correctionsOnly:n,allowPartialFailures:r})).improvements.map((e=>({text:e.text,detected_source_language:e.detected_source_language,error:e.error})))}})),hw=e=>r(void 0,[e],void 0,(function*({payload:{requests:e,platformBehavior:t,skipDapReporting:n,sourceLang:r}}){yield oI();const o=t||yn,i=t!==yn?Fr:Vr;let a;try{a=yield gw(e.map((e=>e.text)),r)}catch(t){throw TA((()=>jE(ar,{lang:r,sourceLength:e.reduce(((e,t)=>e+t.text.length),0),targetLength:0,nicheIntegration:o,error:t.name,trigger:i}))),t}return QR(),t===bn?yL():t===wn&&SL(),!0!==n&&TA((()=>jE(Zn,{lang:r,sourceLength:e.reduce(((e,t)=>e+t.text.length),0),targetLength:a.processedImprovements.reduce(((e,t)=>e+t.text.length),0),nicheIntegration:o,trigger:i}))),[{detected_source_language:a.processedImprovements[0].detected_source_language,text:a.processedImprovements.map((e=>e.text)).join(""),texts:a.processedImprovements.map((e=>e.text))}]}));var fw,_w,mw={},vw={},Tw={},yw={};function Ew(){return fw||(fw=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Log=e.LogLevel=void 0;function t(e){return e.unshift("[Statsig]"),e}e.LogLevel={None:0,Error:1,Warn:2,Info:3,Debug:4};class n{static info(...r){n.level>=e.LogLevel.Info&&console.info("  INFO ",...t(r))}static debug(...r){n.level>=e.LogLevel.Debug&&console.debug(" DEBUG ",...t(r))}static warn(...r){n.level>=e.LogLevel.Warn&&console.warn("  WARN ",...t(r))}static error(...r){n.level>=e.LogLevel.Error&&console.error(" ERROR ",...t(r))}}e.Log=n,n.level=e.LogLevel.Warn}(yw)),yw}function Sw(){return _w||(_w=1,function(e){var t,n,r;Object.defineProperty(e,"__esModule",{value:!0}),e._getInstance=e._getStatsigGlobalFlag=e._getStatsigGlobal=void 0;const o=Ew();e._getStatsigGlobal=()=>{try{return"undefined"!=typeof __STATSIG__?__STATSIG__:c}catch(e){return c}};e._getStatsigGlobalFlag=t=>(0,e._getStatsigGlobal)()[t];e._getInstance=t=>{const n=(0,e._getStatsigGlobal)();return t?n.instances&&n.instances[t]:(n.instances&&Object.keys(n.instances).length>1&&o.Log.warn("Call made to Statsig global instance without an SDK key but there is more than one client instance. If you are using mulitple clients, please specify the SDK key."),n.firstInstance)};const i="__STATSIG__",a="undefined"!=typeof window?window:{},s=void 0!==Ym?Ym:{},l="undefined"!=typeof globalThis?globalThis:{},c=null!==(r=null!==(n=null!==(t=a[i])&&void 0!==t?t:s[i])&&void 0!==n?n:l[i])&&void 0!==r?r:{instance:e._getInstance};a[i]=c,s[i]=c,l[i]=c}(Tw)),Tw}var Iw,Aw={};function bw(){return Iw||(Iw=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Diagnostics=void 0;const t=new Map,n="start",r="end",o="statsig::diagnostics";function i(e,t,n,r){return Object.assign({key:n,action:t,step:r,timestamp:Date.now()},e)}function a(e,n){var r;const o=null!==(r=t.get(e))&&void 0!==r?r:[];o.push(n),t.set(e,o)}function s(e,t){if(t in e)return e[t]}e.Diagnostics={_getMarkers:e=>t.get(e),_markInitOverallStart:e=>{a(e,i({},n,"overall"))},_markInitOverallEnd:(e,t,n)=>{a(e,i({success:t,error:t?void 0:{name:"InitializeError",message:"Failed to initialize"},evaluationDetails:n},r,"overall"))},_markInitNetworkReqStart:(e,t)=>{a(e,i(t,n,"initialize","network_request"))},_markInitNetworkReqEnd:(e,t)=>{a(e,i(t,r,"initialize","network_request"))},_markInitProcessStart:e=>{a(e,i({},n,"initialize","process"))},_markInitProcessEnd:(e,t)=>{a(e,i(t,r,"initialize","process"))},_clearMarkers:e=>{t.delete(e)},_formatError(e){if(e&&"object"==typeof e)return{code:s(e,"code"),name:s(e,"name"),message:s(e,"message")}},_getDiagnosticsData(t,n,r,o){var i;return{success:!0===(null==t?void 0:t.ok),statusCode:null==t?void 0:t.status,sdkRegion:null===(i=null==t?void 0:t.headers)||void 0===i?void 0:i.get("x-statsig-region"),isDelta:!0===r.includes('"is_delta":true')||void 0,attempt:n,error:e.Diagnostics._formatError(o)}},_enqueueDiagnosticsEvent(t,n,r,i){const a=e.Diagnostics._getMarkers(r);if(null==a||a.length<=0)return-1;const s=a[a.length-1].timestamp-a[0].timestamp;e.Diagnostics._clearMarkers(r);const l=function(e,t){const n={eventName:o,user:e,value:null,metadata:t,time:Date.now()};return n}(t,{context:"initialize",markers:a.slice(),statsigOptions:i});return n.enqueue(l),s}}}(Aw)),Aw}var ww,Ow,Nw,Rw={},Lw={},Pw={},Cw={};function xw(){if(ww)return Cw;return ww=1,Object.defineProperty(Cw,"__esModule",{value:!0}),Cw._isTypeMatch=Cw._typeOf=void 0,Cw._typeOf=function(e){return Array.isArray(e)?"array":typeof e},Cw._isTypeMatch=function(e,t){const n=e=>Array.isArray(e)?"array":null===e?"null":typeof e;return n(e)===n(t)},Cw}function kw(){return Ow||(Ow=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._getSortedObject=e._DJB2Object=e._DJB2=void 0;const t=xw();e._DJB2=e=>{let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t|=0}return String(t>>>0)};e._DJB2Object=(t,n)=>(0,e._DJB2)(JSON.stringify((0,e._getSortedObject)(t,n)));e._getSortedObject=(n,r)=>{if(null==n)return null;const o=Object.keys(n).sort(),i={};return o.forEach((o=>{const a=n[o];0!==r&&"object"===(0,t._typeOf)(a)?i[o]=(0,e._getSortedObject)(a,null!=r?r-1:r):i[o]=a})),i}}(Pw)),Pw}function Dw(){if(Nw)return Lw;Nw=1,Object.defineProperty(Lw,"__esModule",{value:!0}),Lw._getStorageKey=Lw._getUserStorageKey=void 0;const e=kw();function t(t,n,r){var o;if(r)return r(t,n);const i=n&&n.customIDs?n.customIDs:{},a=[`uid:${null!==(o=null==n?void 0:n.userID)&&void 0!==o?o:""}`,`cids:${Object.keys(i).sort(((e,t)=>e.localeCompare(t))).map((e=>`${e}-${i[e]}`)).join(",")}`,`k:${t}`];return(0,e._DJB2)(a.join("|"))}return Lw._getUserStorageKey=t,Lw._getStorageKey=function(n,r,o){return r?t(n,r,o):(0,e._DJB2)(`k:${n}`)},Lw}var Uw,Mw={};function Gw(){return Uw||(Uw=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NetworkParam=e.NetworkDefault=e.Endpoint=void 0,e.Endpoint={_initialize:"initialize",_rgstr:"rgstr",_download_config_specs:"download_config_specs"},e.NetworkDefault={[e.Endpoint._rgstr]:"https://prodregistryv2.org/v1",[e.Endpoint._initialize]:"https://featureassets.org/v1",[e.Endpoint._download_config_specs]:"https://api.statsigcdn.com/v1"},e.NetworkParam={EventCount:"ec",SdkKey:"k",SdkType:"st",SdkVersion:"sv",Time:"t",SessionID:"sid",StatsigEncoded:"se",IsGzipped:"gz"}}(Mw)),Mw}var Vw,$w={};function Fw(){return Vw||(Vw=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._getUnloadEvent=e._getCurrentPageUrlSafe=e._addDocumentEventListenerSafe=e._addWindowEventListenerSafe=e._isServerEnv=e._getDocumentSafe=e._getWindowSafe=void 0;e._getWindowSafe=()=>"undefined"!=typeof window?window:null;e._getDocumentSafe=()=>{var t;const n=(0,e._getWindowSafe)();return null!==(t=null==n?void 0:n.document)&&void 0!==t?t:null};e._isServerEnv=()=>{if(null!==(0,e._getDocumentSafe)())return!1;const t="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node;return"string"==typeof EdgeRuntime||t};e._addWindowEventListenerSafe=(t,n)=>{const r=(0,e._getWindowSafe)();"function"==typeof(null==r?void 0:r.addEventListener)&&r.addEventListener(t,n)};e._addDocumentEventListenerSafe=(t,n)=>{const r=(0,e._getDocumentSafe)();"function"==typeof(null==r?void 0:r.addEventListener)&&r.addEventListener(t,n)};e._getCurrentPageUrlSafe=()=>{var t;try{return null===(t=(0,e._getWindowSafe)())||void 0===t?void 0:t.location.href.split(/[?#]/)[0]}catch(e){return}};e._getUnloadEvent=()=>{const t=(0,e._getWindowSafe)();if(!t)return"beforeunload";return"onpagehide"in t?"pagehide":"beforeunload"}}($w)),$w}var jw,Ww={};function qw(){if(jw)return Ww;jw=1,Object.defineProperty(Ww,"__esModule",{value:!0}),Ww._createLayerParameterExposure=Ww._createConfigExposure=Ww._mapExposures=Ww._createGateExposure=Ww._isExposureEvent=void 0;const e="statsig::config_exposure",t="statsig::gate_exposure",n="statsig::layer_exposure",r=(e,t,n,r,o)=>(n.bootstrapMetadata&&(r.bootstrapMetadata=n.bootstrapMetadata),{eventName:e,user:t,value:null,metadata:i(n,r),secondaryExposures:o,time:Date.now()});Ww._isExposureEvent=({eventName:r})=>r===t||r===e||r===n;function o(e,t){return e.map((e=>"string"==typeof e?(null!=t?t:{})[e]:e)).filter((e=>null!=e))}Ww._createGateExposure=(e,n,i)=>{var a,s,l;const c={gate:n.name,gateValue:String(n.value),ruleID:n.ruleID};return null!=(null===(a=n.__evaluation)||void 0===a?void 0:a.version)&&(c.configVersion=n.__evaluation.version),r(t,e,n.details,c,o(null!==(l=null===(s=n.__evaluation)||void 0===s?void 0:s.secondary_exposures)&&void 0!==l?l:[],i))},Ww._mapExposures=o;Ww._createConfigExposure=(t,n,i)=>{var a,s,l,c;const u={config:n.name,ruleID:n.ruleID};return null!=(null===(a=n.__evaluation)||void 0===a?void 0:a.version)&&(u.configVersion=n.__evaluation.version),null!=(null===(s=n.__evaluation)||void 0===s?void 0:s.passed)&&(u.rulePassed=String(n.__evaluation.passed)),r(e,t,n.details,u,o(null!==(c=null===(l=n.__evaluation)||void 0===l?void 0:l.secondary_exposures)&&void 0!==c?c:[],i))};Ww._createLayerParameterExposure=(e,t,i,a)=>{var s,l,c,u,d,p,g;const h=t.__evaluation,f=!0===(null===(s=null==h?void 0:h.explicit_parameters)||void 0===s?void 0:s.includes(i));let _="",m=null!==(l=null==h?void 0:h.undelegated_secondary_exposures)&&void 0!==l?l:[];f&&(_=null!==(c=h.allocated_experiment_name)&&void 0!==c?c:"",m=null!==(u=h.secondary_exposures)&&void 0!==u?u:[]);const v=null===(d=t.__evaluation)||void 0===d?void 0:d.parameter_rule_ids,T={config:t.name,parameterName:i,ruleID:null!==(p=null==v?void 0:v[i])&&void 0!==p?p:t.ruleID,allocatedExperiment:_,isExplicitParameter:String(f)};return null!=(null===(g=t.__evaluation)||void 0===g?void 0:g.version)&&(T.configVersion=t.__evaluation.version),r(n,e,t.details,T,o(m,a))};const i=(e,t)=>(t.reason=e.reason,e.lcut&&(t.lcut=String(e.lcut)),e.receivedAt&&(t.receivedAt=String(e.receivedAt)),t);return Ww}var Bw,Hw={};function Jw(){return Bw||(Bw=1,Object.defineProperty(Hw,"__esModule",{value:!0}),Hw.LoggingEnabledOption=Hw.LogEventCompressionMode=void 0,Hw.LogEventCompressionMode={Disabled:"d",Enabled:"e",Forced:"f"},Hw.LoggingEnabledOption={disabled:"disabled",browserOnly:"browser-only",always:"always"}),Hw}var zw,Yw={};function Xw(){return zw||(zw=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._setObjectInStorage=e._getObjectFromStorage=e.Storage=void 0;const t=Ew(),n=Fw(),r={},o={isReady:()=>!0,isReadyResolver:()=>null,getProviderName:()=>"InMemory",getItem:e=>r[e]?r[e]:null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]},getAllKeys:()=>Object.keys(r)};let i=null;try{const e=(0,n._getWindowSafe)();e&&e.localStorage&&"function"==typeof e.localStorage.getItem&&(i={isReady:()=>!0,isReadyResolver:()=>null,getProviderName:()=>"LocalStorage",getItem:t=>e.localStorage.getItem(t),setItem:(t,n)=>e.localStorage.setItem(t,n),removeItem:t=>e.localStorage.removeItem(t),getAllKeys:()=>Object.keys(e.localStorage)})}catch(e){t.Log.warn("Failed to setup localStorageProvider.")}let a=null!=i?i:o,s=a;function l(t){try{return t()}catch(t){if(t instanceof Error&&"SecurityError"===t.name)return e.Storage._setProvider(o),null;throw t}}e.Storage={isReady:()=>s.isReady(),isReadyResolver:()=>s.isReadyResolver(),getProviderName:()=>s.getProviderName(),getItem:e=>l((()=>s.getItem(e))),setItem:(e,t)=>l((()=>s.setItem(e,t))),removeItem:e=>s.removeItem(e),getAllKeys:()=>s.getAllKeys(),_setProvider:e=>{a=e,s=e},_setDisabled:e=>{s=e?o:a}},e._getObjectFromStorage=function(t){const n=e.Storage.getItem(t);return JSON.parse(null!=n?n:"null")},e._setObjectInStorage=function(t,n){e.Storage.setItem(t,JSON.stringify(n))}}(Yw)),Yw}var Kw,Qw={};function Zw(){if(Kw)return Qw;Kw=1,Object.defineProperty(Qw,"__esModule",{value:!0}),Qw.UrlConfiguration=void 0;const e=kw(),t=Gw(),n={[t.Endpoint._initialize]:"i",[t.Endpoint._rgstr]:"e",[t.Endpoint._download_config_specs]:"d"};return Qw.UrlConfiguration=class{constructor(e,r,o,i){this.customUrl=null,this.fallbackUrls=null,this.endpoint=e,this.endpointDnsKey=n[e],r&&(this.customUrl=r),!r&&o&&(this.customUrl=o.endsWith("/")?`${o}${e}`:`${o}/${e}`),i&&(this.fallbackUrls=i);const a=t.NetworkDefault[e];this.defaultUrl=`${a}/${e}`}getUrl(){var e;return null!==(e=this.customUrl)&&void 0!==e?e:this.defaultUrl}getChecksum(){var t;const n=(null!==(t=this.fallbackUrls)&&void 0!==t?t:[]).sort().join(",");return(0,e._DJB2)(this.customUrl+n)}},Qw}var eO,tO,nO={};function rO(){return eO||(eO=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._notifyVisibilityChanged=e._subscribeToVisiblityChanged=e._isUnloading=e._isCurrentlyVisible=void 0;const t=Fw(),n="foreground",r="background",o=[];let i=n,a=!1;e._isCurrentlyVisible=()=>i===n;e._isUnloading=()=>a;e._subscribeToVisiblityChanged=e=>{o.unshift(e)};e._notifyVisibilityChanged=e=>{e!==i&&(i=e,o.forEach((t=>t(e))))},(0,t._addWindowEventListenerSafe)("focus",(()=>{a=!1,(0,e._notifyVisibilityChanged)(n)})),(0,t._addWindowEventListenerSafe)("blur",(()=>(0,e._notifyVisibilityChanged)(r))),(0,t._addDocumentEventListenerSafe)("visibilitychange",(()=>{(0,e._notifyVisibilityChanged)("visible"===document.visibilityState?n:r)})),(0,t._addWindowEventListenerSafe)((0,t._getUnloadEvent)(),(()=>{a=!0,(0,e._notifyVisibilityChanged)(r)}))}(nO)),nO}function oO(){if(tO)return Rw;tO=1;var e=Rw.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(Rw,"__esModule",{value:!0}),Rw.EventLogger=void 0;const t=Dw(),n=kw(),r=Ew(),o=Gw(),i=Fw(),a=qw(),s=Jw(),l=Xw(),c=Zw(),u=rO(),d={};return Rw.EventLogger=class p{static _safeFlushAndForget(e){var t;null===(t=d[e])||void 0===t||t.flush().catch((()=>{}))}static _safeRetryFailedLogs(e){var t;null===(t=d[e])||void 0===t||t._retryFailedLogs()}constructor(e,t,n,i){var a,l;this._sdkKey=e,this._emitter=t,this._network=n,this._options=i,this._queue=[],this._lastExposureTimeMap={},this._nonExposedChecks={},this._hasRunQuickFlush=!1,this._creationTime=Date.now(),this._loggingEnabled=null!==(a=null==i?void 0:i.loggingEnabled)&&void 0!==a?a:!0===(null==i?void 0:i.disableLogging)?s.LoggingEnabledOption.disabled:s.LoggingEnabledOption.browserOnly,(null==i?void 0:i.loggingEnabled)&&void 0!==i.disableLogging&&r.Log.warn("Detected both loggingEnabled and disableLogging options. loggingEnabled takes precedence - please remove disableLogging."),this._maxQueueSize=null!==(l=null==i?void 0:i.loggingBufferMaxSize)&&void 0!==l?l:100;const u=null==i?void 0:i.networkConfig;this._logEventUrlConfig=new c.UrlConfiguration(o.Endpoint._rgstr,null==u?void 0:u.logEventUrl,null==u?void 0:u.api,null==u?void 0:u.logEventFallbackUrls)}setLogEventCompressionMode(e){this._network.setLogEventCompressionMode(e)}setLoggingEnabled(e){if("disabled"===this._loggingEnabled&&"disabled"!==e){const e=this._getStorageKey(),t=(0,l._getObjectFromStorage)(e);t&&this._queue.push(...t),l.Storage.removeItem(e)}this._loggingEnabled=e}enqueue(e){this._shouldLogEvent(e)&&(this._normalizeAndAppendEvent(e),this._quickFlushIfNeeded(),this._queue.length>this._maxQueueSize&&p._safeFlushAndForget(this._sdkKey))}incrementNonExposureCount(e){var t;const n=null!==(t=this._nonExposedChecks[e])&&void 0!==t?t:0;this._nonExposedChecks[e]=n+1}reset(){this.flush().catch((()=>{})),this._lastExposureTimeMap={}}start(){var e;const t=(0,i._isServerEnv)();t&&"always"!==(null===(e=this._options)||void 0===e?void 0:e.loggingEnabled)||(d[this._sdkKey]=this,t||(0,u._subscribeToVisiblityChanged)((e=>{"background"===e?p._safeFlushAndForget(this._sdkKey):"foreground"===e&&p._safeRetryFailedLogs(this._sdkKey)})),this._retryFailedLogs(),this._startBackgroundFlushInterval())}stop(){return e(this,void 0,void 0,(function*(){this._flushIntervalId&&(clearInterval(this._flushIntervalId),this._flushIntervalId=null),delete d[this._sdkKey],yield this.flush()}))}flush(){return e(this,void 0,void 0,(function*(){if(this._appendAndResetNonExposedChecks(),0===this._queue.length)return;const e=this._queue;this._queue=[],yield this._sendEvents(e)}))}_quickFlushIfNeeded(){this._hasRunQuickFlush||(this._hasRunQuickFlush=!0,Date.now()-this._creationTime>200||setTimeout((()=>p._safeFlushAndForget(this._sdkKey)),200))}_shouldLogEvent(e){var n;if("always"!==(null===(n=this._options)||void 0===n?void 0:n.loggingEnabled)&&(0,i._isServerEnv)())return!1;if(!(0,a._isExposureEvent)(e))return!0;const r=e.user?e.user:{statsigEnvironment:void 0},o=(0,t._getUserStorageKey)(this._sdkKey,r),s=e.metadata?e.metadata:{},l=[e.eventName,o,s.gate,s.config,s.ruleID,s.allocatedExperiment,s.parameterName,String(s.isExplicitParameter),s.reason].join("|"),c=this._lastExposureTimeMap[l],u=Date.now();return!(c&&u-c<6e5)&&(Object.keys(this._lastExposureTimeMap).length>1e3&&(this._lastExposureTimeMap={}),this._lastExposureTimeMap[l]=u,!0)}_sendEvents(t){return e(this,void 0,void 0,(function*(){var e,n;if("disabled"===this._loggingEnabled)return this._saveFailedLogsToStorage(t),!1;try{const o=(0,u._isUnloading)()&&this._network.isBeaconSupported()&&null==(null===(n=null===(e=this._options)||void 0===e?void 0:e.networkConfig)||void 0===n?void 0:n.networkOverrideFunc);this._emitter({name:"pre_logs_flushed",events:t});return(o?this._sendEventsViaBeacon(t):yield this._sendEventsViaPost(t)).success?(this._emitter({name:"logs_flushed",events:t}),!0):(r.Log.warn("Failed to flush events."),this._saveFailedLogsToStorage(t),!1)}catch(e){return r.Log.warn("Failed to flush events."),!1}}))}_sendEventsViaPost(t){return e(this,void 0,void 0,(function*(){var e;const n=yield this._network.post(this._getRequestData(t)),r=null!==(e=null==n?void 0:n.code)&&void 0!==e?e:-1;return{success:r>=200&&r<300}}))}_sendEventsViaBeacon(e){return{success:this._network.beacon(this._getRequestData(e))}}_getRequestData(e){return{sdkKey:this._sdkKey,data:{events:e},urlConfig:this._logEventUrlConfig,retries:3,isCompressable:!0,params:{[o.NetworkParam.EventCount]:String(e.length)},credentials:"same-origin"}}_saveFailedLogsToStorage(e){for(;e.length>500;)e.shift();const t=this._getStorageKey();try{const n=this._getFailedLogsFromStorage(t);(0,l._setObjectInStorage)(t,[...n,...e])}catch(e){r.Log.warn("Unable to save failed logs to storage")}}_getFailedLogsFromStorage(e){let t=[];try{const n=(0,l._getObjectFromStorage)(e);return Array.isArray(n)&&(t=n),t}catch(e){return[]}}_retryFailedLogs(){const t=this._getStorageKey();(()=>e(this,void 0,void 0,(function*(){l.Storage.isReady()||(yield l.Storage.isReadyResolver());const e=(0,l._getObjectFromStorage)(t);e&&(l.Storage.removeItem(t),yield this._sendEvents(e))})))().catch((()=>{r.Log.warn("Failed to flush stored logs")}))}_getStorageKey(){return`statsig.failed_logs.${(0,n._DJB2)(this._sdkKey)}`}_normalizeAndAppendEvent(e){e.user&&(e.user=Object.assign({},e.user),delete e.user.privateAttributes);const t={},n=this._getCurrentPageUrl();n&&(t.statsigMetadata={currentPage:n});const o=Object.assign(Object.assign({},e),t);r.Log.debug("Enqueued Event:",o),this._queue.push(o)}_appendAndResetNonExposedChecks(){0!==Object.keys(this._nonExposedChecks).length&&(this._normalizeAndAppendEvent({eventName:"statsig::non_exposed_checks",user:null,time:Date.now(),metadata:{checks:Object.assign({},this._nonExposedChecks)}}),this._nonExposedChecks={})}_getCurrentPageUrl(){var e;if(!1!==(null===(e=this._options)||void 0===e?void 0:e.includeCurrentPageUrlWithEvents))return(0,i._getCurrentPageUrlSafe)()}_startBackgroundFlushInterval(){var e,t;const n=null!==(t=null===(e=this._options)||void 0===e?void 0:e.loggingIntervalMs)&&void 0!==t?t:1e4,r=setInterval((()=>{const e=d[this._sdkKey];e&&e._flushIntervalId===r?p._safeFlushAndForget(this._sdkKey):clearInterval(r)}),n);this._flushIntervalId=r}},Rw}var iO,aO={};function sO(){return iO||(iO=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigMetadataProvider=e.SDK_VERSION=void 0,e.SDK_VERSION="3.30.0";let t={sdkVersion:e.SDK_VERSION,sdkType:"js-mono"};e.StatsigMetadataProvider={get:()=>t,add:e=>{t=Object.assign(Object.assign({},t),e)}}}(aO)),aO}var lO,cO={};var uO,dO,pO={},gO={},hO={};function fO(){if(uO)return hO;return uO=1,Object.defineProperty(hO,"__esModule",{value:!0}),hO.getUUID=void 0,hO.getUUID=function(){if("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID();let e=(new Date).getTime(),t="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return`xxxxxxxx-xxxx-4xxx-${"89ab"[Math.floor(4*Math.random())]}xxx-xxxxxxxxxxxx`.replace(/[xy]/g,(n=>{let r=16*Math.random();return e>0?(r=(e+r)%16|0,e=Math.floor(e/16)):(r=(t+r)%16|0,t=Math.floor(t/16)),("x"===n?r:7&r|8).toString(16)}))},hO}function _O(){if(dO)return gO;dO=1,Object.defineProperty(gO,"__esModule",{value:!0}),gO.getCookieName=gO.StableID=void 0;const e=Dw(),t=Ew(),n=Fw(),r=Xw(),o=fO(),i={},a={},s={};function l(t){return`statsig.stable_id.${(0,e._getStorageKey)(t)}`}function c(e,n){const o=l(n);try{(0,r._setObjectInStorage)(o,e)}catch(e){t.Log.warn("Failed to save StableID to storage")}}function u(e,t){if(!a[t]||null==(0,n._getDocumentSafe)())return;const r=new Date;r.setFullYear(r.getFullYear()+1),document.cookie=`${d(t)}=${encodeURIComponent(e)}; expires=${r.toUTCString()}; path=/`}function d(t){return`statsig.stable_id.${(0,e._getStorageKey)(t)}`}return gO.StableID={cookiesEnabled:!1,randomID:Math.random().toString(36),get:e=>{if(s[e])return null;if(null!=i[e])return i[e];let t=null;return t=function(e){if(!a[e]||null==(0,n._getDocumentSafe)())return null;const t=document.cookie.split(";");for(const n of t){const[t,r]=n.trim().split("=");if(t===d(e))return decodeURIComponent(r)}return null}(e),null!=t?(i[e]=t,c(t,e),t):(t=function(e){const t=l(e);return(0,r._getObjectFromStorage)(t)}(e),null==t&&(t=(0,o.getUUID)()),c(t,e),u(t,e),i[e]=t,t)},setOverride:(e,t)=>{i[t]=e,c(e,t),u(e,t)},_setCookiesEnabled:(e,t)=>{a[e]=t},_setDisabled:(e,t)=>{s[e]=t}},gO.getCookieName=d,gO}var mO,vO={};function TO(){if(mO)return vO;mO=1,Object.defineProperty(vO,"__esModule",{value:!0}),vO._getFullUserHash=vO._normalizeUser=void 0;const e=kw(),t=Ew();return vO._normalizeUser=function(e,n,r){try{const t=JSON.parse(JSON.stringify(e));return null!=n&&null!=n.environment?t.statsigEnvironment=n.environment:null!=r&&(t.statsigEnvironment={tier:r}),t}catch(e){return t.Log.error("Failed to JSON.stringify user"),{statsigEnvironment:void 0}}},vO._getFullUserHash=function(t){return t?(0,e._DJB2Object)(t):null},vO}var yO,EO,SO={};function IO(){if(yO)return SO;yO=1,Object.defineProperty(SO,"__esModule",{value:!0}),SO._typedJsonParse=void 0;const e=Ew();return SO._typedJsonParse=function(t,n,r){try{const e=JSON.parse(t);if(e&&"object"==typeof e&&n in e)return e}catch(e){}return e.Log.error(`Failed to parse ${r}`),null},SO}function AO(){if(EO)return pO;EO=1;var e=pO.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(pO,"__esModule",{value:!0}),pO._makeDataAdapterResult=pO.DataAdapterCore=void 0;const t=Ew(),n=_O(),r=TO(),o=Xw(),i=IO();function a(e,t,n,o){return{source:e,data:t,receivedAt:Date.now(),stableID:n,fullUserHash:(0,r._getFullUserHash)(o)}}pO.DataAdapterCore=class{constructor(e,t){this._adapterName=e,this._cacheSuffix=t,this._options=null,this._sdkKey=null,this._cacheLimit=10,this._lastModifiedStoreKey=`statsig.last_modified_time.${t}`,this._inMemoryCache=new s}attach(e,t,n){this._sdkKey=e,this._options=t}getDataSync(e){const t=e&&(0,r._normalizeUser)(e,this._options),n=this._getCacheKey(t),o=this._inMemoryCache.get(n,t);if(o&&this._getIsCacheValueValid(o))return o;const i=this._loadFromCache(n);return i&&this._getIsCacheValueValid(i)?(this._inMemoryCache.add(n,i,this._cacheLimit),this._inMemoryCache.get(n,t)):null}setData(e,t){const n=t&&(0,r._normalizeUser)(t,this._options),o=this._getCacheKey(n);this._inMemoryCache.add(o,a("Bootstrap",e,null,n),this._cacheLimit)}_getIsCacheValueValid(e){return null==e.stableID||e.stableID===n.StableID.get(this._getSdkKey())}_getDataAsyncImpl(n,r,i){return e(this,void 0,void 0,(function*(){o.Storage.isReady()||(yield o.Storage.isReadyResolver());const e=null!=n?n:this.getDataSync(r),a=[this._fetchAndPrepFromNetwork(e,r,i)];return(null==i?void 0:i.timeoutMs)&&a.push(new Promise((e=>setTimeout(e,i.timeoutMs))).then((()=>(t.Log.debug("Fetching latest value timed out"),null)))),yield Promise.race(a)}))}_prefetchDataImpl(t,n){return e(this,void 0,void 0,(function*(){const e=t&&(0,r._normalizeUser)(t,this._options),o=this._getCacheKey(e),i=yield this._getDataAsyncImpl(null,e,n);i&&this._inMemoryCache.add(o,Object.assign(Object.assign({},i),{source:"Prefetch"}),this._cacheLimit)}))}_fetchAndPrepFromNetwork(r,o,s){return e(this,void 0,void 0,(function*(){var e;const l=null!==(e=null==r?void 0:r.data)&&void 0!==e?e:null,c=null!=r&&this._isCachedResultValidFor204(r,o),u=yield this._fetchFromNetwork(l,o,s,c);if(!u)return t.Log.debug("No response returned for latest value"),null;const d=(0,i._typedJsonParse)(u,"has_updates","Response"),p=this._getSdkKey(),g=n.StableID.get(p);let h=null;if(!0===(null==d?void 0:d.has_updates))h=a("Network",u,g,o);else{if(!l||!1!==(null==d?void 0:d.has_updates))return null;h=a("NetworkNotModified",l,g,o)}const f=this._getCacheKey(o);return this._inMemoryCache.add(f,h,this._cacheLimit),this._writeToCache(f,h),h}))}_getSdkKey(){return null!=this._sdkKey?this._sdkKey:(t.Log.error(`${this._adapterName} is not attached to a Client`),"")}_loadFromCache(e){var t;const n=null===(t=o.Storage.getItem)||void 0===t?void 0:t.call(o.Storage,e);if(null==n)return null;const r=(0,i._typedJsonParse)(n,"source","Cached Result");return r?Object.assign(Object.assign({},r),{source:"Cache"}):null}_writeToCache(e,t){const n=JSON.stringify(t);for(let t=0;t<8;t++)try{o.Storage.setItem(e,n);break}catch(t){if(!(t instanceof Error)||!t.toString().includes("QuotaExceededError")&&!t.toString().includes("QUOTA_EXCEEDED_ERR")||this._cacheLimit<=1)throw t;this._cacheLimit=Math.ceil(this._cacheLimit/2),this._runLocalStorageCacheEviction(e,this._cacheLimit-1)}this._runLocalStorageCacheEviction(e)}_runLocalStorageCacheEviction(e,t=this._cacheLimit){var n;const r=null!==(n=(0,o._getObjectFromStorage)(this._lastModifiedStoreKey))&&void 0!==n?n:{};r[e]=Date.now();const i=l(r,t);for(const e of i)delete r[e],o.Storage.removeItem(e);(0,o._setObjectInStorage)(this._lastModifiedStoreKey,r)}},pO._makeDataAdapterResult=a;class s{constructor(){this._data={}}get(e,n){var r;const o=this._data[e],i=null==o?void 0:o.stableID,a=null===(r=null==n?void 0:n.customIDs)||void 0===r?void 0:r.stableID;return a&&i&&a!==i?(t.Log.warn("'StatsigUser.customIDs.stableID' mismatch"),null):o}add(e,t,n){const r=l(this._data,n-1);for(const e of r)delete this._data[e];this._data[e]=t}merge(e){this._data=Object.assign(Object.assign({},this._data),e)}}function l(e,t){const n=Object.keys(e);return n.length<=t?[]:0===t?n:n.sort(((t,n)=>{const r=e[t],o=e[n];return"object"==typeof r&&"object"==typeof o?r.receivedAt-o.receivedAt:r-o})).slice(0,n.length-t)}return pO}var bO,wO={};var OO,NO,RO={},LO={};function PO(){if(OO)return LO;OO=1,Object.defineProperty(LO,"__esModule",{value:!0}),LO.SDKType=void 0;const e={};let t;return LO.SDKType={_get:n=>{var r;return(null!==(r=e[n])&&void 0!==r?r:"js-mono")+(null!=t?t:"")},_setClientType(t,n){e[t]=n},_setBindingType(e){t&&"-react"!==t||(t="-"+e)}},LO}function CO(){return NO||(NO=1,function(e){var t=RO.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorBoundary=e.EXCEPTION_ENDPOINT=void 0;const n=Ew(),r=PO(),o=sO();e.EXCEPTION_ENDPOINT="https://statsigapi.net/v1/sdk_exception";const i="[Statsig] UnknownError";function a(e){return e instanceof Error?e:"string"==typeof e?new Error(e):new Error("An unknown error occurred.")}function s(e){if(!e)return{};const t={};return Object.keys(e).forEach((n=>{const r=n,o=e[r];switch(typeof o){case"number":case"bigint":case"boolean":t[String(r)]=o;break;case"string":o.length<50?t[String(r)]=o:t[String(r)]="set";break;case"object":"environment"===r?t.environment=o:"networkConfig"===r?t.networkConfig=o:t[String(r)]=null!=o?"set":"unset"}})),t}e.ErrorBoundary=class{constructor(e,t,n,r){this._sdkKey=e,this._options=t,this._emitter=n,this._lastSeenError=r,this._seen=new Set}wrap(e,t){try{const n=e;(function(e){const t=new Set;let n=Object.getPrototypeOf(e);for(;n&&n!==Object.prototype;)Object.getOwnPropertyNames(n).filter((e=>"function"==typeof(null==n?void 0:n[e]))).forEach((e=>t.add(e))),n=Object.getPrototypeOf(n);return Array.from(t)})(n).forEach((r=>{const o=n[r];"$EB"in o||(n[r]=(...n)=>this._capture(t?`${t}:${r}`:r,(()=>o.apply(e,n))),n[r].$EB=!0)}))}catch(e){this._onError("eb:wrap",e)}}logError(e,t){this._onError(e,t)}getLastSeenErrorAndReset(){const e=this._lastSeenError;return this._lastSeenError=void 0,null!=e?e:null}attachErrorIfNoneExists(e){this._lastSeenError||(this._lastSeenError=a(e))}_capture(e,t){try{const n=t();return n&&n instanceof Promise?n.catch((t=>this._onError(e,t))):n}catch(t){return this._onError(e,t),null}}_onError(l,c){try{n.Log.warn(`Caught error in ${l}`,{error:c});const u=()=>t(this,void 0,void 0,(function*(){var t,n,u,d,p,g,h;const f=c||Error(i),_=f instanceof Error,m=_?f.name:"No Name",v=a(f);if(this._lastSeenError=v,this._seen.has(m))return;if(this._seen.add(m),null===(n=null===(t=this._options)||void 0===t?void 0:t.networkConfig)||void 0===n?void 0:n.preventAllNetworkTraffic)return void(null===(u=this._emitter)||void 0===u||u.call(this,{name:"error",error:c,tag:l}));const T=r.SDKType._get(this._sdkKey),y=o.StatsigMetadataProvider.get(),E=_?f.stack:function(e){try{return JSON.stringify(e)}catch(e){return i}}(f),S=Object.assign({tag:l,exception:m,info:E,statsigOptions:s(this._options)},Object.assign(Object.assign({},y),{sdkType:T})),I=null!==(g=null===(p=null===(d=this._options)||void 0===d?void 0:d.networkConfig)||void 0===p?void 0:p.networkOverrideFunc)&&void 0!==g?g:fetch;yield I(e.EXCEPTION_ENDPOINT,{method:"POST",headers:{"STATSIG-API-KEY":this._sdkKey,"STATSIG-SDK-TYPE":String(T),"STATSIG-SDK-VERSION":String(y.sdkVersion),"Content-Type":"application/json"},body:JSON.stringify(S)}),null===(h=this._emitter)||void 0===h||h.call(this,{name:"error",error:c,tag:l})}));u().then((()=>{})).catch((()=>{}))}catch(e){}}}}(RO)),RO}var xO,kO={};var DO,UO={};var MO,GO={};var VO,$O={};function FO(){if(VO)return $O;VO=1,Object.defineProperty($O,"__esModule",{value:!0}),$O.createMemoKey=$O.MemoPrefix=void 0,$O.MemoPrefix={_gate:"g",_dynamicConfig:"c",_experiment:"e",_configList:"cl",_layer:"l",_paramStore:"p"};const e=new Set([]),t=new Set(["userPersistedValues"]);return $O.createMemoKey=function(n,r,o){let i=`${n}|${r}`;if(!o)return i;for(const n of Object.keys(o)){if(t.has(n))return;e.has(n)?i+=`|${n}=true`:i+=`|${n}=${o[n]}`}return i},$O}var jO,WO,qO={},BO={},HO={};function JO(){if(jO)return HO;jO=1;var e=HO.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(HO,"__esModule",{value:!0}),HO._fetchTxtRecords=void 0;const t=new Uint8Array([0,0,1,0,0,1,0,0,0,0,0,0,13,102,101,97,116,117,114,101,97,115,115,101,116,115,3,111,114,103,0,0,16,0,1]),n=["i","e","d"];return HO._fetchTxtRecords=function(r){return e(this,void 0,void 0,(function*(){const e=yield r("https://cloudflare-dns.com/dns-query",{method:"POST",headers:{"Content-Type":"application/dns-message",Accept:"application/dns-message"},body:t});if(!e.ok){const e=new Error("Failed to fetch TXT records from DNS");throw e.name="DnsTxtFetchError",e}const o=yield e.arrayBuffer();return function(e){const t=e.findIndex(((t,r)=>r<200&&"="===String.fromCharCode(t)&&n.includes(String.fromCharCode(e[r-1]))));if(-1===t){const e=new Error("Failed to parse TXT records from DNS");throw e.name="DnsTxtParseError",e}let r="";for(let n=t-1;n<e.length;n++)r+=String.fromCharCode(e[n]);return r.split(",")}(new Uint8Array(o))}))},HO}function zO(){if(WO)return BO;WO=1;var e=BO.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(BO,"__esModule",{value:!0}),BO._isDomainFailure=BO.NetworkFallbackResolver=void 0;const t=JO(),n=kw(),r=Ew(),o=Xw(),i=6048e5;function a(e,t){var n;const r=null!==(n=null==e?void 0:e.toLowerCase())&&void 0!==n?n:"";return t||r.includes("uncaught exception")||r.includes("failed to fetch")||r.includes("networkerror when attempting to fetch resource")}function s(e){return`statsig.network_fallback.${(0,n._DJB2)(e)}`}function l(e,t){const n=s(e);t&&0!==Object.keys(t).length?o.Storage.setItem(n,JSON.stringify(t)):o.Storage.removeItem(n)}return BO.NetworkFallbackResolver=class{constructor(e){var t;this._fallbackInfo=null,this._errorBoundary=null,this._dnsQueryCooldowns={},this._networkOverrideFunc=null===(t=e.networkConfig)||void 0===t?void 0:t.networkOverrideFunc}setErrorBoundary(e){this._errorBoundary=e}tryBumpExpiryTime(e,t){var n;const r=null===(n=this._fallbackInfo)||void 0===n?void 0:n[t.endpoint];r&&(r.expiryTime=Date.now()+i,l(e,Object.assign(Object.assign({},this._fallbackInfo),{[t.endpoint]:r})))}getActiveFallbackUrl(e,t){var n,i;if(null!=t.customUrl&&null!=t.fallbackUrls)return null;let a=this._fallbackInfo;null==a&&(a=null!==(n=function(e){const t=s(e),n=o.Storage.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(e){return r.Log.error("Failed to parse FallbackInfo"),null}}(e))&&void 0!==n?n:{},this._fallbackInfo=a);const c=a[t.endpoint];return!c||Date.now()>(null!==(i=c.expiryTime)&&void 0!==i?i:0)||t.getChecksum()!==c.urlConfigChecksum?(delete a[t.endpoint],this._fallbackInfo=a,l(e,this._fallbackInfo),null):c.url?c.url:null}tryFetchUpdatedFallbackInfo(t,n,r,o){return e(this,void 0,void 0,(function*(){var e,i;try{if(!a(r,o))return!1;const i=null==n.customUrl&&null==n.fallbackUrls?yield this._tryFetchFallbackUrlsFromNetwork(n):n.fallbackUrls,s=this._pickNewFallbackUrl(null===(e=this._fallbackInfo)||void 0===e?void 0:e[n.endpoint],i);return!!s&&(this._updateFallbackInfoWithNewUrl(t,n,s),!0)}catch(e){return null===(i=this._errorBoundary)||void 0===i||i.logError("tryFetchUpdatedFallbackInfo",e),!1}}))}_updateFallbackInfoWithNewUrl(e,t,n){var r,o,a;const s={urlConfigChecksum:t.getChecksum(),url:n,expiryTime:Date.now()+i,previous:[]},c=t.endpoint,u=null===(r=this._fallbackInfo)||void 0===r?void 0:r[c];u&&s.previous.push(...u.previous),s.previous.length>10&&(s.previous=[]);const d=null===(a=null===(o=this._fallbackInfo)||void 0===o?void 0:o[c])||void 0===a?void 0:a.url;null!=d&&s.previous.push(d),this._fallbackInfo=Object.assign(Object.assign({},this._fallbackInfo),{[c]:s}),l(e,this._fallbackInfo)}_tryFetchFallbackUrlsFromNetwork(n){return e(this,void 0,void 0,(function*(){var e;const r=this._dnsQueryCooldowns[n.endpoint];if(r&&Date.now()<r)return null;this._dnsQueryCooldowns[n.endpoint]=Date.now()+144e5;const o=[],i=yield(0,t._fetchTxtRecords)(null!==(e=this._networkOverrideFunc)&&void 0!==e?e:fetch),a=function(e){try{return new URL(e).pathname}catch(e){return null}}(n.defaultUrl);for(const e of i){if(!e.startsWith(n.endpointDnsKey+"="))continue;const t=e.split("=");if(t.length>1){let e=t[1];e.endsWith("/")&&(e=e.slice(0,-1)),o.push(`https://${e}${a}`)}}return o}))}_pickNewFallbackUrl(e,t){var n;if(null==t)return null;const r=new Set(null!==(n=null==e?void 0:e.previous)&&void 0!==n?n:[]),o=null==e?void 0:e.url;let i=null;for(const e of t){const t=e.endsWith("/")?e.slice(0,-1):e;if(!r.has(e)&&t!==o){i=t;break}}return i}},BO._isDomainFailure=a,BO}var YO,XO={};function KO(){if(YO)return XO;YO=1,Object.defineProperty(XO,"__esModule",{value:!0}),XO.SDKFlags=void 0;const e={};return XO.SDKFlags={setFlags:(t,n)=>{e[t]=n},get:(t,n)=>{var r,o;return null!==(o=null===(r=e[t])||void 0===r?void 0:r[n])&&void 0!==o&&o}},XO}var QO,ZO={};function eN(){return QO||(QO=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigSession=e.SessionID=void 0;const t=Sw(),n=Dw(),r=Ew(),o=Xw(),i=fO(),a=18e5,s=144e5,l={};function c(e,n){return setTimeout((()=>{var n;const r=null===(n=(0,t._getStatsigGlobal)())||void 0===n?void 0:n.instance(e);r&&r.$emt({name:"session_expired"})}),n)}function u(e){return`statsig.session_id.${(0,n._getStorageKey)(e)}`}e.SessionID={get:t=>e.StatsigSession.get(t).data.sessionID},e.StatsigSession={get:e=>{null==l[e]&&(l[e]=function(e){let t=function(e){const t=u(e);return(0,o._getObjectFromStorage)(t)}(e);const n=Date.now();t||(t={sessionID:(0,i.getUUID)(),startTime:n,lastUpdate:n});return{data:t,sdkKey:e}}(e));return function(e){const t=Date.now(),n=e.data,l=e.sdkKey;if(function({lastUpdate:e}){return Date.now()-e>a}(n)||function({startTime:e}){return Date.now()-e>s}(n)){n.sessionID=(0,i.getUUID)(),n.startTime=t;const e=null===__STATSIG__||void 0===__STATSIG__?void 0:__STATSIG__.instance(l);e&&e.$emt({name:"session_expired"})}n.lastUpdate=t,function(e,t){const n=u(t);try{(0,o._setObjectInStorage)(n,e)}catch(e){r.Log.warn("Failed to save SessionID")}}(n,e.sdkKey),clearTimeout(e.idleTimeoutID),clearTimeout(e.ageTimeoutID);const d=t-n.startTime;return e.idleTimeoutID=c(l,a),e.ageTimeoutID=c(l,s-d),e}(l[e])},overrideInitialSessionID:(e,t)=>{l[t]=function(e,t){const n=Date.now();return{data:{sessionID:e,startTime:n,lastUpdate:n},sdkKey:t}}(e,t)}}}(ZO)),ZO}var tN,nN,rN={};function oN(){return tN||(tN=1,Object.defineProperty(rN,"__esModule",{value:!0}),rN.ErrorTag=void 0,rN.ErrorTag={NetworkError:"NetworkError"}),rN}function iN(){if(nN)return qO;nN=1;var e=qO.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(qO,"__esModule",{value:!0}),qO.NetworkCore=void 0,Sw();const t=Sw(),n=bw(),r=Ew(),o=Gw(),i=zO(),a=KO(),s=PO(),l=Fw(),c=eN(),u=_O(),d=oN(),p=sO(),g=Jw(),h=rO(),f=new Set([408,500,502,503,504,522,524,599]);qO.NetworkCore=class{constructor(e,t){this._emitter=t,this._errorBoundary=null,this._timeout=1e4,this._netConfig={},this._options={},this._leakyBucket={},this._lastUsedInitUrl=null,e&&(this._options=e),this._options.networkConfig&&(this._netConfig=this._options.networkConfig),this._netConfig.networkTimeoutMs&&(this._timeout=this._netConfig.networkTimeoutMs),this._fallbackResolver=new i.NetworkFallbackResolver(this._options),this.setLogEventCompressionMode(this._getLogEventCompressionMode(e))}setLogEventCompressionMode(e){this._options.logEventCompressionMode=e}setErrorBoundary(e){this._errorBoundary=e,this._errorBoundary.wrap(this),this._errorBoundary.wrap(this._fallbackResolver),this._fallbackResolver.setErrorBoundary(e)}isBeaconSupported(){return"undefined"!=typeof navigator&&"function"==typeof navigator.sendBeacon}getLastUsedInitUrlAndReset(){const e=this._lastUsedInitUrl;return this._lastUsedInitUrl=null,e}beacon(e){if(!_(e))return!1;const t=this._getInternalRequestArgs("POST",e),n=this._getPopulatedURL(t),r=navigator;return r.sendBeacon.bind(r)(n,t.body)}post(t){return e(this,void 0,void 0,(function*(){const e=this._getInternalRequestArgs("POST",t);return this._tryEncodeBody(e),yield this._tryToCompressBody(e),this._sendRequest(e)}))}get(e){const t=this._getInternalRequestArgs("GET",e);return this._sendRequest(t)}_sendRequest(t){return e(this,void 0,void 0,(function*(){var i,a,s,l;if(!_(t))return null;if(this._netConfig.preventAllNetworkTraffic)return null;const{method:c,body:u,retries:p,attempt:g}=t,m=t.urlConfig.endpoint;if(this._isRateLimited(m))return r.Log.warn(`Request to ${m} was blocked because you are making requests too frequently.`),null;const T=null!=g?g:1;let y=!1;const E=this._getPopulatedURL(t);let S=null;const I=(0,h._isUnloading)();try{const e={method:c,body:u,headers:Object.assign({},t.headers),priority:t.priority,keepalive:I};!function(e,t){if(e.urlConfig.endpoint!==o.Endpoint._initialize)return;n.Diagnostics._markInitNetworkReqStart(e.sdkKey,{attempt:t})}(t,T);const r=this._leakyBucket[m];r&&(r.lastRequestTime=Date.now(),this._leakyBucket[m]=r);const a=null!==(i=this._netConfig.networkOverrideFunc)&&void 0!==i?i:fetch;let s;if(S=yield Promise.race([a(E,e).finally((()=>clearTimeout(s))),new Promise(((e,t)=>{s=setTimeout((()=>{y=!0,t(new Error(`Timeout of ${this._timeout}ms expired.`))}),this._timeout)}))]),!S.ok){const e=yield S.text().catch((()=>"No Text")),t=new Error(`NetworkError: ${E} ${e}`);throw t.name="NetworkError",t}const l=yield S.text();return v(t,S,T,l),this._fallbackResolver.tryBumpExpiryTime(t.sdkKey,t.urlConfig),{body:l,code:S.status}}catch(n){const o=function(e){if("string"==typeof e)return e;if(e instanceof Error)return`${e.name}: ${e.message}`;return"Unknown Error"}(n),i=(A=y,(null!=o?o:"").includes("Timeout")||A);v(t,S,T,"",n);if((yield this._fallbackResolver.tryFetchUpdatedFallbackInfo(t.sdkKey,t.urlConfig,o,i))&&(t.fallbackUrl=this._fallbackResolver.getActiveFallbackUrl(t.sdkKey,t.urlConfig)),!p||T>p||!f.has(null!==(a=null==S?void 0:S.status)&&void 0!==a?a:500)){null===(s=this._emitter)||void 0===s||s.call(this,{name:"error",error:n,tag:d.ErrorTag.NetworkError,requestArgs:t});const e=`A networking error occurred during ${c} request to ${E}.`;return r.Log.error(e,o,n),null===(l=this._errorBoundary)||void 0===l||l.attachErrorIfNoneExists(e),null}return yield function(t){return e(this,void 0,void 0,(function*(){yield new Promise((e=>setTimeout(e,Math.min(t*t*500,3e4))))}))}(T),this._sendRequest(Object.assign(Object.assign({},t),{retries:p,attempt:T+1}))}var A}))}_getLogEventCompressionMode(e){let t=null==e?void 0:e.logEventCompressionMode;return t||!0!==(null==e?void 0:e.disableCompression)||(t=g.LogEventCompressionMode.Disabled),t||(t=g.LogEventCompressionMode.Enabled),t}_isRateLimited(e){var t;const n=Date.now(),r=null!==(t=this._leakyBucket[e])&&void 0!==t?t:{count:0,lastRequestTime:n},o=n-r.lastRequestTime,i=Math.floor(.05*o);return r.count=Math.max(0,r.count-i),r.count>=50||(r.count+=1,r.lastRequestTime=n,this._leakyBucket[e]=r,!1)}_getPopulatedURL(e){var t;const n=null!==(t=e.fallbackUrl)&&void 0!==t?t:e.urlConfig.getUrl();e.urlConfig.endpoint!==o.Endpoint._initialize&&e.urlConfig.endpoint!==o.Endpoint._download_config_specs||(this._lastUsedInitUrl=n);const r=Object.assign({[o.NetworkParam.SdkKey]:e.sdkKey,[o.NetworkParam.SdkType]:s.SDKType._get(e.sdkKey),[o.NetworkParam.SdkVersion]:p.SDK_VERSION,[o.NetworkParam.Time]:String(Date.now()),[o.NetworkParam.SessionID]:c.SessionID.get(e.sdkKey)},e.params),i=Object.keys(r).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(r[e])}`)).join("&");return`${n}${i?`?${i}`:""}`}_tryEncodeBody(e){var n;const i=(0,l._getWindowSafe)(),a=e.body;if(e.isStatsigEncodable&&!this._options.disableStatsigEncoding&&"string"==typeof a&&null==(0,t._getStatsigGlobalFlag)("no-encode")&&(null==i?void 0:i.btoa))try{e.body=i.btoa(a).split("").reverse().join(""),e.params=Object.assign(Object.assign({},null!==(n=e.params)&&void 0!==n?n:{}),{[o.NetworkParam.StatsigEncoded]:"1"})}catch(t){r.Log.warn(`Request encoding failed for ${e.urlConfig.getUrl()}`,t)}}_tryToCompressBody(n){return e(this,void 0,void 0,(function*(){var e;const i=n.body;if("string"==typeof i&&function(e,n){if(!e.isCompressable)return!1;if(null!=(0,t._getStatsigGlobalFlag)("no-compress")||"undefined"==typeof CompressionStream||"undefined"==typeof TextEncoder)return!1;const r=null!=e.urlConfig.customUrl||null!=e.urlConfig.fallbackUrls,o=!0===a.SDKFlags.get(e.sdkKey,"enable_log_event_compression");switch(n.logEventCompressionMode){case g.LogEventCompressionMode.Disabled:return!1;case g.LogEventCompressionMode.Enabled:return!(r&&!o);case g.LogEventCompressionMode.Forced:return!0;default:return!1}}(n,this._options))try{const t=(new TextEncoder).encode(i),a=new CompressionStream("gzip"),s=a.writable.getWriter();s.write(t).catch(r.Log.error),s.close().catch(r.Log.error);const l=a.readable.getReader(),c=[];let u;for(;!(u=yield l.read()).done;)c.push(u.value);const d=c.reduce(((e,t)=>e+t.length),0),p=new Uint8Array(d);let g=0;for(const e of c)p.set(e,g),g+=e.length;n.body=p,n.params=Object.assign(Object.assign({},null!==(e=n.params)&&void 0!==e?e:{}),{[o.NetworkParam.IsGzipped]:"1"})}catch(e){r.Log.warn(`Request compression failed for ${n.urlConfig.getUrl()}`,e)}}))}_getInternalRequestArgs(e,t){const n=this._fallbackResolver.getActiveFallbackUrl(t.sdkKey,t.urlConfig),r=Object.assign(Object.assign({},t),{method:e,fallbackUrl:n});return"data"in t&&m(r,t.data),r}};const _=e=>!!e.sdkKey||(r.Log.warn("Unable to make request without an SDK key"),!1),m=(e,t)=>{const{sdkKey:n,fallbackUrl:r}=e,o=u.StableID.get(n),i=c.SessionID.get(n),a=s.SDKType._get(n);e.body=JSON.stringify(Object.assign(Object.assign({},t),{statsigMetadata:Object.assign(Object.assign({},p.StatsigMetadataProvider.get()),{stableID:o,sessionID:i,sdkType:a,fallbackUrl:r})}))};function v(e,t,r,i,a){e.urlConfig.endpoint===o.Endpoint._initialize&&n.Diagnostics._markInitNetworkReqEnd(e.sdkKey,n.Diagnostics._getDiagnosticsData(t,r,i,a))}return qO}var aN,sN={};var lN,cN={};var uN,dN={};var pN,gN={};function hN(){if(pN)return gN;pN=1;var e=gN.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(gN,"__esModule",{value:!0}),gN.StatsigClientBase=void 0,Sw();const t=Sw(),n=CO(),r=oO(),o=Ew(),i=FO(),a=Fw(),s=eN(),l=_O(),c=Jw(),u=Xw();return gN.StatsigClientBase=class{constructor(e,i,c,d){var p,g,h,f;this.loadingStatus="Uninitialized",this._initializePromise=null,this._listeners={};const _=this.$emt.bind(this);null!=(null==d?void 0:d.logLevel)&&(o.Log.level=d.logLevel),(null==d?void 0:d.disableStorage)&&u.Storage._setDisabled(!0),(null==d?void 0:d.initialSessionID)&&s.StatsigSession.overrideInitialSessionID(d.initialSessionID,e),(null==d?void 0:d.storageProvider)&&u.Storage._setProvider(d.storageProvider),(null==d?void 0:d.enableCookies)&&l.StableID._setCookiesEnabled(e,d.enableCookies),(null==d?void 0:d.disableStableID)&&l.StableID._setDisabled(e,!0),this._sdkKey=e,this._options=null!=d?d:{},this._memoCache={},this.overrideAdapter=null!==(p=null==d?void 0:d.overrideAdapter)&&void 0!==p?p:null,this._logger=new r.EventLogger(e,_,c,d),this._errorBoundary=new n.ErrorBoundary(e,d,_),this._errorBoundary.wrap(this),this._errorBoundary.wrap(i),this._errorBoundary.wrap(this._logger),c.setErrorBoundary(this._errorBoundary),this.dataAdapter=i,this.dataAdapter.attach(e,d,c),this.storageProvider=u.Storage,null===(f=null===(h=null===(g=this.overrideAdapter)||void 0===g?void 0:g.loadFromStorage)||void 0===h?void 0:h.call(g))||void 0===f||f.catch((e=>this._errorBoundary.logError("OA::loadFromStorage",e))),this._primeReadyRipcord(),function(e,n){var r;if((0,a._isServerEnv)())return;const i=(0,t._getStatsigGlobal)(),s=null!==(r=i.instances)&&void 0!==r?r:{},l=n;null!=s[e]&&o.Log.warn("Creating multiple Statsig clients with the same SDK key can lead to unexpected behavior. Multi-instance support requires different SDK keys.");s[e]=l,i.firstInstance||(i.firstInstance=l);i.instances=s,__STATSIG__=i}(e,this)}updateRuntimeOptions(e){e.loggingEnabled?(this._options.loggingEnabled=e.loggingEnabled,this._logger.setLoggingEnabled(e.loggingEnabled)):null!=e.disableLogging&&(this._options.disableLogging=e.disableLogging,this._logger.setLoggingEnabled(e.disableLogging?"disabled":"browser-only")),null!=e.disableStorage&&(this._options.disableStorage=e.disableStorage,u.Storage._setDisabled(e.disableStorage)),null!=e.enableCookies&&(this._options.enableCookies=e.enableCookies,l.StableID._setCookiesEnabled(this._sdkKey,e.enableCookies)),e.logEventCompressionMode?this._logger.setLogEventCompressionMode(e.logEventCompressionMode):e.disableCompression&&this._logger.setLogEventCompressionMode(c.LogEventCompressionMode.Disabled)}flush(){return this._logger.flush()}shutdown(){return e(this,void 0,void 0,(function*(){this.$emt({name:"pre_shutdown"}),this._setStatus("Uninitialized",null),this._initializePromise=null,yield this._logger.stop()}))}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){if(this._listeners[e]){const n=this._listeners[e].indexOf(t);-1!==n&&this._listeners[e].splice(n,1)}}$on(e,t){t.__isInternal=!0,this.on(e,t)}$emt(e){var t;const n=t=>{try{t(e)}catch(n){if(!0===t.__isInternal)return void this._errorBoundary.logError(`__emit:${e.name}`,n);o.Log.error("An error occurred in a StatsigClientEvent listener. This is not an issue with Statsig.",e)}};this._listeners[e.name]&&this._listeners[e.name].forEach((e=>n(e))),null===(t=this._listeners["*"])||void 0===t||t.forEach(n)}_setStatus(e,t){this.loadingStatus=e,this._memoCache={},this.$emt({name:"values_updated",status:e,values:t})}_enqueueExposure(e,t,n){!0!==(null==n?void 0:n.disableExposureLog)?this._logger.enqueue(t):this._logger.incrementNonExposureCount(e)}_memoize(e,t){return(n,r)=>{if(this._options.disableEvaluationMemoization)return t(n,r);const o=(0,i.createMemoKey)(e,n,r);return o?(o in this._memoCache||(Object.keys(this._memoCache).length>=3e3&&(this._memoCache={}),this._memoCache[o]=t(n,r)),this._memoCache[o]):t(n,r)}}},gN}var fN,_N={};var mN,vN={};var TN,yN={};var EN,SN={};var IN,AN,bN={};function wN(){return AN||(AN=1,function(e){var t=vw.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=vw.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=e.Log=e.EventLogger=e.Diagnostics=void 0,Sw();const r=Sw(),o=bw();Object.defineProperty(e,"Diagnostics",{enumerable:!0,get:function(){return o.Diagnostics}});const i=oO();Object.defineProperty(e,"EventLogger",{enumerable:!0,get:function(){return i.EventLogger}});const a=Ew();Object.defineProperty(e,"Log",{enumerable:!0,get:function(){return a.Log}});const s=sO(),l=Xw();Object.defineProperty(e,"Storage",{enumerable:!0,get:function(){return l.Storage}}),n(Sw(),e),n(Dw(),e),n((lO||(lO=1,Object.defineProperty(cO,"__esModule",{value:!0})),cO),e),n(AO(),e),n(bw(),e),n((bO||(bO=1,Object.defineProperty(wO,"__esModule",{value:!0})),wO),e),n(CO(),e),n((xO||(xO=1,Object.defineProperty(kO,"__esModule",{value:!0})),kO),e),n((DO||(DO=1,Object.defineProperty(UO,"__esModule",{value:!0})),UO),e),n(kw(),e),n((MO||(MO=1,Object.defineProperty(GO,"__esModule",{value:!0})),GO),e),n(Ew(),e),n(FO(),e),n(Gw(),e),n(iN(),e),n((aN||(aN=1,Object.defineProperty(sN,"__esModule",{value:!0})),sN),e),n((lN||(lN=1,Object.defineProperty(cN,"__esModule",{value:!0})),cN),e),n(Fw(),e),n(PO(),e),n(eN(),e),n((uN||(uN=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._fastApproxSizeOf=void 0,e._fastApproxSizeOf=(t,n)=>{let r=0;const o=Object.keys(t);for(let i=0;i<o.length;i++){const a=o[i],s=t[a];if(r+=a.length,r+="object"==typeof s&&null!==s?(0,e._fastApproxSizeOf)(s,n)+2:String(s).length+1,r>=n)return r}return r}}(dN)),dN),e),n(_O(),e),n(hN(),e),n(oN(),e),n((fN||(fN=1,Object.defineProperty(_N,"__esModule",{value:!0}),_N.DataAdapterCachePrefix=void 0,_N.DataAdapterCachePrefix="statsig.cached"),_N),e),n(qw(),e),n(sO(),e),n(Jw(),e),n((mN||(mN=1,Object.defineProperty(vN,"__esModule",{value:!0})),vN),e),n(function(){if(TN)return yN;TN=1,Object.defineProperty(yN,"__esModule",{value:!0}),yN._makeTypedGet=yN._mergeOverride=yN._makeLayer=yN._makeExperiment=yN._makeDynamicConfig=yN._makeFeatureGate=void 0;const e=Ew(),t=xw();function n(e,t,n,r){var o;return{name:e,details:t,ruleID:null!==(o=null==n?void 0:n.rule_id)&&void 0!==o?o:"",__evaluation:n,value:r}}function r(e,t,r){var i,a;const s=null!==(i=null==r?void 0:r.value)&&void 0!==i?i:{};return Object.assign(Object.assign({},n(e,t,r,s)),{idType:null!==(a=null==r?void 0:r.id_type)&&void 0!==a?a:null,get:o(e,null==r?void 0:r.value)})}function o(n,r,o){return(i,a)=>{var s;const l=null!==(s=null==r?void 0:r[i])&&void 0!==s?s:null;return null==l?null!=a?a:null:null==a||(0,t._isTypeMatch)(l,a)?(null==o||o(i),l):(e.Log.warn(`Parameter type mismatch. '${n}.${i}' was found to be type '${typeof l}' but fallback/return type is '${typeof a}'. See https://docs.statsig.com/client/javascript-sdk/#typed-getters`),null!=a?a:null)}}return yN._makeFeatureGate=function(e,t,r){var o;return Object.assign(Object.assign({},n(e,t,r,!0===(null==r?void 0:r.value))),{idType:null!==(o=null==r?void 0:r.id_type)&&void 0!==o?o:null})},yN._makeDynamicConfig=r,yN._makeExperiment=function(e,t,n){var o;const i=r(e,t,n);return Object.assign(Object.assign({},i),{groupName:null!==(o=null==n?void 0:n.group_name)&&void 0!==o?o:null})},yN._makeLayer=function(e,t,r,i){var a,s;return Object.assign(Object.assign({},n(e,t,r,void 0)),{get:o(e,null==r?void 0:r.value,i),groupName:null!==(a=null==r?void 0:r.group_name)&&void 0!==a?a:null,__value:null!==(s=null==r?void 0:r.value)&&void 0!==s?s:{}})},yN._mergeOverride=function(e,t,n,r){return Object.assign(Object.assign(Object.assign({},e),t),{get:o(e.name,n,r)})},yN._makeTypedGet=o,yN}(),e),n((EN||(EN=1,Object.defineProperty(SN,"__esModule",{value:!0})),SN),e),n(TO(),e),n(Xw(),e),n(IO(),e),n(xw(),e),n(Zw(),e),n(fO(),e),n(rO(),e),n((IN||(IN=1,Object.defineProperty(bN,"__esModule",{value:!0}),bN.UPDATE_DETAIL_ERROR_MESSAGES=bN.createUpdateDetails=void 0,bN.createUpdateDetails=(e,t,n,r,o,i)=>({duration:n,source:t,success:e,error:r,sourceUrl:o,warnings:i}),bN.UPDATE_DETAIL_ERROR_MESSAGES={NO_NETWORK_DATA:"No data was returned from the network. This may be due to a network timeout if a timeout value was specified in the options or ad blocker error."}),bN),e),n(KO(),e),Object.assign((0,r._getStatsigGlobal)(),{Log:a.Log,SDK_VERSION:s.SDK_VERSION})}(vw)),vw}var ON,NN={},RN={},LN={};var PN,CN,xN={};function kN(){if(CN)return RN;CN=1,Object.defineProperty(RN,"__esModule",{value:!0});const e=wN(),t=function(){if(ON)return LN;ON=1,Object.defineProperty(LN,"__esModule",{value:!0}),LN.V1InitializeContainer=void 0;const e=wN();return LN.V1InitializeContainer=class{constructor(e){this._values=e}getGate(e){return this._getResultFromLookup(this._values.feature_gates,e)}getConfig(e){return this._getResultFromLookup(this._values.dynamic_configs,e)}getLayer(e){return this._getResultFromLookup(this._values.layer_configs,e)}getParamStore(e){return this._getResultFromLookup(this._values.param_stores,e)}getConfigList(){return Object.keys(this._values.dynamic_configs)}getExposureMapping(){return this._values.exposures}_getResultFromLookup(t,n){var r,o;return t&&null!==(o=null!==(r=t[n])&&void 0!==r?r:t[(0,e._DJB2)(n)])&&void 0!==o?o:null}},LN}(),n=function(){if(PN)return xN;PN=1,Object.defineProperty(xN,"__esModule",{value:!0}),xN.V2InitializeContainer=void 0;const e=wN();return xN.V2InitializeContainer=class{constructor(e){this._values=e}getGate(e){var t,n,r;const o=this._getResultFromLookup(this._values.feature_gates,e);return o?{name:e,value:!0===o.v,rule_id:null!==(t=o.r)&&void 0!==t?t:"default",secondary_exposures:null!==(n=o.s)&&void 0!==n?n:[],id_type:null!==(r=o.i)&&void 0!==r?r:""}:null}getConfig(e){var t,n,r,o;const i=this._getResultFromLookup(this._values.dynamic_configs,e);return i?{name:e,value:null!==(t=this._values.values[i.v])&&void 0!==t?t:{},rule_id:i.r,secondary_exposures:null!==(n=i.s)&&void 0!==n?n:[],id_type:null!==(r=i.i)&&void 0!==r?r:"",is_user_in_experiment:!0===i.ue,passed:!0===i.p,group_name:null!==(o=i.gn)&&void 0!==o?o:void 0,is_experiment_active:!0===i.ea,group:i.r,is_device_based:"stableID"===i.i}:null}getLayer(e){var t,n,r,o,i,a;const s=this._getResultFromLookup(this._values.layer_configs,e);return s?{name:e,value:null!==(t=this._values.values[s.v])&&void 0!==t?t:{},rule_id:s.r,secondary_exposures:null!==(n=s.s)&&void 0!==n?n:[],is_user_in_experiment:!0===s.ue,group_name:null!==(r=s.gn)&&void 0!==r?r:void 0,is_experiment_active:!0===s.ea,group:s.r,is_device_based:"stableID"===s.i,allocated_experiment_name:null!==(o=s.ae)&&void 0!==o?o:"",explicit_parameters:null!==(i=s.ep)&&void 0!==i?i:[],undelegated_secondary_exposures:null!==(a=s.us)&&void 0!==a?a:[],parameter_rule_ids:s.pr}:null}getParamStore(e){return this._getResultFromLookup(this._values.param_stores,e)}getConfigList(){return Object.keys(this._values.dynamic_configs)}getExposureMapping(){return this._values.exposures}_getResultFromLookup(t,n){var r,o;return t&&null!==(o=null!==(r=t[n])&&void 0!==r?r:t[(0,e._DJB2)(n)])&&void 0!==o?o:null}},xN}();return RN.default=class{constructor(e){this._sdkKey=e,this._rawValues=null,this._values=null,this._source="Uninitialized",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null,this._warnings=new Set}reset(){this._values=null,this._rawValues=null,this._source="Loading",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null,this._warnings.clear()}finalize(){this._values||(this._source="NoValues")}getValues(){return this._rawValues?(0,e._typedJsonParse)(this._rawValues,"has_updates","EvaluationStoreValues"):null}setValues(r,o){var i,a;if(!r)return!1;const s=(0,e._typedJsonParse)(r.data,"has_updates","EvaluationResponse");if(null==s)return!1;if(this._source=r.source,!0!==(null==s?void 0:s.has_updates))return!0;return(null!==(i=s.time)&&void 0!==i?i:0)<this._lcut||(this._rawValues=r.data,this._lcut=s.time,this._receivedAt=r.receivedAt,"init-v2"===s.response_format?this._values=new n.V2InitializeContainer(s):this._values=new t.V1InitializeContainer(s),this._bootstrapMetadata=this._extractBootstrapMetadata(r.source,s),r.source&&s.user&&this._setWarningState(o,s),e.SDKFlags.setFlags(this._sdkKey,null!==(a=s.sdk_flags)&&void 0!==a?a:{})),!0}getWarnings(){if(0!==this._warnings.size)return Array.from(this._warnings)}getGate(e){const t=this._values?this._values.getGate(e):null;return this._getDetailedStoreResult(t)}getConfig(e){const t=this._values?this._values.getConfig(e):null;return this._getDetailedStoreResult(t)}getConfigList(){return this._values?this._values.getConfigList():[]}getLayer(e){const t=this._values?this._values.getLayer(e):null;return this._getDetailedStoreResult(t)}getParamStore(e){const t=this._values?this._values.getParamStore(e):null;return this._getDetailedStoreResult(t)}getSource(){return this._source}getExposureMapping(){var e;return null===(e=this._values)||void 0===e?void 0:e.getExposureMapping()}_extractBootstrapMetadata(e,t){if("Bootstrap"!==e)return null;const n={};return t.user&&(n.user=t.user),t.sdkInfo&&(n.generatorSDKInfo=t.sdkInfo),n.lcut=t.time,n}_getDetailedStoreResult(e){return{result:e,details:this._getDetails(null==e)}}_setWarningState(t,n){var r,o;const i=e.StableID.get(this._sdkKey);if((null===(r=t.customIDs)||void 0===r?void 0:r.stableID)===i||!(null===(o=t.customIDs)||void 0===o?void 0:o.stableID)&&!i){if("user"in n){const r=n.user,o=Object.assign(Object.assign({},t),{analyticsOnlyMetadata:void 0,privateAttributes:void 0});(0,e._getFullUserHash)(o)!==(0,e._getFullUserHash)(r)&&this._warnings.add("PartialUserMatch")}}else this._warnings.add("StableIDMismatch")}getCurrentSourceDetails(){if("Uninitialized"===this._source||"NoValues"===this._source)return{reason:this._source};const e={reason:this._source,lcut:this._lcut,receivedAt:this._receivedAt};return this._warnings.size>0&&(e.warnings=Array.from(this._warnings)),e}_getDetails(e){var t,n;const r=this.getCurrentSourceDetails();let o=r.reason;const i=null!==(t=r.warnings)&&void 0!==t?t:[];if("Bootstrap"===this._source&&i.length>0&&(o+=i[0]),"Uninitialized"!==o&&"NoValues"!==o){o=`${o}:${e?"Unrecognized":"Recognized"}`}const a="Bootstrap"===this._source&&null!==(n=this._bootstrapMetadata)&&void 0!==n?n:void 0;return a&&(r.bootstrapMetadata=a),Object.assign(Object.assign({},r),{reason:o})}},RN}var DN,UN,MN={},GN={};function VN(){if(DN)return GN;DN=1,Object.defineProperty(GN,"__esModule",{value:!0}),GN._resolveDeltasResponse=void 0;const e=wN();function t(e,t){null==e||e.forEach((e=>{delete t[e]}))}return GN._resolveDeltasResponse=function(n,r){const o=(0,e._typedJsonParse)(r,"checksum","DeltasEvaluationResponse");if(!o)return{hadBadDeltaChecksum:!0};const i=function(e){const n=e;return t(e.deleted_gates,n.feature_gates),delete n.deleted_gates,t(e.deleted_configs,n.dynamic_configs),delete n.deleted_configs,t(e.deleted_layers,n.layer_configs),delete n.deleted_layers,n}(function(e,t){return Object.assign(Object.assign(Object.assign({},e),t),{feature_gates:Object.assign(Object.assign({},e.feature_gates),t.feature_gates),layer_configs:Object.assign(Object.assign({},e.layer_configs),t.layer_configs),dynamic_configs:Object.assign(Object.assign({},e.dynamic_configs),t.dynamic_configs)})}(n,o)),a=(0,e._DJB2Object)({feature_gates:i.feature_gates,dynamic_configs:i.dynamic_configs,layer_configs:i.layer_configs},2);return a===o.checksumV2?JSON.stringify(i):{hadBadDeltaChecksum:!0,badChecksum:a,badMergedConfigs:i,badFullResponse:o.deltas_full_response}},GN}function $N(){if(UN)return MN;UN=1;var e=MN.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(MN,"__esModule",{value:!0});const t=wN(),n=VN();class r extends t.NetworkCore{constructor(e,n){super(e,n);const r=null==e?void 0:e.networkConfig;this._option=e,this._initializeUrlConfig=new t.UrlConfiguration(t.Endpoint._initialize,null==r?void 0:r.initializeUrl,null==r?void 0:r.api,null==r?void 0:r.initializeFallbackUrls)}fetchEvaluations(n,r,o,i,a){return e(this,void 0,void 0,(function*(){var e,s,l,c,u,d;const p=r?(0,t._typedJsonParse)(r,"has_updates","InitializeResponse"):null;let g={user:i,hash:null!==(l=null===(s=null===(e=this._option)||void 0===e?void 0:e.networkConfig)||void 0===s?void 0:s.initializeHashAlgorithm)&&void 0!==l?l:"djb2",deltasResponseRequested:!1,full_checksum:null};if(null==p?void 0:p.has_updates){const e=(null==p?void 0:p.hash_used)!==(null!==(d=null===(u=null===(c=this._option)||void 0===c?void 0:c.networkConfig)||void 0===u?void 0:u.initializeHashAlgorithm)&&void 0!==d?d:"djb2");g=Object.assign(Object.assign({},g),{sinceTime:a&&!e?p.time:0,previousDerivedFields:"derived_fields"in p&&a?p.derived_fields:{},deltasResponseRequested:!0,full_checksum:p.full_checksum,partialUserMatchSinceTime:e?0:p.time})}return this._fetchEvaluations(n,p,g,o)}))}_fetchEvaluations(t,r,o,i){return e(this,void 0,void 0,(function*(){var e,a;const s=yield this.post({sdkKey:t,urlConfig:this._initializeUrlConfig,data:o,retries:2,isStatsigEncodable:!0,priority:i});if(204===(null==s?void 0:s.code))return'{"has_updates": false}';if(200!==(null==s?void 0:s.code))return null!==(e=null==s?void 0:s.body)&&void 0!==e?e:null;if(!0!==(null==r?void 0:r.has_updates)||!0!==(null===(a=s.body)||void 0===a?void 0:a.includes('"is_delta":true'))||!0!==o.deltasResponseRequested)return s.body;const l=(0,n._resolveDeltasResponse)(r,s.body);return"string"==typeof l?l:this._fetchEvaluations(t,r,Object.assign(Object.assign(Object.assign({},o),l),{deltasResponseRequested:!1}),i)}))}}return MN.default=r,MN}var FN,jN={};function WN(){if(FN)return jN;FN=1,Object.defineProperty(jN,"__esModule",{value:!0}),jN._makeParamStoreGetter=void 0;const e=wN(),t={disableExposureLog:!0};function n(e){return null==e||!1===e.disableExposureLog}function r(t,n){return null!=n&&!(0,e._isTypeMatch)(t,n)}return jN._makeParamStoreGetter=function(o,i,a){return(s,l)=>{if(null==i)return l;const c=i[s];if(null==c||null!=l&&(0,e._typeOf)(l)!==c.param_type)return l;switch(c.ref_type){case"static":return function(e){return e.value}(c);case"gate":return function(e,r,o){return e.getFeatureGate(r.gate_name,n(o)?void 0:t).value?r.pass_value:r.fail_value}(o,c,a);case"dynamic_config":return function(e,o,i,a){const s=e.getDynamicConfig(o.config_name,n(a)?void 0:t).get(o.param_name);return r(s,i)?i:s}(o,c,l,a);case"experiment":return function(e,o,i,a){const s=e.getExperiment(o.experiment_name,n(a)?void 0:t).get(o.param_name);return r(s,i)?i:s}(o,c,l,a);case"layer":return function(e,o,i,a){const s=e.getLayer(o.layer_name,n(a)?void 0:t).get(o.param_name);return r(s,i)?i:s}(o,c,l,a);default:return l}}},jN}var qN,BN,HN,JN={};function zN(){if(qN)return JN;qN=1;var e=JN.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(JN,"__esModule",{value:!0}),JN.StatsigEvaluationsDataAdapter=void 0;const t=wN(),n=$N();let r=class extends t.DataAdapterCore{constructor(){super("EvaluationsDataAdapter","evaluations"),this._network=null,this._options=null}attach(e,t,r){super.attach(e,t,r),null!==r&&r instanceof n.default?this._network=r:this._network=new n.default(null!=t?t:{})}getDataAsync(e,n,r){return this._getDataAsyncImpl(e,(0,t._normalizeUser)(n,this._options),r)}prefetchData(e,t){return this._prefetchDataImpl(e,t)}setData(e){const n=(0,t._typedJsonParse)(e,"has_updates","data");n&&"user"in n?super.setData(e,n.user):t.Log.error("StatsigUser not found. You may be using an older server SDK version. Please upgrade your SDK or use setDataLegacy.")}setDataLegacy(e,t){super.setData(e,t)}_fetchFromNetwork(t,n,r,o){return e(this,void 0,void 0,(function*(){var e;const i=yield null===(e=this._network)||void 0===e?void 0:e.fetchEvaluations(this._getSdkKey(),t,null==r?void 0:r.priority,n,o);return null!=i?i:null}))}_getCacheKey(e){var n;const r=(0,t._getStorageKey)(this._getSdkKey(),e,null===(n=this._options)||void 0===n?void 0:n.customUserCacheKeyFunc);return`${t.DataAdapterCachePrefix}.${this._cacheSuffix}.${r}`}_isCachedResultValidFor204(e,n){return null!=e.fullUserHash&&e.fullUserHash===(0,t._getFullUserHash)(n)}};return JN.StatsigEvaluationsDataAdapter=r,JN}function YN(){if(BN)return NN;BN=1;var e=NN.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(NN,"__esModule",{value:!0});const t=wN(),n=kN(),r=$N(),o=WN(),i=zN();let a=class a extends t.StatsigClientBase{static instance(e){const n=(0,t._getStatsigGlobal)().instance(e);return n instanceof a?n:(t.Log.warn((0,t._isServerEnv)()?"StatsigClient.instance is not supported in server environments":"Unable to find StatsigClient instance"),new a(null!=e?e:"",{}))}constructor(e,o,a=null){var s,l;t.SDKType._setClientType(e,"javascript-client");const c=new r.default(a,(e=>{this.$emt(e)}));super(e,null!==(s=null==a?void 0:a.dataAdapter)&&void 0!==s?s:new i.StatsigEvaluationsDataAdapter,c,a),this._possibleFirstTouchMetadata={},this.getFeatureGate=this._memoize(t.MemoPrefix._gate,this._getFeatureGateImpl.bind(this)),this.getDynamicConfig=this._memoize(t.MemoPrefix._dynamicConfig,this._getDynamicConfigImpl.bind(this)),this.getExperiment=this._memoize(t.MemoPrefix._experiment,this._getExperimentImpl.bind(this)),this.getConfigList=this._memoize(t.MemoPrefix._configList,this._getConfigListImpl.bind(this)),this.getLayer=this._memoize(t.MemoPrefix._layer,this._getLayerImpl.bind(this)),this.getParameterStore=this._memoize(t.MemoPrefix._paramStore,this._getParameterStoreImpl.bind(this)),this._store=new n.default(e),this._network=c,this._user=this._configureUser(o,a),this._sdkInstanceID=(0,t.getUUID)();const u=null!==(l=null==a?void 0:a.plugins)&&void 0!==l?l:[];for(const e of u)e.bind(this)}initializeSync(e){var n;return"Uninitialized"!==this.loadingStatus?(0,t.createUpdateDetails)(!0,this._store.getSource(),-1,null,null,["MultipleInitializations",...null!==(n=this._store.getWarnings())&&void 0!==n?n:[]]):(this._logger.start(),this.updateUserSync(this._user,e))}initializeAsync(t){return e(this,void 0,void 0,(function*(){return this._initializePromise||(this._initializePromise=this._initializeAsyncImpl(t)),this._initializePromise}))}updateUserSync(e,t){const n=performance.now();try{return this._updateUserSyncImpl(e,t,n)}catch(e){const t=e instanceof Error?e:new Error(String(e));return this._createErrorUpdateDetails(t,n)}}_updateUserSyncImpl(e,n,r){var o;const i=[...null!==(o=this._store.getWarnings())&&void 0!==o?o:[]];this._resetForUser(e);const a=this.dataAdapter.getDataSync(this._user);null==a&&i.push("NoCachedValues"),this._store.setValues(a,this._user),this._finalizeUpdate(a);const s=null==n?void 0:n.disableBackgroundCacheRefresh;return!0===s||null==s&&"Bootstrap"===(null==a?void 0:a.source)||this._runPostUpdate(null!=a?a:null,this._user),(0,t.createUpdateDetails)(!0,this._store.getSource(),performance.now()-r,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),i)}updateUserAsync(t,n){return e(this,void 0,void 0,(function*(){const e=performance.now();try{return yield this._updateUserAsyncImpl(t,n)}catch(t){const n=t instanceof Error?t:new Error(String(t));return this._createErrorUpdateDetails(n,e)}}))}_updateUserAsyncImpl(n,r){return e(this,void 0,void 0,(function*(){this._resetForUser(n);const e=this._user;t.Diagnostics._markInitOverallStart(this._sdkKey);let o=this.dataAdapter.getDataSync(e);if(this._store.setValues(o,this._user),this._setStatus("Loading",o),o=yield this.dataAdapter.getDataAsync(o,e,r),e!==this._user)return(0,t.createUpdateDetails)(!1,this._store.getSource(),-1,new Error("User changed during update"),this._network.getLastUsedInitUrlAndReset());let i=!1;null!=o&&(t.Diagnostics._markInitProcessStart(this._sdkKey),i=this._store.setValues(o,this._user),t.Diagnostics._markInitProcessEnd(this._sdkKey,{success:i})),this._finalizeUpdate(o),i||(this._errorBoundary.attachErrorIfNoneExists(t.UPDATE_DETAIL_ERROR_MESSAGES.NO_NETWORK_DATA),this.$emt({name:"initialization_failure"})),t.Diagnostics._markInitOverallEnd(this._sdkKey,i,this._store.getCurrentSourceDetails());const a=t.Diagnostics._enqueueDiagnosticsEvent(this._user,this._logger,this._sdkKey,this._options);return(0,t.createUpdateDetails)(i,this._store.getSource(),a,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),this._store.getWarnings())}))}getContext(){return{sdkKey:this._sdkKey,options:this._options,values:this._store.getValues(),user:JSON.parse(JSON.stringify(this._user)),errorBoundary:this._errorBoundary,session:t.StatsigSession.get(this._sdkKey),stableID:t.StableID.get(this._sdkKey),sdkInstanceID:this._sdkInstanceID}}checkGate(e,t){return this.getFeatureGate(e,t).value}logEvent(e,t,n){const r="string"==typeof e?{eventName:e,value:t,metadata:n}:e;this.$emt({name:"log_event_called",event:r}),this._logger.enqueue(Object.assign(Object.assign({},r),{user:this._user,time:Date.now()}))}updateUserWithAnalyticsOnlyMetadata(e){this._user=this._configureUser(Object.assign(Object.assign({},this._user),{analyticsOnlyMetadata:e}),this._options)}_primeReadyRipcord(){this.$on("error",(()=>{"Loading"===this.loadingStatus&&this._finalizeUpdate(null)}))}_initializeAsyncImpl(n){return e(this,void 0,void 0,(function*(){return t.Storage.isReady()||(yield t.Storage.isReadyResolver()),this._logger.start(),this.updateUserAsync(this._user,n)}))}_createErrorUpdateDetails(e,n){var r;return(0,t.createUpdateDetails)(!1,this._store.getSource(),performance.now()-n,e,null,[...null!==(r=this._store.getWarnings())&&void 0!==r?r:[]])}_finalizeUpdate(e){this._store.finalize(),this._setStatus("Ready",e)}_runPostUpdate(e,n){this.dataAdapter.getDataAsync(e,n,{priority:"low"}).catch((e=>{t.Log.error("An error occurred after update.",e)}))}_resetForUser(e){this._logger.reset(),this._store.reset(),this._user=this._configureUser(e,this._options)}_configureUser(e,n){var r,o,i;const a=(0,t._normalizeUser)(e,n),s=null===(r=a.customIDs)||void 0===r?void 0:r.stableID;if(s){const e=null===(i=(o=this.storageProvider).isReadyResolver)||void 0===i?void 0:i.call(o);e?e.then((()=>t.StableID.setOverride(s,this._sdkKey)),(()=>t.StableID.setOverride(s,this._sdkKey))):t.StableID.setOverride(s,this._sdkKey)}return Object.keys(this._possibleFirstTouchMetadata).length>0&&(a.analyticsOnlyMetadata=Object.assign(Object.assign({},a.analyticsOnlyMetadata),this._possibleFirstTouchMetadata)),a}_getFeatureGateImpl(e,n){var r,o;const{result:i,details:a}=this._store.getGate(e),s=(0,t._makeFeatureGate)(e,a,i),l=null===(o=null===(r=this.overrideAdapter)||void 0===r?void 0:r.getGateOverride)||void 0===o?void 0:o.call(r,s,this._user,n),c=null!=l?l:s;return this._enqueueExposure(e,(0,t._createGateExposure)(this._user,c,this._store.getExposureMapping()),n),this.$emt({name:"gate_evaluation",gate:c}),c}_getDynamicConfigImpl(e,n){var r,o;const{result:i,details:a}=this._store.getConfig(e),s=(0,t._makeDynamicConfig)(e,a,i),l=null===(o=null===(r=this.overrideAdapter)||void 0===r?void 0:r.getDynamicConfigOverride)||void 0===o?void 0:o.call(r,s,this._user,n),c=null!=l?l:s;return this._enqueueExposure(e,(0,t._createConfigExposure)(this._user,c,this._store.getExposureMapping()),n),this.$emt({name:"dynamic_config_evaluation",dynamicConfig:c}),c}_getExperimentImpl(e,n){var r,o,i,a;const{result:s,details:l}=this._store.getConfig(e),c=(0,t._makeExperiment)(e,l,s);null!=c.__evaluation&&(c.__evaluation.secondary_exposures=(0,t._mapExposures)(null!==(o=null===(r=c.__evaluation)||void 0===r?void 0:r.secondary_exposures)&&void 0!==o?o:[],this._store.getExposureMapping()));const u=null===(a=null===(i=this.overrideAdapter)||void 0===i?void 0:i.getExperimentOverride)||void 0===a?void 0:a.call(i,c,this._user,n),d=null!=u?u:c;return this._enqueueExposure(e,(0,t._createConfigExposure)(this._user,d,this._store.getExposureMapping()),n),this.$emt({name:"experiment_evaluation",experiment:d}),d}_getConfigListImpl(){return this._store.getConfigList()}_getLayerImpl(e,n){var r,o,i;const{result:a,details:s}=this._store.getLayer(e),l=(0,t._makeLayer)(e,s,a),c=null===(o=null===(r=this.overrideAdapter)||void 0===r?void 0:r.getLayerOverride)||void 0===o?void 0:o.call(r,l,this._user,n);(null==n?void 0:n.disableExposureLog)&&this._logger.incrementNonExposureCount(e);const u=(0,t._mergeOverride)(l,c,null!==(i=null==c?void 0:c.__value)&&void 0!==i?i:l.__value,(r=>{(null==n?void 0:n.disableExposureLog)||this._enqueueExposure(e,(0,t._createLayerParameterExposure)(this._user,u,r,this._store.getExposureMapping()),n)}));return this.$emt({name:"layer_evaluation",layer:u}),u}_getParameterStoreImpl(e,t){var n,r;const{result:i,details:a}=this._store.getParamStore(e);this._logger.incrementNonExposureCount(e);const s={name:e,details:a,__configuration:i,get:(0,o._makeParamStoreGetter)(this,i,t)},l=null===(r=null===(n=this.overrideAdapter)||void 0===n?void 0:n.getParamStoreOverride)||void 0===r?void 0:r.call(n,s,t);return null!=l&&(s.__configuration=l.config,s.details=l.details,s.get=(0,o._makeParamStoreGetter)(this,l.config,t)),s}};return NN.default=a,NN}var XN=(HN||(HN=1,function(e){var t=mw.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=mw.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigClient=void 0;const r=wN(),o=YN();e.StatsigClient=o.default,n(wN(),e);const i=Object.assign((0,r._getStatsigGlobal)(),{StatsigClient:o.default});e.default=i}(mw)),mw);function KN(){return r(this,void 0,void 0,(function*(){const[e,t,n]=yield Promise.all([RI(),TI(),dI()]);let r;if(e)r=e;else if(t)r=t;else{if(!n)throw new Error("Unable to determine Statsig userID: organization_id, account_id, and installation_id are all unavailable");r=n}const o={};return e&&(o.organizationId=e),t&&(o.accountId=t),n&&(o.instanceId=n,o.stableID=n),{userID:r,customIDs:o}}))}let QN,ZN,eR;function tR(){return r(this,void 0,void 0,(function*(){return QN||(ZN||(ZN=rR(),ZN))}))}function nR(){return r(this,void 0,void 0,(function*(){return QN=void 0,ZN=void 0,ZN||(ZN=rR(),ZN)}))}function rR(){return r(this,void 0,void 0,(function*(){try{const{userID:e,customIDs:t}=yield KN(),n=tT(),r="testing"===n?"staging":n,o="client-m2GV5yr4SG3NcCbgnasLgE993KOrnLGfJmqncTUSi1g",i=new XN.StatsigClient(o,{userID:e,customIDs:t},{environment:{tier:r}});return yield i.initializeAsync(),QN=i,i}catch(e){throw ZN=void 0,new Error(`Failed to initialize Statsig client: ${e instanceof Error?e.message:String(e)}`)}}))}function oR(e=1e3){eR&&clearTimeout(eR),eR=setTimeout((()=>r(this,void 0,void 0,(function*(){try{yield nR()}catch(e){console.error(`Error initializing Statsig client after storage change: ${e}`)}finally{eR=void 0}}))),e)}class iR{constructor(e,t){this.experimentName=e,this.statsigExperiment=t}getName(){return this.experimentName}getCohort(){var e,t,n;return(null===(t=null===(e=this.statsigExperiment)||void 0===e?void 0:e.getGroupName)||void 0===t?void 0:t.call(e))||(null===(n=this.statsigExperiment)||void 0===n?void 0:n.groupName)||null}get(e,t){var n,r,o;return null!==(o=null===(r=null===(n=this.statsigExperiment)||void 0===n?void 0:n.get)||void 0===r?void 0:r.call(n,e,t))&&void 0!==o?o:t}}class aR{constructor(){}static getInstance(){return aR.instance||(aR.instance=new aR),aR.instance}initialize(e=1e3){oR(e)}getClient(){return r(this,void 0,void 0,(function*(){return tR()}))}checkFeatureFlag(e){return r(this,void 0,void 0,(function*(){var t;try{return null!==(t=(yield this.getClient()).checkGate(e))&&void 0!==t&&t}catch(t){return console.error(`Error checking feature flag "${e}":`,t),!1}}))}getExperiment(e){return r(this,void 0,void 0,(function*(){try{const t=(yield this.getClient()).getExperiment(e);return new iR(e,t)}catch(t){return console.error(`Error getting experiment "${e}":`,t),new iR(e,null)}}))}}function sR(){return r(this,void 0,void 0,(function*(){return aR.getInstance()}))}function lR(e){return r(this,void 0,void 0,(function*(){const t=yield nI(["selectedTargetLanguage"]);chrome.tabs.sendMessage(e,{action:QA.dlTranslateInline,targetLang:t.selectedTargetLanguage})}))}function cR(e){return r(this,void 0,void 0,(function*(){const t=yield nI(["targetLanguageUserInput"]);chrome.tabs.sendMessage(e,{action:QA.dlTranslateInput,targetLang:t.targetLanguageUserInput})}))}function uR(e){return r(this,void 0,void 0,(function*(){const t=yield nI(["selectedTargetLanguage"]);chrome.tabs.sendMessage(e,{action:ZA.dlImproveInline,targetLang:t.selectedTargetLanguage})}))}function dR(e){return r(this,void 0,void 0,(function*(){const t=yield nI(["selectedTargetLanguage"]);chrome.tabs.sendMessage(e,{action:ZA.dlImproveInput,targetLang:t.selectedTargetLanguage})}))}const pR=e=>r(void 0,void 0,void 0,(function*(){yield oI();const t=yield nI(["selectedTargetLanguage","installationId","languagePreferenceForReading"]),n=e.payload.nicheIntegration||yn,r={sourceLang:e.payload.sourceLang||"auto",targetLangCode:t.selectedTargetLanguage,sourceTexts:e.payload.requests.map((e=>e.text)),isWriteRequest:e.payload.isWriteRequest};let o,i,a;try{const e=yield(e=>Mb(e))(r);o=e.result,i=e.processedText,a=e.glossaryTrackingInfo}catch(r){try{e.payload.isWriteRequest?jE(ar,{lang:e.payload.websiteLanguage,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:0,nicheIntegration:n,error:r.name,trigger:e.payload.trigger}):Jy({errorCode:r.name,errorMessage:r.message,domainName:e.payload.domainName,targetLang:t.selectedTargetLanguage,websiteLanguage:e.payload.websiteLanguage,trigger:e.payload.trigger,characterCount:e.payload.requests.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw r}QR();const s=e.payload.trigger;try{if(o.detectedLanguages){for(const e in o.detectedLanguages)(t.languagePreferenceForReading[e]||0===t.languagePreferenceForReading[e])&&(t.languagePreferenceForReading[e]=VI(t.languagePreferenceForReading[e],o.detectedLanguages[e]));chrome.storage.sync.set({languagePreferenceForReading:t.languagePreferenceForReading})}}catch(e){console.error(e)}try{e.payload.isWriteRequest?jE(Zn,{lang:e.payload.sourceLang,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:i.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:n,trigger:e.payload.trigger}):By({installationId:t.installationId,trigger:s||N,websiteLanguage:o.source_lang,targetLanguage:t.selectedTargetLanguage,characterCount:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),domainName:e.payload.domainName,nicheIntegration:n,glossaryTrackingInfo:a})}catch(e){console.error(e)}return i.map((e=>({text:e.join(""),detected_source_language:o.source_lang})))})),gR=e=>r(void 0,void 0,void 0,(function*(){return yield e.payload.isWriteRequest?hw(e):(e=>r(void 0,[e],void 0,(function*({payload:{domainName:e,requests:t,targetLang:n,websiteLanguage:r,formality:o,platformBehavior:i,skipDapReporting:a}}){yield oI();const{installationId:s,targetLanguageUserInput:l}=yield nI(["targetLanguageUserInput","installationId"]),c=n||l,u=i||yn,d=i!==yn?k:P;let p;try{p=yield nw({sourceTexts:t.map((e=>e.text))||[],selectedTargetLanguage:c,formality:o})}catch(n){throw TA((()=>Jy({errorCode:n.name,errorMessage:n.message,domainName:e,targetLang:c,websiteLanguage:r,nicheIntegration:u,trigger:d,characterCount:t.reduce(((e,t)=>e+t.text.length),0)}))),n}QR(),i===bn?yL():i===wn&&SL();const g=p.processedTranslation.map((e=>e.text)),h=p.processedTranslation[0].detected_source_language;return a||TA((()=>By({installationId:s,trigger:d,websiteLanguage:h,targetLanguage:c,characterCount:t.reduce(((e,t)=>e+t.text.length),0),domainName:e,nicheIntegration:u,glossaryTrackingInfo:p.glossaryTrackingInfo}))),[{detected_source_language:h,text:g.flat().join(""),texts:g}]})))(e)})),hR=e=>r(void 0,void 0,void 0,(function*(){var t;yield CI(),yield oI();const n=yield nI(["installationId","languagePreferenceForWriting","zendeskActiveTermbase"]),r=[e.payload.content],o=e.payload.targetLang,i=Sn,a=wb.TRANSLATE,s=e.payload.formality;let l,c;const u=[],d=[];let p=!1;try{const e=yield Nb({texts:r,mode:a});let i;if(c=e.result.lang.detected,null===(t=n.zendeskActiveTermbase)||void 0===t?void 0:t.termDictionaries)for(let e of n.zendeskActiveTermbase.termDictionaries)if(e.languagePair===`${Jv(c)}>${Jv(o)}`.toLowerCase()){i={id:n.zendeskActiveTermbase.id,dictionaryId:e.id},p=!0;break}for(const t of e.result.texts){const e=[];for(const n of t.chunks)for(const t of n.sentences)d.push(t),e.push(d.length-1);u.push(e)}const g=d.map(((e,t)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:t<d.length-1?[d[t+1].text]:[],raw_en_context_before:t>0?[d[t-1].text]:[],sentences:[Object.assign(Object.assign({},e),{id:t+1})]})));l=yield Rb(Object.assign(Object.assign({mode:a,jobs:g,sourceLang:c,targetLang:Jv(o),textType:"richtext"},s&&{formality:s}),i&&{termbase:i}))}catch(t){try{Jy({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:o,websiteLanguage:e.payload.websiteLanguage,trigger:P,characterCount:r.reduce(((e,t)=>e+t.length),0)})}catch(e){console.log(e)}throw t}const g=l.result.translations.map(((e,t)=>`${d[t].prefix}${e.beams[0].sentences[0].text}`)),h=u.map((e=>e.map((e=>g[e]))));if(QR(),KR(),!0!==e.payload.skipDapReporting)try{By({installationId:n.installationId,trigger:k,websiteLanguage:c,targetLanguage:o,characterCount:r.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:i,glossaryTrackingInfo:{isGlossaryEnabled:p}})}catch(e){console.error(e)}return[{detected_source_language:c,text:h[0],texts:h}]})),fR=e=>r(void 0,void 0,void 0,(function*(){yield CI();const{texts:t,mode:n}=e.payload;return yield Nb({texts:t,mode:n})})),_R=e=>r(void 0,void 0,void 0,(function*(){var t;yield CI(),yield oI();const n=yield nI(["installationId","zendeskActiveTermbase"]),r=wb.TRANSLATE,o=Sn,{targetLang:i}=e.payload,a=[e.payload.text],s=a.map((e=>e.replaceAll("\n","<br>"))),l=[],c=[];let u,d,p,g=!1;try{const e=yield Nb({texts:s,mode:r,textType:"richtext"});if(p=e.result.lang.detected,null===(t=n.zendeskActiveTermbase)||void 0===t?void 0:t.termDictionaries)for(let e of n.zendeskActiveTermbase.termDictionaries)if(e.languagePair===`${Jv(p)}>${Jv(i)}`.toLowerCase()){u={id:n.zendeskActiveTermbase.id,dictionaryId:e.id},g=!0;break}for(const t of e.result.texts){const e=[];for(const n of t.chunks)for(const t of n.sentences)c.push(t),e.push(c.length-1);l.push(e)}const o=c.map(((e,t)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:t<c.length-1?[c[t+1].text]:[],raw_en_context_before:t>0?[c[t-1].text]:[],sentences:[Object.assign(Object.assign({},e),{id:t+1})]})));d=yield Rb(Object.assign({mode:r,jobs:o,sourceLang:p,targetLang:Jv(i),textType:"richtext"},u&&{termbase:u}))}catch(t){try{Jy({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:i,trigger:N,characterCount:a.reduce(((e,t)=>e+t.length),0)})}catch(e){console.log(e)}throw t}QR(),KR();const h=d.result.translations.map(((e,t)=>`${c[t].prefix}${e.beams[0].sentences[0].text}`)),f=l.map((e=>e.map((e=>h[e])))),_=f[0].join("");try{By({installationId:n.installationId,trigger:k,websiteLanguage:p,targetLanguage:i,characterCount:a.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:o,glossaryTrackingInfo:{isGlossaryEnabled:g}})}catch(e){console.error(e)}return _}));function mR(){return r(this,void 0,void 0,(function*(){let e,t,n=[];try{e=yield FR()}catch(e){t=e.message}if(!(null==e?void 0:e.isLoggedIn)||t)return[[],t];try{n=(yield Lb()).result||[]}catch(e){t=e.message}return[n,t]}))}const vR=e=>r(void 0,void 0,void 0,(function*(){yield TA((()=>iE({language:e.payload.language,domainName:e.payload.domainName})))})),TR=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>Yy()))})),yR=e=>r(void 0,void 0,void 0,(function*(){yield TA((()=>Xy({domainName:e.domainName,pathName:e.pathName,extensionOpenedFrom:zT(e.extensionContext)})))})),ER=e=>r(void 0,void 0,void 0,(function*(){yield TA((()=>Ky({logoClickedFrom:YT(e.extensionContext)})))}));function SR(){return r(this,void 0,void 0,(function*(){yield TA((()=>tE()))}))}function IR(){return r(this,void 0,void 0,(function*(){yield TA((()=>nE()))}))}const AR=e=>r(void 0,void 0,void 0,(function*(){yield TA((()=>rE({uiFunction:e.uiFunction,uiLocation:e.uiLocation,nicheIntegration:e.nicheIntegration||yn})))})),bR=e=>r(void 0,void 0,void 0,(function*(){yield TA((()=>oE({settingType:e.settingType,uiFunction:e.uiFunction,uiLocation:e.uiLocation,domainName:e.domainName})))})),wR=e=>r(void 0,void 0,void 0,(function*(){yield TA((()=>aE({translationType:e.translationType,domainName:e.domainName})))})),OR=e=>r(void 0,void 0,void 0,(function*(){yield TA((()=>sE({newPosition:e.newPosition})))})),NR=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>lE(e)))})),RR=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>gE(e)))})),LR=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>_E(e)))})),PR=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>hE(e)))})),CR=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>mE(e)))})),xR=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>fE(e)))})),kR=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>yE(e)))})),DR=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>vE(e)))})),UR=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>IE(e)))}));function MR(){return r(this,arguments,void 0,(function*(e=!1){const t=yield DI(e);return chrome.runtime.sendMessage({action:"dlExperimentsUpdated",payload:{experiments:[...t]}}),t}))}function GR(){return r(this,void 0,void 0,(function*(){tb()}))}function VR(){return r(this,void 0,void 0,(function*(){tb(!0)}))}function $R(){return r(this,void 0,void 0,(function*(){nb({trigger:xn})}))}function FR(){return r(this,void 0,void 0,(function*(){const e=yield _I();return{isLoggedIn:e.isLoggedIn,translatorServiceType:e.translatorServiceType,writeServiceType:e.writeServiceType,hasTermbaseService:e.hasTermbaseService}}))}const jR=e=>r(void 0,void 0,void 0,(function*(){var t,n;switch(e.type){case Y:{const e=yield chrome.storage.sync.get(["notificationsViewed"]);if(null===(t=e.notificationsViewed)||void 0===t?void 0:t.hintKeyboardShortcut)return;yield chrome.storage.sync.set({notificationsViewed:Object.assign(Object.assign({},e.notificationsViewed),{hintKeyboardShortcut:!0})});break}case X:{const t=yield chrome.storage.sync.get(["notificationsViewed"]),r=`showAdsFor${e.options.matchedWord}`;if(null===(n=t.notificationsViewed)||void 0===n?void 0:n[r])return;TA((()=>aS({matchedWord:e.options.matchedWord}))),yield chrome.storage.sync.set({notificationsViewed:Object.assign(Object.assign({},t.notificationsViewed),{[r]:!0})});break}}TA((()=>Qy({notificationType:e.type})));const r=yield chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(r[0].id,{action:eb.dlShowNotification,payload:e})}));function WR(){return r(this,void 0,void 0,(function*(){return yield chrome.commands.getAll()}))}const qR=e=>r(void 0,void 0,void 0,(function*(){const t=yield WR();try{Zy({shortcutType:e.shortcutType,location:e.location,shortcut:t.filter((t=>t.name===e.shortcutType))[0].shortcut,nicheIntegration:e.nicheIntegration||yn})}catch(e){console.error(e)}})),BR=e=>r(void 0,void 0,void 0,(function*(){eE({uiAction:e.uiAction,nicheIntegration:e.nicheIntegration||yn})}));function HR(){chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:QA.dlTranslateSelectionRightClick})}))}function JR(){return r(this,void 0,void 0,(function*(){try{const e=yield chrome.tabs.query({active:!0,currentWindow:!0}),t=yield chrome.tabs.sendMessage(e[0].id,{action:eb.dlSelectCaptureArea}),n=yield chrome.tabs.captureVisibleTab(null,{format:"png"});chrome.runtime.sendMessage({action:QA.dlTranslateSelectedArea,imageUrl:n,selectedArea:t})}catch(e){const t=e instanceof Error?e.message:String(e)||"";yS({errorCode:yT,errorMessage:t}),ZS({action:yT,error:t})}}))}function zR(){try{chrome.tabs.query({active:!0,currentWindow:!0},(e=>{e[0]&&chrome.sidePanel.open({windowId:e[0].windowId}).catch((e=>{console.error(e),fS()}))})),hS()}catch(e){console.error(e),fS()}}function YR(){return r(this,void 0,void 0,(function*(){chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:eb.dlTranslateWebPageByRightMenuClick})})),yield TA((()=>ES({trigger:po})))}))}const XR=e=>r(void 0,void 0,void 0,(function*(){yield TA((()=>TE(e)))}));function KR(){return r(this,void 0,void 0,(function*(){const e=(yield chrome.storage.sync.get(["zendeskSuccessfulTranslations"])).zendeskSuccessfulTranslations+1;yield chrome.storage.sync.set({zendeskSuccessfulTranslations:e})}))}function QR(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.sync.get(["isReviewPopupShown","successfulTranslations","reviewPopupRemindAt"]),t=e.successfulTranslations+1;if(t<(yield function(){return r(this,arguments,void 0,(function*(e=!1){return e?2:10}))}(oT())))return void(yield chrome.storage.sync.set({successfulTranslations:t}));const n=yield chrome.tabs.query({active:!0,currentWindow:!0});let o=e.isReviewPopupShown;if(!o&&(null===e.reviewPopupRemindAt||e.reviewPopupRemindAt<Date.now())){const e=yield r(void 0,void 0,void 0,(function*(){var e;const t=yield PI();return null!==(e=null==t?void 0:t.preventFeedbackSurvey)&&void 0!==e&&e}));e||(chrome.tabs.sendMessage(n[0].id,{action:eb.dlShowAskForAReviewPopup}),o=!0)}yield chrome.storage.sync.set({isReviewPopupShown:o,successfulTranslations:t})}))}const ZR=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=(e=>{let t=S.find((t=>t.langCode.toUpperCase()===e.toUpperCase()));return t||(t=S.find((t=>Jv(t.langCode).toUpperCase()===Jv(e).toUpperCase())),t)})(e.lang);if(Ro())!function(e,t,n){const r=new SpeechSynthesisUtterance(e);r.lang=t,r.onend=function(){n()},speechSynthesis.speak(r)}(e.text,n.langCodeForSpeech,(()=>{chrome.tabs.sendMessage(t,{action:"dlVoiceOverStopped"})}));else{const r={lang:n.langCodeForSpeech,onEvent:function(e){"end"===e.type&&chrome.tabs.sendMessage(t,{action:"dlVoiceOverStopped"}),"error"==e.type&&chrome.tabs.sendMessage(t,{action:"dlVoiceOverErrorOccurred"})}};(function(){var e;const t=(null===(e=null===navigator||void 0===navigator?void 0:navigator.userAgentData)||void 0===e?void 0:e.platform)||(null===navigator||void 0===navigator?void 0:navigator.platform)||void 0;return t&&-1!==(null==t?void 0:t.toUpperCase().indexOf("MAC"))})()&&(r.rate=.9,n.voice&&un===chrome.runtime.id&&(r.voiceName=n.voice)),chrome.tts.speak(e.text,r)}})),eL=()=>r(void 0,void 0,void 0,(function*(){let e;return e=Ro()?yield new Promise(((e,t)=>{if("speechSynthesis"in window){const t=speechSynthesis.getVoices();t.length>0?e(t):speechSynthesis.onvoiceschanged=()=>{const t=speechSynthesis.getVoices();e(t)}}else t(new Error("SpeechSynthesis not supported"))})):yield chrome.tts.getVoices(),e.map((e=>Jv(e.lang).toUpperCase()))}));function tL(){return r(this,void 0,void 0,(function*(){if(!Ro())return chrome.tts.stop();speechSynthesis.cancel()}))}const nL=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>EE(e)))})),rL=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>bE(e)))})),oL=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>SE(e.trigger)))})),iL=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>wE(e)))})),aL=e=>r(void 0,void 0,void 0,(function*(){return yield GI(e)})),sL=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>OE(e)))})),lL=()=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>NE()))})),cL=()=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>RE()))})),uL=e=>r(void 0,[e],void 0,(function*({eventType:e,zendeskMetaData:t}){return yield TA((()=>PE(e,t)))})),dL=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>LE(e)))})),pL=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>DE(e)))})),gL=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>UE(e)))})),hL=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>GE(e)))})),fL=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>VE(e)))})),_L=e=>r(void 0,[e],void 0,(function*({eventType:e,deeplWriteMetaData:t}){return yield TA((()=>jE(e,t)))})),mL=e=>r(void 0,void 0,void 0,(function*(){return yield(e=>r(void 0,[e],void 0,(function*({nicheIntegration:e,requests:t,sourceLang:n,skipDapReporting:r,correctionsOnly:o,trigger:i,fallbackOnPartialFailure:a}){const s=null!=i?i:e&&e!==yn?Fr:Vr;try{yield oI();const{processedImprovements:i}=yield gw(t.map((e=>e.text)),n,o,a);r||TA((()=>jE(Zn,{lang:i[0].detected_source_language,sourceLength:t.reduce(((e,t)=>e+t.text.length),0),targetLength:i.reduce(((e,t)=>e+t.text.length),0),nicheIntegration:e||yn,trigger:s})));const l=i.some((e=>e.error));return{detected_source_language:i[0].detected_source_language,text:i.map(((e,n)=>e.error?t[n].text:e.text)).join(""),texts:i.map(((e,n)=>e.error?t[n].text:e.text)),errors:l?i.map((e=>{var t;return null!==(t=e.error)&&void 0!==t?t:null})):void 0}}catch(r){throw TA((()=>jE(ar,{lang:n,sourceLength:t.reduce(((e,t)=>e+t.text.length),0),targetLength:void 0,nicheIntegration:e||yn,error:r.name,trigger:s}))),r}})))(e.payload)})),vL=e=>r(void 0,[e],void 0,(function*({eventType:e,acceptOrRevertMetadata:t}){yield TA((()=>HE(e,t)))})),TL=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>JE(e)))}));function yL(){return r(this,void 0,void 0,(function*(){const e=(yield chrome.storage.sync.get(["successfulTranslationsGmail"])).successfulTranslationsGmail+1;yield chrome.storage.sync.set({successfulTranslationsGmail:e})}))}const EL=e=>r(void 0,void 0,void 0,(function*(){yield TA((()=>zE(e)))}));function SL(){return r(this,void 0,void 0,(function*(){const e=(yield chrome.storage.sync.get(["successfulTranslationsGSlides"])).successfulTranslationsGSlides+1;yield chrome.storage.sync.set({successfulTranslationsGSlides:e})}))}const IL=e=>r(void 0,[e],void 0,(function*({eventType:e,alternativesMetaData:t}){return yield TA((()=>QE(e,t)))}));function AL(){return r(this,arguments,void 0,(function*(e=!1,t=!0){let n;try{n=yield dA(e,t)}catch(e){throw e.name===jI&&nb({trigger:kn,reason:e.name,showAlert:!0}),e}return n}))}function bL(){return r(this,void 0,void 0,(function*(){let e;return e=yield rb(),e}))}function wL(){return r(this,void 0,void 0,(function*(){return yield SI()}))}const OL=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>YE(e.type)))})),NL=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>XE(e.type)))})),RL=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>CE(e)))})),LL=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>ZE(!0,e)))})),PL=e=>r(void 0,void 0,void 0,(function*(){return yield TA((()=>ZE(!1,e)))})),CL=e=>r(void 0,[e],void 0,(function*({cta:e,type:t}){return yield TA((()=>KE(t,e)))})),xL=e=>r(void 0,[e],void 0,(function*({text:e}){return yield Ob({texts:[e],targetLang:"EN",mode:wb.WRITE})})),kL=e=>r(void 0,void 0,void 0,(function*(){return yield eS(e)}));function DL(){tS()}const UL=e=>r(void 0,void 0,void 0,(function*(){return yield nS(e)})),ML=e=>r(void 0,void 0,void 0,(function*(){yield CI(),yield oI();const t=yield nI(["activeTermbaseId","targetLanguageUserInput","session","installationId","languagePreferenceForWriting",mo.auth.isLoggedIn,"isGlossaryEnabled","hasTermbaseService"]),n=e.payload.texts,r=e.payload.mode?e.payload.mode:wb.TRANSLATE,o=e.payload.targetLang,i=e.payload.writeLang,a=Bv(o);let s;const l=[],c=[];let u,d,p=!1,g=!1,h=!1;try{const h=yield Nb({texts:n,mode:r,advancedMode:!!e.payload.style});if(s=h.result.lang.detected,uT({isLoggedIn:t.isLoggedIn,hasTermbaseService:t.hasTermbaseService})&&t.activeTermbaseId&&r!==wb.WRITE&&t.isGlossaryEnabled)try{const[e]=yield mR(),n=Db(t.activeTermbaseId,e);if(n)for(let e of n.termDictionaries)if(e.languagePair===`${Jv(s)}>${Jv(a.langCode)}`.toLowerCase()){d={id:n.id,dictionaryId:e.id},p=!0,g=n.shared;break}}catch(e){console.log({e:e,message:"fetching glossaries failed"})}for(const e of h.result.texts){const t=[];for(const n of e.chunks)for(const e of n.sentences)c.push(e),t.push(c.length-1);l.push(t)}const f=c.map(((t,n)=>Object.assign(Object.assign({kind:"default",preferred_num_beams:6,raw_en_context_after:n<c.length-1?[c[n+1].text]:[],raw_en_context_before:n>0?[c[n-1].text]:[],sentences:[Object.assign(Object.assign({},t),{id:n+1})]},e.payload.style&&{style_variant:e.payload.style,write_variant_requests:["main","variants"]}),e.payload.formality&&{formality:e.payload.formality}))),_=a.regionalVariant&&!i;u=yield Rb(Object.assign(Object.assign({mode:r,jobs:f,sourceLang:i&&r===wb.WRITE?Jv(i):s,targetLang:Jv(i&&r===wb.WRITE?i:o),textType:"plaintext",styleVariant:e.payload.style},d&&{termbase:d}),_&&{regionalVariant:a.regionalVariant}))}catch(t){throw r===wb.WRITE?jE(ar,{lang:s,sourceLength:n.reduce(((e,t)=>e+t.length),0),targetLength:0,nicheIntegration:yn,error:t.name,style:e.payload.style,trigger:$r}):Jy({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:o,websiteLanguage:s,trigger:C,characterCount:n.reduce(((e,t)=>e+t.length),0)}),t}p&&(h=Ub(u.result)),QR();const f=u.result.translations,_=u.result.translations.map(((e,t)=>`${c[t].prefix}${e.beams[0].sentences[0].text}`)),m=function(e,t){let n=e[0].beams.length;e.forEach((e=>{e.beams.length<n&&(n=e.beams.length)}));const r=[];for(let o=0;o<n;o++){let n=[];for(let r=0;r<e.length;r++){const i=`${t[r].prefix}`;n.push(`${i}${e[r].beams[o].sentences[0].text}`)}r.push(n)}return r}(f,c),v=l.map((e=>e.map((e=>_[e])))),T=m.map((e=>l.map((t=>t.map((t=>e[t])))))),y=function(e,t){let n=e[0].beams.length;e.forEach((e=>{e.beams.length<n&&(n=e.beams.length)}));const r=[];for(let o=0;o<n;o++){let n="";for(let r=0;r<e.length;r++){n=`${n}${`${t[r].prefix}`}${e[r].beams[o].sentences[0].text}`}r.push(n)}return r}(f,c),E=T.map((e=>e.map((e=>e.join("")))));try{r===wb.WRITE?(jE(Zn,{lang:s,sourceLength:n.reduce(((e,t)=>e+t.length),0),targetLength:v.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:yn,style:e.payload.style,trigger:$r}),jE(ir,{lang:s,sourceLength:n.reduce(((e,t)=>e+t.length),0),targetLength:v.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:yn,style:e.payload.style,trigger:$r})):By(Object.assign({installationId:t.installationId,trigger:C,websiteLanguage:s,targetLanguage:o,characterCount:n.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:yn},p&&{glossaryTrackingInfo:{isGlossaryEnabled:!!d,isGlossaryShared:g,didGlossaryChangeTranslation:h}}))}catch(e){console.error(e)}return{detected_source_language:s,processedText:v[0].join(""),textLinesComponents:l,alternatives:y,alternativeComponents:E}}));function GL(){rS()}function VL(e){oS(e)}function $L(){iS()}function FL(e){return r(this,void 0,void 0,(function*(){yield qS(e),yield fI(e)}))}function jL(e){sS(e)}function WL(e){lS(e)}function qL(e){cS(e)}function BL(){try{return Ro()?void browser.action.onClicked.addListener((()=>{browser.sidebarAction.toggle()})):(chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!0}).catch((e=>console.error(e))),void chrome.sidePanel.setOptions({enabled:!0}).catch((e=>console.error(e))))}catch(e){nT()&&console.error(e)}}function HL(){return r(this,void 0,void 0,(function*(){const e=yield Fb();if((yield xI())&&(null==e?void 0:e.whiteLabelLogoId))try{const t=yield Wb(e.whiteLabelLogoId);yield mA(t.imageBlob)}catch(e){console.error(e),yield vA()}else yield vA()}))}function JL(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get([mo.auth.isLoggedIn,mo.whiteLabelLogoId]);if((yield xI())&&e.isLoggedIn&&e.whiteLabelLogoId)try{const e=yield YS();e&&(yield mA(e.imageBlob))}catch(e){yield vA()}else yield vA()}))}function zL(){SS()}function YL(){return r(this,void 0,void 0,(function*(){try{const{enforceSsoAutologin:e}=yield kI();if(e){(yield cI())||(yield tb())}}catch(e){console.error(e),Hy({errorCode:ET,errorMessage:e.message}),ZS({action:ET,error:e.message})}}))}function XL(e){return r(this,void 0,void 0,(function*(){return(yield sR()).checkFeatureFlag(e)}))}function KL(e){return r(this,void 0,void 0,(function*(){try{const t=yield sR(),n=yield t.getExperiment(e.experimentName),r=n.getCohort();let o;return e.parameterName&&(o=n.get(e.parameterName,e.defaultValue)),{value:o,groupName:r}}catch(t){return console.error(`Error getting parameter from experiment "${e.experimentName}":`,t),{value:e.defaultValue,groupName:null}}}))}const QL=e=>r(void 0,[e],void 0,(function*({payload:{mode:e,sentences:t,sourceLang:n,targetLang:r,domain:o,textLines:i}}){yield oI();const{installationId:a}=yield nI([mo.installationId]),s=e===wb.WRITE;yield chrome.storage.sync.set({gdocsWriteLang:s?n:null});const l=new Date,c=Bv(r),u=r=>{var s,u,d;try{const p=t&&t.length>0?t.map((e=>e.text)):i;e===wb.TRANSLATE?By({installationId:a,trigger:k,websiteLanguage:n,targetLanguage:c.langCode,characterCount:null!==(s=null==p?void 0:p.reduce(((e,t)=>e+t.length),0))&&void 0!==s?s:0,translationPerformance:{isFirstRequest:!1,processingTimeInMs:(new Date).getTime()-l.getTime()},domainName:o,nicheIntegration:En}):jE(Zn,{lang:n,sourceLength:null!==(u=null==p?void 0:p.reduce(((e,t)=>e+t.length),0))&&void 0!==u?u:0,targetLength:null!==(d=null==r?void 0:r.reduce(((e,t)=>e+t.length),0))&&void 0!==d?d:0,nicheIntegration:En,trigger:Fr})}catch(e){console.error(e)}},d=i||t.map((e=>e.text));if(s){const e=yield uw({sourceTexts:d});return u(e.improvements.map((e=>e.text))),e}{const e=yield Jb({sourceTexts:d,targetLangCode:c.regionalVariant?c.regionalVariant:c.langCode,sourceLang:n});return u(),e}}));function ZL(e){try{const t=[];if(e){const n=e.split("_");for(let e=0;e<n.length;e++){const r=n[e].split(".");4===r.length&&t.push({id:parseInt(r[0],10)||0,name:r[1],variant:parseInt(r[2],10)||0,breakout:parseInt(r[3],10)||0})}}return t}catch(e){return console.error("Failed to parse release groups:",e),[]}}const eP=["ace","af","an","as","ay","az","ba","be","bho","bn","br","bs","ca","ceb","ckb","cy","eo","eu","fa","ga","gl","gn","gom","gu","ha","hi","hr","ht","hy","ig","is","jv","ka","kk","kmr","ky","la","lb","lmo","ln","mai","mg","mi","mk","mn","mr","ms","mt","my","ne","oc","pag","pam","prs","ps","qu","sa","scn","sq","sr","su","sw","ta","te","tg","tk","tl","tn","ts","tt","ur","uz","wo","xh","yue","zu","ml","st","om","pa","yi"];function tP(e){return r(this,void 0,void 0,(function*(){try{const t=yield DI();if(LS(t,NS))return eP.map((e=>({code:e,isNew:!1})));if(LS(t,OS)){const t=yield function(e){return r(this,void 0,void 0,(function*(){if(Ro()||!chrome.cookies)return!1;if(e)try{return!!ZL(e).find((e=>"WDW-1602"===e.name&&2===e.variant))}catch(e){console.error("Failed to parse releaseGroups from localStorage:",e)}try{const e=(yield chrome.cookies.getAll({domain:"deepl.com"})).find((e=>"releaseGroups"===e.name));if(!e||!e.value)return!1;return!!ZL(e.value).find((e=>"WDW-1602"===e.name&&2===e.variant))}catch(e){return console.error("Failed to check releaseGroups cookie:",e),!1}}))}(e);if(t)return eP.map((e=>({code:e,isNew:!1})))}return[]}catch(e){return console.error("Failed to get experimental language codes:",e),[]}}))}function nP(e){return r(this,void 0,void 0,(function*(){const t=(yield tP(e)).map((e=>({langCode:e.code.toUpperCase(),langCodeForIta:e.code,langCodeForSpeech:e.code,isNew:e.isNew}))),n=[...S.map((e=>Object.assign(Object.assign({},e),{isNew:!1}))),...t],r=yield chrome.storage.sync.get([mo.selectedTargetLanguage,mo.targetLanguageUserInput,mo.targetLanguageSidePanel]);n.some((e=>e.langCode===r.selectedTargetLanguage))||chrome.storage.sync.set({[mo.selectedTargetLanguage]:zv()}),n.some((e=>e.langCode===r.targetLanguageUserInput))||chrome.storage.sync.set({[mo.targetLanguageUserInput]:""}),n.some((e=>e.langCode===r.targetLanguageSidePanel))||chrome.storage.sync.set({[mo.targetLanguageSidePanel]:""}),yield chrome.storage.local.set({translationLanguages:n})}))}const rP="ITA_RATE_LIMITED",oP="ITA_RATE_LIMITED_RESTRICTED",iP="ITA_WRITE_GENERIC_ERROR",aP="ITA_TRANSLATE_GENERIC_ERROR",sP="ITA_TOKEN_EXPIRED",lP="ITA_GEO_BLOCKED",cP={session_ended_mutual_end:"000_session_ended_mutual_end",session_ended_idle_timeout:"400_session_ended_idle_timeout",quota_exceeded:"802_quota_exceeded",rate_limited:"800_rate_limited",rate_limited_restricted:"801_rate_limited_restricted",session_ended_transient:"1001_session_ended_transient",session_ended_internal_error:"1300_session_ended_internal_error",session_ended_manual_eviction:"1301_session_ended_manual_eviction",session_ended_authentication_token_expired:"1600_session_ended_authentication_token_expired",missing_or_invalid_authentication:"1601_missing_or_invalid_authentication"},uP={unsupported_session_mode:"300_unsupported_session_mode",obsolete_version_unavailable:"1200_obsolete_version_unavailable",missing_or_invalid_authentication:"1302_missing_or_invalid_authentication",unhandled_internal_error:"1302_unhandled_internal_error"},dP={invalid_session_token:"301_invalid_session_token",invalid_session_version:"302_invalid_session_version",unknown_session:"303_unknown_session",invalid_participant_id:"305_invalid_participant_id",service_level_mismatch:"700_service_level_mismatch",multiple_invocations_forbidden:"900_multiple_invocations_forbidden"},pP={message_validation_failed:"304_message_validation_failed",append_not_allowed:"901_append_not_allowed"};function gP(e){switch(e){case cP.quota_exceeded:case cP.rate_limited:case cP.rate_limited_restricted:case cP.session_ended_internal_error:case cP.session_ended_manual_eviction:case uP.unsupported_session_mode:case uP.obsolete_version_unavailable:case dP.invalid_session_token:case dP.invalid_session_version:case dP.unknown_session:case dP.invalid_participant_id:case dP.service_level_mismatch:case dP.multiple_invocations_forbidden:case pP.message_validation_failed:case cP.missing_or_invalid_authentication:case uP.unhandled_internal_error:return!0;default:return!1}}function hP(e,t=!1){switch(e){case cP.rate_limited:return rP;case cP.rate_limited_restricted:return oP;case cP.quota_exceeded:return rP;case cP.session_ended_authentication_token_expired:return sP;default:return t?iP:aP}}function fP(e){if(e.includes("Status code '451'"))return lP}const _P={TEXT_CHANGE:"textChange",TARGET_LANGUAGE_CHANGE:"targetLanguageChange",FORMALITY_CHANGE:"formalityChange",WRITE_STYLE_CHANGE:"writeStyleChange"},mP="translatorRequestedTargetLanguageValue",vP="translatorFormalityModeValue",TP="writeStyleVariantValue",yP={},EP=(e,t)=>{yP[e]||(yP[e]={}),yP[e]=Object.assign(Object.assign({},yP[e]),t),nT()&&console.log("Updated translate port settings",yP)},SP=e=>{var t;return null!==(t=yP[e])&&void 0!==t?t:{}};function IP(e){e.name in yP&&delete yP[e.name]}const AP={},bP=(e,t)=>{AP[e]||(AP[e]={}),AP[e]=Object.assign(Object.assign({},AP[e]),t),nT()&&console.log("Updated write port settings",AP)},wP=e=>{var t;return null!==(t=AP[e])&&void 0!==t?t:{}};function OP(e){e.name in AP&&delete AP[e.name]}class NP extends Error{constructor(e,t){const n=new.target.prototype;super(`${e}: Status code '${t}'`),this.statusCode=t,this.__proto__=n}}class RP extends Error{constructor(e="A timeout occurred."){const t=new.target.prototype;super(e),this.__proto__=t}}class LP extends Error{constructor(e="An abort occurred."){const t=new.target.prototype;super(e),this.__proto__=t}}class PP extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.transport=t,this.errorType="UnsupportedTransportError",this.__proto__=n}}class CP extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.transport=t,this.errorType="DisabledTransportError",this.__proto__=n}}class xP extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.transport=t,this.errorType="FailedToStartTransportError",this.__proto__=n}}class kP extends Error{constructor(e){const t=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=t}}class DP extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.innerErrors=t,this.__proto__=n}}class UP{constructor(e,t,n){this.statusCode=e,this.statusText=t,this.content=n}}class MP{get(e,t){return this.send({...t,method:"GET",url:e})}post(e,t){return this.send({...t,method:"POST",url:e})}delete(e,t){return this.send({...t,method:"DELETE",url:e})}getCookieString(e){return""}}var GP;!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Information=2]="Information",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.None=6]="None"}(GP||(GP={}));class VP{constructor(){}log(e,t){}}VP.instance=new VP;class $P{static isRequired(e,t){if(null==e)throw new Error(`The '${t}' argument is required.`)}static isNotEmpty(e,t){if(!e||e.match(/^\s*$/))throw new Error(`The '${t}' argument should not be empty.`)}static isIn(e,t,n){if(!(e in t))throw new Error(`Unknown ${n} value: ${e}.`)}}class FP{static get isBrowser(){return!FP.isNode&&"object"==typeof window&&"object"==typeof window.document}static get isWebWorker(){return!FP.isNode&&"object"==typeof self&&"importScripts"in self}static get isReactNative(){return!FP.isNode&&"object"==typeof window&&void 0===window.document}static get isNode(){return"undefined"!=typeof process&&process.release&&"node"===process.release.name}}function jP(e,t){let n="";return WP(e)?(n=`Binary data of length ${e.byteLength}`,t&&(n+=`. Content: '${function(e){const t=new Uint8Array(e);let n="";return t.forEach((e=>{n+=`0x${e<16?"0":""}${e.toString(16)} `})),n.substr(0,n.length-1)}(e)}'`)):"string"==typeof e&&(n=`String data of length ${e.length}`,t&&(n+=`. Content: '${e}'`)),n}function WP(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}async function qP(e,t,n,r,o,i){const a={},[s,l]=JP();a[s]=l,e.log(GP.Trace,`(${t} transport) sending data. ${jP(o,i.logMessageContent)}.`);const c=WP(o)?"arraybuffer":"text",u=await n.post(r,{content:o,headers:{...a,...i.headers},responseType:c,timeout:i.timeout,withCredentials:i.withCredentials});e.log(GP.Trace,`(${t} transport) request complete. Response status: ${u.statusCode}.`)}class BP{constructor(e,t){this._subject=e,this._observer=t}dispose(){const e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),0===this._subject.observers.length&&this._subject.cancelCallback&&this._subject.cancelCallback().catch((e=>{}))}}class HP{constructor(e){this._minLevel=e,this.out=console}log(e,t){if(e>=this._minLevel){const n=`[${(new Date).toISOString()}] ${GP[e]}: ${t}`;switch(e){case GP.Critical:case GP.Error:this.out.error(n);break;case GP.Warning:this.out.warn(n);break;case GP.Information:this.out.info(n);break;default:this.out.log(n)}}}}function JP(){let e="X-SignalR-User-Agent";return FP.isNode&&(e="User-Agent"),[e,zP("8.0.7",YP(),KP(),XP())]}function zP(e,t,n,r){let o="Microsoft SignalR/";const i=e.split(".");return o+=`${i[0]}.${i[1]}`,o+=` (${e}; `,o+=t&&""!==t?`${t}; `:"Unknown OS; ",o+=`${n}`,o+=r?`; ${r}`:"; Unknown Runtime Version",o+=")",o}function YP(){if(!FP.isNode)return"";switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}}function XP(){if(FP.isNode)return process.versions.node}function KP(){return FP.isNode?"NodeJS":"Browser"}function QP(e){return e.stack?e.stack:e.message?e.message:`${e}`}class ZP extends MP{constructor(e){if(super(),this._logger=e,"undefined"==typeof fetch||FP.isNode){const e="function"==typeof __webpack_require__?__non_webpack_require__:require;this._jar=new(e("tough-cookie").CookieJar),"undefined"==typeof fetch?this._fetchType=e("node-fetch"):this._fetchType=fetch,this._fetchType=e("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("could not find global")}());if("undefined"==typeof AbortController){const e="function"==typeof __webpack_require__?__non_webpack_require__:require;this._abortControllerType=e("abort-controller")}else this._abortControllerType=AbortController}async send(e){if(e.abortSignal&&e.abortSignal.aborted)throw new LP;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");const t=new this._abortControllerType;let n;e.abortSignal&&(e.abortSignal.onabort=()=>{t.abort(),n=new LP});let r,o=null;if(e.timeout){const r=e.timeout;o=setTimeout((()=>{t.abort(),this._logger.log(GP.Warning,"Timeout from HTTP request."),n=new RP}),r)}""===e.content&&(e.content=void 0),e.content&&(e.headers=e.headers||{},WP(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");try{r=await this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:!0===e.withCredentials?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...e.headers},method:e.method,mode:"cors",redirect:"follow",signal:t.signal})}catch(e){if(n)throw n;throw this._logger.log(GP.Warning,`Error from HTTP request. ${e}.`),e}finally{o&&clearTimeout(o),e.abortSignal&&(e.abortSignal.onabort=null)}if(!r.ok){const e=await eC(r,"text");throw new NP(e||r.statusText,r.status)}const i=eC(r,e.responseType),a=await i;return new UP(r.status,r.statusText,a)}getCookieString(e){let t="";return FP.isNode&&this._jar&&this._jar.getCookies(e,((e,n)=>t=n.join("; "))),t}}function eC(e,t){let n;switch(t){case"arraybuffer":n=e.arrayBuffer();break;case"text":default:n=e.text();break;case"blob":case"document":case"json":throw new Error(`${t} is not supported.`)}return n}class tC extends MP{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new LP):e.method?e.url?new Promise(((t,n)=>{const r=new XMLHttpRequest;r.open(e.method,e.url,!0),r.withCredentials=void 0===e.withCredentials||e.withCredentials,r.setRequestHeader("X-Requested-With","XMLHttpRequest"),""===e.content&&(e.content=void 0),e.content&&(WP(e.content)?r.setRequestHeader("Content-Type","application/octet-stream"):r.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const o=e.headers;o&&Object.keys(o).forEach((e=>{r.setRequestHeader(e,o[e])})),e.responseType&&(r.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{r.abort(),n(new LP)}),e.timeout&&(r.timeout=e.timeout),r.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),r.status>=200&&r.status<300?t(new UP(r.status,r.statusText,r.response||r.responseText)):n(new NP(r.response||r.responseText||r.statusText,r.status))},r.onerror=()=>{this._logger.log(GP.Warning,`Error from HTTP request. ${r.status}: ${r.statusText}.`),n(new NP(r.statusText,r.status))},r.ontimeout=()=>{this._logger.log(GP.Warning,"Timeout from HTTP request."),n(new RP)},r.send(e.content)})):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class nC extends MP{constructor(e){if(super(),"undefined"!=typeof fetch||FP.isNode)this._httpClient=new ZP(e);else{if("undefined"==typeof XMLHttpRequest)throw new Error("No usable HttpClient found.");this._httpClient=new tC(e)}}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new LP):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}}class rC{static write(e){return`${e}${rC.RecordSeparator}`}static parse(e){if(e[e.length-1]!==rC.RecordSeparator)throw new Error("Message is incomplete.");const t=e.split(rC.RecordSeparator);return t.pop(),t}}rC.RecordSeparatorCode=30,rC.RecordSeparator=String.fromCharCode(rC.RecordSeparatorCode);class oC{writeHandshakeRequest(e){return rC.write(JSON.stringify(e))}parseHandshakeResponse(e){let t,n;if(WP(e)){const r=new Uint8Array(e),o=r.indexOf(rC.RecordSeparatorCode);if(-1===o)throw new Error("Message is incomplete.");const i=o+1;t=String.fromCharCode.apply(null,Array.prototype.slice.call(r.slice(0,i))),n=r.byteLength>i?r.slice(i).buffer:null}else{const r=e,o=r.indexOf(rC.RecordSeparator);if(-1===o)throw new Error("Message is incomplete.");const i=o+1;t=r.substring(0,i),n=r.length>i?r.substring(i):null}const r=rC.parse(t),o=JSON.parse(r[0]);if(o.type)throw new Error("Expected a handshake response from the server.");return[n,o]}}var iC;!function(e){e[e.Invocation=1]="Invocation",e[e.StreamItem=2]="StreamItem",e[e.Completion=3]="Completion",e[e.StreamInvocation=4]="StreamInvocation",e[e.CancelInvocation=5]="CancelInvocation",e[e.Ping=6]="Ping",e[e.Close=7]="Close",e[e.Ack=8]="Ack",e[e.Sequence=9]="Sequence"}(iC||(iC={}));let aC=class{constructor(){this.observers=[]}next(e){for(const t of this.observers)t.next(e)}error(e){for(const t of this.observers)t.error&&t.error(e)}complete(){for(const e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new BP(this,e)}};class sC{constructor(e,t,n){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=e,this._connection=t,this._bufferSize=n}async _send(e){const t=this._protocol.writeMessage(e);let n=Promise.resolve();if(this._isInvocationMessage(e)){this._totalMessageCount++;let e=()=>{},r=()=>{};WP(t)?this._bufferedByteCount+=t.byteLength:this._bufferedByteCount+=t.length,this._bufferedByteCount>=this._bufferSize&&(n=new Promise(((t,n)=>{e=t,r=n}))),this._messages.push(new lC(t,this._totalMessageCount,e,r))}try{this._reconnectInProgress||await this._connection.send(t)}catch{this._disconnected()}await n}_ack(e){let t=-1;for(let n=0;n<this._messages.length;n++){const r=this._messages[n];if(r._id<=e.sequenceId)t=n,WP(r._message)?this._bufferedByteCount-=r._message.byteLength:this._bufferedByteCount-=r._message.length,r._resolver();else{if(!(this._bufferedByteCount<this._bufferSize))break;r._resolver()}}-1!==t&&(this._messages=this._messages.slice(t+1))}_shouldProcessMessage(e){if(this._waitForSequenceMessage)return e.type===iC.Sequence&&(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(e))return!0;const t=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,t<=this._latestReceivedSequenceId?(t===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=t,this._ackTimer(),!0)}_resetSequence(e){e.sequenceId>this._nextReceivingSequenceId?this._connection.stop(new Error("Sequence ID greater than amount of messages we've received.")):this._nextReceivingSequenceId=e.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const e=0!==this._messages.length?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:iC.Sequence,sequenceId:e}));const t=this._messages;for(const e of t)await this._connection.send(e._message);this._reconnectInProgress=!1}_dispose(e){null!=e||(e=new Error("Unable to reconnect to server."));for(const t of this._messages)t._rejector(e)}_isInvocationMessage(e){switch(e.type){case iC.Invocation:case iC.StreamItem:case iC.Completion:case iC.StreamInvocation:case iC.CancelInvocation:return!0;case iC.Close:case iC.Sequence:case iC.Ping:case iC.Ack:return!1}}_ackTimer(){void 0===this._ackTimerHandle&&(this._ackTimerHandle=setTimeout((async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:iC.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0}),1e3))}}class lC{constructor(e,t,n,r){this._message=e,this._id=t,this._resolver=n,this._rejector=r}}var cC;!function(e){e.Disconnected="Disconnected",e.Connecting="Connecting",e.Connected="Connected",e.Disconnecting="Disconnecting",e.Reconnecting="Reconnecting"}(cC||(cC={}));class uC{static create(e,t,n,r,o,i,a){return new uC(e,t,n,r,o,i,a)}constructor(e,t,n,r,o,i,a){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(GP.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},$P.isRequired(e,"connection"),$P.isRequired(t,"logger"),$P.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=null!=o?o:3e4,this.keepAliveIntervalInMilliseconds=null!=i?i:15e3,this._statefulReconnectBufferSize=null!=a?a:1e5,this._logger=t,this._protocol=n,this.connection=e,this._reconnectPolicy=r,this._handshakeProtocol=new oC,this.connection.onreceive=e=>this._processIncomingData(e),this.connection.onclose=e=>this._connectionClosed(e),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=cC.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:iC.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==cC.Disconnected&&this._connectionState!==cC.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==cC.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=cC.Connecting,this._logger.log(GP.Debug,"Starting HubConnection.");try{await this._startInternal(),FP.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=cC.Connected,this._connectionStarted=!0,this._logger.log(GP.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=cC.Disconnected,this._logger.log(GP.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const e=new Promise(((e,t)=>{this._handshakeResolver=e,this._handshakeRejecter=t}));await this.connection.start(this._protocol.transferFormat);try{let t=this._protocol.version;this.connection.features.reconnect||(t=1);const n={protocol:this._protocol.name,version:t};if(this._logger.log(GP.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(n)),this._logger.log(GP.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await e,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new sC(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(e){throw this._logger.log(GP.Debug,`Hub handshake failed with error '${e}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(e),e}}async stop(){const e=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await e}catch(e){}}_stopInternal(e){if(this._connectionState===cC.Disconnected)return this._logger.log(GP.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===cC.Disconnecting)return this._logger.log(GP.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const t=this._connectionState;return this._connectionState=cC.Disconnecting,this._logger.log(GP.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(GP.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(t===cC.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new LP("The connection was stopped before the hub handshake could complete."),this.connection.stop(e))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(e,...t){const[n,r]=this._replaceStreamingParams(t),o=this._createStreamInvocation(e,t,r);let i;const a=new aC;return a.cancelCallback=()=>{const e=this._createCancelInvocation(o.invocationId);return delete this._callbacks[o.invocationId],i.then((()=>this._sendWithProtocol(e)))},this._callbacks[o.invocationId]=(e,t)=>{t?a.error(t):e&&(e.type===iC.Completion?e.error?a.error(new Error(e.error)):a.complete():a.next(e.item))},i=this._sendWithProtocol(o).catch((e=>{a.error(e),delete this._callbacks[o.invocationId]})),this._launchStreams(n,i),a}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._messageBuffer?this._messageBuffer._send(e):this._sendMessage(this._protocol.writeMessage(e))}send(e,...t){const[n,r]=this._replaceStreamingParams(t),o=this._sendWithProtocol(this._createInvocation(e,t,!0,r));return this._launchStreams(n,o),o}invoke(e,...t){const[n,r]=this._replaceStreamingParams(t),o=this._createInvocation(e,t,!1,r),i=new Promise(((e,t)=>{this._callbacks[o.invocationId]=(n,r)=>{r?t(r):n&&(n.type===iC.Completion?n.error?t(new Error(n.error)):e(n.result):t(new Error(`Unexpected message type: ${n.type}`)))};const r=this._sendWithProtocol(o).catch((e=>{t(e),delete this._callbacks[o.invocationId]}));this._launchStreams(n,r)}));return i}on(e,t){e&&t&&(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),-1===this._methods[e].indexOf(t)&&this._methods[e].push(t))}off(e,t){if(!e)return;e=e.toLowerCase();const n=this._methods[e];if(n)if(t){const r=n.indexOf(t);-1!==r&&(n.splice(r,1),0===n.length&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){const t=this._protocol.parseMessages(e,this._logger);for(const e of t)if(!this._messageBuffer||this._messageBuffer._shouldProcessMessage(e))switch(e.type){case iC.Invocation:this._invokeClientMethod(e).catch((e=>{this._logger.log(GP.Error,`Invoke client method threw error: ${QP(e)}`)}));break;case iC.StreamItem:case iC.Completion:{const t=this._callbacks[e.invocationId];if(t){e.type===iC.Completion&&delete this._callbacks[e.invocationId];try{t(e)}catch(e){this._logger.log(GP.Error,`Stream callback threw error: ${QP(e)}`)}}break}case iC.Ping:break;case iC.Close:{this._logger.log(GP.Information,"Close message received from server.");const t=e.error?new Error("Server returned an error on close: "+e.error):void 0;!0===e.allowReconnect?this.connection.stop(t):this._stopPromise=this._stopInternal(t);break}case iC.Ack:this._messageBuffer&&this._messageBuffer._ack(e);break;case iC.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(e);break;default:this._logger.log(GP.Warning,`Invalid message type: ${e.type}.`)}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let t,n;try{[n,t]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(e){const t="Error parsing handshake response: "+e;this._logger.log(GP.Error,t);const n=new Error(t);throw this._handshakeRejecter(n),n}if(t.error){const e="Server returned handshake error: "+t.error;this._logger.log(GP.Error,e);const n=new Error(e);throw this._handshakeRejecter(n),n}return this._logger.log(GP.Debug,"Server handshake complete."),this._handshakeResolver(),n}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=(new Date).getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if(!(this.connection.features&&this.connection.features.inherentKeepAlive||(this._timeoutHandle=setTimeout((()=>this.serverTimeout()),this.serverTimeoutInMilliseconds),void 0!==this._pingServerHandle))){let e=this._nextKeepAlive-(new Date).getTime();e<0&&(e=0),this._pingServerHandle=setTimeout((async()=>{if(this._connectionState===cC.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}),e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(e){const t=e.target.toLowerCase(),n=this._methods[t];if(!n)return this._logger.log(GP.Warning,`No client method with the name '${t}' found.`),void(e.invocationId&&(this._logger.log(GP.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null))));const r=n.slice(),o=!!e.invocationId;let i,a,s;for(const n of r)try{const r=i;i=await n.apply(this,e.arguments),o&&i&&r&&(this._logger.log(GP.Error,`Multiple results provided for '${t}'. Sending error to server.`),s=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),a=void 0}catch(e){a=e,this._logger.log(GP.Error,`A callback for the method '${t}' threw error '${e}'.`)}s?await this._sendWithProtocol(s):o?(a?s=this._createCompletionMessage(e.invocationId,`${a}`,null):void 0!==i?s=this._createCompletionMessage(e.invocationId,null,i):(this._logger.log(GP.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),s=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(s)):i&&this._logger.log(GP.Error,`Result given for '${t}' method but server is not expecting a result.`)}_connectionClosed(e){this._logger.log(GP.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new LP("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===cC.Disconnecting?this._completeClose(e):this._connectionState===cC.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===cC.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=cC.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(null!=e?e:new Error("Connection closed.")),this._messageBuffer=void 0),FP.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach((t=>t.apply(this,[e])))}catch(t){this._logger.log(GP.Error,`An onclose callback called with error '${e}' threw error '${t}'.`)}}}async _reconnect(e){const t=Date.now();let n=0,r=void 0!==e?e:new Error("Attempting to reconnect due to a unknown error."),o=this._getNextRetryDelay(n++,0,r);if(null===o)return this._logger.log(GP.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),void this._completeClose(e);if(this._connectionState=cC.Reconnecting,e?this._logger.log(GP.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(GP.Information,"Connection reconnecting."),0!==this._reconnectingCallbacks.length){try{this._reconnectingCallbacks.forEach((t=>t.apply(this,[e])))}catch(t){this._logger.log(GP.Error,`An onreconnecting callback called with error '${e}' threw error '${t}'.`)}if(this._connectionState!==cC.Reconnecting)return void this._logger.log(GP.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.")}for(;null!==o;){if(this._logger.log(GP.Information,`Reconnect attempt number ${n} will start in ${o} ms.`),await new Promise((e=>{this._reconnectDelayHandle=setTimeout(e,o)})),this._reconnectDelayHandle=void 0,this._connectionState!==cC.Reconnecting)return void this._logger.log(GP.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");try{if(await this._startInternal(),this._connectionState=cC.Connected,this._logger.log(GP.Information,"HubConnection reconnected successfully."),0!==this._reconnectedCallbacks.length)try{this._reconnectedCallbacks.forEach((e=>e.apply(this,[this.connection.connectionId])))}catch(e){this._logger.log(GP.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${e}'.`)}return}catch(e){if(this._logger.log(GP.Information,`Reconnect attempt failed because of error '${e}'.`),this._connectionState!==cC.Reconnecting)return this._logger.log(GP.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),void(this._connectionState===cC.Disconnecting&&this._completeClose());r=e instanceof Error?e:new Error(e.toString()),o=this._getNextRetryDelay(n++,Date.now()-t,r)}}this._logger.log(GP.Information,`Reconnect retries have been exhausted after ${Date.now()-t} ms and ${n} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(e,t,n){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:n})}catch(n){return this._logger.log(GP.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${t}) threw error '${n}'.`),null}}_cancelCallbacksWithError(e){const t=this._callbacks;this._callbacks={},Object.keys(t).forEach((n=>{const r=t[n];try{r(null,e)}catch(t){this._logger.log(GP.Error,`Stream 'error' callback called with '${e}' threw error: ${QP(t)}`)}}))}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,t,n,r){if(n)return 0!==r.length?{arguments:t,streamIds:r,target:e,type:iC.Invocation}:{arguments:t,target:e,type:iC.Invocation};{const n=this._invocationId;return this._invocationId++,0!==r.length?{arguments:t,invocationId:n.toString(),streamIds:r,target:e,type:iC.Invocation}:{arguments:t,invocationId:n.toString(),target:e,type:iC.Invocation}}}_launchStreams(e,t){if(0!==e.length){t||(t=Promise.resolve());for(const n in e)e[n].subscribe({complete:()=>{t=t.then((()=>this._sendWithProtocol(this._createCompletionMessage(n))))},error:e=>{let r;r=e instanceof Error?e.message:e&&e.toString?e.toString():"Unknown error",t=t.then((()=>this._sendWithProtocol(this._createCompletionMessage(n,r))))},next:e=>{t=t.then((()=>this._sendWithProtocol(this._createStreamItemMessage(n,e))))}})}}_replaceStreamingParams(e){const t=[],n=[];for(let r=0;r<e.length;r++){const o=e[r];if(this._isObservable(o)){const i=this._invocationId;this._invocationId++,t[i]=o,n.push(i.toString()),e.splice(r,1)}}return[t,n]}_isObservable(e){return e&&e.subscribe&&"function"==typeof e.subscribe}_createStreamInvocation(e,t,n){const r=this._invocationId;return this._invocationId++,0!==n.length?{arguments:t,invocationId:r.toString(),streamIds:n,target:e,type:iC.StreamInvocation}:{arguments:t,invocationId:r.toString(),target:e,type:iC.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:iC.CancelInvocation}}_createStreamItemMessage(e,t){return{invocationId:e,item:t,type:iC.StreamItem}}_createCompletionMessage(e,t,n){return t?{error:t,invocationId:e,type:iC.Completion}:{invocationId:e,result:n,type:iC.Completion}}_createCloseMessage(){return{type:iC.Close}}}const dC=[0,2e3,1e4,3e4,null];class pC{constructor(e){this._retryDelays=void 0!==e?[...e,null]:dC}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}}class gC{}gC.Authorization="Authorization",gC.Cookie="Cookie";class hC extends MP{constructor(e,t){super(),this._innerClient=e,this._accessTokenFactory=t}async send(e){let t=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(t=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(e);const n=await this._innerClient.send(e);return t&&401===n.statusCode&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(e),await this._innerClient.send(e)):n}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[gC.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[gC.Authorization]&&delete e.headers[gC.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}}var fC,_C;!function(e){e[e.None=0]="None",e[e.WebSockets=1]="WebSockets",e[e.ServerSentEvents=2]="ServerSentEvents",e[e.LongPolling=4]="LongPolling"}(fC||(fC={})),function(e){e[e.Text=1]="Text",e[e.Binary=2]="Binary"}(_C||(_C={}));let mC=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class vC{get pollAborted(){return this._pollAbort.aborted}constructor(e,t,n){this._httpClient=e,this._logger=t,this._pollAbort=new mC,this._options=n,this._running=!1,this.onreceive=null,this.onclose=null}async connect(e,t){if($P.isRequired(e,"url"),$P.isRequired(t,"transferFormat"),$P.isIn(t,_C,"transferFormat"),this._url=e,this._logger.log(GP.Trace,"(LongPolling transport) Connecting."),t===_C.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[n,r]=JP(),o={[n]:r,...this._options.headers},i={abortSignal:this._pollAbort.signal,headers:o,timeout:1e5,withCredentials:this._options.withCredentials};t===_C.Binary&&(i.responseType="arraybuffer");const a=`${e}&_=${Date.now()}`;this._logger.log(GP.Trace,`(LongPolling transport) polling: ${a}.`);const s=await this._httpClient.get(a,i);200!==s.statusCode?(this._logger.log(GP.Error,`(LongPolling transport) Unexpected response code: ${s.statusCode}.`),this._closeError=new NP(s.statusText||"",s.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,i)}async _poll(e,t){try{for(;this._running;)try{const n=`${e}&_=${Date.now()}`;this._logger.log(GP.Trace,`(LongPolling transport) polling: ${n}.`);const r=await this._httpClient.get(n,t);204===r.statusCode?(this._logger.log(GP.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):200!==r.statusCode?(this._logger.log(GP.Error,`(LongPolling transport) Unexpected response code: ${r.statusCode}.`),this._closeError=new NP(r.statusText||"",r.statusCode),this._running=!1):r.content?(this._logger.log(GP.Trace,`(LongPolling transport) data received. ${jP(r.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(r.content)):this._logger.log(GP.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(e){this._running?e instanceof RP?this._logger.log(GP.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=e,this._running=!1):this._logger.log(GP.Trace,`(LongPolling transport) Poll errored after shutdown: ${e.message}`)}}finally{this._logger.log(GP.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(e){return this._running?qP(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(GP.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(GP.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const e={},[t,n]=JP();e[t]=n;const r={headers:{...e,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let o;try{await this._httpClient.delete(this._url,r)}catch(e){o=e}o?o instanceof NP&&(404===o.statusCode?this._logger.log(GP.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(GP.Trace,`(LongPolling transport) Error sending a DELETE request: ${o}`)):this._logger.log(GP.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(GP.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(GP.Trace,e),this.onclose(this._closeError)}}}class TC{constructor(e,t,n,r){this._httpClient=e,this._accessToken=t,this._logger=n,this._options=r,this.onreceive=null,this.onclose=null}async connect(e,t){return $P.isRequired(e,"url"),$P.isRequired(t,"transferFormat"),$P.isIn(t,_C,"transferFormat"),this._logger.log(GP.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise(((n,r)=>{let o,i=!1;if(t===_C.Text){if(FP.isBrowser||FP.isWebWorker)o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{const t=this._httpClient.getCookieString(e),n={};n.Cookie=t;const[r,i]=JP();n[r]=i,o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:{...n,...this._options.headers}})}try{o.onmessage=e=>{if(this.onreceive)try{this._logger.log(GP.Trace,`(SSE transport) data received. ${jP(e.data,this._options.logMessageContent)}.`),this.onreceive(e.data)}catch(e){return void this._close(e)}},o.onerror=e=>{i?this._close():r(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},o.onopen=()=>{this._logger.log(GP.Information,`SSE connected to ${this._url}`),this._eventSource=o,i=!0,n()}}catch(e){return void r(e)}}else r(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))}))}async send(e){return this._eventSource?qP(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}}class yC{constructor(e,t,n,r,o,i){this._logger=n,this._accessTokenFactory=t,this._logMessageContent=r,this._webSocketConstructor=o,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=i}async connect(e,t){let n;return $P.isRequired(e,"url"),$P.isRequired(t,"transferFormat"),$P.isIn(t,_C,"transferFormat"),this._logger.log(GP.Trace,"(WebSockets transport) Connecting."),this._accessTokenFactory&&(n=await this._accessTokenFactory()),new Promise(((r,o)=>{let i;e=e.replace(/^http/,"ws");const a=this._httpClient.getCookieString(e);let s=!1;if(FP.isNode||FP.isReactNative){const t={},[r,o]=JP();t[r]=o,n&&(t[gC.Authorization]=`Bearer ${n}`),a&&(t[gC.Cookie]=a),i=new this._webSocketConstructor(e,void 0,{headers:{...t,...this._headers}})}else n&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(n)}`);i||(i=new this._webSocketConstructor(e)),t===_C.Binary&&(i.binaryType="arraybuffer"),i.onopen=t=>{this._logger.log(GP.Information,`WebSocket connected to ${e}.`),this._webSocket=i,s=!0,r()},i.onerror=e=>{let t=null;t="undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent?e.error:"There was an error with the transport",this._logger.log(GP.Information,`(WebSockets transport) ${t}.`)},i.onmessage=e=>{if(this._logger.log(GP.Trace,`(WebSockets transport) data received. ${jP(e.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(e.data)}catch(e){return void this._close(e)}},i.onclose=e=>{if(s)this._close(e);else{let t=null;t="undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent?e.error:"WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",o(new Error(t))}}}))}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(GP.Trace,`(WebSockets transport) sending data. ${jP(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(GP.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!this._isCloseEvent(e)||!1!==e.wasClean&&1e3===e.code?e instanceof Error?this.onclose(e):this.onclose():this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)))}_isCloseEvent(e){return e&&"boolean"==typeof e.wasClean&&"number"==typeof e.code}}class EC{constructor(e,t={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,$P.isRequired(e,"url"),this._logger=function(e){return void 0===e?new HP(GP.Information):null===e?VP.instance:void 0!==e.log?e:new HP(e)}(t.logger),this.baseUrl=this._resolveUrl(e),(t=t||{}).logMessageContent=void 0!==t.logMessageContent&&t.logMessageContent,"boolean"!=typeof t.withCredentials&&void 0!==t.withCredentials)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");t.withCredentials=void 0===t.withCredentials||t.withCredentials,t.timeout=void 0===t.timeout?1e5:t.timeout;let n=null,r=null;if(FP.isNode&&"undefined"!=typeof require){const e="function"==typeof __webpack_require__?__non_webpack_require__:require;n=e("ws"),r=e("eventsource")}FP.isNode||"undefined"==typeof WebSocket||t.WebSocket?FP.isNode&&!t.WebSocket&&n&&(t.WebSocket=n):t.WebSocket=WebSocket,FP.isNode||"undefined"==typeof EventSource||t.EventSource?FP.isNode&&!t.EventSource&&void 0!==r&&(t.EventSource=r):t.EventSource=EventSource,this._httpClient=new hC(t.httpClient||new nC(this._logger),t.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=t,this.onreceive=null,this.onclose=null}async start(e){if(e=e||_C.Binary,$P.isIn(e,_C,"transferFormat"),this._logger.log(GP.Debug,`Starting connection with transfer format '${_C[e]}'.`),"Disconnected"!==this._connectionState)return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),await this._startInternalPromise,"Disconnecting"===this._connectionState){const e="Failed to start the HttpConnection before stop() was called.";return this._logger.log(GP.Error,e),await this._stopPromise,Promise.reject(new LP(e))}if("Connected"!==this._connectionState){const e="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(GP.Error,e),Promise.reject(new LP(e))}this._connectionStarted=!0}send(e){return"Connected"!==this._connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new SC(this.transport)),this._sendQueue.send(e))}async stop(e){return"Disconnected"===this._connectionState?(this._logger.log(GP.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve()):"Disconnecting"===this._connectionState?(this._logger.log(GP.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise):(this._connectionState="Disconnecting",this._stopPromise=new Promise((e=>{this._stopPromiseResolver=e})),await this._stopInternal(e),void await this._stopPromise)}async _stopInternal(e){this._stopError=e;try{await this._startInternalPromise}catch(e){}if(this.transport){try{await this.transport.stop()}catch(e){this._logger.log(GP.Error,`HttpConnection.transport.stop() threw error '${e}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(GP.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(e){let t=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation){if(this._options.transport!==fC.WebSockets)throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");this.transport=this._constructTransport(fC.WebSockets),await this._startTransport(t,e)}else{let n=null,r=0;do{if(n=await this._getNegotiationResponse(t),"Disconnecting"===this._connectionState||"Disconnected"===this._connectionState)throw new LP("The connection was stopped during negotiation.");if(n.error)throw new Error(n.error);if(n.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(n.url&&(t=n.url),n.accessToken){const e=n.accessToken;this._accessTokenFactory=()=>e,this._httpClient._accessToken=e,this._httpClient._accessTokenFactory=void 0}r++}while(n.url&&r<100);if(100===r&&n.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(t,this._options.transport,n,e)}this.transport instanceof vC&&(this.features.inherentKeepAlive=!0),"Connecting"===this._connectionState&&(this._logger.log(GP.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(e){return this._logger.log(GP.Error,"Failed to start the connection: "+e),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(e)}}async _getNegotiationResponse(e){const t={},[n,r]=JP();t[n]=r;const o=this._resolveNegotiateUrl(e);this._logger.log(GP.Debug,`Sending negotiation request: ${o}.`);try{const e=await this._httpClient.post(o,{content:"",headers:{...t,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(200!==e.statusCode)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${e.statusCode}'`));const n=JSON.parse(e.content);return(!n.negotiateVersion||n.negotiateVersion<1)&&(n.connectionToken=n.connectionId),n.useStatefulReconnect&&!0!==this._options._useStatefulReconnect?Promise.reject(new kP("Client didn't negotiate Stateful Reconnect but the server did.")):n}catch(e){let t="Failed to complete negotiation with the server: "+e;return e instanceof NP&&404===e.statusCode&&(t+=" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(GP.Error,t),Promise.reject(new kP(t))}}_createConnectUrl(e,t){return t?e+(-1===e.indexOf("?")?"?":"&")+`id=${t}`:e}async _createTransport(e,t,n,r){let o=this._createConnectUrl(e,n.connectionToken);if(this._isITransport(t))return this._logger.log(GP.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,await this._startTransport(o,r),void(this.connectionId=n.connectionId);const i=[],a=n.availableTransports||[];let s=n;for(const n of a){const a=this._resolveTransportOrError(n,t,r,!0===(null==s?void 0:s.useStatefulReconnect));if(a instanceof Error)i.push(`${n.transport} failed:`),i.push(a);else if(this._isITransport(a)){if(this.transport=a,!s){try{s=await this._getNegotiationResponse(e)}catch(e){return Promise.reject(e)}o=this._createConnectUrl(e,s.connectionToken)}try{return await this._startTransport(o,r),void(this.connectionId=s.connectionId)}catch(e){if(this._logger.log(GP.Error,`Failed to start the transport '${n.transport}': ${e}`),s=void 0,i.push(new xP(`${n.transport} failed: ${e}`,fC[n.transport])),"Connecting"!==this._connectionState){const e="Failed to select transport before stop() was called.";return this._logger.log(GP.Debug,e),Promise.reject(new LP(e))}}}}return i.length>0?Promise.reject(new DP(`Unable to connect to the server with any of the available transports. ${i.join(" ")}`,i)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(e){switch(e){case fC.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new yC(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case fC.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new TC(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case fC.LongPolling:return new vC(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,t){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async n=>{let r=!1;if(this.features.reconnect){try{this.features.disconnected(),await this.transport.connect(e,t),await this.features.resend()}catch{r=!0}r&&this._stopConnection(n)}else this._stopConnection(n)}:this.transport.onclose=e=>this._stopConnection(e),this.transport.connect(e,t)}_resolveTransportOrError(e,t,n,r){const o=fC[e.transport];if(null==o)return this._logger.log(GP.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(!function(e,t){return!e||!!(t&e)}(t,o))return this._logger.log(GP.Debug,`Skipping transport '${fC[o]}' because it was disabled by the client.`),new CP(`'${fC[o]}' is disabled by the client.`,o);if(!(e.transferFormats.map((e=>_C[e])).indexOf(n)>=0))return this._logger.log(GP.Debug,`Skipping transport '${fC[o]}' because it does not support the requested transfer format '${_C[n]}'.`),new Error(`'${fC[o]}' does not support ${_C[n]}.`);if(o===fC.WebSockets&&!this._options.WebSocket||o===fC.ServerSentEvents&&!this._options.EventSource)return this._logger.log(GP.Debug,`Skipping transport '${fC[o]}' because it is not supported in your environment.'`),new PP(`'${fC[o]}' is not supported in your environment.`,o);this._logger.log(GP.Debug,`Selecting transport '${fC[o]}'.`);try{return this.features.reconnect=o===fC.WebSockets?r:void 0,this._constructTransport(o)}catch(e){return e}}_isITransport(e){return e&&"object"==typeof e&&"connect"in e}_stopConnection(e){if(this._logger.log(GP.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,"Disconnected"!==this._connectionState){if("Connecting"===this._connectionState)throw this._logger.log(GP.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if("Disconnecting"===this._connectionState&&this._stopPromiseResolver(),e?this._logger.log(GP.Error,`Connection disconnected with error '${e}'.`):this._logger.log(GP.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch((e=>{this._logger.log(GP.Error,`TransportSendQueue.stop() threw error '${e}'.`)})),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(t){this._logger.log(GP.Error,`HttpConnection.onclose(${e}) threw error '${t}'.`)}}}else this._logger.log(GP.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`)}_resolveUrl(e){if(0===e.lastIndexOf("https://",0)||0===e.lastIndexOf("http://",0))return e;if(!FP.isBrowser)throw new Error(`Cannot resolve '${e}'.`);const t=window.document.createElement("a");return t.href=e,this._logger.log(GP.Information,`Normalizing '${e}' to '${t.href}'.`),t.href}_resolveNegotiateUrl(e){const t=new URL(e);t.pathname.endsWith("/")?t.pathname+="negotiate":t.pathname+="/negotiate";const n=new URLSearchParams(t.searchParams);return n.has("negotiateVersion")||n.append("negotiateVersion",this._negotiateVersion.toString()),n.has("useStatefulReconnect")?"true"===n.get("useStatefulReconnect")&&(this._options._useStatefulReconnect=!0):!0===this._options._useStatefulReconnect&&n.append("useStatefulReconnect","true"),t.search=n.toString(),t.toString()}}class SC{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new IC,this._transportResult=new IC,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new IC),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new IC;const e=this._transportResult;this._transportResult=void 0;const t="string"==typeof this._buffer[0]?this._buffer.join(""):SC._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(t),e.resolve()}catch(t){e.reject(t)}}}static _concatBuffers(e){const t=e.map((e=>e.byteLength)).reduce(((e,t)=>e+t)),n=new Uint8Array(t);let r=0;for(const t of e)n.set(new Uint8Array(t),r),r+=t.byteLength;return n.buffer}}class IC{constructor(){this.promise=new Promise(((e,t)=>[this._resolver,this._rejecter]=[e,t]))}resolve(){this._resolver()}reject(e){this._rejecter(e)}}class AC{constructor(){this.name="json",this.version=2,this.transferFormat=_C.Text}parseMessages(e,t){if("string"!=typeof e)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];null===t&&(t=VP.instance);const n=rC.parse(e),r=[];for(const e of n){const n=JSON.parse(e);if("number"!=typeof n.type)throw new Error("Invalid payload.");switch(n.type){case iC.Invocation:this._isInvocationMessage(n);break;case iC.StreamItem:this._isStreamItemMessage(n);break;case iC.Completion:this._isCompletionMessage(n);break;case iC.Ping:case iC.Close:break;case iC.Ack:this._isAckMessage(n);break;case iC.Sequence:this._isSequenceMessage(n);break;default:t.log(GP.Information,"Unknown message type '"+n.type+"' ignored.");continue}r.push(n)}return r}writeMessage(e){return rC.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),void 0!==e.invocationId&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),void 0===e.item)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_isAckMessage(e){if("number"!=typeof e.sequenceId)throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(e){if("number"!=typeof e.sequenceId)throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(e,t){if("string"!=typeof e||""===e)throw new Error(t)}}const bC={trace:GP.Trace,debug:GP.Debug,info:GP.Information,information:GP.Information,warn:GP.Warning,warning:GP.Warning,error:GP.Error,critical:GP.Critical,none:GP.None};class wC{configureLogging(e){if($P.isRequired(e,"logging"),function(e){return void 0!==e.log}(e))this.logger=e;else if("string"==typeof e){const t=function(e){const t=bC[e.toLowerCase()];if(void 0!==t)return t;throw new Error(`Unknown log level: ${e}`)}(e);this.logger=new HP(t)}else this.logger=new HP(e);return this}withUrl(e,t){return $P.isRequired(e,"url"),$P.isNotEmpty(e,"url"),this.url=e,this.httpConnectionOptions="object"==typeof t?{...this.httpConnectionOptions,...t}:{...this.httpConnectionOptions,transport:t},this}withHubProtocol(e){return $P.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new pC(e):this.reconnectPolicy=e:this.reconnectPolicy=new pC,this}withServerTimeout(e){return $P.isRequired(e,"milliseconds"),this._serverTimeoutInMilliseconds=e,this}withKeepAliveInterval(e){return $P.isRequired(e,"milliseconds"),this._keepAliveIntervalInMilliseconds=e,this}withStatefulReconnect(e){return void 0===this.httpConnectionOptions&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=null==e?void 0:e.bufferSize,this}build(){const e=this.httpConnectionOptions||{};if(void 0===e.logger&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const t=new EC(this.url,e);return uC.create(t,this.logger||VP.instance,this.protocol||new AC,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}var OC,NC,RC,LC=4294967295;function PC(e,t,n){var r=Math.floor(n/4294967296),o=n;e.setUint32(t,r),e.setUint32(t+4,o)}function CC(e,t){return 4294967296*e.getInt32(t)+e.getUint32(t+4)}var xC=("undefined"==typeof process||"never"!==(null===(OC=null===process||void 0===process?void 0:process.env)||void 0===OC?void 0:OC.TEXT_ENCODING))&&"undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder;function kC(e){for(var t=e.length,n=0,r=0;r<t;){var o=e.charCodeAt(r++);if(4294967168&o)if(4294965248&o){if(o>=55296&&o<=56319&&r<t){var i=e.charCodeAt(r);56320==(64512&i)&&(++r,o=((1023&o)<<10)+(1023&i)+65536)}n+=4294901760&o?4:3}else n+=2;else n++}return n}var DC=xC?new TextEncoder:void 0,UC=xC?"undefined"!=typeof process&&"force"!==(null===(NC=null===process||void 0===process?void 0:process.env)||void 0===NC?void 0:NC.TEXT_ENCODING)?200:0:LC;var MC=(null==DC?void 0:DC.encodeInto)?function(e,t,n){DC.encodeInto(e,t.subarray(n))}:function(e,t,n){t.set(DC.encode(e),n)};function GC(e,t,n){for(var r=t,o=r+n,i=[],a="";r<o;){var s=e[r++];if(128&s)if(192==(224&s)){var l=63&e[r++];i.push((31&s)<<6|l)}else if(224==(240&s)){l=63&e[r++];var c=63&e[r++];i.push((31&s)<<12|l<<6|c)}else if(240==(248&s)){var u=(7&s)<<18|(l=63&e[r++])<<12|(c=63&e[r++])<<6|63&e[r++];u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u)}else i.push(s);else i.push(s);i.length>=4096&&(a+=String.fromCharCode.apply(String,i),i.length=0)}return i.length>0&&(a+=String.fromCharCode.apply(String,i)),a}var VC=xC?new TextDecoder:null,$C=xC?"undefined"!=typeof process&&"force"!==(null===(RC=null===process||void 0===process?void 0:process.env)||void 0===RC?void 0:RC.TEXT_DECODER)?200:0:LC;var FC=function(e,t){this.type=e,this.data=t},jC=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),WC=function(e){function t(n){var r=e.call(this,n)||this,o=Object.create(t.prototype);return Object.setPrototypeOf(r,o),Object.defineProperty(r,"name",{configurable:!0,enumerable:!1,value:t.name}),r}return jC(t,e),t}(Error);var qC={type:-1,encode:function(e){var t,n,r,o;return e instanceof Date?function(e){var t,n=e.sec,r=e.nsec;if(n>=0&&r>=0&&n<=17179869183){if(0===r&&n<=4294967295){var o=new Uint8Array(4);return(t=new DataView(o.buffer)).setUint32(0,n),o}var i=n/4294967296,a=4294967295&n;return o=new Uint8Array(8),(t=new DataView(o.buffer)).setUint32(0,r<<2|3&i),t.setUint32(4,a),o}return o=new Uint8Array(12),(t=new DataView(o.buffer)).setUint32(0,r),PC(t,4,n),o}((t=e.getTime(),n=Math.floor(t/1e3),r=1e6*(t-1e3*n),o=Math.floor(r/1e9),{sec:n+o,nsec:r-1e9*o})):null},decode:function(e){var t=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:var n=t.getUint32(0);return{sec:4294967296*(3&n)+t.getUint32(4),nsec:n>>>2};case 12:return{sec:CC(t,4),nsec:t.getUint32(0)};default:throw new WC("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(e.length))}}(e);return new Date(1e3*t.sec+t.nsec/1e6)}},BC=function(){function e(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(qC)}return e.prototype.register=function(e){var t=e.type,n=e.encode,r=e.decode;if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{var o=1+t;this.builtInEncoders[o]=n,this.builtInDecoders[o]=r}},e.prototype.tryToEncode=function(e,t){for(var n=0;n<this.builtInEncoders.length;n++){if(null!=(r=this.builtInEncoders[n]))if(null!=(o=r(e,t)))return new FC(-1-n,o)}for(n=0;n<this.encoders.length;n++){var r,o;if(null!=(r=this.encoders[n]))if(null!=(o=r(e,t)))return new FC(n,o)}return e instanceof FC?e:null},e.prototype.decode=function(e,t,n){var r=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return r?r(e,t,n):new FC(t,e)},e.defaultCodec=new e,e}();function HC(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}var JC=function(){function e(e,t,n,r,o,i,a,s){void 0===e&&(e=BC.defaultCodec),void 0===t&&(t=void 0),void 0===n&&(n=100),void 0===r&&(r=2048),void 0===o&&(o=!1),void 0===i&&(i=!1),void 0===a&&(a=!1),void 0===s&&(s=!1),this.extensionCodec=e,this.context=t,this.maxDepth=n,this.initialBufferSize=r,this.sortKeys=o,this.forceFloat32=i,this.ignoreUndefined=a,this.forceIntegerToFloat=s,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return e.prototype.reinitializeState=function(){this.pos=0},e.prototype.encodeSharedRef=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)},e.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)},e.prototype.doEncode=function(e,t){if(t>this.maxDepth)throw new Error("Too deep objects in depth ".concat(t));null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.encodeObject(e,t)},e.prototype.ensureBufferSizeToWrite=function(e){var t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)},e.prototype.resizeBuffer=function(e){var t=new ArrayBuffer(e),n=new Uint8Array(t),r=new DataView(t);n.set(this.bytes),this.view=r,this.bytes=n},e.prototype.encodeNil=function(){this.writeU8(192)},e.prototype.encodeBoolean=function(e){!1===e?this.writeU8(194):this.writeU8(195)},e.prototype.encodeNumber=function(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},e.prototype.writeStringHeader=function(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too long string: ".concat(e," bytes in UTF-8"));this.writeU8(219),this.writeU32(e)}},e.prototype.encodeString=function(e){if(e.length>UC){var t=kC(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),MC(e,this.bytes,this.pos),this.pos+=t}else{t=kC(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),function(e,t,n){for(var r=e.length,o=n,i=0;i<r;){var a=e.charCodeAt(i++);if(4294967168&a){if(4294965248&a){if(a>=55296&&a<=56319&&i<r){var s=e.charCodeAt(i);56320==(64512&s)&&(++i,a=((1023&a)<<10)+(1023&s)+65536)}4294901760&a?(t[o++]=a>>18&7|240,t[o++]=a>>12&63|128,t[o++]=a>>6&63|128):(t[o++]=a>>12&15|224,t[o++]=a>>6&63|128)}else t[o++]=a>>6&31|192;t[o++]=63&a|128}else t[o++]=a}}(e,this.bytes,this.pos),this.pos+=t}},e.prototype.encodeObject=function(e,t){var n=this.extensionCodec.tryToEncode(e,this.context);if(null!=n)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else{if("object"!=typeof e)throw new Error("Unrecognized object: ".concat(Object.prototype.toString.apply(e)));this.encodeMap(e,t)}},e.prototype.encodeBinary=function(e){var t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large binary: ".concat(t));this.writeU8(198),this.writeU32(t)}var n=HC(e);this.writeU8a(n)},e.prototype.encodeArray=function(e,t){var n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else{if(!(n<4294967296))throw new Error("Too large array: ".concat(n));this.writeU8(221),this.writeU32(n)}for(var r=0,o=e;r<o.length;r++){var i=o[r];this.doEncode(i,t+1)}},e.prototype.countWithoutUndefined=function(e,t){for(var n=0,r=0,o=t;r<o.length;r++){void 0!==e[o[r]]&&n++}return n},e.prototype.encodeMap=function(e,t){var n=Object.keys(e);this.sortKeys&&n.sort();var r=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(r<16)this.writeU8(128+r);else if(r<65536)this.writeU8(222),this.writeU16(r);else{if(!(r<4294967296))throw new Error("Too large map object: ".concat(r));this.writeU8(223),this.writeU32(r)}for(var o=0,i=n;o<i.length;o++){var a=i[o],s=e[a];this.ignoreUndefined&&void 0===s||(this.encodeString(a),this.doEncode(s,t+1))}},e.prototype.encodeExtension=function(e){var t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large extension object: ".concat(t));this.writeU8(201),this.writeU32(t)}this.writeI8(e.type),this.writeU8a(e.data)},e.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},e.prototype.writeU8a=function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t},e.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},e.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},e.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},e.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},e.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},e.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},e.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},e.prototype.writeU64=function(e){this.ensureBufferSizeToWrite(8),function(e,t,n){var r=n/4294967296,o=n;e.setUint32(t,r),e.setUint32(t+4,o)}(this.view,this.pos,e),this.pos+=8},e.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8),PC(this.view,this.pos,e),this.pos+=8},e}();function zC(e){return"".concat(e<0?"-":"","0x").concat(Math.abs(e).toString(16).padStart(2,"0"))}var YC=function(){function e(e,t){void 0===e&&(e=16),void 0===t&&(t=16),this.maxKeyLength=e,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(var n=0;n<this.maxKeyLength;n++)this.caches.push([])}return e.prototype.canBeCached=function(e){return e>0&&e<=this.maxKeyLength},e.prototype.find=function(e,t,n){e:for(var r=0,o=this.caches[n-1];r<o.length;r++){for(var i=o[r],a=i.bytes,s=0;s<n;s++)if(a[s]!==e[t+s])continue e;return i.str}return null},e.prototype.store=function(e,t){var n=this.caches[e.length-1],r={bytes:e,str:t};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=r:n.push(r)},e.prototype.decode=function(e,t,n){var r=this.find(e,t,n);if(null!=r)return this.hit++,r;this.miss++;var o=GC(e,t,n),i=Uint8Array.prototype.slice.call(e,t,t+n);return this.store(i,o),o},e}(),XC=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},KC=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},QC=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}},ZC=function(e){return this instanceof ZC?(this.v=e,this):new ZC(e)},ex=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{!function(e){e.value instanceof ZC?Promise.resolve(e.value.v).then(l,c):u(i[0][2],e)}(o[e](t))}catch(e){u(i[0][3],e)}}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}},tx=new DataView(new ArrayBuffer(0)),nx=new Uint8Array(tx.buffer),rx=function(){try{tx.getInt8(0)}catch(e){return e.constructor}throw new Error("never reached")}(),ox=new rx("Insufficient data"),ix=new YC,ax=function(){function e(e,t,n,r,o,i,a,s){void 0===e&&(e=BC.defaultCodec),void 0===t&&(t=void 0),void 0===n&&(n=LC),void 0===r&&(r=LC),void 0===o&&(o=LC),void 0===i&&(i=LC),void 0===a&&(a=LC),void 0===s&&(s=ix),this.extensionCodec=e,this.context=t,this.maxStrLength=n,this.maxBinLength=r,this.maxArrayLength=o,this.maxMapLength=i,this.maxExtLength=a,this.keyDecoder=s,this.totalPos=0,this.pos=0,this.view=tx,this.bytes=nx,this.headByte=-1,this.stack=[]}return e.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},e.prototype.setBuffer=function(e){this.bytes=HC(e),this.view=function(e){if(e instanceof ArrayBuffer)return new DataView(e);var t=HC(e);return new DataView(t.buffer,t.byteOffset,t.byteLength)}(this.bytes),this.pos=0},e.prototype.appendBuffer=function(e){if(-1!==this.headByte||this.hasRemaining(1)){var t=this.bytes.subarray(this.pos),n=HC(e),r=new Uint8Array(t.length+n.length);r.set(t),r.set(n,t.length),this.setBuffer(r)}else this.setBuffer(e)},e.prototype.hasRemaining=function(e){return this.view.byteLength-this.pos>=e},e.prototype.createExtraByteError=function(e){var t=this.view,n=this.pos;return new RangeError("Extra ".concat(t.byteLength-n," of ").concat(t.byteLength," byte(s) found at buffer[").concat(e,"]"))},e.prototype.decode=function(e){this.reinitializeState(),this.setBuffer(e);var t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t},e.prototype.decodeMulti=function(e){return KC(this,(function(t){switch(t.label){case 0:this.reinitializeState(),this.setBuffer(e),t.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}}))},e.prototype.decodeAsync=function(e){var t,n,r,o;return XC(this,void 0,void 0,(function(){var i,a,s,l,c,u,d,p;return KC(this,(function(g){switch(g.label){case 0:i=!1,g.label=1;case 1:g.trys.push([1,6,7,12]),t=QC(e),g.label=2;case 2:return[4,t.next()];case 3:if((n=g.sent()).done)return[3,5];if(s=n.value,i)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s);try{a=this.doDecodeSync(),i=!0}catch(e){if(!(e instanceof rx))throw e}this.totalPos+=this.pos,g.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return l=g.sent(),r={error:l},[3,12];case 7:return g.trys.push([7,,10,11]),n&&!n.done&&(o=t.return)?[4,o.call(t)]:[3,9];case 8:g.sent(),g.label=9;case 9:return[3,11];case 10:if(r)throw r.error;return[7];case 11:return[7];case 12:if(i){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,a]}throw u=(c=this).headByte,d=c.pos,p=c.totalPos,new RangeError("Insufficient data in parsing ".concat(zC(u)," at ").concat(p," (").concat(d," in the current buffer)"))}}))}))},e.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},e.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},e.prototype.decodeMultiAsync=function(e,t){return ex(this,arguments,(function(){var n,r,o,i,a,s,l,c,u;return KC(this,(function(d){switch(d.label){case 0:n=t,r=-1,d.label=1;case 1:d.trys.push([1,13,14,19]),o=QC(e),d.label=2;case 2:return[4,ZC(o.next())];case 3:if((i=d.sent()).done)return[3,12];if(a=i.value,t&&0===r)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a),n&&(r=this.readArraySize(),n=!1,this.complete()),d.label=4;case 4:d.trys.push([4,9,,10]),d.label=5;case 5:return[4,ZC(this.doDecodeSync())];case 6:return[4,d.sent()];case 7:return d.sent(),0==--r?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((s=d.sent())instanceof rx))throw s;return[3,10];case 10:this.totalPos+=this.pos,d.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return l=d.sent(),c={error:l},[3,19];case 14:return d.trys.push([14,,17,18]),i&&!i.done&&(u=o.return)?[4,ZC(u.call(o))]:[3,16];case 15:d.sent(),d.label=16;case 16:return[3,18];case 17:if(c)throw c.error;return[7];case 18:return[7];case 19:return[2]}}))}))},e.prototype.doDecodeSync=function(){e:for(;;){var e=this.readHeadByte(),t=void 0;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){if(0!==(r=e-128)){this.pushMapState(r),this.complete();continue e}t={}}else if(e<160){if(0!==(r=e-144)){this.pushArrayState(r),this.complete();continue e}t=[]}else{var n=e-160;t=this.decodeUtf8String(n,0)}else if(192===e)t=null;else if(194===e)t=!1;else if(195===e)t=!0;else if(202===e)t=this.readF32();else if(203===e)t=this.readF64();else if(204===e)t=this.readU8();else if(205===e)t=this.readU16();else if(206===e)t=this.readU32();else if(207===e)t=this.readU64();else if(208===e)t=this.readI8();else if(209===e)t=this.readI16();else if(210===e)t=this.readI32();else if(211===e)t=this.readI64();else if(217===e){n=this.lookU8();t=this.decodeUtf8String(n,1)}else if(218===e){n=this.lookU16();t=this.decodeUtf8String(n,2)}else if(219===e){n=this.lookU32();t=this.decodeUtf8String(n,4)}else if(220===e){if(0!==(r=this.readU16())){this.pushArrayState(r),this.complete();continue e}t=[]}else if(221===e){if(0!==(r=this.readU32())){this.pushArrayState(r),this.complete();continue e}t=[]}else if(222===e){if(0!==(r=this.readU16())){this.pushMapState(r),this.complete();continue e}t={}}else if(223===e){if(0!==(r=this.readU32())){this.pushMapState(r),this.complete();continue e}t={}}else if(196===e){var r=this.lookU8();t=this.decodeBinary(r,1)}else if(197===e){r=this.lookU16();t=this.decodeBinary(r,2)}else if(198===e){r=this.lookU32();t=this.decodeBinary(r,4)}else if(212===e)t=this.decodeExtension(1,0);else if(213===e)t=this.decodeExtension(2,0);else if(214===e)t=this.decodeExtension(4,0);else if(215===e)t=this.decodeExtension(8,0);else if(216===e)t=this.decodeExtension(16,0);else if(199===e){r=this.lookU8();t=this.decodeExtension(r,1)}else if(200===e){r=this.lookU16();t=this.decodeExtension(r,2)}else{if(201!==e)throw new WC("Unrecognized type byte: ".concat(zC(e)));r=this.lookU32();t=this.decodeExtension(r,4)}this.complete();for(var o=this.stack;o.length>0;){var i=o[o.length-1];if(0===i.type){if(i.array[i.position]=t,i.position++,i.position!==i.size)continue e;o.pop(),t=i.array}else{if(1===i.type){if(a=void 0,"string"!==(a=typeof t)&&"number"!==a)throw new WC("The type of key must be string or number but "+typeof t);if("__proto__"===t)throw new WC("The key __proto__ is not allowed");i.key=t,i.type=2;continue e}if(i.map[i.key]=t,i.readCount++,i.readCount!==i.size){i.key=null,i.type=1;continue e}o.pop(),t=i.map}}return t}var a},e.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},e.prototype.complete=function(){this.headByte=-1},e.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new WC("Unrecognized array type byte: ".concat(zC(e)))}},e.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new WC("Max length exceeded: map length (".concat(e,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})},e.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new WC("Max length exceeded: array length (".concat(e,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.push({type:0,size:e,array:new Array(e),position:0})},e.prototype.decodeUtf8String=function(e,t){var n;if(e>this.maxStrLength)throw new WC("Max length exceeded: UTF-8 byte length (".concat(e,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+t+e)throw ox;var r,o=this.pos+t;return r=this.stateIsMapKey()&&(null===(n=this.keyDecoder)||void 0===n?void 0:n.canBeCached(e))?this.keyDecoder.decode(this.bytes,o,e):e>$C?function(e,t,n){var r=e.subarray(t,t+n);return VC.decode(r)}(this.bytes,o,e):GC(this.bytes,o,e),this.pos+=t+e,r},e.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},e.prototype.decodeBinary=function(e,t){if(e>this.maxBinLength)throw new WC("Max length exceeded: bin length (".concat(e,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining(e+t))throw ox;var n=this.pos+t,r=this.bytes.subarray(n,n+e);return this.pos+=t+e,r},e.prototype.decodeExtension=function(e,t){if(e>this.maxExtLength)throw new WC("Max length exceeded: ext length (".concat(e,") > maxExtLength (").concat(this.maxExtLength,")"));var n=this.view.getInt8(this.pos+t),r=this.decodeBinary(e,t+1);return this.extensionCodec.decode(r,n,this.context)},e.prototype.lookU8=function(){return this.view.getUint8(this.pos)},e.prototype.lookU16=function(){return this.view.getUint16(this.pos)},e.prototype.lookU32=function(){return this.view.getUint32(this.pos)},e.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},e.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},e.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},e.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},e.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},e.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},e.prototype.readU64=function(){var e,t,n=(e=this.view,t=this.pos,4294967296*e.getUint32(t)+e.getUint32(t+4));return this.pos+=8,n},e.prototype.readI64=function(){var e=CC(this.view,this.pos);return this.pos+=8,e},e.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},e.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e},e}();class sx{static write(e){let t=e.byteLength||e.length;const n=[];do{let e=127&t;t>>=7,t>0&&(e|=128),n.push(e)}while(t>0);t=e.byteLength||e.length;const r=new Uint8Array(n.length+t);return r.set(n,0),r.set(e,n.length),r.buffer}static parse(e){const t=[],n=new Uint8Array(e),r=[0,7,14,21,28];for(let o=0;o<e.byteLength;){let i,a=0,s=0;do{i=n[o+a],s|=(127&i)<<r[a],a++}while(a<Math.min(5,e.byteLength-o)&&128&i);if(128&i&&a<5)throw new Error("Cannot read message size.");if(5===a&&i>7)throw new Error("Messages bigger than 2GB are not supported.");if(!(n.byteLength>=o+a+s))throw new Error("Incomplete message.");t.push(n.slice?n.slice(o+a,o+a+s):n.subarray(o+a,o+a+s)),o=o+a+s}return t}}const lx=new Uint8Array([145,iC.Ping]);class cx{constructor(e){this.name="messagepack",this.version=2,this.transferFormat=_C.Binary,this._errorResult=1,this._voidResult=2,this._nonVoidResult=3,e=e||{},this._encoder=new JC(e.extensionCodec,e.context,e.maxDepth,e.initialBufferSize,e.sortKeys,e.forceFloat32,e.ignoreUndefined,e.forceIntegerToFloat),this._decoder=new ax(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength)}parseMessages(e,t){if(!(n=e)||"undefined"==typeof ArrayBuffer||!(n instanceof ArrayBuffer||n.constructor&&"ArrayBuffer"===n.constructor.name))throw new Error("Invalid input for MessagePack hub protocol. Expected an ArrayBuffer.");var n;null===t&&(t=VP.instance);const r=sx.parse(e),o=[];for(const e of r){const n=this._parseMessage(e,t);n&&o.push(n)}return o}writeMessage(e){switch(e.type){case iC.Invocation:return this._writeInvocation(e);case iC.StreamInvocation:return this._writeStreamInvocation(e);case iC.StreamItem:return this._writeStreamItem(e);case iC.Completion:return this._writeCompletion(e);case iC.Ping:return sx.write(lx);case iC.CancelInvocation:return this._writeCancelInvocation(e);case iC.Close:return this._writeClose();case iC.Ack:return this._writeAck(e);case iC.Sequence:return this._writeSequence(e);default:throw new Error("Invalid message type.")}}_parseMessage(e,t){if(0===e.length)throw new Error("Invalid payload.");const n=this._decoder.decode(e);if(0===n.length||!(n instanceof Array))throw new Error("Invalid payload.");const r=n[0];switch(r){case iC.Invocation:return this._createInvocationMessage(this._readHeaders(n),n);case iC.StreamItem:return this._createStreamItemMessage(this._readHeaders(n),n);case iC.Completion:return this._createCompletionMessage(this._readHeaders(n),n);case iC.Ping:return this._createPingMessage(n);case iC.Close:return this._createCloseMessage(n);case iC.Ack:return this._createAckMessage(n);case iC.Sequence:return this._createSequenceMessage(n);default:return t.log(GP.Information,"Unknown message type '"+r+"' ignored."),null}}_createCloseMessage(e){if(e.length<2)throw new Error("Invalid payload for Close message.");return{allowReconnect:e.length>=3?e[2]:void 0,error:e[1],type:iC.Close}}_createPingMessage(e){if(e.length<1)throw new Error("Invalid payload for Ping message.");return{type:iC.Ping}}_createInvocationMessage(e,t){if(t.length<5)throw new Error("Invalid payload for Invocation message.");const n=t[2];return n?{arguments:t[4],headers:e,invocationId:n,streamIds:[],target:t[3],type:iC.Invocation}:{arguments:t[4],headers:e,streamIds:[],target:t[3],type:iC.Invocation}}_createStreamItemMessage(e,t){if(t.length<4)throw new Error("Invalid payload for StreamItem message.");return{headers:e,invocationId:t[2],item:t[3],type:iC.StreamItem}}_createCompletionMessage(e,t){if(t.length<4)throw new Error("Invalid payload for Completion message.");const n=t[3];if(n!==this._voidResult&&t.length<5)throw new Error("Invalid payload for Completion message.");let r,o;switch(n){case this._errorResult:r=t[4];break;case this._nonVoidResult:o=t[4]}return{error:r,headers:e,invocationId:t[2],result:o,type:iC.Completion}}_createAckMessage(e){if(e.length<1)throw new Error("Invalid payload for Ack message.");return{sequenceId:e[1],type:iC.Ack}}_createSequenceMessage(e){if(e.length<1)throw new Error("Invalid payload for Sequence message.");return{sequenceId:e[1],type:iC.Sequence}}_writeInvocation(e){let t;return t=e.streamIds?this._encoder.encode([iC.Invocation,e.headers||{},e.invocationId||null,e.target,e.arguments,e.streamIds]):this._encoder.encode([iC.Invocation,e.headers||{},e.invocationId||null,e.target,e.arguments]),sx.write(t.slice())}_writeStreamInvocation(e){let t;return t=e.streamIds?this._encoder.encode([iC.StreamInvocation,e.headers||{},e.invocationId,e.target,e.arguments,e.streamIds]):this._encoder.encode([iC.StreamInvocation,e.headers||{},e.invocationId,e.target,e.arguments]),sx.write(t.slice())}_writeStreamItem(e){const t=this._encoder.encode([iC.StreamItem,e.headers||{},e.invocationId,e.item]);return sx.write(t.slice())}_writeCompletion(e){const t=e.error?this._errorResult:void 0!==e.result?this._nonVoidResult:this._voidResult;let n;switch(t){case this._errorResult:n=this._encoder.encode([iC.Completion,e.headers||{},e.invocationId,t,e.error]);break;case this._voidResult:n=this._encoder.encode([iC.Completion,e.headers||{},e.invocationId,t]);break;case this._nonVoidResult:n=this._encoder.encode([iC.Completion,e.headers||{},e.invocationId,t,e.result])}return sx.write(n.slice())}_writeCancelInvocation(e){const t=this._encoder.encode([iC.CancelInvocation,e.headers||{},e.invocationId]);return sx.write(t.slice())}_writeClose(){const e=this._encoder.encode([iC.Close,null]);return sx.write(e.slice())}_writeAck(e){const t=this._encoder.encode([iC.Ack,e.sequenceId]);return sx.write(t.slice())}_writeSequence(e){const t=this._encoder.encode([iC.Sequence,e.sequenceId]);return sx.write(t.slice())}_readHeaders(e){const t=e[1];if("object"!=typeof t)throw new Error("Invalid headers.");return t}}function ux(e){return"function"==typeof e}function dx(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var px=dx((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function gx(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var hx=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,r,o;if(!this.closed){this.closed=!0;var l=this._parentage;if(l)if(this._parentage=null,Array.isArray(l))try{for(var c=i(l),u=c.next();!u.done;u=c.next()){u.value.remove(this)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}else l.remove(this);var d=this.initialTeardown;if(ux(d))try{d()}catch(e){o=e instanceof px?e.errors:[e]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var g=i(p),h=g.next();!h.done;h=g.next()){var f=h.value;try{mx(f)}catch(e){o=null!=o?o:[],e instanceof px?o=s(s([],a(o)),a(e.errors)):o.push(e)}}}catch(e){n={error:e}}finally{try{h&&!h.done&&(r=g.return)&&r.call(g)}finally{if(n)throw n.error}}}if(o)throw new px(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)mx(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&gx(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&gx(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),fx=hx.EMPTY;function _x(e){return e instanceof hx||e&&"closed"in e&&ux(e.remove)&&ux(e.add)&&ux(e.unsubscribe)}function mx(e){ux(e)?e():e.unsubscribe()}var vx={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Tx={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,s([e,t],a(n)))},clearTimeout:function(e){var t=Tx.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function yx(e){Tx.setTimeout((function(){throw e}))}function Ex(){}function Sx(e){e()}var Ix=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,_x(t)&&t.add(n)):n.destination=Ox,n}return n(t,e),t.create=function(e,t,n){return new bx(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(hx),Ax=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){wx(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){wx(e)}else wx(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){wx(e)}},e}(),bx=function(e){function t(t,n,r){var o,i=e.call(this)||this;return o=ux(t)||!t?{next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:t,i.destination=new Ax(o),i}return n(t,e),t}(Ix);function wx(e){yx(e)}var Ox={closed:!0,next:Ex,error:function(e){throw e},complete:Ex},Nx="function"==typeof Symbol&&Symbol.observable||"@@observable";function Rx(e){return e}var Lx=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,o=this,i=(r=e)&&r instanceof Ix||function(e){return e&&ux(e.next)&&ux(e.error)&&ux(e.complete)}(r)&&_x(r)?e:new bx(e,t,n);return Sx((function(){var e=o,t=e.operator,n=e.source;i.add(t?t.call(i,n):n?o._subscribe(i):o._trySubscribe(i))})),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Px(t))((function(t,r){var o=new bx({next:function(t){try{e(t)}catch(e){r(e),o.unsubscribe()}},error:r,complete:t});n.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[Nx]=function(){return this},e.prototype.pipe=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0===(e=t).length?Rx:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Px(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function Px(e){var t;return null!==(t=null!=e?e:vx.Promise)&&void 0!==t?t:Promise}function Cx(e){return function(t){if(function(e){return ux(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function xx(e,t,n,r,o){return new kx(e,t,n,r,o)}var kx=function(e){function t(t,n,r,o,i,a){var s=e.call(this,t)||this;return s.onFinalize=i,s.shouldUnsubscribe=a,s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return n(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(Ix),Dx=dx((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),Ux=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return n(t,e),t.prototype.lift=function(e){var t=new Mx(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new Dx},t.prototype.next=function(e){var t=this;Sx((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=i(t.currentObservers),a=o.next();!a.done;a=o.next()){a.value.next(e)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;Sx((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;Sx((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,o=n.isStopped,i=n.observers;return r||o?fx:(this.currentObservers=null,i.push(e),new hx((function(){t.currentObservers=null,gx(i,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,o=t.isStopped;n?e.error(r):o&&e.complete()},t.prototype.asObservable=function(){var e=new Lx;return e.source=this,e},t.create=function(e,t){return new Mx(e,t)},t}(Lx),Mx=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return n(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:fx},t}(Ux),Gx=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return n(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(Ux),Vx={now:function(){return(Vx.delegate||Date).now()},delegate:void 0},$x=new Lx((function(e){return e.complete()}));function Fx(e){return e[e.length-1]}function jx(e){return(t=Fx(e))&&ux(t.schedule)?e.pop():void 0;var t}var Wx=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function qx(e){return ux(null==e?void 0:e.then)}function Bx(e){return ux(e[Nx])}function Hx(e){return Symbol.asyncIterator&&ux(null==e?void 0:e[Symbol.asyncIterator])}function Jx(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var zx="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Yx(e){return ux(null==e?void 0:e[zx])}function Xx(e){return c(this,arguments,(function(){var t,n,r;return o(this,(function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,l(t.read())];case 3:return n=o.sent(),r=n.value,n.done?[4,l(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,l(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function Kx(e){return ux(null==e?void 0:e.getReader)}function Qx(e){if(e instanceof Lx)return e;if(null!=e){if(Bx(e))return o=e,new Lx((function(e){var t=o[Nx]();if(ux(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(Wx(e))return r=e,new Lx((function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()}));if(qx(e))return n=e,new Lx((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,yx)}));if(Hx(e))return Zx(e);if(Yx(e))return t=e,new Lx((function(e){var n,r;try{for(var o=i(t),a=o.next();!a.done;a=o.next()){var s=a.value;if(e.next(s),e.closed)return}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}e.complete()}));if(Kx(e))return Zx(Xx(e))}var t,n,r,o;throw Jx(e)}function Zx(e){return new Lx((function(t){(function(e,t){var n,i,a,s;return r(this,void 0,void 0,(function(){var r,l;return o(this,(function(o){switch(o.label){case 0:o.trys.push([0,5,6,11]),n=u(e),o.label=1;case 1:return[4,n.next()];case 2:if((i=o.sent()).done)return[3,4];if(r=i.value,t.next(r),t.closed)return[2];o.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=o.sent(),a={error:l},[3,11];case 6:return o.trys.push([6,,9,10]),i&&!i.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:o.sent(),o.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function ek(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=!1);var i=t.schedule((function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()}),r);if(e.add(i),!o)return i}function tk(e,t){return void 0===t&&(t=0),Cx((function(n,r){n.subscribe(xx(r,(function(n){return ek(r,e,(function(){return r.next(n)}),t)}),(function(){return ek(r,e,(function(){return r.complete()}),t)}),(function(n){return ek(r,e,(function(){return r.error(n)}),t)})))}))}function nk(e,t){return void 0===t&&(t=0),Cx((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}function rk(e,t){if(!e)throw new Error("Iterable cannot be null");return new Lx((function(n){ek(n,t,(function(){var r=e[Symbol.asyncIterator]();ek(n,t,(function(){r.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function ok(e,t){if(null!=e){if(Bx(e))return function(e,t){return Qx(e).pipe(nk(t),tk(t))}(e,t);if(Wx(e))return function(e,t){return new Lx((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}(e,t);if(qx(e))return function(e,t){return Qx(e).pipe(nk(t),tk(t))}(e,t);if(Hx(e))return rk(e,t);if(Yx(e))return function(e,t){return new Lx((function(n){var r;return ek(n,t,(function(){r=e[zx](),ek(n,t,(function(){var e,t,o;try{t=(e=r.next()).value,o=e.done}catch(e){return void n.error(e)}o?n.complete():n.next(t)}),0,!0)})),function(){return ux(null==r?void 0:r.return)&&r.return()}}))}(e,t);if(Kx(e))return function(e,t){return rk(Xx(e),t)}(e,t)}throw Jx(e)}function ik(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(e,t){return t?ok(e,t):Qx(e)}(e,jx(e))}var ak=dx((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));function sk(e,t){return Cx((function(n,r){var o=0;n.subscribe(xx(r,(function(n){r.next(e.call(t,n,o++))})))}))}function lk(e,t){return Cx((function(n,r){var o=0;n.subscribe(xx(r,(function(n){return e.call(t,n,o++)&&r.next(n)})))}))}function ck(e,t){return Cx(function(e,t,n){return function(r,o){var i=n,a=t,s=0;r.subscribe(xx(o,(function(t){var n=s++;a=i?e(a,t,n):(i=!0,t)}),(function(){i&&o.next(a),o.complete()})))}}(e,t,arguments.length>=2))}function uk(e){return e<=0?function(){return $x}:Cx((function(t,n){var r=0;t.subscribe(xx(n,(function(t){++r<=e&&(n.next(t),e<=r&&n.complete())})))}))}function dk(e,t){return void 0===t&&(t=Rx),e=null!=e?e:pk,Cx((function(n,r){var o,i=!0;n.subscribe(xx(r,(function(n){var a=t(n);!i&&e(o,a)||(i=!1,o=a,r.next(n))})))}))}function pk(e,t){return e===t}function gk(){return new ak}function hk(e,t){var n=arguments.length>=2;return function(e){return e.pipe(Rx,uk(1),n?function(e){return Cx((function(t,n){var r=!1;t.subscribe(xx(n,(function(e){r=!0,n.next(e)}),(function(){r||n.next(e),n.complete()})))}))}(t):(void 0===(r=function(){return new ak})&&(r=gk),Cx((function(e,t){var n=!1;e.subscribe(xx(t,(function(e){n=!0,t.next(e)}),(function(){return n?t.complete():t.error(r())})))}))));var r}}function fk(){return Cx((function(e,t){var n,r=!1;e.subscribe(xx(t,(function(e){var o=n;n=e,r&&t.next([o,e]),r=!0})))}))}function _k(e){void 0===e&&(e={});var t=e.connector,n=void 0===t?function(){return new Ux}:t,r=e.resetOnError,o=void 0===r||r,i=e.resetOnComplete,a=void 0===i||i,s=e.resetOnRefCountZero,l=void 0===s||s;return function(e){var t,r,i,s=0,c=!1,u=!1,d=function(){null==r||r.unsubscribe(),r=void 0},p=function(){d(),t=i=void 0,c=u=!1},g=function(){var e=t;p(),null==e||e.unsubscribe()};return Cx((function(e,h){s++,u||c||d();var f=i=null!=i?i:n();h.add((function(){0!==--s||u||c||(r=mk(g,l))})),f.subscribe(h),!t&&s>0&&(t=new bx({next:function(e){return f.next(e)},error:function(e){u=!0,d(),r=mk(p,o,e),f.error(e)},complete:function(){c=!0,d(),r=mk(p,a),f.complete()}}),Qx(e).subscribe(t))}))(e)}}function mk(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!0!==t){if(!1!==t){var o=new bx({next:function(){o.unsubscribe(),e()}});return Qx(t.apply(void 0,s([],a(n)))).subscribe(o)}}else e()}function vk(e,t){return Cx((function(n,r){var o=null,i=0,a=!1,s=function(){return a&&!o&&r.complete()};n.subscribe(xx(r,(function(n){null==o||o.unsubscribe();var a=0,l=i++;Qx(e(n,l)).subscribe(o=xx(r,(function(e){return r.next(t?t(n,e,l,a++):e)}),(function(){o=null,s()})))}),(function(){a=!0,s()})))}))}function Tk(e){return Cx((function(t,n){Qx(e).subscribe(xx(n,(function(){return n.complete()}),Ex)),!n.closed&&t.subscribe(n)}))}function yk(e){return void 0===e&&(e=Vx),sk((function(t){return{value:t,timestamp:e.now()}}))}function Ek(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r=ux(Fx(n=e))?n.pop():void 0;return Cx((function(t,n){for(var o=e.length,i=new Array(o),l=e.map((function(){return!1})),c=!1,u=function(t){Qx(e[t]).subscribe(xx(n,(function(e){i[t]=e,c||l[t]||(l[t]=!0,(c=l.every(Rx))&&(l=null))}),Ex))},d=0;d<o;d++)u(d);t.subscribe(xx(n,(function(e){if(c){var t=s([e],a(i));n.next(r?r.apply(void 0,s([],a(t))):t)}})))}))}function Sk(){let e=0,t=0;for(let n=0;n<28;n+=7){let r=this.buf[this.pos++];if(e|=(127&r)<<n,!(128&r))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,!(128&n))return this.assertBounds(),[e,t];for(let n=3;n<=31;n+=7){let r=this.buf[this.pos++];if(t|=(127&r)<<n,!(128&r))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function Ik(e,t,n){for(let r=0;r<28;r+=7){const o=e>>>r,i=!(o>>>7==0&&0==t),a=255&(i?128|o:o);if(n.push(a),!i)return}const r=e>>>28&15|(7&t)<<4,o=!!(t>>3);if(n.push(255&(o?128|r:r)),o){for(let e=3;e<31;e+=7){const r=t>>>e,o=!(r>>>7==0),i=255&(o?128|r:r);if(n.push(i),!o)return}n.push(t>>>31&1)}}const Ak=4294967296;function bk(e){const t="-"===e[0];t&&(e=e.slice(1));const n=1e6;let r=0,o=0;function i(t,i){const a=Number(e.slice(t,i));o*=n,r=r*n+a,r>=Ak&&(o+=r/Ak|0,r%=Ak)}return i(-24,-18),i(-18,-12),i(-12,-6),i(-6),t?Nk(r,o):Ok(r,o)}function wk(e,t){if(({lo:e,hi:t}=function(e,t){return{lo:e>>>0,hi:t>>>0}}(e,t)),t<=2097151)return String(Ak*t+e);const n=16777215&(e>>>24|t<<8),r=t>>16&65535;let o=(16777215&e)+6777216*n+6710656*r,i=n+8147497*r,a=2*r;const s=1e7;return o>=s&&(i+=Math.floor(o/s),o%=s),i>=s&&(a+=Math.floor(i/s),i%=s),a.toString()+Rk(i)+Rk(o)}function Ok(e,t){return{lo:0|e,hi:0|t}}function Nk(e,t){return t=~t,e?e=1+~e:t+=1,Ok(e,t)}const Rk=e=>{const t=String(e);return"0000000".slice(t.length)+t};function Lk(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function Pk(){let e=this.buf[this.pos++],t=127&e;if(!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,!(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let t=5;128&e&&t<10;t++)e=this.buf[this.pos++];if(128&e)throw new Error("invalid varint");return this.assertBounds(),t>>>0}const Ck=xk();function xk(){const e=new DataView(new ArrayBuffer(8));if("function"==typeof BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64&&("object"!=typeof process||"object"!=typeof process.env||"1"!==process.env.BUF_BIGINT_DISABLE)){const t=BigInt("-9223372036854775808"),n=BigInt("9223372036854775807"),r=BigInt("0"),o=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(e){const r="bigint"==typeof e?e:BigInt(e);if(r>n||r<t)throw new Error(`invalid int64: ${e}`);return r},uParse(e){const t="bigint"==typeof e?e:BigInt(e);if(t>o||t<r)throw new Error(`invalid uint64: ${e}`);return t},enc(t){return e.setBigInt64(0,this.parse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(t){return e.setBigInt64(0,this.uParse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigInt64(0,!0)),uDec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigUint64(0,!0))}}return{zero:"0",supported:!1,parse:e=>("string"!=typeof e&&(e=e.toString()),kk(e),e),uParse:e=>("string"!=typeof e&&(e=e.toString()),Dk(e),e),enc:e=>("string"!=typeof e&&(e=e.toString()),kk(e),bk(e)),uEnc:e=>("string"!=typeof e&&(e=e.toString()),Dk(e),bk(e)),dec:(e,t)=>function(e,t){let n=Ok(e,t);const r=2147483648&n.hi;r&&(n=Nk(n.lo,n.hi));const o=wk(n.lo,n.hi);return r?"-"+o:o}(e,t),uDec:(e,t)=>wk(e,t)}}function kk(e){if(!/^-?[0-9]+$/.test(e))throw new Error("invalid int64: "+e)}function Dk(e){if(!/^[0-9]+$/.test(e))throw new Error("invalid uint64: "+e)}const Uk=Symbol.for("@bufbuild/protobuf/text-encoding");function Mk(){if(null==globalThis[Uk]){const e=new globalThis.TextEncoder,t=new globalThis.TextDecoder;globalThis[Uk]={encodeUtf8:t=>e.encode(t),decodeUtf8:e=>t.decode(e),checkUtf8(e){try{return encodeURIComponent(e),!0}catch(e){return!1}}}}return globalThis[Uk]}var Gk;!function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(Gk||(Gk={}));const Vk=34028234663852886e22,$k=-34028234663852886e22;class Fk{constructor(e=Mk().encodeUtf8){this.encodeUtf8=e,this.stack=[],this.chunks=[],this.buf=[]}finish(){this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]);let e=0;for(let t=0;t<this.chunks.length;t++)e+=this.chunks[t].length;let t=new Uint8Array(e),n=0;for(let e=0;e<this.chunks.length;e++)t.set(this.chunks[e],n),n+=this.chunks[e].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(qk(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return Wk(e),Lk(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.encodeUtf8(e);return this.uint32(t.byteLength),this.raw(t)}float(e){!function(e){if("string"==typeof e){const t=e;if(e=Number(e),isNaN(e)&&"NaN"!==t)throw new Error("invalid float32: "+t)}else if("number"!=typeof e)throw new Error("invalid float32: "+typeof e);if(Number.isFinite(e)&&(e>Vk||e<$k))throw new Error("invalid float32: "+e)}(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){qk(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){Wk(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return Wk(e),Lk(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=Ck.enc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=Ck.uEnc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}int64(e){let t=Ck.enc(e);return Ik(t.lo,t.hi,this.buf),this}sint64(e){let t=Ck.enc(e),n=t.hi>>31;return Ik(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){let t=Ck.uEnc(e);return Ik(t.lo,t.hi,this.buf),this}}class jk{constructor(e,t=Mk().decodeUtf8){this.decodeUtf8=t,this.varint64=Sk,this.uint32=Pk,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength)}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e,t){let n=this.pos;switch(e){case Gk.Varint:for(;128&this.buf[this.pos++];);break;case Gk.Bit64:this.pos+=4;case Gk.Bit32:this.pos+=4;break;case Gk.LengthDelimited:let n=this.uint32();this.pos+=n;break;case Gk.StartGroup:for(;;){const[e,n]=this.tag();if(n===Gk.EndGroup){if(void 0!==t&&e!==t)throw new Error("invalid end group tag");break}this.skip(n,e)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return Ck.dec(...this.varint64())}uint64(){return Ck.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n,Ck.dec(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Ck.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Ck.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.decodeUtf8(this.bytes())}}function Wk(e){if("string"==typeof e)e=Number(e);else if("number"!=typeof e)throw new Error("invalid int32: "+typeof e);if(!Number.isInteger(e)||e>2147483647||e<-2147483648)throw new Error("invalid int32: "+e)}function qk(e){if("string"==typeof e)e=Number(e);else if("number"!=typeof e)throw new Error("invalid uint32: "+typeof e);if(!Number.isInteger(e)||e>4294967295||e<0)throw new Error("invalid uint32: "+e)}const Bk={$type:"google.protobuf.Duration",encode:(e,t=new Fk)=>(0!==e.seconds&&t.uint32(8).int64(e.seconds),0!==e.nanos&&t.uint32(16).int32(e.nanos),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"google.protobuf.Duration",seconds:0,nanos:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.seconds=Hk(n.int64());continue;case 2:if(16!==e)break;o.nanos=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:Bk.$type,seconds:Jk(e.seconds)?globalThis.Number(e.seconds):0,nanos:Jk(e.nanos)?globalThis.Number(e.nanos):0}),toJSON(e){const t={};return 0!==e.seconds&&(t.seconds=Math.round(e.seconds)),0!==e.nanos&&(t.nanos=Math.round(e.nanos)),t},create:e=>Bk.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"google.protobuf.Duration",seconds:0,nanos:0};return r.seconds=null!==(t=e.seconds)&&void 0!==t?t:0,r.nanos=null!==(n=e.nanos)&&void 0!==n?n:0,r}};function Hk(e){const t=globalThis.Number(e.toString());if(t>globalThis.Number.MAX_SAFE_INTEGER)throw new globalThis.Error("Value is larger than Number.MAX_SAFE_INTEGER");if(t<globalThis.Number.MIN_SAFE_INTEGER)throw new globalThis.Error("Value is smaller than Number.MIN_SAFE_INTEGER");return t}function Jk(e){return null!=e}const zk={$type:"google.protobuf.Timestamp",encode:(e,t=new Fk)=>(0!==e.seconds&&t.uint32(8).int64(e.seconds),0!==e.nanos&&t.uint32(16).int32(e.nanos),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"google.protobuf.Timestamp",seconds:0,nanos:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.seconds=Yk(n.int64());continue;case 2:if(16!==e)break;o.nanos=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:zk.$type,seconds:Xk(e.seconds)?globalThis.Number(e.seconds):0,nanos:Xk(e.nanos)?globalThis.Number(e.nanos):0}),toJSON(e){const t={};return 0!==e.seconds&&(t.seconds=Math.round(e.seconds)),0!==e.nanos&&(t.nanos=Math.round(e.nanos)),t},create:e=>zk.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"google.protobuf.Timestamp",seconds:0,nanos:0};return r.seconds=null!==(t=e.seconds)&&void 0!==t?t:0,r.nanos=null!==(n=e.nanos)&&void 0!==n?n:0,r}};function Yk(e){const t=globalThis.Number(e.toString());if(t>globalThis.Number.MAX_SAFE_INTEGER)throw new globalThis.Error("Value is larger than Number.MAX_SAFE_INTEGER");if(t<globalThis.Number.MIN_SAFE_INTEGER)throw new globalThis.Error("Value is smaller than Number.MIN_SAFE_INTEGER");return t}function Xk(e){return null!=e}const Kk={$type:"google.protobuf.Int32Value",encode:(e,t=new Fk)=>(0!==e.value&&t.uint32(8).int32(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"google.protobuf.Int32Value",value:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.value=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:Kk.$type,value:(t=e.value,null!=t?globalThis.Number(e.value):0)};var t},toJSON(e){const t={};return 0!==e.value&&(t.value=Math.round(e.value)),t},create:e=>Kk.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"google.protobuf.Int32Value",value:0};return n.value=null!==(t=e.value)&&void 0!==t?t:0,n}};const Qk={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternativesFlowId",encode:(e,t=new Fk)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternativesFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:Qk.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>Qk.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternativesFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const Zk={$type:"deepl.pb.interactive_text_api.common.alternatives.ProvidedWordAlternativeHighlightPayload",encode:(e,t=new Fk)=>(void 0!==e.flowId&&Qk.encode(e.flowId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.ProvidedWordAlternativeHighlightPayload",flowId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=Qk.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:Zk.$type,flowId:(t=e.flowId,null!=t?Qk.fromJSON(e.flowId):void 0)};var t},toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=Qk.toJSON(e.flowId)),t},create:e=>Zk.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.common.alternatives.ProvidedWordAlternativeHighlightPayload",flowId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?Qk.fromPartial(e.flowId):void 0,t}};const eD={$type:"deepl.pb.interactive_text_api.AnnotationId",encode:(e,t=new Fk)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.AnnotationId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:eD.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>eD.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.AnnotationId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const tD={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternative",encode(e,t=new Fk){""!==e.text&&t.uint32(10).string(e.text);for(const n of e.targetHighlights)eD.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternative",text:"",targetHighlights:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.text=n.string();continue;case 2:if(18!==e)break;o.targetHighlights.push(eD.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:tD.$type,text:(t=e.text,null!=t?globalThis.String(e.text):""),targetHighlights:globalThis.Array.isArray(null==e?void 0:e.targetHighlights)?e.targetHighlights.map((e=>eD.fromJSON(e))):[]};var t},toJSON(e){var t;const n={};return""!==e.text&&(n.text=e.text),(null===(t=e.targetHighlights)||void 0===t?void 0:t.length)&&(n.targetHighlights=e.targetHighlights.map((e=>eD.toJSON(e)))),n},create:e=>tD.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternative",text:"",targetHighlights:[]};return r.text=null!==(t=e.text)&&void 0!==t?t:"",r.targetHighlights=(null===(n=e.targetHighlights)||void 0===n?void 0:n.map((e=>eD.fromPartial(e))))||[],r}};const nD={$type:"deepl.pb.interactive_text_api.common.alternatives.ProvidedWordAlternativesAnnotationPayload",encode(e,t=new Fk){void 0!==e.flowId&&Qk.encode(e.flowId,t.uint32(10).fork()).join();for(const n of e.alternatives)tD.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.ProvidedWordAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=Qk.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.alternatives.push(tD.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:nD.$type,flowId:(t=e.flowId,null!=t?Qk.fromJSON(e.flowId):void 0),alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>tD.fromJSON(e))):[]};var t},toJSON(e){var t;const n={};return void 0!==e.flowId&&(n.flowId=Qk.toJSON(e.flowId)),(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>tD.toJSON(e)))),n},create:e=>nD.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.ProvidedWordAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};return n.flowId=void 0!==e.flowId&&null!==e.flowId?Qk.fromPartial(e.flowId):void 0,n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>tD.fromPartial(e))))||[],n}};const rD={$type:"deepl.pb.interactive_text_api.common.alternatives.TextUnitAlternativesFlowId",encode:(e,t=new Fk)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.TextUnitAlternativesFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:rD.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>rD.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.TextUnitAlternativesFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const oD={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestTextUnitAlternativesAnnotationPayload",encode:(e,t=new Fk)=>(void 0!==e.flowId&&rD.encode(e.flowId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestTextUnitAlternativesAnnotationPayload",flowId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=rD.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:oD.$type,flowId:(t=e.flowId,null!=t?rD.fromJSON(e.flowId):void 0)};var t},toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=rD.toJSON(e.flowId)),t},create:e=>oD.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestTextUnitAlternativesAnnotationPayload",flowId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?rD.fromPartial(e.flowId):void 0,t}};const iD={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestWordAlternativesAnnotationPayload",encode:(e,t=new Fk)=>(void 0!==e.flowId&&Qk.encode(e.flowId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestWordAlternativesAnnotationPayload",flowId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=Qk.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:iD.$type,flowId:(t=e.flowId,null!=t?Qk.fromJSON(e.flowId):void 0)};var t},toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=Qk.toJSON(e.flowId)),t},create:e=>iD.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestWordAlternativesAnnotationPayload",flowId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?Qk.fromPartial(e.flowId):void 0,t}};const aD={$type:"deepl.pb.interactive_text_api.TextRange",encode:(e,t=new Fk)=>(0!==e.start&&t.uint32(8).int32(e.start),0!==e.end&&t.uint32(16).int32(e.end),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.TextRange",start:0,end:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.start=n.int32();continue;case 2:if(16!==e)break;o.end=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:aD.$type,start:sD(e.start)?globalThis.Number(e.start):0,end:sD(e.end)?globalThis.Number(e.end):0}),toJSON(e){const t={};return 0!==e.start&&(t.start=Math.round(e.start)),0!==e.end&&(t.end=Math.round(e.end)),t},create:e=>aD.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.TextRange",start:0,end:0};return r.start=null!==(t=e.start)&&void 0!==t?t:0,r.end=null!==(n=e.end)&&void 0!==n?n:0,r}};function sD(e){return null!=e}const lD={$type:"deepl.pb.interactive_text_api.common.alternatives.TextUnitAlternativeDiff",encode:(e,t=new Fk)=>(void 0!==e.sourceRange&&aD.encode(e.sourceRange,t.uint32(10).fork()).join(),void 0!==e.alternativeRange&&aD.encode(e.alternativeRange,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.TextUnitAlternativeDiff",sourceRange:void 0,alternativeRange:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sourceRange=aD.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.alternativeRange=aD.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:lD.$type,sourceRange:cD(e.sourceRange)?aD.fromJSON(e.sourceRange):void 0,alternativeRange:cD(e.alternativeRange)?aD.fromJSON(e.alternativeRange):void 0}),toJSON(e){const t={};return void 0!==e.sourceRange&&(t.sourceRange=aD.toJSON(e.sourceRange)),void 0!==e.alternativeRange&&(t.alternativeRange=aD.toJSON(e.alternativeRange)),t},create:e=>lD.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.common.alternatives.TextUnitAlternativeDiff",sourceRange:void 0,alternativeRange:void 0};return t.sourceRange=void 0!==e.sourceRange&&null!==e.sourceRange?aD.fromPartial(e.sourceRange):void 0,t.alternativeRange=void 0!==e.alternativeRange&&null!==e.alternativeRange?aD.fromPartial(e.alternativeRange):void 0,t}};function cD(e){return null!=e}const uD={$type:"deepl.pb.interactive_text_api.common.free_text_prompts.FreeTextPromptList",encode(e,t=new Fk){for(const n of e.prompts)t.uint32(10).string(n);return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.free_text_prompts.FreeTextPromptList",prompts:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.prompts.push(n.string());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:uD.$type,prompts:globalThis.Array.isArray(null==e?void 0:e.prompts)?e.prompts.map((e=>globalThis.String(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.prompts)||void 0===t?void 0:t.length)&&(n.prompts=e.prompts),n},create:e=>uD.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.free_text_prompts.FreeTextPromptList",prompts:[]};return n.prompts=(null===(t=e.prompts)||void 0===t?void 0:t.map((e=>e)))||[],n}};const dD={$type:"deepl.pb.interactive_text_api.common.glossaries.GlossaryId",encode:(e,t=new Fk)=>(""!==e.id&&t.uint32(10).string(e.id),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.glossaries.GlossaryId",id:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.id=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:dD.$type,id:(t=e.id,null!=t?globalThis.String(e.id):"")};var t},toJSON(e){const t={};return""!==e.id&&(t.id=e.id),t},create:e=>dD.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.glossaries.GlossaryId",id:""};return n.id=null!==(t=e.id)&&void 0!==t?t:"",n}};var pD,gD;function hD(e){switch(e){case 0:case"CALCULATED_LANGUAGE_ORIGIN_UNSPECIFIED":return pD.UNSPECIFIED;case 1:case"CALCULATED_LANGUAGE_ORIGIN_REQUESTED_LANGUAGE":return pD.REQUESTED_LANGUAGE;case 2:case"CALCULATED_LANGUAGE_ORIGIN_LANGUAGE_DETECTION":return pD.LANGUAGE_DETECTION;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum CalculatedLanguageOrigin")}}function fD(e){switch(e){case pD.UNSPECIFIED:return"CALCULATED_LANGUAGE_ORIGIN_UNSPECIFIED";case pD.REQUESTED_LANGUAGE:return"CALCULATED_LANGUAGE_ORIGIN_REQUESTED_LANGUAGE";case pD.LANGUAGE_DETECTION:return"CALCULATED_LANGUAGE_ORIGIN_LANGUAGE_DETECTION";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum CalculatedLanguageOrigin")}}function _D(e){switch(e){case 0:case"CUSTOM_RULE_HIGHLIGHT_KIND_UNSPECIFIED":return gD.UNSPECIFIED;case 1:case"CUSTOM_RULE_HIGHLIGHT_KIND_COMPLIANCE":return gD.COMPLIANCE;case 2:case"CUSTOM_RULE_HIGHLIGHT_KIND_VIOLATION":return gD.VIOLATION;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum CustomRuleHighlightKind")}}function mD(e){switch(e){case gD.UNSPECIFIED:return"CUSTOM_RULE_HIGHLIGHT_KIND_UNSPECIFIED";case gD.COMPLIANCE:return"CUSTOM_RULE_HIGHLIGHT_KIND_COMPLIANCE";case gD.VIOLATION:return"CUSTOM_RULE_HIGHLIGHT_KIND_VIOLATION";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum CustomRuleHighlightKind")}}!function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.REQUESTED_LANGUAGE=1]="REQUESTED_LANGUAGE",e[e.LANGUAGE_DETECTION=2]="LANGUAGE_DETECTION"}(pD||(pD={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.COMPLIANCE=1]="COMPLIANCE",e[e.VIOLATION=2]="VIOLATION"}(gD||(gD={}));const vD={$type:"deepl.pb.interactive_text_api.common.styleguides.CustomRuleHighlight",encode(e,t=new Fk){""!==e.id&&t.uint32(10).string(e.id),!1!==e.isFreeTextRule&&t.uint32(16).bool(e.isFreeTextRule),0!==e.kind&&t.uint32(24).int32(e.kind);for(const n of e.ranges)aD.encode(n,t.uint32(34).fork()).join();for(const n of e.originalRanges)aD.encode(n,t.uint32(42).fork()).join();return""!==e.description&&t.uint32(50).string(e.description),t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.styleguides.CustomRuleHighlight",id:"",isFreeTextRule:!1,kind:0,ranges:[],originalRanges:[],description:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.id=n.string();continue;case 2:if(16!==e)break;o.isFreeTextRule=n.bool();continue;case 3:if(24!==e)break;o.kind=n.int32();continue;case 4:if(34!==e)break;o.ranges.push(aD.decode(n,n.uint32()));continue;case 5:if(42!==e)break;o.originalRanges.push(aD.decode(n,n.uint32()));continue;case 6:if(50!==e)break;o.description=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:vD.$type,id:yD(e.id)?globalThis.String(e.id):"",isFreeTextRule:!!yD(e.isFreeTextRule)&&globalThis.Boolean(e.isFreeTextRule),kind:yD(e.kind)?_D(e.kind):0,ranges:globalThis.Array.isArray(null==e?void 0:e.ranges)?e.ranges.map((e=>aD.fromJSON(e))):[],originalRanges:globalThis.Array.isArray(null==e?void 0:e.originalRanges)?e.originalRanges.map((e=>aD.fromJSON(e))):[],description:yD(e.description)?globalThis.String(e.description):""}),toJSON(e){var t,n;const r={};return""!==e.id&&(r.id=e.id),!1!==e.isFreeTextRule&&(r.isFreeTextRule=e.isFreeTextRule),0!==e.kind&&(r.kind=mD(e.kind)),(null===(t=e.ranges)||void 0===t?void 0:t.length)&&(r.ranges=e.ranges.map((e=>aD.toJSON(e)))),(null===(n=e.originalRanges)||void 0===n?void 0:n.length)&&(r.originalRanges=e.originalRanges.map((e=>aD.toJSON(e)))),""!==e.description&&(r.description=e.description),r},create:e=>vD.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r,o,i,a;const s={$type:"deepl.pb.interactive_text_api.common.styleguides.CustomRuleHighlight",id:"",isFreeTextRule:!1,kind:0,ranges:[],originalRanges:[],description:""};return s.id=null!==(t=e.id)&&void 0!==t?t:"",s.isFreeTextRule=null!==(n=e.isFreeTextRule)&&void 0!==n&&n,s.kind=null!==(r=e.kind)&&void 0!==r?r:0,s.ranges=(null===(o=e.ranges)||void 0===o?void 0:o.map((e=>aD.fromPartial(e))))||[],s.originalRanges=(null===(i=e.originalRanges)||void 0===i?void 0:i.map((e=>aD.fromPartial(e))))||[],s.description=null!==(a=e.description)&&void 0!==a?a:"",s}};const TD={$type:"deepl.pb.interactive_text_api.common.styleguides.CustomRuleAnnotationPayload",encode:(e,t=new Fk)=>(""!==e.id&&t.uint32(10).string(e.id),!1!==e.isFreeTextRule&&t.uint32(16).bool(e.isFreeTextRule),0!==e.kind&&t.uint32(24).int32(e.kind),""!==e.description&&t.uint32(50).string(e.description),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.styleguides.CustomRuleAnnotationPayload",id:"",isFreeTextRule:!1,kind:0,description:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.id=n.string();continue;case 2:if(16!==e)break;o.isFreeTextRule=n.bool();continue;case 3:if(24!==e)break;o.kind=n.int32();continue;case 6:if(50!==e)break;o.description=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:TD.$type,id:yD(e.id)?globalThis.String(e.id):"",isFreeTextRule:!!yD(e.isFreeTextRule)&&globalThis.Boolean(e.isFreeTextRule),kind:yD(e.kind)?_D(e.kind):0,description:yD(e.description)?globalThis.String(e.description):""}),toJSON(e){const t={};return""!==e.id&&(t.id=e.id),!1!==e.isFreeTextRule&&(t.isFreeTextRule=e.isFreeTextRule),0!==e.kind&&(t.kind=mD(e.kind)),""!==e.description&&(t.description=e.description),t},create:e=>TD.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r,o;const i={$type:"deepl.pb.interactive_text_api.common.styleguides.CustomRuleAnnotationPayload",id:"",isFreeTextRule:!1,kind:0,description:""};return i.id=null!==(t=e.id)&&void 0!==t?t:"",i.isFreeTextRule=null!==(n=e.isFreeTextRule)&&void 0!==n&&n,i.kind=null!==(r=e.kind)&&void 0!==r?r:0,i.description=null!==(o=e.description)&&void 0!==o?o:"",i}};function yD(e){return null!=e}const ED={$type:"deepl.pb.interactive_text_api.common.styleguides.StyleGuideId",encode:(e,t=new Fk)=>(""!==e.id&&t.uint32(10).string(e.id),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.styleguides.StyleGuideId",id:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.id=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:ED.$type,id:(t=e.id,null!=t?globalThis.String(e.id):"")};var t},toJSON(e){const t={};return""!==e.id&&(t.id=e.id),t},create:e=>ED.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.styleguides.StyleGuideId",id:""};return n.id=null!==(t=e.id)&&void 0!==t?t:"",n}};const SD={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitId",encode:(e,t=new Fk)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:SD.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>SD.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};var ID,AD;function bD(e){switch(e){case 0:case"INLINE_SUGGESTION_USER_CHOICE_UNSPECIFIED":return AD.UNSPECIFIED;case 1:case"INLINE_SUGGESTION_USER_CHOICE_PENDING":return AD.PENDING;case 2:case"INLINE_SUGGESTION_USER_CHOICE_CORRECT":return AD.CORRECT;case 3:case"INLINE_SUGGESTION_USER_CHOICE_RETAIN":return AD.RETAIN;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum InlineSuggestionUserChoice")}}function wD(e){switch(e){case AD.UNSPECIFIED:return"INLINE_SUGGESTION_USER_CHOICE_UNSPECIFIED";case AD.PENDING:return"INLINE_SUGGESTION_USER_CHOICE_PENDING";case AD.CORRECT:return"INLINE_SUGGESTION_USER_CHOICE_CORRECT";case AD.RETAIN:return"INLINE_SUGGESTION_USER_CHOICE_RETAIN";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum InlineSuggestionUserChoice")}}!function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SPELLING=1]="SPELLING",e[e.GRAMMAR=2]="GRAMMAR",e[e.PUNCTUATION=3]="PUNCTUATION",e[e.READABILITY=4]="READABILITY",e[e.FORMATTING=5]="FORMATTING",e[e.OTHER=6]="OTHER"}(ID||(ID={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.PENDING=1]="PENDING",e[e.CORRECT=2]="CORRECT",e[e.RETAIN=3]="RETAIN"}(AD||(AD={}));const OD={$type:"deepl.pb.interactive_text_api.write.DiffUnitAnnotationPayload",encode:(e,t=new Fk)=>(void 0!==e.diffUnitId&&WD.encode(e.diffUnitId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.DiffUnitAnnotationPayload",diffUnitId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.diffUnitId=WD.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:OD.$type,diffUnitId:TU(e.diffUnitId)?WD.fromJSON(e.diffUnitId):void 0}),toJSON(e){const t={};return void 0!==e.diffUnitId&&(t.diffUnitId=WD.toJSON(e.diffUnitId)),t},create:e=>OD.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.DiffUnitAnnotationPayload",diffUnitId:void 0};return t.diffUnitId=void 0!==e.diffUnitId&&null!==e.diffUnitId?WD.fromPartial(e.diffUnitId):void 0,t}};const ND={$type:"deepl.pb.interactive_text_api.write.ProvidedTextUnitAlternativesAnnotationPayload",encode(e,t=new Fk){void 0!==e.flowId&&rD.encode(e.flowId,t.uint32(10).fork()).join();for(const n of e.alternatives)QD.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ProvidedTextUnitAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=rD.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.alternatives.push(QD.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:ND.$type,flowId:TU(e.flowId)?rD.fromJSON(e.flowId):void 0,alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>QD.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.flowId&&(n.flowId=rD.toJSON(e.flowId)),(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>QD.toJSON(e)))),n},create:e=>ND.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ProvidedTextUnitAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};return n.flowId=void 0!==e.flowId&&null!==e.flowId?rD.fromPartial(e.flowId):void 0,n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>QD.fromPartial(e))))||[],n}};const RD={$type:"deepl.pb.interactive_text_api.write.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",encode(e,t=new Fk){for(const n of e.alternatives)QD.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.alternatives.push(QD.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:RD.$type,alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>QD.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>QD.toJSON(e)))),n},create:e=>RD.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",alternatives:[]};return n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>QD.fromPartial(e))))||[],n}};const LD={$type:"deepl.pb.interactive_text_api.write.LanguagesPropertyValue",encode(e,t=new Fk){for(const n of e.languages)KD.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.LanguagesPropertyValue",languages:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.languages.push(KD.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:LD.$type,languages:globalThis.Array.isArray(null==e?void 0:e.languages)?e.languages.map((e=>KD.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.languages)||void 0===t?void 0:t.length)&&(n.languages=e.languages.map((e=>KD.toJSON(e)))),n},create:e=>LD.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.LanguagesPropertyValue",languages:[]};return n.languages=(null===(t=e.languages)||void 0===t?void 0:t.map((e=>KD.fromPartial(e))))||[],n}};const PD={$type:"deepl.pb.interactive_text_api.write.GlossaryLanguagesPropertyValue",encode(e,t=new Fk){for(const n of e.languages)KD.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossaryLanguagesPropertyValue",languages:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.languages.push(KD.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:PD.$type,languages:globalThis.Array.isArray(null==e?void 0:e.languages)?e.languages.map((e=>KD.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.languages)||void 0===t?void 0:t.length)&&(n.languages=e.languages.map((e=>KD.toJSON(e)))),n},create:e=>PD.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.GlossaryLanguagesPropertyValue",languages:[]};return n.languages=(null===(t=e.languages)||void 0===t?void 0:t.map((e=>KD.fromPartial(e))))||[],n}};const CD={$type:"deepl.pb.interactive_text_api.write.RequestedLanguagePropertyValue",encode:(e,t=new Fk)=>(void 0!==e.language&&KD.encode(e.language,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.RequestedLanguagePropertyValue",language:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.language=KD.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:CD.$type,language:TU(e.language)?KD.fromJSON(e.language):void 0}),toJSON(e){const t={};return void 0!==e.language&&(t.language=KD.toJSON(e.language)),t},create:e=>CD.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.RequestedLanguagePropertyValue",language:void 0};return t.language=void 0!==e.language&&null!==e.language?KD.fromPartial(e.language):void 0,t}};const xD={$type:"deepl.pb.interactive_text_api.write.CalculatedLanguagePropertyValue",encode:(e,t=new Fk)=>(void 0!==e.language&&KD.encode(e.language,t.uint32(10).fork()).join(),0!==e.origin&&t.uint32(16).int32(e.origin),!1!==e.isLanguageDetectionConfident&&t.uint32(24).bool(e.isLanguageDetectionConfident),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.CalculatedLanguagePropertyValue",language:void 0,origin:0,isLanguageDetectionConfident:!1};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.language=KD.decode(n,n.uint32());continue;case 2:if(16!==e)break;o.origin=n.int32();continue;case 3:if(24!==e)break;o.isLanguageDetectionConfident=n.bool();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:xD.$type,language:TU(e.language)?KD.fromJSON(e.language):void 0,origin:TU(e.origin)?hD(e.origin):0,isLanguageDetectionConfident:!!TU(e.isLanguageDetectionConfident)&&globalThis.Boolean(e.isLanguageDetectionConfident)}),toJSON(e){const t={};return void 0!==e.language&&(t.language=KD.toJSON(e.language)),0!==e.origin&&(t.origin=fD(e.origin)),!1!==e.isLanguageDetectionConfident&&(t.isLanguageDetectionConfident=e.isLanguageDetectionConfident),t},create:e=>xD.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.write.CalculatedLanguagePropertyValue",language:void 0,origin:0,isLanguageDetectionConfident:!1};return r.language=void 0!==e.language&&null!==e.language?KD.fromPartial(e.language):void 0,r.origin=null!==(t=e.origin)&&void 0!==t?t:0,r.isLanguageDetectionConfident=null!==(n=e.isLanguageDetectionConfident)&&void 0!==n&&n,r}};const kD={$type:"deepl.pb.interactive_text_api.write.GlossaryIdPropertyValue",encode:(e,t=new Fk)=>(void 0!==e.glossaryId&&dD.encode(e.glossaryId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossaryIdPropertyValue",glossaryId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.glossaryId=dD.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:kD.$type,glossaryId:TU(e.glossaryId)?dD.fromJSON(e.glossaryId):void 0}),toJSON(e){const t={};return void 0!==e.glossaryId&&(t.glossaryId=dD.toJSON(e.glossaryId)),t},create:e=>kD.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.GlossaryIdPropertyValue",glossaryId:void 0};return t.glossaryId=void 0!==e.glossaryId&&null!==e.glossaryId?dD.fromPartial(e.glossaryId):void 0,t}};const DD={$type:"deepl.pb.interactive_text_api.write.StyleGuideIdPropertyValue",encode:(e,t=new Fk)=>(void 0!==e.styleGuideId&&ED.encode(e.styleGuideId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.StyleGuideIdPropertyValue",styleGuideId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.styleGuideId=ED.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:DD.$type,styleGuideId:TU(e.styleGuideId)?ED.fromJSON(e.styleGuideId):void 0}),toJSON(e){const t={};return void 0!==e.styleGuideId&&(t.styleGuideId=ED.toJSON(e.styleGuideId)),t},create:e=>DD.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.StyleGuideIdPropertyValue",styleGuideId:void 0};return t.styleGuideId=void 0!==e.styleGuideId&&null!==e.styleGuideId?ED.fromPartial(e.styleGuideId):void 0,t}};const UD={$type:"deepl.pb.interactive_text_api.write.CorrectionsOnlyPropertyValue",encode:(e,t=new Fk)=>(!1!==e.correctionsOnly&&t.uint32(8).bool(e.correctionsOnly),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.CorrectionsOnlyPropertyValue",correctionsOnly:!1};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.correctionsOnly=n.bool();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:UD.$type,correctionsOnly:!!TU(e.correctionsOnly)&&globalThis.Boolean(e.correctionsOnly)}),toJSON(e){const t={};return!1!==e.correctionsOnly&&(t.correctionsOnly=e.correctionsOnly),t},create:e=>UD.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.CorrectionsOnlyPropertyValue",correctionsOnly:!1};return n.correctionsOnly=null!==(t=e.correctionsOnly)&&void 0!==t&&t,n}};const MD={$type:"deepl.pb.interactive_text_api.write.FreeTextPromptListPropertyValue",encode:(e,t=new Fk)=>(void 0!==e.freeTextPromptList&&uD.encode(e.freeTextPromptList,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.FreeTextPromptListPropertyValue",freeTextPromptList:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.freeTextPromptList=uD.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:MD.$type,freeTextPromptList:TU(e.freeTextPromptList)?uD.fromJSON(e.freeTextPromptList):void 0}),toJSON(e){const t={};return void 0!==e.freeTextPromptList&&(t.freeTextPromptList=uD.toJSON(e.freeTextPromptList)),t},create:e=>MD.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.FreeTextPromptListPropertyValue",freeTextPromptList:void 0};return t.freeTextPromptList=void 0!==e.freeTextPromptList&&null!==e.freeTextPromptList?uD.fromPartial(e.freeTextPromptList):void 0,t}};const GD={$type:"deepl.pb.interactive_text_api.write.MaximumTextLengthPropertyValue",encode:(e,t=new Fk)=>(0!==e.max&&t.uint32(8).int32(e.max),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.MaximumTextLengthPropertyValue",max:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.max=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:GD.$type,max:TU(e.max)?globalThis.Number(e.max):0}),toJSON(e){const t={};return 0!==e.max&&(t.max=Math.round(e.max)),t},create:e=>GD.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.MaximumTextLengthPropertyValue",max:0};return n.max=null!==(t=e.max)&&void 0!==t?t:0,n}};const VD={$type:"deepl.pb.interactive_text_api.write.StyleVariantsPropertyValue",encode(e,t=new Fk){for(const n of e.styleVariants)eU.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.StyleVariantsPropertyValue",styleVariants:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.styleVariants.push(eU.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:VD.$type,styleVariants:globalThis.Array.isArray(null==e?void 0:e.styleVariants)?e.styleVariants.map((e=>eU.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.styleVariants)||void 0===t?void 0:t.length)&&(n.styleVariants=e.styleVariants.map((e=>eU.toJSON(e)))),n},create:e=>VD.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.StyleVariantsPropertyValue",styleVariants:[]};return n.styleVariants=(null===(t=e.styleVariants)||void 0===t?void 0:t.map((e=>eU.fromPartial(e))))||[],n}};const $D={$type:"deepl.pb.interactive_text_api.write.StyleVariantPropertyValue",encode:(e,t=new Fk)=>(void 0!==e.styleVariant&&eU.encode(e.styleVariant,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.StyleVariantPropertyValue",styleVariant:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.styleVariant=eU.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:$D.$type,styleVariant:TU(e.styleVariant)?eU.fromJSON(e.styleVariant):void 0}),toJSON(e){const t={};return void 0!==e.styleVariant&&(t.styleVariant=eU.toJSON(e.styleVariant)),t},create:e=>$D.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.StyleVariantPropertyValue",styleVariant:void 0};return t.styleVariant=void 0!==e.styleVariant&&null!==e.styleVariant?eU.fromPartial(e.styleVariant):void 0,t}};const FD={$type:"deepl.pb.interactive_text_api.write.UnsupportedLanguagePropertyValue",encode:(e,t=new Fk)=>t,decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.UnsupportedLanguagePropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:FD.$type}),toJSON:e=>({}),create:e=>FD.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.write.UnsupportedLanguagePropertyValue"})};const jD={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionsLoadingPropertyValue",encode:(e,t=new Fk)=>t,decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionsLoadingPropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:jD.$type}),toJSON:e=>({}),create:e=>jD.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.write.InlineSuggestionsLoadingPropertyValue"})};const WD={$type:"deepl.pb.interactive_text_api.write.DiffUnitId",encode:(e,t=new Fk)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.DiffUnitId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:WD.$type,value:TU(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>WD.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.DiffUnitId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const qD={$type:"deepl.pb.interactive_text_api.write.GlossaryEntry",encode:(e,t=new Fk)=>(""!==e.term&&t.uint32(10).string(e.term),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossaryEntry",term:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.term=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:qD.$type,term:TU(e.term)?globalThis.String(e.term):""}),toJSON(e){const t={};return""!==e.term&&(t.term=e.term),t},create:e=>qD.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.GlossaryEntry",term:""};return n.term=null!==(t=e.term)&&void 0!==t?t:"",n}};const BD={$type:"deepl.pb.interactive_text_api.write.GlossaryListPropertyValue",encode(e,t=new Fk){for(const n of e.glossaryEntries)qD.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossaryListPropertyValue",glossaryEntries:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.glossaryEntries.push(qD.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:BD.$type,glossaryEntries:globalThis.Array.isArray(null==e?void 0:e.glossaryEntries)?e.glossaryEntries.map((e=>qD.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.glossaryEntries)||void 0===t?void 0:t.length)&&(n.glossaryEntries=e.glossaryEntries.map((e=>qD.toJSON(e)))),n},create:e=>BD.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.GlossaryListPropertyValue",glossaryEntries:[]};return n.glossaryEntries=(null===(t=e.glossaryEntries)||void 0===t?void 0:t.map((e=>qD.fromPartial(e))))||[],n}};const HD={$type:"deepl.pb.interactive_text_api.write.GlossarySupportPropertyValue",encode:(e,t=new Fk)=>t,decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossarySupportPropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:HD.$type}),toJSON:e=>({}),create:e=>HD.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.write.GlossarySupportPropertyValue"})};const JD={$type:"deepl.pb.interactive_text_api.write.StyleGuideSupportPropertyValue",encode:(e,t=new Fk)=>t,decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.StyleGuideSupportPropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:JD.$type}),toJSON:e=>({}),create:e=>JD.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.write.StyleGuideSupportPropertyValue"})};const zD={$type:"deepl.pb.interactive_text_api.write.CorrectionsOnlySupportPropertyValue",encode:(e,t=new Fk)=>t,decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.CorrectionsOnlySupportPropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:zD.$type}),toJSON:e=>({}),create:e=>zD.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.write.CorrectionsOnlySupportPropertyValue"})};const YD={$type:"deepl.pb.interactive_text_api.write.TextUnitAlternativesSupportPropertyValue",encode:(e,t=new Fk)=>t,decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.TextUnitAlternativesSupportPropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:YD.$type}),toJSON:e=>({}),create:e=>YD.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.write.TextUnitAlternativesSupportPropertyValue"})};const XD={$type:"deepl.pb.interactive_text_api.write.GlossaryHighlight",encode(e,t=new Fk){void 0!==e.entry&&qD.encode(e.entry,t.uint32(10).fork()).join();for(const n of e.ranges)aD.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossaryHighlight",entry:void 0,ranges:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.entry=qD.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.ranges.push(aD.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:XD.$type,entry:TU(e.entry)?qD.fromJSON(e.entry):void 0,ranges:globalThis.Array.isArray(null==e?void 0:e.ranges)?e.ranges.map((e=>aD.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.entry&&(n.entry=qD.toJSON(e.entry)),(null===(t=e.ranges)||void 0===t?void 0:t.length)&&(n.ranges=e.ranges.map((e=>aD.toJSON(e)))),n},create:e=>XD.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.GlossaryHighlight",entry:void 0,ranges:[]};return n.entry=void 0!==e.entry&&null!==e.entry?qD.fromPartial(e.entry):void 0,n.ranges=(null===(t=e.ranges)||void 0===t?void 0:t.map((e=>aD.fromPartial(e))))||[],n}};const KD={$type:"deepl.pb.interactive_text_api.write.Language",encode:(e,t=new Fk)=>(""!==e.code&&t.uint32(10).string(e.code),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.Language",code:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.code=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:KD.$type,code:TU(e.code)?globalThis.String(e.code):""}),toJSON(e){const t={};return""!==e.code&&(t.code=e.code),t},create:e=>KD.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.Language",code:""};return n.code=null!==(t=e.code)&&void 0!==t?t:"",n}};const QD={$type:"deepl.pb.interactive_text_api.write.TextUnitAlternative",encode(e,t=new Fk){""!==e.text&&t.uint32(10).string(e.text);for(const n of e.glossaryHighlights)XD.encode(n,t.uint32(18).fork()).join();for(const n of e.diffs)lD.encode(n,t.uint32(26).fork()).join();void 0!==e.rephraseVariant&&ZD.encode(e.rephraseVariant,t.uint32(34).fork()).join();for(const n of e.customRuleHighlights)vD.encode(n,t.uint32(42).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.TextUnitAlternative",text:"",glossaryHighlights:[],diffs:[],rephraseVariant:void 0,customRuleHighlights:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.text=n.string();continue;case 2:if(18!==e)break;o.glossaryHighlights.push(XD.decode(n,n.uint32()));continue;case 3:if(26!==e)break;o.diffs.push(lD.decode(n,n.uint32()));continue;case 4:if(34!==e)break;o.rephraseVariant=ZD.decode(n,n.uint32());continue;case 5:if(42!==e)break;o.customRuleHighlights.push(vD.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:QD.$type,text:TU(e.text)?globalThis.String(e.text):"",glossaryHighlights:globalThis.Array.isArray(null==e?void 0:e.glossaryHighlights)?e.glossaryHighlights.map((e=>XD.fromJSON(e))):[],diffs:globalThis.Array.isArray(null==e?void 0:e.diffs)?e.diffs.map((e=>lD.fromJSON(e))):[],rephraseVariant:TU(e.rephraseVariant)?ZD.fromJSON(e.rephraseVariant):void 0,customRuleHighlights:globalThis.Array.isArray(null==e?void 0:e.customRuleHighlights)?e.customRuleHighlights.map((e=>vD.fromJSON(e))):[]}),toJSON(e){var t,n,r;const o={};return""!==e.text&&(o.text=e.text),(null===(t=e.glossaryHighlights)||void 0===t?void 0:t.length)&&(o.glossaryHighlights=e.glossaryHighlights.map((e=>XD.toJSON(e)))),(null===(n=e.diffs)||void 0===n?void 0:n.length)&&(o.diffs=e.diffs.map((e=>lD.toJSON(e)))),void 0!==e.rephraseVariant&&(o.rephraseVariant=ZD.toJSON(e.rephraseVariant)),(null===(r=e.customRuleHighlights)||void 0===r?void 0:r.length)&&(o.customRuleHighlights=e.customRuleHighlights.map((e=>vD.toJSON(e)))),o},create:e=>QD.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r,o;const i={$type:"deepl.pb.interactive_text_api.write.TextUnitAlternative",text:"",glossaryHighlights:[],diffs:[],rephraseVariant:void 0,customRuleHighlights:[]};return i.text=null!==(t=e.text)&&void 0!==t?t:"",i.glossaryHighlights=(null===(n=e.glossaryHighlights)||void 0===n?void 0:n.map((e=>XD.fromPartial(e))))||[],i.diffs=(null===(r=e.diffs)||void 0===r?void 0:r.map((e=>lD.fromPartial(e))))||[],i.rephraseVariant=void 0!==e.rephraseVariant&&null!==e.rephraseVariant?ZD.fromPartial(e.rephraseVariant):void 0,i.customRuleHighlights=(null===(o=e.customRuleHighlights)||void 0===o?void 0:o.map((e=>vD.fromPartial(e))))||[],i}};const ZD={$type:"deepl.pb.interactive_text_api.write.RephraseVariant",encode:(e,t=new Fk)=>(""!==e.name&&t.uint32(10).string(e.name),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.RephraseVariant",name:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.name=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:ZD.$type,name:TU(e.name)?globalThis.String(e.name):""}),toJSON(e){const t={};return""!==e.name&&(t.name=e.name),t},create:e=>ZD.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.RephraseVariant",name:""};return n.name=null!==(t=e.name)&&void 0!==t?t:"",n}};const eU={$type:"deepl.pb.interactive_text_api.write.StyleVariant",encode:(e,t=new Fk)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.StyleVariant",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:eU.$type,value:TU(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>eU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.StyleVariant",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const tU={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternativesFlowId",encode:(e,t=new Fk)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternativesFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:tU.$type,value:TU(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>tU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternativesFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const nU={$type:"deepl.pb.interactive_text_api.write.RequestChangeStyleAlternativesAnnotationPayload",encode:(e,t=new Fk)=>(void 0!==e.flowId&&tU.encode(e.flowId,t.uint32(10).fork()).join(),void 0!==e.styleVariant&&eU.encode(e.styleVariant,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.RequestChangeStyleAlternativesAnnotationPayload",flowId:void 0,styleVariant:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=tU.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.styleVariant=eU.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:nU.$type,flowId:TU(e.flowId)?tU.fromJSON(e.flowId):void 0,styleVariant:TU(e.styleVariant)?eU.fromJSON(e.styleVariant):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=tU.toJSON(e.flowId)),void 0!==e.styleVariant&&(t.styleVariant=eU.toJSON(e.styleVariant)),t},create:e=>nU.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.RequestChangeStyleAlternativesAnnotationPayload",flowId:void 0,styleVariant:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?tU.fromPartial(e.flowId):void 0,t.styleVariant=void 0!==e.styleVariant&&null!==e.styleVariant?eU.fromPartial(e.styleVariant):void 0,t}};const rU={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternative",encode:(e,t=new Fk)=>(""!==e.text&&t.uint32(10).string(e.text),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternative",text:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.text=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:rU.$type,text:TU(e.text)?globalThis.String(e.text):""}),toJSON(e){const t={};return""!==e.text&&(t.text=e.text),t},create:e=>rU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternative",text:""};return n.text=null!==(t=e.text)&&void 0!==t?t:"",n}};const oU={$type:"deepl.pb.interactive_text_api.write.ProvidedChangeStyleAlternativesAnnotationPayload",encode(e,t=new Fk){void 0!==e.flowId&&tU.encode(e.flowId,t.uint32(10).fork()).join();for(const n of e.alternatives)rU.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ProvidedChangeStyleAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=tU.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.alternatives.push(rU.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:oU.$type,flowId:TU(e.flowId)?tU.fromJSON(e.flowId):void 0,alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>rU.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.flowId&&(n.flowId=tU.toJSON(e.flowId)),(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>rU.toJSON(e)))),n},create:e=>oU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ProvidedChangeStyleAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};return n.flowId=void 0!==e.flowId&&null!==e.flowId?tU.fromPartial(e.flowId):void 0,n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>rU.fromPartial(e))))||[],n}};const iU={$type:"deepl.pb.interactive_text_api.write.SelectChangeStyleAlternativeAnnotationPayload",encode:(e,t=new Fk)=>(void 0!==e.flowId&&tU.encode(e.flowId,t.uint32(10).fork()).join(),""!==e.selection&&t.uint32(18).string(e.selection),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.SelectChangeStyleAlternativeAnnotationPayload",flowId:void 0,selection:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=tU.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.selection=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:iU.$type,flowId:TU(e.flowId)?tU.fromJSON(e.flowId):void 0,selection:TU(e.selection)?globalThis.String(e.selection):""}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=tU.toJSON(e.flowId)),""!==e.selection&&(t.selection=e.selection),t},create:e=>iU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.SelectChangeStyleAlternativeAnnotationPayload",flowId:void 0,selection:""};return n.flowId=void 0!==e.flowId&&null!==e.flowId?tU.fromPartial(e.flowId):void 0,n.selection=null!==(t=e.selection)&&void 0!==t?t:"",n}};const aU={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationTemplateId",encode:(e,t=new Fk)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationTemplateId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:aU.$type,value:TU(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>aU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationTemplateId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const sU={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationTemplatesPropertyValue",encode(e,t=new Fk){for(const n of e.templateIds)aU.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationTemplatesPropertyValue",templateIds:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.templateIds.push(aU.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:sU.$type,templateIds:globalThis.Array.isArray(null==e?void 0:e.templateIds)?e.templateIds.map((e=>aU.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.templateIds)||void 0===t?void 0:t.length)&&(n.templateIds=e.templateIds.map((e=>aU.toJSON(e)))),n},create:e=>sU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationTemplatesPropertyValue",templateIds:[]};return n.templateIds=(null===(t=e.templateIds)||void 0===t?void 0:t.map((e=>aU.fromPartial(e))))||[],n}};const lU={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationFlowId",encode:(e,t=new Fk)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:lU.$type,value:TU(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>lU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const cU={$type:"deepl.pb.interactive_text_api.write.RequestTemplateAdaptationAnnotationPayload",encode(e,t=new Fk){void 0!==e.flowId&&lU.encode(e.flowId,t.uint32(10).fork()).join(),""!==e.input&&t.uint32(18).string(e.input);for(const n of e.templateIds)aU.encode(n,t.uint32(26).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.RequestTemplateAdaptationAnnotationPayload",flowId:void 0,input:"",templateIds:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=lU.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.input=n.string();continue;case 3:if(26!==e)break;o.templateIds.push(aU.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:cU.$type,flowId:TU(e.flowId)?lU.fromJSON(e.flowId):void 0,input:TU(e.input)?globalThis.String(e.input):"",templateIds:globalThis.Array.isArray(null==e?void 0:e.templateIds)?e.templateIds.map((e=>aU.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.flowId&&(n.flowId=lU.toJSON(e.flowId)),""!==e.input&&(n.input=e.input),(null===(t=e.templateIds)||void 0===t?void 0:t.length)&&(n.templateIds=e.templateIds.map((e=>aU.toJSON(e)))),n},create:e=>cU.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.write.RequestTemplateAdaptationAnnotationPayload",flowId:void 0,input:"",templateIds:[]};return r.flowId=void 0!==e.flowId&&null!==e.flowId?lU.fromPartial(e.flowId):void 0,r.input=null!==(t=e.input)&&void 0!==t?t:"",r.templateIds=(null===(n=e.templateIds)||void 0===n?void 0:n.map((e=>aU.fromPartial(e))))||[],r}};const uU={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationAdaptedText",encode:(e,t=new Fk)=>(""!==e.text&&t.uint32(10).string(e.text),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationAdaptedText",text:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.text=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:uU.$type,text:TU(e.text)?globalThis.String(e.text):""}),toJSON(e){const t={};return""!==e.text&&(t.text=e.text),t},create:e=>uU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.TemplateAdaptationAdaptedText",text:""};return n.text=null!==(t=e.text)&&void 0!==t?t:"",n}};const dU={$type:"deepl.pb.interactive_text_api.write.ProvidedTemplateAdaptationAnnotationPayload",encode:(e,t=new Fk)=>(void 0!==e.flowId&&lU.encode(e.flowId,t.uint32(10).fork()).join(),void 0!==e.adaptedText&&uU.encode(e.adaptedText,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ProvidedTemplateAdaptationAnnotationPayload",flowId:void 0,adaptedText:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=lU.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.adaptedText=uU.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:dU.$type,flowId:TU(e.flowId)?lU.fromJSON(e.flowId):void 0,adaptedText:TU(e.adaptedText)?uU.fromJSON(e.adaptedText):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=lU.toJSON(e.flowId)),void 0!==e.adaptedText&&(t.adaptedText=uU.toJSON(e.adaptedText)),t},create:e=>dU.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.ProvidedTemplateAdaptationAnnotationPayload",flowId:void 0,adaptedText:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?lU.fromPartial(e.flowId):void 0,t.adaptedText=void 0!==e.adaptedText&&null!==e.adaptedText?uU.fromPartial(e.adaptedText):void 0,t}};const pU={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionId",encode:(e,t=new Fk)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:pU.$type,value:TU(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>pU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const gU={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionAnnotationPayload",encode(e,t=new Fk){void 0!==e.id&&pU.encode(e.id,t.uint32(10).fork()).join(),t.uint32(18).fork();for(const n of e.categories)t.int32(n);t.join(),""!==e.description&&t.uint32(26).string(e.description),0!==e.userChoice&&t.uint32(32).int32(e.userChoice);for(const n of e.originalSpans)aD.encode(n,t.uint32(42).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionAnnotationPayload",id:void 0,categories:[],description:"",userChoice:0,originalSpans:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.id=pU.decode(n,n.uint32());continue;case 2:if(16===e){o.categories.push(n.int32());continue}if(18===e){const e=n.uint32()+n.pos;for(;n.pos<e;)o.categories.push(n.int32());continue}break;case 3:if(26!==e)break;o.description=n.string();continue;case 4:if(32!==e)break;o.userChoice=n.int32();continue;case 5:if(42!==e)break;o.originalSpans.push(aD.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:gU.$type,id:TU(e.id)?pU.fromJSON(e.id):void 0,categories:globalThis.Array.isArray(null==e?void 0:e.categories)?e.categories.map((e=>function(e){switch(e){case 0:case"INLINE_SUGGESTION_CATEGORY_UNSPECIFIED":return ID.UNSPECIFIED;case 1:case"INLINE_SUGGESTION_CATEGORY_SPELLING":return ID.SPELLING;case 2:case"INLINE_SUGGESTION_CATEGORY_GRAMMAR":return ID.GRAMMAR;case 3:case"INLINE_SUGGESTION_CATEGORY_PUNCTUATION":return ID.PUNCTUATION;case 4:case"INLINE_SUGGESTION_CATEGORY_READABILITY":return ID.READABILITY;case 5:case"INLINE_SUGGESTION_CATEGORY_FORMATTING":return ID.FORMATTING;case 6:case"INLINE_SUGGESTION_CATEGORY_OTHER":return ID.OTHER;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum InlineSuggestionCategory")}}(e))):[],description:TU(e.description)?globalThis.String(e.description):"",userChoice:TU(e.userChoice)?bD(e.userChoice):0,originalSpans:globalThis.Array.isArray(null==e?void 0:e.originalSpans)?e.originalSpans.map((e=>aD.fromJSON(e))):[]}),toJSON(e){var t,n;const r={};return void 0!==e.id&&(r.id=pU.toJSON(e.id)),(null===(t=e.categories)||void 0===t?void 0:t.length)&&(r.categories=e.categories.map((e=>function(e){switch(e){case ID.UNSPECIFIED:return"INLINE_SUGGESTION_CATEGORY_UNSPECIFIED";case ID.SPELLING:return"INLINE_SUGGESTION_CATEGORY_SPELLING";case ID.GRAMMAR:return"INLINE_SUGGESTION_CATEGORY_GRAMMAR";case ID.PUNCTUATION:return"INLINE_SUGGESTION_CATEGORY_PUNCTUATION";case ID.READABILITY:return"INLINE_SUGGESTION_CATEGORY_READABILITY";case ID.FORMATTING:return"INLINE_SUGGESTION_CATEGORY_FORMATTING";case ID.OTHER:return"INLINE_SUGGESTION_CATEGORY_OTHER";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum InlineSuggestionCategory")}}(e)))),""!==e.description&&(r.description=e.description),0!==e.userChoice&&(r.userChoice=wD(e.userChoice)),(null===(n=e.originalSpans)||void 0===n?void 0:n.length)&&(r.originalSpans=e.originalSpans.map((e=>aD.toJSON(e)))),r},create:e=>gU.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r,o;const i={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionAnnotationPayload",id:void 0,categories:[],description:"",userChoice:0,originalSpans:[]};return i.id=void 0!==e.id&&null!==e.id?pU.fromPartial(e.id):void 0,i.categories=(null===(t=e.categories)||void 0===t?void 0:t.map((e=>e)))||[],i.description=null!==(n=e.description)&&void 0!==n?n:"",i.userChoice=null!==(r=e.userChoice)&&void 0!==r?r:0,i.originalSpans=(null===(o=e.originalSpans)||void 0===o?void 0:o.map((e=>aD.fromPartial(e))))||[],i}};const hU={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionSpanAnnotationPayload",encode:(e,t=new Fk)=>(void 0!==e.id&&pU.encode(e.id,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionSpanAnnotationPayload",id:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.id=pU.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:hU.$type,id:TU(e.id)?pU.fromJSON(e.id):void 0}),toJSON(e){const t={};return void 0!==e.id&&(t.id=pU.toJSON(e.id)),t},create:e=>hU.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionSpanAnnotationPayload",id:void 0};return t.id=void 0!==e.id&&null!==e.id?pU.fromPartial(e.id):void 0,t}};const fU={$type:"deepl.pb.interactive_text_api.write.ActOnInlineSuggestionAnnotationPayload",encode:(e,t=new Fk)=>(void 0!==e.inlineSuggestionId&&pU.encode(e.inlineSuggestionId,t.uint32(10).fork()).join(),0!==e.userChoice&&t.uint32(16).int32(e.userChoice),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ActOnInlineSuggestionAnnotationPayload",inlineSuggestionId:void 0,userChoice:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.inlineSuggestionId=pU.decode(n,n.uint32());continue;case 2:if(16!==e)break;o.userChoice=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:fU.$type,inlineSuggestionId:TU(e.inlineSuggestionId)?pU.fromJSON(e.inlineSuggestionId):void 0,userChoice:TU(e.userChoice)?bD(e.userChoice):0}),toJSON(e){const t={};return void 0!==e.inlineSuggestionId&&(t.inlineSuggestionId=pU.toJSON(e.inlineSuggestionId)),0!==e.userChoice&&(t.userChoice=wD(e.userChoice)),t},create:e=>fU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ActOnInlineSuggestionAnnotationPayload",inlineSuggestionId:void 0,userChoice:0};return n.inlineSuggestionId=void 0!==e.inlineSuggestionId&&null!==e.inlineSuggestionId?pU.fromPartial(e.inlineSuggestionId):void 0,n.userChoice=null!==(t=e.userChoice)&&void 0!==t?t:0,n}};const _U={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionsTextUnitStateAnnotationPayload",encode(e,t=new Fk){void 0!==e.textUnitId&&SD.encode(e.textUnitId,t.uint32(10).fork()).join();for(const n of e.inlineSuggestionIds)pU.encode(n,t.uint32(18).fork()).join();return""!==e.originalText&&t.uint32(26).string(e.originalText),""!==e.improvedText&&t.uint32(34).string(e.improvedText),t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionsTextUnitStateAnnotationPayload",textUnitId:void 0,inlineSuggestionIds:[],originalText:"",improvedText:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.textUnitId=SD.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.inlineSuggestionIds.push(pU.decode(n,n.uint32()));continue;case 3:if(26!==e)break;o.originalText=n.string();continue;case 4:if(34!==e)break;o.improvedText=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:_U.$type,textUnitId:TU(e.textUnitId)?SD.fromJSON(e.textUnitId):void 0,inlineSuggestionIds:globalThis.Array.isArray(null==e?void 0:e.inlineSuggestionIds)?e.inlineSuggestionIds.map((e=>pU.fromJSON(e))):[],originalText:TU(e.originalText)?globalThis.String(e.originalText):"",improvedText:TU(e.improvedText)?globalThis.String(e.improvedText):""}),toJSON(e){var t;const n={};return void 0!==e.textUnitId&&(n.textUnitId=SD.toJSON(e.textUnitId)),(null===(t=e.inlineSuggestionIds)||void 0===t?void 0:t.length)&&(n.inlineSuggestionIds=e.inlineSuggestionIds.map((e=>pU.toJSON(e)))),""!==e.originalText&&(n.originalText=e.originalText),""!==e.improvedText&&(n.improvedText=e.improvedText),n},create:e=>_U.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r;const o={$type:"deepl.pb.interactive_text_api.write.InlineSuggestionsTextUnitStateAnnotationPayload",textUnitId:void 0,inlineSuggestionIds:[],originalText:"",improvedText:""};return o.textUnitId=void 0!==e.textUnitId&&null!==e.textUnitId?SD.fromPartial(e.textUnitId):void 0,o.inlineSuggestionIds=(null===(t=e.inlineSuggestionIds)||void 0===t?void 0:t.map((e=>pU.fromPartial(e))))||[],o.originalText=null!==(n=e.originalText)&&void 0!==n?n:"",o.improvedText=null!==(r=e.improvedText)&&void 0!==r?r:"",o}};const mU={$type:"deepl.pb.interactive_text_api.write.RequestInlineSuggestionImprovedTextAnnotationPayload",encode:(e,t=new Fk)=>(void 0!==e.inlineSuggestionId&&pU.encode(e.inlineSuggestionId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.RequestInlineSuggestionImprovedTextAnnotationPayload",inlineSuggestionId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.inlineSuggestionId=pU.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:mU.$type,inlineSuggestionId:TU(e.inlineSuggestionId)?pU.fromJSON(e.inlineSuggestionId):void 0}),toJSON(e){const t={};return void 0!==e.inlineSuggestionId&&(t.inlineSuggestionId=pU.toJSON(e.inlineSuggestionId)),t},create:e=>mU.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.RequestInlineSuggestionImprovedTextAnnotationPayload",inlineSuggestionId:void 0};return t.inlineSuggestionId=void 0!==e.inlineSuggestionId&&null!==e.inlineSuggestionId?pU.fromPartial(e.inlineSuggestionId):void 0,t}};const vU={$type:"deepl.pb.interactive_text_api.write.ProvidedInlineSuggestionImprovedTextAnnotationPayload",encode:(e,t=new Fk)=>(void 0!==e.inlineSuggestionId&&pU.encode(e.inlineSuggestionId,t.uint32(10).fork()).join(),""!==e.improvedText&&t.uint32(18).string(e.improvedText),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ProvidedInlineSuggestionImprovedTextAnnotationPayload",inlineSuggestionId:void 0,improvedText:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.inlineSuggestionId=pU.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.improvedText=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:vU.$type,inlineSuggestionId:TU(e.inlineSuggestionId)?pU.fromJSON(e.inlineSuggestionId):void 0,improvedText:TU(e.improvedText)?globalThis.String(e.improvedText):""}),toJSON(e){const t={};return void 0!==e.inlineSuggestionId&&(t.inlineSuggestionId=pU.toJSON(e.inlineSuggestionId)),""!==e.improvedText&&(t.improvedText=e.improvedText),t},create:e=>vU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ProvidedInlineSuggestionImprovedTextAnnotationPayload",inlineSuggestionId:void 0,improvedText:""};return n.inlineSuggestionId=void 0!==e.inlineSuggestionId&&null!==e.inlineSuggestionId?pU.fromPartial(e.inlineSuggestionId):void 0,n.improvedText=null!==(t=e.improvedText)&&void 0!==t?t:"",n}};function TU(e){return null!=e}const yU={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectAutomaticTextUnitAlternativeAnnotationPayload",encode:(e,t=new Fk)=>(""!==e.selection&&t.uint32(10).string(e.selection),void 0!==e.rephraseVariant&&ZD.encode(e.rephraseVariant,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectAutomaticTextUnitAlternativeAnnotationPayload",selection:"",rephraseVariant:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.selection=n.string();continue;case 2:if(18!==e)break;o.rephraseVariant=ZD.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:yU.$type,selection:EU(e.selection)?globalThis.String(e.selection):"",rephraseVariant:EU(e.rephraseVariant)?ZD.fromJSON(e.rephraseVariant):void 0}),toJSON(e){const t={};return""!==e.selection&&(t.selection=e.selection),void 0!==e.rephraseVariant&&(t.rephraseVariant=ZD.toJSON(e.rephraseVariant)),t},create:e=>yU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectAutomaticTextUnitAlternativeAnnotationPayload",selection:"",rephraseVariant:void 0};return n.selection=null!==(t=e.selection)&&void 0!==t?t:"",n.rephraseVariant=void 0!==e.rephraseVariant&&null!==e.rephraseVariant?ZD.fromPartial(e.rephraseVariant):void 0,n}};function EU(e){return null!=e}const SU={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectTextUnitAlternativeAnnotationPayload",encode:(e,t=new Fk)=>(void 0!==e.flowId&&rD.encode(e.flowId,t.uint32(10).fork()).join(),""!==e.selection&&t.uint32(18).string(e.selection),void 0!==e.rephraseVariant&&ZD.encode(e.rephraseVariant,t.uint32(26).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectTextUnitAlternativeAnnotationPayload",flowId:void 0,selection:"",rephraseVariant:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=rD.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.selection=n.string();continue;case 3:if(26!==e)break;o.rephraseVariant=ZD.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:SU.$type,flowId:IU(e.flowId)?rD.fromJSON(e.flowId):void 0,selection:IU(e.selection)?globalThis.String(e.selection):"",rephraseVariant:IU(e.rephraseVariant)?ZD.fromJSON(e.rephraseVariant):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=rD.toJSON(e.flowId)),""!==e.selection&&(t.selection=e.selection),void 0!==e.rephraseVariant&&(t.rephraseVariant=ZD.toJSON(e.rephraseVariant)),t},create:e=>SU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectTextUnitAlternativeAnnotationPayload",flowId:void 0,selection:"",rephraseVariant:void 0};return n.flowId=void 0!==e.flowId&&null!==e.flowId?rD.fromPartial(e.flowId):void 0,n.selection=null!==(t=e.selection)&&void 0!==t?t:"",n.rephraseVariant=void 0!==e.rephraseVariant&&null!==e.rephraseVariant?ZD.fromPartial(e.rephraseVariant):void 0,n}};function IU(e){return null!=e}const AU={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectWordAlternativeAnnotationPayload",encode:(e,t=new Fk)=>(void 0!==e.flowId&&Qk.encode(e.flowId,t.uint32(10).fork()).join(),""!==e.selection&&t.uint32(18).string(e.selection),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectWordAlternativeAnnotationPayload",flowId:void 0,selection:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=Qk.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.selection=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:AU.$type,flowId:bU(e.flowId)?Qk.fromJSON(e.flowId):void 0,selection:bU(e.selection)?globalThis.String(e.selection):""}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=Qk.toJSON(e.flowId)),""!==e.selection&&(t.selection=e.selection),t},create:e=>AU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectWordAlternativeAnnotationPayload",flowId:void 0,selection:""};return n.flowId=void 0!==e.flowId&&null!==e.flowId?Qk.fromPartial(e.flowId):void 0,n.selection=null!==(t=e.selection)&&void 0!==t?t:"",n}};function bU(e){return null!=e}const wU={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingId",encode:(e,t=new Fk)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:wU.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>wU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const OU={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingAnnotationPayload",encode(e,t=new Fk){void 0!==e.textFormattingId&&wU.encode(e.textFormattingId,t.uint32(10).fork()).join(),""!==e.name&&t.uint32(18).string(e.name);for(const n of e.children)wU.encode(n,t.uint32(26).fork()).join();return Object.entries(e.attributes).forEach((([e,n])=>{NU.encode({$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingAnnotationPayload.AttributesEntry",key:e,value:n},t.uint32(34).fork()).join()})),t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingAnnotationPayload",textFormattingId:void 0,name:"",children:[],attributes:{}};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.textFormattingId=wU.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.name=n.string();continue;case 3:if(26!==e)break;o.children.push(wU.decode(n,n.uint32()));continue;case 4:if(34!==e)break;const t=NU.decode(n,n.uint32());void 0!==t.value&&(o.attributes[t.key]=t.value);continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:OU.$type,textFormattingId:RU(e.textFormattingId)?wU.fromJSON(e.textFormattingId):void 0,name:RU(e.name)?globalThis.String(e.name):"",children:globalThis.Array.isArray(null==e?void 0:e.children)?e.children.map((e=>wU.fromJSON(e))):[],attributes:(t=e.attributes,"object"==typeof t&&null!==t?Object.entries(e.attributes).reduce(((e,[t,n])=>(e[t]=String(n),e)),{}):{})};var t},toJSON(e){var t;const n={};if(void 0!==e.textFormattingId&&(n.textFormattingId=wU.toJSON(e.textFormattingId)),""!==e.name&&(n.name=e.name),(null===(t=e.children)||void 0===t?void 0:t.length)&&(n.children=e.children.map((e=>wU.toJSON(e)))),e.attributes){const t=Object.entries(e.attributes);t.length>0&&(n.attributes={},t.forEach((([e,t])=>{n.attributes[e]=t})))}return n},create:e=>OU.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r;const o={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingAnnotationPayload",textFormattingId:void 0,name:"",children:[],attributes:{}};return o.textFormattingId=void 0!==e.textFormattingId&&null!==e.textFormattingId?wU.fromPartial(e.textFormattingId):void 0,o.name=null!==(t=e.name)&&void 0!==t?t:"",o.children=(null===(n=e.children)||void 0===n?void 0:n.map((e=>wU.fromPartial(e))))||[],o.attributes=Object.entries(null!==(r=e.attributes)&&void 0!==r?r:{}).reduce(((e,[t,n])=>(void 0!==n&&(e[t]=globalThis.String(n)),e)),{}),o}};const NU={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingAnnotationPayload.AttributesEntry",encode:(e,t=new Fk)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingAnnotationPayload.AttributesEntry",key:"",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.key=n.string();continue;case 2:if(18!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:NU.$type,key:RU(e.key)?globalThis.String(e.key):"",value:RU(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>NU.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingAnnotationPayload.AttributesEntry",key:"",value:""};return r.key=null!==(t=e.key)&&void 0!==t?t:"",r.value=null!==(n=e.value)&&void 0!==n?n:"",r}};function RU(e){return null!=e}const LU={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitAnnotationPayload",encode:(e,t=new Fk)=>(void 0!==e.textUnitId&&SD.encode(e.textUnitId,t.uint32(10).fork()).join(),!1!==e.isUserEdited&&t.uint32(16).bool(e.isUserEdited),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitAnnotationPayload",textUnitId:void 0,isUserEdited:!1};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.textUnitId=SD.decode(n,n.uint32());continue;case 2:if(16!==e)break;o.isUserEdited=n.bool();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:LU.$type,textUnitId:PU(e.textUnitId)?SD.fromJSON(e.textUnitId):void 0,isUserEdited:!!PU(e.isUserEdited)&&globalThis.Boolean(e.isUserEdited)}),toJSON(e){const t={};return void 0!==e.textUnitId&&(t.textUnitId=SD.toJSON(e.textUnitId)),!1!==e.isUserEdited&&(t.isUserEdited=e.isUserEdited),t},create:e=>LU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitAnnotationPayload",textUnitId:void 0,isUserEdited:!1};return n.textUnitId=void 0!==e.textUnitId&&null!==e.textUnitId?SD.fromPartial(e.textUnitId):void 0,n.isUserEdited=null!==(t=e.isUserEdited)&&void 0!==t&&t,n}};function PU(e){return null!=e}const CU={$type:"deepl.pb.interactive_text_api.common.alternatives.AutocompletionFlowId",encode:(e,t=new Fk)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.AutocompletionFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:CU.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>CU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.AutocompletionFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const xU={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemoryId",encode:(e,t=new Fk)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemoryId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:xU.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>xU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemoryId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const kU={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemory",encode:(e,t=new Fk)=>(void 0!==e.id&&xU.encode(e.id,t.uint32(10).fork()).join(),""!==e.name&&t.uint32(18).string(e.name),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemory",id:void 0,name:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.id=xU.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.name=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:kU.$type,id:DU(e.id)?xU.fromJSON(e.id):void 0,name:DU(e.name)?globalThis.String(e.name):""}),toJSON(e){const t={};return void 0!==e.id&&(t.id=xU.toJSON(e.id)),""!==e.name&&(t.name=e.name),t},create:e=>kU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.translation_memories.TranslationMemory",id:void 0,name:""};return n.id=void 0!==e.id&&null!==e.id?xU.fromPartial(e.id):void 0,n.name=null!==(t=e.name)&&void 0!==t?t:"",n}};function DU(e){return null!=e}var UU,MU,GU;function VU(e){switch(e){case 0:case"TEXT_DIRECTION_UNSPECIFIED":return UU.UNSPECIFIED;case 1:case"TEXT_DIRECTION_LEFT_TO_RIGHT":return UU.LEFT_TO_RIGHT;case 2:case"TEXT_DIRECTION_RIGHT_TO_LEFT":return UU.RIGHT_TO_LEFT;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum TextDirection")}}function $U(e){switch(e){case 0:case"CLARIFY_STATUS_UNSPECIFIED":return MU.UNSPECIFIED;case 1:case"CLARIFY_STATUS_SUCCESS":return MU.SUCCESS;case 2:case"CLARIFY_STATUS_ERROR":return MU.ERROR;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum ClarifyStatus")}}function FU(e){switch(e){case 0:case"USAGE_TYPE_UNSPECIFIED":return GU.UNSPECIFIED;case 1:case"USAGE_TYPE_TRANSLATE":return GU.TRANSLATE;case 2:case"USAGE_TYPE_FULL_PAGE_TRANSLATION":return GU.FULL_PAGE_TRANSLATION;case 4:case"USAGE_TYPE_OCR":return GU.OCR;case 5:case"USAGE_TYPE_VOICE_FOR_CONVERSATIONS":return GU.VOICE_FOR_CONVERSATIONS;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum UsageType")}}!function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.LEFT_TO_RIGHT=1]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=2]="RIGHT_TO_LEFT"}(UU||(UU={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SUCCESS=1]="SUCCESS",e[e.ERROR=2]="ERROR"}(MU||(MU={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.TRANSLATE=1]="TRANSLATE",e[e.FULL_PAGE_TRANSLATION=2]="FULL_PAGE_TRANSLATION",e[e.OCR=4]="OCR",e[e.VOICE_FOR_CONVERSATIONS=5]="VOICE_FOR_CONVERSATIONS"}(GU||(GU={}));const jU={$type:"deepl.pb.interactive_text_api.translator.RequestAutocompletionAnnotationPayload",encode:(e,t=new Fk)=>(void 0!==e.flowId&&CU.encode(e.flowId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.RequestAutocompletionAnnotationPayload",flowId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=CU.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:jU.$type,flowId:BM(e.flowId)?CU.fromJSON(e.flowId):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=CU.toJSON(e.flowId)),t},create:e=>jU.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.RequestAutocompletionAnnotationPayload",flowId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?CU.fromPartial(e.flowId):void 0,t}};const WU={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutocompletionAnnotationPayload",encode(e,t=new Fk){void 0!==e.flowId&&CU.encode(e.flowId,t.uint32(10).fork()).join();for(const n of e.autocompletions)DM.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutocompletionAnnotationPayload",flowId:void 0,autocompletions:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=CU.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.autocompletions.push(DM.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:WU.$type,flowId:BM(e.flowId)?CU.fromJSON(e.flowId):void 0,autocompletions:globalThis.Array.isArray(null==e?void 0:e.autocompletions)?e.autocompletions.map((e=>DM.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.flowId&&(n.flowId=CU.toJSON(e.flowId)),(null===(t=e.autocompletions)||void 0===t?void 0:t.length)&&(n.autocompletions=e.autocompletions.map((e=>DM.toJSON(e)))),n},create:e=>WU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutocompletionAnnotationPayload",flowId:void 0,autocompletions:[]};return n.flowId=void 0!==e.flowId&&null!==e.flowId?CU.fromPartial(e.flowId):void 0,n.autocompletions=(null===(t=e.autocompletions)||void 0===t?void 0:t.map((e=>DM.fromPartial(e))))||[],n}};const qU={$type:"deepl.pb.interactive_text_api.translator.SelectAutocompletionAnnotationPayload",encode:(e,t=new Fk)=>(void 0!==e.flowId&&CU.encode(e.flowId,t.uint32(10).fork()).join(),""!==e.selection&&t.uint32(18).string(e.selection),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SelectAutocompletionAnnotationPayload",flowId:void 0,selection:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=CU.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.selection=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:qU.$type,flowId:BM(e.flowId)?CU.fromJSON(e.flowId):void 0,selection:BM(e.selection)?globalThis.String(e.selection):""}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=CU.toJSON(e.flowId)),""!==e.selection&&(t.selection=e.selection),t},create:e=>qU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SelectAutocompletionAnnotationPayload",flowId:void 0,selection:""};return n.flowId=void 0!==e.flowId&&null!==e.flowId?CU.fromPartial(e.flowId):void 0,n.selection=null!==(t=e.selection)&&void 0!==t?t:"",n}};const BU={$type:"deepl.pb.interactive_text_api.translator.GlossaryReplacementAnnotationPayload",encode:(e,t=new Fk)=>(void 0!==e.replacement&&LM.encode(e.replacement,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossaryReplacementAnnotationPayload",replacement:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.replacement=LM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:BU.$type,replacement:BM(e.replacement)?LM.fromJSON(e.replacement):void 0}),toJSON(e){const t={};return void 0!==e.replacement&&(t.replacement=LM.toJSON(e.replacement)),t},create:e=>BU.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.GlossaryReplacementAnnotationPayload",replacement:void 0};return t.replacement=void 0!==e.replacement&&null!==e.replacement?LM.fromPartial(e.replacement):void 0,t}};const HU={$type:"deepl.pb.interactive_text_api.translator.ProvidedTextUnitAlternativesAnnotationPayload",encode(e,t=new Fk){void 0!==e.flowId&&rD.encode(e.flowId,t.uint32(10).fork()).join();for(const n of e.alternatives)DM.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ProvidedTextUnitAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=rD.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.alternatives.push(DM.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:HU.$type,flowId:BM(e.flowId)?rD.fromJSON(e.flowId):void 0,alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>DM.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.flowId&&(n.flowId=rD.toJSON(e.flowId)),(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>DM.toJSON(e)))),n},create:e=>HU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ProvidedTextUnitAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};return n.flowId=void 0!==e.flowId&&null!==e.flowId?rD.fromPartial(e.flowId):void 0,n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>DM.fromPartial(e))))||[],n}};const JU={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",encode(e,t=new Fk){for(const n of e.alternatives)DM.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.alternatives.push(DM.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:JU.$type,alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>DM.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>DM.toJSON(e)))),n},create:e=>JU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",alternatives:[]};return n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>DM.fromPartial(e))))||[],n}};const zU={$type:"deepl.pb.interactive_text_api.translator.RequestClarifyAnnotationPayload",encode:(e,t=new Fk)=>(void 0!==e.flowId&&FM.encode(e.flowId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.RequestClarifyAnnotationPayload",flowId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=FM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:zU.$type,flowId:BM(e.flowId)?FM.fromJSON(e.flowId):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=FM.toJSON(e.flowId)),t},create:e=>zU.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.RequestClarifyAnnotationPayload",flowId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?FM.fromPartial(e.flowId):void 0,t}};const YU={$type:"deepl.pb.interactive_text_api.translator.ClarifyStatusAnnotationPayload",encode:(e,t=new Fk)=>(void 0!==e.flowId&&FM.encode(e.flowId,t.uint32(10).fork()).join(),void 0!==e.referenceId&&eD.encode(e.referenceId,t.uint32(18).fork()).join(),0!==e.status&&t.uint32(24).int32(e.status),void 0!==e.errorInfo&&WM.encode(e.errorInfo,t.uint32(34).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyStatusAnnotationPayload",flowId:void 0,referenceId:void 0,status:0,errorInfo:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=FM.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.referenceId=eD.decode(n,n.uint32());continue;case 3:if(24!==e)break;o.status=n.int32();continue;case 4:if(34!==e)break;o.errorInfo=WM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:YU.$type,flowId:BM(e.flowId)?FM.fromJSON(e.flowId):void 0,referenceId:BM(e.referenceId)?eD.fromJSON(e.referenceId):void 0,status:BM(e.status)?$U(e.status):0,errorInfo:BM(e.errorInfo)?WM.fromJSON(e.errorInfo):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=FM.toJSON(e.flowId)),void 0!==e.referenceId&&(t.referenceId=eD.toJSON(e.referenceId)),0!==e.status&&(t.status=function(e){switch(e){case MU.UNSPECIFIED:return"CLARIFY_STATUS_UNSPECIFIED";case MU.SUCCESS:return"CLARIFY_STATUS_SUCCESS";case MU.ERROR:return"CLARIFY_STATUS_ERROR";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum ClarifyStatus")}}(e.status)),void 0!==e.errorInfo&&(t.errorInfo=WM.toJSON(e.errorInfo)),t},create:e=>YU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ClarifyStatusAnnotationPayload",flowId:void 0,referenceId:void 0,status:0,errorInfo:void 0};return n.flowId=void 0!==e.flowId&&null!==e.flowId?FM.fromPartial(e.flowId):void 0,n.referenceId=void 0!==e.referenceId&&null!==e.referenceId?eD.fromPartial(e.referenceId):void 0,n.status=null!==(t=e.status)&&void 0!==t?t:0,n.errorInfo=void 0!==e.errorInfo&&null!==e.errorInfo?WM.fromPartial(e.errorInfo):void 0,n}};const XU={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyHighlightAnnotationPayload",encode:(e,t=new Fk)=>(void 0!==e.flowId&&FM.encode(e.flowId,t.uint32(10).fork()).join(),void 0!==e.questionId&&jM.encode(e.questionId,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyHighlightAnnotationPayload",flowId:void 0,questionId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=FM.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.questionId=jM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:XU.$type,flowId:BM(e.flowId)?FM.fromJSON(e.flowId):void 0,questionId:BM(e.questionId)?jM.fromJSON(e.questionId):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=FM.toJSON(e.flowId)),void 0!==e.questionId&&(t.questionId=jM.toJSON(e.questionId)),t},create:e=>XU.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyHighlightAnnotationPayload",flowId:void 0,questionId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?FM.fromPartial(e.flowId):void 0,t.questionId=void 0!==e.questionId&&null!==e.questionId?jM.fromPartial(e.questionId):void 0,t}};const KU={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyQuestionAnnotationPayload",encode:(e,t=new Fk)=>(void 0!==e.flowId&&FM.encode(e.flowId,t.uint32(10).fork()).join(),void 0!==e.questionWithAnswers&&VM.encode(e.questionWithAnswers,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyQuestionAnnotationPayload",flowId:void 0,questionWithAnswers:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=FM.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.questionWithAnswers=VM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:KU.$type,flowId:BM(e.flowId)?FM.fromJSON(e.flowId):void 0,questionWithAnswers:BM(e.questionWithAnswers)?VM.fromJSON(e.questionWithAnswers):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=FM.toJSON(e.flowId)),void 0!==e.questionWithAnswers&&(t.questionWithAnswers=VM.toJSON(e.questionWithAnswers)),t},create:e=>KU.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyQuestionAnnotationPayload",flowId:void 0,questionWithAnswers:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?FM.fromPartial(e.flowId):void 0,t.questionWithAnswers=void 0!==e.questionWithAnswers&&null!==e.questionWithAnswers?VM.fromPartial(e.questionWithAnswers):void 0,t}};const QU={$type:"deepl.pb.interactive_text_api.translator.SelectClarifyAnswerAnnotationPayload",encode:(e,t=new Fk)=>(void 0!==e.flowId&&FM.encode(e.flowId,t.uint32(10).fork()).join(),void 0!==e.questionId&&jM.encode(e.questionId,t.uint32(18).fork()).join(),void 0!==e.answer&&$M.encode(e.answer,t.uint32(26).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SelectClarifyAnswerAnnotationPayload",flowId:void 0,questionId:void 0,answer:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=FM.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.questionId=jM.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.answer=$M.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:QU.$type,flowId:BM(e.flowId)?FM.fromJSON(e.flowId):void 0,questionId:BM(e.questionId)?jM.fromJSON(e.questionId):void 0,answer:BM(e.answer)?$M.fromJSON(e.answer):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=FM.toJSON(e.flowId)),void 0!==e.questionId&&(t.questionId=jM.toJSON(e.questionId)),void 0!==e.answer&&(t.answer=$M.toJSON(e.answer)),t},create:e=>QU.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.SelectClarifyAnswerAnnotationPayload",flowId:void 0,questionId:void 0,answer:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?FM.fromPartial(e.flowId):void 0,t.questionId=void 0!==e.questionId&&null!==e.questionId?jM.fromPartial(e.questionId):void 0,t.answer=void 0!==e.answer&&null!==e.answer?$M.fromPartial(e.answer):void 0,t}};const ZU={$type:"deepl.pb.interactive_text_api.translator.SourceLanguagesPropertyValue",encode(e,t=new Fk){for(const n of e.sourceLanguages)xM.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SourceLanguagesPropertyValue",sourceLanguages:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sourceLanguages.push(xM.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:ZU.$type,sourceLanguages:globalThis.Array.isArray(null==e?void 0:e.sourceLanguages)?e.sourceLanguages.map((e=>xM.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.sourceLanguages)||void 0===t?void 0:t.length)&&(n.sourceLanguages=e.sourceLanguages.map((e=>xM.toJSON(e)))),n},create:e=>ZU.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SourceLanguagesPropertyValue",sourceLanguages:[]};return n.sourceLanguages=(null===(t=e.sourceLanguages)||void 0===t?void 0:t.map((e=>xM.fromPartial(e))))||[],n}};const eM={$type:"deepl.pb.interactive_text_api.translator.TargetLanguagesPropertyValue",encode(e,t=new Fk){for(const n of e.targetLanguages)kM.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TargetLanguagesPropertyValue",targetLanguages:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.targetLanguages.push(kM.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:eM.$type,targetLanguages:globalThis.Array.isArray(null==e?void 0:e.targetLanguages)?e.targetLanguages.map((e=>kM.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.targetLanguages)||void 0===t?void 0:t.length)&&(n.targetLanguages=e.targetLanguages.map((e=>kM.toJSON(e)))),n},create:e=>eM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.TargetLanguagesPropertyValue",targetLanguages:[]};return n.targetLanguages=(null===(t=e.targetLanguages)||void 0===t?void 0:t.map((e=>kM.fromPartial(e))))||[],n}};const tM={$type:"deepl.pb.interactive_text_api.translator.RequestedSourceLanguagePropertyValue",encode:(e,t=new Fk)=>(void 0!==e.sourceLanguage&&xM.encode(e.sourceLanguage,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.RequestedSourceLanguagePropertyValue",sourceLanguage:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sourceLanguage=xM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:tM.$type,sourceLanguage:BM(e.sourceLanguage)?xM.fromJSON(e.sourceLanguage):void 0}),toJSON(e){const t={};return void 0!==e.sourceLanguage&&(t.sourceLanguage=xM.toJSON(e.sourceLanguage)),t},create:e=>tM.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.RequestedSourceLanguagePropertyValue",sourceLanguage:void 0};return t.sourceLanguage=void 0!==e.sourceLanguage&&null!==e.sourceLanguage?xM.fromPartial(e.sourceLanguage):void 0,t}};const nM={$type:"deepl.pb.interactive_text_api.translator.CalculatedSourceLanguagePropertyValue",encode:(e,t=new Fk)=>(void 0!==e.sourceLanguage&&xM.encode(e.sourceLanguage,t.uint32(10).fork()).join(),0!==e.origin&&t.uint32(16).int32(e.origin),!1!==e.isLanguageDetectionConfident&&t.uint32(24).bool(e.isLanguageDetectionConfident),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.CalculatedSourceLanguagePropertyValue",sourceLanguage:void 0,origin:0,isLanguageDetectionConfident:!1};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sourceLanguage=xM.decode(n,n.uint32());continue;case 2:if(16!==e)break;o.origin=n.int32();continue;case 3:if(24!==e)break;o.isLanguageDetectionConfident=n.bool();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:nM.$type,sourceLanguage:BM(e.sourceLanguage)?xM.fromJSON(e.sourceLanguage):void 0,origin:BM(e.origin)?hD(e.origin):0,isLanguageDetectionConfident:!!BM(e.isLanguageDetectionConfident)&&globalThis.Boolean(e.isLanguageDetectionConfident)}),toJSON(e){const t={};return void 0!==e.sourceLanguage&&(t.sourceLanguage=xM.toJSON(e.sourceLanguage)),0!==e.origin&&(t.origin=fD(e.origin)),!1!==e.isLanguageDetectionConfident&&(t.isLanguageDetectionConfident=e.isLanguageDetectionConfident),t},create:e=>nM.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.translator.CalculatedSourceLanguagePropertyValue",sourceLanguage:void 0,origin:0,isLanguageDetectionConfident:!1};return r.sourceLanguage=void 0!==e.sourceLanguage&&null!==e.sourceLanguage?xM.fromPartial(e.sourceLanguage):void 0,r.origin=null!==(t=e.origin)&&void 0!==t?t:0,r.isLanguageDetectionConfident=null!==(n=e.isLanguageDetectionConfident)&&void 0!==n&&n,r}};const rM={$type:"deepl.pb.interactive_text_api.translator.RequestedTargetLanguagePropertyValue",encode:(e,t=new Fk)=>(void 0!==e.targetLanguage&&kM.encode(e.targetLanguage,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.RequestedTargetLanguagePropertyValue",targetLanguage:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.targetLanguage=kM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:rM.$type,targetLanguage:BM(e.targetLanguage)?kM.fromJSON(e.targetLanguage):void 0}),toJSON(e){const t={};return void 0!==e.targetLanguage&&(t.targetLanguage=kM.toJSON(e.targetLanguage)),t},create:e=>rM.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.RequestedTargetLanguagePropertyValue",targetLanguage:void 0};return t.targetLanguage=void 0!==e.targetLanguage&&null!==e.targetLanguage?kM.fromPartial(e.targetLanguage):void 0,t}};const oM={$type:"deepl.pb.interactive_text_api.translator.CalculatedTargetLanguagePropertyValue",encode:(e,t=new Fk)=>(void 0!==e.targetLanguage&&kM.encode(e.targetLanguage,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.CalculatedTargetLanguagePropertyValue",targetLanguage:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.targetLanguage=kM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:oM.$type,targetLanguage:BM(e.targetLanguage)?kM.fromJSON(e.targetLanguage):void 0}),toJSON(e){const t={};return void 0!==e.targetLanguage&&(t.targetLanguage=kM.toJSON(e.targetLanguage)),t},create:e=>oM.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.CalculatedTargetLanguagePropertyValue",targetLanguage:void 0};return t.targetLanguage=void 0!==e.targetLanguage&&null!==e.targetLanguage?kM.fromPartial(e.targetLanguage):void 0,t}};const iM={$type:"deepl.pb.interactive_text_api.translator.GlossaryIdPropertyValue",encode:(e,t=new Fk)=>(void 0!==e.glossaryId&&dD.encode(e.glossaryId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossaryIdPropertyValue",glossaryId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.glossaryId=dD.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:iM.$type,glossaryId:BM(e.glossaryId)?dD.fromJSON(e.glossaryId):void 0}),toJSON(e){const t={};return void 0!==e.glossaryId&&(t.glossaryId=dD.toJSON(e.glossaryId)),t},create:e=>iM.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.GlossaryIdPropertyValue",glossaryId:void 0};return t.glossaryId=void 0!==e.glossaryId&&null!==e.glossaryId?dD.fromPartial(e.glossaryId):void 0,t}};const aM={$type:"deepl.pb.interactive_text_api.translator.StyleGuideIdPropertyValue",encode:(e,t=new Fk)=>(void 0!==e.styleGuideId&&ED.encode(e.styleGuideId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.StyleGuideIdPropertyValue",styleGuideId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.styleGuideId=ED.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:aM.$type,styleGuideId:BM(e.styleGuideId)?ED.fromJSON(e.styleGuideId):void 0}),toJSON(e){const t={};return void 0!==e.styleGuideId&&(t.styleGuideId=ED.toJSON(e.styleGuideId)),t},create:e=>aM.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.StyleGuideIdPropertyValue",styleGuideId:void 0};return t.styleGuideId=void 0!==e.styleGuideId&&null!==e.styleGuideId?ED.fromPartial(e.styleGuideId):void 0,t}};const sM={$type:"deepl.pb.interactive_text_api.translator.InterfaceLanguagePropertyValue",encode:(e,t=new Fk)=>(""!==e.interfaceLanguage&&t.uint32(10).string(e.interfaceLanguage),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.InterfaceLanguagePropertyValue",interfaceLanguage:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.interfaceLanguage=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:sM.$type,interfaceLanguage:BM(e.interfaceLanguage)?globalThis.String(e.interfaceLanguage):""}),toJSON(e){const t={};return""!==e.interfaceLanguage&&(t.interfaceLanguage=e.interfaceLanguage),t},create:e=>sM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.InterfaceLanguagePropertyValue",interfaceLanguage:""};return n.interfaceLanguage=null!==(t=e.interfaceLanguage)&&void 0!==t?t:"",n}};const lM={$type:"deepl.pb.interactive_text_api.translator.FreeTextPromptListPropertyValue",encode:(e,t=new Fk)=>(void 0!==e.freeTextPromptList&&uD.encode(e.freeTextPromptList,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.FreeTextPromptListPropertyValue",freeTextPromptList:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.freeTextPromptList=uD.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:lM.$type,freeTextPromptList:BM(e.freeTextPromptList)?uD.fromJSON(e.freeTextPromptList):void 0}),toJSON(e){const t={};return void 0!==e.freeTextPromptList&&(t.freeTextPromptList=uD.toJSON(e.freeTextPromptList)),t},create:e=>lM.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.FreeTextPromptListPropertyValue",freeTextPromptList:void 0};return t.freeTextPromptList=void 0!==e.freeTextPromptList&&null!==e.freeTextPromptList?uD.fromPartial(e.freeTextPromptList):void 0,t}};const cM={$type:"deepl.pb.interactive_text_api.translator.GlossarySupportPropertyValue",encode:(e,t=new Fk)=>t,decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossarySupportPropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:cM.$type}),toJSON:e=>({}),create:e=>cM.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.translator.GlossarySupportPropertyValue"})};const uM={$type:"deepl.pb.interactive_text_api.translator.StyleGuideSupportPropertyValue",encode:(e,t=new Fk)=>t,decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.StyleGuideSupportPropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:uM.$type}),toJSON:e=>({}),create:e=>uM.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.translator.StyleGuideSupportPropertyValue"})};const dM={$type:"deepl.pb.interactive_text_api.translator.RtfSupportPropertyValue",encode:(e,t=new Fk)=>t,decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.RtfSupportPropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:dM.$type}),toJSON:e=>({}),create:e=>dM.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.translator.RtfSupportPropertyValue"})};const pM={$type:"deepl.pb.interactive_text_api.translator.TaskMetaInfo",encode:(e,t=new Fk)=>(0!==e.progressInPercent&&t.uint32(8).int32(e.progressInPercent),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TaskMetaInfo",progressInPercent:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.progressInPercent=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:pM.$type,progressInPercent:BM(e.progressInPercent)?globalThis.Number(e.progressInPercent):0}),toJSON(e){const t={};return 0!==e.progressInPercent&&(t.progressInPercent=Math.round(e.progressInPercent)),t},create:e=>pM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.TaskMetaInfo",progressInPercent:0};return n.progressInPercent=null!==(t=e.progressInPercent)&&void 0!==t?t:0,n}};const gM={$type:"deepl.pb.interactive_text_api.translator.FormalityModesPropertyValue",encode(e,t=new Fk){for(const n of e.formalityModes)wM.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.FormalityModesPropertyValue",formalityModes:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.formalityModes.push(wM.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:gM.$type,formalityModes:globalThis.Array.isArray(null==e?void 0:e.formalityModes)?e.formalityModes.map((e=>wM.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.formalityModes)||void 0===t?void 0:t.length)&&(n.formalityModes=e.formalityModes.map((e=>wM.toJSON(e)))),n},create:e=>gM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.FormalityModesPropertyValue",formalityModes:[]};return n.formalityModes=(null===(t=e.formalityModes)||void 0===t?void 0:t.map((e=>wM.fromPartial(e))))||[],n}};const hM={$type:"deepl.pb.interactive_text_api.translator.FormalityModePropertyValue",encode:(e,t=new Fk)=>(void 0!==e.formalityMode&&wM.encode(e.formalityMode,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.FormalityModePropertyValue",formalityMode:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.formalityMode=wM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:hM.$type,formalityMode:BM(e.formalityMode)?wM.fromJSON(e.formalityMode):void 0}),toJSON(e){const t={};return void 0!==e.formalityMode&&(t.formalityMode=wM.toJSON(e.formalityMode)),t},create:e=>hM.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.FormalityModePropertyValue",formalityMode:void 0};return t.formalityMode=void 0!==e.formalityMode&&null!==e.formalityMode?wM.fromPartial(e.formalityMode):void 0,t}};const fM={$type:"deepl.pb.interactive_text_api.translator.LanguageModelsPropertyValue",encode(e,t=new Fk){for(const n of e.languageModels)OM.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.LanguageModelsPropertyValue",languageModels:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.languageModels.push(OM.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:fM.$type,languageModels:globalThis.Array.isArray(null==e?void 0:e.languageModels)?e.languageModels.map((e=>OM.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.languageModels)||void 0===t?void 0:t.length)&&(n.languageModels=e.languageModels.map((e=>OM.toJSON(e)))),n},create:e=>fM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.LanguageModelsPropertyValue",languageModels:[]};return n.languageModels=(null===(t=e.languageModels)||void 0===t?void 0:t.map((e=>OM.fromPartial(e))))||[],n}};const _M={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPropertyValue",encode:(e,t=new Fk)=>(void 0!==e.languageModel&&OM.encode(e.languageModel,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPropertyValue",languageModel:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.languageModel=OM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:_M.$type,languageModel:BM(e.languageModel)?OM.fromJSON(e.languageModel):void 0}),toJSON(e){const t={};return void 0!==e.languageModel&&(t.languageModel=OM.toJSON(e.languageModel)),t},create:e=>_M.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPropertyValue",languageModel:void 0};return t.languageModel=void 0!==e.languageModel&&null!==e.languageModel?OM.fromPartial(e.languageModel):void 0,t}};const mM={$type:"deepl.pb.interactive_text_api.translator.TextDirectionPropertyValue",encode:(e,t=new Fk)=>(0!==e.textDirection&&t.uint32(8).int32(e.textDirection),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TextDirectionPropertyValue",textDirection:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.textDirection=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:mM.$type,textDirection:BM(e.textDirection)?VU(e.textDirection):0}),toJSON(e){const t={};return 0!==e.textDirection&&(t.textDirection=function(e){switch(e){case UU.UNSPECIFIED:return"TEXT_DIRECTION_UNSPECIFIED";case UU.LEFT_TO_RIGHT:return"TEXT_DIRECTION_LEFT_TO_RIGHT";case UU.RIGHT_TO_LEFT:return"TEXT_DIRECTION_RIGHT_TO_LEFT";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum TextDirection")}}(e.textDirection)),t},create:e=>mM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.TextDirectionPropertyValue",textDirection:0};return n.textDirection=null!==(t=e.textDirection)&&void 0!==t?t:0,n}};const vM={$type:"deepl.pb.interactive_text_api.translator.MaximumTextLengthPropertyValue",encode:(e,t=new Fk)=>(0!==e.max&&t.uint32(8).int32(e.max),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.MaximumTextLengthPropertyValue",max:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.max=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:vM.$type,max:BM(e.max)?globalThis.Number(e.max):0}),toJSON(e){const t={};return 0!==e.max&&(t.max=Math.round(e.max)),t},create:e=>vM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.MaximumTextLengthPropertyValue",max:0};return n.max=null!==(t=e.max)&&void 0!==t?t:0,n}};const TM={$type:"deepl.pb.interactive_text_api.translator.UnsupportedSourceLanguagePropertyValue",encode:(e,t=new Fk)=>t,decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.UnsupportedSourceLanguagePropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:TM.$type}),toJSON:e=>({}),create:e=>TM.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.translator.UnsupportedSourceLanguagePropertyValue"})};const yM={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeightsPropertyValue",encode(e,t=new Fk){for(const n of e.weights)UM.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeightsPropertyValue",weights:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.weights.push(UM.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:yM.$type,weights:globalThis.Array.isArray(null==e?void 0:e.weights)?e.weights.map((e=>UM.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.weights)||void 0===t?void 0:t.length)&&(n.weights=e.weights.map((e=>UM.toJSON(e)))),n},create:e=>yM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeightsPropertyValue",weights:[]};return n.weights=(null===(t=e.weights)||void 0===t?void 0:t.map((e=>UM.fromPartial(e))))||[],n}};const EM={$type:"deepl.pb.interactive_text_api.translator.StyleVariantsPropertyValue",encode(e,t=new Fk){for(const n of e.styleVariants)qM.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.StyleVariantsPropertyValue",styleVariants:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.styleVariants.push(qM.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:EM.$type,styleVariants:globalThis.Array.isArray(null==e?void 0:e.styleVariants)?e.styleVariants.map((e=>qM.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.styleVariants)||void 0===t?void 0:t.length)&&(n.styleVariants=e.styleVariants.map((e=>qM.toJSON(e)))),n},create:e=>EM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.StyleVariantsPropertyValue",styleVariants:[]};return n.styleVariants=(null===(t=e.styleVariants)||void 0===t?void 0:t.map((e=>qM.fromPartial(e))))||[],n}};const SM={$type:"deepl.pb.interactive_text_api.translator.StyleVariantPropertyValue",encode:(e,t=new Fk)=>(void 0!==e.styleVariant&&qM.encode(e.styleVariant,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.StyleVariantPropertyValue",styleVariant:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.styleVariant=qM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:SM.$type,styleVariant:BM(e.styleVariant)?qM.fromJSON(e.styleVariant):void 0}),toJSON(e){const t={};return void 0!==e.styleVariant&&(t.styleVariant=qM.toJSON(e.styleVariant)),t},create:e=>SM.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.StyleVariantPropertyValue",styleVariant:void 0};return t.styleVariant=void 0!==e.styleVariant&&null!==e.styleVariant?qM.fromPartial(e.styleVariant):void 0,t}};const IM={$type:"deepl.pb.interactive_text_api.translator.TranslationMemoryListPropertyValue",encode(e,t=new Fk){for(const n of e.translationMemories)kU.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TranslationMemoryListPropertyValue",translationMemories:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.translationMemories.push(kU.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:IM.$type,translationMemories:globalThis.Array.isArray(null==e?void 0:e.translationMemories)?e.translationMemories.map((e=>kU.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.translationMemories)||void 0===t?void 0:t.length)&&(n.translationMemories=e.translationMemories.map((e=>kU.toJSON(e)))),n},create:e=>IM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.TranslationMemoryListPropertyValue",translationMemories:[]};return n.translationMemories=(null===(t=e.translationMemories)||void 0===t?void 0:t.map((e=>kU.fromPartial(e))))||[],n}};const AM={$type:"deepl.pb.interactive_text_api.translator.SelectedTranslationMemoryPropertyValue",encode:(e,t=new Fk)=>(void 0!==e.translationMemoryId&&xU.encode(e.translationMemoryId,t.uint32(10).fork()).join(),0!==e.threshold&&t.uint32(21).float(e.threshold),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SelectedTranslationMemoryPropertyValue",translationMemoryId:void 0,threshold:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.translationMemoryId=xU.decode(n,n.uint32());continue;case 2:if(21!==e)break;o.threshold=n.float();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:AM.$type,translationMemoryId:BM(e.translationMemoryId)?xU.fromJSON(e.translationMemoryId):void 0,threshold:BM(e.threshold)?globalThis.Number(e.threshold):0}),toJSON(e){const t={};return void 0!==e.translationMemoryId&&(t.translationMemoryId=xU.toJSON(e.translationMemoryId)),0!==e.threshold&&(t.threshold=e.threshold),t},create:e=>AM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SelectedTranslationMemoryPropertyValue",translationMemoryId:void 0,threshold:0};return n.translationMemoryId=void 0!==e.translationMemoryId&&null!==e.translationMemoryId?xU.fromPartial(e.translationMemoryId):void 0,n.threshold=null!==(t=e.threshold)&&void 0!==t?t:0,n}};const bM={$type:"deepl.pb.interactive_text_api.translator.SessionOptions",encode:(e,t=new Fk)=>(!1!==e.enableTranscription&&t.uint32(8).bool(e.enableTranscription),!1!==e.enableTranslatorQuoteConversion&&t.uint32(16).bool(e.enableTranslatorQuoteConversion),!1!==e.disableLanguageWeights&&t.uint32(24).bool(e.disableLanguageWeights),!1!==e.doNotOverrideRequestedSourceLanguage&&t.uint32(32).bool(e.doNotOverrideRequestedSourceLanguage),!1!==e.enableInlineSuggestions&&t.uint32(40).bool(e.enableInlineSuggestions),0!==e.usageType&&t.uint32(48).int32(e.usageType),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SessionOptions",enableTranscription:!1,enableTranslatorQuoteConversion:!1,disableLanguageWeights:!1,doNotOverrideRequestedSourceLanguage:!1,enableInlineSuggestions:!1,usageType:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.enableTranscription=n.bool();continue;case 2:if(16!==e)break;o.enableTranslatorQuoteConversion=n.bool();continue;case 3:if(24!==e)break;o.disableLanguageWeights=n.bool();continue;case 4:if(32!==e)break;o.doNotOverrideRequestedSourceLanguage=n.bool();continue;case 5:if(40!==e)break;o.enableInlineSuggestions=n.bool();continue;case 6:if(48!==e)break;o.usageType=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:bM.$type,enableTranscription:!!BM(e.enableTranscription)&&globalThis.Boolean(e.enableTranscription),enableTranslatorQuoteConversion:!!BM(e.enableTranslatorQuoteConversion)&&globalThis.Boolean(e.enableTranslatorQuoteConversion),disableLanguageWeights:!!BM(e.disableLanguageWeights)&&globalThis.Boolean(e.disableLanguageWeights),doNotOverrideRequestedSourceLanguage:!!BM(e.doNotOverrideRequestedSourceLanguage)&&globalThis.Boolean(e.doNotOverrideRequestedSourceLanguage),enableInlineSuggestions:!!BM(e.enableInlineSuggestions)&&globalThis.Boolean(e.enableInlineSuggestions),usageType:BM(e.usageType)?FU(e.usageType):0}),toJSON(e){const t={};return!1!==e.enableTranscription&&(t.enableTranscription=e.enableTranscription),!1!==e.enableTranslatorQuoteConversion&&(t.enableTranslatorQuoteConversion=e.enableTranslatorQuoteConversion),!1!==e.disableLanguageWeights&&(t.disableLanguageWeights=e.disableLanguageWeights),!1!==e.doNotOverrideRequestedSourceLanguage&&(t.doNotOverrideRequestedSourceLanguage=e.doNotOverrideRequestedSourceLanguage),!1!==e.enableInlineSuggestions&&(t.enableInlineSuggestions=e.enableInlineSuggestions),0!==e.usageType&&(t.usageType=function(e){switch(e){case GU.UNSPECIFIED:return"USAGE_TYPE_UNSPECIFIED";case GU.TRANSLATE:return"USAGE_TYPE_TRANSLATE";case GU.FULL_PAGE_TRANSLATION:return"USAGE_TYPE_FULL_PAGE_TRANSLATION";case GU.OCR:return"USAGE_TYPE_OCR";case GU.VOICE_FOR_CONVERSATIONS:return"USAGE_TYPE_VOICE_FOR_CONVERSATIONS";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum UsageType")}}(e.usageType)),t},create:e=>bM.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r,o,i,a;const s={$type:"deepl.pb.interactive_text_api.translator.SessionOptions",enableTranscription:!1,enableTranslatorQuoteConversion:!1,disableLanguageWeights:!1,doNotOverrideRequestedSourceLanguage:!1,enableInlineSuggestions:!1,usageType:0};return s.enableTranscription=null!==(t=e.enableTranscription)&&void 0!==t&&t,s.enableTranslatorQuoteConversion=null!==(n=e.enableTranslatorQuoteConversion)&&void 0!==n&&n,s.disableLanguageWeights=null!==(r=e.disableLanguageWeights)&&void 0!==r&&r,s.doNotOverrideRequestedSourceLanguage=null!==(o=e.doNotOverrideRequestedSourceLanguage)&&void 0!==o&&o,s.enableInlineSuggestions=null!==(i=e.enableInlineSuggestions)&&void 0!==i&&i,s.usageType=null!==(a=e.usageType)&&void 0!==a?a:0,s}};const wM={$type:"deepl.pb.interactive_text_api.translator.FormalityMode",encode:(e,t=new Fk)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.FormalityMode",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:wM.$type,value:BM(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>wM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.FormalityMode",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const OM={$type:"deepl.pb.interactive_text_api.translator.LanguageModel",encode:(e,t=new Fk)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.LanguageModel",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:OM.$type,value:BM(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>OM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.LanguageModel",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const NM={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPreference",encode:(e,t=new Fk)=>(void 0!==e.sourceLanguage&&xM.encode(e.sourceLanguage,t.uint32(10).fork()).join(),void 0!==e.targetLanguage&&kM.encode(e.targetLanguage,t.uint32(18).fork()).join(),void 0!==e.model&&OM.encode(e.model,t.uint32(26).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPreference",sourceLanguage:void 0,targetLanguage:void 0,model:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sourceLanguage=xM.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.targetLanguage=kM.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.model=OM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:NM.$type,sourceLanguage:BM(e.sourceLanguage)?xM.fromJSON(e.sourceLanguage):void 0,targetLanguage:BM(e.targetLanguage)?kM.fromJSON(e.targetLanguage):void 0,model:BM(e.model)?OM.fromJSON(e.model):void 0}),toJSON(e){const t={};return void 0!==e.sourceLanguage&&(t.sourceLanguage=xM.toJSON(e.sourceLanguage)),void 0!==e.targetLanguage&&(t.targetLanguage=kM.toJSON(e.targetLanguage)),void 0!==e.model&&(t.model=OM.toJSON(e.model)),t},create:e=>NM.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPreference",sourceLanguage:void 0,targetLanguage:void 0,model:void 0};return t.sourceLanguage=void 0!==e.sourceLanguage&&null!==e.sourceLanguage?xM.fromPartial(e.sourceLanguage):void 0,t.targetLanguage=void 0!==e.targetLanguage&&null!==e.targetLanguage?kM.fromPartial(e.targetLanguage):void 0,t.model=void 0!==e.model&&null!==e.model?OM.fromPartial(e.model):void 0,t}};const RM={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPreferencesPropertyValue",encode(e,t=new Fk){for(const n of e.preferences)NM.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPreferencesPropertyValue",preferences:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.preferences.push(NM.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:RM.$type,preferences:globalThis.Array.isArray(null==e?void 0:e.preferences)?e.preferences.map((e=>NM.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.preferences)||void 0===t?void 0:t.length)&&(n.preferences=e.preferences.map((e=>NM.toJSON(e)))),n},create:e=>RM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPreferencesPropertyValue",preferences:[]};return n.preferences=(null===(t=e.preferences)||void 0===t?void 0:t.map((e=>NM.fromPartial(e))))||[],n}};const LM={$type:"deepl.pb.interactive_text_api.translator.GlossaryEntry",encode:(e,t=new Fk)=>(""!==e.source&&t.uint32(10).string(e.source),""!==e.target&&t.uint32(18).string(e.target),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossaryEntry",source:"",target:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.source=n.string();continue;case 2:if(18!==e)break;o.target=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:LM.$type,source:BM(e.source)?globalThis.String(e.source):"",target:BM(e.target)?globalThis.String(e.target):""}),toJSON(e){const t={};return""!==e.source&&(t.source=e.source),""!==e.target&&(t.target=e.target),t},create:e=>LM.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.translator.GlossaryEntry",source:"",target:""};return r.source=null!==(t=e.source)&&void 0!==t?t:"",r.target=null!==(n=e.target)&&void 0!==n?n:"",r}};const PM={$type:"deepl.pb.interactive_text_api.translator.GlossaryListPropertyValue",encode(e,t=new Fk){for(const n of e.glossaryEntries)LM.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossaryListPropertyValue",glossaryEntries:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.glossaryEntries.push(LM.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:PM.$type,glossaryEntries:globalThis.Array.isArray(null==e?void 0:e.glossaryEntries)?e.glossaryEntries.map((e=>LM.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.glossaryEntries)||void 0===t?void 0:t.length)&&(n.glossaryEntries=e.glossaryEntries.map((e=>LM.toJSON(e)))),n},create:e=>PM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.GlossaryListPropertyValue",glossaryEntries:[]};return n.glossaryEntries=(null===(t=e.glossaryEntries)||void 0===t?void 0:t.map((e=>LM.fromPartial(e))))||[],n}};const CM={$type:"deepl.pb.interactive_text_api.translator.GlossaryHighlight",encode(e,t=new Fk){void 0!==e.entry&&LM.encode(e.entry,t.uint32(10).fork()).join();for(const n of e.ranges)aD.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossaryHighlight",entry:void 0,ranges:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.entry=LM.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.ranges.push(aD.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:CM.$type,entry:BM(e.entry)?LM.fromJSON(e.entry):void 0,ranges:globalThis.Array.isArray(null==e?void 0:e.ranges)?e.ranges.map((e=>aD.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.entry&&(n.entry=LM.toJSON(e.entry)),(null===(t=e.ranges)||void 0===t?void 0:t.length)&&(n.ranges=e.ranges.map((e=>aD.toJSON(e)))),n},create:e=>CM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.GlossaryHighlight",entry:void 0,ranges:[]};return n.entry=void 0!==e.entry&&null!==e.entry?LM.fromPartial(e.entry):void 0,n.ranges=(null===(t=e.ranges)||void 0===t?void 0:t.map((e=>aD.fromPartial(e))))||[],n}};const xM={$type:"deepl.pb.interactive_text_api.translator.SourceLanguage",encode:(e,t=new Fk)=>(""!==e.code&&t.uint32(10).string(e.code),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SourceLanguage",code:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.code=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:xM.$type,code:BM(e.code)?globalThis.String(e.code):""}),toJSON(e){const t={};return""!==e.code&&(t.code=e.code),t},create:e=>xM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SourceLanguage",code:""};return n.code=null!==(t=e.code)&&void 0!==t?t:"",n}};const kM={$type:"deepl.pb.interactive_text_api.translator.TargetLanguage",encode:(e,t=new Fk)=>(""!==e.code&&t.uint32(10).string(e.code),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TargetLanguage",code:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.code=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:kM.$type,code:BM(e.code)?globalThis.String(e.code):""}),toJSON(e){const t={};return""!==e.code&&(t.code=e.code),t},create:e=>kM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.TargetLanguage",code:""};return n.code=null!==(t=e.code)&&void 0!==t?t:"",n}};const DM={$type:"deepl.pb.interactive_text_api.translator.TextUnitAlternative",encode(e,t=new Fk){""!==e.text&&t.uint32(10).string(e.text);for(const n of e.glossaryHighlights)CM.encode(n,t.uint32(18).fork()).join();""!==e.transcription&&t.uint32(26).string(e.transcription);for(const n of e.diffs)lD.encode(n,t.uint32(34).fork()).join();for(const n of e.customRuleHighlights)vD.encode(n,t.uint32(42).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TextUnitAlternative",text:"",glossaryHighlights:[],transcription:"",diffs:[],customRuleHighlights:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.text=n.string();continue;case 2:if(18!==e)break;o.glossaryHighlights.push(CM.decode(n,n.uint32()));continue;case 3:if(26!==e)break;o.transcription=n.string();continue;case 4:if(34!==e)break;o.diffs.push(lD.decode(n,n.uint32()));continue;case 5:if(42!==e)break;o.customRuleHighlights.push(vD.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:DM.$type,text:BM(e.text)?globalThis.String(e.text):"",glossaryHighlights:globalThis.Array.isArray(null==e?void 0:e.glossaryHighlights)?e.glossaryHighlights.map((e=>CM.fromJSON(e))):[],transcription:BM(e.transcription)?globalThis.String(e.transcription):"",diffs:globalThis.Array.isArray(null==e?void 0:e.diffs)?e.diffs.map((e=>lD.fromJSON(e))):[],customRuleHighlights:globalThis.Array.isArray(null==e?void 0:e.customRuleHighlights)?e.customRuleHighlights.map((e=>vD.fromJSON(e))):[]}),toJSON(e){var t,n,r;const o={};return""!==e.text&&(o.text=e.text),(null===(t=e.glossaryHighlights)||void 0===t?void 0:t.length)&&(o.glossaryHighlights=e.glossaryHighlights.map((e=>CM.toJSON(e)))),""!==e.transcription&&(o.transcription=e.transcription),(null===(n=e.diffs)||void 0===n?void 0:n.length)&&(o.diffs=e.diffs.map((e=>lD.toJSON(e)))),(null===(r=e.customRuleHighlights)||void 0===r?void 0:r.length)&&(o.customRuleHighlights=e.customRuleHighlights.map((e=>vD.toJSON(e)))),o},create:e=>DM.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r,o,i;const a={$type:"deepl.pb.interactive_text_api.translator.TextUnitAlternative",text:"",glossaryHighlights:[],transcription:"",diffs:[],customRuleHighlights:[]};return a.text=null!==(t=e.text)&&void 0!==t?t:"",a.glossaryHighlights=(null===(n=e.glossaryHighlights)||void 0===n?void 0:n.map((e=>CM.fromPartial(e))))||[],a.transcription=null!==(r=e.transcription)&&void 0!==r?r:"",a.diffs=(null===(o=e.diffs)||void 0===o?void 0:o.map((e=>lD.fromPartial(e))))||[],a.customRuleHighlights=(null===(i=e.customRuleHighlights)||void 0===i?void 0:i.map((e=>vD.fromPartial(e))))||[],a}};const UM={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeight",encode:(e,t=new Fk)=>(void 0!==e.language&&xM.encode(e.language,t.uint32(10).fork()).join(),0!==e.weight&&t.uint32(17).double(e.weight),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeight",language:void 0,weight:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.language=xM.decode(n,n.uint32());continue;case 2:if(17!==e)break;o.weight=n.double();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:UM.$type,language:BM(e.language)?xM.fromJSON(e.language):void 0,weight:BM(e.weight)?globalThis.Number(e.weight):0}),toJSON(e){const t={};return void 0!==e.language&&(t.language=xM.toJSON(e.language)),0!==e.weight&&(t.weight=e.weight),t},create:e=>UM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeight",language:void 0,weight:0};return n.language=void 0!==e.language&&null!==e.language?xM.fromPartial(e.language):void 0,n.weight=null!==(t=e.weight)&&void 0!==t?t:0,n}};const MM={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestion",encode:(e,t=new Fk)=>(void 0!==e.id&&jM.encode(e.id,t.uint32(10).fork()).join(),""!==e.title&&t.uint32(18).string(e.title),""!==e.question&&t.uint32(26).string(e.question),""!==e.category&&t.uint32(34).string(e.category),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestion",id:void 0,title:"",question:"",category:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.id=jM.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.title=n.string();continue;case 3:if(26!==e)break;o.question=n.string();continue;case 4:if(34!==e)break;o.category=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:MM.$type,id:BM(e.id)?jM.fromJSON(e.id):void 0,title:BM(e.title)?globalThis.String(e.title):"",question:BM(e.question)?globalThis.String(e.question):"",category:BM(e.category)?globalThis.String(e.category):""}),toJSON(e){const t={};return void 0!==e.id&&(t.id=jM.toJSON(e.id)),""!==e.title&&(t.title=e.title),""!==e.question&&(t.question=e.question),""!==e.category&&(t.category=e.category),t},create:e=>MM.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestion",id:void 0,title:"",question:"",category:""};return o.id=void 0!==e.id&&null!==e.id?jM.fromPartial(e.id):void 0,o.title=null!==(t=e.title)&&void 0!==t?t:"",o.question=null!==(n=e.question)&&void 0!==n?n:"",o.category=null!==(r=e.category)&&void 0!==r?r:"",o}};const GM={$type:"deepl.pb.interactive_text_api.translator.ClarifyAnswer",encode:(e,t=new Fk)=>(""!==e.answer&&t.uint32(10).string(e.answer),!1!==e.isDefault&&t.uint32(16).bool(e.isDefault),void 0!==e.hint&&t.uint32(26).string(e.hint),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyAnswer",answer:"",isDefault:!1,hint:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.answer=n.string();continue;case 2:if(16!==e)break;o.isDefault=n.bool();continue;case 3:if(26!==e)break;o.hint=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:GM.$type,answer:BM(e.answer)?globalThis.String(e.answer):"",isDefault:!!BM(e.isDefault)&&globalThis.Boolean(e.isDefault),hint:BM(e.hint)?globalThis.String(e.hint):void 0}),toJSON(e){const t={};return""!==e.answer&&(t.answer=e.answer),!1!==e.isDefault&&(t.isDefault=e.isDefault),void 0!==e.hint&&(t.hint=e.hint),t},create:e=>GM.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyAnswer",answer:"",isDefault:!1,hint:void 0};return o.answer=null!==(t=e.answer)&&void 0!==t?t:"",o.isDefault=null!==(n=e.isDefault)&&void 0!==n&&n,o.hint=null!==(r=e.hint)&&void 0!==r?r:void 0,o}};const VM={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionWithAnswers",encode(e,t=new Fk){void 0!==e.question&&MM.encode(e.question,t.uint32(10).fork()).join();for(const n of e.answers)GM.encode(n,t.uint32(18).fork()).join();return void 0!==e.language&&t.uint32(26).string(e.language),t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionWithAnswers",question:void 0,answers:[],language:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.question=MM.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.answers.push(GM.decode(n,n.uint32()));continue;case 3:if(26!==e)break;o.language=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:VM.$type,question:BM(e.question)?MM.fromJSON(e.question):void 0,answers:globalThis.Array.isArray(null==e?void 0:e.answers)?e.answers.map((e=>GM.fromJSON(e))):[],language:BM(e.language)?globalThis.String(e.language):void 0}),toJSON(e){var t;const n={};return void 0!==e.question&&(n.question=MM.toJSON(e.question)),(null===(t=e.answers)||void 0===t?void 0:t.length)&&(n.answers=e.answers.map((e=>GM.toJSON(e)))),void 0!==e.language&&(n.language=e.language),n},create:e=>VM.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionWithAnswers",question:void 0,answers:[],language:void 0};return r.question=void 0!==e.question&&null!==e.question?MM.fromPartial(e.question):void 0,r.answers=(null===(t=e.answers)||void 0===t?void 0:t.map((e=>GM.fromPartial(e))))||[],r.language=null!==(n=e.language)&&void 0!==n?n:void 0,r}};const $M={$type:"deepl.pb.interactive_text_api.translator.ClarifySelectedAnswer",encode:(e,t=new Fk)=>(""!==e.answer&&t.uint32(10).string(e.answer),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifySelectedAnswer",answer:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.answer=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:$M.$type,answer:BM(e.answer)?globalThis.String(e.answer):""}),toJSON(e){const t={};return""!==e.answer&&(t.answer=e.answer),t},create:e=>$M.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ClarifySelectedAnswer",answer:""};return n.answer=null!==(t=e.answer)&&void 0!==t?t:"",n}};const FM={$type:"deepl.pb.interactive_text_api.translator.ClarifyFlowId",encode:(e,t=new Fk)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:FM.$type,value:BM(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>FM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ClarifyFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const jM={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionId",encode:(e,t=new Fk)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:jM.$type,value:BM(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>jM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const WM={$type:"deepl.pb.interactive_text_api.translator.ClarifyErrorInfo",encode:(e,t=new Fk)=>(""!==e.errorCode&&t.uint32(10).string(e.errorCode),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyErrorInfo",errorCode:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.errorCode=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:WM.$type,errorCode:BM(e.errorCode)?globalThis.String(e.errorCode):""}),toJSON(e){const t={};return""!==e.errorCode&&(t.errorCode=e.errorCode),t},create:e=>WM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ClarifyErrorInfo",errorCode:""};return n.errorCode=null!==(t=e.errorCode)&&void 0!==t?t:"",n}};const qM={$type:"deepl.pb.interactive_text_api.translator.StyleVariant",encode:(e,t=new Fk)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.StyleVariant",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:qM.$type,value:BM(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>qM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.StyleVariant",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};function BM(e){return null!=e}var HM,JM,zM;function YM(e){switch(e){case 0:case"FIELD_NAME_UNSPECIFIED":return HM.UNSPECIFIED;case 1:case"FIELD_NAME_TRANSLATOR_SOURCE_TEXT":return HM.TRANSLATOR_SOURCE_TEXT;case 2:case"FIELD_NAME_TRANSLATOR_TARGET_TEXT":return HM.TRANSLATOR_TARGET_TEXT;case 4:case"FIELD_NAME_TRANSLATOR_TARGET_TRANSCRIPTION_TEXT":return HM.TRANSLATOR_TARGET_TRANSCRIPTION_TEXT;case 5:case"FIELD_NAME_WRITE_SOURCE_TEXT":return HM.WRITE_SOURCE_TEXT;case 6:case"FIELD_NAME_WRITE_TARGET_TEXT":return HM.WRITE_TARGET_TEXT;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum FieldName")}}function XM(e){switch(e){case HM.UNSPECIFIED:return"FIELD_NAME_UNSPECIFIED";case HM.TRANSLATOR_SOURCE_TEXT:return"FIELD_NAME_TRANSLATOR_SOURCE_TEXT";case HM.TRANSLATOR_TARGET_TEXT:return"FIELD_NAME_TRANSLATOR_TARGET_TEXT";case HM.TRANSLATOR_TARGET_TRANSCRIPTION_TEXT:return"FIELD_NAME_TRANSLATOR_TARGET_TRANSCRIPTION_TEXT";case HM.WRITE_SOURCE_TEXT:return"FIELD_NAME_WRITE_SOURCE_TEXT";case HM.WRITE_TARGET_TEXT:return"FIELD_NAME_WRITE_TARGET_TEXT";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum FieldName")}}function KM(e){switch(e){case 0:case"PROPERTY_NAME_UNSPECIFIED":return JM.UNSPECIFIED;case 1:case"PROPERTY_NAME_TRANSLATOR_SOURCE_LANGUAGES":return JM.TRANSLATOR_SOURCE_LANGUAGES;case 2:case"PROPERTY_NAME_TRANSLATOR_TARGET_LANGUAGES":return JM.TRANSLATOR_TARGET_LANGUAGES;case 3:case"PROPERTY_NAME_TRANSLATOR_REQUESTED_SOURCE_LANGUAGE":return JM.TRANSLATOR_REQUESTED_SOURCE_LANGUAGE;case 4:case"PROPERTY_NAME_TRANSLATOR_CALCULATED_SOURCE_LANGUAGE":return JM.TRANSLATOR_CALCULATED_SOURCE_LANGUAGE;case 5:case"PROPERTY_NAME_TRANSLATOR_REQUESTED_TARGET_LANGUAGE":return JM.TRANSLATOR_REQUESTED_TARGET_LANGUAGE;case 7:case"PROPERTY_NAME_TRANSLATOR_FORMALITY_MODES":return JM.TRANSLATOR_FORMALITY_MODES;case 8:case"PROPERTY_NAME_TRANSLATOR_FORMALITY_MODE":return JM.TRANSLATOR_FORMALITY_MODE;case 9:case"PROPERTY_NAME_TRANSLATOR_GLOSSARY_SUPPORT":return JM.TRANSLATOR_GLOSSARY_SUPPORT;case 10:case"PROPERTY_NAME_TRANSLATOR_GLOSSARY_LIST":return JM.TRANSLATOR_GLOSSARY_LIST;case 12:case"PROPERTY_NAME_TRANSLATOR_TEXT_DIRECTION":return JM.TRANSLATOR_TEXT_DIRECTION;case 13:case"PROPERTY_NAME_TRANSLATOR_GLOSSARY_SUGGESTIONS":return JM.TRANSLATOR_GLOSSARY_SUGGESTIONS;case 14:case"PROPERTY_NAME_TRANSLATOR_MAXIMUM_TEXT_LENGTH":return JM.TRANSLATOR_MAXIMUM_TEXT_LENGTH;case 15:case"PROPERTY_NAME_TRANSLATOR_LANGUAGE_MODELS":return JM.TRANSLATOR_LANGUAGE_MODELS;case 16:case"PROPERTY_NAME_TRANSLATOR_LANGUAGE_MODEL":return JM.TRANSLATOR_LANGUAGE_MODEL;case 17:case"PROPERTY_NAME_TRANSLATOR_GLOSSARY_ID":return JM.TRANSLATOR_GLOSSARY_ID;case 18:case"PROPERTY_NAME_TRANSLATOR_CALCULATED_TARGET_LANGUAGE":return JM.TRANSLATOR_CALCULATED_TARGET_LANGUAGE;case 19:case"PROPERTY_NAME_TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE":return JM.TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE;case 20:case"PROPERTY_NAME_WRITE_LANGUAGES":return JM.WRITE_LANGUAGES;case 21:case"PROPERTY_NAME_WRITE_REQUESTED_LANGUAGE":return JM.WRITE_REQUESTED_LANGUAGE;case 22:case"PROPERTY_NAME_WRITE_CALCULATED_LANGUAGE":return JM.WRITE_CALCULATED_LANGUAGE;case 23:case"PROPERTY_NAME_WRITE_STYLE_VARIANTS":return JM.WRITE_STYLE_VARIANTS;case 24:case"PROPERTY_NAME_WRITE_STYLE_VARIANT":return JM.WRITE_STYLE_VARIANT;case 25:case"PROPERTY_NAME_WRITE_GLOSSARY_ID":return JM.WRITE_GLOSSARY_ID;case 26:case"PROPERTY_NAME_WRITE_GLOSSARY_LIST":return JM.WRITE_GLOSSARY_LIST;case 27:case"PROPERTY_NAME_WRITE_GLOSSARY_SUPPORT":return JM.WRITE_GLOSSARY_SUPPORT;case 28:case"PROPERTY_NAME_WRITE_MAXIMUM_TEXT_LENGTH":return JM.WRITE_MAXIMUM_TEXT_LENGTH;case 29:case"PROPERTY_NAME_WRITE_UNSUPPORTED_LANGUAGE":return JM.WRITE_UNSUPPORTED_LANGUAGE;case 30:case"PROPERTY_NAME_TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS":return JM.TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS;case 31:case"PROPERTY_NAME_WRITE_GLOSSARY_LANGUAGES":return JM.WRITE_GLOSSARY_LANGUAGES;case 32:case"PROPERTY_NAME_WRITE_STYLE_GUIDE_SUPPORT":return JM.WRITE_STYLE_GUIDE_SUPPORT;case 33:case"PROPERTY_NAME_WRITE_STYLE_GUIDE_ID":return JM.WRITE_STYLE_GUIDE_ID;case 34:case"PROPERTY_NAME_WRITE_TEMPLATE_ADAPTATION_TEMPLATES":return JM.WRITE_TEMPLATE_ADAPTATION_TEMPLATES;case 35:case"PROPERTY_NAME_TRANSLATOR_STYLE_GUIDE_SUPPORT":return JM.TRANSLATOR_STYLE_GUIDE_SUPPORT;case 36:case"PROPERTY_NAME_TRANSLATOR_STYLE_GUIDE_ID":return JM.TRANSLATOR_STYLE_GUIDE_ID;case 37:case"PROPERTY_NAME_TRANSLATOR_INTERFACE_LANGUAGE":return JM.TRANSLATOR_INTERFACE_LANGUAGE;case 38:case"PROPERTY_NAME_TRANSLATOR_LANGUAGE_MODEL_PREFERENCES":return JM.TRANSLATOR_LANGUAGE_MODEL_PREFERENCES;case 39:case"PROPERTY_NAME_TRANSLATOR_FREE_TEXT_PROMPT_LIST":return JM.TRANSLATOR_FREE_TEXT_PROMPT_LIST;case 40:case"PROPERTY_NAME_WRITE_FREE_TEXT_PROMPT_LIST":return JM.WRITE_FREE_TEXT_PROMPT_LIST;case 41:case"PROPERTY_NAME_WRITE_INLINE_SUGGESTIONS_LOADING":return JM.WRITE_INLINE_SUGGESTIONS_LOADING;case 42:case"PROPERTY_NAME_WRITE_CORRECTIONS_ONLY_SUPPORT":return JM.WRITE_CORRECTIONS_ONLY_SUPPORT;case 43:case"PROPERTY_NAME_WRITE_CORRECTIONS_ONLY":return JM.WRITE_CORRECTIONS_ONLY;case 44:case"PROPERTY_NAME_TRANSLATOR_RTF_SUPPORT":return JM.TRANSLATOR_RTF_SUPPORT;case 45:case"PROPERTY_NAME_TRANSLATOR_STYLE_VARIANTS":return JM.TRANSLATOR_STYLE_VARIANTS;case 46:case"PROPERTY_NAME_TRANSLATOR_STYLE_VARIANT":return JM.TRANSLATOR_STYLE_VARIANT;case 47:case"PROPERTY_NAME_WRITE_TEXT_UNIT_ALTERNATIVES_SUPPORT":return JM.WRITE_TEXT_UNIT_ALTERNATIVES_SUPPORT;case 48:case"PROPERTY_NAME_TRANSLATOR_TRANSLATION_MEMORY_LIST":return JM.TRANSLATOR_TRANSLATION_MEMORY_LIST;case 49:case"PROPERTY_NAME_TRANSLATOR_SELECTED_TRANSLATION_MEMORY":return JM.TRANSLATOR_SELECTED_TRANSLATION_MEMORY;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum PropertyName")}}function QM(e){switch(e){case 0:case"SESSION_MODE_UNSPECIFIED":return zM.UNSPECIFIED;case 1:case"SESSION_MODE_TRANSLATOR":return zM.TRANSLATOR;case 2:case"SESSION_MODE_WRITE":return zM.WRITE;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum SessionMode")}}!function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.TRANSLATOR_SOURCE_TEXT=1]="TRANSLATOR_SOURCE_TEXT",e[e.TRANSLATOR_TARGET_TEXT=2]="TRANSLATOR_TARGET_TEXT",e[e.TRANSLATOR_TARGET_TRANSCRIPTION_TEXT=4]="TRANSLATOR_TARGET_TRANSCRIPTION_TEXT",e[e.WRITE_SOURCE_TEXT=5]="WRITE_SOURCE_TEXT",e[e.WRITE_TARGET_TEXT=6]="WRITE_TARGET_TEXT"}(HM||(HM={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.TRANSLATOR_SOURCE_LANGUAGES=1]="TRANSLATOR_SOURCE_LANGUAGES",e[e.TRANSLATOR_TARGET_LANGUAGES=2]="TRANSLATOR_TARGET_LANGUAGES",e[e.TRANSLATOR_REQUESTED_SOURCE_LANGUAGE=3]="TRANSLATOR_REQUESTED_SOURCE_LANGUAGE",e[e.TRANSLATOR_CALCULATED_SOURCE_LANGUAGE=4]="TRANSLATOR_CALCULATED_SOURCE_LANGUAGE",e[e.TRANSLATOR_REQUESTED_TARGET_LANGUAGE=5]="TRANSLATOR_REQUESTED_TARGET_LANGUAGE",e[e.TRANSLATOR_FORMALITY_MODES=7]="TRANSLATOR_FORMALITY_MODES",e[e.TRANSLATOR_FORMALITY_MODE=8]="TRANSLATOR_FORMALITY_MODE",e[e.TRANSLATOR_GLOSSARY_SUPPORT=9]="TRANSLATOR_GLOSSARY_SUPPORT",e[e.TRANSLATOR_GLOSSARY_LIST=10]="TRANSLATOR_GLOSSARY_LIST",e[e.TRANSLATOR_TEXT_DIRECTION=12]="TRANSLATOR_TEXT_DIRECTION",e[e.TRANSLATOR_GLOSSARY_SUGGESTIONS=13]="TRANSLATOR_GLOSSARY_SUGGESTIONS",e[e.TRANSLATOR_MAXIMUM_TEXT_LENGTH=14]="TRANSLATOR_MAXIMUM_TEXT_LENGTH",e[e.TRANSLATOR_LANGUAGE_MODELS=15]="TRANSLATOR_LANGUAGE_MODELS",e[e.TRANSLATOR_LANGUAGE_MODEL=16]="TRANSLATOR_LANGUAGE_MODEL",e[e.TRANSLATOR_GLOSSARY_ID=17]="TRANSLATOR_GLOSSARY_ID",e[e.TRANSLATOR_CALCULATED_TARGET_LANGUAGE=18]="TRANSLATOR_CALCULATED_TARGET_LANGUAGE",e[e.TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE=19]="TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE",e[e.WRITE_LANGUAGES=20]="WRITE_LANGUAGES",e[e.WRITE_REQUESTED_LANGUAGE=21]="WRITE_REQUESTED_LANGUAGE",e[e.WRITE_CALCULATED_LANGUAGE=22]="WRITE_CALCULATED_LANGUAGE",e[e.WRITE_STYLE_VARIANTS=23]="WRITE_STYLE_VARIANTS",e[e.WRITE_STYLE_VARIANT=24]="WRITE_STYLE_VARIANT",e[e.WRITE_GLOSSARY_ID=25]="WRITE_GLOSSARY_ID",e[e.WRITE_GLOSSARY_LIST=26]="WRITE_GLOSSARY_LIST",e[e.WRITE_GLOSSARY_SUPPORT=27]="WRITE_GLOSSARY_SUPPORT",e[e.WRITE_MAXIMUM_TEXT_LENGTH=28]="WRITE_MAXIMUM_TEXT_LENGTH",e[e.WRITE_UNSUPPORTED_LANGUAGE=29]="WRITE_UNSUPPORTED_LANGUAGE",e[e.TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS=30]="TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS",e[e.WRITE_GLOSSARY_LANGUAGES=31]="WRITE_GLOSSARY_LANGUAGES",e[e.WRITE_STYLE_GUIDE_SUPPORT=32]="WRITE_STYLE_GUIDE_SUPPORT",e[e.WRITE_STYLE_GUIDE_ID=33]="WRITE_STYLE_GUIDE_ID",e[e.WRITE_TEMPLATE_ADAPTATION_TEMPLATES=34]="WRITE_TEMPLATE_ADAPTATION_TEMPLATES",e[e.TRANSLATOR_STYLE_GUIDE_SUPPORT=35]="TRANSLATOR_STYLE_GUIDE_SUPPORT",e[e.TRANSLATOR_STYLE_GUIDE_ID=36]="TRANSLATOR_STYLE_GUIDE_ID",e[e.TRANSLATOR_INTERFACE_LANGUAGE=37]="TRANSLATOR_INTERFACE_LANGUAGE",e[e.TRANSLATOR_LANGUAGE_MODEL_PREFERENCES=38]="TRANSLATOR_LANGUAGE_MODEL_PREFERENCES",e[e.TRANSLATOR_FREE_TEXT_PROMPT_LIST=39]="TRANSLATOR_FREE_TEXT_PROMPT_LIST",e[e.WRITE_FREE_TEXT_PROMPT_LIST=40]="WRITE_FREE_TEXT_PROMPT_LIST",e[e.WRITE_INLINE_SUGGESTIONS_LOADING=41]="WRITE_INLINE_SUGGESTIONS_LOADING",e[e.WRITE_CORRECTIONS_ONLY_SUPPORT=42]="WRITE_CORRECTIONS_ONLY_SUPPORT",e[e.WRITE_CORRECTIONS_ONLY=43]="WRITE_CORRECTIONS_ONLY",e[e.TRANSLATOR_RTF_SUPPORT=44]="TRANSLATOR_RTF_SUPPORT",e[e.TRANSLATOR_STYLE_VARIANTS=45]="TRANSLATOR_STYLE_VARIANTS",e[e.TRANSLATOR_STYLE_VARIANT=46]="TRANSLATOR_STYLE_VARIANT",e[e.WRITE_TEXT_UNIT_ALTERNATIVES_SUPPORT=47]="WRITE_TEXT_UNIT_ALTERNATIVES_SUPPORT",e[e.TRANSLATOR_TRANSLATION_MEMORY_LIST=48]="TRANSLATOR_TRANSLATION_MEMORY_LIST",e[e.TRANSLATOR_SELECTED_TRANSLATION_MEMORY=49]="TRANSLATOR_SELECTED_TRANSLATION_MEMORY"}(JM||(JM={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.TRANSLATOR=1]="TRANSLATOR",e[e.WRITE=2]="WRITE"}(zM||(zM={}));const ZM={$type:"deepl.pb.interactive_text_api.TextChangeOperation",encode:(e,t=new Fk)=>(void 0!==e.range&&aD.encode(e.range,t.uint32(10).fork()).join(),""!==e.text&&t.uint32(18).string(e.text),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.TextChangeOperation",range:void 0,text:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.range=aD.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.text=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:ZM.$type,range:IG(e.range)?aD.fromJSON(e.range):void 0,text:IG(e.text)?globalThis.String(e.text):""}),toJSON(e){const t={};return void 0!==e.range&&(t.range=aD.toJSON(e.range)),""!==e.text&&(t.text=e.text),t},create:e=>ZM.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.TextChangeOperation",range:void 0,text:""};return n.range=void 0!==e.range&&null!==e.range?aD.fromPartial(e.range):void 0,n.text=null!==(t=e.text)&&void 0!==t?t:"",n}};const eG={$type:"deepl.pb.interactive_text_api.CreateAnnotationOperation",encode:(e,t=new Fk)=>(void 0!==e.annotationId&&eD.encode(e.annotationId,t.uint32(10).fork()).join(),void 0!==e.range&&aD.encode(e.range,t.uint32(18).fork()).join(),void 0!==e.textUnitPayload&&LU.encode(e.textUnitPayload,t.uint32(26).fork()).join(),void 0!==e.requestWordAlternativesPayload&&iD.encode(e.requestWordAlternativesPayload,t.uint32(34).fork()).join(),void 0!==e.providedWordAlternativesPayload&&nD.encode(e.providedWordAlternativesPayload,t.uint32(42).fork()).join(),void 0!==e.selectWordAlternativePayload&&AU.encode(e.selectWordAlternativePayload,t.uint32(50).fork()).join(),void 0!==e.translatorGlossaryReplacementPayload&&BU.encode(e.translatorGlossaryReplacementPayload,t.uint32(58).fork()).join(),void 0!==e.requestTextUnitAlternativesPayload&&oD.encode(e.requestTextUnitAlternativesPayload,t.uint32(66).fork()).join(),void 0!==e.translatorProvidedTextUnitAlternativesPayload&&HU.encode(e.translatorProvidedTextUnitAlternativesPayload,t.uint32(74).fork()).join(),void 0!==e.selectTextUnitAlternativePayload&&SU.encode(e.selectTextUnitAlternativePayload,t.uint32(82).fork()).join(),void 0!==e.translatorRequestAutocompletionPayload&&jU.encode(e.translatorRequestAutocompletionPayload,t.uint32(90).fork()).join(),void 0!==e.translatorProvidedAutocompletionPayload&&WU.encode(e.translatorProvidedAutocompletionPayload,t.uint32(98).fork()).join(),void 0!==e.translatorSelectAutocompletionPayload&&qU.encode(e.translatorSelectAutocompletionPayload,t.uint32(106).fork()).join(),void 0!==e.translatorProvidedAutomaticTextUnitAlternativesPayload&&JU.encode(e.translatorProvidedAutomaticTextUnitAlternativesPayload,t.uint32(114).fork()).join(),void 0!==e.selectAutomaticTextUnitAlternativePayload&&yU.encode(e.selectAutomaticTextUnitAlternativePayload,t.uint32(122).fork()).join(),void 0!==e.writeDiffUnitPayload&&OD.encode(e.writeDiffUnitPayload,t.uint32(130).fork()).join(),void 0!==e.textFormattingPayload&&OU.encode(e.textFormattingPayload,t.uint32(138).fork()).join(),void 0!==e.writeProvidedTextUnitAlternativesPayload&&ND.encode(e.writeProvidedTextUnitAlternativesPayload,t.uint32(146).fork()).join(),void 0!==e.writeProvidedAutomaticTextUnitAlternativesPayload&&RD.encode(e.writeProvidedAutomaticTextUnitAlternativesPayload,t.uint32(154).fork()).join(),void 0!==e.translatorRequestClarifyPayload&&zU.encode(e.translatorRequestClarifyPayload,t.uint32(162).fork()).join(),void 0!==e.translatorProvidedClarifyQuestionPayload&&KU.encode(e.translatorProvidedClarifyQuestionPayload,t.uint32(170).fork()).join(),void 0!==e.translatorProvidedClarifyHighlightPayload&&XU.encode(e.translatorProvidedClarifyHighlightPayload,t.uint32(178).fork()).join(),void 0!==e.translatorSelectClarifyAnswerPayload&&QU.encode(e.translatorSelectClarifyAnswerPayload,t.uint32(186).fork()).join(),void 0!==e.writeRequestChangeStyleAlternativesAnnotationPayload&&nU.encode(e.writeRequestChangeStyleAlternativesAnnotationPayload,t.uint32(194).fork()).join(),void 0!==e.writeProvidedChangeStyleAlternativesAnnotationPayload&&oU.encode(e.writeProvidedChangeStyleAlternativesAnnotationPayload,t.uint32(202).fork()).join(),void 0!==e.writeSelectChangeStyleAlternativeAnnotationPayload&&iU.encode(e.writeSelectChangeStyleAlternativeAnnotationPayload,t.uint32(210).fork()).join(),void 0!==e.translatorClarifyStatusPayload&&YU.encode(e.translatorClarifyStatusPayload,t.uint32(218).fork()).join(),void 0!==e.customRuleAnnotationPayload&&TD.encode(e.customRuleAnnotationPayload,t.uint32(226).fork()).join(),void 0!==e.writeRequestTemplateAdaptationAnnotationPayload&&cU.encode(e.writeRequestTemplateAdaptationAnnotationPayload,t.uint32(234).fork()).join(),void 0!==e.writeProvidedTemplateAdaptationAnnotationPayload&&dU.encode(e.writeProvidedTemplateAdaptationAnnotationPayload,t.uint32(242).fork()).join(),void 0!==e.providedWordAlternativeHighlightPayload&&Zk.encode(e.providedWordAlternativeHighlightPayload,t.uint32(250).fork()).join(),void 0!==e.writeInlineSuggestionAnnotationPayload&&gU.encode(e.writeInlineSuggestionAnnotationPayload,t.uint32(258).fork()).join(),void 0!==e.writeInlineSuggestionSpanAnnotationPayload&&hU.encode(e.writeInlineSuggestionSpanAnnotationPayload,t.uint32(266).fork()).join(),void 0!==e.writeActOnInlineSuggestionAnnotationPayload&&fU.encode(e.writeActOnInlineSuggestionAnnotationPayload,t.uint32(274).fork()).join(),void 0!==e.writeInlineSuggestionsTextUnitStateAnnotationPayload&&_U.encode(e.writeInlineSuggestionsTextUnitStateAnnotationPayload,t.uint32(282).fork()).join(),void 0!==e.writeRequestInlineSuggestionImprovedTextAnnotationPayload&&mU.encode(e.writeRequestInlineSuggestionImprovedTextAnnotationPayload,t.uint32(290).fork()).join(),void 0!==e.writeProvidedInlineSuggestionImprovedTextAnnotationPayload&&vU.encode(e.writeProvidedInlineSuggestionImprovedTextAnnotationPayload,t.uint32(298).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.CreateAnnotationOperation",annotationId:void 0,range:void 0,textUnitPayload:void 0,requestWordAlternativesPayload:void 0,providedWordAlternativesPayload:void 0,selectWordAlternativePayload:void 0,translatorGlossaryReplacementPayload:void 0,requestTextUnitAlternativesPayload:void 0,translatorProvidedTextUnitAlternativesPayload:void 0,selectTextUnitAlternativePayload:void 0,translatorRequestAutocompletionPayload:void 0,translatorProvidedAutocompletionPayload:void 0,translatorSelectAutocompletionPayload:void 0,translatorProvidedAutomaticTextUnitAlternativesPayload:void 0,selectAutomaticTextUnitAlternativePayload:void 0,writeDiffUnitPayload:void 0,textFormattingPayload:void 0,writeProvidedTextUnitAlternativesPayload:void 0,writeProvidedAutomaticTextUnitAlternativesPayload:void 0,translatorRequestClarifyPayload:void 0,translatorProvidedClarifyQuestionPayload:void 0,translatorProvidedClarifyHighlightPayload:void 0,translatorSelectClarifyAnswerPayload:void 0,writeRequestChangeStyleAlternativesAnnotationPayload:void 0,writeProvidedChangeStyleAlternativesAnnotationPayload:void 0,writeSelectChangeStyleAlternativeAnnotationPayload:void 0,translatorClarifyStatusPayload:void 0,customRuleAnnotationPayload:void 0,writeRequestTemplateAdaptationAnnotationPayload:void 0,writeProvidedTemplateAdaptationAnnotationPayload:void 0,providedWordAlternativeHighlightPayload:void 0,writeInlineSuggestionAnnotationPayload:void 0,writeInlineSuggestionSpanAnnotationPayload:void 0,writeActOnInlineSuggestionAnnotationPayload:void 0,writeInlineSuggestionsTextUnitStateAnnotationPayload:void 0,writeRequestInlineSuggestionImprovedTextAnnotationPayload:void 0,writeProvidedInlineSuggestionImprovedTextAnnotationPayload:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.annotationId=eD.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.range=aD.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.textUnitPayload=LU.decode(n,n.uint32());continue;case 4:if(34!==e)break;o.requestWordAlternativesPayload=iD.decode(n,n.uint32());continue;case 5:if(42!==e)break;o.providedWordAlternativesPayload=nD.decode(n,n.uint32());continue;case 6:if(50!==e)break;o.selectWordAlternativePayload=AU.decode(n,n.uint32());continue;case 7:if(58!==e)break;o.translatorGlossaryReplacementPayload=BU.decode(n,n.uint32());continue;case 8:if(66!==e)break;o.requestTextUnitAlternativesPayload=oD.decode(n,n.uint32());continue;case 9:if(74!==e)break;o.translatorProvidedTextUnitAlternativesPayload=HU.decode(n,n.uint32());continue;case 10:if(82!==e)break;o.selectTextUnitAlternativePayload=SU.decode(n,n.uint32());continue;case 11:if(90!==e)break;o.translatorRequestAutocompletionPayload=jU.decode(n,n.uint32());continue;case 12:if(98!==e)break;o.translatorProvidedAutocompletionPayload=WU.decode(n,n.uint32());continue;case 13:if(106!==e)break;o.translatorSelectAutocompletionPayload=qU.decode(n,n.uint32());continue;case 14:if(114!==e)break;o.translatorProvidedAutomaticTextUnitAlternativesPayload=JU.decode(n,n.uint32());continue;case 15:if(122!==e)break;o.selectAutomaticTextUnitAlternativePayload=yU.decode(n,n.uint32());continue;case 16:if(130!==e)break;o.writeDiffUnitPayload=OD.decode(n,n.uint32());continue;case 17:if(138!==e)break;o.textFormattingPayload=OU.decode(n,n.uint32());continue;case 18:if(146!==e)break;o.writeProvidedTextUnitAlternativesPayload=ND.decode(n,n.uint32());continue;case 19:if(154!==e)break;o.writeProvidedAutomaticTextUnitAlternativesPayload=RD.decode(n,n.uint32());continue;case 20:if(162!==e)break;o.translatorRequestClarifyPayload=zU.decode(n,n.uint32());continue;case 21:if(170!==e)break;o.translatorProvidedClarifyQuestionPayload=KU.decode(n,n.uint32());continue;case 22:if(178!==e)break;o.translatorProvidedClarifyHighlightPayload=XU.decode(n,n.uint32());continue;case 23:if(186!==e)break;o.translatorSelectClarifyAnswerPayload=QU.decode(n,n.uint32());continue;case 24:if(194!==e)break;o.writeRequestChangeStyleAlternativesAnnotationPayload=nU.decode(n,n.uint32());continue;case 25:if(202!==e)break;o.writeProvidedChangeStyleAlternativesAnnotationPayload=oU.decode(n,n.uint32());continue;case 26:if(210!==e)break;o.writeSelectChangeStyleAlternativeAnnotationPayload=iU.decode(n,n.uint32());continue;case 27:if(218!==e)break;o.translatorClarifyStatusPayload=YU.decode(n,n.uint32());continue;case 28:if(226!==e)break;o.customRuleAnnotationPayload=TD.decode(n,n.uint32());continue;case 29:if(234!==e)break;o.writeRequestTemplateAdaptationAnnotationPayload=cU.decode(n,n.uint32());continue;case 30:if(242!==e)break;o.writeProvidedTemplateAdaptationAnnotationPayload=dU.decode(n,n.uint32());continue;case 31:if(250!==e)break;o.providedWordAlternativeHighlightPayload=Zk.decode(n,n.uint32());continue;case 32:if(258!==e)break;o.writeInlineSuggestionAnnotationPayload=gU.decode(n,n.uint32());continue;case 33:if(266!==e)break;o.writeInlineSuggestionSpanAnnotationPayload=hU.decode(n,n.uint32());continue;case 34:if(274!==e)break;o.writeActOnInlineSuggestionAnnotationPayload=fU.decode(n,n.uint32());continue;case 35:if(282!==e)break;o.writeInlineSuggestionsTextUnitStateAnnotationPayload=_U.decode(n,n.uint32());continue;case 36:if(290!==e)break;o.writeRequestInlineSuggestionImprovedTextAnnotationPayload=mU.decode(n,n.uint32());continue;case 37:if(298!==e)break;o.writeProvidedInlineSuggestionImprovedTextAnnotationPayload=vU.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:eG.$type,annotationId:IG(e.annotationId)?eD.fromJSON(e.annotationId):void 0,range:IG(e.range)?aD.fromJSON(e.range):void 0,textUnitPayload:IG(e.textUnitPayload)?LU.fromJSON(e.textUnitPayload):void 0,requestWordAlternativesPayload:IG(e.requestWordAlternativesPayload)?iD.fromJSON(e.requestWordAlternativesPayload):void 0,providedWordAlternativesPayload:IG(e.providedWordAlternativesPayload)?nD.fromJSON(e.providedWordAlternativesPayload):void 0,selectWordAlternativePayload:IG(e.selectWordAlternativePayload)?AU.fromJSON(e.selectWordAlternativePayload):void 0,translatorGlossaryReplacementPayload:IG(e.translatorGlossaryReplacementPayload)?BU.fromJSON(e.translatorGlossaryReplacementPayload):void 0,requestTextUnitAlternativesPayload:IG(e.requestTextUnitAlternativesPayload)?oD.fromJSON(e.requestTextUnitAlternativesPayload):void 0,translatorProvidedTextUnitAlternativesPayload:IG(e.translatorProvidedTextUnitAlternativesPayload)?HU.fromJSON(e.translatorProvidedTextUnitAlternativesPayload):void 0,selectTextUnitAlternativePayload:IG(e.selectTextUnitAlternativePayload)?SU.fromJSON(e.selectTextUnitAlternativePayload):void 0,translatorRequestAutocompletionPayload:IG(e.translatorRequestAutocompletionPayload)?jU.fromJSON(e.translatorRequestAutocompletionPayload):void 0,translatorProvidedAutocompletionPayload:IG(e.translatorProvidedAutocompletionPayload)?WU.fromJSON(e.translatorProvidedAutocompletionPayload):void 0,translatorSelectAutocompletionPayload:IG(e.translatorSelectAutocompletionPayload)?qU.fromJSON(e.translatorSelectAutocompletionPayload):void 0,translatorProvidedAutomaticTextUnitAlternativesPayload:IG(e.translatorProvidedAutomaticTextUnitAlternativesPayload)?JU.fromJSON(e.translatorProvidedAutomaticTextUnitAlternativesPayload):void 0,selectAutomaticTextUnitAlternativePayload:IG(e.selectAutomaticTextUnitAlternativePayload)?yU.fromJSON(e.selectAutomaticTextUnitAlternativePayload):void 0,writeDiffUnitPayload:IG(e.writeDiffUnitPayload)?OD.fromJSON(e.writeDiffUnitPayload):void 0,textFormattingPayload:IG(e.textFormattingPayload)?OU.fromJSON(e.textFormattingPayload):void 0,writeProvidedTextUnitAlternativesPayload:IG(e.writeProvidedTextUnitAlternativesPayload)?ND.fromJSON(e.writeProvidedTextUnitAlternativesPayload):void 0,writeProvidedAutomaticTextUnitAlternativesPayload:IG(e.writeProvidedAutomaticTextUnitAlternativesPayload)?RD.fromJSON(e.writeProvidedAutomaticTextUnitAlternativesPayload):void 0,translatorRequestClarifyPayload:IG(e.translatorRequestClarifyPayload)?zU.fromJSON(e.translatorRequestClarifyPayload):void 0,translatorProvidedClarifyQuestionPayload:IG(e.translatorProvidedClarifyQuestionPayload)?KU.fromJSON(e.translatorProvidedClarifyQuestionPayload):void 0,translatorProvidedClarifyHighlightPayload:IG(e.translatorProvidedClarifyHighlightPayload)?XU.fromJSON(e.translatorProvidedClarifyHighlightPayload):void 0,translatorSelectClarifyAnswerPayload:IG(e.translatorSelectClarifyAnswerPayload)?QU.fromJSON(e.translatorSelectClarifyAnswerPayload):void 0,writeRequestChangeStyleAlternativesAnnotationPayload:IG(e.writeRequestChangeStyleAlternativesAnnotationPayload)?nU.fromJSON(e.writeRequestChangeStyleAlternativesAnnotationPayload):void 0,writeProvidedChangeStyleAlternativesAnnotationPayload:IG(e.writeProvidedChangeStyleAlternativesAnnotationPayload)?oU.fromJSON(e.writeProvidedChangeStyleAlternativesAnnotationPayload):void 0,writeSelectChangeStyleAlternativeAnnotationPayload:IG(e.writeSelectChangeStyleAlternativeAnnotationPayload)?iU.fromJSON(e.writeSelectChangeStyleAlternativeAnnotationPayload):void 0,translatorClarifyStatusPayload:IG(e.translatorClarifyStatusPayload)?YU.fromJSON(e.translatorClarifyStatusPayload):void 0,customRuleAnnotationPayload:IG(e.customRuleAnnotationPayload)?TD.fromJSON(e.customRuleAnnotationPayload):void 0,writeRequestTemplateAdaptationAnnotationPayload:IG(e.writeRequestTemplateAdaptationAnnotationPayload)?cU.fromJSON(e.writeRequestTemplateAdaptationAnnotationPayload):void 0,writeProvidedTemplateAdaptationAnnotationPayload:IG(e.writeProvidedTemplateAdaptationAnnotationPayload)?dU.fromJSON(e.writeProvidedTemplateAdaptationAnnotationPayload):void 0,providedWordAlternativeHighlightPayload:IG(e.providedWordAlternativeHighlightPayload)?Zk.fromJSON(e.providedWordAlternativeHighlightPayload):void 0,writeInlineSuggestionAnnotationPayload:IG(e.writeInlineSuggestionAnnotationPayload)?gU.fromJSON(e.writeInlineSuggestionAnnotationPayload):void 0,writeInlineSuggestionSpanAnnotationPayload:IG(e.writeInlineSuggestionSpanAnnotationPayload)?hU.fromJSON(e.writeInlineSuggestionSpanAnnotationPayload):void 0,writeActOnInlineSuggestionAnnotationPayload:IG(e.writeActOnInlineSuggestionAnnotationPayload)?fU.fromJSON(e.writeActOnInlineSuggestionAnnotationPayload):void 0,writeInlineSuggestionsTextUnitStateAnnotationPayload:IG(e.writeInlineSuggestionsTextUnitStateAnnotationPayload)?_U.fromJSON(e.writeInlineSuggestionsTextUnitStateAnnotationPayload):void 0,writeRequestInlineSuggestionImprovedTextAnnotationPayload:IG(e.writeRequestInlineSuggestionImprovedTextAnnotationPayload)?mU.fromJSON(e.writeRequestInlineSuggestionImprovedTextAnnotationPayload):void 0,writeProvidedInlineSuggestionImprovedTextAnnotationPayload:IG(e.writeProvidedInlineSuggestionImprovedTextAnnotationPayload)?vU.fromJSON(e.writeProvidedInlineSuggestionImprovedTextAnnotationPayload):void 0}),toJSON(e){const t={};return void 0!==e.annotationId&&(t.annotationId=eD.toJSON(e.annotationId)),void 0!==e.range&&(t.range=aD.toJSON(e.range)),void 0!==e.textUnitPayload&&(t.textUnitPayload=LU.toJSON(e.textUnitPayload)),void 0!==e.requestWordAlternativesPayload&&(t.requestWordAlternativesPayload=iD.toJSON(e.requestWordAlternativesPayload)),void 0!==e.providedWordAlternativesPayload&&(t.providedWordAlternativesPayload=nD.toJSON(e.providedWordAlternativesPayload)),void 0!==e.selectWordAlternativePayload&&(t.selectWordAlternativePayload=AU.toJSON(e.selectWordAlternativePayload)),void 0!==e.translatorGlossaryReplacementPayload&&(t.translatorGlossaryReplacementPayload=BU.toJSON(e.translatorGlossaryReplacementPayload)),void 0!==e.requestTextUnitAlternativesPayload&&(t.requestTextUnitAlternativesPayload=oD.toJSON(e.requestTextUnitAlternativesPayload)),void 0!==e.translatorProvidedTextUnitAlternativesPayload&&(t.translatorProvidedTextUnitAlternativesPayload=HU.toJSON(e.translatorProvidedTextUnitAlternativesPayload)),void 0!==e.selectTextUnitAlternativePayload&&(t.selectTextUnitAlternativePayload=SU.toJSON(e.selectTextUnitAlternativePayload)),void 0!==e.translatorRequestAutocompletionPayload&&(t.translatorRequestAutocompletionPayload=jU.toJSON(e.translatorRequestAutocompletionPayload)),void 0!==e.translatorProvidedAutocompletionPayload&&(t.translatorProvidedAutocompletionPayload=WU.toJSON(e.translatorProvidedAutocompletionPayload)),void 0!==e.translatorSelectAutocompletionPayload&&(t.translatorSelectAutocompletionPayload=qU.toJSON(e.translatorSelectAutocompletionPayload)),void 0!==e.translatorProvidedAutomaticTextUnitAlternativesPayload&&(t.translatorProvidedAutomaticTextUnitAlternativesPayload=JU.toJSON(e.translatorProvidedAutomaticTextUnitAlternativesPayload)),void 0!==e.selectAutomaticTextUnitAlternativePayload&&(t.selectAutomaticTextUnitAlternativePayload=yU.toJSON(e.selectAutomaticTextUnitAlternativePayload)),void 0!==e.writeDiffUnitPayload&&(t.writeDiffUnitPayload=OD.toJSON(e.writeDiffUnitPayload)),void 0!==e.textFormattingPayload&&(t.textFormattingPayload=OU.toJSON(e.textFormattingPayload)),void 0!==e.writeProvidedTextUnitAlternativesPayload&&(t.writeProvidedTextUnitAlternativesPayload=ND.toJSON(e.writeProvidedTextUnitAlternativesPayload)),void 0!==e.writeProvidedAutomaticTextUnitAlternativesPayload&&(t.writeProvidedAutomaticTextUnitAlternativesPayload=RD.toJSON(e.writeProvidedAutomaticTextUnitAlternativesPayload)),void 0!==e.translatorRequestClarifyPayload&&(t.translatorRequestClarifyPayload=zU.toJSON(e.translatorRequestClarifyPayload)),void 0!==e.translatorProvidedClarifyQuestionPayload&&(t.translatorProvidedClarifyQuestionPayload=KU.toJSON(e.translatorProvidedClarifyQuestionPayload)),void 0!==e.translatorProvidedClarifyHighlightPayload&&(t.translatorProvidedClarifyHighlightPayload=XU.toJSON(e.translatorProvidedClarifyHighlightPayload)),void 0!==e.translatorSelectClarifyAnswerPayload&&(t.translatorSelectClarifyAnswerPayload=QU.toJSON(e.translatorSelectClarifyAnswerPayload)),void 0!==e.writeRequestChangeStyleAlternativesAnnotationPayload&&(t.writeRequestChangeStyleAlternativesAnnotationPayload=nU.toJSON(e.writeRequestChangeStyleAlternativesAnnotationPayload)),void 0!==e.writeProvidedChangeStyleAlternativesAnnotationPayload&&(t.writeProvidedChangeStyleAlternativesAnnotationPayload=oU.toJSON(e.writeProvidedChangeStyleAlternativesAnnotationPayload)),void 0!==e.writeSelectChangeStyleAlternativeAnnotationPayload&&(t.writeSelectChangeStyleAlternativeAnnotationPayload=iU.toJSON(e.writeSelectChangeStyleAlternativeAnnotationPayload)),void 0!==e.translatorClarifyStatusPayload&&(t.translatorClarifyStatusPayload=YU.toJSON(e.translatorClarifyStatusPayload)),void 0!==e.customRuleAnnotationPayload&&(t.customRuleAnnotationPayload=TD.toJSON(e.customRuleAnnotationPayload)),void 0!==e.writeRequestTemplateAdaptationAnnotationPayload&&(t.writeRequestTemplateAdaptationAnnotationPayload=cU.toJSON(e.writeRequestTemplateAdaptationAnnotationPayload)),void 0!==e.writeProvidedTemplateAdaptationAnnotationPayload&&(t.writeProvidedTemplateAdaptationAnnotationPayload=dU.toJSON(e.writeProvidedTemplateAdaptationAnnotationPayload)),void 0!==e.providedWordAlternativeHighlightPayload&&(t.providedWordAlternativeHighlightPayload=Zk.toJSON(e.providedWordAlternativeHighlightPayload)),void 0!==e.writeInlineSuggestionAnnotationPayload&&(t.writeInlineSuggestionAnnotationPayload=gU.toJSON(e.writeInlineSuggestionAnnotationPayload)),void 0!==e.writeInlineSuggestionSpanAnnotationPayload&&(t.writeInlineSuggestionSpanAnnotationPayload=hU.toJSON(e.writeInlineSuggestionSpanAnnotationPayload)),void 0!==e.writeActOnInlineSuggestionAnnotationPayload&&(t.writeActOnInlineSuggestionAnnotationPayload=fU.toJSON(e.writeActOnInlineSuggestionAnnotationPayload)),void 0!==e.writeInlineSuggestionsTextUnitStateAnnotationPayload&&(t.writeInlineSuggestionsTextUnitStateAnnotationPayload=_U.toJSON(e.writeInlineSuggestionsTextUnitStateAnnotationPayload)),void 0!==e.writeRequestInlineSuggestionImprovedTextAnnotationPayload&&(t.writeRequestInlineSuggestionImprovedTextAnnotationPayload=mU.toJSON(e.writeRequestInlineSuggestionImprovedTextAnnotationPayload)),void 0!==e.writeProvidedInlineSuggestionImprovedTextAnnotationPayload&&(t.writeProvidedInlineSuggestionImprovedTextAnnotationPayload=vU.toJSON(e.writeProvidedInlineSuggestionImprovedTextAnnotationPayload)),t},create:e=>eG.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.CreateAnnotationOperation",annotationId:void 0,range:void 0,textUnitPayload:void 0,requestWordAlternativesPayload:void 0,providedWordAlternativesPayload:void 0,selectWordAlternativePayload:void 0,translatorGlossaryReplacementPayload:void 0,requestTextUnitAlternativesPayload:void 0,translatorProvidedTextUnitAlternativesPayload:void 0,selectTextUnitAlternativePayload:void 0,translatorRequestAutocompletionPayload:void 0,translatorProvidedAutocompletionPayload:void 0,translatorSelectAutocompletionPayload:void 0,translatorProvidedAutomaticTextUnitAlternativesPayload:void 0,selectAutomaticTextUnitAlternativePayload:void 0,writeDiffUnitPayload:void 0,textFormattingPayload:void 0,writeProvidedTextUnitAlternativesPayload:void 0,writeProvidedAutomaticTextUnitAlternativesPayload:void 0,translatorRequestClarifyPayload:void 0,translatorProvidedClarifyQuestionPayload:void 0,translatorProvidedClarifyHighlightPayload:void 0,translatorSelectClarifyAnswerPayload:void 0,writeRequestChangeStyleAlternativesAnnotationPayload:void 0,writeProvidedChangeStyleAlternativesAnnotationPayload:void 0,writeSelectChangeStyleAlternativeAnnotationPayload:void 0,translatorClarifyStatusPayload:void 0,customRuleAnnotationPayload:void 0,writeRequestTemplateAdaptationAnnotationPayload:void 0,writeProvidedTemplateAdaptationAnnotationPayload:void 0,providedWordAlternativeHighlightPayload:void 0,writeInlineSuggestionAnnotationPayload:void 0,writeInlineSuggestionSpanAnnotationPayload:void 0,writeActOnInlineSuggestionAnnotationPayload:void 0,writeInlineSuggestionsTextUnitStateAnnotationPayload:void 0,writeRequestInlineSuggestionImprovedTextAnnotationPayload:void 0,writeProvidedInlineSuggestionImprovedTextAnnotationPayload:void 0};return t.annotationId=void 0!==e.annotationId&&null!==e.annotationId?eD.fromPartial(e.annotationId):void 0,t.range=void 0!==e.range&&null!==e.range?aD.fromPartial(e.range):void 0,t.textUnitPayload=void 0!==e.textUnitPayload&&null!==e.textUnitPayload?LU.fromPartial(e.textUnitPayload):void 0,t.requestWordAlternativesPayload=void 0!==e.requestWordAlternativesPayload&&null!==e.requestWordAlternativesPayload?iD.fromPartial(e.requestWordAlternativesPayload):void 0,t.providedWordAlternativesPayload=void 0!==e.providedWordAlternativesPayload&&null!==e.providedWordAlternativesPayload?nD.fromPartial(e.providedWordAlternativesPayload):void 0,t.selectWordAlternativePayload=void 0!==e.selectWordAlternativePayload&&null!==e.selectWordAlternativePayload?AU.fromPartial(e.selectWordAlternativePayload):void 0,t.translatorGlossaryReplacementPayload=void 0!==e.translatorGlossaryReplacementPayload&&null!==e.translatorGlossaryReplacementPayload?BU.fromPartial(e.translatorGlossaryReplacementPayload):void 0,t.requestTextUnitAlternativesPayload=void 0!==e.requestTextUnitAlternativesPayload&&null!==e.requestTextUnitAlternativesPayload?oD.fromPartial(e.requestTextUnitAlternativesPayload):void 0,t.translatorProvidedTextUnitAlternativesPayload=void 0!==e.translatorProvidedTextUnitAlternativesPayload&&null!==e.translatorProvidedTextUnitAlternativesPayload?HU.fromPartial(e.translatorProvidedTextUnitAlternativesPayload):void 0,t.selectTextUnitAlternativePayload=void 0!==e.selectTextUnitAlternativePayload&&null!==e.selectTextUnitAlternativePayload?SU.fromPartial(e.selectTextUnitAlternativePayload):void 0,t.translatorRequestAutocompletionPayload=void 0!==e.translatorRequestAutocompletionPayload&&null!==e.translatorRequestAutocompletionPayload?jU.fromPartial(e.translatorRequestAutocompletionPayload):void 0,t.translatorProvidedAutocompletionPayload=void 0!==e.translatorProvidedAutocompletionPayload&&null!==e.translatorProvidedAutocompletionPayload?WU.fromPartial(e.translatorProvidedAutocompletionPayload):void 0,t.translatorSelectAutocompletionPayload=void 0!==e.translatorSelectAutocompletionPayload&&null!==e.translatorSelectAutocompletionPayload?qU.fromPartial(e.translatorSelectAutocompletionPayload):void 0,t.translatorProvidedAutomaticTextUnitAlternativesPayload=void 0!==e.translatorProvidedAutomaticTextUnitAlternativesPayload&&null!==e.translatorProvidedAutomaticTextUnitAlternativesPayload?JU.fromPartial(e.translatorProvidedAutomaticTextUnitAlternativesPayload):void 0,t.selectAutomaticTextUnitAlternativePayload=void 0!==e.selectAutomaticTextUnitAlternativePayload&&null!==e.selectAutomaticTextUnitAlternativePayload?yU.fromPartial(e.selectAutomaticTextUnitAlternativePayload):void 0,t.writeDiffUnitPayload=void 0!==e.writeDiffUnitPayload&&null!==e.writeDiffUnitPayload?OD.fromPartial(e.writeDiffUnitPayload):void 0,t.textFormattingPayload=void 0!==e.textFormattingPayload&&null!==e.textFormattingPayload?OU.fromPartial(e.textFormattingPayload):void 0,t.writeProvidedTextUnitAlternativesPayload=void 0!==e.writeProvidedTextUnitAlternativesPayload&&null!==e.writeProvidedTextUnitAlternativesPayload?ND.fromPartial(e.writeProvidedTextUnitAlternativesPayload):void 0,t.writeProvidedAutomaticTextUnitAlternativesPayload=void 0!==e.writeProvidedAutomaticTextUnitAlternativesPayload&&null!==e.writeProvidedAutomaticTextUnitAlternativesPayload?RD.fromPartial(e.writeProvidedAutomaticTextUnitAlternativesPayload):void 0,t.translatorRequestClarifyPayload=void 0!==e.translatorRequestClarifyPayload&&null!==e.translatorRequestClarifyPayload?zU.fromPartial(e.translatorRequestClarifyPayload):void 0,t.translatorProvidedClarifyQuestionPayload=void 0!==e.translatorProvidedClarifyQuestionPayload&&null!==e.translatorProvidedClarifyQuestionPayload?KU.fromPartial(e.translatorProvidedClarifyQuestionPayload):void 0,t.translatorProvidedClarifyHighlightPayload=void 0!==e.translatorProvidedClarifyHighlightPayload&&null!==e.translatorProvidedClarifyHighlightPayload?XU.fromPartial(e.translatorProvidedClarifyHighlightPayload):void 0,t.translatorSelectClarifyAnswerPayload=void 0!==e.translatorSelectClarifyAnswerPayload&&null!==e.translatorSelectClarifyAnswerPayload?QU.fromPartial(e.translatorSelectClarifyAnswerPayload):void 0,t.writeRequestChangeStyleAlternativesAnnotationPayload=void 0!==e.writeRequestChangeStyleAlternativesAnnotationPayload&&null!==e.writeRequestChangeStyleAlternativesAnnotationPayload?nU.fromPartial(e.writeRequestChangeStyleAlternativesAnnotationPayload):void 0,t.writeProvidedChangeStyleAlternativesAnnotationPayload=void 0!==e.writeProvidedChangeStyleAlternativesAnnotationPayload&&null!==e.writeProvidedChangeStyleAlternativesAnnotationPayload?oU.fromPartial(e.writeProvidedChangeStyleAlternativesAnnotationPayload):void 0,t.writeSelectChangeStyleAlternativeAnnotationPayload=void 0!==e.writeSelectChangeStyleAlternativeAnnotationPayload&&null!==e.writeSelectChangeStyleAlternativeAnnotationPayload?iU.fromPartial(e.writeSelectChangeStyleAlternativeAnnotationPayload):void 0,t.translatorClarifyStatusPayload=void 0!==e.translatorClarifyStatusPayload&&null!==e.translatorClarifyStatusPayload?YU.fromPartial(e.translatorClarifyStatusPayload):void 0,t.customRuleAnnotationPayload=void 0!==e.customRuleAnnotationPayload&&null!==e.customRuleAnnotationPayload?TD.fromPartial(e.customRuleAnnotationPayload):void 0,t.writeRequestTemplateAdaptationAnnotationPayload=void 0!==e.writeRequestTemplateAdaptationAnnotationPayload&&null!==e.writeRequestTemplateAdaptationAnnotationPayload?cU.fromPartial(e.writeRequestTemplateAdaptationAnnotationPayload):void 0,t.writeProvidedTemplateAdaptationAnnotationPayload=void 0!==e.writeProvidedTemplateAdaptationAnnotationPayload&&null!==e.writeProvidedTemplateAdaptationAnnotationPayload?dU.fromPartial(e.writeProvidedTemplateAdaptationAnnotationPayload):void 0,t.providedWordAlternativeHighlightPayload=void 0!==e.providedWordAlternativeHighlightPayload&&null!==e.providedWordAlternativeHighlightPayload?Zk.fromPartial(e.providedWordAlternativeHighlightPayload):void 0,t.writeInlineSuggestionAnnotationPayload=void 0!==e.writeInlineSuggestionAnnotationPayload&&null!==e.writeInlineSuggestionAnnotationPayload?gU.fromPartial(e.writeInlineSuggestionAnnotationPayload):void 0,t.writeInlineSuggestionSpanAnnotationPayload=void 0!==e.writeInlineSuggestionSpanAnnotationPayload&&null!==e.writeInlineSuggestionSpanAnnotationPayload?hU.fromPartial(e.writeInlineSuggestionSpanAnnotationPayload):void 0,t.writeActOnInlineSuggestionAnnotationPayload=void 0!==e.writeActOnInlineSuggestionAnnotationPayload&&null!==e.writeActOnInlineSuggestionAnnotationPayload?fU.fromPartial(e.writeActOnInlineSuggestionAnnotationPayload):void 0,t.writeInlineSuggestionsTextUnitStateAnnotationPayload=void 0!==e.writeInlineSuggestionsTextUnitStateAnnotationPayload&&null!==e.writeInlineSuggestionsTextUnitStateAnnotationPayload?_U.fromPartial(e.writeInlineSuggestionsTextUnitStateAnnotationPayload):void 0,t.writeRequestInlineSuggestionImprovedTextAnnotationPayload=void 0!==e.writeRequestInlineSuggestionImprovedTextAnnotationPayload&&null!==e.writeRequestInlineSuggestionImprovedTextAnnotationPayload?mU.fromPartial(e.writeRequestInlineSuggestionImprovedTextAnnotationPayload):void 0,t.writeProvidedInlineSuggestionImprovedTextAnnotationPayload=void 0!==e.writeProvidedInlineSuggestionImprovedTextAnnotationPayload&&null!==e.writeProvidedInlineSuggestionImprovedTextAnnotationPayload?vU.fromPartial(e.writeProvidedInlineSuggestionImprovedTextAnnotationPayload):void 0,t}};const tG={$type:"deepl.pb.interactive_text_api.RemoveAnnotationOperation",encode:(e,t=new Fk)=>(void 0!==e.annotationId&&eD.encode(e.annotationId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.RemoveAnnotationOperation",annotationId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.annotationId=eD.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:tG.$type,annotationId:IG(e.annotationId)?eD.fromJSON(e.annotationId):void 0}),toJSON(e){const t={};return void 0!==e.annotationId&&(t.annotationId=eD.toJSON(e.annotationId)),t},create:e=>tG.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.RemoveAnnotationOperation",annotationId:void 0};return t.annotationId=void 0!==e.annotationId&&null!==e.annotationId?eD.fromPartial(e.annotationId):void 0,t}};const nG={$type:"deepl.pb.interactive_text_api.SetPropertyOperation",encode:(e,t=new Fk)=>(0!==e.propertyName&&t.uint32(8).int32(e.propertyName),void 0!==e.translatorSourceLanguagesValue&&ZU.encode(e.translatorSourceLanguagesValue,t.uint32(18).fork()).join(),void 0!==e.translatorTargetLanguagesValue&&eM.encode(e.translatorTargetLanguagesValue,t.uint32(26).fork()).join(),void 0!==e.translatorRequestedSourceLanguageValue&&tM.encode(e.translatorRequestedSourceLanguageValue,t.uint32(34).fork()).join(),void 0!==e.translatorRequestedTargetLanguageValue&&rM.encode(e.translatorRequestedTargetLanguageValue,t.uint32(42).fork()).join(),void 0!==e.translatorFormalityModesValue&&gM.encode(e.translatorFormalityModesValue,t.uint32(58).fork()).join(),void 0!==e.translatorFormalityModeValue&&hM.encode(e.translatorFormalityModeValue,t.uint32(66).fork()).join(),void 0!==e.translatorGlossarySupportValue&&cM.encode(e.translatorGlossarySupportValue,t.uint32(74).fork()).join(),void 0!==e.translatorGlossaryListValue&&PM.encode(e.translatorGlossaryListValue,t.uint32(82).fork()).join(),void 0!==e.translatorTextDirectionValue&&mM.encode(e.translatorTextDirectionValue,t.uint32(98).fork()).join(),void 0!==e.translatorCalculatedSourceLanguageValue&&nM.encode(e.translatorCalculatedSourceLanguageValue,t.uint32(106).fork()).join(),void 0!==e.translatorMaximumTextLengthValue&&vM.encode(e.translatorMaximumTextLengthValue,t.uint32(114).fork()).join(),void 0!==e.translatorLanguageModelsValue&&fM.encode(e.translatorLanguageModelsValue,t.uint32(122).fork()).join(),void 0!==e.translatorLanguageModelValue&&_M.encode(e.translatorLanguageModelValue,t.uint32(130).fork()).join(),void 0!==e.translatorGlossaryIdValue&&iM.encode(e.translatorGlossaryIdValue,t.uint32(138).fork()).join(),void 0!==e.translatorCalculatedTargetLanguageValue&&oM.encode(e.translatorCalculatedTargetLanguageValue,t.uint32(146).fork()).join(),void 0!==e.translatorUnsupportedSourceLanguageValue&&TM.encode(e.translatorUnsupportedSourceLanguageValue,t.uint32(154).fork()).join(),void 0!==e.writeLanguagesValue&&LD.encode(e.writeLanguagesValue,t.uint32(162).fork()).join(),void 0!==e.writeRequestedLanguageValue&&CD.encode(e.writeRequestedLanguageValue,t.uint32(170).fork()).join(),void 0!==e.writeCalculatedLanguageValue&&xD.encode(e.writeCalculatedLanguageValue,t.uint32(178).fork()).join(),void 0!==e.writeStyleVariantsValue&&VD.encode(e.writeStyleVariantsValue,t.uint32(186).fork()).join(),void 0!==e.writeStyleVariantValue&&$D.encode(e.writeStyleVariantValue,t.uint32(194).fork()).join(),void 0!==e.writeGlossaryIdValue&&kD.encode(e.writeGlossaryIdValue,t.uint32(202).fork()).join(),void 0!==e.writeGlossaryListValue&&BD.encode(e.writeGlossaryListValue,t.uint32(210).fork()).join(),void 0!==e.writeGlossarySupportValue&&HD.encode(e.writeGlossarySupportValue,t.uint32(218).fork()).join(),void 0!==e.writeMaximumTextLengthValue&&GD.encode(e.writeMaximumTextLengthValue,t.uint32(226).fork()).join(),void 0!==e.writeUnsupportedLanguageValue&&FD.encode(e.writeUnsupportedLanguageValue,t.uint32(234).fork()).join(),void 0!==e.translatorSourceLanguageDetectionWeightsValue&&yM.encode(e.translatorSourceLanguageDetectionWeightsValue,t.uint32(242).fork()).join(),void 0!==e.writeGlossaryLanguagesValue&&PD.encode(e.writeGlossaryLanguagesValue,t.uint32(250).fork()).join(),void 0!==e.writeStyleGuideSupportValue&&JD.encode(e.writeStyleGuideSupportValue,t.uint32(258).fork()).join(),void 0!==e.writeStyleGuideIdValue&&DD.encode(e.writeStyleGuideIdValue,t.uint32(266).fork()).join(),void 0!==e.writeTemplateAdaptationTemplatesValue&&sU.encode(e.writeTemplateAdaptationTemplatesValue,t.uint32(274).fork()).join(),void 0!==e.translatorStyleGuideSupportValue&&uM.encode(e.translatorStyleGuideSupportValue,t.uint32(282).fork()).join(),void 0!==e.translatorStyleGuideIdValue&&aM.encode(e.translatorStyleGuideIdValue,t.uint32(290).fork()).join(),void 0!==e.interfaceLanguageValue&&sM.encode(e.interfaceLanguageValue,t.uint32(298).fork()).join(),void 0!==e.translatorLanguageModelPreferencesValue&&RM.encode(e.translatorLanguageModelPreferencesValue,t.uint32(306).fork()).join(),void 0!==e.translatorFreeTextPromptListValue&&lM.encode(e.translatorFreeTextPromptListValue,t.uint32(314).fork()).join(),void 0!==e.writeFreeTextPromptListValue&&MD.encode(e.writeFreeTextPromptListValue,t.uint32(322).fork()).join(),void 0!==e.writeInlineSuggestionsLoadingValue&&jD.encode(e.writeInlineSuggestionsLoadingValue,t.uint32(330).fork()).join(),void 0!==e.writeCorrectionsOnlySupportValue&&zD.encode(e.writeCorrectionsOnlySupportValue,t.uint32(338).fork()).join(),void 0!==e.writeCorrectionsOnlyValue&&UD.encode(e.writeCorrectionsOnlyValue,t.uint32(346).fork()).join(),void 0!==e.translatorRtfSupportValue&&dM.encode(e.translatorRtfSupportValue,t.uint32(354).fork()).join(),void 0!==e.translatorStyleVariantsValue&&EM.encode(e.translatorStyleVariantsValue,t.uint32(362).fork()).join(),void 0!==e.translatorStyleVariantValue&&SM.encode(e.translatorStyleVariantValue,t.uint32(370).fork()).join(),void 0!==e.writeTextUnitAlternativesSupportValue&&YD.encode(e.writeTextUnitAlternativesSupportValue,t.uint32(378).fork()).join(),void 0!==e.translatorTranslationMemoryListValue&&IM.encode(e.translatorTranslationMemoryListValue,t.uint32(386).fork()).join(),void 0!==e.translatorSelectedTranslationMemoryValue&&AM.encode(e.translatorSelectedTranslationMemoryValue,t.uint32(394).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.SetPropertyOperation",propertyName:0,translatorSourceLanguagesValue:void 0,translatorTargetLanguagesValue:void 0,translatorRequestedSourceLanguageValue:void 0,translatorRequestedTargetLanguageValue:void 0,translatorFormalityModesValue:void 0,translatorFormalityModeValue:void 0,translatorGlossarySupportValue:void 0,translatorGlossaryListValue:void 0,translatorTextDirectionValue:void 0,translatorCalculatedSourceLanguageValue:void 0,translatorMaximumTextLengthValue:void 0,translatorLanguageModelsValue:void 0,translatorLanguageModelValue:void 0,translatorGlossaryIdValue:void 0,translatorCalculatedTargetLanguageValue:void 0,translatorUnsupportedSourceLanguageValue:void 0,writeLanguagesValue:void 0,writeRequestedLanguageValue:void 0,writeCalculatedLanguageValue:void 0,writeStyleVariantsValue:void 0,writeStyleVariantValue:void 0,writeGlossaryIdValue:void 0,writeGlossaryListValue:void 0,writeGlossarySupportValue:void 0,writeMaximumTextLengthValue:void 0,writeUnsupportedLanguageValue:void 0,translatorSourceLanguageDetectionWeightsValue:void 0,writeGlossaryLanguagesValue:void 0,writeStyleGuideSupportValue:void 0,writeStyleGuideIdValue:void 0,writeTemplateAdaptationTemplatesValue:void 0,translatorStyleGuideSupportValue:void 0,translatorStyleGuideIdValue:void 0,interfaceLanguageValue:void 0,translatorLanguageModelPreferencesValue:void 0,translatorFreeTextPromptListValue:void 0,writeFreeTextPromptListValue:void 0,writeInlineSuggestionsLoadingValue:void 0,writeCorrectionsOnlySupportValue:void 0,writeCorrectionsOnlyValue:void 0,translatorRtfSupportValue:void 0,translatorStyleVariantsValue:void 0,translatorStyleVariantValue:void 0,writeTextUnitAlternativesSupportValue:void 0,translatorTranslationMemoryListValue:void 0,translatorSelectedTranslationMemoryValue:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.propertyName=n.int32();continue;case 2:if(18!==e)break;o.translatorSourceLanguagesValue=ZU.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.translatorTargetLanguagesValue=eM.decode(n,n.uint32());continue;case 4:if(34!==e)break;o.translatorRequestedSourceLanguageValue=tM.decode(n,n.uint32());continue;case 5:if(42!==e)break;o.translatorRequestedTargetLanguageValue=rM.decode(n,n.uint32());continue;case 7:if(58!==e)break;o.translatorFormalityModesValue=gM.decode(n,n.uint32());continue;case 8:if(66!==e)break;o.translatorFormalityModeValue=hM.decode(n,n.uint32());continue;case 9:if(74!==e)break;o.translatorGlossarySupportValue=cM.decode(n,n.uint32());continue;case 10:if(82!==e)break;o.translatorGlossaryListValue=PM.decode(n,n.uint32());continue;case 12:if(98!==e)break;o.translatorTextDirectionValue=mM.decode(n,n.uint32());continue;case 13:if(106!==e)break;o.translatorCalculatedSourceLanguageValue=nM.decode(n,n.uint32());continue;case 14:if(114!==e)break;o.translatorMaximumTextLengthValue=vM.decode(n,n.uint32());continue;case 15:if(122!==e)break;o.translatorLanguageModelsValue=fM.decode(n,n.uint32());continue;case 16:if(130!==e)break;o.translatorLanguageModelValue=_M.decode(n,n.uint32());continue;case 17:if(138!==e)break;o.translatorGlossaryIdValue=iM.decode(n,n.uint32());continue;case 18:if(146!==e)break;o.translatorCalculatedTargetLanguageValue=oM.decode(n,n.uint32());continue;case 19:if(154!==e)break;o.translatorUnsupportedSourceLanguageValue=TM.decode(n,n.uint32());continue;case 20:if(162!==e)break;o.writeLanguagesValue=LD.decode(n,n.uint32());continue;case 21:if(170!==e)break;o.writeRequestedLanguageValue=CD.decode(n,n.uint32());continue;case 22:if(178!==e)break;o.writeCalculatedLanguageValue=xD.decode(n,n.uint32());continue;case 23:if(186!==e)break;o.writeStyleVariantsValue=VD.decode(n,n.uint32());continue;case 24:if(194!==e)break;o.writeStyleVariantValue=$D.decode(n,n.uint32());continue;case 25:if(202!==e)break;o.writeGlossaryIdValue=kD.decode(n,n.uint32());continue;case 26:if(210!==e)break;o.writeGlossaryListValue=BD.decode(n,n.uint32());continue;case 27:if(218!==e)break;o.writeGlossarySupportValue=HD.decode(n,n.uint32());continue;case 28:if(226!==e)break;o.writeMaximumTextLengthValue=GD.decode(n,n.uint32());continue;case 29:if(234!==e)break;o.writeUnsupportedLanguageValue=FD.decode(n,n.uint32());continue;case 30:if(242!==e)break;o.translatorSourceLanguageDetectionWeightsValue=yM.decode(n,n.uint32());continue;case 31:if(250!==e)break;o.writeGlossaryLanguagesValue=PD.decode(n,n.uint32());continue;case 32:if(258!==e)break;o.writeStyleGuideSupportValue=JD.decode(n,n.uint32());continue;case 33:if(266!==e)break;o.writeStyleGuideIdValue=DD.decode(n,n.uint32());continue;case 34:if(274!==e)break;o.writeTemplateAdaptationTemplatesValue=sU.decode(n,n.uint32());continue;case 35:if(282!==e)break;o.translatorStyleGuideSupportValue=uM.decode(n,n.uint32());continue;case 36:if(290!==e)break;o.translatorStyleGuideIdValue=aM.decode(n,n.uint32());continue;case 37:if(298!==e)break;o.interfaceLanguageValue=sM.decode(n,n.uint32());continue;case 38:if(306!==e)break;o.translatorLanguageModelPreferencesValue=RM.decode(n,n.uint32());continue;case 39:if(314!==e)break;o.translatorFreeTextPromptListValue=lM.decode(n,n.uint32());continue;case 40:if(322!==e)break;o.writeFreeTextPromptListValue=MD.decode(n,n.uint32());continue;case 41:if(330!==e)break;o.writeInlineSuggestionsLoadingValue=jD.decode(n,n.uint32());continue;case 42:if(338!==e)break;o.writeCorrectionsOnlySupportValue=zD.decode(n,n.uint32());continue;case 43:if(346!==e)break;o.writeCorrectionsOnlyValue=UD.decode(n,n.uint32());continue;case 44:if(354!==e)break;o.translatorRtfSupportValue=dM.decode(n,n.uint32());continue;case 45:if(362!==e)break;o.translatorStyleVariantsValue=EM.decode(n,n.uint32());continue;case 46:if(370!==e)break;o.translatorStyleVariantValue=SM.decode(n,n.uint32());continue;case 47:if(378!==e)break;o.writeTextUnitAlternativesSupportValue=YD.decode(n,n.uint32());continue;case 48:if(386!==e)break;o.translatorTranslationMemoryListValue=IM.decode(n,n.uint32());continue;case 49:if(394!==e)break;o.translatorSelectedTranslationMemoryValue=AM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:nG.$type,propertyName:IG(e.propertyName)?KM(e.propertyName):0,translatorSourceLanguagesValue:IG(e.translatorSourceLanguagesValue)?ZU.fromJSON(e.translatorSourceLanguagesValue):void 0,translatorTargetLanguagesValue:IG(e.translatorTargetLanguagesValue)?eM.fromJSON(e.translatorTargetLanguagesValue):void 0,translatorRequestedSourceLanguageValue:IG(e.translatorRequestedSourceLanguageValue)?tM.fromJSON(e.translatorRequestedSourceLanguageValue):void 0,translatorRequestedTargetLanguageValue:IG(e.translatorRequestedTargetLanguageValue)?rM.fromJSON(e.translatorRequestedTargetLanguageValue):void 0,translatorFormalityModesValue:IG(e.translatorFormalityModesValue)?gM.fromJSON(e.translatorFormalityModesValue):void 0,translatorFormalityModeValue:IG(e.translatorFormalityModeValue)?hM.fromJSON(e.translatorFormalityModeValue):void 0,translatorGlossarySupportValue:IG(e.translatorGlossarySupportValue)?cM.fromJSON(e.translatorGlossarySupportValue):void 0,translatorGlossaryListValue:IG(e.translatorGlossaryListValue)?PM.fromJSON(e.translatorGlossaryListValue):void 0,translatorTextDirectionValue:IG(e.translatorTextDirectionValue)?mM.fromJSON(e.translatorTextDirectionValue):void 0,translatorCalculatedSourceLanguageValue:IG(e.translatorCalculatedSourceLanguageValue)?nM.fromJSON(e.translatorCalculatedSourceLanguageValue):void 0,translatorMaximumTextLengthValue:IG(e.translatorMaximumTextLengthValue)?vM.fromJSON(e.translatorMaximumTextLengthValue):void 0,translatorLanguageModelsValue:IG(e.translatorLanguageModelsValue)?fM.fromJSON(e.translatorLanguageModelsValue):void 0,translatorLanguageModelValue:IG(e.translatorLanguageModelValue)?_M.fromJSON(e.translatorLanguageModelValue):void 0,translatorGlossaryIdValue:IG(e.translatorGlossaryIdValue)?iM.fromJSON(e.translatorGlossaryIdValue):void 0,translatorCalculatedTargetLanguageValue:IG(e.translatorCalculatedTargetLanguageValue)?oM.fromJSON(e.translatorCalculatedTargetLanguageValue):void 0,translatorUnsupportedSourceLanguageValue:IG(e.translatorUnsupportedSourceLanguageValue)?TM.fromJSON(e.translatorUnsupportedSourceLanguageValue):void 0,writeLanguagesValue:IG(e.writeLanguagesValue)?LD.fromJSON(e.writeLanguagesValue):void 0,writeRequestedLanguageValue:IG(e.writeRequestedLanguageValue)?CD.fromJSON(e.writeRequestedLanguageValue):void 0,writeCalculatedLanguageValue:IG(e.writeCalculatedLanguageValue)?xD.fromJSON(e.writeCalculatedLanguageValue):void 0,writeStyleVariantsValue:IG(e.writeStyleVariantsValue)?VD.fromJSON(e.writeStyleVariantsValue):void 0,writeStyleVariantValue:IG(e.writeStyleVariantValue)?$D.fromJSON(e.writeStyleVariantValue):void 0,writeGlossaryIdValue:IG(e.writeGlossaryIdValue)?kD.fromJSON(e.writeGlossaryIdValue):void 0,writeGlossaryListValue:IG(e.writeGlossaryListValue)?BD.fromJSON(e.writeGlossaryListValue):void 0,writeGlossarySupportValue:IG(e.writeGlossarySupportValue)?HD.fromJSON(e.writeGlossarySupportValue):void 0,writeMaximumTextLengthValue:IG(e.writeMaximumTextLengthValue)?GD.fromJSON(e.writeMaximumTextLengthValue):void 0,writeUnsupportedLanguageValue:IG(e.writeUnsupportedLanguageValue)?FD.fromJSON(e.writeUnsupportedLanguageValue):void 0,translatorSourceLanguageDetectionWeightsValue:IG(e.translatorSourceLanguageDetectionWeightsValue)?yM.fromJSON(e.translatorSourceLanguageDetectionWeightsValue):void 0,writeGlossaryLanguagesValue:IG(e.writeGlossaryLanguagesValue)?PD.fromJSON(e.writeGlossaryLanguagesValue):void 0,writeStyleGuideSupportValue:IG(e.writeStyleGuideSupportValue)?JD.fromJSON(e.writeStyleGuideSupportValue):void 0,writeStyleGuideIdValue:IG(e.writeStyleGuideIdValue)?DD.fromJSON(e.writeStyleGuideIdValue):void 0,writeTemplateAdaptationTemplatesValue:IG(e.writeTemplateAdaptationTemplatesValue)?sU.fromJSON(e.writeTemplateAdaptationTemplatesValue):void 0,translatorStyleGuideSupportValue:IG(e.translatorStyleGuideSupportValue)?uM.fromJSON(e.translatorStyleGuideSupportValue):void 0,translatorStyleGuideIdValue:IG(e.translatorStyleGuideIdValue)?aM.fromJSON(e.translatorStyleGuideIdValue):void 0,interfaceLanguageValue:IG(e.interfaceLanguageValue)?sM.fromJSON(e.interfaceLanguageValue):void 0,translatorLanguageModelPreferencesValue:IG(e.translatorLanguageModelPreferencesValue)?RM.fromJSON(e.translatorLanguageModelPreferencesValue):void 0,translatorFreeTextPromptListValue:IG(e.translatorFreeTextPromptListValue)?lM.fromJSON(e.translatorFreeTextPromptListValue):void 0,writeFreeTextPromptListValue:IG(e.writeFreeTextPromptListValue)?MD.fromJSON(e.writeFreeTextPromptListValue):void 0,writeInlineSuggestionsLoadingValue:IG(e.writeInlineSuggestionsLoadingValue)?jD.fromJSON(e.writeInlineSuggestionsLoadingValue):void 0,writeCorrectionsOnlySupportValue:IG(e.writeCorrectionsOnlySupportValue)?zD.fromJSON(e.writeCorrectionsOnlySupportValue):void 0,writeCorrectionsOnlyValue:IG(e.writeCorrectionsOnlyValue)?UD.fromJSON(e.writeCorrectionsOnlyValue):void 0,translatorRtfSupportValue:IG(e.translatorRtfSupportValue)?dM.fromJSON(e.translatorRtfSupportValue):void 0,translatorStyleVariantsValue:IG(e.translatorStyleVariantsValue)?EM.fromJSON(e.translatorStyleVariantsValue):void 0,translatorStyleVariantValue:IG(e.translatorStyleVariantValue)?SM.fromJSON(e.translatorStyleVariantValue):void 0,writeTextUnitAlternativesSupportValue:IG(e.writeTextUnitAlternativesSupportValue)?YD.fromJSON(e.writeTextUnitAlternativesSupportValue):void 0,translatorTranslationMemoryListValue:IG(e.translatorTranslationMemoryListValue)?IM.fromJSON(e.translatorTranslationMemoryListValue):void 0,translatorSelectedTranslationMemoryValue:IG(e.translatorSelectedTranslationMemoryValue)?AM.fromJSON(e.translatorSelectedTranslationMemoryValue):void 0}),toJSON(e){const t={};return 0!==e.propertyName&&(t.propertyName=function(e){switch(e){case JM.UNSPECIFIED:return"PROPERTY_NAME_UNSPECIFIED";case JM.TRANSLATOR_SOURCE_LANGUAGES:return"PROPERTY_NAME_TRANSLATOR_SOURCE_LANGUAGES";case JM.TRANSLATOR_TARGET_LANGUAGES:return"PROPERTY_NAME_TRANSLATOR_TARGET_LANGUAGES";case JM.TRANSLATOR_REQUESTED_SOURCE_LANGUAGE:return"PROPERTY_NAME_TRANSLATOR_REQUESTED_SOURCE_LANGUAGE";case JM.TRANSLATOR_CALCULATED_SOURCE_LANGUAGE:return"PROPERTY_NAME_TRANSLATOR_CALCULATED_SOURCE_LANGUAGE";case JM.TRANSLATOR_REQUESTED_TARGET_LANGUAGE:return"PROPERTY_NAME_TRANSLATOR_REQUESTED_TARGET_LANGUAGE";case JM.TRANSLATOR_FORMALITY_MODES:return"PROPERTY_NAME_TRANSLATOR_FORMALITY_MODES";case JM.TRANSLATOR_FORMALITY_MODE:return"PROPERTY_NAME_TRANSLATOR_FORMALITY_MODE";case JM.TRANSLATOR_GLOSSARY_SUPPORT:return"PROPERTY_NAME_TRANSLATOR_GLOSSARY_SUPPORT";case JM.TRANSLATOR_GLOSSARY_LIST:return"PROPERTY_NAME_TRANSLATOR_GLOSSARY_LIST";case JM.TRANSLATOR_TEXT_DIRECTION:return"PROPERTY_NAME_TRANSLATOR_TEXT_DIRECTION";case JM.TRANSLATOR_GLOSSARY_SUGGESTIONS:return"PROPERTY_NAME_TRANSLATOR_GLOSSARY_SUGGESTIONS";case JM.TRANSLATOR_MAXIMUM_TEXT_LENGTH:return"PROPERTY_NAME_TRANSLATOR_MAXIMUM_TEXT_LENGTH";case JM.TRANSLATOR_LANGUAGE_MODELS:return"PROPERTY_NAME_TRANSLATOR_LANGUAGE_MODELS";case JM.TRANSLATOR_LANGUAGE_MODEL:return"PROPERTY_NAME_TRANSLATOR_LANGUAGE_MODEL";case JM.TRANSLATOR_GLOSSARY_ID:return"PROPERTY_NAME_TRANSLATOR_GLOSSARY_ID";case JM.TRANSLATOR_CALCULATED_TARGET_LANGUAGE:return"PROPERTY_NAME_TRANSLATOR_CALCULATED_TARGET_LANGUAGE";case JM.TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE:return"PROPERTY_NAME_TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE";case JM.WRITE_LANGUAGES:return"PROPERTY_NAME_WRITE_LANGUAGES";case JM.WRITE_REQUESTED_LANGUAGE:return"PROPERTY_NAME_WRITE_REQUESTED_LANGUAGE";case JM.WRITE_CALCULATED_LANGUAGE:return"PROPERTY_NAME_WRITE_CALCULATED_LANGUAGE";case JM.WRITE_STYLE_VARIANTS:return"PROPERTY_NAME_WRITE_STYLE_VARIANTS";case JM.WRITE_STYLE_VARIANT:return"PROPERTY_NAME_WRITE_STYLE_VARIANT";case JM.WRITE_GLOSSARY_ID:return"PROPERTY_NAME_WRITE_GLOSSARY_ID";case JM.WRITE_GLOSSARY_LIST:return"PROPERTY_NAME_WRITE_GLOSSARY_LIST";case JM.WRITE_GLOSSARY_SUPPORT:return"PROPERTY_NAME_WRITE_GLOSSARY_SUPPORT";case JM.WRITE_MAXIMUM_TEXT_LENGTH:return"PROPERTY_NAME_WRITE_MAXIMUM_TEXT_LENGTH";case JM.WRITE_UNSUPPORTED_LANGUAGE:return"PROPERTY_NAME_WRITE_UNSUPPORTED_LANGUAGE";case JM.TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS:return"PROPERTY_NAME_TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS";case JM.WRITE_GLOSSARY_LANGUAGES:return"PROPERTY_NAME_WRITE_GLOSSARY_LANGUAGES";case JM.WRITE_STYLE_GUIDE_SUPPORT:return"PROPERTY_NAME_WRITE_STYLE_GUIDE_SUPPORT";case JM.WRITE_STYLE_GUIDE_ID:return"PROPERTY_NAME_WRITE_STYLE_GUIDE_ID";case JM.WRITE_TEMPLATE_ADAPTATION_TEMPLATES:return"PROPERTY_NAME_WRITE_TEMPLATE_ADAPTATION_TEMPLATES";case JM.TRANSLATOR_STYLE_GUIDE_SUPPORT:return"PROPERTY_NAME_TRANSLATOR_STYLE_GUIDE_SUPPORT";case JM.TRANSLATOR_STYLE_GUIDE_ID:return"PROPERTY_NAME_TRANSLATOR_STYLE_GUIDE_ID";case JM.TRANSLATOR_INTERFACE_LANGUAGE:return"PROPERTY_NAME_TRANSLATOR_INTERFACE_LANGUAGE";case JM.TRANSLATOR_LANGUAGE_MODEL_PREFERENCES:return"PROPERTY_NAME_TRANSLATOR_LANGUAGE_MODEL_PREFERENCES";case JM.TRANSLATOR_FREE_TEXT_PROMPT_LIST:return"PROPERTY_NAME_TRANSLATOR_FREE_TEXT_PROMPT_LIST";case JM.WRITE_FREE_TEXT_PROMPT_LIST:return"PROPERTY_NAME_WRITE_FREE_TEXT_PROMPT_LIST";case JM.WRITE_INLINE_SUGGESTIONS_LOADING:return"PROPERTY_NAME_WRITE_INLINE_SUGGESTIONS_LOADING";case JM.WRITE_CORRECTIONS_ONLY_SUPPORT:return"PROPERTY_NAME_WRITE_CORRECTIONS_ONLY_SUPPORT";case JM.WRITE_CORRECTIONS_ONLY:return"PROPERTY_NAME_WRITE_CORRECTIONS_ONLY";case JM.TRANSLATOR_RTF_SUPPORT:return"PROPERTY_NAME_TRANSLATOR_RTF_SUPPORT";case JM.TRANSLATOR_STYLE_VARIANTS:return"PROPERTY_NAME_TRANSLATOR_STYLE_VARIANTS";case JM.TRANSLATOR_STYLE_VARIANT:return"PROPERTY_NAME_TRANSLATOR_STYLE_VARIANT";case JM.WRITE_TEXT_UNIT_ALTERNATIVES_SUPPORT:return"PROPERTY_NAME_WRITE_TEXT_UNIT_ALTERNATIVES_SUPPORT";case JM.TRANSLATOR_TRANSLATION_MEMORY_LIST:return"PROPERTY_NAME_TRANSLATOR_TRANSLATION_MEMORY_LIST";case JM.TRANSLATOR_SELECTED_TRANSLATION_MEMORY:return"PROPERTY_NAME_TRANSLATOR_SELECTED_TRANSLATION_MEMORY";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum PropertyName")}}(e.propertyName)),void 0!==e.translatorSourceLanguagesValue&&(t.translatorSourceLanguagesValue=ZU.toJSON(e.translatorSourceLanguagesValue)),void 0!==e.translatorTargetLanguagesValue&&(t.translatorTargetLanguagesValue=eM.toJSON(e.translatorTargetLanguagesValue)),void 0!==e.translatorRequestedSourceLanguageValue&&(t.translatorRequestedSourceLanguageValue=tM.toJSON(e.translatorRequestedSourceLanguageValue)),void 0!==e.translatorRequestedTargetLanguageValue&&(t.translatorRequestedTargetLanguageValue=rM.toJSON(e.translatorRequestedTargetLanguageValue)),void 0!==e.translatorFormalityModesValue&&(t.translatorFormalityModesValue=gM.toJSON(e.translatorFormalityModesValue)),void 0!==e.translatorFormalityModeValue&&(t.translatorFormalityModeValue=hM.toJSON(e.translatorFormalityModeValue)),void 0!==e.translatorGlossarySupportValue&&(t.translatorGlossarySupportValue=cM.toJSON(e.translatorGlossarySupportValue)),void 0!==e.translatorGlossaryListValue&&(t.translatorGlossaryListValue=PM.toJSON(e.translatorGlossaryListValue)),void 0!==e.translatorTextDirectionValue&&(t.translatorTextDirectionValue=mM.toJSON(e.translatorTextDirectionValue)),void 0!==e.translatorCalculatedSourceLanguageValue&&(t.translatorCalculatedSourceLanguageValue=nM.toJSON(e.translatorCalculatedSourceLanguageValue)),void 0!==e.translatorMaximumTextLengthValue&&(t.translatorMaximumTextLengthValue=vM.toJSON(e.translatorMaximumTextLengthValue)),void 0!==e.translatorLanguageModelsValue&&(t.translatorLanguageModelsValue=fM.toJSON(e.translatorLanguageModelsValue)),void 0!==e.translatorLanguageModelValue&&(t.translatorLanguageModelValue=_M.toJSON(e.translatorLanguageModelValue)),void 0!==e.translatorGlossaryIdValue&&(t.translatorGlossaryIdValue=iM.toJSON(e.translatorGlossaryIdValue)),void 0!==e.translatorCalculatedTargetLanguageValue&&(t.translatorCalculatedTargetLanguageValue=oM.toJSON(e.translatorCalculatedTargetLanguageValue)),void 0!==e.translatorUnsupportedSourceLanguageValue&&(t.translatorUnsupportedSourceLanguageValue=TM.toJSON(e.translatorUnsupportedSourceLanguageValue)),void 0!==e.writeLanguagesValue&&(t.writeLanguagesValue=LD.toJSON(e.writeLanguagesValue)),void 0!==e.writeRequestedLanguageValue&&(t.writeRequestedLanguageValue=CD.toJSON(e.writeRequestedLanguageValue)),void 0!==e.writeCalculatedLanguageValue&&(t.writeCalculatedLanguageValue=xD.toJSON(e.writeCalculatedLanguageValue)),void 0!==e.writeStyleVariantsValue&&(t.writeStyleVariantsValue=VD.toJSON(e.writeStyleVariantsValue)),void 0!==e.writeStyleVariantValue&&(t.writeStyleVariantValue=$D.toJSON(e.writeStyleVariantValue)),void 0!==e.writeGlossaryIdValue&&(t.writeGlossaryIdValue=kD.toJSON(e.writeGlossaryIdValue)),void 0!==e.writeGlossaryListValue&&(t.writeGlossaryListValue=BD.toJSON(e.writeGlossaryListValue)),void 0!==e.writeGlossarySupportValue&&(t.writeGlossarySupportValue=HD.toJSON(e.writeGlossarySupportValue)),void 0!==e.writeMaximumTextLengthValue&&(t.writeMaximumTextLengthValue=GD.toJSON(e.writeMaximumTextLengthValue)),void 0!==e.writeUnsupportedLanguageValue&&(t.writeUnsupportedLanguageValue=FD.toJSON(e.writeUnsupportedLanguageValue)),void 0!==e.translatorSourceLanguageDetectionWeightsValue&&(t.translatorSourceLanguageDetectionWeightsValue=yM.toJSON(e.translatorSourceLanguageDetectionWeightsValue)),void 0!==e.writeGlossaryLanguagesValue&&(t.writeGlossaryLanguagesValue=PD.toJSON(e.writeGlossaryLanguagesValue)),void 0!==e.writeStyleGuideSupportValue&&(t.writeStyleGuideSupportValue=JD.toJSON(e.writeStyleGuideSupportValue)),void 0!==e.writeStyleGuideIdValue&&(t.writeStyleGuideIdValue=DD.toJSON(e.writeStyleGuideIdValue)),void 0!==e.writeTemplateAdaptationTemplatesValue&&(t.writeTemplateAdaptationTemplatesValue=sU.toJSON(e.writeTemplateAdaptationTemplatesValue)),void 0!==e.translatorStyleGuideSupportValue&&(t.translatorStyleGuideSupportValue=uM.toJSON(e.translatorStyleGuideSupportValue)),void 0!==e.translatorStyleGuideIdValue&&(t.translatorStyleGuideIdValue=aM.toJSON(e.translatorStyleGuideIdValue)),void 0!==e.interfaceLanguageValue&&(t.interfaceLanguageValue=sM.toJSON(e.interfaceLanguageValue)),void 0!==e.translatorLanguageModelPreferencesValue&&(t.translatorLanguageModelPreferencesValue=RM.toJSON(e.translatorLanguageModelPreferencesValue)),void 0!==e.translatorFreeTextPromptListValue&&(t.translatorFreeTextPromptListValue=lM.toJSON(e.translatorFreeTextPromptListValue)),void 0!==e.writeFreeTextPromptListValue&&(t.writeFreeTextPromptListValue=MD.toJSON(e.writeFreeTextPromptListValue)),void 0!==e.writeInlineSuggestionsLoadingValue&&(t.writeInlineSuggestionsLoadingValue=jD.toJSON(e.writeInlineSuggestionsLoadingValue)),void 0!==e.writeCorrectionsOnlySupportValue&&(t.writeCorrectionsOnlySupportValue=zD.toJSON(e.writeCorrectionsOnlySupportValue)),void 0!==e.writeCorrectionsOnlyValue&&(t.writeCorrectionsOnlyValue=UD.toJSON(e.writeCorrectionsOnlyValue)),void 0!==e.translatorRtfSupportValue&&(t.translatorRtfSupportValue=dM.toJSON(e.translatorRtfSupportValue)),void 0!==e.translatorStyleVariantsValue&&(t.translatorStyleVariantsValue=EM.toJSON(e.translatorStyleVariantsValue)),void 0!==e.translatorStyleVariantValue&&(t.translatorStyleVariantValue=SM.toJSON(e.translatorStyleVariantValue)),void 0!==e.writeTextUnitAlternativesSupportValue&&(t.writeTextUnitAlternativesSupportValue=YD.toJSON(e.writeTextUnitAlternativesSupportValue)),void 0!==e.translatorTranslationMemoryListValue&&(t.translatorTranslationMemoryListValue=IM.toJSON(e.translatorTranslationMemoryListValue)),void 0!==e.translatorSelectedTranslationMemoryValue&&(t.translatorSelectedTranslationMemoryValue=AM.toJSON(e.translatorSelectedTranslationMemoryValue)),t},create:e=>nG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.SetPropertyOperation",propertyName:0,translatorSourceLanguagesValue:void 0,translatorTargetLanguagesValue:void 0,translatorRequestedSourceLanguageValue:void 0,translatorRequestedTargetLanguageValue:void 0,translatorFormalityModesValue:void 0,translatorFormalityModeValue:void 0,translatorGlossarySupportValue:void 0,translatorGlossaryListValue:void 0,translatorTextDirectionValue:void 0,translatorCalculatedSourceLanguageValue:void 0,translatorMaximumTextLengthValue:void 0,translatorLanguageModelsValue:void 0,translatorLanguageModelValue:void 0,translatorGlossaryIdValue:void 0,translatorCalculatedTargetLanguageValue:void 0,translatorUnsupportedSourceLanguageValue:void 0,writeLanguagesValue:void 0,writeRequestedLanguageValue:void 0,writeCalculatedLanguageValue:void 0,writeStyleVariantsValue:void 0,writeStyleVariantValue:void 0,writeGlossaryIdValue:void 0,writeGlossaryListValue:void 0,writeGlossarySupportValue:void 0,writeMaximumTextLengthValue:void 0,writeUnsupportedLanguageValue:void 0,translatorSourceLanguageDetectionWeightsValue:void 0,writeGlossaryLanguagesValue:void 0,writeStyleGuideSupportValue:void 0,writeStyleGuideIdValue:void 0,writeTemplateAdaptationTemplatesValue:void 0,translatorStyleGuideSupportValue:void 0,translatorStyleGuideIdValue:void 0,interfaceLanguageValue:void 0,translatorLanguageModelPreferencesValue:void 0,translatorFreeTextPromptListValue:void 0,writeFreeTextPromptListValue:void 0,writeInlineSuggestionsLoadingValue:void 0,writeCorrectionsOnlySupportValue:void 0,writeCorrectionsOnlyValue:void 0,translatorRtfSupportValue:void 0,translatorStyleVariantsValue:void 0,translatorStyleVariantValue:void 0,writeTextUnitAlternativesSupportValue:void 0,translatorTranslationMemoryListValue:void 0,translatorSelectedTranslationMemoryValue:void 0};return n.propertyName=null!==(t=e.propertyName)&&void 0!==t?t:0,n.translatorSourceLanguagesValue=void 0!==e.translatorSourceLanguagesValue&&null!==e.translatorSourceLanguagesValue?ZU.fromPartial(e.translatorSourceLanguagesValue):void 0,n.translatorTargetLanguagesValue=void 0!==e.translatorTargetLanguagesValue&&null!==e.translatorTargetLanguagesValue?eM.fromPartial(e.translatorTargetLanguagesValue):void 0,n.translatorRequestedSourceLanguageValue=void 0!==e.translatorRequestedSourceLanguageValue&&null!==e.translatorRequestedSourceLanguageValue?tM.fromPartial(e.translatorRequestedSourceLanguageValue):void 0,n.translatorRequestedTargetLanguageValue=void 0!==e.translatorRequestedTargetLanguageValue&&null!==e.translatorRequestedTargetLanguageValue?rM.fromPartial(e.translatorRequestedTargetLanguageValue):void 0,n.translatorFormalityModesValue=void 0!==e.translatorFormalityModesValue&&null!==e.translatorFormalityModesValue?gM.fromPartial(e.translatorFormalityModesValue):void 0,n.translatorFormalityModeValue=void 0!==e.translatorFormalityModeValue&&null!==e.translatorFormalityModeValue?hM.fromPartial(e.translatorFormalityModeValue):void 0,n.translatorGlossarySupportValue=void 0!==e.translatorGlossarySupportValue&&null!==e.translatorGlossarySupportValue?cM.fromPartial(e.translatorGlossarySupportValue):void 0,n.translatorGlossaryListValue=void 0!==e.translatorGlossaryListValue&&null!==e.translatorGlossaryListValue?PM.fromPartial(e.translatorGlossaryListValue):void 0,n.translatorTextDirectionValue=void 0!==e.translatorTextDirectionValue&&null!==e.translatorTextDirectionValue?mM.fromPartial(e.translatorTextDirectionValue):void 0,n.translatorCalculatedSourceLanguageValue=void 0!==e.translatorCalculatedSourceLanguageValue&&null!==e.translatorCalculatedSourceLanguageValue?nM.fromPartial(e.translatorCalculatedSourceLanguageValue):void 0,n.translatorMaximumTextLengthValue=void 0!==e.translatorMaximumTextLengthValue&&null!==e.translatorMaximumTextLengthValue?vM.fromPartial(e.translatorMaximumTextLengthValue):void 0,n.translatorLanguageModelsValue=void 0!==e.translatorLanguageModelsValue&&null!==e.translatorLanguageModelsValue?fM.fromPartial(e.translatorLanguageModelsValue):void 0,n.translatorLanguageModelValue=void 0!==e.translatorLanguageModelValue&&null!==e.translatorLanguageModelValue?_M.fromPartial(e.translatorLanguageModelValue):void 0,n.translatorGlossaryIdValue=void 0!==e.translatorGlossaryIdValue&&null!==e.translatorGlossaryIdValue?iM.fromPartial(e.translatorGlossaryIdValue):void 0,n.translatorCalculatedTargetLanguageValue=void 0!==e.translatorCalculatedTargetLanguageValue&&null!==e.translatorCalculatedTargetLanguageValue?oM.fromPartial(e.translatorCalculatedTargetLanguageValue):void 0,n.translatorUnsupportedSourceLanguageValue=void 0!==e.translatorUnsupportedSourceLanguageValue&&null!==e.translatorUnsupportedSourceLanguageValue?TM.fromPartial(e.translatorUnsupportedSourceLanguageValue):void 0,n.writeLanguagesValue=void 0!==e.writeLanguagesValue&&null!==e.writeLanguagesValue?LD.fromPartial(e.writeLanguagesValue):void 0,n.writeRequestedLanguageValue=void 0!==e.writeRequestedLanguageValue&&null!==e.writeRequestedLanguageValue?CD.fromPartial(e.writeRequestedLanguageValue):void 0,n.writeCalculatedLanguageValue=void 0!==e.writeCalculatedLanguageValue&&null!==e.writeCalculatedLanguageValue?xD.fromPartial(e.writeCalculatedLanguageValue):void 0,n.writeStyleVariantsValue=void 0!==e.writeStyleVariantsValue&&null!==e.writeStyleVariantsValue?VD.fromPartial(e.writeStyleVariantsValue):void 0,n.writeStyleVariantValue=void 0!==e.writeStyleVariantValue&&null!==e.writeStyleVariantValue?$D.fromPartial(e.writeStyleVariantValue):void 0,n.writeGlossaryIdValue=void 0!==e.writeGlossaryIdValue&&null!==e.writeGlossaryIdValue?kD.fromPartial(e.writeGlossaryIdValue):void 0,n.writeGlossaryListValue=void 0!==e.writeGlossaryListValue&&null!==e.writeGlossaryListValue?BD.fromPartial(e.writeGlossaryListValue):void 0,n.writeGlossarySupportValue=void 0!==e.writeGlossarySupportValue&&null!==e.writeGlossarySupportValue?HD.fromPartial(e.writeGlossarySupportValue):void 0,n.writeMaximumTextLengthValue=void 0!==e.writeMaximumTextLengthValue&&null!==e.writeMaximumTextLengthValue?GD.fromPartial(e.writeMaximumTextLengthValue):void 0,n.writeUnsupportedLanguageValue=void 0!==e.writeUnsupportedLanguageValue&&null!==e.writeUnsupportedLanguageValue?FD.fromPartial(e.writeUnsupportedLanguageValue):void 0,n.translatorSourceLanguageDetectionWeightsValue=void 0!==e.translatorSourceLanguageDetectionWeightsValue&&null!==e.translatorSourceLanguageDetectionWeightsValue?yM.fromPartial(e.translatorSourceLanguageDetectionWeightsValue):void 0,n.writeGlossaryLanguagesValue=void 0!==e.writeGlossaryLanguagesValue&&null!==e.writeGlossaryLanguagesValue?PD.fromPartial(e.writeGlossaryLanguagesValue):void 0,n.writeStyleGuideSupportValue=void 0!==e.writeStyleGuideSupportValue&&null!==e.writeStyleGuideSupportValue?JD.fromPartial(e.writeStyleGuideSupportValue):void 0,n.writeStyleGuideIdValue=void 0!==e.writeStyleGuideIdValue&&null!==e.writeStyleGuideIdValue?DD.fromPartial(e.writeStyleGuideIdValue):void 0,n.writeTemplateAdaptationTemplatesValue=void 0!==e.writeTemplateAdaptationTemplatesValue&&null!==e.writeTemplateAdaptationTemplatesValue?sU.fromPartial(e.writeTemplateAdaptationTemplatesValue):void 0,n.translatorStyleGuideSupportValue=void 0!==e.translatorStyleGuideSupportValue&&null!==e.translatorStyleGuideSupportValue?uM.fromPartial(e.translatorStyleGuideSupportValue):void 0,n.translatorStyleGuideIdValue=void 0!==e.translatorStyleGuideIdValue&&null!==e.translatorStyleGuideIdValue?aM.fromPartial(e.translatorStyleGuideIdValue):void 0,n.interfaceLanguageValue=void 0!==e.interfaceLanguageValue&&null!==e.interfaceLanguageValue?sM.fromPartial(e.interfaceLanguageValue):void 0,n.translatorLanguageModelPreferencesValue=void 0!==e.translatorLanguageModelPreferencesValue&&null!==e.translatorLanguageModelPreferencesValue?RM.fromPartial(e.translatorLanguageModelPreferencesValue):void 0,n.translatorFreeTextPromptListValue=void 0!==e.translatorFreeTextPromptListValue&&null!==e.translatorFreeTextPromptListValue?lM.fromPartial(e.translatorFreeTextPromptListValue):void 0,n.writeFreeTextPromptListValue=void 0!==e.writeFreeTextPromptListValue&&null!==e.writeFreeTextPromptListValue?MD.fromPartial(e.writeFreeTextPromptListValue):void 0,n.writeInlineSuggestionsLoadingValue=void 0!==e.writeInlineSuggestionsLoadingValue&&null!==e.writeInlineSuggestionsLoadingValue?jD.fromPartial(e.writeInlineSuggestionsLoadingValue):void 0,n.writeCorrectionsOnlySupportValue=void 0!==e.writeCorrectionsOnlySupportValue&&null!==e.writeCorrectionsOnlySupportValue?zD.fromPartial(e.writeCorrectionsOnlySupportValue):void 0,n.writeCorrectionsOnlyValue=void 0!==e.writeCorrectionsOnlyValue&&null!==e.writeCorrectionsOnlyValue?UD.fromPartial(e.writeCorrectionsOnlyValue):void 0,n.translatorRtfSupportValue=void 0!==e.translatorRtfSupportValue&&null!==e.translatorRtfSupportValue?dM.fromPartial(e.translatorRtfSupportValue):void 0,n.translatorStyleVariantsValue=void 0!==e.translatorStyleVariantsValue&&null!==e.translatorStyleVariantsValue?EM.fromPartial(e.translatorStyleVariantsValue):void 0,n.translatorStyleVariantValue=void 0!==e.translatorStyleVariantValue&&null!==e.translatorStyleVariantValue?SM.fromPartial(e.translatorStyleVariantValue):void 0,n.writeTextUnitAlternativesSupportValue=void 0!==e.writeTextUnitAlternativesSupportValue&&null!==e.writeTextUnitAlternativesSupportValue?YD.fromPartial(e.writeTextUnitAlternativesSupportValue):void 0,n.translatorTranslationMemoryListValue=void 0!==e.translatorTranslationMemoryListValue&&null!==e.translatorTranslationMemoryListValue?IM.fromPartial(e.translatorTranslationMemoryListValue):void 0,n.translatorSelectedTranslationMemoryValue=void 0!==e.translatorSelectedTranslationMemoryValue&&null!==e.translatorSelectedTranslationMemoryValue?AM.fromPartial(e.translatorSelectedTranslationMemoryValue):void 0,n}};const rG={$type:"deepl.pb.interactive_text_api.StartSessionRequest",encode:(e,t=new Fk)=>(0!==e.sessionMode&&t.uint32(8).int32(e.sessionMode),void 0!==e.baseDocument&&TG.encode(e.baseDocument,t.uint32(18).fork()).join(),void 0!==e.translatorSessionOptions&&bM.encode(e.translatorSessionOptions,t.uint32(26).fork()).join(),void 0!==e.appInformation&&hG.encode(e.appInformation,t.uint32(34).fork()).join(),void 0!==e.previousSessionId&&fG.encode(e.previousSessionId,t.uint32(42).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.StartSessionRequest",sessionMode:0,baseDocument:void 0,translatorSessionOptions:void 0,appInformation:void 0,previousSessionId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.sessionMode=n.int32();continue;case 2:if(18!==e)break;o.baseDocument=TG.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.translatorSessionOptions=bM.decode(n,n.uint32());continue;case 4:if(34!==e)break;o.appInformation=hG.decode(n,n.uint32());continue;case 5:if(42!==e)break;o.previousSessionId=fG.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:rG.$type,sessionMode:IG(e.sessionMode)?QM(e.sessionMode):0,baseDocument:IG(e.baseDocument)?TG.fromJSON(e.baseDocument):void 0,translatorSessionOptions:IG(e.translatorSessionOptions)?bM.fromJSON(e.translatorSessionOptions):void 0,appInformation:IG(e.appInformation)?hG.fromJSON(e.appInformation):void 0,previousSessionId:IG(e.previousSessionId)?fG.fromJSON(e.previousSessionId):void 0}),toJSON(e){const t={};return 0!==e.sessionMode&&(t.sessionMode=function(e){switch(e){case zM.UNSPECIFIED:return"SESSION_MODE_UNSPECIFIED";case zM.TRANSLATOR:return"SESSION_MODE_TRANSLATOR";case zM.WRITE:return"SESSION_MODE_WRITE";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum SessionMode")}}(e.sessionMode)),void 0!==e.baseDocument&&(t.baseDocument=TG.toJSON(e.baseDocument)),void 0!==e.translatorSessionOptions&&(t.translatorSessionOptions=bM.toJSON(e.translatorSessionOptions)),void 0!==e.appInformation&&(t.appInformation=hG.toJSON(e.appInformation)),void 0!==e.previousSessionId&&(t.previousSessionId=fG.toJSON(e.previousSessionId)),t},create:e=>rG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.StartSessionRequest",sessionMode:0,baseDocument:void 0,translatorSessionOptions:void 0,appInformation:void 0,previousSessionId:void 0};return n.sessionMode=null!==(t=e.sessionMode)&&void 0!==t?t:0,n.baseDocument=void 0!==e.baseDocument&&null!==e.baseDocument?TG.fromPartial(e.baseDocument):void 0,n.translatorSessionOptions=void 0!==e.translatorSessionOptions&&null!==e.translatorSessionOptions?bM.fromPartial(e.translatorSessionOptions):void 0,n.appInformation=void 0!==e.appInformation&&null!==e.appInformation?hG.fromPartial(e.appInformation):void 0,n.previousSessionId=void 0!==e.previousSessionId&&null!==e.previousSessionId?fG.fromPartial(e.previousSessionId):void 0,n}};const oG={$type:"deepl.pb.interactive_text_api.StartSessionResponse",encode:(e,t=new Fk)=>(void 0!==e.sessionId&&fG.encode(e.sessionId,t.uint32(10).fork()).join(),void 0!==e.participantId&&vG.encode(e.participantId,t.uint32(18).fork()).join(),""!==e.sessionToken&&t.uint32(26).string(e.sessionToken),void 0!==e.versionRemovedAt&&zk.encode(function(e){const t=Math.trunc(e.getTime()/1e3),n=e.getTime()%1e3*1e6;return{$type:"google.protobuf.Timestamp",seconds:t,nanos:n}}(e.versionRemovedAt),t.uint32(34).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.StartSessionResponse",sessionId:void 0,participantId:void 0,sessionToken:"",versionRemovedAt:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sessionId=fG.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.participantId=vG.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.sessionToken=n.string();continue;case 4:if(34!==e)break;o.versionRemovedAt=EG(zk.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:oG.$type,sessionId:IG(e.sessionId)?fG.fromJSON(e.sessionId):void 0,participantId:IG(e.participantId)?vG.fromJSON(e.participantId):void 0,sessionToken:IG(e.sessionToken)?globalThis.String(e.sessionToken):"",versionRemovedAt:IG(e.versionRemovedAt)?SG(e.versionRemovedAt):void 0}),toJSON(e){const t={};return void 0!==e.sessionId&&(t.sessionId=fG.toJSON(e.sessionId)),void 0!==e.participantId&&(t.participantId=vG.toJSON(e.participantId)),""!==e.sessionToken&&(t.sessionToken=e.sessionToken),void 0!==e.versionRemovedAt&&(t.versionRemovedAt=e.versionRemovedAt.toISOString()),t},create:e=>oG.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.StartSessionResponse",sessionId:void 0,participantId:void 0,sessionToken:"",versionRemovedAt:void 0};return r.sessionId=void 0!==e.sessionId&&null!==e.sessionId?fG.fromPartial(e.sessionId):void 0,r.participantId=void 0!==e.participantId&&null!==e.participantId?vG.fromPartial(e.participantId):void 0,r.sessionToken=null!==(t=e.sessionToken)&&void 0!==t?t:"",r.versionRemovedAt=null!==(n=e.versionRemovedAt)&&void 0!==n?n:void 0,r}};const iG={$type:"deepl.pb.interactive_text_api.ParticipantRequest",encode:(e,t=new Fk)=>(void 0!==e.appendMessage&&pG.encode(e.appendMessage,t.uint32(10).fork()).join(),void 0!==e.updateAuthenticationTokenMessage&&gG.encode(e.updateAuthenticationTokenMessage,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.ParticipantRequest",appendMessage:void 0,updateAuthenticationTokenMessage:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.appendMessage=pG.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.updateAuthenticationTokenMessage=gG.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:iG.$type,appendMessage:IG(e.appendMessage)?pG.fromJSON(e.appendMessage):void 0,updateAuthenticationTokenMessage:IG(e.updateAuthenticationTokenMessage)?gG.fromJSON(e.updateAuthenticationTokenMessage):void 0}),toJSON(e){const t={};return void 0!==e.appendMessage&&(t.appendMessage=pG.toJSON(e.appendMessage)),void 0!==e.updateAuthenticationTokenMessage&&(t.updateAuthenticationTokenMessage=gG.toJSON(e.updateAuthenticationTokenMessage)),t},create:e=>iG.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.ParticipantRequest",appendMessage:void 0,updateAuthenticationTokenMessage:void 0};return t.appendMessage=void 0!==e.appendMessage&&null!==e.appendMessage?pG.fromPartial(e.appendMessage):void 0,t.updateAuthenticationTokenMessage=void 0!==e.updateAuthenticationTokenMessage&&null!==e.updateAuthenticationTokenMessage?gG.fromPartial(e.updateAuthenticationTokenMessage):void 0,t}};const aG={$type:"deepl.pb.interactive_text_api.ParticipantResponse",encode:(e,t=new Fk)=>(void 0!==e.confirmedMessage&&sG.encode(e.confirmedMessage,t.uint32(10).fork()).join(),void 0!==e.initializedMessage&&lG.encode(e.initializedMessage,t.uint32(18).fork()).join(),void 0!==e.publishedMessage&&cG.encode(e.publishedMessage,t.uint32(26).fork()).join(),void 0!==e.metaInfoMessage&&uG.encode(e.metaInfoMessage,t.uint32(34).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.ParticipantResponse",confirmedMessage:void 0,initializedMessage:void 0,publishedMessage:void 0,metaInfoMessage:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.confirmedMessage=sG.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.initializedMessage=lG.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.publishedMessage=cG.decode(n,n.uint32());continue;case 4:if(34!==e)break;o.metaInfoMessage=uG.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:aG.$type,confirmedMessage:IG(e.confirmedMessage)?sG.fromJSON(e.confirmedMessage):void 0,initializedMessage:IG(e.initializedMessage)?lG.fromJSON(e.initializedMessage):void 0,publishedMessage:IG(e.publishedMessage)?cG.fromJSON(e.publishedMessage):void 0,metaInfoMessage:IG(e.metaInfoMessage)?uG.fromJSON(e.metaInfoMessage):void 0}),toJSON(e){const t={};return void 0!==e.confirmedMessage&&(t.confirmedMessage=sG.toJSON(e.confirmedMessage)),void 0!==e.initializedMessage&&(t.initializedMessage=lG.toJSON(e.initializedMessage)),void 0!==e.publishedMessage&&(t.publishedMessage=cG.toJSON(e.publishedMessage)),void 0!==e.metaInfoMessage&&(t.metaInfoMessage=uG.toJSON(e.metaInfoMessage)),t},create:e=>aG.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.ParticipantResponse",confirmedMessage:void 0,initializedMessage:void 0,publishedMessage:void 0,metaInfoMessage:void 0};return t.confirmedMessage=void 0!==e.confirmedMessage&&null!==e.confirmedMessage?sG.fromPartial(e.confirmedMessage):void 0,t.initializedMessage=void 0!==e.initializedMessage&&null!==e.initializedMessage?lG.fromPartial(e.initializedMessage):void 0,t.publishedMessage=void 0!==e.publishedMessage&&null!==e.publishedMessage?cG.fromPartial(e.publishedMessage):void 0,t.metaInfoMessage=void 0!==e.metaInfoMessage&&null!==e.metaInfoMessage?uG.fromPartial(e.metaInfoMessage):void 0,t}};const sG={$type:"deepl.pb.interactive_text_api.ConfirmedMessage",encode:(e,t=new Fk)=>(void 0!==e.currentVersion&&_G.encode(e.currentVersion,t.uint32(10).fork()).join(),void 0!==e.throttlingDelay&&Bk.encode(e.throttlingDelay,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.ConfirmedMessage",currentVersion:void 0,throttlingDelay:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.currentVersion=_G.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.throttlingDelay=Bk.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:sG.$type,currentVersion:IG(e.currentVersion)?_G.fromJSON(e.currentVersion):void 0,throttlingDelay:IG(e.throttlingDelay)?Bk.fromJSON(e.throttlingDelay):void 0}),toJSON(e){const t={};return void 0!==e.currentVersion&&(t.currentVersion=_G.toJSON(e.currentVersion)),void 0!==e.throttlingDelay&&(t.throttlingDelay=Bk.toJSON(e.throttlingDelay)),t},create:e=>sG.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.ConfirmedMessage",currentVersion:void 0,throttlingDelay:void 0};return t.currentVersion=void 0!==e.currentVersion&&null!==e.currentVersion?_G.fromPartial(e.currentVersion):void 0,t.throttlingDelay=void 0!==e.throttlingDelay&&null!==e.throttlingDelay?Bk.fromPartial(e.throttlingDelay):void 0,t}};const lG={$type:"deepl.pb.interactive_text_api.InitializedMessage",encode:(e,t=new Fk)=>t,decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.InitializedMessage"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:lG.$type}),toJSON:e=>({}),create:e=>lG.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.InitializedMessage"})};const cG={$type:"deepl.pb.interactive_text_api.PublishedMessage",encode(e,t=new Fk){for(const n of e.events)mG.encode(n,t.uint32(10).fork()).join();return void 0!==e.currentVersion&&_G.encode(e.currentVersion,t.uint32(18).fork()).join(),t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.PublishedMessage",events:[],currentVersion:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.events.push(mG.decode(n,n.uint32()));continue;case 2:if(18!==e)break;o.currentVersion=_G.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:cG.$type,events:globalThis.Array.isArray(null==e?void 0:e.events)?e.events.map((e=>mG.fromJSON(e))):[],currentVersion:IG(e.currentVersion)?_G.fromJSON(e.currentVersion):void 0}),toJSON(e){var t;const n={};return(null===(t=e.events)||void 0===t?void 0:t.length)&&(n.events=e.events.map((e=>mG.toJSON(e)))),void 0!==e.currentVersion&&(n.currentVersion=_G.toJSON(e.currentVersion)),n},create:e=>cG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.PublishedMessage",events:[],currentVersion:void 0};return n.events=(null===(t=e.events)||void 0===t?void 0:t.map((e=>mG.fromPartial(e))))||[],n.currentVersion=void 0!==e.currentVersion&&null!==e.currentVersion?_G.fromPartial(e.currentVersion):void 0,n}};const uG={$type:"deepl.pb.interactive_text_api.MetaInfoMessage",encode:(e,t=new Fk)=>(void 0!==e.idle&&dG.encode(e.idle,t.uint32(10).fork()).join(),void 0!==e.translatorTaskMetaInfo&&pM.encode(e.translatorTaskMetaInfo,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.MetaInfoMessage",idle:void 0,translatorTaskMetaInfo:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.idle=dG.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.translatorTaskMetaInfo=pM.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:uG.$type,idle:IG(e.idle)?dG.fromJSON(e.idle):void 0,translatorTaskMetaInfo:IG(e.translatorTaskMetaInfo)?pM.fromJSON(e.translatorTaskMetaInfo):void 0}),toJSON(e){const t={};return void 0!==e.idle&&(t.idle=dG.toJSON(e.idle)),void 0!==e.translatorTaskMetaInfo&&(t.translatorTaskMetaInfo=pM.toJSON(e.translatorTaskMetaInfo)),t},create:e=>uG.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.MetaInfoMessage",idle:void 0,translatorTaskMetaInfo:void 0};return t.idle=void 0!==e.idle&&null!==e.idle?dG.fromPartial(e.idle):void 0,t.translatorTaskMetaInfo=void 0!==e.translatorTaskMetaInfo&&null!==e.translatorTaskMetaInfo?pM.fromPartial(e.translatorTaskMetaInfo):void 0,t}};const dG={$type:"deepl.pb.interactive_text_api.Idle",encode:(e,t=new Fk)=>(void 0!==e.eventVersion&&_G.encode(e.eventVersion,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.Idle",eventVersion:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.eventVersion=_G.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:dG.$type,eventVersion:IG(e.eventVersion)?_G.fromJSON(e.eventVersion):void 0}),toJSON(e){const t={};return void 0!==e.eventVersion&&(t.eventVersion=_G.toJSON(e.eventVersion)),t},create:e=>dG.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.Idle",eventVersion:void 0};return t.eventVersion=void 0!==e.eventVersion&&null!==e.eventVersion?_G.fromPartial(e.eventVersion):void 0,t}};const pG={$type:"deepl.pb.interactive_text_api.AppendMessage",encode(e,t=new Fk){for(const n of e.events)mG.encode(n,t.uint32(10).fork()).join();return void 0!==e.baseVersion&&_G.encode(e.baseVersion,t.uint32(18).fork()).join(),t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.AppendMessage",events:[],baseVersion:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.events.push(mG.decode(n,n.uint32()));continue;case 2:if(18!==e)break;o.baseVersion=_G.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:pG.$type,events:globalThis.Array.isArray(null==e?void 0:e.events)?e.events.map((e=>mG.fromJSON(e))):[],baseVersion:IG(e.baseVersion)?_G.fromJSON(e.baseVersion):void 0}),toJSON(e){var t;const n={};return(null===(t=e.events)||void 0===t?void 0:t.length)&&(n.events=e.events.map((e=>mG.toJSON(e)))),void 0!==e.baseVersion&&(n.baseVersion=_G.toJSON(e.baseVersion)),n},create:e=>pG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.AppendMessage",events:[],baseVersion:void 0};return n.events=(null===(t=e.events)||void 0===t?void 0:t.map((e=>mG.fromPartial(e))))||[],n.baseVersion=void 0!==e.baseVersion&&null!==e.baseVersion?_G.fromPartial(e.baseVersion):void 0,n}};const gG={$type:"deepl.pb.interactive_text_api.UpdateAuthenticationTokenMessage",encode:(e,t=new Fk)=>(""!==e.token&&t.uint32(10).string(e.token),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.UpdateAuthenticationTokenMessage",token:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.token=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:gG.$type,token:IG(e.token)?globalThis.String(e.token):""}),toJSON(e){const t={};return""!==e.token&&(t.token=e.token),t},create:e=>gG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.UpdateAuthenticationTokenMessage",token:""};return n.token=null!==(t=e.token)&&void 0!==t?t:"",n}};const hG={$type:"deepl.pb.interactive_text_api.AppInformation",encode:(e,t=new Fk)=>(""!==e.os&&t.uint32(10).string(e.os),""!==e.osVersion&&t.uint32(18).string(e.osVersion),""!==e.appVersion&&t.uint32(26).string(e.appVersion),""!==e.appBuild&&t.uint32(34).string(e.appBuild),""!==e.instanceId&&t.uint32(42).string(e.instanceId),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.AppInformation",os:"",osVersion:"",appVersion:"",appBuild:"",instanceId:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.os=n.string();continue;case 2:if(18!==e)break;o.osVersion=n.string();continue;case 3:if(26!==e)break;o.appVersion=n.string();continue;case 4:if(34!==e)break;o.appBuild=n.string();continue;case 5:if(42!==e)break;o.instanceId=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:hG.$type,os:IG(e.os)?globalThis.String(e.os):"",osVersion:IG(e.osVersion)?globalThis.String(e.osVersion):"",appVersion:IG(e.appVersion)?globalThis.String(e.appVersion):"",appBuild:IG(e.appBuild)?globalThis.String(e.appBuild):"",instanceId:IG(e.instanceId)?globalThis.String(e.instanceId):""}),toJSON(e){const t={};return""!==e.os&&(t.os=e.os),""!==e.osVersion&&(t.osVersion=e.osVersion),""!==e.appVersion&&(t.appVersion=e.appVersion),""!==e.appBuild&&(t.appBuild=e.appBuild),""!==e.instanceId&&(t.instanceId=e.instanceId),t},create:e=>hG.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r,o,i;const a={$type:"deepl.pb.interactive_text_api.AppInformation",os:"",osVersion:"",appVersion:"",appBuild:"",instanceId:""};return a.os=null!==(t=e.os)&&void 0!==t?t:"",a.osVersion=null!==(n=e.osVersion)&&void 0!==n?n:"",a.appVersion=null!==(r=e.appVersion)&&void 0!==r?r:"",a.appBuild=null!==(o=e.appBuild)&&void 0!==o?o:"",a.instanceId=null!==(i=e.instanceId)&&void 0!==i?i:"",a}};const fG={$type:"deepl.pb.interactive_text_api.SessionId",encode:(e,t=new Fk)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.SessionId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:fG.$type,value:IG(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>fG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.SessionId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const _G={$type:"deepl.pb.interactive_text_api.EventVersion",encode:(e,t=new Fk)=>(void 0!==e.version&&Kk.encode({$type:"google.protobuf.Int32Value",value:e.version},t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.EventVersion",version:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.version=Kk.decode(n,n.uint32()).value;continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:_G.$type,version:IG(e.version)?Number(e.version):void 0}),toJSON(e){const t={};return void 0!==e.version&&(t.version=e.version),t},create:e=>_G.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.EventVersion",version:void 0};return n.version=null!==(t=e.version)&&void 0!==t?t:void 0,n}};const mG={$type:"deepl.pb.interactive_text_api.FieldEvent",encode:(e,t=new Fk)=>(0!==e.fieldName&&t.uint32(8).int32(e.fieldName),void 0!==e.textChangeOperation&&ZM.encode(e.textChangeOperation,t.uint32(18).fork()).join(),void 0!==e.createAnnotationOperation&&eG.encode(e.createAnnotationOperation,t.uint32(26).fork()).join(),void 0!==e.removeAnnotationOperation&&tG.encode(e.removeAnnotationOperation,t.uint32(34).fork()).join(),void 0!==e.setPropertyOperation&&nG.encode(e.setPropertyOperation,t.uint32(42).fork()).join(),void 0!==e.participantId&&vG.encode(e.participantId,t.uint32(50).fork()).join(),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.FieldEvent",fieldName:0,textChangeOperation:void 0,createAnnotationOperation:void 0,removeAnnotationOperation:void 0,setPropertyOperation:void 0,participantId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.fieldName=n.int32();continue;case 2:if(18!==e)break;o.textChangeOperation=ZM.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.createAnnotationOperation=eG.decode(n,n.uint32());continue;case 4:if(34!==e)break;o.removeAnnotationOperation=tG.decode(n,n.uint32());continue;case 5:if(42!==e)break;o.setPropertyOperation=nG.decode(n,n.uint32());continue;case 6:if(50!==e)break;o.participantId=vG.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:mG.$type,fieldName:IG(e.fieldName)?YM(e.fieldName):0,textChangeOperation:IG(e.textChangeOperation)?ZM.fromJSON(e.textChangeOperation):void 0,createAnnotationOperation:IG(e.createAnnotationOperation)?eG.fromJSON(e.createAnnotationOperation):void 0,removeAnnotationOperation:IG(e.removeAnnotationOperation)?tG.fromJSON(e.removeAnnotationOperation):void 0,setPropertyOperation:IG(e.setPropertyOperation)?nG.fromJSON(e.setPropertyOperation):void 0,participantId:IG(e.participantId)?vG.fromJSON(e.participantId):void 0}),toJSON(e){const t={};return 0!==e.fieldName&&(t.fieldName=XM(e.fieldName)),void 0!==e.textChangeOperation&&(t.textChangeOperation=ZM.toJSON(e.textChangeOperation)),void 0!==e.createAnnotationOperation&&(t.createAnnotationOperation=eG.toJSON(e.createAnnotationOperation)),void 0!==e.removeAnnotationOperation&&(t.removeAnnotationOperation=tG.toJSON(e.removeAnnotationOperation)),void 0!==e.setPropertyOperation&&(t.setPropertyOperation=nG.toJSON(e.setPropertyOperation)),void 0!==e.participantId&&(t.participantId=vG.toJSON(e.participantId)),t},create:e=>mG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.FieldEvent",fieldName:0,textChangeOperation:void 0,createAnnotationOperation:void 0,removeAnnotationOperation:void 0,setPropertyOperation:void 0,participantId:void 0};return n.fieldName=null!==(t=e.fieldName)&&void 0!==t?t:0,n.textChangeOperation=void 0!==e.textChangeOperation&&null!==e.textChangeOperation?ZM.fromPartial(e.textChangeOperation):void 0,n.createAnnotationOperation=void 0!==e.createAnnotationOperation&&null!==e.createAnnotationOperation?eG.fromPartial(e.createAnnotationOperation):void 0,n.removeAnnotationOperation=void 0!==e.removeAnnotationOperation&&null!==e.removeAnnotationOperation?tG.fromPartial(e.removeAnnotationOperation):void 0,n.setPropertyOperation=void 0!==e.setPropertyOperation&&null!==e.setPropertyOperation?nG.fromPartial(e.setPropertyOperation):void 0,n.participantId=void 0!==e.participantId&&null!==e.participantId?vG.fromPartial(e.participantId):void 0,n}};const vG={$type:"deepl.pb.interactive_text_api.ParticipantId",encode:(e,t=new Fk)=>(0!==e.value&&t.uint32(8).int32(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.ParticipantId",value:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.value=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:vG.$type,value:IG(e.value)?globalThis.Number(e.value):0}),toJSON(e){const t={};return 0!==e.value&&(t.value=Math.round(e.value)),t},create:e=>vG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.ParticipantId",value:0};return n.value=null!==(t=e.value)&&void 0!==t?t:0,n}};const TG={$type:"deepl.pb.interactive_text_api.BaseDocument",encode(e,t=new Fk){for(const n of e.fields)yG.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.BaseDocument",fields:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.fields.push(yG.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:TG.$type,fields:globalThis.Array.isArray(null==e?void 0:e.fields)?e.fields.map((e=>yG.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.fields)||void 0===t?void 0:t.length)&&(n.fields=e.fields.map((e=>yG.toJSON(e)))),n},create:e=>TG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.BaseDocument",fields:[]};return n.fields=(null===(t=e.fields)||void 0===t?void 0:t.map((e=>yG.fromPartial(e))))||[],n}};const yG={$type:"deepl.pb.interactive_text_api.Field",encode(e,t=new Fk){0!==e.fieldName&&t.uint32(8).int32(e.fieldName),""!==e.text&&t.uint32(18).string(e.text);for(const n of e.annotations)eG.encode(n,t.uint32(26).fork()).join();for(const n of e.properties)nG.encode(n,t.uint32(34).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.Field",fieldName:0,text:"",annotations:[],properties:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.fieldName=n.int32();continue;case 2:if(18!==e)break;o.text=n.string();continue;case 3:if(26!==e)break;o.annotations.push(eG.decode(n,n.uint32()));continue;case 4:if(34!==e)break;o.properties.push(nG.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:yG.$type,fieldName:IG(e.fieldName)?YM(e.fieldName):0,text:IG(e.text)?globalThis.String(e.text):"",annotations:globalThis.Array.isArray(null==e?void 0:e.annotations)?e.annotations.map((e=>eG.fromJSON(e))):[],properties:globalThis.Array.isArray(null==e?void 0:e.properties)?e.properties.map((e=>nG.fromJSON(e))):[]}),toJSON(e){var t,n;const r={};return 0!==e.fieldName&&(r.fieldName=XM(e.fieldName)),""!==e.text&&(r.text=e.text),(null===(t=e.annotations)||void 0===t?void 0:t.length)&&(r.annotations=e.annotations.map((e=>eG.toJSON(e)))),(null===(n=e.properties)||void 0===n?void 0:n.length)&&(r.properties=e.properties.map((e=>nG.toJSON(e)))),r},create:e=>yG.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r,o;const i={$type:"deepl.pb.interactive_text_api.Field",fieldName:0,text:"",annotations:[],properties:[]};return i.fieldName=null!==(t=e.fieldName)&&void 0!==t?t:0,i.text=null!==(n=e.text)&&void 0!==n?n:"",i.annotations=(null===(r=e.annotations)||void 0===r?void 0:r.map((e=>eG.fromPartial(e))))||[],i.properties=(null===(o=e.properties)||void 0===o?void 0:o.map((e=>nG.fromPartial(e))))||[],i}};function EG(e){let t=1e3*(e.seconds||0);return t+=(e.nanos||0)/1e6,new globalThis.Date(t)}function SG(e){return e instanceof globalThis.Date?e:"string"==typeof e?new globalThis.Date(e):EG(zk.fromJSON(e))}function IG(e){return null!=e}var AG,bG;function wG(e){switch(e){case 0:case"STATUS_CODE_UNSPECIFIED":return bG.UNSPECIFIED;case 1:case"STATUS_CODE_CANCELLED":return bG.CANCELLED;case 2:case"STATUS_CODE_UNKNOWN":return bG.UNKNOWN;case 3:case"STATUS_CODE_INVALID_ARGUMENT":return bG.INVALID_ARGUMENT;case 4:case"STATUS_CODE_DEADLINE_EXCEEDED":return bG.DEADLINE_EXCEEDED;case 5:case"STATUS_CODE_NOT_FOUND":return bG.NOT_FOUND;case 6:case"STATUS_CODE_ALREADY_EXISTS":return bG.ALREADY_EXISTS;case 7:case"STATUS_CODE_PERMISSION_DENIED":return bG.PERMISSION_DENIED;case 8:case"STATUS_CODE_RESOURCE_EXHAUSTED":return bG.RESOURCE_EXHAUSTED;case 9:case"STATUS_CODE_FAILED_PRECONDITION":return bG.FAILED_PRECONDITION;case 10:case"STATUS_CODE_ABORTED":return bG.ABORTED;case 11:case"STATUS_CODE_OUT_OF_RANGE":return bG.OUT_OF_RANGE;case 12:case"STATUS_CODE_UNIMPLEMENTED":return bG.UNIMPLEMENTED;case 13:case"STATUS_CODE_INTERNAL":return bG.INTERNAL;case 14:case"STATUS_CODE_UNAVAILABLE":return bG.UNAVAILABLE;case 15:case"STATUS_CODE_DATA_LOSS":return bG.DATA_LOSS;case 16:case"STATUS_CODE_UNAUTHENTICATED":return bG.UNAUTHENTICATED;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum StatusCode")}}!function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.START_SESSION_REQUEST=1]="START_SESSION_REQUEST",e[e.START_SESSION_RESPONSE=2]="START_SESSION_RESPONSE",e[e.EVENT_VERSION=3]="EVENT_VERSION",e[e.PARTICIPANT_REQUEST=4]="PARTICIPANT_REQUEST",e[e.PARTICIPANT_RESPONSE=5]="PARTICIPANT_RESPONSE",e[e.CLIENT_ERROR_INFO=6]="CLIENT_ERROR_INFO"}(AG||(AG={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(bG||(bG={}));const OG={$type:"deepl.pb.interactive_text_api.signalr.DetailCode",encode:(e,t=new Fk)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.signalr.DetailCode",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:OG.$type,value:RG(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>OG.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.signalr.DetailCode",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const NG={$type:"deepl.pb.interactive_text_api.signalr.ClientErrorInfo",encode(e,t=new Fk){0!==e.statusCode&&t.uint32(8).int32(e.statusCode),void 0!==e.detailCode&&OG.encode(e.detailCode,t.uint32(18).fork()).join();for(const n of e.fallbackDetailCodes)OG.encode(n,t.uint32(26).fork()).join();return t},decode(e,t){const n=e instanceof jk?e:new jk(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.signalr.ClientErrorInfo",statusCode:0,detailCode:void 0,fallbackDetailCodes:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.statusCode=n.int32();continue;case 2:if(18!==e)break;o.detailCode=OG.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.fallbackDetailCodes.push(OG.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:NG.$type,statusCode:RG(e.statusCode)?wG(e.statusCode):0,detailCode:RG(e.detailCode)?OG.fromJSON(e.detailCode):void 0,fallbackDetailCodes:globalThis.Array.isArray(null==e?void 0:e.fallbackDetailCodes)?e.fallbackDetailCodes.map((e=>OG.fromJSON(e))):[]}),toJSON(e){var t;const n={};return 0!==e.statusCode&&(n.statusCode=function(e){switch(e){case bG.UNSPECIFIED:return"STATUS_CODE_UNSPECIFIED";case bG.CANCELLED:return"STATUS_CODE_CANCELLED";case bG.UNKNOWN:return"STATUS_CODE_UNKNOWN";case bG.INVALID_ARGUMENT:return"STATUS_CODE_INVALID_ARGUMENT";case bG.DEADLINE_EXCEEDED:return"STATUS_CODE_DEADLINE_EXCEEDED";case bG.NOT_FOUND:return"STATUS_CODE_NOT_FOUND";case bG.ALREADY_EXISTS:return"STATUS_CODE_ALREADY_EXISTS";case bG.PERMISSION_DENIED:return"STATUS_CODE_PERMISSION_DENIED";case bG.RESOURCE_EXHAUSTED:return"STATUS_CODE_RESOURCE_EXHAUSTED";case bG.FAILED_PRECONDITION:return"STATUS_CODE_FAILED_PRECONDITION";case bG.ABORTED:return"STATUS_CODE_ABORTED";case bG.OUT_OF_RANGE:return"STATUS_CODE_OUT_OF_RANGE";case bG.UNIMPLEMENTED:return"STATUS_CODE_UNIMPLEMENTED";case bG.INTERNAL:return"STATUS_CODE_INTERNAL";case bG.UNAVAILABLE:return"STATUS_CODE_UNAVAILABLE";case bG.DATA_LOSS:return"STATUS_CODE_DATA_LOSS";case bG.UNAUTHENTICATED:return"STATUS_CODE_UNAUTHENTICATED";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum StatusCode")}}(e.statusCode)),void 0!==e.detailCode&&(n.detailCode=OG.toJSON(e.detailCode)),(null===(t=e.fallbackDetailCodes)||void 0===t?void 0:t.length)&&(n.fallbackDetailCodes=e.fallbackDetailCodes.map((e=>OG.toJSON(e)))),n},create:e=>NG.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.signalr.ClientErrorInfo",statusCode:0,detailCode:void 0,fallbackDetailCodes:[]};return r.statusCode=null!==(t=e.statusCode)&&void 0!==t?t:0,r.detailCode=void 0!==e.detailCode&&null!==e.detailCode?OG.fromPartial(e.detailCode):void 0,r.fallbackDetailCodes=(null===(n=e.fallbackDetailCodes)||void 0===n?void 0:n.map((e=>OG.fromPartial(e))))||[],r}};function RG(e){return null!=e}function LG(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function PG(){const e=new BC;return e.register({type:AG.START_SESSION_REQUEST,encode:e=>LG(e)&&"sessionMode"in e?rG.encode(e).finish():null,decode:e=>rG.decode(e)}),e.register({type:AG.START_SESSION_RESPONSE,encode:e=>LG(e)&&"sessionId"in e&&"participantId"in e&&"sessionToken"in e?oG.encode(e).finish():null,decode:e=>oG.decode(e)}),e.register({type:AG.EVENT_VERSION,encode:e=>LG(e)&&"version"in e?_G.encode(e).finish():null,decode:e=>_G.decode(e)}),e.register({type:AG.PARTICIPANT_REQUEST,encode:e=>LG(e)&&("appendMessage"in e||"updateAuthenticationTokenMessage"in e)?iG.encode(e).finish():null,decode:e=>iG.decode(e)}),e.register({type:AG.PARTICIPANT_RESPONSE,encode:e=>LG(e)&&"confirmedMessage"in e&&"initializedMessage"in e&&"publishedMessage"in e?aG.encode(e).finish():null,decode:e=>aG.decode(e)}),e.register({type:AG.CLIENT_ERROR_INFO,encode:e=>LG(e)&&"statusCode"in e&&"detailCode"in e&&"fallbackDetailCodes"in e?NG.encode(e).finish():null,decode:e=>NG.decode(e)}),e}
/**
     * @license
     * MIT License
     * 
     * Copyright (c) 2014-present, Lee Byron and other contributors.
     * 
     * Permission is hereby granted, free of charge, to any person obtaining a copy
     * of this software and associated documentation files (the "Software"), to deal
     * in the Software without restriction, including without limitation the rights
     * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
     * copies of the Software, and to permit persons to whom the Software is
     * furnished to do so, subject to the following conditions:
     * 
     * The above copyright notice and this permission notice shall be included in all
     * copies or substantial portions of the Software.
     * 
     * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
     * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
     * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
     * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
     * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
     * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
     * SOFTWARE.
     */var CG="delete",xG=32,kG=31,DG={};function UG(e){e&&(e.value=!0)}function MG(){}function GG(e){return void 0===e.size&&(e.size=e.__iterate($G)),e.size}function VG(e,t){if("number"!=typeof t){var n=t>>>0;if(""+n!==t||4294967295===n)return NaN;t=n}return t<0?GG(e)+t:t}function $G(){return!0}function FG(e,t,n){return(0===e&&!BG(e)||void 0!==n&&e<=-n)&&(void 0===t||void 0!==n&&t>=n)}function jG(e,t){return qG(e,t,0)}function WG(e,t){return qG(e,t,t)}function qG(e,t,n){return void 0===e?n:BG(e)?t===1/0?t:0|Math.max(0,t+e):void 0===t||t===e?e:0|Math.min(t,e)}function BG(e){return e<0||0===e&&1/e==-1/0}var HG="@@__IMMUTABLE_ITERABLE__@@";function JG(e){return Boolean(e&&e[HG])}var zG="@@__IMMUTABLE_KEYED__@@";function YG(e){return Boolean(e&&e[zG])}var XG="@@__IMMUTABLE_INDEXED__@@";function KG(e){return Boolean(e&&e[XG])}function QG(e){return YG(e)||KG(e)}var ZG=function(e){return JG(e)?e:SV(e)},eV=function(e){function t(e){return YG(e)?e:IV(e)}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t}(ZG),tV=function(e){function t(e){return KG(e)?e:AV(e)}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t}(ZG),nV=function(e){function t(e){return JG(e)&&!QG(e)?e:bV(e)}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t}(ZG);ZG.Keyed=eV,ZG.Indexed=tV,ZG.Set=nV;var rV="@@__IMMUTABLE_SEQ__@@";function oV(e){return Boolean(e&&e[rV])}var iV="@@__IMMUTABLE_RECORD__@@";function aV(e){return Boolean(e&&e[iV])}function sV(e){return JG(e)||aV(e)}var lV="@@__IMMUTABLE_ORDERED__@@";function cV(e){return Boolean(e&&e[lV])}var uV="function"==typeof Symbol&&Symbol.iterator,dV="@@iterator",pV=uV||dV,gV=function(e){this.next=e};function hV(e,t,n,r){var o=0===e?t:1===e?n:[t,n];return r?r.value=o:r={value:o,done:!1},r}function fV(){return{value:void 0,done:!0}}function _V(e){return!!Array.isArray(e)||!!TV(e)}function mV(e){return e&&"function"==typeof e.next}function vV(e){var t=TV(e);return t&&t.call(e)}function TV(e){var t=e&&(uV&&e[uV]||e[dV]);if("function"==typeof t)return t}gV.prototype.toString=function(){return"[Iterator]"},gV.KEYS=0,gV.VALUES=1,gV.ENTRIES=2,gV.prototype.inspect=gV.prototype.toSource=function(){return this.toString()},gV.prototype[pV]=function(){return this};var yV=Object.prototype.hasOwnProperty;function EV(e){return!(!Array.isArray(e)&&"string"!=typeof e)||e&&"object"==typeof e&&Number.isInteger(e.length)&&e.length>=0&&(0===e.length?1===Object.keys(e).length:e.hasOwnProperty(e.length-1))}var SV=function(e){function t(e){return null==e?LV():sV(e)?e.toSeq():function(e){var t=xV(e);if(t)return(r=TV(n=e))&&r===n.entries?t.fromEntrySeq():function(e){var t=TV(e);return t&&t===e.keys}(e)?t.toSetSeq():t;var n,r;if("object"==typeof e)return new OV(e);throw new TypeError("Expected Array or collection object of values, or keyed object: "+e)}(e)}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.toSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq {","}")},t.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},t.prototype.__iterate=function(e,t){var n=this._cache;if(n){for(var r=n.length,o=0;o!==r;){var i=n[t?r-++o:o++];if(!1===e(i[1],i[0],this))break}return o}return this.__iterateUncached(e,t)},t.prototype.__iterator=function(e,t){var n=this._cache;if(n){var r=n.length,o=0;return new gV((function(){if(o===r)return{value:void 0,done:!0};var i=n[t?r-++o:o++];return hV(e,i[0],i[1])}))}return this.__iteratorUncached(e,t)},t}(ZG),IV=function(e){function t(e){return null==e?LV().toKeyedSeq():JG(e)?YG(e)?e.toSeq():e.fromEntrySeq():aV(e)?e.toSeq():PV(e)}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.toKeyedSeq=function(){return this},t}(SV),AV=function(e){function t(e){return null==e?LV():JG(e)?YG(e)?e.entrySeq():e.toIndexedSeq():aV(e)?e.toSeq().entrySeq():CV(e)}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toIndexedSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq [","]")},t}(SV),bV=function(e){function t(e){return(JG(e)&&!QG(e)?e:AV(e)).toSetSeq()}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toSetSeq=function(){return this},t}(SV);SV.isSeq=oV,SV.Keyed=IV,SV.Set=bV,SV.Indexed=AV,SV.prototype[rV]=!0;var wV=function(e){function t(e){this._array=e,this.size=e.length}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this.has(e)?this._array[VG(this,e)]:t},t.prototype.__iterate=function(e,t){for(var n=this._array,r=n.length,o=0;o!==r;){var i=t?r-++o:o++;if(!1===e(n[i],i,this))break}return o},t.prototype.__iterator=function(e,t){var n=this._array,r=n.length,o=0;return new gV((function(){if(o===r)return{value:void 0,done:!0};var i=t?r-++o:o++;return hV(e,i,n[i])}))},t}(AV),OV=function(e){function t(e){var t=Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]);this._object=e,this._keys=t,this.size=t.length}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},t.prototype.has=function(e){return yV.call(this._object,e)},t.prototype.__iterate=function(e,t){for(var n=this._object,r=this._keys,o=r.length,i=0;i!==o;){var a=r[t?o-++i:i++];if(!1===e(n[a],a,this))break}return i},t.prototype.__iterator=function(e,t){var n=this._object,r=this._keys,o=r.length,i=0;return new gV((function(){if(i===o)return{value:void 0,done:!0};var a=r[t?o-++i:i++];return hV(e,a,n[a])}))},t}(IV);OV.prototype[lV]=!0;var NV,RV=function(e){function t(e){this._collection=e,this.size=e.length||e.size}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=vV(this._collection),r=0;if(mV(n))for(var o;!(o=n.next()).done&&!1!==e(o.value,r++,this););return r},t.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=vV(this._collection);if(!mV(n))return new gV(fV);var r=0;return new gV((function(){var t=n.next();return t.done?t:hV(e,r++,t.value)}))},t}(AV);function LV(){return NV||(NV=new wV([]))}function PV(e){var t=xV(e);if(t)return t.fromEntrySeq();if("object"==typeof e)return new OV(e);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+e)}function CV(e){var t=xV(e);if(t)return t;throw new TypeError("Expected Array or collection object of values: "+e)}function xV(e){return EV(e)?new wV(e):_V(e)?new RV(e):void 0}var kV="@@__IMMUTABLE_MAP__@@";function DV(e){return Boolean(e&&e[kV])}function UV(e){return DV(e)&&cV(e)}function MV(e){return Boolean(e&&"function"==typeof e.equals&&"function"==typeof e.hashCode)}function GV(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if((e=e.valueOf())===(t=t.valueOf())||e!=e&&t!=t)return!0;if(!e||!t)return!1}return!!(MV(e)&&MV(t)&&e.equals(t))}var VV="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var n=65535&(e|=0),r=65535&(t|=0);return n*r+((e>>>16)*r+n*(t>>>16)<<16>>>0)|0};function $V(e){return e>>>1&1073741824|3221225471&e}var FV=Object.prototype.valueOf;function jV(e){if(null==e)return WV(e);if("function"==typeof e.hashCode)return $V(e.hashCode(e));var t,n=(t=e).valueOf!==FV&&"function"==typeof t.valueOf?t.valueOf(t):t;if(null==n)return WV(n);switch(typeof n){case"boolean":return n?1108378657:1108378656;case"number":return function(e){if(e!=e||e===1/0)return 0;var t=0|e;t!==e&&(t^=4294967295*e);for(;e>4294967295;)t^=e/=4294967295;return $V(t)}(n);case"string":return n.length>ZV?function(e){var t=n$[e];void 0===t&&(t=qV(e),t$===e$&&(t$=0,n$={}),t$++,n$[e]=t);return t}(n):qV(n);case"object":case"function":return function(e){var t;if(YV&&void 0!==(t=zV.get(e)))return t;if(t=e[QV],void 0!==t)return t;if(!HV){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[QV]))return t;if(void 0!==(t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}(e)))return t}if(t=JV(),YV)zV.set(e,t);else{if(void 0!==BV&&!1===BV(e))throw new Error("Non-extensible objects are not allowed as keys.");if(HV)Object.defineProperty(e,QV,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[QV]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[QV]=t}}return t}(n);case"symbol":return function(e){var t=XV[e];if(void 0!==t)return t;return t=JV(),XV[e]=t,t}(n);default:if("function"==typeof n.toString)return qV(n.toString());throw new Error("Value type "+typeof n+" cannot be hashed.")}}function WV(e){return null===e?1108378658:1108378659}function qV(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return $V(t)}var BV=Object.isExtensible,HV=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}();function JV(){var e=++KV;return 1073741824&KV&&(KV=0),e}var zV,YV="function"==typeof WeakMap;YV&&(zV=new WeakMap);var XV=Object.create(null),KV=0,QV="__immutablehash__";"function"==typeof Symbol&&(QV=Symbol(QV));var ZV=16,e$=255,t$=0,n$={},r$=function(e){function t(e,t){this._iter=e,this._useKeys=t,this.size=e.size}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this._iter.get(e,t)},t.prototype.has=function(e){return this._iter.has(e)},t.prototype.valueSeq=function(){return this._iter.valueSeq()},t.prototype.reverse=function(){var e=this,t=c$(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},t.prototype.map=function(e,t){var n=this,r=l$(this,e,t);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(e,t)}),r},t.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t,r){return e(t,r,n)}),t)},t.prototype.__iterator=function(e,t){return this._iter.__iterator(e,t)},t}(IV);r$.prototype[lV]=!0;var o$=function(e){function t(e){this._iter=e,this.size=e.size}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.includes=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var n=this,r=0;return t&&GG(this),this._iter.__iterate((function(o){return e(o,t?n.size-++r:r++,n)}),t)},t.prototype.__iterator=function(e,t){var n=this,r=this._iter.__iterator(1,t),o=0;return t&&GG(this),new gV((function(){var i=r.next();return i.done?i:hV(e,t?n.size-++o:o++,i.value,i)}))},t}(AV),i$=function(e){function t(e){this._iter=e,this.size=e.size}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.has=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t){return e(t,t,n)}),t)},t.prototype.__iterator=function(e,t){var n=this._iter.__iterator(1,t);return new gV((function(){var t=n.next();return t.done?t:hV(e,t.value,t.value,t)}))},t}(bV),a$=function(e){function t(e){this._iter=e,this.size=e.size}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.entrySeq=function(){return this._iter.toSeq()},t.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate((function(t){if(t){y$(t);var r=JG(t);return e(r?t.get(1):t[1],r?t.get(0):t[0],n)}}),t)},t.prototype.__iterator=function(e,t){var n=this._iter.__iterator(1,t);return new gV((function(){for(;;){var t=n.next();if(t.done)return t;var r=t.value;if(r){y$(r);var o=JG(r);return hV(e,o?r.get(0):r[0],o?r.get(1):r[1],t)}}}))},t}(IV);function s$(e){var t=S$(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=I$,t.__iterateUncached=function(t,n){var r=this;return e.__iterate((function(e,n){return!1!==t(n,e,r)}),n)},t.__iteratorUncached=function(t,n){if(2===t){var r=e.__iterator(t,n);return new gV((function(){var e=r.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e}))}return e.__iterator(1===t?0:1,n)},t}function l$(e,t,n){var r=S$(e);return r.size=e.size,r.has=function(t){return e.has(t)},r.get=function(r,o){var i=e.get(r,DG);return i===DG?o:t.call(n,i,r,e)},r.__iterateUncached=function(r,o){var i=this;return e.__iterate((function(e,o,a){return!1!==r(t.call(n,e,o,a),o,i)}),o)},r.__iteratorUncached=function(r,o){var i=e.__iterator(2,o);return new gV((function(){var o=i.next();if(o.done)return o;var a=o.value,s=a[0];return hV(r,s,t.call(n,a[1],s,e),o)}))},r}function c$(e,t){var n=this,r=S$(e);return r._iter=e,r.size=e.size,r.reverse=function(){return e},e.flip&&(r.flip=function(){var t=s$(e);return t.reverse=function(){return e.flip()},t}),r.get=function(n,r){return e.get(t?n:-1-n,r)},r.has=function(n){return e.has(t?n:-1-n)},r.includes=function(t){return e.includes(t)},r.cacheResult=I$,r.__iterate=function(n,r){var o=this,i=0;return r&&GG(e),e.__iterate((function(e,a){return n(e,t?a:r?o.size-++i:i++,o)}),!r)},r.__iterator=function(r,o){var i=0;o&&GG(e);var a=e.__iterator(2,!o);return new gV((function(){var e=a.next();if(e.done)return e;var s=e.value;return hV(r,t?s[0]:o?n.size-++i:i++,s[1],e)}))},r}function u$(e,t,n,r){var o=S$(e);return r&&(o.has=function(r){var o=e.get(r,DG);return o!==DG&&!!t.call(n,o,r,e)},o.get=function(r,o){var i=e.get(r,DG);return i!==DG&&t.call(n,i,r,e)?i:o}),o.__iterateUncached=function(o,i){var a=this,s=0;return e.__iterate((function(e,i,l){if(t.call(n,e,i,l))return s++,o(e,r?i:s-1,a)}),i),s},o.__iteratorUncached=function(o,i){var a=e.__iterator(2,i),s=0;return new gV((function(){for(;;){var i=a.next();if(i.done)return i;var l=i.value,c=l[0],u=l[1];if(t.call(n,u,c,e))return hV(o,r?c:s++,u,i)}}))},o}function d$(e,t,n,r){var o=e.size;if(FG(t,n,o))return e;if(void 0===o&&(t<0||n<0))return d$(e.toSeq().cacheResult(),t,n,r);var i,a=jG(t,o),s=WG(n,o)-a;s==s&&(i=s<0?0:s);var l=S$(e);return l.size=0===i?i:e.size&&i||void 0,!r&&oV(e)&&i>=0&&(l.get=function(t,n){return(t=VG(this,t))>=0&&t<i?e.get(t+a,n):n}),l.__iterateUncached=function(t,n){var o=this;if(0===i)return 0;if(n)return this.cacheResult().__iterate(t,n);var s=0,l=!0,c=0;return e.__iterate((function(e,n){if(!l||!(l=s++<a))return c++,!1!==t(e,r?n:c-1,o)&&c!==i})),c},l.__iteratorUncached=function(t,n){if(0!==i&&n)return this.cacheResult().__iterator(t,n);if(0===i)return new gV(fV);var o=e.__iterator(t,n),s=0,l=0;return new gV((function(){for(;s++<a;)o.next();if(++l>i)return{value:void 0,done:!0};var e=o.next();return r||1===t||e.done?e:hV(t,l-1,0===t?void 0:e.value[1],e)}))},l}function p$(e,t,n,r){var o=S$(e);return o.__iterateUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterate(o,i);var s=!0,l=0;return e.__iterate((function(e,i,c){if(!s||!(s=t.call(n,e,i,c)))return l++,o(e,r?i:l-1,a)})),l},o.__iteratorUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterator(o,i);var s=e.__iterator(2,i),l=!0,c=0;return new gV((function(){var e,i,u;do{if((e=s.next()).done)return r||1===o?e:hV(o,c++,0===o?void 0:e.value[1],e);var d=e.value;i=d[0],u=d[1],l&&(l=t.call(n,u,i,a))}while(l);return 2===o?e:hV(o,i,u,e)}))},o}o$.prototype.cacheResult=r$.prototype.cacheResult=i$.prototype.cacheResult=a$.prototype.cacheResult=I$;var g$=function(e){function t(e){this._wrappedIterables=e.flatMap((function(e){return e._wrappedIterables?e._wrappedIterables:[e]})),this.size=this._wrappedIterables.reduce((function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}}),0),this[zG]=this._wrappedIterables[0][zG],this[XG]=this._wrappedIterables[0][XG],this[lV]=this._wrappedIterables[0][lV]}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(e,t){if(0!==this._wrappedIterables.length){if(t)return this.cacheResult().__iterate(e,t);for(var n=0,r=YG(this),o=r?2:1,i=this._wrappedIterables[n].__iterator(o,t),a=!0,s=0;a;){for(var l=i.next();l.done;){if(++n===this._wrappedIterables.length)return s;l=(i=this._wrappedIterables[n].__iterator(o,t)).next()}a=!1!==(r?e(l.value[1],l.value[0],this):e(l.value,s,this)),s++}return s}},t.prototype.__iteratorUncached=function(e,t){var n=this;if(0===this._wrappedIterables.length)return new gV(fV);if(t)return this.cacheResult().__iterator(e,t);var r=0,o=this._wrappedIterables[r].__iterator(e,t);return new gV((function(){for(var i=o.next();i.done;){if(++r===n._wrappedIterables.length)return i;i=(o=n._wrappedIterables[r].__iterator(e,t)).next()}return i}))},t}(SV);function h$(e,t,n){var r=S$(e);return r.__iterateUncached=function(o,i){if(i)return this.cacheResult().__iterate(o,i);var a=0,s=!1;return function e(l,c){l.__iterate((function(i,l){return(!t||c<t)&&JG(i)?e(i,c+1):(a++,!1===o(i,n?l:a-1,r)&&(s=!0)),!s}),i)}(e,0),a},r.__iteratorUncached=function(r,o){if(o)return this.cacheResult().__iterator(r,o);var i=e.__iterator(r,o),a=[],s=0;return new gV((function(){for(;i;){var e=i.next();if(!1===e.done){var l=e.value;if(2===r&&(l=l[1]),t&&!(a.length<t)||!JG(l))return n?e:hV(r,s++,l,e);a.push(i),i=l.__iterator(r,o)}else i=a.pop()}return{value:void 0,done:!0}}))},r}function f$(e,t,n){t||(t=A$);var r=YG(e),o=0,i=e.toSeq().map((function(t,r){return[r,t,o++,n?n(t,r,e):t]})).valueSeq().toArray();return i.sort((function(e,n){return t(e[3],n[3])||e[2]-n[2]})).forEach(r?function(e,t){i[t].length=2}:function(e,t){i[t]=e[1]}),r?IV(i):KG(e)?AV(i):bV(i)}function _$(e,t,n){if(t||(t=A$),n){var r=e.toSeq().map((function(t,r){return[t,n(t,r,e)]})).reduce((function(e,n){return m$(t,e[1],n[1])?n:e}));return r&&r[0]}return e.reduce((function(e,n){return m$(t,e,n)?n:e}))}function m$(e,t,n){var r=e(n,t);return 0===r&&n!==t&&(null==n||n!=n)||r>0}function v$(e,t,n,r){var o=S$(e),i=new wV(n).map((function(e){return e.size}));return o.size=r?i.max():i.min(),o.__iterate=function(e,t){for(var n,r=this.__iterator(1,t),o=0;!(n=r.next()).done&&!1!==e(n.value,o++,this););return o},o.__iteratorUncached=function(e,o){var i=n.map((function(e){return e=ZG(e),vV(o?e.reverse():e)})),a=0,s=!1;return new gV((function(){var n;return s||(n=i.map((function(e){return e.next()})),s=r?n.every((function(e){return e.done})):n.some((function(e){return e.done}))),s?{value:void 0,done:!0}:hV(e,a++,t.apply(null,n.map((function(e){return e.value}))))}))},o}function T$(e,t){return e===t?e:oV(e)?t:e.constructor(t)}function y$(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function E$(e){return YG(e)?eV:KG(e)?tV:nV}function S$(e){return Object.create((YG(e)?IV:KG(e)?AV:bV).prototype)}function I$(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):SV.prototype.cacheResult.call(this)}function A$(e,t){return void 0===e&&void 0===t?0:void 0===e?1:void 0===t?-1:e>t?1:e<t?-1:0}function b$(e,t){t=t||0;for(var n=Math.max(0,e.length-t),r=new Array(n),o=0;o<n;o++)r[o]=e[o+t];return r}function w$(e,t){if(!e)throw new Error(t)}function O$(e){w$(e!==1/0,"Cannot perform this action with an infinite size.")}function N$(e){if(EV(e)&&"string"!=typeof e)return e;if(cV(e))return e.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+e)}var R$=Object.prototype.toString;function L$(e){return"object"==typeof e&&(sV(e)||Array.isArray(e)||function(e){if(!e||"object"!=typeof e||"[object Object]"!==R$.call(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t,r=Object.getPrototypeOf(t);null!==r;)n=r,r=Object.getPrototypeOf(n);return n===t}(e))}function P$(e){try{return"string"==typeof e?JSON.stringify(e):String(e)}catch(t){return JSON.stringify(e)}}function C$(e,t,n){return sV(e)?e.get(t,n):function(e,t){return sV(e)?e.has(t):L$(e)&&yV.call(e,t)}(e,t)?"function"==typeof e.get?e.get(t):e[t]:n}function x$(e){if(Array.isArray(e))return b$(e);var t={};for(var n in e)yV.call(e,n)&&(t[n]=e[n]);return t}function k$(e,t,n,r){r||(r=n,n=void 0);var o=D$(sV(e),e,N$(t),0,n,r);return o===DG?n:o}function D$(e,t,n,r,o,i){var a=t===DG;if(r===n.length){var s=a?o:t,l=i(s);return l===s?t:l}if(!a&&!L$(t))throw new TypeError("Cannot update within non-data-structure value in path ["+Array.from(n).slice(0,r).map(P$)+"]: "+t);var c=n[r],u=a?DG:C$(t,c,DG),d=D$(u===DG?e:sV(u),u,n,r+1,o,i);return d===u?t:d===DG?function(e,t){if(!L$(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(sV(e)){if(!e.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+e);return e.remove(t)}if(!yV.call(e,t))return e;var n=x$(e);return Array.isArray(n)?n.splice(t,1):delete n[t],n}(t,c):function(e,t,n){if(!L$(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(sV(e)){if(!e.set)throw new TypeError("Cannot update immutable value without .set() method: "+e);return e.set(t,n)}if(yV.call(e,t)&&n===e[t])return e;var r=x$(e);return r[t]=n,r}(a?e?pF():{}:t,c,d)}function U$(e,t){return function(e,t,n){return k$(e,t,DG,(function(){return n}))}(this,e,t)}function M$(e){return function(e,t){return k$(e,t,(function(){return DG}))}(this,e)}function G$(e,t,n,r){return k$(e,[t],n,r)}function V$(e,t,n){return 1===arguments.length?e(this):G$(this,e,t,n)}function $$(e,t,n){return k$(this,e,t,n)}function F$(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return W$(this,e)}function j$(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if("function"!=typeof e)throw new TypeError("Invalid merger function: "+e);return W$(this,t,e)}function W$(e,t,n){for(var r=[],o=0;o<t.length;o++){var i=eV(t[o]);0!==i.size&&r.push(i)}return 0===r.length?e:0!==e.toSeq().size||e.__ownerID||1!==r.length?e.withMutations((function(e){for(var t=n?function(t,r){G$(e,r,DG,(function(e){return e===DG?t:n(e,t,r)}))}:function(t,n){e.set(n,t)},o=0;o<r.length;o++)r[o].forEach(t)})):aV(e)?e:e.constructor(r[0])}function q$(e,t,n){return B$(e,t,function(e){function t(n,r,o){return L$(n)&&L$(r)&&(i=r,a=SV(n),s=SV(i),KG(a)===KG(s)&&YG(a)===YG(s))?B$(n,[r],t):e?e(n,r,o):r;var i,a,s}return t}(n))}function B$(e,t,n){if(!L$(e))throw new TypeError("Cannot merge into non-data-structure value: "+e);if(sV(e))return"function"==typeof n&&e.mergeWith?e.mergeWith.apply(e,[n].concat(t)):e.merge?e.merge.apply(e,t):e.concat.apply(e,t);for(var r=Array.isArray(e),o=e,i=r?tV:eV,a=r?function(t){o===e&&(o=x$(o)),o.push(t)}:function(t,r){var i=yV.call(o,r),a=i&&n?n(o[r],t,r):t;i&&a===o[r]||(o===e&&(o=x$(o)),o[r]=a)},s=0;s<t.length;s++)i(t[s]).forEach(a);return o}function H$(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return q$(this,e)}function J$(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return q$(this,t,e)}function z$(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return k$(this,e,pF(),(function(e){return B$(e,t)}))}function Y$(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return k$(this,e,pF(),(function(e){return q$(e,t)}))}function X$(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this}function K$(){return this.__ownerID?this:this.__ensureOwner(new MG)}function Q$(){return this.__ensureOwner()}function Z$(){return this.__altered}var eF=function(e){function t(t){return null==t?pF():DV(t)&&!cV(t)?t:pF().withMutations((function(n){var r=e(t);O$(r.size),r.forEach((function(e,t){return n.set(t,e)}))}))}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},t.prototype.set=function(e,t){return gF(this,e,t)},t.prototype.remove=function(e){return gF(this,e,DG)},t.prototype.deleteAll=function(e){var t=ZG(e);return 0===t.size?this:this.withMutations((function(e){t.forEach((function(t){return e.remove(t)}))}))},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):pF()},t.prototype.sort=function(e){return MF(f$(this,e))},t.prototype.sortBy=function(e,t){return MF(f$(this,t,e))},t.prototype.map=function(e,t){var n=this;return this.withMutations((function(r){r.forEach((function(o,i){r.set(i,e.call(t,o,i,n))}))}))},t.prototype.__iterator=function(e,t){return new lF(this,e,t)},t.prototype.__iterate=function(e,t){var n=this,r=0;return this._root&&this._root.iterate((function(t){return r++,e(t[1],t[0],n)}),t),r},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?dF(this.size,this._root,e,this.__hash):0===this.size?pF():(this.__ownerID=e,this.__altered=!1,this)},t}(eV);eF.isMap=DV;var tF=eF.prototype;tF[kV]=!0,tF[CG]=tF.remove,tF.removeAll=tF.deleteAll,tF.setIn=U$,tF.removeIn=tF.deleteIn=M$,tF.update=V$,tF.updateIn=$$,tF.merge=tF.concat=F$,tF.mergeWith=j$,tF.mergeDeep=H$,tF.mergeDeepWith=J$,tF.mergeIn=z$,tF.mergeDeepIn=Y$,tF.withMutations=X$,tF.wasAltered=Z$,tF.asImmutable=Q$,tF["@@transducer/init"]=tF.asMutable=K$,tF["@@transducer/step"]=function(e,t){return e.set(t[0],t[1])},tF["@@transducer/result"]=function(e){return e.asImmutable()};var nF=function(e,t){this.ownerID=e,this.entries=t};nF.prototype.get=function(e,t,n,r){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(GV(n,o[i][0]))return o[i][1];return r},nF.prototype.update=function(e,t,n,r,o,i,a){for(var s=o===DG,l=this.entries,c=0,u=l.length;c<u&&!GV(r,l[c][0]);c++);var d=c<u;if(d?l[c][1]===o:s)return this;if(UG(a),(s||!d)&&UG(i),!s||1!==l.length){if(!d&&!s&&l.length>=TF)return function(e,t,n,r){e||(e=new MG);for(var o=new aF(e,jV(n),[n,r]),i=0;i<t.length;i++){var a=t[i];o=o.update(e,0,void 0,a[0],a[1])}return o}(e,l,r,o);var p=e&&e===this.ownerID,g=p?l:b$(l);return d?s?c===u-1?g.pop():g[c]=g.pop():g[c]=[r,o]:g.push([r,o]),p?(this.entries=g,this):new nF(e,g)}};var rF=function(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n};rF.prototype.get=function(e,t,n,r){void 0===t&&(t=jV(n));var o=1<<((0===e?t:t>>>e)&kG),i=this.bitmap;return i&o?this.nodes[mF(i&o-1)].get(e+5,t,n,r):r},rF.prototype.update=function(e,t,n,r,o,i,a){void 0===n&&(n=jV(r));var s=(0===t?n:n>>>t)&kG,l=1<<s,c=this.bitmap,u=!!(c&l);if(!u&&o===DG)return this;var d=mF(c&l-1),p=this.nodes,g=u?p[d]:void 0,h=hF(g,e,t+5,n,r,o,i,a);if(h===g)return this;if(!u&&h&&p.length>=yF)return function(e,t,n,r,o){for(var i=0,a=new Array(xG),s=0;0!==n;s++,n>>>=1)a[s]=1&n?t[i++]:void 0;return a[r]=o,new oF(e,i+1,a)}(e,p,c,s,h);if(u&&!h&&2===p.length&&fF(p[1^d]))return p[1^d];if(u&&h&&1===p.length&&fF(h))return h;var f=e&&e===this.ownerID,_=u?h?c:c^l:c|l,m=u?h?vF(p,d,h,f):function(e,t,n){var r=e.length-1;if(n&&t===r)return e.pop(),e;for(var o=new Array(r),i=0,a=0;a<r;a++)a===t&&(i=1),o[a]=e[a+i];return o}(p,d,f):function(e,t,n,r){var o=e.length+1;if(r&&t+1===o)return e[t]=n,e;for(var i=new Array(o),a=0,s=0;s<o;s++)s===t?(i[s]=n,a=-1):i[s]=e[s+a];return i}(p,d,h,f);return f?(this.bitmap=_,this.nodes=m,this):new rF(e,_,m)};var oF=function(e,t,n){this.ownerID=e,this.count=t,this.nodes=n};oF.prototype.get=function(e,t,n,r){void 0===t&&(t=jV(n));var o=(0===e?t:t>>>e)&kG,i=this.nodes[o];return i?i.get(e+5,t,n,r):r},oF.prototype.update=function(e,t,n,r,o,i,a){void 0===n&&(n=jV(r));var s=(0===t?n:n>>>t)&kG,l=o===DG,c=this.nodes,u=c[s];if(l&&!u)return this;var d=hF(u,e,t+5,n,r,o,i,a);if(d===u)return this;var p=this.count;if(u){if(!d&&--p<EF)return function(e,t,n,r){for(var o=0,i=0,a=new Array(n),s=0,l=1,c=t.length;s<c;s++,l<<=1){var u=t[s];void 0!==u&&s!==r&&(o|=l,a[i++]=u)}return new rF(e,o,a)}(e,c,p,s)}else p++;var g=e&&e===this.ownerID,h=vF(c,s,d,g);return g?(this.count=p,this.nodes=h,this):new oF(e,p,h)};var iF=function(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n};iF.prototype.get=function(e,t,n,r){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(GV(n,o[i][0]))return o[i][1];return r},iF.prototype.update=function(e,t,n,r,o,i,a){void 0===n&&(n=jV(r));var s=o===DG;if(n!==this.keyHash)return s?this:(UG(a),UG(i),_F(this,e,t,n,[r,o]));for(var l=this.entries,c=0,u=l.length;c<u&&!GV(r,l[c][0]);c++);var d=c<u;if(d?l[c][1]===o:s)return this;if(UG(a),(s||!d)&&UG(i),s&&2===u)return new aF(e,this.keyHash,l[1^c]);var p=e&&e===this.ownerID,g=p?l:b$(l);return d?s?c===u-1?g.pop():g[c]=g.pop():g[c]=[r,o]:g.push([r,o]),p?(this.entries=g,this):new iF(e,this.keyHash,g)};var aF=function(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n};aF.prototype.get=function(e,t,n,r){return GV(n,this.entry[0])?this.entry[1]:r},aF.prototype.update=function(e,t,n,r,o,i,a){var s=o===DG,l=GV(r,this.entry[0]);return(l?o===this.entry[1]:s)?this:(UG(a),s?void UG(i):l?e&&e===this.ownerID?(this.entry[1]=o,this):new aF(e,this.keyHash,[r,o]):(UG(i),_F(this,e,t,jV(r),[r,o])))},nF.prototype.iterate=iF.prototype.iterate=function(e,t){for(var n=this.entries,r=0,o=n.length-1;r<=o;r++)if(!1===e(n[t?o-r:r]))return!1},rF.prototype.iterate=oF.prototype.iterate=function(e,t){for(var n=this.nodes,r=0,o=n.length-1;r<=o;r++){var i=n[t?o-r:r];if(i&&!1===i.iterate(e,t))return!1}},aF.prototype.iterate=function(e,t){return e(this.entry)};var sF,lF=function(e){function t(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&uF(e._root)}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n=t.node,r=t.index++,o=void 0;if(n.entry){if(0===r)return cF(e,n.entry)}else if(n.entries){if(r<=(o=n.entries.length-1))return cF(e,n.entries[this._reverse?o-r:r])}else if(r<=(o=n.nodes.length-1)){var i=n.nodes[this._reverse?o-r:r];if(i){if(i.entry)return cF(e,i.entry);t=this._stack=uF(i,t)}continue}t=this._stack=this._stack.__prev}return{value:void 0,done:!0}},t}(gV);function cF(e,t){return hV(e,t[0],t[1])}function uF(e,t){return{node:e,index:0,__prev:t}}function dF(e,t,n,r){var o=Object.create(tF);return o.size=e,o._root=t,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function pF(){return sF||(sF=dF(0))}function gF(e,t,n){var r,o;if(e._root){var i={value:!1},a={value:!1};if(r=hF(e._root,e.__ownerID,0,void 0,t,n,i,a),!a.value)return e;o=e.size+(i.value?n===DG?-1:1:0)}else{if(n===DG)return e;o=1,r=new nF(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=o,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?dF(o,r):pF()}function hF(e,t,n,r,o,i,a,s){return e?e.update(t,n,r,o,i,a,s):i===DG?e:(UG(s),UG(a),new aF(t,r,[o,i]))}function fF(e){return e.constructor===aF||e.constructor===iF}function _F(e,t,n,r,o){if(e.keyHash===r)return new iF(t,r,[e.entry,o]);var i,a=(0===n?e.keyHash:e.keyHash>>>n)&kG,s=(0===n?r:r>>>n)&kG,l=a===s?[_F(e,t,n+5,r,o)]:(i=new aF(t,r,o),a<s?[e,i]:[i,e]);return new rF(t,1<<a|1<<s,l)}function mF(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function vF(e,t,n,r){var o=r?e:b$(e);return o[t]=n,o}var TF=8,yF=16,EF=8,SF="@@__IMMUTABLE_LIST__@@";function IF(e){return Boolean(e&&e[SF])}var AF=function(e){function t(t){var n=LF();if(null==t)return n;if(IF(t))return t;var r=e(t),o=r.size;return 0===o?n:(O$(o),o>0&&o<xG?RF(0,o,5,null,new wF(r.toArray())):n.withMutations((function(e){e.setSize(o),r.forEach((function(t,n){return e.set(n,t)}))})))}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(e,t){if((e=VG(this,e))>=0&&e<this.size){var n=xF(this,e+=this._origin);return n&&n.array[e&kG]}return t},t.prototype.set=function(e,t){return function(e,t,n){if(t=VG(e,t),t!=t)return e;if(t>=e.size||t<0)return e.withMutations((function(e){t<0?kF(e,t).set(0,n):kF(e,0,t+1).set(t,n)}));t+=e._origin;var r=e._tail,o=e._root,i={value:!1};t>=DF(e._capacity)?r=PF(r,e.__ownerID,0,t,n,i):o=PF(o,e.__ownerID,e._level,t,n,i);if(!i.value)return e;if(e.__ownerID)return e._root=o,e._tail=r,e.__hash=void 0,e.__altered=!0,e;return RF(e._origin,e._capacity,e._level,o,r)}(this,e,t)},t.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},t.prototype.insert=function(e,t){return this.splice(e,0,t)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):LF()},t.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations((function(n){kF(n,0,t+e.length);for(var r=0;r<e.length;r++)n.set(t+r,e[r])}))},t.prototype.pop=function(){return kF(this,0,-1)},t.prototype.unshift=function(){var e=arguments;return this.withMutations((function(t){kF(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])}))},t.prototype.shift=function(){return kF(this,1)},t.prototype.shuffle=function(e){return void 0===e&&(e=Math.random),this.withMutations((function(t){for(var n,r,o=t.size;o;)n=Math.floor(e()*o--),r=t.get(n),t.set(n,t.get(o)),t.set(o,r)}))},t.prototype.concat=function(){for(var t=arguments,n=[],r=0;r<arguments.length;r++){var o=t[r],i=e("string"!=typeof o&&_V(o)?o:[o]);0!==i.size&&n.push(i)}return 0===n.length?this:0!==this.size||this.__ownerID||1!==n.length?this.withMutations((function(e){n.forEach((function(t){return t.forEach((function(t){return e.push(t)}))}))})):this.constructor(n[0])},t.prototype.setSize=function(e){return kF(this,0,e)},t.prototype.map=function(e,t){var n=this;return this.withMutations((function(r){for(var o=0;o<n.size;o++)r.set(o,e.call(t,r.get(o),o,n))}))},t.prototype.slice=function(e,t){var n=this.size;return FG(e,t,n)?this:kF(this,jG(e,n),WG(t,n))},t.prototype.__iterator=function(e,t){var n=t?this.size:0,r=NF(this,t);return new gV((function(){var o=r();return o===OF?{value:void 0,done:!0}:hV(e,t?--n:n++,o)}))},t.prototype.__iterate=function(e,t){for(var n,r=t?this.size:0,o=NF(this,t);(n=o())!==OF&&!1!==e(n,t?--r:r++,this););return r},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?RF(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):0===this.size?LF():(this.__ownerID=e,this.__altered=!1,this)},t}(tV);AF.isList=IF;var bF=AF.prototype;bF[SF]=!0,bF[CG]=bF.remove,bF.merge=bF.concat,bF.setIn=U$,bF.deleteIn=bF.removeIn=M$,bF.update=V$,bF.updateIn=$$,bF.mergeIn=z$,bF.mergeDeepIn=Y$,bF.withMutations=X$,bF.wasAltered=Z$,bF.asImmutable=Q$,bF["@@transducer/init"]=bF.asMutable=K$,bF["@@transducer/step"]=function(e,t){return e.push(t)},bF["@@transducer/result"]=function(e){return e.asImmutable()};var wF=function(e,t){this.array=e,this.ownerID=t};wF.prototype.removeBefore=function(e,t,n){if(!(n&(1<<t+5)-1)||0===this.array.length)return this;var r=n>>>t&kG;if(r>=this.array.length)return new wF([],e);var o,i=0===r;if(t>0){var a=this.array[r];if((o=a&&a.removeBefore(e,t-5,n))===a&&i)return this}if(i&&!o)return this;var s=CF(this,e);if(!i)for(var l=0;l<r;l++)s.array[l]=void 0;return o&&(s.array[r]=o),s},wF.prototype.removeAfter=function(e,t,n){if(n===(t?1<<t+5:xG)||0===this.array.length)return this;var r,o=n-1>>>t&kG;if(o>=this.array.length)return this;if(t>0){var i=this.array[o];if((r=i&&i.removeAfter(e,t-5,n))===i&&o===this.array.length-1)return this}var a=CF(this,e);return a.array.splice(o+1),r&&(a.array[o]=r),a};var OF={};function NF(e,t){var n=e._origin,r=e._capacity,o=DF(r),i=e._tail;return a(e._root,e._level,0);function a(e,s,l){return 0===s?function(e,a){var s=a===o?i&&i.array:e&&e.array,l=a>n?0:n-a,c=r-a;c>xG&&(c=xG);return function(){if(l===c)return OF;var e=t?--c:l++;return s&&s[e]}}(e,l):function(e,o,i){var s,l=e&&e.array,c=i>n?0:n-i>>o,u=1+(r-i>>o);u>xG&&(u=xG);return function(){for(;;){if(s){var e=s();if(e!==OF)return e;s=null}if(c===u)return OF;var n=t?--u:c++;s=a(l&&l[n],o-5,i+(n<<o))}}}(e,s,l)}}function RF(e,t,n,r,o,i,a){var s=Object.create(bF);return s.size=t-e,s._origin=e,s._capacity=t,s._level=n,s._root=r,s._tail=o,s.__ownerID=i,s.__hash=a,s.__altered=!1,s}function LF(){return RF(0,0,5)}function PF(e,t,n,r,o,i){var a,s=r>>>n&kG,l=e&&s<e.array.length;if(!l&&void 0===o)return e;if(n>0){var c=e&&e.array[s],u=PF(c,t,n-5,r,o,i);return u===c?e:((a=CF(e,t)).array[s]=u,a)}return l&&e.array[s]===o?e:(i&&UG(i),a=CF(e,t),void 0===o&&s===a.array.length-1?a.array.pop():a.array[s]=o,a)}function CF(e,t){return t&&e&&t===e.ownerID?e:new wF(e?e.array.slice():[],t)}function xF(e,t){if(t>=DF(e._capacity))return e._tail;if(t<1<<e._level+5){for(var n=e._root,r=e._level;n&&r>0;)n=n.array[t>>>r&kG],r-=5;return n}}function kF(e,t,n){void 0!==t&&(t|=0),void 0!==n&&(n|=0);var r=e.__ownerID||new MG,o=e._origin,i=e._capacity,a=o+t,s=void 0===n?i:n<0?i+n:o+n;if(a===o&&s===i)return e;if(a>=s)return e.clear();for(var l=e._level,c=e._root,u=0;a+u<0;)c=new wF(c&&c.array.length?[void 0,c]:[],r),u+=1<<(l+=5);u&&(a+=u,o+=u,s+=u,i+=u);for(var d=DF(i),p=DF(s);p>=1<<l+5;)c=new wF(c&&c.array.length?[c]:[],r),l+=5;var g=e._tail,h=p<d?xF(e,s-1):p>d?new wF([],r):g;if(g&&p>d&&a<i&&g.array.length){for(var f=c=CF(c,r),_=l;_>5;_-=5){var m=d>>>_&kG;f=f.array[m]=CF(f.array[m],r)}f.array[d>>>5&kG]=g}if(s<i&&(h=h&&h.removeAfter(r,0,s)),a>=p)a-=p,s-=p,l=5,c=null,h=h&&h.removeBefore(r,0,a);else if(a>o||p<d){for(u=0;c;){var v=a>>>l&kG;if(v!==p>>>l&kG)break;v&&(u+=(1<<l)*v),l-=5,c=c.array[v]}c&&a>o&&(c=c.removeBefore(r,l,a-u)),c&&p<d&&(c=c.removeAfter(r,l,p-u)),u&&(a-=u,s-=u)}return e.__ownerID?(e.size=s-a,e._origin=a,e._capacity=s,e._level=l,e._root=c,e._tail=h,e.__hash=void 0,e.__altered=!0,e):RF(a,s,l,c,h)}function DF(e){return e<xG?0:e-1>>>5<<5}var UF,MF=function(e){function t(e){return null==e?VF():UV(e)?e:VF().withMutations((function(t){var n=eV(e);O$(n.size),n.forEach((function(e,n){return t.set(n,e)}))}))}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("OrderedMap {","}")},t.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):VF()},t.prototype.set=function(e,t){return $F(this,e,t)},t.prototype.remove=function(e){return $F(this,e,DG)},t.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate((function(t){return t&&e(t[1],t[0],n)}),t)},t.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?GF(t,n,e,this.__hash):0===this.size?VF():(this.__ownerID=e,this.__altered=!1,this._map=t,this._list=n,this)},t}(eF);function GF(e,t,n,r){var o=Object.create(MF.prototype);return o.size=e?e.size:0,o._map=e,o._list=t,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function VF(){return UF||(UF=GF(pF(),LF()))}function $F(e,t,n){var r,o,i=e._map,a=e._list,s=i.get(t),l=void 0!==s;if(n===DG){if(!l)return e;a.size>=xG&&a.size>=2*i.size?(r=(o=a.filter((function(e,t){return void 0!==e&&s!==t}))).toKeyedSeq().map((function(e){return e[0]})).flip().toMap(),e.__ownerID&&(r.__ownerID=o.__ownerID=e.__ownerID)):(r=i.remove(t),o=s===a.size-1?a.pop():a.set(s,void 0))}else if(l){if(n===a.get(s)[1])return e;r=i,o=a.set(s,[t,n])}else r=i.set(t,a.size),o=a.set(a.size,[t,n]);return e.__ownerID?(e.size=r.size,e._map=r,e._list=o,e.__hash=void 0,e.__altered=!0,e):GF(r,o)}MF.isOrderedMap=UV,MF.prototype[lV]=!0,MF.prototype[CG]=MF.prototype.remove;var FF="@@__IMMUTABLE_STACK__@@";function jF(e){return Boolean(e&&e[FF])}var WF=function(e){function t(e){return null==e?JF():jF(e)?e:JF().pushAll(e)}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(e,t){var n=this._head;for(e=VG(this,e);n&&e--;)n=n.next;return n?n.value:t},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var e=arguments;if(0===arguments.length)return this;for(var t=this.size+arguments.length,n=this._head,r=arguments.length-1;r>=0;r--)n={value:e[r],next:n};return this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):HF(t,n)},t.prototype.pushAll=function(t){if(0===(t=e(t)).size)return this;if(0===this.size&&jF(t))return t;O$(t.size);var n=this.size,r=this._head;return t.__iterate((function(e){n++,r={value:e,next:r}}),!0),this.__ownerID?(this.size=n,this._head=r,this.__hash=void 0,this.__altered=!0,this):HF(n,r)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):JF()},t.prototype.slice=function(t,n){if(FG(t,n,this.size))return this;var r=jG(t,this.size);if(WG(n,this.size)!==this.size)return e.prototype.slice.call(this,t,n);for(var o=this.size-r,i=this._head;r--;)i=i.next;return this.__ownerID?(this.size=o,this._head=i,this.__hash=void 0,this.__altered=!0,this):HF(o,i)},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?HF(this.size,this._head,e,this.__hash):0===this.size?JF():(this.__ownerID=e,this.__altered=!1,this)},t.prototype.__iterate=function(e,t){var n=this;if(t)return new wV(this.toArray()).__iterate((function(t,r){return e(t,r,n)}),t);for(var r=0,o=this._head;o&&!1!==e(o.value,r++,this);)o=o.next;return r},t.prototype.__iterator=function(e,t){if(t)return new wV(this.toArray()).__iterator(e,t);var n=0,r=this._head;return new gV((function(){if(r){var t=r.value;return r=r.next,hV(e,n++,t)}return{value:void 0,done:!0}}))},t}(tV);WF.isStack=jF;var qF,BF=WF.prototype;function HF(e,t,n,r){var o=Object.create(BF);return o.size=e,o._head=t,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function JF(){return qF||(qF=HF(0))}BF[FF]=!0,BF.shift=BF.pop,BF.unshift=BF.push,BF.unshiftAll=BF.pushAll,BF.withMutations=X$,BF.wasAltered=Z$,BF.asImmutable=Q$,BF["@@transducer/init"]=BF.asMutable=K$,BF["@@transducer/step"]=function(e,t){return e.unshift(t)},BF["@@transducer/result"]=function(e){return e.asImmutable()};var zF="@@__IMMUTABLE_SET__@@";function YF(e){return Boolean(e&&e[zF])}function XF(e){return YF(e)&&cV(e)}function KF(e,t){if(e===t)return!0;if(!JG(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||YG(e)!==YG(t)||KG(e)!==KG(t)||cV(e)!==cV(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!QG(e);if(cV(e)){var r=e.entries();return t.every((function(e,t){var o=r.next().value;return o&&GV(o[1],e)&&(n||GV(o[0],t))}))&&r.next().done}var o=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{o=!0;var i=e;e=t,t=i}var a=!0,s=t.__iterate((function(t,r){if(n?!e.has(t):o?!GV(t,e.get(r,DG)):!GV(e.get(r,DG),t))return a=!1,!1}));return a&&e.size===s}function QF(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}function ZF(e){if(!e||"object"!=typeof e)return e;if(!JG(e)){if(!L$(e))return e;e=SV(e)}if(YG(e)){var t={};return e.__iterate((function(e,n){t[n]=ZF(e)})),t}var n=[];return e.__iterate((function(e){n.push(ZF(e))})),n}var ej=function(e){function t(t){return null==t?ij():YF(t)&&!cV(t)?t:ij().withMutations((function(n){var r=e(t);O$(r.size),r.forEach((function(e){return n.add(e)}))}))}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(eV(e).keySeq())},t.intersect=function(e){return(e=ZG(e).toArray()).length?nj.intersect.apply(t(e.pop()),e):ij()},t.union=function(e){return(e=ZG(e).toArray()).length?nj.union.apply(t(e.pop()),e):ij()},t.prototype.toString=function(){return this.__toString("Set {","}")},t.prototype.has=function(e){return this._map.has(e)},t.prototype.add=function(e){return rj(this,this._map.set(e,e))},t.prototype.remove=function(e){return rj(this,this._map.remove(e))},t.prototype.clear=function(){return rj(this,this._map.clear())},t.prototype.map=function(e,t){var n=this,r=!1,o=rj(this,this._map.mapEntries((function(o){var i=o[1],a=e.call(t,i,i,n);return a!==i&&(r=!0),[a,a]}),t));return r?o:this},t.prototype.union=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return 0===(t=t.filter((function(e){return 0!==e.size}))).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations((function(n){for(var r=0;r<t.length;r++)"string"==typeof t[r]?n.add(t[r]):e(t[r]).forEach((function(e){return n.add(e)}))})):this.constructor(t[0])},t.prototype.intersect=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(0===t.length)return this;t=t.map((function(t){return e(t)}));var r=[];return this.forEach((function(e){t.every((function(t){return t.includes(e)}))||r.push(e)})),this.withMutations((function(e){r.forEach((function(t){e.remove(t)}))}))},t.prototype.subtract=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(0===t.length)return this;t=t.map((function(t){return e(t)}));var r=[];return this.forEach((function(e){t.some((function(t){return t.includes(e)}))&&r.push(e)})),this.withMutations((function(e){r.forEach((function(t){e.remove(t)}))}))},t.prototype.sort=function(e){return Ij(f$(this,e))},t.prototype.sortBy=function(e,t){return Ij(f$(this,t,e))},t.prototype.wasAltered=function(){return this._map.wasAltered()},t.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate((function(t){return e(t,t,n)}),t)},t.prototype.__iterator=function(e,t){return this._map.__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):0===this.size?this.__empty():(this.__ownerID=e,this._map=t,this)},t}(nV);ej.isSet=YF;var tj,nj=ej.prototype;function rj(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function oj(e,t){var n=Object.create(nj);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function ij(){return tj||(tj=oj(pF()))}nj[zF]=!0,nj[CG]=nj.remove,nj.merge=nj.concat=nj.union,nj.withMutations=X$,nj.asImmutable=Q$,nj["@@transducer/init"]=nj.asMutable=K$,nj["@@transducer/step"]=function(e,t){return e.add(t)},nj["@@transducer/result"]=function(e){return e.asImmutable()},nj.__empty=ij,nj.__make=oj;var aj,sj=function(e){function t(e,n,r){if(void 0===r&&(r=1),!(this instanceof t))return new t(e,n,r);if(w$(0!==r,"Cannot step a Range by 0"),w$(void 0!==e,"You must define a start value when using Range"),w$(void 0!==n,"You must define an end value when using Range"),r=Math.abs(r),n<e&&(r=-r),this._start=e,this._end=n,this._step=r,this.size=Math.max(0,Math.ceil((n-e)/r-1)+1),0===this.size){if(aj)return aj;aj=this}}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},t.prototype.get=function(e,t){return this.has(e)?this._start+VG(this,e)*this._step:t},t.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},t.prototype.slice=function(e,n){return FG(e,n,this.size)?this:(e=jG(e,this.size),(n=WG(n,this.size))<=e?new t(0,0):new t(this.get(e,this._end),this.get(n,this._end),this._step))},t.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},t.prototype.lastIndexOf=function(e){return this.indexOf(e)},t.prototype.__iterate=function(e,t){for(var n=this.size,r=this._step,o=t?this._start+(n-1)*r:this._start,i=0;i!==n&&!1!==e(o,t?n-++i:i++,this);)o+=t?-r:r;return i},t.prototype.__iterator=function(e,t){var n=this.size,r=this._step,o=t?this._start+(n-1)*r:this._start,i=0;return new gV((function(){if(i===n)return{value:void 0,done:!0};var a=o;return o+=t?-r:r,hV(e,t?n-++i:i++,a)}))},t.prototype.equals=function(e){return e instanceof t?this._start===e._start&&this._end===e._end&&this._step===e._step:KF(this,e)},t}(AV);function lj(e,t,n){for(var r=N$(t),o=0;o!==r.length;)if((e=C$(e,r[o++],DG))===DG)return n;return e}function cj(e,t){return lj(this,e,t)}function uj(){O$(this.size);var e={};return this.__iterate((function(t,n){e[n]=t})),e}ZG.Iterator=gV,QF(ZG,{toArray:function(){O$(this.size);var e=new Array(this.size||0),t=YG(this),n=0;return this.__iterate((function(r,o){e[n++]=t?[o,r]:r})),e},toIndexedSeq:function(){return new o$(this)},toJS:function(){return ZF(this)},toKeyedSeq:function(){return new r$(this,!0)},toMap:function(){return eF(this.toKeyedSeq())},toObject:uj,toOrderedMap:function(){return MF(this.toKeyedSeq())},toOrderedSet:function(){return Ij(YG(this)?this.valueSeq():this)},toSet:function(){return ej(YG(this)?this.valueSeq():this)},toSetSeq:function(){return new i$(this)},toSeq:function(){return KG(this)?this.toIndexedSeq():YG(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return WF(YG(this)?this.valueSeq():this)},toList:function(){return AF(YG(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return T$(this,function(e,t){var n=YG(e),r=[e].concat(t).map((function(e){return JG(e)?n&&(e=eV(e)):e=n?PV(e):CV(Array.isArray(e)?e:[e]),e})).filter((function(e){return 0!==e.size}));if(0===r.length)return e;if(1===r.length){var o=r[0];if(o===e||n&&YG(o)||KG(e)&&KG(o))return o}return new g$(r)}(this,e))},includes:function(e){return this.some((function(t){return GV(t,e)}))},entries:function(){return this.__iterator(2)},every:function(e,t){O$(this.size);var n=!0;return this.__iterate((function(r,o,i){if(!e.call(t,r,o,i))return n=!1,!1})),n},filter:function(e,t){return T$(this,u$(this,e,t,!0))},partition:function(e,t){return function(e,t,n){var r=YG(e),o=[[],[]];e.__iterate((function(i,a){o[t.call(n,i,a,e)?1:0].push(r?[a,i]:i)}));var i=E$(e);return o.map((function(t){return T$(e,i(t))}))}(this,e,t)},find:function(e,t,n){var r=this.findEntry(e,t);return r?r[1]:n},forEach:function(e,t){return O$(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){O$(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate((function(r){n?n=!1:t+=e,t+=null!=r?r.toString():""})),t},keys:function(){return this.__iterator(0)},map:function(e,t){return T$(this,l$(this,e,t))},reduce:function(e,t,n){return fj(this,e,t,n,arguments.length<2,!1)},reduceRight:function(e,t,n){return fj(this,e,t,n,arguments.length<2,!0)},reverse:function(){return T$(this,c$(this,!0))},slice:function(e,t){return T$(this,d$(this,e,t,!0))},some:function(e,t){O$(this.size);var n=!1;return this.__iterate((function(r,o,i){if(e.call(t,r,o,i))return n=!0,!1})),n},sort:function(e){return T$(this,f$(this,e))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(e,t){return GG(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return function(e,t,n){var r=eF().asMutable();return e.__iterate((function(o,i){r.update(t.call(n,o,i,e),0,(function(e){return e+1}))})),r.asImmutable()}(this,e,t)},equals:function(e){return KF(this,e)},entrySeq:function(){var e=this;if(e._cache)return new wV(e._cache);var t=e.toSeq().map(mj).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(vj(e),t)},findEntry:function(e,t,n){var r=n;return this.__iterate((function(n,o,i){if(e.call(t,n,o,i))return r=[o,n],!1})),r},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},findLastEntry:function(e,t,n){return this.toKeyedSeq().reverse().findEntry(e,t,n)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(e){return this.find($G,null,e)},flatMap:function(e,t){return T$(this,function(e,t,n){var r=E$(e);return e.toSeq().map((function(o,i){return r(t.call(n,o,i,e))})).flatten(!0)}(this,e,t))},flatten:function(e){return T$(this,h$(this,e,!0))},fromEntrySeq:function(){return new a$(this)},get:function(e,t){return this.find((function(t,n){return GV(n,e)}),void 0,t)},getIn:cj,groupBy:function(e,t){return function(e,t,n){var r=YG(e),o=(cV(e)?MF():eF()).asMutable();e.__iterate((function(i,a){o.update(t.call(n,i,a,e),(function(e){return(e=e||[]).push(r?[a,i]:i),e}))}));var i=E$(e);return o.map((function(t){return T$(e,i(t))})).asImmutable()}(this,e,t)},has:function(e){return this.get(e,DG)!==DG},hasIn:function(e){return lj(this,e,DG)!==DG},isSubset:function(e){return e="function"==typeof e.includes?e:ZG(e),this.every((function(t){return e.includes(t)}))},isSuperset:function(e){return(e="function"==typeof e.isSubset?e:ZG(e)).isSubset(this)},keyOf:function(e){return this.findKey((function(t){return GV(t,e)}))},keySeq:function(){return this.toSeq().map(_j).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return _$(this,e)},maxBy:function(e,t){return _$(this,t,e)},min:function(e){return _$(this,e?Tj(e):Ej)},minBy:function(e,t){return _$(this,t?Tj(t):Ej,e)},rest:function(){return this.slice(1)},skip:function(e){return 0===e?this:this.slice(Math.max(0,e))},skipLast:function(e){return 0===e?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,t){return T$(this,p$(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(vj(e),t)},sortBy:function(e,t){return T$(this,f$(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,t){return T$(this,function(e,t,n){var r=S$(e);return r.__iterateUncached=function(r,o){var i=this;if(o)return this.cacheResult().__iterate(r,o);var a=0;return e.__iterate((function(e,o,s){return t.call(n,e,o,s)&&++a&&r(e,o,i)})),a},r.__iteratorUncached=function(r,o){var i=this;if(o)return this.cacheResult().__iterator(r,o);var a=e.__iterator(2,o),s=!0;return new gV((function(){if(!s)return{value:void 0,done:!0};var e=a.next();if(e.done)return e;var o=e.value,l=o[0],c=o[1];return t.call(n,c,l,i)?2===r?e:hV(r,l,c,e):(s=!1,{value:void 0,done:!0})}))},r}(this,e,t))},takeUntil:function(e,t){return this.takeWhile(vj(e),t)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(e){if(e.size===1/0)return 0;var t=cV(e),n=YG(e),r=t?1:0;return e.__iterate(n?t?function(e,t){r=31*r+Sj(jV(e),jV(t))|0}:function(e,t){r=r+Sj(jV(e),jV(t))|0}:t?function(e){r=31*r+jV(e)|0}:function(e){r=r+jV(e)|0}),function(e,t){return t=VV(t,3432918353),t=VV(t<<15|t>>>-15,461845907),t=VV(t<<13|t>>>-13,5),t=VV((t=t+3864292196^e)^t>>>16,2246822507),t=$V((t=VV(t^t>>>13,3266489909))^t>>>16)}(e.size,r)}(this))}});var dj=ZG.prototype;dj[HG]=!0,dj[pV]=dj.values,dj.toJSON=dj.toArray,dj.__toStringMapper=P$,dj.inspect=dj.toSource=function(){return this.toString()},dj.chain=dj.flatMap,dj.contains=dj.includes,QF(eV,{flip:function(){return T$(this,s$(this))},mapEntries:function(e,t){var n=this,r=0;return T$(this,this.toSeq().map((function(o,i){return e.call(t,[i,o],r++,n)})).fromEntrySeq())},mapKeys:function(e,t){var n=this;return T$(this,this.toSeq().flip().map((function(r,o){return e.call(t,r,o,n)})).flip())}});var pj=eV.prototype;pj[zG]=!0,pj[pV]=dj.entries,pj.toJSON=uj,pj.__toStringMapper=function(e,t){return P$(t)+": "+P$(e)},QF(tV,{toKeyedSeq:function(){return new r$(this,!1)},filter:function(e,t){return T$(this,u$(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return T$(this,c$(this,!1))},slice:function(e,t){return T$(this,d$(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(t||0,0),0===n||2===n&&!t)return this;e=jG(e,e<0?this.count():this.size);var r=this.slice(0,e);return T$(this,1===n?r:r.concat(b$(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.findLastEntry(e,t);return n?n[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return T$(this,h$(this,e,!1))},get:function(e,t){return(e=VG(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find((function(t,n){return n===e}),void 0,t)},has:function(e){return(e=VG(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return T$(this,function(e,t){var n=S$(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,r){var o=this,i=0;return e.__iterate((function(e){return(!i||!1!==n(t,i++,o))&&!1!==n(e,i++,o)}),r),i},n.__iteratorUncached=function(n,r){var o,i=e.__iterator(1,r),a=0;return new gV((function(){return(!o||a%2)&&(o=i.next()).done?o:a%2?hV(n,a++,t):hV(n,a++,o.value,o)}))},n}(this,e))},interleave:function(){var e=[this].concat(b$(arguments)),t=v$(this.toSeq(),AV.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),T$(this,n)},keySeq:function(){return sj(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,t){return T$(this,p$(this,e,t,!1))},zip:function(){return T$(this,v$(this,yj,[this].concat(b$(arguments))))},zipAll:function(){return T$(this,v$(this,yj,[this].concat(b$(arguments)),!0))},zipWith:function(e){var t=b$(arguments);return t[0]=this,T$(this,v$(this,e,t))}});var gj=tV.prototype;gj[XG]=!0,gj[lV]=!0,QF(nV,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});var hj=nV.prototype;function fj(e,t,n,r,o,i){return O$(e.size),e.__iterate((function(e,i,a){o?(o=!1,n=e):n=t.call(r,n,e,i,a)}),i),n}function _j(e,t){return t}function mj(e,t){return[t,e]}function vj(e){return function(){return!e.apply(this,arguments)}}function Tj(e){return function(){return-e.apply(this,arguments)}}function yj(){return b$(arguments)}function Ej(e,t){return e<t?1:e>t?-1:0}function Sj(e,t){return e^t+2654435769+(e<<6)+(e>>2)}hj.has=dj.includes,hj.contains=hj.includes,hj.keys=hj.values,QF(IV,pj),QF(AV,gj),QF(bV,hj);var Ij=function(e){function t(e){return null==e?Oj():XF(e)?e:Oj().withMutations((function(t){var n=nV(e);O$(n.size),n.forEach((function(e){return t.add(e)}))}))}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(eV(e).keySeq())},t.prototype.toString=function(){return this.__toString("OrderedSet {","}")},t}(ej);Ij.isOrderedSet=XF;var Aj,bj=Ij.prototype;function wj(e,t){var n=Object.create(bj);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function Oj(){return Aj||(Aj=wj(VF()))}bj[lV]=!0,bj.zip=gj.zip,bj.zipWith=gj.zipWith,bj.zipAll=gj.zipAll,bj.__empty=Oj,bj.__make=wj;var Nj=function(e,t){var n;!function(e){if(aV(e))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(sV(e))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(null===e||"object"!=typeof e)throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}(e);var r=function(i){var a=this;if(i instanceof r)return i;if(!(this instanceof r))return new r(i);if(!n){n=!0;var s=Object.keys(e),l=o._indices={};o._name=t,o._keys=s,o._defaultValues=e;for(var c=0;c<s.length;c++){var u=s[c];l[u]=c,o[u]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+Pj(this)+' with property "'+u+'" since that property name is part of the Record API.'):xj(o,u)}}return this.__ownerID=void 0,this._values=AF().withMutations((function(e){e.setSize(a._keys.length),eV(i).forEach((function(t,n){e.set(a._indices[n],t===a._defaultValues[n]?void 0:t)}))})),this},o=r.prototype=Object.create(Rj);return o.constructor=r,t&&(r.displayName=t),r};Nj.prototype.toString=function(){for(var e,t=Pj(this)+" { ",n=this._keys,r=0,o=n.length;r!==o;r++)t+=(r?", ":"")+(e=n[r])+": "+P$(this.get(e));return t+" }"},Nj.prototype.equals=function(e){return this===e||aV(e)&&Cj(this).equals(Cj(e))},Nj.prototype.hashCode=function(){return Cj(this).hashCode()},Nj.prototype.has=function(e){return this._indices.hasOwnProperty(e)},Nj.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._indices[e],r=this._values.get(n);return void 0===r?this._defaultValues[e]:r},Nj.prototype.set=function(e,t){if(this.has(e)){var n=this._values.set(this._indices[e],t===this._defaultValues[e]?void 0:t);if(n!==this._values&&!this.__ownerID)return Lj(this,n)}return this},Nj.prototype.remove=function(e){return this.set(e)},Nj.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:Lj(this,e)},Nj.prototype.wasAltered=function(){return this._values.wasAltered()},Nj.prototype.toSeq=function(){return Cj(this)},Nj.prototype.toJS=function(){return ZF(this)},Nj.prototype.entries=function(){return this.__iterator(2)},Nj.prototype.__iterator=function(e,t){return Cj(this).__iterator(e,t)},Nj.prototype.__iterate=function(e,t){return Cj(this).__iterate(e,t)},Nj.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._values.__ensureOwner(e);return e?Lj(this,t,e):(this.__ownerID=e,this._values=t,this)},Nj.isRecord=aV,Nj.getDescriptiveName=Pj;var Rj=Nj.prototype;function Lj(e,t,n){var r=Object.create(Object.getPrototypeOf(e));return r._values=t,r.__ownerID=n,r}function Pj(e){return e.constructor.displayName||e.constructor.name||"Record"}function Cj(e){return PV(e._keys.map((function(t){return[t,e.get(t)]})))}function xj(e,t){try{Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){w$(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}catch(e){}}Rj[iV]=!0,Rj[CG]=Rj.remove,Rj.deleteIn=Rj.removeIn=M$,Rj.getIn=cj,Rj.hasIn=dj.hasIn,Rj.merge=F$,Rj.mergeWith=j$,Rj.mergeIn=z$,Rj.mergeDeep=H$,Rj.mergeDeepWith=J$,Rj.mergeDeepIn=Y$,Rj.setIn=U$,Rj.update=V$,Rj.updateIn=$$,Rj.withMutations=X$,Rj.asMutable=K$,Rj.asImmutable=Q$,Rj[pV]=Rj.entries,Rj.toJSON=Rj.toObject=dj.toObject,Rj.inspect=Rj.toSource=function(){return this.toString()};const kj=new Set([iD.$type,AU.$type,SU.$type,jU.$type,qU.$type,yU.$type,nU.$type,iU.$type,TD.$type,cU.$type,dU.$type,gU.$type,fU.$type,_U.$type,mU.$type,vU.$type]);function Dj(e){return e.$type===ZM.$type}function Uj(e){return e.$type===eG.$type}function Mj(e){return e.$type===tG.$type}function Gj(e){return e.$type===nG.$type}function Vj(e){if(e.textChangeOperation)return e.textChangeOperation;if(e.createAnnotationOperation)return e.createAnnotationOperation;if(e.removeAnnotationOperation)return e.removeAnnotationOperation;if(e.setPropertyOperation)return e.setPropertyOperation;throw new Error("FieldEvent does not contain an operation")}function $j(e,t,n){const r={fieldName:t,participantId:n,$type:mG.$type};switch(e.$type){case ZM.$type:return Object.assign(Object.assign({},r),{textChangeOperation:e});case eG.$type:return Object.assign(Object.assign({},r),{createAnnotationOperation:e});case tG.$type:return Object.assign(Object.assign({},r),{removeAnnotationOperation:e});case nG.$type:return Object.assign(Object.assign({},r),{setPropertyOperation:e})}}function Fj(e,t,n){return{$type:ZM.$type,range:{$type:aD.$type,start:e,end:t},text:n}}function jj(e,t,n,r){return function(e,t){switch(t.$type){case LU.$type:return Object.assign(Object.assign({},e),{textUnitPayload:t});case iD.$type:return Object.assign(Object.assign({},e),{requestWordAlternativesPayload:t});case nD.$type:return Object.assign(Object.assign({},e),{providedWordAlternativesPayload:t});case AU.$type:return Object.assign(Object.assign({},e),{selectWordAlternativePayload:t});case BU.$type:return Object.assign(Object.assign({},e),{translatorGlossaryReplacementPayload:t});case oD.$type:return Object.assign(Object.assign({},e),{requestTextUnitAlternativesPayload:t});case HU.$type:return Object.assign(Object.assign({},e),{translatorProvidedTextUnitAlternativesPayload:t});case SU.$type:return Object.assign(Object.assign({},e),{selectTextUnitAlternativePayload:t});case jU.$type:return Object.assign(Object.assign({},e),{translatorRequestAutocompletionPayload:t});case WU.$type:return Object.assign(Object.assign({},e),{translatorProvidedAutocompletionPayload:t});case qU.$type:return Object.assign(Object.assign({},e),{translatorSelectAutocompletionPayload:t});case JU.$type:return Object.assign(Object.assign({},e),{translatorProvidedAutomaticTextUnitAlternativesPayload:t});case yU.$type:return Object.assign(Object.assign({},e),{selectAutomaticTextUnitAlternativePayload:t});case ND.$type:return Object.assign(Object.assign({},e),{writeProvidedTextUnitAlternativesPayload:t});case RD.$type:return Object.assign(Object.assign({},e),{writeProvidedAutomaticTextUnitAlternativesPayload:t});case OD.$type:return Object.assign(Object.assign({},e),{writeDiffUnitPayload:t});case OU.$type:return Object.assign(Object.assign({},e),{textFormattingPayload:t});case zU.$type:return Object.assign(Object.assign({},e),{translatorRequestClarifyPayload:t});case QU.$type:return Object.assign(Object.assign({},e),{translatorSelectClarifyAnswerPayload:t});case nU.$type:return Object.assign(Object.assign({},e),{writeRequestChangeStyleAlternativesAnnotationPayload:t});case oU.$type:return Object.assign(Object.assign({},e),{writeProvidedChangeStyleAlternativesAnnotationPayload:t});case iU.$type:return Object.assign(Object.assign({},e),{writeSelectChangeStyleAlternativeAnnotationPayload:t});case cU.$type:return Object.assign(Object.assign({},e),{writeRequestTemplateAdaptationAnnotationPayload:t});case dU.$type:return Object.assign(Object.assign({},e),{writeProvidedTemplateAdaptationAnnotationPayload:t});case gU.$type:return Object.assign(Object.assign({},e),{writeInlineSuggestionAnnotationPayload:t});case hU.$type:return Object.assign(Object.assign({},e),{writeInlineSuggestionSpanAnnotationPayload:t});case fU.$type:return Object.assign(Object.assign({},e),{writeActOnInlineSuggestionAnnotationPayload:t});case _U.$type:return Object.assign(Object.assign({},e),{writeInlineSuggestionsTextUnitStateAnnotationPayload:t});case mU.$type:return Object.assign(Object.assign({},e),{writeRequestInlineSuggestionImprovedTextAnnotationPayload:t});case vU.$type:return Object.assign(Object.assign({},e),{writeProvidedInlineSuggestionImprovedTextAnnotationPayload:t});case TD.$type:return Object.assign(Object.assign({},e),{customRuleAnnotationPayload:t});default:throw new Error("Could not match annotation payload.")}}({$type:eG.$type,annotationId:e,range:{$type:aD.$type,start:t,end:n}},r)}function Wj(e,t){const n={$type:nG.$type,propertyName:e};return void 0===t?n:function(e,t){switch(t.$type){case ZU.$type:return Object.assign(Object.assign({},e),{translatorSourceLanguagesValue:t});case tM.$type:return Object.assign(Object.assign({},e),{translatorRequestedSourceLanguageValue:t});case nM.$type:return Object.assign(Object.assign({},e),{translatorCalculatedSourceLanguageValue:t});case eM.$type:return Object.assign(Object.assign({},e),{translatorTargetLanguagesValue:t});case rM.$type:return Object.assign(Object.assign({},e),{translatorRequestedTargetLanguageValue:t});case oM.$type:return Object.assign(Object.assign({},e),{translatorCalculatedTargetLanguageValue:t});case gM.$type:return Object.assign(Object.assign({},e),{translatorFormalityModesValue:t});case hM.$type:return Object.assign(Object.assign({},e),{translatorFormalityModeValue:t});case cM.$type:return Object.assign(Object.assign({},e),{translatorGlossarySupportValue:t});case PM.$type:return Object.assign(Object.assign({},e),{translatorGlossaryListValue:t});case iM.$type:return Object.assign(Object.assign({},e),{translatorGlossaryIdValue:t});case fM.$type:return Object.assign(Object.assign({},e),{translatorLanguageModelsValue:t});case _M.$type:return Object.assign(Object.assign({},e),{translatorLanguageModelValue:t});case mM.$type:return Object.assign(Object.assign({},e),{translatorTextDirectionValue:t});case vM.$type:return Object.assign(Object.assign({},e),{translatorMaximumTextLengthValue:t});case TM.$type:return Object.assign(Object.assign({},e),{translatorUnsupportedSourceLanguageValue:t});case LD.$type:return Object.assign(Object.assign({},e),{writeLanguagesValue:t});case CD.$type:return Object.assign(Object.assign({},e),{writeRequestedLanguageValue:t});case xD.$type:return Object.assign(Object.assign({},e),{writeCalculatedLanguageValue:t});case VD.$type:return Object.assign(Object.assign({},e),{writeStyleVariantsValue:t});case $D.$type:return Object.assign(Object.assign({},e),{writeStyleVariantValue:t});case kD.$type:return Object.assign(Object.assign({},e),{writeGlossaryIdValue:t});case HD.$type:return Object.assign(Object.assign({},e),{writeGlossarySupportValue:t});case BD.$type:return Object.assign(Object.assign({},e),{writeGlossaryListValue:t});case GD.$type:return Object.assign(Object.assign({},e),{writeMaximumTextLengthValue:t});case FD.$type:return Object.assign(Object.assign({},e),{writeUnsupportedLanguageValue:t});case yM.$type:return Object.assign(Object.assign({},e),{translatorSourceLanguageDetectionWeightsValue:t});case PD.$type:return Object.assign(Object.assign({},e),{writeGlossaryLanguagesValue:t});case JD.$type:return Object.assign(Object.assign({},e),{writeStyleGuideSupportValue:t});case DD.$type:return Object.assign(Object.assign({},e),{writeStyleGuideIdValue:t});case sU.$type:return Object.assign(Object.assign({},e),{writeTemplateAdaptationTemplatesValue:t});case uM.$type:return Object.assign(Object.assign({},e),{translatorStyleGuideSupportValue:t});case aM.$type:return Object.assign(Object.assign({},e),{translatorStyleGuideIdValue:t});case lM.$type:return Object.assign(Object.assign({},e),{translatorFreeTextPromptListValue:t});case MD.$type:return Object.assign(Object.assign({},e),{writeFreeTextPromptListValue:t});case sM.$type:return Object.assign(Object.assign({},e),{interfaceLanguageValue:t});case RM.$type:return Object.assign(Object.assign({},e),{translatorLanguageModelPreferencesValue:t});case jD.$type:return Object.assign(Object.assign({},e),{writeInlineSuggestionsLoadingValue:t});case zD.$type:return Object.assign(Object.assign({},e),{writeCorrectionsOnlySupportValue:t});case UD.$type:return Object.assign(Object.assign({},e),{writeCorrectionsOnlyValue:t});case dM.$type:return Object.assign(Object.assign({},e),{translatorRtfSupportValue:t});case EM.$type:return Object.assign(Object.assign({},e),{translatorStyleVariantsValue:t});case SM.$type:return Object.assign(Object.assign({},e),{translatorStyleVariantValue:t});case YD.$type:return Object.assign(Object.assign({},e),{writeTextUnitAlternativesSupportValue:t});case IM.$type:return Object.assign(Object.assign({},e),{translatorTranslationMemoryListValue:t});case AM.$type:return Object.assign(Object.assign({},e),{translatorSelectedTranslationMemoryValue:t})}}(n,t)}function qj(){}function Bj(e,t,n,r,o){for(var i,a=[];t;)a.push(t),i=t.previousComponent,delete t.previousComponent,t=i;a.reverse();for(var s=0,l=a.length,c=0,u=0;s<l;s++){var d=a[s];if(d.removed)d.value=e.join(r.slice(u,u+d.count)),u+=d.count;else{if(!d.added&&o){var p=n.slice(c,c+d.count);p=p.map((function(e,t){var n=r[u+t];return n.length>e.length?n:e})),d.value=e.join(p)}else d.value=e.join(n.slice(c,c+d.count));c+=d.count,d.added||(u+=d.count)}}return a}qj.prototype={diff:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.callback;"function"==typeof r&&(o=r,r={});var i=this;function a(e){return e=i.postProcess(e,r),o?(setTimeout((function(){o(e)}),0),!0):e}e=this.castInput(e,r),t=this.castInput(t,r),e=this.removeEmpty(this.tokenize(e,r));var s=(t=this.removeEmpty(this.tokenize(t,r))).length,l=e.length,c=1,u=s+l;null!=r.maxEditLength&&(u=Math.min(u,r.maxEditLength));var d=null!==(n=r.timeout)&&void 0!==n?n:1/0,p=Date.now()+d,g=[{oldPos:-1,lastComponent:void 0}],h=this.extractCommon(g[0],t,e,0,r);if(g[0].oldPos+1>=l&&h+1>=s)return a(Bj(i,g[0].lastComponent,t,e,i.useLongestToken));var f=-1/0,_=1/0;function m(){for(var n=Math.max(f,-c);n<=Math.min(_,c);n+=2){var o=void 0,u=g[n-1],d=g[n+1];u&&(g[n-1]=void 0);var p=!1;if(d){var m=d.oldPos-n;p=d&&0<=m&&m<s}var v=u&&u.oldPos+1<l;if(p||v){if(o=!v||p&&u.oldPos<d.oldPos?i.addToPath(d,!0,!1,0,r):i.addToPath(u,!1,!0,1,r),h=i.extractCommon(o,t,e,n,r),o.oldPos+1>=l&&h+1>=s)return a(Bj(i,o.lastComponent,t,e,i.useLongestToken));g[n]=o,o.oldPos+1>=l&&(_=Math.min(_,n-1)),h+1>=s&&(f=Math.max(f,n+1))}else g[n]=void 0}c++}if(o)!function e(){setTimeout((function(){if(c>u||Date.now()>p)return o();m()||e()}),0)}();else for(;c<=u&&Date.now()<=p;){var v=m();if(v)return v}},addToPath:function(e,t,n,r,o){var i=e.lastComponent;return i&&!o.oneChangePerToken&&i.added===t&&i.removed===n?{oldPos:e.oldPos+r,lastComponent:{count:i.count+1,added:t,removed:n,previousComponent:i.previousComponent}}:{oldPos:e.oldPos+r,lastComponent:{count:1,added:t,removed:n,previousComponent:i}}},extractCommon:function(e,t,n,r,o){for(var i=t.length,a=n.length,s=e.oldPos,l=s-r,c=0;l+1<i&&s+1<a&&this.equals(n[s+1],t[l+1],o);)l++,s++,c++,o.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return c&&!o.oneChangePerToken&&(e.lastComponent={count:c,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=s,l},equals:function(e,t,n){return n.comparator?n.comparator(e,t):e===t||n.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function(e){return e},tokenize:function(e){return Array.from(e)},join:function(e){return e.join("")},postProcess:function(e){return e}};var Hj=new qj;function Jj(e,t){var n;for(n=0;n<e.length&&n<t.length;n++)if(e[n]!=t[n])return e.slice(0,n);return e.slice(0,n)}function zj(e,t){var n;if(!e||!t||e[e.length-1]!=t[t.length-1])return"";for(n=0;n<e.length&&n<t.length;n++)if(e[e.length-(n+1)]!=t[t.length-(n+1)])return e.slice(-n);return e.slice(-n)}function Yj(e,t,n){if(e.slice(0,t.length)!=t)throw Error("string ".concat(JSON.stringify(e)," doesn't start with prefix ").concat(JSON.stringify(t),"; this is a bug"));return n+e.slice(t.length)}function Xj(e,t,n){if(!t)return e+n;if(e.slice(-t.length)!=t)throw Error("string ".concat(JSON.stringify(e)," doesn't end with suffix ").concat(JSON.stringify(t),"; this is a bug"));return e.slice(0,-t.length)+n}function Kj(e,t){return Yj(e,t,"")}function Qj(e,t){return Xj(e,t,"")}function Zj(e,t){return t.slice(0,function(e,t){var n=0;e.length>t.length&&(n=e.length-t.length);var r=t.length;e.length<t.length&&(r=e.length);var o=Array(r),i=0;o[0]=0;for(var a=1;a<r;a++){for(t[a]==t[i]?o[a]=o[i]:o[a]=i;i>0&&t[a]!=t[i];)i=o[i];t[a]==t[i]&&i++}i=0;for(var s=n;s<e.length;s++){for(;i>0&&e[s]!=t[i];)i=o[i];e[s]==t[i]&&i++}return i}(e,t))}var eW="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",tW=new RegExp("[".concat(eW,"]+|\\s+|[^").concat(eW,"]"),"ug"),nW=new qj;function rW(e,t,n,r){if(t&&n){var o=t.value.match(/^\s*/)[0],i=t.value.match(/\s*$/)[0],a=n.value.match(/^\s*/)[0],s=n.value.match(/\s*$/)[0];if(e){var l=Jj(o,a);e.value=Xj(e.value,a,l),t.value=Kj(t.value,l),n.value=Kj(n.value,l)}if(r){var c=zj(i,s);r.value=Yj(r.value,s,c),t.value=Qj(t.value,c),n.value=Qj(n.value,c)}}else if(n)e&&(n.value=n.value.replace(/^\s*/,"")),r&&(r.value=r.value.replace(/^\s*/,""));else if(e&&r){var u=r.value.match(/^\s*/)[0],d=t.value.match(/^\s*/)[0],p=t.value.match(/\s*$/)[0],g=Jj(u,d);t.value=Kj(t.value,g);var h=zj(Kj(u,g),p);t.value=Qj(t.value,h),r.value=Yj(r.value,u,h),e.value=Xj(e.value,u,u.slice(0,u.length-h.length))}else if(r){var f=r.value.match(/^\s*/)[0],_=Zj(t.value.match(/\s*$/)[0],f);t.value=Qj(t.value,_)}else if(e){var m=Zj(e.value.match(/\s*$/)[0],t.value.match(/^\s*/)[0]);t.value=Kj(t.value,m)}}nW.equals=function(e,t,n){return n.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e.trim()===t.trim()},nW.tokenize=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.intlSegmenter){if("word"!=n.intlSegmenter.resolvedOptions().granularity)throw new Error('The segmenter passed must have a granularity of "word"');t=Array.from(n.intlSegmenter.segment(e),(function(e){return e.segment}))}else t=e.match(tW)||[];var r=[],o=null;return t.forEach((function(e){/\s/.test(e)?null==o?r.push(e):r.push(r.pop()+e):/\s/.test(o)?r[r.length-1]==o?r.push(r.pop()+e):r.push(o+e):r.push(e),o=e})),r},nW.join=function(e){return e.map((function(e,t){return 0==t?e:e.replace(/^\s+/,"")})).join("")},nW.postProcess=function(e,t){if(!e||t.oneChangePerToken)return e;var n=null,r=null,o=null;return e.forEach((function(e){e.added?r=e:e.removed?o=e:((r||o)&&rW(n,o,r,e),n=e,r=null,o=null)})),(r||o)&&rW(n,o,r,null),e},(new qj).tokenize=function(e){var t=new RegExp("(\\r?\\n)|[".concat(eW,"]+|[^\\S\\n\\r]+|[^").concat(eW,"]"),"ug");return e.match(t)||[]};var oW=new qj;function iW(e){return iW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iW(e)}oW.tokenize=function(e,t){t.stripTrailingCr&&(e=e.replace(/\r\n/g,"\n"));var n=[],r=e.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var o=0;o<r.length;o++){var i=r[o];o%2&&!t.newlineIsToken?n[n.length-1]+=i:n.push(i)}return n},oW.equals=function(e,t,n){return n.ignoreWhitespace?(n.newlineIsToken&&e.includes("\n")||(e=e.trim()),n.newlineIsToken&&t.includes("\n")||(t=t.trim())):n.ignoreNewlineAtEof&&!n.newlineIsToken&&(e.endsWith("\n")&&(e=e.slice(0,-1)),t.endsWith("\n")&&(t=t.slice(0,-1))),qj.prototype.equals.call(this,e,t,n)},(new qj).tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)},(new qj).tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};var aW=new qj;function sW(e,t,n,r,o){var i,a;for(t=t||[],n=n||[],r&&(e=r(o,e)),i=0;i<t.length;i+=1)if(t[i]===e)return n[i];if("[object Array]"===Object.prototype.toString.call(e)){for(t.push(e),a=new Array(e.length),n.push(a),i=0;i<e.length;i+=1)a[i]=sW(e[i],t,n,r,o);return t.pop(),n.pop(),a}if(e&&e.toJSON&&(e=e.toJSON()),"object"===iW(e)&&null!==e){t.push(e),a={},n.push(a);var s,l=[];for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&l.push(s);for(l.sort(),i=0;i<l.length;i+=1)a[s=l[i]]=sW(e[s],t,n,r,s);t.pop(),n.pop()}else a=e;return a}aW.useLongestToken=!0,aW.tokenize=oW.tokenize,aW.castInput=function(e,t){var n=t.undefinedReplacement,r=t.stringifyReplacer,o=void 0===r?function(e,t){return void 0===t?n:t}:r;return"string"==typeof e?e:JSON.stringify(sW(e,null,null,o),o,"  ")},aW.equals=function(e,t,n){return qj.prototype.equals.call(aW,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"),n)};var lW=new qj;lW.tokenize=function(e){return e.slice()},lW.join=lW.removeEmpty=function(e){return e};var cW;function uW(e,t){return{$type:aD.$type,start:e,end:t}}!function(e){e[e.BaseThenNew=0]="BaseThenNew",e[e.NewThenBase=1]="NewThenBase"}(cW||(cW={}));const dW=(e,t,n=cW.BaseThenNew)=>{var r,o;if(Mj(t)||Mj(e)||Uj(e)||Dj(e)&&(null===(r=e.range)||void 0===r?void 0:r.start)===(null===(o=e.range)||void 0===o?void 0:o.end)&&0===e.text.length)return t;if(Gj(e)&&Gj(t))return((e,t,n)=>e.propertyName!==t.propertyName||n===cW.BaseThenNew?t:e)(e,t,n);if(Gj(e)||Gj(t))return t;if(Dj(e)&&Dj(t))return((e,t,n)=>{const r=e.range,o=t.range;if(r.start>o.end)return t;const i=e.text.length+r.start-r.end;if(r.end<o.start)return Object.assign(Object.assign({},t),{range:uW(o.start+i,o.end+i)});const a=r.start<o.start||r.start===o.start&&n===cW.BaseThenNew,s=r.end<o.end;if(a){const n=r.start+e.text.length;return s?Object.assign(Object.assign({},t),{range:uW(n,o.end+i)}):Object.assign(Object.assign({},t),{range:uW(n,n)})}return s?Object.assign(Object.assign({},t),{range:uW(o.start,o.end+i),text:t.text+e.text}):Object.assign(Object.assign({},t),{range:uW(o.start,r.start)})})(e,t,n);if(Dj(e)&&Uj(t))return((e,t)=>{const n=e.range,r=t.range;if(n.start>r.end)return t;const o=e.text.length+n.start-n.end;if(n.end<r.start)return Object.assign(Object.assign({},t),{range:uW(r.start+o,r.end+o)});const i=n.start<r.start,a=n.end<r.end,s=n.start+e.text.length;return i?a?Object.assign(Object.assign({},t),{range:uW(s,r.end+o)}):n.end===r.end?Object.assign(Object.assign({},t),{range:uW(s,s)}):Object.assign(Object.assign({},t),{range:uW(n.start,n.start)}):a?n.start===r.start?Object.assign(Object.assign({},t),{range:uW(s,r.end+o)}):Object.assign(Object.assign({},t),{range:uW(r.start,r.end+o)}):Object.assign(Object.assign({},t),{range:uW(r.start,s)})})(e,t);throw new Error(`Operational transform for operations of type [${null==e?void 0:e.$type}, ${null==t?void 0:t.$type}] not implemented.`)},pW=(e,t)=>[dW(t,e,cW.NewThenBase),dW(e,t,cW.BaseThenNew)],gW=(e,t)=>{let n=[...e];const r=t.map((e=>{let t=e;return n=n.map((e=>{const[n,r]=pW(t,e);return t=n,r})),t}));return[n,r]},hW=(e,t)=>{let n=[...t];return{transformedIncomingEvents:e.map((e=>{let t=Vj(e);return n=n.map((n=>{if(e.fieldName!==n.fieldName)return n;const[r,o]=pW(t,Vj(n));return t=r,"participantId"in n?$j(o,n.fieldName,n.participantId):$j(o,n.fieldName)})),$j(t,e.fieldName,e.participantId)})),transformedExistingEvents:n}};function fW(e){return e.$type===pG.$type?{$type:iG.$type,appendMessage:e}:{$type:iG.$type,updateAuthenticationTokenMessage:e}}function _W(e){if(!e.range)throw new Error("TextChangeOperation must have a range to calculate delta");return e.text.length-e.range.end+e.range.start}function mW(e){const t=[],n=[];let r=0,o=0;for(const i of e){const e=_W(i);e<0?(o+=e,t.push(Object.assign(Object.assign({},i),{range:Object.assign(Object.assign({},i.range),{start:i.range.start-r,end:i.range.end-r})}))):(r+=e,n.push(Object.assign(Object.assign({},i),{range:Object.assign(Object.assign({},i.range),{start:i.range.start-o,end:i.range.end-o})})))}const[i,a]=gW(t,n);return[...t,...a]}function vW(e,t){var n;if(""===e||""===t){return[ZM.create({range:aD.create({start:0,end:null!==(n=e.length)&&void 0!==n?n:0}),text:t})]}const[r,o,i]=function(e,t){const n=Math.min(e.length,t.length);let r=0,o=0;for(let o=0;o<n&&e[o]===t[o];o+=1)r+=1;for(let r=1;r<=n&&e[e.length-r]===t[t.length-r];r+=1)o+=1;return r+o>n&&(o=n-r),[e.slice(r,e.length-o),t.slice(r,t.length-o),r,o]}(e,t),a=(s=r,l=o,c={ignoreCase:!1,timeout:250},Hj.diff(s,l,c));var s,l,c;if(!a)return[ZM.create({range:aD.create({start:0,end:e.length}),text:t})];const{compactedOperations:u}=a.reduce((({compactedOperations:e,index:t},n,r)=>{if(!n.added&&!n.removed)return{compactedOperations:e,index:t+n.value.length};const o=a[r-1];if(!o||!o.added&&!o.removed){const r=function(e,t){if(!e.added&&!e.removed)throw new Error("Cannot convert change object that represents common chunk to text change operation");return e.removed?Fj(t,t+e.value.length,""):Fj(t,t,e.value)}(n,t);return{compactedOperations:[...e,r],index:t+r.text.length}}const i=e[e.length-1],s=function(e,t){return t.removed?Fj(e.range.start,e.range.end+t.value.length,e.text):Fj(e.range.start,e.range.end,e.text+t.value)}(i,n);return{compactedOperations:[...e.slice(0,-1),s],index:t-_W(i)+_W(s)}}),{compactedOperations:[],index:i});return u}const TW=(e,t)=>e.split("-")[0]===t.split("-")[0];function yW(e,t){var n;if(!1===e){const e=new Error(null!=t?t:"assertion failure");throw null===(n=Error.captureStackTrace)||void 0===n||n.call(Error,e,yW),e}}function EW(e){throw new Error("non-exhaustive case analysis")}const SW=e=>{const t=document.createElement("div");t.textContent=e;return t.innerHTML.replace(/'/g,"&#39;").replace(/"/g,"&quot;")};function IW(e,t){return t.includes(e)}function*AW(e,t){for(let n=0;n<e.length&&n<t.length;n+=1)yield[e[n],t[n]]}function bW(e){return new Promise((t=>{setTimeout(t,e)}))}class wW{constructor(e,t){this.document=e,this.name=t,this.stateReadonly=this.document.stateReadonly.pipe(sk((e=>UW(this.name,e)))),this.content=this.stateReadonly.pipe(sk((e=>e.content)),dk()),this.isPreConnectionStateInSync=!0}getCurrentContent(){return UW(this.name,this.document.stateReadonly.value).content}update(e){const t=mW(vW(this.getCurrentContent(),e));return this.document.applyOperationBatch([[this.name,t]]),t}prettyPrint(){const e=UW(this.name,this.document.stateReadonly.value);return LW(this.name,e)}}const OW={content:"",properties:eF(),annotations:eF()};function NW(e,t){if(t.$type===ZM.$type){const n=e.content;try{const r=function(e,t){var n,r;if(void 0===t.range||t.range.start>e.length||t.range.start<0||t.range.end>e.length||t.range.end<0||t.range.start>t.range.end)throw new Error(`Tried to apply out of range operation with start: ${null===(n=t.range)||void 0===n?void 0:n.start} and end: ${null===(r=t.range)||void 0===r?void 0:r.end} to string of length: ${e.length}`);return e.slice(0,t.range.start)+t.text+e.slice(t.range.end)}(n,t),o=PW(e.annotations,[t]);return Object.assign(Object.assign({},e),{content:r,annotations:o})}catch(t){return console.warn(`Error applying text change operation to document: ${t}. Skipping it.`),e}}else{if(t.$type===eG.$type)return function(e,t){const{annotationId:n}=t;yW(void 0!==n,"CreateAnnotationOperation without ID");const r=function(e){return e.textUnitPayload?e.textUnitPayload:e.requestWordAlternativesPayload?e.requestWordAlternativesPayload:e.providedWordAlternativesPayload?e.providedWordAlternativesPayload:e.providedWordAlternativeHighlightPayload?e.providedWordAlternativeHighlightPayload:e.selectWordAlternativePayload?e.selectWordAlternativePayload:e.translatorGlossaryReplacementPayload?e.translatorGlossaryReplacementPayload:e.requestTextUnitAlternativesPayload?e.requestTextUnitAlternativesPayload:e.translatorProvidedTextUnitAlternativesPayload?e.translatorProvidedTextUnitAlternativesPayload:e.selectTextUnitAlternativePayload?e.selectTextUnitAlternativePayload:e.translatorRequestAutocompletionPayload?e.translatorRequestAutocompletionPayload:e.translatorProvidedAutocompletionPayload?e.translatorProvidedAutocompletionPayload:e.translatorSelectAutocompletionPayload?e.translatorSelectAutocompletionPayload:e.translatorProvidedAutomaticTextUnitAlternativesPayload?e.translatorProvidedAutomaticTextUnitAlternativesPayload:e.selectAutomaticTextUnitAlternativePayload?e.selectAutomaticTextUnitAlternativePayload:e.writeProvidedTextUnitAlternativesPayload?e.writeProvidedTextUnitAlternativesPayload:e.writeProvidedAutomaticTextUnitAlternativesPayload?e.writeProvidedAutomaticTextUnitAlternativesPayload:e.writeDiffUnitPayload?e.writeDiffUnitPayload:e.textFormattingPayload?e.textFormattingPayload:e.translatorProvidedClarifyHighlightPayload?e.translatorProvidedClarifyHighlightPayload:e.translatorProvidedClarifyQuestionPayload?e.translatorProvidedClarifyQuestionPayload:e.translatorRequestClarifyPayload?e.translatorRequestClarifyPayload:e.translatorSelectClarifyAnswerPayload?e.translatorSelectClarifyAnswerPayload:e.writeRequestChangeStyleAlternativesAnnotationPayload?e.writeRequestChangeStyleAlternativesAnnotationPayload:e.writeProvidedChangeStyleAlternativesAnnotationPayload?e.writeProvidedChangeStyleAlternativesAnnotationPayload:e.writeSelectChangeStyleAlternativeAnnotationPayload?e.writeSelectChangeStyleAlternativeAnnotationPayload:e.translatorClarifyStatusPayload?e.translatorClarifyStatusPayload:e.customRuleAnnotationPayload?e.customRuleAnnotationPayload:e.writeRequestTemplateAdaptationAnnotationPayload?e.writeRequestTemplateAdaptationAnnotationPayload:e.writeProvidedTemplateAdaptationAnnotationPayload?e.writeProvidedTemplateAdaptationAnnotationPayload:e.writeInlineSuggestionAnnotationPayload?e.writeInlineSuggestionAnnotationPayload:e.writeInlineSuggestionSpanAnnotationPayload?e.writeInlineSuggestionSpanAnnotationPayload:e.writeActOnInlineSuggestionAnnotationPayload?e.writeActOnInlineSuggestionAnnotationPayload:e.writeInlineSuggestionsTextUnitStateAnnotationPayload?e.writeInlineSuggestionsTextUnitStateAnnotationPayload:e.writeRequestInlineSuggestionImprovedTextAnnotationPayload?e.writeRequestInlineSuggestionImprovedTextAnnotationPayload:e.writeProvidedInlineSuggestionImprovedTextAnnotationPayload?e.writeProvidedInlineSuggestionImprovedTextAnnotationPayload:null}(t);if(null===r)return e;const o={operation:t,specificPayload:r},i=e.annotations.update(r.$type,(e=>void 0===e?[o]:[...e,o]));return Object.assign(Object.assign({},e),{annotations:i})}(e,t);if(t.$type===tG.$type)return function(e,t){const{annotationId:n}=t;yW(void 0!==n,"RemoveAnnotationOperation without ID");const r=e.annotations.map((e=>e.filter((e=>{var t;return(null===(t=e.operation.annotationId)||void 0===t?void 0:t.value)!==n.value}))));return Object.assign(Object.assign({},e),{annotations:r})}(e,t);if(t.$type===nG.$type)return function(e,t){const{propertyName:n}=t,r=function(e){return e.translatorSourceLanguagesValue?e.translatorSourceLanguagesValue:e.translatorTargetLanguagesValue?e.translatorTargetLanguagesValue:e.translatorRequestedSourceLanguageValue?e.translatorRequestedSourceLanguageValue:e.translatorCalculatedSourceLanguageValue?e.translatorCalculatedSourceLanguageValue:e.translatorRequestedTargetLanguageValue?e.translatorRequestedTargetLanguageValue:e.translatorCalculatedTargetLanguageValue?e.translatorCalculatedTargetLanguageValue:e.translatorFormalityModesValue?e.translatorFormalityModesValue:e.translatorFormalityModeValue?e.translatorFormalityModeValue:e.translatorGlossarySupportValue?e.translatorGlossarySupportValue:e.translatorGlossaryListValue?e.translatorGlossaryListValue:e.translatorGlossaryIdValue?e.translatorGlossaryIdValue:e.translatorLanguageModelsValue?e.translatorLanguageModelsValue:e.translatorLanguageModelValue?e.translatorLanguageModelValue:e.translatorTextDirectionValue?e.translatorTextDirectionValue:e.translatorMaximumTextLengthValue?e.translatorMaximumTextLengthValue:e.translatorUnsupportedSourceLanguageValue?e.translatorUnsupportedSourceLanguageValue:e.writeGlossarySupportValue?e.writeGlossarySupportValue:e.writeGlossaryListValue?e.writeGlossaryListValue:e.writeGlossaryIdValue?e.writeGlossaryIdValue:e.writeLanguagesValue?e.writeLanguagesValue:e.writeMaximumTextLengthValue?e.writeMaximumTextLengthValue:e.writeUnsupportedLanguageValue?e.writeUnsupportedLanguageValue:e.writeRequestedLanguageValue?e.writeRequestedLanguageValue:e.writeCalculatedLanguageValue?e.writeCalculatedLanguageValue:e.writeStyleVariantsValue?e.writeStyleVariantsValue:e.writeStyleVariantValue?e.writeStyleVariantValue:e.translatorSourceLanguageDetectionWeightsValue?e.translatorSourceLanguageDetectionWeightsValue:e.writeGlossaryLanguagesValue?e.writeGlossaryLanguagesValue:e.writeStyleGuideSupportValue?e.writeStyleGuideSupportValue:e.writeStyleGuideIdValue?e.writeStyleGuideIdValue:e.translatorStyleGuideSupportValue?e.translatorStyleGuideSupportValue:e.translatorStyleGuideIdValue?e.translatorStyleGuideIdValue:e.writeTemplateAdaptationTemplatesValue?e.writeTemplateAdaptationTemplatesValue:e.translatorFreeTextPromptListValue?e.translatorFreeTextPromptListValue:e.writeFreeTextPromptListValue?e.writeFreeTextPromptListValue:e.interfaceLanguageValue?e.interfaceLanguageValue:e.translatorLanguageModelPreferencesValue?e.translatorLanguageModelPreferencesValue:e.writeInlineSuggestionsLoadingValue?e.writeInlineSuggestionsLoadingValue:e.writeCorrectionsOnlySupportValue?e.writeCorrectionsOnlySupportValue:e.writeCorrectionsOnlyValue?e.writeCorrectionsOnlyValue:e.translatorRtfSupportValue?e.translatorRtfSupportValue:e.translatorStyleVariantsValue?e.translatorStyleVariantsValue:e.translatorStyleVariantValue?e.translatorStyleVariantValue:e.writeTextUnitAlternativesSupportValue?e.writeTextUnitAlternativesSupportValue:e.translatorTranslationMemoryListValue?e.translatorTranslationMemoryListValue:e.translatorSelectedTranslationMemoryValue?e.translatorSelectedTranslationMemoryValue:void 0}(t),o=e.properties.get(n);if(void 0===r){const t=e.properties.delete(n);return Object.assign(Object.assign({},e),{properties:t})}if(void 0===o||r.$type===o.type){const t=e.properties.set(n,{type:r.$type,value:r});return Object.assign(Object.assign({},e),{properties:t})}throw new Error(`PropertyValue has type ${r.$type}, but ${o.type} expected`)}(e,t)}EW()}function RW(e,t){var n;return[...(null!==(n=e.annotations.get(t))&&void 0!==n?n:eF()).values()]}function LW(e,t){return{fieldName:e,text:t.content,annotations:[...t.annotations.values()].flatMap((e=>[...e.entries()].map((([e,t])=>({id:e,range:t.operation.range,annotationPayload:t.specificPayload}))))),properties:[...t.properties.entries()].map((([e,t])=>({propertyName:e,propertyValue:t.value})))}}function PW(e,t){return e.map(((e,n)=>{if(function(e){return!kj.has(e)}(n)){const[n,r]=gW(t,e.map((e=>e.operation)));return[...AW(e,r)].map((([e,t])=>({operation:t,specificPayload:e.specificPayload})))}return e}))}let CW=class{constructor(){this.initialState=eF(),this.state=new Gx(this.initialState),this.stateReadonly=this.state}updateState(e){this.state.next(e(this.state.value))}updateFieldState(e,t){this.updateState((n=>{const r=UW(e,n);return n.set(e,t(r))}))}applyItaEventBatch(e){const t=e.reduce(kW,this.state.value);this.state.next(t)}applyOperationBatch(e){let t=this.state.value;for(const[n,r]of e)for(const e of r)t=DW(n,t,e);this.state.next(t)}serialize(){return xW(this.state.value)}prettyPrint(){return{fields:[...this.state.value.entries()].map((([e,t])=>LW(e,t)))}}reset(){this.state.next(this.initialState)}};function xW(e){return TG.create({fields:[...e.entries()].map((([e,t])=>function(e,t){return{$type:yG.$type,fieldName:e,text:t.content,annotations:[...t.annotations.values()].flatMap((e=>[...e.values()].map((e=>e.operation)))),properties:[...t.properties.entries()].map((([e,t])=>Wj(e,t.value)))}}(e,t)))})}function kW(e,t){const n=Vj(t);return DW(t.fieldName,e,n)}function DW(e,t,n){return t.update(e,((e=OW)=>NW(e,n)))}function UW(e,t){var n;return null!==(n=t.get(e))&&void 0!==n?n:OW}class MW{constructor(e,t,n){this.name=e,this.sessionMode=t,this.document=n,this.bufferedInitialEvents=[]}addChangeHandler(e){this.onChange=e,this.onChange(this.bufferedInitialEvents),this.bufferedInitialEvents=[]}applyFieldEventBatch(e){this.document.applyItaEventBatch(e)}publishChange(e,t){const n=t.map((t=>$j(t,e)));this.publishEvents(n)}publishChanges(e){const t=e.flatMap((([e,t])=>t.map((t=>$j(t,e)))));this.publishEvents(t)}publishEvents(e){this.onChange?this.onChange(e):this.bufferedInitialEvents=[...this.bufferedInitialEvents,...e]}}function GW(e){return e.$type===iG.$type}function VW(e){return e.$type===cG.$type}function $W(e){return e.$type===uG.$type}function FW(e){if(function(e){return e.$type===aG.$type}(e))return function(e){if(null==e?void 0:e.confirmedMessage)return e.confirmedMessage;if(null==e?void 0:e.initializedMessage)return e.initializedMessage;if(null==e?void 0:e.publishedMessage)return e.publishedMessage;if(null==e?void 0:e.metaInfoMessage)return e.metaInfoMessage;throw new Error("ParticipantResponse does not contain a message")}(e);if(GW(e))return function(e){if(null==e?void 0:e.appendMessage)return e.appendMessage;if(null==e?void 0:e.updateAuthenticationTokenMessage)return e.updateAuthenticationTokenMessage;throw new Error("ParticipantRequest does not contain a message")}(e);throw new Error("Extracting message failed, you need to pass a ParticipantRequest or ParticipantResponse")}class jW{constructor(e){var t,n,r,o;this.currentVersion={$type:_G.$type,version:void 0},this.isInitialized=!1,this.pendingEvents=[],this.sentEvents=[],this.confirmedEvents=[],this.syncedSnapshot=eF(),this.incomingEventBatches=e.pipe(sk((e=>FW(e))),(o=ux(t=e=>{(function(e){return e.$type===sG.$type})(e)&&this.handleConfirmedMessage(e),function(e){return e.$type===lG.$type}(e)&&this.handleInitializedMessage()})||n||r?{next:t,error:n,complete:r}:t)?Cx((function(e,t){var n;null===(n=o.subscribe)||void 0===n||n.call(o);var r=!0;e.subscribe(xx(t,(function(e){var n;null===(n=o.next)||void 0===n||n.call(o,e),t.next(e)}),(function(){var e;r=!1,null===(e=o.complete)||void 0===e||e.call(o),t.complete()}),(function(e){var n;r=!1,null===(n=o.error)||void 0===n||n.call(o,e),t.error(e)}),(function(){var e,t;r&&(null===(e=o.unsubscribe)||void 0===e||e.call(o)),null===(t=o.finalize)||void 0===t||t.call(o)})))})):Rx,lk(VW),sk((e=>this.handlePublished(e))),_k())}addClientEvents(e){this.pendingEvents.push(...e),this.trySendPendingEvents()}handleConfirmedMessage(e){this.currentVersion=e.currentVersion,this.syncedSnapshot=this.sentEvents.reduce(kW,this.syncedSnapshot),this.confirmedEvents.push(...this.sentEvents),this.sentEvents=[],this.trySendPendingEvents()}handlePublished(e){const t=e.events;this.syncedSnapshot=t.reduce(kW,this.syncedSnapshot);const{transformedIncomingEvents:n,transformedExistingEvents:r}=hW(t,this.sentEvents);this.sentEvents=r;const{transformedIncomingEvents:o,transformedExistingEvents:i}=hW(n,this.pendingEvents);return this.pendingEvents=i,this.confirmedEvents.push(...o),this.currentVersion=e.currentVersion,this.trySendPendingEvents(),o}connectToSession(e){this.isInitialized=!1,this.sendEvents=e,this.trySendPendingEvents()}trySendPendingEvents(){if(0===this.pendingEvents.length||this.sentEvents.length>0||!this.isInitialized||!this.sendEvents)return;const e=this.pendingEvents.reduce(((e,t)=>{if(function(e){var t,n;return void 0!==e&&(null===(t=e.range)||void 0===t?void 0:t.start)===(null===(n=e.range)||void 0===n?void 0:n.end)&&0===e.text.length}(t.textChangeOperation))return e;if(0===e.length)return[t];const n=e[e.length-1];if((null==n?void 0:n.fieldName)!==t.fieldName||!t.textChangeOperation||!(null==n?void 0:n.textChangeOperation))return[...e,t];const r=n.textChangeOperation,o=t.textChangeOperation,i=o.range.start-r.range.start,a=o.range.end-r.range.start,s=Math.max(0,i),l=Math.min(r.text.length,a);if(s>l)return[...e,t];const c=Math.min(0,i),u=a-i-(l-s),d=$j(Fj(r.range.start+c,r.range.end+c+u,r.text.slice(0,s)+o.text+r.text.slice(l)),t.fieldName);return[...e.slice(0,-1),d]}),new Array);e.length>0&&(this.sentEvents=this.sendEvents(e,this.currentVersion)),this.pendingEvents=[]}handleInitializedMessage(){this.sentEvents.length>0&&this.sendEvents(this.sentEvents,this.currentVersion),this.isInitialized=!0,this.trySendPendingEvents()}}function WW(e,t){return e.start===t.start&&e.end===t.end}function qW(e,t){return t.start<=e.start&&e.end<=t.end}function BW(e,t){return qW(e,t)&&!WW(e,t)}function HW(e,t=!1){const n={start:0,end:e.plainText.length};if(t){const t=function(e,t){const n=uq(e),{remainingForest:r,extractedTrees:o}=cq(n,t);return o.reduce(lq,r)}(QW(e.textFormattingAnnotations,!1),n);return eq(e.plainText,n,t)}{const t=QW(e.textFormattingAnnotations);return eq(e.plainText,n,t)}}function JW(e,t,n){if(t.nodeType===Node.TEXT_NODE)return{text:t.textContent,id:void 0};const r={$type:wU.$type,value:crypto.randomUUID()};let o=n,i="";const a=[];if(t.hasChildNodes())for(const n of t.childNodes){const t=JW(e,n,o),r=t.text,s=t.id;o+=r.length,i=i.concat(r),void 0!==s&&a.push(s)}const s={$type:aD.$type,start:n,end:o},l={};if(t instanceof HTMLAnchorElement){t.href.length<=1024?l.href=t.href:console.warn("[text-formatting] discarding href with too many bytes")}if("HTML"!==t.nodeName&&"BODY"!==t.nodeName&&"HEAD"!==t.nodeName){const n={$type:OU.$type,textFormattingId:r,name:t.nodeName,children:a,attributes:l};e.push({operation:{$type:eG.$type,annotationId:{$type:eD.$type,value:crypto.randomUUID()},range:s,textFormattingPayload:n},specificPayload:n})}return{text:i,id:r}}function zW(e){const t=(new DOMParser).parseFromString(`<body>${e}</body>`,"text/html"),n=new Array,{text:r}=JW(n,t.body,0);return{plainText:r,textFormattingAnnotations:n}}function YW(e,t){if(e.plainText.length<=t)return e;const n=e.plainText.slice(0,t),r=e.textFormattingAnnotations.filter((e=>e.operation.range.start<t)).map((e=>e.operation.range.end<=t?e:Object.assign(Object.assign({},e),{operation:Object.assign(Object.assign({},e.operation),{range:Object.assign(Object.assign({},e.operation.range),{end:t})})}))),o=new Set(r.map((e=>e.specificPayload.textFormattingId.value)));return{plainText:n,textFormattingAnnotations:r.map((e=>{const t=e.specificPayload.children.filter((e=>o.has(e.value))),n=Object.assign(Object.assign({},e.specificPayload),{children:t});return{operation:Object.assign(Object.assign({},e.operation),{textFormattingPayload:n}),specificPayload:n}}))}}function XW(e,t){return Object.assign(Object.assign({},e),{children:t,childTextFormattingIds:t.map((e=>e.textFormattingId))})}function KW(e){const{textFormattingId:t,name:n,children:r,attributes:o}=e.specificPayload;yW(void 0!==t,"[text-formatting] text formatting annotation without ID");const{range:i}=e.operation;return yW(void 0!==i,"[text-formatting] text formatting annotation without range"),yW(void 0!==e.operation.annotationId,"[text-formatting] annotation without annotationId"),{textFormattingId:t.value,annotationId:e.operation.annotationId.value,tag:n,range:i,childTextFormattingIds:r.map((e=>e.value)),href:o.href}}function QW(e,t=!0){const n=new Map;for(const r of e){const e=KW(r);try{yW(!n.has(e.textFormattingId),"[text-formatting] multiple formatting annotations with same formatting ID"),n.set(e.textFormattingId,e)}catch(e){if(t)throw e;console.warn(e)}}const r=new Set;const o=new Set(n.keys());for(const e of n.values())for(const t of e.childTextFormattingIds)o.delete(t);return[...o].sort(((e,t)=>{const r=n.get(e),o=n.get(t);return r.range.start-o.range.start||r.range.end-o.range.end})).flatMap((function e(o){try{yW(!r.has(o),`[text-formatting] ID "${o}" is child of multiple annotations.`);const t=n.get(o);return yW(void 0!==t,`[text-formatting] no annotation for ID "${o}".`),n.delete(o),r.add(o),[XW(t,t.childTextFormattingIds.flatMap(e))]}catch(e){if(t)throw e;return console.warn(e),[]}}))}function ZW(e,t){const n=eq(e,t.range,t.children);if("BR"===t.tag)return yW(""===n,"[text-formatting] BR element with children"),"<BR/>";if("A"===t.tag){return`<A${void 0===t.href||""===t.href?"":` href="${t.href}"`}>${n}</A>`}return`<${t.tag}>${n}</${t.tag}>`}function eq(e,t,n){let r=t.start,o="";for(const t of n)yW(r<=t.range.start,"[text-formatting] sibling annotations with overlapping ranges"),o+=SW(e.slice(r,t.range.start)),o+=ZW(e,t),r=t.range.end;return yW(r<=t.end,"[text-formatting] child annotation leaks out of parent range"),o+=SW(e.slice(r,t.end)),o}function tq(e,t){const n=QW(e),r=QW(t);performance.now();const o=function(e,t){const n=new Map,r=(e,t)=>{if(!function(e,t){return e.tag===t.tag&&e.range.start===t.range.start&&e.range.end===t.range.end}(e,t))return 0;if(e.children.length!==t.children.length)return 1;const o=n.get(e.textFormattingId),i=null==o?void 0:o.get(t.textFormattingId);if(void 0!==i)return i;const a=[...AW(e.children,t.children)].map((([e,t])=>r(e,t))),s=Math.min(...a)+1;return void 0===o?n.set(e.textFormattingId,new Map([[t.textFormattingId,s]])):o.set(t.textFormattingId,s),s},{operations:o}=iq(e,t,r);return o}(n,r);return performance.now(),o}function nq(e){return function(e){const t=wU.create({value:e.textFormattingId}),n=OU.create({textFormattingId:t,name:e.tag,children:e.childTextFormattingIds.map((e=>({$type:wU.$type,value:e}))),attributes:e.href?{href:e.href}:{}});return{operation:eG.create({annotationId:eD.create({value:crypto.randomUUID()}),range:aD.create({start:e.range.start,end:e.range.end}),textFormattingPayload:n}),specificPayload:n}}(e).operation}function rq(e){return tG.create({annotationId:eD.create({value:e.annotationId})})}function oq(e){return e.flatMap((e=>[e,...oq(e.children)]))}function iq(e,t,n){if(0===e.length)return{resultForest:t,operations:oq(t).map(nq)};if(0===t.length)return{resultForest:[],operations:oq(e).map(rq)};const[r,...o]=e,[i,...a]=t;if(n(r,i)===1/0){const e=iq(o,a,n);return{resultForest:[r,...e.resultForest],operations:e.operations}}return aq(e,t,n)}function aq(e,t,n){if(0===e.length)return{resultForest:t,operations:oq(t).map(nq)};if(0===t.length)return{resultForest:[],operations:oq(e).map(rq)};const r=e[e.length-1],o=e.slice(0,-1),i=t[t.length-1],a=t.slice(0,-1),s=n(r,i);if(s===1/0){const e=aq(o,a,n);return{resultForest:[...e.resultForest,r],operations:e.operations}}const l=iq(r.children,i.children,n);if(0===s){const e=XW(i,l.resultForest);return{resultForest:[...a,e],operations:[...l.operations,...oq(o).map(rq),rq(r),...oq(a).map(nq),nq(e)]}}if(1===s){const e=XW({tag:i.tag,range:i.range,annotationId:i.annotationId,textFormattingId:r.textFormattingId},l.resultForest);return{resultForest:[...a,e],operations:[...l.operations,...oq(o).map(rq),rq(r),...oq(a).map(nq),nq(e)]}}{const e=XW(r,l.resultForest);return{resultForest:[...a,e],operations:[...l.operations,...oq(o).map(rq),...oq(a).map(nq)]}}}function sq(e,t){const n=["DIV","P","H1","H2","H3","H4","H5","H6","UL","OL","LI","A","B","STRONG","I","EM","INS","DEL","CODE","U","S","SPAN","BR"],r=n.indexOf(e.tag);-1===r&&console.warn(`[text-formatting] Don't know how to merge trees with tag <${e.tag}>`);const o=n.indexOf(t.tag);return-1===r&&console.warn(`[text-formatting] Don't know how to merge trees with tag <${t.tag}>`),r<=o?XW(e,lq(e.children,t)):XW(t,lq(t.children,e))}function lq(e,t){if(0===e.length)return[t];{const[n,...r]=e;if(t.range.end<=n.range.start)return[t,...e];if(t.range.start>=n.range.end)return[n,...lq(r,t)];if(WW(t.range,n.range))return[sq(t,n),...r];if(BW(t.range,n.range)){return[XW(n,lq(n.children,t)),...r]}if(BW(n.range,t.range)){const e=XW(t,lq(t.children,n));return lq(r,e)}return console.warn("[text-formatting] Dropping annotation with unrecoverable range overlap."),console.warn("tried to insert tree: ",t),console.warn("into forest: ",e),e}}function cq(e,t){if(0===e.length)return{extractedTrees:[],remainingForest:[]};const[n,...r]=e,o=cq(n.children,n.range),i=XW(n,o.remainingForest);if(qW(i.range,t)){const e=cq(r,{start:i.range.end,end:t.end});return{remainingForest:[i,...e.remainingForest],extractedTrees:[...o.extractedTrees,...e.extractedTrees]}}{console.warn("[text-formatting] Annotation range overlaps with sibling or leaks out of parent. Will try to recover."),console.warn("Offending tree: ",n);const e=cq(r,t);return{remainingForest:e.remainingForest,extractedTrees:[i,...e.extractedTrees,...o.extractedTrees]}}}function uq(e){return e.flatMap((e=>"BR"===e.tag&&e.range.start!==e.range.end?(console.warn("[text-formatting] Dropping <BR> with non-zero range."),e.children):[XW(e,uq(e.children))]))}var dq,pq=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){e[e.Connecting=0]="Connecting",e[e.Reconnecting=1]="Reconnecting",e[e.Restoring=2]="Restoring",e[e.Connected=3]="Connected",e[e.Disconnected=4]="Disconnected"}(dq||(dq={}));class gq extends Error{constructor(){super(...arguments),this.name="ConnectionError"}}class hq extends Error{constructor(e){super("There was an error with the session on the server. See the info property for details."),this.info=e,this.name="SessionError"}}class fq{constructor(e,t,n,r,o,i,a){this.connectionBuilder=e,this.config=t,this.client=n,this.useHttpPostForStartSession=r,this.dangerousEnableItaMessageConsoleLogging=o,this.serverUrl=i,this.metaInfo=a,this.participantResponses=new Ux,this.participantRequests=new Ux,this.errorInfoSubject=new Gx(null),this.error=this.errorInfoSubject.pipe(lk((e=>null!==e))),this.statusSubject=new Gx(dq.Disconnected),this.status=this.statusSubject.asObservable(),this.messagesSubject=new Ux,this.messages=this.messagesSubject.asObservable(),this.connection=this.connectionBuilder.build(),this.participantRequests.subscribe((e=>this.messagesSubject.next(e))),this.participantResponses.subscribe((e=>this.messagesSubject.next(e))),this.dangerousEnableItaMessageConsoleLogging&&this.messages.subscribe((e=>{const t=JSON.parse(JSON.stringify(FW(e)));GW(e)?console.info("[Session] send:",t):console.info("[Session] recv:",t)})),this.eventHandler=new jW(this.participantResponses),t.isRestoredSession||this.client.addChangeHandler((e=>{this.eventHandler.addClientEvents(e)})),t.resetDocumentBeforeFirstMessage&&this.eventHandler.incomingEventBatches.pipe(hk()).subscribe((()=>this.client.document.reset())),t.isRestoredSession||this.eventHandler.incomingEventBatches.subscribe((e=>this.client.applyFieldEventBatch(e))),this.participantResponses.pipe(sk(FW),lk($W)).subscribe((e=>{var t;return null===(t=this.metaInfo)||void 0===t?void 0:t.addMetaInfoMessage(e)})),this.connection.onclose((e=>{this.statusSubject.value===dq.Connected&&(this.statusSubject.next(dq.Disconnected),this.errorInfoSubject.next(new gq(`The connection was closed with error: ${e} `)))})),this.statusSubject.subscribe((e=>{e===dq.Disconnected&&this.connection.off("OnError"),e!==dq.Connecting&&e!==dq.Reconnecting||this.connection.on("OnError",(e=>{this.statusSubject.next(dq.Disconnected),this.errorInfoSubject.next(new hq(e))}))}))}connect(e,t){return pq(this,void 0,void 0,(function*(){return this.connectInternal({baseDocument:e,appInformation:t})}))}connectInternal(e){return pq(this,void 0,void 0,(function*(){if(this.statusSubject.value!==dq.Disconnected)return;if(this.errorInfoSubject.next(null),this.startSessionResponse&&!e.baseDocument?this.statusSubject.next(dq.Reconnecting):this.statusSubject.next(dq.Connecting),this.connection.state!==cC.Connected)try{yield this.connection.start()}catch(e){yW(e instanceof Error,"Caught value which is not of type Error"),this.statusSubject.next(dq.Disconnected);const t=e.message.includes("Status code '401'"),n=e.message.includes("Status code '403'");throw t||n?new hq(NG.create({detailCode:OG.create({value:"1601_missing_or_invalid_authentication"})})):new gq(`Error starting connection: ${e}`)}this.startSessionResponse&&!e.baseDocument||(this.startSessionResponse=yield this.startSession(e));try{yield this.connection.send("AppendMessages",this.startSessionResponse.sessionToken,this.participantRequests)}catch(e){throw this.statusSubject.next(dq.Disconnected),new gq(`Error starting 'AppendMessages': ${e}`)}var t;this.eventHandler.connectToSession(((e,t)=>{const n=e.map((e=>Object.assign(Object.assign({},e),{participantId:this.startSessionResponse.participantId})));if(this.statusSubject.value!==dq.Connected)return n;const r=fW(function(e,t){return{$type:pG.$type,events:e,baseVersion:t}}(n,t));return this.participantRequests.next(r),n})),this.config.accessToken.pipe(lk((e=>"string"==typeof e)),(t=this.status.pipe(lk((e=>e===dq.Connected))),Cx((function(e,n){var r=!1,o=xx(n,(function(){null==o||o.unsubscribe(),r=!0}),Ex);Qx(t).subscribe(o),e.subscribe(xx(n,(function(e){return r&&n.next(e)})))}))),Tk(this.status.pipe(lk((e=>e===dq.Disconnected))))).subscribe((e=>this.updateAuthenticationToken(e)));const n=this.connection.stream("GetMessages",this.startSessionResponse.sessionToken,this.eventHandler.currentVersion).subscribe({next:e=>{this.statusSubject.value!==dq.Connected&&this.statusSubject.next(dq.Connected),this.participantResponses.next(e)},error:()=>{},complete:()=>{}});this.connection.on("OnError",(()=>n.dispose()))}))}startSession(e){return pq(this,void 0,void 0,(function*(){let t=null==e?void 0:e.appInformation;void 0!==t&&(t=Object.assign(Object.assign({},t),{appVersion:`${t.appVersion} (ITA SDK 3.17.0)`}));const n={$type:rG.$type,sessionMode:this.client.sessionMode,baseDocument:null==e?void 0:e.baseDocument,previousSessionId:null==e?void 0:e.previousSessionId,translatorSessionOptions:{$type:bM.$type,enableTranscription:this.config.enableTranscription,enableTranslatorQuoteConversion:this.config.enableTranslatorQuoteConversion,disableLanguageWeights:this.config.disableLanguageWeights,doNotOverrideRequestedSourceLanguage:this.config.doNotOverrideRequestedSourceLanguage,enableInlineSuggestions:this.config.enableInlineSuggestions,usageType:GU.UNSPECIFIED},appInformation:t};let r;return r=this.useHttpPostForStartSession?yield this.startSessionViaHttpPost(n):yield this.startSessionViaSignalR(n),r}))}startSessionViaSignalR(e){return pq(this,void 0,void 0,(function*(){let t;try{t=yield this.connection.invoke("StartSession",e)}catch(e){throw this.statusSubject.next(dq.Disconnected),new gq(`Error starting session: ${e}`)}const n=this.errorInfoSubject.value;if(null!==n)throw n;if(null===t)throw this.statusSubject.next(dq.Disconnected),new gq("No StartSessionResponse returned from StartSession");return t}))}startSessionViaHttpPost(e){return pq(this,void 0,void 0,(function*(){try{const t=rG.encode(e).finish(),n=new URL("/v1/startSession",this.serverUrl),r={"Content-Type":"application/x-protobuf"},o=this.config.accessToken.getValue();o&&(r.Authorization=`Bearer ${o}`);const i=yield fetch(n,{method:"POST",headers:r,body:t,credentials:"include"}),a=i.headers.get("Content-Type"),s=a&&a.includes("application/x-protobuf"),l=new Uint8Array(yield i.arrayBuffer());if(!i.ok&&s){const e=NG.decode(l);throw new gq(`Error starting session: ${e}`)}if(!i.ok)throw new gq(`HTTP error! Status: ${i.status}`);if(!s)throw new gq(`Response does not include a StartSessionResponse payload. Status: ${i.status}`);return oG.decode(l)}catch(e){throw this.statusSubject.next(dq.Disconnected),new gq(`Error starting session: ${e}`)}}))}restore(){return pq(this,void 0,void 0,(function*(){var e,t;const n=this.errorInfoSubject.value,r=n&&n instanceof hq&&"304_message_validation_failed"===(null===(e=n.info.detailCode)||void 0===e?void 0:e.value);this.errorInfoSubject.next(null),this.statusSubject.next(dq.Restoring),this.participantResponses.complete(),this.connection.stop();const o=xW(this.eventHandler.syncedSnapshot),i=Object.assign(Object.assign({},this.config),{resetDocumentBeforeFirstMessage:!1,isRestoredSession:!0}),a=new fq(this.connectionBuilder,i,this.client,this.useHttpPostForStartSession,this.dangerousEnableItaMessageConsoleLogging,this.serverUrl,this.metaInfo);a.eventHandler.incomingEventBatches.pipe(Tk(a.participantResponses.pipe(lk((e=>!!e.initializedMessage)))),ck(((e,t)=>[...e,...t]),[])).subscribe((e=>{var t;const n=this.client.document.stateReadonly.value;let i=e.reduce(kW,a.client.document.initialState);if(!r){if((null!==(t=null==o?void 0:o.fields.map((e=>({name:e.fieldName,text:e.text}))))&&void 0!==t?t:[]).sort(((e,t)=>e.name-t.name)).map((e=>e.text)).join("|")===[...i.entries()].map((([e,t])=>({name:e,text:t.content}))).sort(((e,t)=>e.name-t.name)).map((e=>e.text)).join("|")){const e=[...this.eventHandler.sentEvents,...this.eventHandler.pendingEvents].filter((e=>{var t;return!(null===(t=e.createAnnotationOperation)||void 0===t?void 0:t.textFormattingPayload)})),t=[];for(const[e,r]of i.entries()){const o=tq(RW(r,OU.$type),RW(UW(e,n),OU.$type));t.push(...o.map((t=>$j(t,e))))}const r=[...e,...t].map((e=>Object.assign(Object.assign({},e),{participantId:a.startSessionResponse.participantId})));i=r.reduce(kW,i),a.eventHandler.addClientEvents(r);for(const[e,t]of n){const n=UW(e,i),r=t.content,o=n.content;yW(r.startsWith(o),"Logic error while restoring excess field content: New content should be prefix of old content."),i=i.set(e,Object.assign(Object.assign({},n),{content:r}))}}}a.client.document.updateState((e=>i)),a.client.addChangeHandler((e=>{a.eventHandler.addClientEvents(e)})),a.eventHandler.incomingEventBatches.subscribe((e=>a.client.applyFieldEventBatch(e)))}));try{yield a.connectInternal({baseDocument:o,previousSessionId:null===(t=this.startSessionResponse)||void 0===t?void 0:t.sessionId})}catch(e){throw this.statusSubject.next(dq.Disconnected),e}return a}))}closeConnection(){return pq(this,void 0,void 0,(function*(){yield this.connection.stop()}))}updateAuthenticationToken(e){this.participantRequests.next(fW({$type:gG.$type,token:e}))}}var _q=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const mq=["301_invalid_session_token","303_unknown_session","1001_session_ended_transient","1300_session_ended_internal_error","900_multiple_invocations_forbidden"],vq=["400_session_ended_idle_timeout","1301_session_ended_manual_eviction"],Tq=["1002_transient","1302_unhandled_internal_error"],yq=["000_session_ended_mutual_end","200_session_ended","300_unsupported_session_mode","302_invalid_session_version","304_message_validation_failed","305_invalid_participant_id","700_service_level_mismatch","800_rate_limited","801_rate_limited_restricted","802_quota_exceeded","901_append_not_allowed","1000_participant_evicted","1200_obsolete_version_unavailable","1601_missing_or_invalid_authentication"],Eq=[...mq,...vq,...Tq,...yq,"1600_session_ended_authentication_token_expired"];class Sq{constructor(e,t){this.appInformation=t,this.states=new Gx({type:"initial",session:e}),this.statesReadonly=this.states.asObservable(),this.statesReadonly.subscribe((e=>{var t;console.log(`[PersistentSession] state: "${e.type}" ${null!==(t=function(e){var t,n,r;switch(e.type){case"initial":case"connect-on-user-action":case"restore-on-user-action":case"restoring":case"permanently-disconnected":case"await-access-token-update":return;case"connected":return`(session ID: ${null===(r=null===(n=null===(t=e.session)||void 0===t?void 0:t.startSessionResponse)||void 0===n?void 0:n.sessionId)||void 0===r?void 0:r.value})`;case"connecting":return`(retry #${e.retryCount})`;default:EW()}}(e))&&void 0!==t?t:""}`)}))}getCurrentState(){return this.states.value}onStart(e){const t=this.states.value;yW("initial"===t.type,'[PersistentSession] called "start" despite already started'),console.log('[PersistentSession] event: "start"'),this.connect(t.session,0,e),this.states.next({type:"connecting",retryCount:0,session:t.session,recentFailLoopErrorTimestamps:[],visibleError:void 0})}onStop(){"permanently-disconnected"===this.states.value.type?console.warn('[PersistentSession] called "stop" despite already disconnected'):(console.log('[PersistentSession] event: "stop"'),this.states.next({type:"permanently-disconnected",visibleError:void 0}))}onUserAction(){const e=this.states.value;"initial"===e.type||("connect-on-user-action"===e.type?(console.log('[PersistentSession] event: "user action"'),this.connect(e.session,0),this.states.next({type:"connecting",retryCount:0,session:e.session,recentFailLoopErrorTimestamps:[],visibleError:void 0})):"restore-on-user-action"===e.type&&(console.log('[PersistentSession] event: "user action"'),this.restore(e.session),this.states.next({type:"restoring",session:e.session,recentFailLoopErrorTimestamps:[],visibleError:void 0})))}onConnected(e){const t=this.states.value;yW("connecting"===t.type||"restoring"===t.type,`Connection established despite no connection attempt or already connected (current state: "${t.type}")`),this.states.next({type:"connected",session:e,recentFailLoopErrorTimestamps:t.recentFailLoopErrorTimestamps})}onError(e){if(e instanceof gq)this.onConnectionError(e);else{if(!(e instanceof hq))throw e;this.onSessionError(e)}}onSessionError(e){const t=this.states.value;yW("initial"!==t.type,"[PersistentSession] SessionError despite no connection attempt"),yW("restore-on-user-action"!==t.type,"[PersistentSession] SessionError despite no connection attempt"),yW("connect-on-user-action"!==t.type,"[PersistentSession] SessionError despite no connection attempt"),yW("restoring"!==t.type,"[PersistentSession] SessionError despite no session"),yW("await-access-token-update"!==t.type,"[PersistentSession] SessionError despite no session");const n=function(e){var t;if(void 0!==(null===(t=e.detailCode)||void 0===t?void 0:t.value)&&IW(e.detailCode.value,Eq))return e.detailCode.value;for(const t of e.fallbackDetailCodes)if(void 0!==t.value&&IW(t.value,Eq))return t.value}(e.info);if(console.log(`[PersistentSession] event: "session error" (${n})`),"connected"===t.type)if(IW(n,vq))this.states.next({type:"restore-on-user-action",session:t.session,visibleError:void 0});else if("1600_session_ended_authentication_token_expired"===n)this.states.next({type:"await-access-token-update",session:t.session});else if(IW(n,mq))this.restore(t.session),this.states.next({type:"restoring",visibleError:void 0,session:t.session,recentFailLoopErrorTimestamps:t.recentFailLoopErrorTimestamps});else if(IW(n,Tq)){const n=Date.now(),r=[n,...t.recentFailLoopErrorTimestamps.filter((e=>n-e<=12e4))];r.length>=6?this.states.next({type:"permanently-disconnected",visibleError:e}):(this.restore(t.session),this.states.next({type:"restoring",visibleError:e,recentFailLoopErrorTimestamps:r,session:t.session}))}else IW(n,yq)||void 0===n?this.states.next({type:"permanently-disconnected",visibleError:e}):EW();else"connecting"===t.type?(yW("700_service_level_mismatch"===n||"1601_missing_or_invalid_authentication"===n,`[PersistentSession] got SessionError ${n} despite no session`),this.states.next({type:"permanently-disconnected",visibleError:e})):"permanently-disconnected"===t.type||EW()}onConnectionError(e){const t=this.states.value;yW("initial"!==t.type,"[PersistentSession] ConnectionError despite no connection attempt"),yW("restore-on-user-action"!==t.type,"[PersistentSession] ConnectionError despite no connection attempt"),yW("connect-on-user-action"!==t.type,"[PersistentSession] ConnectionError despite no connection attempt"),yW("await-access-token-update"!==t.type,"[PersistentSession] ConnectionError despite no connection attempt"),console.log('[PersistentSession] event: "connection error"'),"connecting"===t.type?t.retryCount>=5?this.states.next({type:"connect-on-user-action",visibleError:e,session:t.session}):(this.connect(t.session,t.retryCount),this.states.next({type:"connecting",retryCount:t.retryCount+1,visibleError:void 0,session:t.session,recentFailLoopErrorTimestamps:t.recentFailLoopErrorTimestamps})):"connected"===t.type?(this.connect(t.session,0),this.states.next({type:"connecting",retryCount:0,visibleError:void 0,session:t.session,recentFailLoopErrorTimestamps:t.recentFailLoopErrorTimestamps})):"restoring"===t.type?this.states.next({type:"restore-on-user-action",session:t.session,visibleError:e}):"permanently-disconnected"===t.type||EW()}onAccessTokenUpdate(){const e=this.states.value;console.log('[PersistentSession] event: "access token update"'),"await-access-token-update"===e.type&&(this.restore(e.session),this.states.next({type:"restoring",session:e.session,recentFailLoopErrorTimestamps:[],visibleError:void 0}))}restore(e){return _q(this,void 0,void 0,(function*(){yield bW(0);try{const t=yield e.restore();t.error.subscribe((e=>{this.onError(e)})),this.onConnected(t)}catch(e){this.onError(e)}}))}connect(e,t,n){return _q(this,void 0,void 0,(function*(){yield bW(0),yield function(e){return _q(this,void 0,void 0,(function*(){e>0&&(yield bW(Math.pow(2,e-1)*Iq))}))}(t);try{yield e.connect(n,this.appInformation),this.onConnected(e)}catch(e){this.onError(e)}}))}}const Iq=500*(1+Math.random());var Aq;function bq(e){switch(e.type){case"initial":case"connect-on-user-action":case"restore-on-user-action":case"permanently-disconnected":return Aq.Disconnected;case"connected":return Aq.Connected;case"restoring":case"connecting":case"await-access-token-update":return Aq.Connecting;default:EW()}}!function(e){e[e.Connecting=0]="Connecting",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected"}(Aq||(Aq={}));class wq{constructor(e,t,n,r,o,i,a,s,l){const c=new fq(e,t,n,r,o,i,a);var u;this.stateMachine=new Sq(c,l),n.document.stateReadonly.subscribe((()=>{this.stateMachine.onUserAction()})),c.error.subscribe((e=>{this.stateMachine.onError(e)})),t.accessToken.pipe(dk(),(u=1,lk((function(e,t){return u<=t})))).subscribe((e=>{yW(void 0!==e,"got undefined access token"),this.stateMachine.onAccessTokenUpdate()})),this.status=this.stateMachine.statesReadonly.pipe(sk(bq)),this.errors=this.stateMachine.statesReadonly.pipe(sk((e=>"visibleError"in e?e.visibleError:void 0))),this.connectionAttemptLatency=this.stateMachine.statesReadonly.pipe(yk(),fk(),lk((([e,t])=>"connecting"===e.value.type&&"connected"===t.value.type)),sk((([e,t])=>t.timestamp-e.timestamp))),this.restorationAttemptLatency=this.stateMachine.statesReadonly.pipe(yk(),fk(),lk((([e,t])=>"restoring"===e.value.type&&"connected"===t.value.type)),sk((([e,t])=>t.timestamp-e.timestamp))),this.failLoopDetected=this.stateMachine.statesReadonly.pipe(lk((e=>"permanently-disconnected"===e.type)),sk((e=>{var t,n;return null===(n=null===(t=e.visibleError)||void 0===t?void 0:t.info.detailCode)||void 0===n?void 0:n.value})),lk((e=>IW(e,Tq))));const d=this.stateMachine.statesReadonly.pipe(vk((e=>"session"in e?ik(e.session):ik())),dk());this.messages=d.pipe(vk((e=>e.messages))),this.sessionId=this.status.pipe(Ek(d),sk((([e,t])=>{var n,r;return null===(r=null===(n=t.startSessionResponse)||void 0===n?void 0:n.sessionId)||void 0===r?void 0:r.value})),dk())}start(e){this.stateMachine.onStart(e)}stop(){this.stateMachine.onStop()}}class Oq{constructor(e,t,n){this.serverUrl=e,this.options=n;const r=new URL(e);r.pathname+="/sessions";const o=[(null==n?void 0:n.disableRateLimiting)?"disable-rate-limiting":null,(null==n?void 0:n.disableBotProtection)?"disable-bot-protection":null,(null==n?void 0:n.dangerousEnableUserTextLogging)?"dangerous-enable-user-text-logging":null].filter(Boolean).join(",");""!==o&&r.searchParams.set("x-deepl-options",o),(null==n?void 0:n.enforceLongPolling)&&console.warn("Using long polling transport for ITA connection"),(null==n?void 0:n.useHttpPostForStartSession)&&console.warn("Using HTTP POST for starting ITA session"),!0===(null==n?void 0:n.addClientIdentifier)&&r.searchParams.set("client",crypto.randomUUID()),this.accessTokenSubject=new Gx(t),this.connectionBuilder=(new wC).withHubProtocol(new cx({extensionCodec:PG()})).configureLogging(GP.Critical),this.connectionBuilder=t?this.connectionBuilder.withUrl(r.toString(),{accessTokenFactory:()=>this.accessTokenSubject.value,transport:(null==n?void 0:n.enforceLongPolling)?fC.LongPolling:void 0}):this.connectionBuilder.withUrl(r.toString(),{transport:(null==n?void 0:n.enforceLongPolling)?fC.LongPolling:void 0})}createSession(e,t,n){var r,o,i,a;const s=Object.assign(Object.assign({},{enableTranscription:!1,enableTranslatorQuoteConversion:!1,disableLanguageWeights:!1,doNotOverrideRequestedSourceLanguage:!1,enableInlineSuggestions:!1}),n);return new fq(this.connectionBuilder,Object.assign({accessToken:this.accessTokenSubject},s),e,null!==(o=null===(r=this.options)||void 0===r?void 0:r.useHttpPostForStartSession)&&void 0!==o&&o,null!==(a=null===(i=this.options)||void 0===i?void 0:i.dangerousEnableItaMessageConsoleLogging)&&void 0!==a&&a,this.serverUrl,t)}createPersistentSession(e,t,n,r,o){var i,a,s,l;const c=Object.assign(Object.assign({},{enableTranscription:!1,enableTranslatorQuoteConversion:!1,disableLanguageWeights:!1,doNotOverrideRequestedSourceLanguage:!1,enableInlineSuggestions:!1}),n);return new wq(this.connectionBuilder,Object.assign({accessToken:this.accessTokenSubject},c),e,null!==(a=null===(i=this.options)||void 0===i?void 0:i.useHttpPostForStartSession)&&void 0!==a&&a,null!==(l=null===(s=this.options)||void 0===s?void 0:s.dangerousEnableItaMessageConsoleLogging)&&void 0!==l&&l,this.serverUrl,t,r,o)}updateAccessToken(e){this.accessTokenSubject.next(e)}}class Nq{constructor(e,t,n){this.payloadType=e,this.fieldName=t,this.document=n,this.annotations=this.document.stateReadonly.pipe(sk((e=>this.getAnnotations(e))),dk()),this.payloads=this.annotations.pipe(sk((e=>e.map((e=>e.specificPayload)))),dk())}getAnnotations(e){return RW(UW(this.fieldName,e),this.payloadType)}getCurrentAnnotations(){return this.getAnnotations(this.document.stateReadonly.value)}add(e,t,n){const r=jj({$type:eD.$type,value:crypto.randomUUID()},e,t,n);return this.document.applyItaEventBatch([mG.create({fieldName:this.fieldName,createAnnotationOperation:r})]),[r]}set(e){this.document.updateFieldState(this.fieldName,(t=>{const n=t.annotations.set(this.payloadType,e);return Object.assign(Object.assign({},t),{annotations:n})}))}removeAnnotation(e){const t=function(e){return{$type:tG.$type,annotationId:e}}(e);return this.document.applyItaEventBatch([mG.create({fieldName:this.fieldName,removeAnnotationOperation:t})]),[t]}serialize(){return this.getAnnotations(this.document.stateReadonly.value).map((e=>e.operation))}prettyPrint(){return this.getAnnotations(this.document.stateReadonly.value).map((e=>{var t;return{id:null===(t=e.operation.annotationId)||void 0===t?void 0:t.value,range:e.operation.range,annotationPayload:e.specificPayload}}))}reset(){this.set([])}}class Rq{constructor(e,t,n,r){this.propertyName=e,this.propertyType=t,this.fieldName=n,this.document=r,this.value=this.document.stateReadonly.pipe(sk((e=>this.valueFrom(e))),dk())}valueFrom(e){var t;const n=null===(t=UW(this.fieldName,e).properties.get(this.propertyName))||void 0===t?void 0:t.value;if(void 0!==n)return yW(n.$type===this.propertyType,`Property ${this.propertyName} has unexpected type ${n.$type}, expected ${this.propertyType}`),n}getCurrentValue(){return this.valueFrom(this.document.stateReadonly.value)}set(e){const t=Wj(this.propertyName,e);return this.document.applyItaEventBatch([mG.create({fieldName:this.fieldName,setPropertyOperation:t})]),[t]}prettyPrint(){return{propertyName:JM[this.propertyName],propertyValue:this.getCurrentValue()}}}class Lq extends Rq{constructor(e,t){super(JM.TRANSLATOR_TEXT_DIRECTION,mM.$type,e,t),this.isRightToLeft=this.value.pipe(sk((e=>(null==e?void 0:e.textDirection)===UU.RIGHT_TO_LEFT)))}}const Pq=e=>!!e;let Cq=class extends Rq{constructor(e,t){super(JM.TRANSLATOR_MAXIMUM_TEXT_LENGTH,vM.$type,e,t),this.max=this.value.pipe(lk(Pq),sk((e=>e.max)))}},xq=class extends Rq{constructor(e,t){super(JM.TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE,TM.$type,e,t),this.unsupported=this.value.pipe(sk((e=>!!e)))}};class kq extends Rq{constructor(e,t){super(JM.TRANSLATOR_INTERFACE_LANGUAGE,sM.$type,e,t)}updateInterfaceLanguage(e){return super.set({$type:sM.$type,interfaceLanguage:e})}}class Dq extends Rq{constructor(e){super(JM.TRANSLATOR_CALCULATED_SOURCE_LANGUAGE,nM.$type,HM.TRANSLATOR_SOURCE_TEXT,e),this.language=this.value.pipe(sk((e=>{var t;return null===(t=null==e?void 0:e.sourceLanguage)||void 0===t?void 0:t.code}))),this.isAutoDetected=this.value.pipe(sk((e=>(null==e?void 0:e.origin)===pD.LANGUAGE_DETECTION)))}updateLanguage(e){return super.set({$type:nM.$type,sourceLanguage:{$type:xM.$type,code:e},origin:pD.REQUESTED_LANGUAGE,isLanguageDetectionConfident:!1})}getCurrent(){var e,t;return null===(t=null===(e=this.getCurrentValue())||void 0===e?void 0:e.sourceLanguage)||void 0===t?void 0:t.code}}class Uq extends Rq{constructor(e){super(JM.TRANSLATOR_REQUESTED_SOURCE_LANGUAGE,tM.$type,HM.TRANSLATOR_SOURCE_TEXT,e),this.language=this.value.pipe(sk((e=>{var t;return null===(t=null==e?void 0:e.sourceLanguage)||void 0===t?void 0:t.code})))}updateLanguage(e){if("autodetect"===e){return super.set(void 0)}return super.set({$type:tM.$type,sourceLanguage:{$type:xM.$type,code:e}})}}class Mq extends Rq{constructor(e){super(JM.TRANSLATOR_SOURCE_LANGUAGES,ZU.$type,HM.TRANSLATOR_SOURCE_TEXT,e),this.sourceLanguages=this.value.pipe(sk((e=>{var t;return null!==(t=null==e?void 0:e.sourceLanguages.map((e=>e.code)))&&void 0!==t?t:[]})))}}class Gq extends Rq{constructor(e){super(JM.TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS,yM.$type,HM.TRANSLATOR_SOURCE_TEXT,e),this.weights=this.value.pipe(sk((e=>{var t;return null!==(t=null==e?void 0:e.weights)&&void 0!==t?t:[]})))}updateSourceLanguageDetectionWeights(e){return super.set(void 0===e?void 0:{$type:yM.$type,weights:e})}}let Vq=class extends wW{constructor(){super(...arguments),this.calculatedSourceLanguageProperty=new Dq(this.document),this.requestedSourceLanguageProperty=new Uq(this.document),this.sourceLanguagesProperty=new Mq(this.document),this.maximumTextLengthProperty=new Cq(HM.TRANSLATOR_SOURCE_TEXT,this.document),this.unsupportedLanguageProperty=new xq(HM.TRANSLATOR_SOURCE_TEXT,this.document),this.sourceLanguageDetectionWeightsProperty=new Gq(this.document),this.interfaceLanguageProperty=new kq(HM.TRANSLATOR_SOURCE_TEXT,this.document),this.textDirection=new Lq(HM.TRANSLATOR_SOURCE_TEXT,this.document),this.sourceTextUnitAnnotations=new Nq(LU.$type,HM.TRANSLATOR_SOURCE_TEXT,this.document),this.textFormattingAnnotations=new Nq(OU.$type,HM.TRANSLATOR_SOURCE_TEXT,this.document),this.requestClarifyAnnotations=new Nq(zU.$type,HM.TRANSLATOR_SOURCE_TEXT,this.document),this.clarifyQuestionAnnotations=new Nq(KU.$type,HM.TRANSLATOR_SOURCE_TEXT,this.document),this.clarifyHighlightAnnotations=new Nq(XU.$type,HM.TRANSLATOR_SOURCE_TEXT,this.document),this.selectClarifyAnswerAnnotations=new Nq(QU.$type,HM.TRANSLATOR_SOURCE_TEXT,this.document),this.clarifyStatusAnnotations=new Nq(YU.$type,HM.TRANSLATOR_SOURCE_TEXT,this.document),this.customRuleHighlightAnnotations=new Nq(TD.$type,HM.TRANSLATOR_SOURCE_TEXT,this.document)}};class $q extends Rq{constructor(e){super(JM.TRANSLATOR_TARGET_LANGUAGES,eM.$type,HM.TRANSLATOR_TARGET_TEXT,e),this.targetLanguages=this.value.pipe(sk((e=>{var t;return null!==(t=null==e?void 0:e.targetLanguages.map((e=>e.code)))&&void 0!==t?t:[]})))}}class Fq extends Rq{constructor(e){super(JM.TRANSLATOR_CALCULATED_TARGET_LANGUAGE,oM.$type,HM.TRANSLATOR_TARGET_TEXT,e),this.language=this.value.pipe(sk((e=>{var t;return null===(t=null==e?void 0:e.targetLanguage)||void 0===t?void 0:t.code})))}updateLanguage(e){return super.set({$type:oM.$type,targetLanguage:{$type:kM.$type,code:e}})}}class jq extends Rq{constructor(e){super(JM.TRANSLATOR_REQUESTED_TARGET_LANGUAGE,rM.$type,HM.TRANSLATOR_TARGET_TEXT,e)}updateLanguage(e){return super.set({$type:rM.$type,targetLanguage:{$type:kM.$type,code:e}})}getCurrent(){var e,t;return null===(t=null===(e=this.getCurrentValue())||void 0===e?void 0:e.targetLanguage)||void 0===t?void 0:t.code}}let Wq=class extends Rq{constructor(e){super(JM.TRANSLATOR_STYLE_GUIDE_ID,aM.$type,HM.TRANSLATOR_TARGET_TEXT,e),this.styleGuideId=this.value.pipe(sk((e=>null==e?void 0:e.styleGuideId)))}updateStyleGuideId(e){return super.set({$type:aM.$type,styleGuideId:e?{$type:ED.$type,id:e}:void 0})}},qq=class extends Rq{constructor(e){super(JM.TRANSLATOR_FREE_TEXT_PROMPT_LIST,lM.$type,HM.TRANSLATOR_TARGET_TEXT,e),this.freeTextPromptList=this.value.pipe(sk((e=>null==e?void 0:e.freeTextPromptList)))}updateFreeTextPromptList(e){return super.set({$type:lM.$type,freeTextPromptList:e?{$type:uD.$type,prompts:e}:void 0})}},Bq=class extends Rq{constructor(e){super(JM.TRANSLATOR_STYLE_GUIDE_SUPPORT,uM.$type,HM.TRANSLATOR_TARGET_TEXT,e),this.supported=this.value.pipe(sk((e=>!!e)))}};class Hq extends Rq{constructor(e){super(JM.TRANSLATOR_GLOSSARY_SUPPORT,cM.$type,HM.TRANSLATOR_TARGET_TEXT,e),this.supported=this.value.pipe(sk((e=>!!e)))}}class Jq extends Rq{constructor(e){super(JM.TRANSLATOR_GLOSSARY_LIST,PM.$type,HM.TRANSLATOR_TARGET_TEXT,e),this.entries=this.value.pipe(sk((e=>{var t;return null!==(t=null==e?void 0:e.glossaryEntries)&&void 0!==t?t:[]})))}updateGlossaryList(e){return super.set(void 0===e?void 0:{$type:PM.$type,glossaryEntries:e})}}class zq extends Rq{constructor(e){super(JM.TRANSLATOR_GLOSSARY_SUGGESTIONS,PM.$type,HM.TRANSLATOR_TARGET_TEXT,e)}}class Yq extends Rq{constructor(e){super(JM.TRANSLATOR_FORMALITY_MODES,gM.$type,HM.TRANSLATOR_TARGET_TEXT,e)}}class Xq extends Rq{constructor(e){super(JM.TRANSLATOR_FORMALITY_MODE,hM.$type,HM.TRANSLATOR_TARGET_TEXT,e)}update(e){return super.set(void 0===e?void 0:{$type:hM.$type,formalityMode:e})}}class Kq extends Rq{constructor(e){super(JM.TRANSLATOR_LANGUAGE_MODELS,fM.$type,HM.TRANSLATOR_TARGET_TEXT,e)}}class Qq extends Rq{constructor(e){super(JM.TRANSLATOR_LANGUAGE_MODEL,_M.$type,HM.TRANSLATOR_TARGET_TEXT,e)}update(e){return super.set(void 0===e?void 0:{$type:_M.$type,languageModel:e})}}class Zq extends Rq{constructor(e){super(JM.TRANSLATOR_LANGUAGE_MODEL_PREFERENCES,RM.$type,HM.TRANSLATOR_TARGET_TEXT,e)}update(e){return super.set(void 0===e?void 0:{$type:RM.$type,preferences:e})}}class eB extends Rq{constructor(e){super(JM.TRANSLATOR_GLOSSARY_ID,iM.$type,HM.TRANSLATOR_TARGET_TEXT,e)}update(e){return super.set(void 0===e?void 0:{$type:iM.$type,glossaryId:e})}}class tB extends Rq{constructor(e){super(JM.TRANSLATOR_RTF_SUPPORT,dM.$type,HM.TRANSLATOR_TARGET_TEXT,e),this.supported=this.value.pipe(sk((e=>!!e)))}}let nB=class extends Rq{constructor(e){super(JM.TRANSLATOR_STYLE_VARIANTS,EM.$type,HM.TRANSLATOR_TARGET_TEXT,e),this.styleVariants=this.value.pipe(sk((e=>null==e?void 0:e.styleVariants.map((e=>e.value)))))}},rB=class extends Rq{constructor(e){super(JM.TRANSLATOR_STYLE_VARIANT,SM.$type,HM.TRANSLATOR_TARGET_TEXT,e),this.styleVariant=this.value.pipe(sk((e=>null==e?void 0:e.styleVariant)))}updateStyleVariant(e){return super.set({$type:SM.$type,styleVariant:e?{$type:qM.$type,value:e}:void 0})}};class oB extends Rq{constructor(e){super(JM.TRANSLATOR_TRANSLATION_MEMORY_LIST,IM.$type,HM.TRANSLATOR_TARGET_TEXT,e),this.translationMemories=this.value.pipe(sk((e=>{var t;return null!==(t=null==e?void 0:e.translationMemories)&&void 0!==t?t:[]})))}updateTranslationMemoryList(e){return super.set({$type:IM.$type,translationMemories:e})}}class iB extends Rq{constructor(e){super(JM.TRANSLATOR_SELECTED_TRANSLATION_MEMORY,AM.$type,HM.TRANSLATOR_TARGET_TEXT,e),this.selectedTranslationMemoryId=this.value.pipe(sk((e=>{var t,n;return null!==(n=null===(t=null==e?void 0:e.translationMemoryId)||void 0===t?void 0:t.value)&&void 0!==n?n:null}))),this.selectedTranslationMemoryThreshold=this.value.pipe(sk((e=>{var t;return null!==(t=null==e?void 0:e.threshold)&&void 0!==t?t:1})))}updateSelectedTranslationMemory(e,t=0){return super.set({$type:AM.$type,translationMemoryId:e?{$type:xU.$type,value:e}:void 0,threshold:t})}}let aB=class extends wW{constructor(){super(...arguments),this.requestedTargetLanguageProperty=new jq(this.document),this.calculatedTargetLanguageProperty=new Fq(this.document),this.targetLanguagesProperty=new $q(this.document),this.requestWordAlternativesAnnotations=new Nq(iD.$type,HM.TRANSLATOR_TARGET_TEXT,this.document),this.providedWordAlternativesAnnotations=new Nq(nD.$type,HM.TRANSLATOR_TARGET_TEXT,this.document),this.selectWordAlternativeAnnotations=new Nq(AU.$type,HM.TRANSLATOR_TARGET_TEXT,this.document),this.requestTextUnitAlternativesAnnotations=new Nq(oD.$type,HM.TRANSLATOR_TARGET_TEXT,this.document),this.providedTextUnitAlternativesAnnotations=new Nq(HU.$type,HM.TRANSLATOR_TARGET_TEXT,this.document),this.providedWordAlternativeHighlighAnnotations=new Nq(Zk.$type,HM.TRANSLATOR_TARGET_TEXT,this.document),this.selectTextUnitAlternativeAnnotations=new Nq(SU.$type,HM.TRANSLATOR_TARGET_TEXT,this.document),this.requestAutocompletionAnnotations=new Nq(jU.$type,HM.TRANSLATOR_TARGET_TEXT,this.document),this.providedAutocompletionAnnotations=new Nq(WU.$type,HM.TRANSLATOR_TARGET_TEXT,this.document),this.selectAutocompletionAnnotations=new Nq(qU.$type,HM.TRANSLATOR_TARGET_TEXT,this.document),this.providedAutomaticTextUnitAlternativesAnnotations=new Nq(JU.$type,HM.TRANSLATOR_TARGET_TEXT,this.document),this.selectAutomaticTextUnitAlternativeAnnotations=new Nq(yU.$type,HM.TRANSLATOR_TARGET_TEXT,this.document),this.targetTextUnitAnnotations=new Nq(LU.$type,HM.TRANSLATOR_TARGET_TEXT,this.document),this.glossaryReplacementAnnotations=new Nq(BU.$type,HM.TRANSLATOR_TARGET_TEXT,this.document),this.customRuleHighlightAnnotations=new Nq(TD.$type,HM.TRANSLATOR_TARGET_TEXT,this.document),this.textFormattingAnnotations=new Nq(OU.$type,HM.TRANSLATOR_TARGET_TEXT,this.document),this.clarifyHighlightAnnotations=new Nq(XU.$type,HM.TRANSLATOR_TARGET_TEXT,this.document),this.glossarySupport=new Hq(this.document),this.glossaryListProperty=new Jq(this.document),this.glossarySuggestions=new zq(this.document),this.formalityModes=new Yq(this.document),this.formalityMode=new Xq(this.document),this.languageModels=new Kq(this.document),this.languageModel=new Qq(this.document),this.translationMemoryListProperty=new oB(this.document),this.selectedTranslationMemoryProperty=new iB(this.document),this.textDirection=new Lq(HM.TRANSLATOR_TARGET_TEXT,this.document),this.glossaryId=new eB(this.document),this.maximumTextLengthProperty=new Cq(HM.TRANSLATOR_TARGET_TEXT,this.document),this.styleGuideSupport=new Bq(this.document),this.languageModelPreferences=new Zq(this.document),this.freeTextPromptList=new qq(this.document),this.styleGuideId=new Wq(this.document),this.rtfSupport=new tB(this.document),this.styleVariantsProperty=new nB(this.document),this.styleVariantProperty=new rB(this.document)}};class sB extends wW{constructor(){super(...arguments),this.targetTranscriptionTextUnitAnnotations=new Nq(LU.$type,HM.TRANSLATOR_TARGET_TRANSCRIPTION_TEXT,this.document)}}const lB=["429_too_many_requests","500_internal_error"];function cB([e,t]){var n;if(0===t.length)return"initial";const r=t.map((e=>{var t;return null===(t=e.operation.annotationId)||void 0===t?void 0:t.value})),o=e.filter((e=>{var t;return r.includes(null===(t=e.specificPayload.referenceId)||void 0===t?void 0:t.value)}));if(t.length!==o.length)return"busy";const i=o.filter((e=>e.specificPayload.status===MU.ERROR));if(i.length>0){const e=null===(n=i[0].specificPayload.errorInfo)||void 0===n?void 0:n.errorCode;return a=e,lB.includes(a)?e:"500_internal_error"}var a;return"success"}class uB extends CW{constructor(){super(...arguments),this.sourceTextField=new Vq(this,HM.TRANSLATOR_SOURCE_TEXT),this.targetTextField=new aB(this,HM.TRANSLATOR_TARGET_TEXT),this.targetTranscriptionTextField=new sB(this,HM.TRANSLATOR_TARGET_TRANSCRIPTION_TEXT),this.textUnitAnnotations=this.stateReadonly.pipe(sk((e=>{const t=UW(HM.TRANSLATOR_SOURCE_TEXT,e),n=UW(HM.TRANSLATOR_TARGET_TEXT,e),r=UW(HM.TRANSLATOR_TARGET_TRANSCRIPTION_TEXT,e),o=RW(t,LU.$type),i=RW(n,LU.$type),a=RW(r,LU.$type);return o.sort(((e,t)=>e.operation.range.start-t.operation.range.start)).map((e=>{var t,n,r,o;const s=e.operation.range,l=null!==(n=null===(t=i.find((t=>{var n,r;return(null===(n=e.specificPayload.textUnitId)||void 0===n?void 0:n.value)===(null===(r=t.specificPayload.textUnitId)||void 0===r?void 0:r.value)})))||void 0===t?void 0:t.operation.range)&&void 0!==n?n:aD.fromJSON({}),c=null!==(o=null===(r=a.find((t=>{var n,r;return(null===(n=e.specificPayload.textUnitId)||void 0===n?void 0:n.value)===(null===(r=t.specificPayload.textUnitId)||void 0===r?void 0:r.value)})))||void 0===r?void 0:r.operation.range)&&void 0!==o?o:aD.fromJSON({});return{sourceStart:s.start,sourceEnd:s.end,sourceLength:s.end-s.start,targetStart:l.start,targetEnd:l.end,targetLength:l.end-l.start,targetTranscriptionStart:c.start,targetTranscriptionEnd:c.end,targetTranscriptionLength:c.end-c.start}}))})),dk()),this.requestClarifyStatus=this.stateReadonly.pipe(sk((e=>{const t=UW(HM.TRANSLATOR_SOURCE_TEXT,e);return cB([RW(t,YU.$type),RW(t,zU.$type)])})),dk()),this.selectClarifyAnswerStatus=this.stateReadonly.pipe(sk((e=>{const t=UW(HM.TRANSLATOR_SOURCE_TEXT,e);return cB([RW(t,YU.$type),RW(t,QU.$type)])})),dk())}}class dB extends MW{constructor(e={preventSameLanguages:{enabled:!1}}){super("Translator",zM.TRANSLATOR,new uB),this.config=e,this.translationMemoryList=this.document.targetTextField.translationMemoryListProperty.translationMemories,this.selectedTranslationMemoryId=this.document.targetTextField.selectedTranslationMemoryProperty.selectedTranslationMemoryId,this.selectedTranslationMemoryThreshold=this.document.targetTextField.selectedTranslationMemoryProperty.selectedTranslationMemoryThreshold,this.targetLanguage=this.document.targetTextField.requestedTargetLanguageProperty.value.pipe(sk((e=>{var t;return null===(t=null==e?void 0:e.targetLanguage)||void 0===t?void 0:t.code})),dk()),this.formattedSourceText=this.document.stateReadonly.pipe(sk((e=>{const t=UW(HM.TRANSLATOR_SOURCE_TEXT,e);return HW({plainText:t.content,textFormattingAnnotations:RW(t,OU.$type)},!0)})),dk(),_k()),this.formattedTargetText=this.document.stateReadonly.pipe(sk((e=>{const t=UW(HM.TRANSLATOR_TARGET_TEXT,e);return HW({plainText:t.content,textFormattingAnnotations:RW(t,OU.$type)},!0)})),dk(),_k()),this.config.preventSameLanguages.enabled&&this.document.sourceTextField.calculatedSourceLanguageProperty.language.pipe(lk((e=>!!e))).subscribe((e=>{const t=this.document.targetTextField.requestedTargetLanguageProperty.getCurrent();t&&this.config.preventSameLanguages.enabled&&TW(e,t)&&this.updateRequestedTargetLanguage(this.config.preventSameLanguages.getAlternativeTargetLanguage(t))})),this.document.sourceTextField.maximumTextLengthProperty.max.pipe(uk(1)).subscribe((e=>{if(!this.document.sourceTextField.isPreConnectionStateInSync){this.document.sourceTextField.isPreConnectionStateInSync=!0;const t=this.document.sourceTextField.getCurrentContent(),n=this.document.sourceTextField.textFormattingAnnotations.getCurrentAnnotations(),r=t.slice(0,e),{textFormattingAnnotations:o}=YW({plainText:t,textFormattingAnnotations:n},e);this.publishChanges([[HM.TRANSLATOR_SOURCE_TEXT,[Fj(0,0,r)]],[HM.TRANSLATOR_SOURCE_TEXT,o.map((e=>e.operation))]])}})),this.document.targetTextField.maximumTextLengthProperty.max.pipe(uk(1)).subscribe((e=>{if(!this.document.targetTextField.isPreConnectionStateInSync){this.document.targetTextField.isPreConnectionStateInSync=!0;const t=this.document.targetTextField.getCurrentContent(),n=this.document.targetTextField.textFormattingAnnotations.getCurrentAnnotations(),r=t.slice(0,e),{textFormattingAnnotations:o}=YW({plainText:t,textFormattingAnnotations:n},e);this.publishChanges([[HM.TRANSLATOR_TARGET_TEXT,[Fj(0,0,r)]],[HM.TRANSLATOR_TARGET_TEXT,o.map((e=>e.operation))]])}}))}applyFieldEventBatch(e){this.document.applyItaEventBatch(e);for(const t of e)if(t.fieldName===HM.TRANSLATOR_TARGET_TEXT&&t.textChangeOperation){const e=[];e.push(...this.cancelTextUnitAlternativesFlows()),e.push(...this.cancelWordAlternativesFlows()),e.push(...this.cancelAutocompletionFlows()),this.publishChange(HM.TRANSLATOR_TARGET_TEXT,e)}}updateStyleGuideId(e){const t=this.document.targetTextField.styleGuideId.updateStyleGuideId(e);this.publishChange(HM.TRANSLATOR_TARGET_TEXT,t)}updateFreeTextPromptList(e){const t=this.document.targetTextField.freeTextPromptList.updateFreeTextPromptList(e);this.publishChange(HM.TRANSLATOR_TARGET_TEXT,t)}updateSourceText(e){var t;const n=this.document.sourceTextField,r=dB.toRemoveOperations(n.textFormattingAnnotations),o=n.getCurrentContent(),i=null===(t=n.maximumTextLengthProperty.getCurrentValue())||void 0===t?void 0:t.max;let a=[];void 0!==i&&n.isPreConnectionStateInSync?(a=mW(vW(o.slice(0,i),e.slice(0,i))),this.publishChanges([[n.name,r],[n.name,a]])):(n.isPreConnectionStateInSync=!1,a=mW(vW(o,e))),this.document.updateFieldState(HM.TRANSLATOR_SOURCE_TEXT,(t=>{const n=PW(t.annotations.set(OU.$type,[]),a);return Object.assign(Object.assign({},t),{annotations:n,content:e})}))}updateFormattedSourceText(e){this.updateFormattedText(this.document.sourceTextField,e)}updateTargetText(e){var t;const n=this.document.targetTextField,r=dB.toRemoveOperations(n.textFormattingAnnotations),o=n.getCurrentContent(),i=null===(t=n.maximumTextLengthProperty.getCurrentValue())||void 0===t?void 0:t.max;let a=[];void 0!==i&&n.isPreConnectionStateInSync?(a=mW(vW(o.slice(0,i),e.slice(0,i))),this.publishChanges([[n.name,this.cancelTextUnitAlternativesFlows()],[n.name,this.cancelWordAlternativesFlows()],[n.name,this.cancelAutocompletionFlows()],[n.name,r],[n.name,a]])):(n.isPreConnectionStateInSync=!1,a=mW(vW(o,e))),this.document.updateFieldState(HM.TRANSLATOR_TARGET_TEXT,(t=>{const n=PW(t.annotations.set(OU.$type,[]),a);return Object.assign(Object.assign({},t),{annotations:n,content:e})}))}updateFormattedTargetText(e){this.updateFormattedText(this.document.targetTextField,e)}updateRequestedTargetLanguage(e){var t;if(this.config.preventSameLanguages.enabled&&TW(e,null!==(t=this.document.sourceTextField.calculatedSourceLanguageProperty.getCurrent())&&void 0!==t?t:""))return;const n=this.document.targetTextField.requestedTargetLanguageProperty.updateLanguage(e);this.publishChange(HM.TRANSLATOR_TARGET_TEXT,n)}updateRequestedSourceLanguage(e){const t=this.document.sourceTextField.requestedSourceLanguageProperty.updateLanguage(e);this.publishChange(HM.TRANSLATOR_SOURCE_TEXT,t)}updateInterfaceLanguage(e){const t=this.document.sourceTextField.interfaceLanguageProperty.updateInterfaceLanguage(e);this.publishChange(HM.TRANSLATOR_SOURCE_TEXT,t)}switchLanguages(e){var t,n,r,o,i,a,s,l,c,u,d;const{sourceTextField:p,targetTextField:g}=this.document,h=null===(t=p.maximumTextLengthProperty.getCurrentValue())||void 0===t?void 0:t.max,f=null===(n=g.maximumTextLengthProperty.getCurrentValue())||void 0===n?void 0:n.max;if(void 0===h||void 0===f)return;const _=null!==(r=p.calculatedSourceLanguageProperty.getCurrent())&&void 0!==r?r:null===(i=null===(o=p.requestedSourceLanguageProperty.getCurrentValue())||void 0===o?void 0:o.sourceLanguage)||void 0===i?void 0:i.code,m=null!==(l=null===(s=null===(a=g.calculatedTargetLanguageProperty.getCurrentValue())||void 0===a?void 0:a.targetLanguage)||void 0===s?void 0:s.code)&&void 0!==l?l:null===(u=null===(c=g.requestedTargetLanguageProperty.getCurrentValue())||void 0===c?void 0:c.targetLanguage)||void 0===u?void 0:u.code,v=g.getCurrentContent(),T=p.getCurrentContent();if(!_||!m)return;const y=m.split("-")[0],E=null!==(d=e[_])&&void 0!==d?d:_,S=HW({plainText:null!=v?v:"",textFormattingAnnotations:g.textFormattingAnnotations.getCurrentAnnotations()},!0),I=dB.toRemoveOperations(g.textFormattingAnnotations),A=dB.toRemoveOperations(p.textFormattingAnnotations),b=vW(v,""),w=vW(T,""),O=vW(v.slice(0,f),""),N=vW(T.slice(0,h),""),R=dB.toRemoveOperations(g.targetTextUnitAnnotations),L=dB.toRemoveOperations(p.sourceTextUnitAnnotations);this.document.applyOperationBatch([[HM.TRANSLATOR_TARGET_TEXT,I],[HM.TRANSLATOR_SOURCE_TEXT,A],[HM.TRANSLATOR_TARGET_TEXT,R],[HM.TRANSLATOR_SOURCE_TEXT,L],[HM.TRANSLATOR_TARGET_TEXT,b],[HM.TRANSLATOR_SOURCE_TEXT,w]]),this.publishChanges([[HM.TRANSLATOR_TARGET_TEXT,I],[HM.TRANSLATOR_SOURCE_TEXT,A],[HM.TRANSLATOR_TARGET_TEXT,R],[HM.TRANSLATOR_SOURCE_TEXT,L],[HM.TRANSLATOR_TARGET_TEXT,O],[HM.TRANSLATOR_SOURCE_TEXT,N],[HM.TRANSLATOR_TARGET_TEXT,g.requestedTargetLanguageProperty.updateLanguage(E)],[HM.TRANSLATOR_SOURCE_TEXT,p.requestedSourceLanguageProperty.updateLanguage(y)]]),""!==S&&this.updateFormattedSourceText(S),p.calculatedSourceLanguageProperty.updateLanguage(y)}updateFormattedText(e,t){var n;const r=null===(n=e.maximumTextLengthProperty.getCurrentValue())||void 0===n?void 0:n.max,o=zW(t);void 0!==r&&e.isPreConnectionStateInSync?this.document.updateFieldState(e.name,(t=>{var n;const{textFormattingAnnotations:i}=YW(o,r),a=t.content,s=o.plainText,l=mW(vW(a.slice(0,r),s.slice(0,r))),c=PW(t.annotations,l),u={properties:t.properties,content:s,annotations:c},d=tq(null!==(n=c.get(OU.$type))&&void 0!==n?n:[],i),p=d.reduce(NW,u);return this.publishChanges([[e.name,[...l,...d]]]),p})):(e.isPreConnectionStateInSync=!1,this.document.updateFieldState(e.name,(e=>({content:o.plainText,properties:e.properties,annotations:e.annotations.set(OU.$type,o.textFormattingAnnotations)}))))}static toRemoveOperations(e){var t;return null!==(t=e.getCurrentAnnotations().map((e=>({$type:tG.$type,annotationId:e.operation.annotationId}))))&&void 0!==t?t:[]}cancelWordAlternativesFlows(){return this.document.targetTextField.requestWordAlternativesAnnotations.getCurrentAnnotations().flatMap((e=>this.document.targetTextField.requestWordAlternativesAnnotations.removeAnnotation(e.operation.annotationId)))}cancelTextUnitAlternativesFlows(){return this.document.targetTextField.requestTextUnitAlternativesAnnotations.getCurrentAnnotations().flatMap((e=>this.document.targetTextField.requestTextUnitAlternativesAnnotations.removeAnnotation(e.operation.annotationId)))}cancelAutocompletionFlows(){return this.document.targetTextField.requestAutocompletionAnnotations.getCurrentAnnotations().flatMap((e=>this.document.targetTextField.requestAutocompletionAnnotations.removeAnnotation(e.operation.annotationId)))}requestWordAlternatives(e){yW(Number.isInteger(e),`[requestWordAlternatives] non-integer offset: ${e}`);const t=this.document.targetTextField.getCurrentContent();yW(e>=0&&e<=t.length,`[requestWordAlternatives] out of range offset: ${e}`);const n=[];n.push(...this.cancelWordAlternativesFlows());const r=crypto.randomUUID(),o=this.document.targetTextField.requestWordAlternativesAnnotations.add(e,e,{$type:iD.$type,flowId:{$type:Qk.$type,value:r}})[0];return n.push(o),this.publishChange(HM.TRANSLATOR_TARGET_TEXT,n),r}requestTextUnitAlternatives(e){yW(Number.isInteger(e),`[requestTextUnitAlternatives] non-integer offset: ${e}`);const t=this.document.targetTextField.getCurrentContent();yW(e>=0&&e<=t.length,`[requestTextUnitAlternatives] out of range offset: ${e}`);const n=[];n.push(...this.cancelTextUnitAlternativesFlows());const r=crypto.randomUUID(),o=this.document.targetTextField.requestTextUnitAlternativesAnnotations.add(e,e,{$type:oD.$type,flowId:{$type:rD.$type,value:r}})[0];return n.push(o),this.publishChange(HM.TRANSLATOR_TARGET_TEXT,n),r}requestAutocompletion(e){yW(Number.isInteger(e),`[requestAutocompletion] non-integer offset: ${e}`);const t=this.document.targetTextField.getCurrentContent();yW(e>=0&&e<=t.length,`[requestAutocompletion] out of range offset: ${e}`);const n=[];n.push(...this.cancelAutocompletionFlows());const r=crypto.randomUUID(),o=this.document.targetTextField.requestAutocompletionAnnotations.add(e,e,{$type:jU.$type,flowId:{$type:CU.$type,value:r}})[0];return n.push(o),this.publishChange(HM.TRANSLATOR_TARGET_TEXT,n),r}cancelClarifyFlows(){return this.document.sourceTextField.requestClarifyAnnotations.getCurrentAnnotations().flatMap((e=>this.document.sourceTextField.requestClarifyAnnotations.removeAnnotation(e.operation.annotationId)))}requestClarify(){const e=[];e.push(...this.cancelClarifyFlows());const t=this.document.sourceTextField.getCurrentContent().length,n=crypto.randomUUID(),r=this.document.sourceTextField.requestClarifyAnnotations.add(0,t,{$type:zU.$type,flowId:{$type:FM.$type,value:n}})[0];return e.push(r),this.publishChange(HM.TRANSLATOR_SOURCE_TEXT,e),n}resetClarify(){const e=[];e.push(...this.cancelClarifyFlows()),this.publishChange(HM.TRANSLATOR_SOURCE_TEXT,e)}selectClarifyAnswer(e,t){var n,r,o,i,a,s;const l=[],c=this.document.sourceTextField.clarifyQuestionAnnotations.getCurrentAnnotations().find((t=>{var n,r,o;return(null===(o=null===(r=null===(n=t.specificPayload.questionWithAnswers)||void 0===n?void 0:n.question)||void 0===r?void 0:r.id)||void 0===o?void 0:o.value)===e}));if(!c)throw new Error(`Unknown question id "${e}" found!`);const u=null!==(r=null===(n=c.operation.range)||void 0===n?void 0:n.start)&&void 0!==r?r:0,d=null!==(i=null===(o=c.operation.range)||void 0===o?void 0:o.end)&&void 0!==i?i:0,p=this.document.sourceTextField.selectClarifyAnswerAnnotations.add(u,d,{$type:QU.$type,flowId:c.specificPayload.flowId,questionId:null===(s=null===(a=c.specificPayload.questionWithAnswers)||void 0===a?void 0:a.question)||void 0===s?void 0:s.id,answer:{$type:"deepl.pb.interactive_text_api.translator.ClarifySelectedAnswer",answer:t}})[0];l.push(p),this.publishChange(HM.TRANSLATOR_SOURCE_TEXT,l)}selectWordAlternative(e,t,n){const r=[];r.push(...this.cancelTextUnitAlternativesFlows()),r.push(...this.cancelAutocompletionFlows());const o=this.document.targetTextField.selectWordAlternativeAnnotations.add(e,e,{$type:AU.$type,flowId:{$type:Qk.$type,value:t},selection:n});r.push(...o),this.publishChange(HM.TRANSLATOR_TARGET_TEXT,r)}selectTextUnitAlternative(e,t,n){const r=[];r.push(...this.cancelWordAlternativesFlows()),r.push(...this.cancelAutocompletionFlows());const o=this.document.targetTextField.selectTextUnitAlternativeAnnotations.add(e,e,{$type:SU.$type,flowId:{$type:rD.$type,value:t},selection:n});r.push(...o),this.publishChange(HM.TRANSLATOR_TARGET_TEXT,r)}selectAutocompletion(e,t,n){const r=[];r.push(...this.cancelWordAlternativesFlows()),r.push(...this.cancelTextUnitAlternativesFlows());const o=this.document.targetTextField.selectAutocompletionAnnotations.add(e,e,{$type:qU.$type,flowId:{$type:CU.$type,value:t},selection:n});r.push(...o),this.publishChange(HM.TRANSLATOR_TARGET_TEXT,r)}selectAutomaticTextUnitAlternative(e,t){const n=[],r=this.document.targetTextField.selectAutomaticTextUnitAlternativeAnnotations.add(e,e,{$type:yU.$type,selection:t});n.push(...r),this.publishChange(HM.TRANSLATOR_TARGET_TEXT,n)}updateGlossaryList(e){const t=this.document.targetTextField.glossaryListProperty.updateGlossaryList(e);this.publishChange(HM.TRANSLATOR_TARGET_TEXT,t)}updateSourceLanguageDetectionWeights(e){const t=this.document.sourceTextField.sourceLanguageDetectionWeightsProperty.updateSourceLanguageDetectionWeights(e);this.publishChange(HM.TRANSLATOR_SOURCE_TEXT,t)}updateFormalityMode(e){const t=this.document.targetTextField.formalityMode.update(e);this.publishChange(HM.TRANSLATOR_TARGET_TEXT,t)}updateLanguageModel(e){const t=this.document.targetTextField.languageModel.update(e);this.publishChange(HM.TRANSLATOR_TARGET_TEXT,t)}updateLanguageModelPreferences(e){const t=this.document.targetTextField.languageModelPreferences.update(e);this.publishChange(HM.TRANSLATOR_TARGET_TEXT,t)}updateGlossaryId(e){const t=this.document.targetTextField.glossaryId.update(e);this.publishChange(HM.TRANSLATOR_TARGET_TEXT,t)}updateStyleVariant(e){const t=this.document.targetTextField.styleVariantProperty.updateStyleVariant(e);this.publishChange(HM.TRANSLATOR_TARGET_TEXT,t)}updateSelectedTranslationMemory(e,t=1){const n=this.document.targetTextField.selectedTranslationMemoryProperty.updateSelectedTranslationMemory(e,t);this.publishChange(HM.TRANSLATOR_TARGET_TEXT,n)}}const pB=e=>{OP(e),IP(e)};function gB(e,t){e&&(t?e.updateGlossaryId({$type:dD.$type,id:t}):e.updateGlossaryId())}function hB(){return r(this,void 0,void 0,(function*(){const e=yield nI(["activeTermbaseId","isGlossaryEnabled","hasTermbaseService",mo.auth.isLoggedIn]);let t;if(e.isGlossaryEnabled&&uT(e)&&e.activeTermbaseId){const[n]=yield mR();t=n.find((t=>t.id===e.activeTermbaseId))}return{glossaryId:null==t?void 0:t.id,isAutoTermbase:null==t?void 0:t.isAutoTermbase,isShared:null==t?void 0:t.shared}}))}const fB={};function _B(e){return r(this,arguments,void 0,(function*({sourceText:e,targetLanguage:t,port:n,itaDocumentState:o,domainName:i,translationTrigger:a=""}){var s,l;oI(),delete fB[n.name];const c=yield uA.getAccessToken(),u=yield AI(),d=cT(u,Yn.TRANSLATOR)?"https://ita-pro.www.deepl.com/v1":"https://ita-free.www.deepl.com/v1",p=new Oq(new URL(d),c,{useHttpPostForStartSession:!0}),g=new dB,h=p.createSession(g);let f;try{f=yield wo()}catch(e){console.error(e)}try{yield h.connect(o,f),TS({itaSessionType:Kr,itaSessionEventType:o?eo:Zr})}catch(r){const o=fP(r.message);return gT(r,qv),o?n.postMessage({type:YA,payload:{error:o}}):n.postMessage({type:JA,payload:{error:r}}),ZS({action:JA,error:r.message}),Jy({errorCode:r.name,errorMessage:r.message,domainName:i,targetLang:t,trigger:a,characterCount:null==e?void 0:e.length}),void TS({itaSessionType:Kr,itaSessionEventType:to,itaErrorType:ro,itaErrorMessage:r.message})}EP(n.name,{session:h,updateAccessToken:e=>{p.updateAccessToken(e)},domainName:i,translationTrigger:a}),nT()&&console.log("ITA Translate session ID:",null===(l=null===(s=h.startSessionResponse)||void 0===s?void 0:s.sessionId)||void 0===l?void 0:l.value);const _=h.client,m=yield hB();let v;gB(_,null==m?void 0:m.glossaryId),EP(n.name,{glossaryProperties:m});try{v=yield NI()}catch(e){console.error(e)}return t&&_.updateRequestedTargetLanguage(Kv({lang:t,languageList:v})),e&&_.updateSourceText((e=>e.replaceAll("\r",""))(e)),function(e,t){const n=e.client,o=[];e.connection.onclose((()=>{for(const e of o)e.unsubscribe()})),o.push(e.error.subscribe((e=>{!function(e,t){var n,r,o,i,a,s,l;if(fB[t.name]=e,e instanceof hq){nT()&&console.error(`ITA session error, Type ${typeof e},\n        Code: ${null===(n=e.info)||void 0===n?void 0:n.statusCode}; Detail Code: ${null===(o=null===(r=e.info)||void 0===r?void 0:r.detailCode)||void 0===o?void 0:o.value}; Fallback Codes: ${null===(i=e.info)||void 0===i?void 0:i.fallbackDetailCodes.map((e=>e.value)).join(", ")}`);const c=SP(t.name),u=null===(s=null===(a=null==e?void 0:e.info)||void 0===a?void 0:a.detailCode)||void 0===s?void 0:s.value;gP(u)&&(Jy({errorCode:e.name,errorMessage:u||e.message,domainName:c.domainName,targetLang:c.targetLanguage,websiteLanguage:c.translateSourceLanguage,trigger:c.translationTrigger,characterCount:null===(l=c.sourceText)||void 0===l?void 0:l.length}),t.postMessage({type:UA,payload:{error:hP(u)}}),gT(e,qv)),TS({itaSessionType:Kr,itaSessionEventType:to,itaErrorType:oo,itaErrorMessage:u||e.message}),ZS({action:to,error:u||e.message})}}(e,t)}))),o.push(e.messages.subscribe((e=>r(this,void 0,void 0,(function*(){return yield SB(e,t)}))))),o.push(n.document.targetTextField.content.subscribe((e=>{EB(n,t),t.postMessage({type:xA,payload:{targetText:e}}),EP(t.name,{targetText:e})}))),o.push(n.document.sourceTextField.content.subscribe((e=>{EP(t.name,{sourceText:e})}))),o.push(n.document.targetTextField.requestedTargetLanguageProperty.value.subscribe((e=>{var r,o,i;EB(n,t),EP(t.name,{targetLanguage:null===(r=null==e?void 0:e.targetLanguage)||void 0===r?void 0:r.code}),(null===(o=null==e?void 0:e.targetLanguage)||void 0===o?void 0:o.code)&&t.postMessage({type:KA.REPLY.ITA_TARGET_LANGUAGE,payload:{language:null===(i=null==e?void 0:e.targetLanguage)||void 0===i?void 0:i.code}})}))),o.push(n.document.sourceTextField.calculatedSourceLanguageProperty.language.subscribe((e=>{EB(n,t),EP(t.name,{translateSourceLanguage:e}),t.postMessage({type:PA,payload:{language:e}})}))),o.push(n.document.sourceTextField.calculatedSourceLanguageProperty.isAutoDetected.subscribe((e=>{EB(n,t),EP(t.name,{isTranslateSourceLanguageAutoDetected:e}),t.postMessage({type:CA,payload:{isAutoDetected:e}})}))),o.push(n.document.sourceTextField.unsupportedLanguageProperty.unsupported.subscribe((e=>{EB(n,t),EP(t.name,{isTranslateSourceLanguageUnsupported:e}),t.postMessage({type:BA,payload:{isUnsupported:e}})}))),o.push(n.document.targetTextField.providedAutomaticTextUnitAlternativesAnnotations.annotations.subscribe((e=>{const n=e.flatMap((e=>e.specificPayload.alternatives.map((t=>{var n,r;return{text:t.text,flowId:"",index:null!==(r=null===(n=e.operation.range)||void 0===n?void 0:n.start)&&void 0!==r?r:0}}))));t.postMessage({type:KA.REPLY.ITA_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS,payload:{providedAlternatives:n}})}))),o.push(n.document.targetTextField.glossaryReplacementAnnotations.annotations.subscribe((e=>{EP(t.name,{glossaryAnnotationsApplied:e.length>0})})))}(h,n),h}))}function mB(e){return r(this,void 0,void 0,(function*(){var t,n,o,i,a;if(e.name in fB){const n=fB[e.name];nT()&&console.error("Detected error for ITA translator session so will attempt to restore",n);const o=Object.assign({},SP(e.name));delete fB[e.name];try{const n=yield function(e,t){return r(this,void 0,void 0,(function*(){var n,r,o,i;return nT()&&console.log(`Attempting to recreate an ITA Translate session for port ${t.name}`),yield null===(n=e.session)||void 0===n?void 0:n.connection.stop(),_B(Object.assign(Object.assign({},e),{itaDocumentState:null===(r=e.session)||void 0===r?void 0:r.client.document.serialize(),port:t,sourceText:void 0,domainName:null!==(o=e.domainName)&&void 0!==o?o:"",translationTrigger:null!==(i=e.translationTrigger)&&void 0!==i?i:D}))}))}(o,e);return null!==(t=null==n?void 0:n.client)&&void 0!==t?t:null}catch(e){return console.error(`Unable to recreate ITA session, Error: ${e}`),null}}const s=yield uA.getAccessToken();return null===(o=(n=SP(e.name)).updateAccessToken)||void 0===o||o.call(n,s),null!==(a=null===(i=SP(e.name).session)||void 0===i?void 0:i.client)&&void 0!==a?a:null}))}function vB(e){return r(this,arguments,void 0,(function*({port:e,language:t}){const n=yield mB(e);if(!n)return;let r;try{r=yield NI()}catch(e){console.error(e)}n.updateRequestedTargetLanguage(Kv({lang:t,languageList:r})),EP(e.name,{targetLanguage:t}),TS({itaSessionType:Kr,itaSessionEventType:no,itaUserInteractionType:io})}))}function TB(e){return r(this,arguments,void 0,(function*({port:e,language:t}){const n=yield mB(e);if(!n)return;let r;try{r=yield NI()}catch(e){console.error(e)}n.updateRequestedSourceLanguage(Kv({lang:t,direction:"source",languageList:r})),EP(e.name,{sourceLanguage:t}),TS({itaSessionType:Kr,itaSessionEventType:no,itaUserInteractionType:ao})}))}function yB(e,t){return r(this,void 0,void 0,(function*(){const n=yield mB(e);if(!n)return;const r={value:t,$type:wM.$type};n.updateFormalityMode(r),TS({itaSessionType:Kr,itaSessionEventType:no,itaUserInteractionType:so})}))}function EB(e,t){t.postMessage({type:MA,payload:{itaDocumentState:e.document.serialize()}})}const SB=(e,t)=>r(void 0,void 0,void 0,(function*(){var n,r;nT()&&console.log("ITA_TRANSLATE_MESSAGE",e),"metaInfoMessage"in e&&100===(null===(r=null===(n=e.metaInfoMessage)||void 0===n?void 0:n.translatorTaskMetaInfo)||void 0===r?void 0:r.progressInPercent)&&(SP(t.name).isTranslateSourceLanguageUnsupported||AB(t),t.postMessage({type:KA.REPLY.ITA_BACKEND_IDLE}))}));function IB(e){return r(this,void 0,void 0,(function*(){const t=SP(e.name).session;yield null==t?void 0:t.connection.stop(),delete fB[e.name],IP(e),nT()&&console.log(`Disposed translate session for port ${e.name}`)}))}const AB=e=>r(void 0,void 0,void 0,(function*(){var t,n,r,o;const i=SP(e.name);i.translateSourceLanguage&&(yield Promise.allSettled([By({installationId:(yield nI(["installationId"])).installationId,trigger:i.translationTrigger,websiteLanguage:i.translateSourceLanguage,targetLanguage:i.targetLanguage,characterCount:null===(t=i.sourceText)||void 0===t?void 0:t.length,domainName:i.domainName,isIta:!0,glossaryTrackingInfo:{isGlossaryEnabled:!!(null===(n=i.glossaryProperties)||void 0===n?void 0:n.glossaryId),isGlossaryShared:!!(null===(r=i.glossaryProperties)||void 0===r?void 0:r.isShared),isAutoTermbase:!!(null===(o=i.glossaryProperties)||void 0===o?void 0:o.isAutoTermbase),didGlossaryChangeTranslation:i.glossaryAnnotationsApplied},isInputReviewUiUsed:i.translationTrigger===P}),QR()]))}));function bB(e,t){var n;const r=null===(n=SP(e.name).session)||void 0===n?void 0:n.client;null==r||r.selectAutomaticTextUnitAlternative(t.index,t.text)}const wB=e=>!!e;class OB extends Rq{constructor(e,t){super(JM.WRITE_MAXIMUM_TEXT_LENGTH,GD.$type,e,t),this.max=this.value.pipe(lk(wB),sk((e=>e.max)))}}class NB extends Rq{constructor(e,t){super(JM.WRITE_UNSUPPORTED_LANGUAGE,FD.$type,e,t),this.unsupported=this.value.pipe(sk((e=>!!e)))}}class RB extends Rq{constructor(e){super(JM.WRITE_LANGUAGES,LD.$type,HM.WRITE_SOURCE_TEXT,e),this.languageCodes=this.value.pipe(sk((e=>{var t;return null!==(t=null==e?void 0:e.languages.map((e=>e.code)))&&void 0!==t?t:[]})))}}class LB extends Rq{constructor(e){super(JM.WRITE_GLOSSARY_LANGUAGES,PD.$type,HM.WRITE_SOURCE_TEXT,e),this.languageCodes=this.value.pipe(sk((e=>{var t;return null!==(t=null==e?void 0:e.languages.map((e=>e.code)))&&void 0!==t?t:[]})))}}class PB extends Rq{constructor(e){super(JM.WRITE_CALCULATED_LANGUAGE,xD.$type,HM.WRITE_SOURCE_TEXT,e),this.language=this.value.pipe(sk((e=>{var t;return null===(t=null==e?void 0:e.language)||void 0===t?void 0:t.code}))),this.isAutoDetected=this.value.pipe(sk((e=>(null==e?void 0:e.origin)===pD.LANGUAGE_DETECTION)))}updateLanguage(e){return super.set({$type:xD.$type,language:{$type:KD.$type,code:e},origin:pD.REQUESTED_LANGUAGE,isLanguageDetectionConfident:!1})}}class CB extends Rq{constructor(e){super(JM.WRITE_TEMPLATE_ADAPTATION_TEMPLATES,sU.$type,HM.WRITE_SOURCE_TEXT,e),this.templates=this.value.pipe(sk((e=>{var t;return null!==(t=null==e?void 0:e.templateIds.map((e=>e.value)))&&void 0!==t?t:[]})))}}class xB extends Rq{constructor(e){super(JM.WRITE_INLINE_SUGGESTIONS_LOADING,jD.$type,HM.WRITE_SOURCE_TEXT,e),this.loading=this.value.pipe(sk((e=>!!e)))}}class kB extends wW{constructor(){super(...arguments),this.sourceTextUnitAnnotations=new Nq(LU.$type,HM.WRITE_SOURCE_TEXT,this.document),this.diffUnitAnnotations=new Nq(OD.$type,HM.WRITE_SOURCE_TEXT,this.document),this.customRuleHighlightAnnotations=new Nq(TD.$type,HM.WRITE_SOURCE_TEXT,this.document),this.languages=new RB(this.document),this.glossaryLanguages=new LB(this.document),this.calculatedLanguage=new PB(this.document),this.maximumTextLengthProperty=new OB(HM.WRITE_SOURCE_TEXT,this.document),this.unsupportedLanguageProperty=new NB(HM.WRITE_SOURCE_TEXT,this.document),this.templatesProperty=new CB(this.document),this.inlineSuggestionsLoadingProperty=new xB(this.document),this.requestTemplateAdaptationAnnotations=new Nq(cU.$type,HM.WRITE_SOURCE_TEXT,this.document),this.providedTemplateAdaptationAnnotations=new Nq(dU.$type,HM.WRITE_SOURCE_TEXT,this.document),this.inlineSuggestionAnnotations=new Nq(gU.$type,HM.WRITE_SOURCE_TEXT,this.document),this.inlineSuggestionSpanAnnotations=new Nq(hU.$type,HM.WRITE_SOURCE_TEXT,this.document),this.actOnInlineSuggestionAnnotations=new Nq(fU.$type,HM.WRITE_SOURCE_TEXT,this.document),this.inlineSuggestionsTextUnitStateAnnotations=new Nq(_U.$type,HM.WRITE_SOURCE_TEXT,this.document),this.requestInlineSuggestionImprovedTextAnnotations=new Nq(mU.$type,HM.WRITE_SOURCE_TEXT,this.document),this.providedInlineSuggestionImprovedTextAnnotations=new Nq(vU.$type,HM.WRITE_SOURCE_TEXT,this.document)}}class DB extends Rq{constructor(e){super(JM.WRITE_REQUESTED_LANGUAGE,CD.$type,HM.WRITE_TARGET_TEXT,e)}updateLanguage(e){if("autodetect"===e){return super.set(void 0)}return super.set({$type:CD.$type,language:{$type:KD.$type,code:e}})}}class UB extends Rq{constructor(e){super(JM.WRITE_STYLE_VARIANTS,VD.$type,HM.WRITE_TARGET_TEXT,e),this.styleVariants=this.value.pipe(sk((e=>null==e?void 0:e.styleVariants.map((e=>e.value)))))}}class MB extends Rq{constructor(e){super(JM.WRITE_STYLE_VARIANT,$D.$type,HM.WRITE_TARGET_TEXT,e),this.styleVariant=this.value.pipe(sk((e=>null==e?void 0:e.styleVariant)))}updateStyleVariant(e){return super.set({$type:$D.$type,styleVariant:e?{$type:eU.$type,value:e}:void 0})}}class GB extends Rq{constructor(e){super(JM.WRITE_STYLE_GUIDE_ID,DD.$type,HM.WRITE_TARGET_TEXT,e),this.styleGuideId=this.value.pipe(sk((e=>null==e?void 0:e.styleGuideId)))}updateStyleGuideId(e){return super.set({$type:DD.$type,styleGuideId:e?{$type:ED.$type,id:e}:void 0})}}class VB extends Rq{constructor(e){super(JM.WRITE_FREE_TEXT_PROMPT_LIST,MD.$type,HM.WRITE_TARGET_TEXT,e),this.freeTextPromptList=this.value.pipe(sk((e=>null==e?void 0:e.freeTextPromptList)))}updateFreeTextPromptList(e){return super.set({$type:MD.$type,freeTextPromptList:e?{$type:uD.$type,prompts:e}:void 0})}}class $B extends Rq{constructor(e){super(JM.WRITE_GLOSSARY_SUPPORT,HD.$type,HM.WRITE_TARGET_TEXT,e),this.supported=this.value.pipe(sk((e=>!!e)))}}class FB extends Rq{constructor(e){super(JM.WRITE_STYLE_GUIDE_SUPPORT,JD.$type,HM.WRITE_TARGET_TEXT,e),this.supported=this.value.pipe(sk((e=>!!e)))}}class jB extends Rq{constructor(e){super(JM.WRITE_CORRECTIONS_ONLY_SUPPORT,zD.$type,HM.WRITE_TARGET_TEXT,e),this.supported=this.value.pipe(sk((e=>!!e)))}}class WB extends Rq{constructor(e){super(JM.WRITE_CORRECTIONS_ONLY,UD.$type,HM.WRITE_TARGET_TEXT,e),this.enabled=this.value.pipe(sk((e=>{var t;return null!==(t=null==e?void 0:e.correctionsOnly)&&void 0!==t&&t})))}updateCorrectionsOnly(e){return super.set({$type:UD.$type,correctionsOnly:e})}}class qB extends Rq{constructor(e){super(JM.WRITE_GLOSSARY_LIST,BD.$type,HM.WRITE_TARGET_TEXT,e),this.entries=this.value.pipe(sk((e=>{var t;return null!==(t=null==e?void 0:e.glossaryEntries)&&void 0!==t?t:[]})))}updateNeverEditList(e){return super.set(void 0===e?void 0:{$type:BD.$type,glossaryEntries:e})}}class BB extends Rq{constructor(e){super(JM.WRITE_GLOSSARY_ID,kD.$type,HM.WRITE_TARGET_TEXT,e),this.glossaryId=this.value.pipe(sk((e=>null==e?void 0:e.glossaryId)))}update(e){return super.set(void 0===e?void 0:{$type:kD.$type,glossaryId:e})}}class HB extends Rq{constructor(e){super(JM.WRITE_TEXT_UNIT_ALTERNATIVES_SUPPORT,YD.$type,HM.WRITE_TARGET_TEXT,e),this.supported=this.value.pipe(sk((e=>!!e)))}}class JB extends wW{constructor(){super(...arguments),this.requestedLanguage=new DB(this.document),this.targetTextUnitAnnotations=new Nq(LU.$type,HM.WRITE_TARGET_TEXT,this.document),this.diffUnitAnnotations=new Nq(OD.$type,HM.WRITE_TARGET_TEXT,this.document),this.customRuleHighlightAnnotations=new Nq(TD.$type,HM.WRITE_TARGET_TEXT,this.document),this.styleVariantsProperty=new UB(this.document),this.styleVariantProperty=new MB(this.document),this.maximumTextLengthProperty=new OB(HM.WRITE_TARGET_TEXT,this.document),this.neverEditSupport=new $B(this.document),this.styleGuideSupport=new FB(this.document),this.neverEditListProperty=new qB(this.document),this.glossaryId=new BB(this.document),this.styleGuideId=new GB(this.document),this.correctionsOnlySupport=new jB(this.document),this.correctionsOnly=new WB(this.document),this.textUnitAlternativesSupport=new HB(this.document),this.requestWordAlternativesAnnotations=new Nq(iD.$type,HM.WRITE_TARGET_TEXT,this.document),this.providedWordAlternativesAnnotations=new Nq(nD.$type,HM.WRITE_TARGET_TEXT,this.document),this.freeTextPromptList=new VB(this.document),this.selectWordAlternativeAnnotations=new Nq(AU.$type,HM.WRITE_TARGET_TEXT,this.document),this.requestTextUnitAlternativesAnnotations=new Nq(oD.$type,HM.WRITE_TARGET_TEXT,this.document),this.providedWordAlternativeHighlighAnnotations=new Nq(Zk.$type,HM.WRITE_TARGET_TEXT,this.document),this.providedTextUnitAlternativesAnnotations=new Nq(ND.$type,HM.WRITE_TARGET_TEXT,this.document),this.selectTextUnitAlternativeAnnotations=new Nq(SU.$type,HM.WRITE_TARGET_TEXT,this.document),this.providedAutomaticTextUnitAlternativesAnnotations=new Nq(RD.$type,HM.WRITE_TARGET_TEXT,this.document),this.selectAutomaticTextUnitAlternativeAnnotations=new Nq(yU.$type,HM.WRITE_TARGET_TEXT,this.document),this.requestChangeStyleAlternativesAnnotations=new Nq(nU.$type,HM.WRITE_TARGET_TEXT,this.document),this.providedChangeStyleAlternativesAnnotations=new Nq(oU.$type,HM.WRITE_TARGET_TEXT,this.document),this.selectChangeStyleAlternativeAnnotations=new Nq(iU.$type,HM.WRITE_TARGET_TEXT,this.document)}}class zB extends CW{constructor(){super(...arguments),this.sourceTextField=new kB(this,HM.WRITE_SOURCE_TEXT),this.targetTextField=new JB(this,HM.WRITE_TARGET_TEXT),this.textUnitAnnotations=this.stateReadonly.pipe(sk((e=>{const t=UW(HM.WRITE_SOURCE_TEXT,e),n=UW(HM.WRITE_TARGET_TEXT,e),r=RW(t,LU.$type),o=RW(n,LU.$type);return r.sort(((e,t)=>e.operation.range.start-t.operation.range.start)).map((e=>{var t,n;const r=e.operation.range,i=null!==(n=null===(t=o.find((t=>{var n,r;return(null===(n=e.specificPayload.textUnitId)||void 0===n?void 0:n.value)===(null===(r=t.specificPayload.textUnitId)||void 0===r?void 0:r.value)})))||void 0===t?void 0:t.operation.range)&&void 0!==n?n:aD.fromJSON({});return{sourceStart:r.start,sourceEnd:r.end,sourceLength:r.end-r.start,targetStart:i.start,targetEnd:i.end,targetLength:i.end-i.start}}))})))}}class YB extends MW{constructor(){super("Write",zM.WRITE,new zB),this.inlineSuggestions={suggestions:this.document.stateReadonly.pipe(sk((e=>{const t=UW(HM.WRITE_SOURCE_TEXT,e),n=RW(t,gU.$type).map((e=>e.specificPayload)),r=RW(t,hU.$type),o=RW(t,vU.$type),i=[],a={};for(const{id:e,categories:t,description:r,userChoice:o}of n){const n={id:e,spans:[],categories:t,description:r,userChoice:o,improvedText:null};a[n.id.value]=n,i.push(n)}for(const e of r){const{id:t}=e.specificPayload,n=a[t.value];n&&n.spans.push(e.operation.range)}for(const e of o){const{inlineSuggestionId:t,improvedText:n}=e.specificPayload,r=a[t.value];r&&(r.improvedText=n)}return i}))),suggestionsLoading:this.document.sourceTextField.inlineSuggestionsLoadingProperty.loading,correctSuggestion:e=>{const t=[this.document.sourceTextField.actOnInlineSuggestionAnnotations.add(0,0,{$type:fU.$type,inlineSuggestionId:e,userChoice:AD.CORRECT})[0]];this.publishChange(HM.WRITE_SOURCE_TEXT,t)},rejectSuggestion:e=>{const t=[this.document.sourceTextField.actOnInlineSuggestionAnnotations.add(0,0,{$type:fU.$type,inlineSuggestionId:e,userChoice:AD.RETAIN})[0]];this.publishChange(HM.WRITE_SOURCE_TEXT,t)},undoSuggestionChoice:e=>{const t=[this.document.sourceTextField.actOnInlineSuggestionAnnotations.add(0,0,{$type:fU.$type,inlineSuggestionId:e,userChoice:AD.PENDING})[0]];this.publishChange(HM.WRITE_SOURCE_TEXT,t)},requestSuggestionPreview:e=>{const t=[this.document.sourceTextField.requestInlineSuggestionImprovedTextAnnotations.add(0,0,{$type:mU.$type,inlineSuggestionId:e})[0]];this.publishChange(HM.WRITE_SOURCE_TEXT,t)}},this.document.sourceTextField.maximumTextLengthProperty.max.pipe(uk(1)).subscribe((e=>{if(!this.document.sourceTextField.isPreConnectionStateInSync){this.document.sourceTextField.isPreConnectionStateInSync=!0;const t=this.document.sourceTextField.getCurrentContent().slice(0,e);this.publishChange(HM.WRITE_SOURCE_TEXT,[Fj(0,0,t)])}}))}applyFieldEventBatch(e){this.document.applyItaEventBatch(e);for(const t of e)if(t.fieldName===HM.WRITE_TARGET_TEXT&&t.textChangeOperation){const e=[];e.push(...this.cancelTextUnitAlternativesFlows()),e.push(...this.cancelWordAlternativesFlows()),this.publishChange(HM.WRITE_TARGET_TEXT,e)}}updateStyleGuideId(e){const t=this.document.targetTextField.styleGuideId.updateStyleGuideId(e);this.publishChange(HM.WRITE_TARGET_TEXT,t)}updateCorrectionsOnly(e){const t=this.document.targetTextField.correctionsOnly.updateCorrectionsOnly(e);this.publishChange(HM.WRITE_TARGET_TEXT,t)}updateFreeTextPromptList(e){const t=this.document.targetTextField.freeTextPromptList.updateFreeTextPromptList(e);this.publishChange(HM.WRITE_TARGET_TEXT,t)}updateSourceText(e){var t;const n=this.document.sourceTextField,r=n.getCurrentContent(),o=null===(t=n.maximumTextLengthProperty.getCurrentValue())||void 0===t?void 0:t.max;let i=[];void 0!==o&&n.isPreConnectionStateInSync?(i=mW(vW(r.slice(0,o),e.slice(0,o))),this.publishChanges([[n.name,i]])):(n.isPreConnectionStateInSync=!1,i=mW(vW(r,e))),this.document.updateFieldState(HM.WRITE_SOURCE_TEXT,(t=>{const n=PW(t.annotations,i);return Object.assign(Object.assign({},t),{annotations:n,content:e})}))}updateTargetText(e){const t=[];t.push(...this.cancelTextUnitAlternativesFlows()),t.push(...this.cancelWordAlternativesFlows()),t.push(...this.document.targetTextField.update(e)),this.publishChange(HM.WRITE_TARGET_TEXT,t)}updateRequestedLanguage(e){const t=this.document.targetTextField.requestedLanguage.updateLanguage(e);this.publishChange(HM.WRITE_TARGET_TEXT,t)}updateStyleVariant(e){const t=this.document.targetTextField.styleVariantProperty.updateStyleVariant(e);this.publishChange(HM.WRITE_TARGET_TEXT,t)}updateNeverEditList(e){const t=this.document.targetTextField.neverEditListProperty.updateNeverEditList(e);this.publishChange(HM.WRITE_TARGET_TEXT,t)}cancelWordAlternativesFlows(){return this.document.targetTextField.requestWordAlternativesAnnotations.getCurrentAnnotations().flatMap((e=>this.document.targetTextField.requestWordAlternativesAnnotations.removeAnnotation(e.operation.annotationId)))}updateNeverEditGlossaryId(e){const t=this.document.targetTextField.glossaryId.update(e);this.publishChange(HM.WRITE_TARGET_TEXT,t)}cancelTextUnitAlternativesFlows(){return this.document.targetTextField.requestTextUnitAlternativesAnnotations.getCurrentAnnotations().flatMap((e=>this.document.targetTextField.requestTextUnitAlternativesAnnotations.removeAnnotation(e.operation.annotationId)))}cancelChangeStyleAlternativesFlows(){return this.document.targetTextField.requestChangeStyleAlternativesAnnotations.getCurrentAnnotations().flatMap((e=>this.document.targetTextField.requestChangeStyleAlternativesAnnotations.removeAnnotation(e.operation.annotationId)))}cancelTemplateAdaptationFlows(){return this.document.sourceTextField.requestTemplateAdaptationAnnotations.getCurrentAnnotations().flatMap((e=>this.document.sourceTextField.requestTemplateAdaptationAnnotations.removeAnnotation(e.operation.annotationId)))}requestWordAlternatives(e){yW(Number.isInteger(e),`[requestWordAlternatives] non-integer offset: ${e}`);const t=this.document.targetTextField.getCurrentContent();yW(e>=0&&e<=t.length,`[requestWordAlternatives] out of range offset: ${e}`);const n=[];n.push(...this.cancelWordAlternativesFlows());const r=crypto.randomUUID(),o=this.document.targetTextField.requestWordAlternativesAnnotations.add(e,e,{$type:iD.$type,flowId:{$type:Qk.$type,value:r}})[0];return n.push(o),this.publishChange(HM.WRITE_TARGET_TEXT,n),r}requestTextUnitAlternatives(e){yW(Number.isInteger(e),`[requestTextUnitAlternatives] non-integer offset: ${e}`);const t=this.document.targetTextField.getCurrentContent();yW(e>=0&&e<=t.length,`[requestTextUnitAlternatives] out of range offset: ${e}`);const n=[];n.push(...this.cancelTextUnitAlternativesFlows());const r=crypto.randomUUID(),o=this.document.targetTextField.requestTextUnitAlternativesAnnotations.add(e,e,{$type:oD.$type,flowId:{$type:rD.$type,value:r}})[0];return n.push(o),this.publishChange(HM.WRITE_TARGET_TEXT,n),r}selectWordAlternative(e,t,n){const r=[];r.push(...this.cancelTextUnitAlternativesFlows());const o=this.document.targetTextField.selectWordAlternativeAnnotations.add(e,e,{$type:AU.$type,flowId:{$type:Qk.$type,value:t},selection:n});r.push(...o),this.publishChange(HM.WRITE_TARGET_TEXT,r)}selectTextUnitAlternative(e,t,n,r){const o=[];o.push(...this.cancelWordAlternativesFlows());const i=this.document.targetTextField.selectTextUnitAlternativeAnnotations.add(e,e,{$type:SU.$type,flowId:{$type:rD.$type,value:t},selection:n,rephraseVariant:r});o.push(...i),this.publishChange(HM.WRITE_TARGET_TEXT,o)}selectAutomaticTextUnitAlternative(e,t,n){const r=[],o=this.document.targetTextField.selectAutomaticTextUnitAlternativeAnnotations.add(e,e,{$type:yU.$type,selection:t,rephraseVariant:n});r.push(...o),this.publishChange(HM.WRITE_TARGET_TEXT,r)}requestShortenAlternatives(e,t){yW(Number.isInteger(e),`[requestShortenAlternatives] non-integer offset: ${e}`),yW(Number.isInteger(t),`[requestShortenAlternatives] non-integer length: ${t}`);const n=this.document.targetTextField.getCurrentContent();yW(e>=0&&e<=n.length,`[requestShortenAlternatives] out of range offset: ${e}`);const r=e+t;yW(r>=0&&r<=n.length,`[requestShortenAlternatives] out of range length: ${t}`);const o=[];o.push(...this.cancelChangeStyleAlternativesFlows());const i=crypto.randomUUID(),a=this.document.targetTextField.requestChangeStyleAlternativesAnnotations.add(e,r,nU.create({flowId:tU.create({value:i}),styleVariant:eU.create({value:"shorten"})}))[0];return o.push(a),this.publishChange(HM.WRITE_TARGET_TEXT,o),i}selectShortenAlternative(e,t,n,r){yW(Number.isInteger(e),`[selectShortenAlternative] non-integer offset: ${e}`),yW(Number.isInteger(t),`[selectShortenAlternative] non-integer length: ${t}`);const o=this.document.targetTextField.getCurrentContent();yW(e>=0&&e<=o.length,`[selectShortenAlternative] out of range offset: ${e}`);const i=e+t;yW(i>=0&&i<=o.length,`[selectShortenAlternative] out of range length: ${t}`);const a=[];a.push(...this.cancelChangeStyleAlternativesFlows());const s=this.document.targetTextField.selectChangeStyleAlternativeAnnotations.add(e,i,iU.create({flowId:tU.create({value:n}),selection:r}));a.push(...s),this.publishChange(HM.WRITE_TARGET_TEXT,a)}adaptTextToTemplate(e,t){const n=[];n.push(...this.cancelTemplateAdaptationFlows());const r=crypto.randomUUID(),o=this.document.sourceTextField.requestTemplateAdaptationAnnotations.add(0,0,cU.create({flowId:tU.create({value:r}),input:e,templateIds:[aU.create({value:t})]}))[0];return n.push(o),this.publishChange(HM.WRITE_SOURCE_TEXT,n),r}useAdaptedText(e){this.updateSourceText(e),this.publishChange(HM.WRITE_SOURCE_TEXT,this.cancelTemplateAdaptationFlows())}}const XB={};function KB(e){return r(this,arguments,void 0,(function*({sourceText:e,requestedLanguage:t,port:n,itaDocumentState:o,domainName:i,writeTrigger:a=""}){var s,l;oI(),delete XB[n.name];const c=yield uA.getAccessToken(),u=yield AI(),d=cT(u,Yn.WRITE)?"https://ita-pro.www.deepl.com/v1":"https://ita-free.www.deepl.com/v1",p=new Oq(new URL(d),c,{useHttpPostForStartSession:!0}),g=new YB,h=p.createSession(g);let f;try{f=yield wo()}catch(e){console.error(e)}try{yield h.connect(o,f),TS({itaSessionType:Qr,itaSessionEventType:o?eo:Zr})}catch(t){return n.postMessage({type:zA,payload:{error:t}}),ZS({action:zA,error:t.message}),gT(t,qv),jE(ar,{sourceLength:null==e?void 0:e.length,error:t.name,trigger:a,domainName:i}),void TS({itaSessionType:Qr,itaSessionEventType:to,itaErrorType:ro,itaErrorMessage:t.message})}bP(n.name,{session:h,updateAccessToken:e=>{p.updateAccessToken(e)},writeTrigger:a,domainName:i}),nT()&&console.log("ITA Write session ID:",null===(l=null===(s=h.startSessionResponse)||void 0===s?void 0:s.sessionId)||void 0===l?void 0:l.value);const _=h.client;return t&&_.updateRequestedLanguage(Kv({lang:t})),e&&_.updateSourceText(e),function(e,t){const n=e.client,o=[];e.connection.onclose((()=>{for(const e of o)e.unsubscribe()})),o.push(n.document.targetTextField.content.subscribe((e=>r(this,void 0,void 0,(function*(){nH(n,t),t.postMessage({type:kA,payload:{targetText:e}}),bP(t.name,{targetText:e})}))))),o.push(e.messages.subscribe((e=>r(this,void 0,void 0,(function*(){return yield ZB(e,t)}))))),o.push(e.error.subscribe((e=>{!function(e,t){var n,r,o,i,a,s,l,c;if(XB[t.name]=e,e instanceof hq){nT()&&console.log(`ITA Write session error, Type ${typeof e},\n        Code: ${null===(n=e.info)||void 0===n?void 0:n.statusCode}; Detail Code: ${null===(o=null===(r=e.info)||void 0===r?void 0:r.detailCode)||void 0===o?void 0:o.value}; Fallback Codes: ${null===(i=e.info)||void 0===i?void 0:i.fallbackDetailCodes.map((e=>e.value)).join(", ")}`);const u=wP(t.name),d=null===(s=null===(a=null==e?void 0:e.info)||void 0===a?void 0:a.detailCode)||void 0===s?void 0:s.value;gP(d)&&(jE(ar,{lang:u.writeSourceLanguage,sourceLength:null===(l=u.sourceText)||void 0===l?void 0:l.length,targetLength:null===(c=u.targetText)||void 0===c?void 0:c.length,style:u.writeStyle,trigger:u.writeTrigger,domainName:u.domainName,error:d||e.message}),t.postMessage({type:UA,payload:{error:hP(d,!0)}}),gT(e,qv)),TS({itaSessionType:Qr,itaSessionEventType:to,itaErrorType:oo,itaErrorMessage:d||e.message}),ZS({action:to,error:d||e.message})}}(e,t)}))),o.push(n.document.sourceTextField.content.subscribe((e=>{bP(t.name,{sourceText:e})}))),o.push(n.document.sourceTextField.calculatedLanguage.language.subscribe((e=>{const r={en:"en-GB",pt:"pt-PT",zh:"zh-Hans"};if(["en","pt","zh"].includes(null==e?void 0:e.toLowerCase()))return e=r[e.toLowerCase()]||"en-GB",void eH({port:t,language:e});nH(n,t),bP(t.name,{writeSourceLanguage:e}),t.postMessage({type:jA,payload:{language:e}})}))),o.push(n.document.sourceTextField.calculatedLanguage.isAutoDetected.subscribe((e=>{nH(n,t),bP(t.name,{isWriteSourceLanguageAutoDetected:e}),t.postMessage({type:WA,payload:{isAutoDetected:e}})}))),o.push(n.document.sourceTextField.unsupportedLanguageProperty.unsupported.subscribe((e=>{nH(n,t),bP(t.name,{isWriteSourceLanguageUnsupported:e}),t.postMessage({type:HA,payload:{isUnsupported:e}})}))),o.push(n.document.targetTextField.providedAutomaticTextUnitAlternativesAnnotations.annotations.subscribe((e=>{const n=e.flatMap((e=>e.specificPayload.alternatives.map((t=>{var n,r;return{text:t.text,flowId:"",index:null!==(r=null===(n=e.operation.range)||void 0===n?void 0:n.start)&&void 0!==r?r:0}}))));t.postMessage({type:XA.REPLY.ITA_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS,payload:{providedAlternatives:n}})}))),o.push(n.document.sourceTextField.languages.languageCodes.subscribe((e=>{nT()&&console.log("ITA_WRITE_SOURCE_LANGUAGE_CODES",e)})))}(h,n),h}))}function QB(e){return r(this,void 0,void 0,(function*(){var t,n,o,i,a;if(e.name in XB){nT()&&console.error("Detected error for Write session so will attempt to restore",XB[e.name]);const n=Object.assign({},wP(e.name));delete XB[e.name];try{const o=yield function(e,t){return r(this,void 0,void 0,(function*(){var n,r,o,i;return nT()&&console.log(`Attempting to recreate an ITA Write session for port ${t.name}`),yield null===(n=e.session)||void 0===n?void 0:n.connection.stop(),KB(Object.assign(Object.assign({},e),{itaDocumentState:null===(r=e.session)||void 0===r?void 0:r.client.document.serialize(),port:t,sourceText:void 0,domainName:null!==(o=e.domainName)&&void 0!==o?o:"",writeTrigger:null!==(i=e.writeTrigger)&&void 0!==i?i:Wr}))}))}(n,e);return null!==(t=null==o?void 0:o.client)&&void 0!==t?t:null}catch(e){return console.error(`Unable to recreate ITA session, Error: ${e}`),null}}const s=yield uA.getAccessToken();return null===(o=(n=wP(e.name)).updateAccessToken)||void 0===o||o.call(n,s),null!==(a=null===(i=wP(e.name).session)||void 0===i?void 0:i.client)&&void 0!==a?a:null}))}const ZB=(e,t)=>r(void 0,void 0,void 0,(function*(){var n,r;nT()&&console.log("ITA_WRITE_MESSAGE",e),"metaInfoMessage"in e&&100===(null===(r=null===(n=e.metaInfoMessage)||void 0===n?void 0:n.translatorTaskMetaInfo)||void 0===r?void 0:r.progressInPercent)&&(wP(t.name).isWriteSourceLanguageUnsupported||aH(t),t.postMessage({type:XA.REPLY.ITA_BACKEND_IDLE}))}));function eH(e){return r(this,arguments,void 0,(function*({port:e,language:t}){const n=yield QB(e);null==n||n.updateRequestedLanguage(Kv({lang:t})),bP(e.name,{targetLanguage:t}),TS({itaSessionType:Qr,itaSessionEventType:no,itaUserInteractionType:ao})}))}function tH(e,t){return r(this,void 0,void 0,(function*(){const n=yield QB(e);null==n||n.updateStyleVariant(t),bP(e.name,{writeStyle:t}),TS({itaSessionType:Qr,itaSessionEventType:no,itaUserInteractionType:lo})}))}function nH(e,t){t.postMessage({type:GA,payload:{itaDocumentState:e.document.serialize()}})}function rH(e,t){return r(this,void 0,void 0,(function*(){const n=yield QB(e);null==n||n.updateSourceText(t)}))}function oH(e){return r(this,void 0,void 0,(function*(){const t=wP(e.name).session;yield null==t?void 0:t.connection.stop(),delete XB[e.name],OP(e),nT()&&console.log(`Disposed write session for port ${e.name}`)}))}function iH(e,t){var n;const r=null===(n=wP(e.name).session)||void 0===n?void 0:n.client;null==r||r.selectAutomaticTextUnitAlternative(t.index,t.text),TS({itaSessionType:Qr,itaSessionEventType:no,itaUserInteractionType:co})}const aH=e=>r(void 0,void 0,void 0,(function*(){var t,n;const r=wP(e.name);r.writeSourceLanguage&&(yield jE(Zn,{lang:r.writeSourceLanguage,sourceLength:null===(t=r.sourceText)||void 0===t?void 0:t.length,targetLength:null===(n=r.targetText)||void 0===n?void 0:n.length,style:r.writeStyle,trigger:r.writeTrigger,domainName:r.domainName,isInputReviewUiUsed:r.writeTrigger===Vr}))}));let sH=!1;const lH=()=>r(void 0,void 0,void 0,(function*(){if(!(yield dI()))return;let e=!1;try{const t=yield MR();e=2===RS(t,IS)}catch(e){console.error(e),ZS({action:"AUTO_LOGIN",error:e.message})}if(e&&!Ro()&&chrome.cookies){try{yield uH(),ZS({action:"AUTO_LOGIN"})}catch(e){aT(e),ZS({action:"AUTO_LOGIN",error:e.message})}try{pH()}catch(e){console.error(e),ZS({action:"AUTO_LOGIN",error:e.message})}}yield YL()})),cH=()=>r(void 0,void 0,void 0,(function*(){const e=yield PI();if(yield cI())return!1;const t=yield chrome.storage.local.get([mo.auth.lastLogoutTrigger]);return!((null==t?void 0:t[mo.auth.lastLogoutTrigger])&&t[mo.auth.lastLogoutTrigger]===xn&&!(null==e?void 0:e.enforceSsoAutologin)&&!(null==e?void 0:e.requireLogin))})),uH=()=>r(void 0,void 0,void 0,(function*(){if(!(yield cH()))return;const e=yield chrome.cookies.getAll({domain:"deepl.com",name:"dl_session"});if(0===e.length)return;yield fH(e[0].value)})),dH="dl_session",pH=()=>{if(sH)return;sH=!0;const e=(()=>{let e=Promise.resolve(),t=0;return{enqueue:n=>(t++,e=e.then(n,n).finally((()=>t--)),e),length:()=>t,waitForAll:()=>e}})();chrome.cookies.onChanged.addListener((t=>{if(t.cookie.name===dH){if(t.removed&&"expired_overwrite"===t.cause)return void hH(t.cookie.value);if(!t.removed&&"explicit"===t.cause)return void e.enqueue((()=>gH(t.cookie.value)))}"releaseGroups"!==t.cookie.name||nP()}))},gH=e=>r(void 0,void 0,void 0,(function*(){try{if(aT("Website cookie was added",e),!(yield cH()))return;yield fH(e),ZS({action:"LOGIN_VIA_COOKIE_EXCHANGE"})}catch(e){aT("Failed to process added auth cookie",e),ZS({action:"LOGIN_VIA_COOKIE_EXCHANGE",error:e.message})}})),hH=e=>r(void 0,void 0,void 0,(function*(){aT("Website cookie was removed",e),ZS({action:"ON_AUTH_COOKIE_REMOVED"});const t=(yield chrome.storage.local.get("delegatedLoginMapping")).delegatedLoginMapping;if(yield mH(t,e)){yield Promise.all([gI(),aI(),sI(),OI()]);try{BE(),kE({trigger:kn,reason:"autologout"})}catch(e){console.error(e)}yield dA(!0),EA()}})),fH=e=>r(void 0,void 0,void 0,(function*(){try{const t="https://w.deepl.com/oidc/cookie_bearer_exchange?client=chromeExtension",n=yield fetch(t,{method:"GET",credentials:"include"}),r=yield n.json();yield pA(r,{trigger:Un,reason:"autologin"});const o=(yield lI()).id_token;return!!o&&(yield chrome.storage.local.set({delegatedLoginMapping:_H(o,e)}),EA(),!0)}catch(e){if(aT(e),e instanceof Error)try{gT(e,qv),Hy({errorCode:e.name,errorMessage:e.message,errorCategory:zr})}catch(e){aT(e)}}return!1})),_H=(e,t)=>{var n;const r=E(e);return{delegatedSessionId:null!==(n=null==r?void 0:r.sid)&&void 0!==n?n:"",originatingSessionId:t}},mH=(e,t)=>r(void 0,void 0,void 0,(function*(){var n;if(!e||e.originatingSessionId!==t)return aT("No delegated login mapping found or session ID mismatch"),!1;const r=(yield lI()).id_token;return!(!r||(null===(n=E(r))||void 0===n?void 0:n.sid)!==e.delegatedSessionId)||(aT("No current id token found, or the current ID token does not match the delegated session ID"),!1)})),vH={syncExperiments:"sync_experiments",syncClientState:"sync_client_state",trackClientStateWeb:"track_client_state_web",getAccountInfo:"get_account_info",cleanupActionLogs:"cleanup_action_logs",getSupportedTranslationLanguages:"get_supported_translation_languages"},TH={translateWithDeepL:"dlTranslateWithDeepL",captureAndTranslate:"dlCaptureAndTranslate",translateFullPage:"dlTranslateFullPage"};function yH(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}const EH={developer_tools:"DEVELOPER_TOOLS",settings_page:"SETTINGS_PAGE",settings_writing:"SETTINGS_WRITING",settings_reading:"SETTINGS_READING",settings_customizations:"SETTINGS_CUSTOMIZATIONS",settings_glossary:"SETTINGS_GLOSSARY",onboarding:"ONBOARDING",onboarding_after_successful_login:"ONBOARDING_AFTER_SUCCESSFUL_LOGIN",firefox_first_run:"FIREFOX_FIRST_RUN",privacy_policy:"PRIVACY_POLICY",create_account:"CREATE_ACCOUNT"},SH={DEVELOPER_TOOLS:"dev-page.html",SETTINGS_PAGE:"settings.html",SETTINGS_READING:"settings.html#translator",SETTINGS_WRITING:"settings.html#write",SETTINGS_CUSTOMIZATIONS:"settings.html#customizations",SETTINGS_GLOSSARY:"settings.html#glossary",ONBOARDING:"onboarding.html",ONBOARDING_FIREFOX:"onboarding-firefox.html",ONBOARDING_AFTER_SUCCESSFUL_LOGIN:"onboarding.html#successful_login",FIREFOX_FIRST_RUN:"firefox-first-run.html",PRIVACY_POLICY:"privacy-policy.html",CREATE_ACCOUNT:"create-account.html"};function IH({payload:e}){const{destination:t,openInSameTab:n,hash:r}=e;if(void 0===t)return;let o="";switch(t){case EH.developer_tools:o=AH(SH.DEVELOPER_TOOLS);break;case EH.settings_page:o=AH(SH.SETTINGS_PAGE,r);break;case EH.settings_writing:o=AH(SH.SETTINGS_WRITING);break;case EH.settings_reading:o=AH(SH.SETTINGS_READING);break;case EH.settings_customizations:o=AH(SH.SETTINGS_CUSTOMIZATIONS);break;case EH.settings_glossary:o=AH(SH.SETTINGS_GLOSSARY);break;case EH.onboarding:o=Ro()?AH(SH.ONBOARDING_FIREFOX):AH(SH.ONBOARDING);break;case EH.onboarding_after_successful_login:o=AH(SH.ONBOARDING_AFTER_SUCCESSFUL_LOGIN);break;case EH.firefox_first_run:o=AH(SH.FIREFOX_FIRST_RUN);break;case EH.privacy_policy:o=AH(SH.PRIVACY_POLICY);break;case EH.create_account:o=AH(SH.CREATE_ACCOUNT)}o&&(n?chrome.tabs.query({active:!0,currentWindow:!0},(function(e){const t=e[0];chrome.tabs.update(t.id,{url:o})})):chrome.tabs.create({url:o,active:!0}))}function AH(e,t){console.log(chrome.runtime.getURL(e));const n=new URL(chrome.runtime.getURL(e));return n.searchParams.append("dl_brex_internal_page","true"),t&&(n.hash=t),n.toString()}function bH(e){return r(this,arguments,void 0,(function*({request:e,port:t}){var n,r,o,i,a,s,l,c;try{yield CI(),yield kb({nicheIntegration:e.nicheIntegration||yn,sourceTexts:[e.sourceText],isWriteRequest:!1}),yield _B({sourceText:e.sourceText,targetLanguage:e.targetLanguage,domainName:e.domainName,translationTrigger:e.trigger,port:t}),nT()&&console.log(`ITA Translator session created for sender: ${null===(r=null===(n=t.sender)||void 0===n?void 0:n.tab)||void 0===r?void 0:r.url}, tab ID: ${null===(i=null===(o=t.sender)||void 0===o?void 0:o.tab)||void 0===i?void 0:i.id}}`)}catch(n){throw nT()&&console.error(`Error creating ITA Translator session for sender: ${null===(s=null===(a=t.sender)||void 0===a?void 0:a.tab)||void 0===s?void 0:s.url}, tab ID: ${null===(c=null===(l=t.sender)||void 0===l?void 0:l.tab)||void 0===c?void 0:c.id}}`,n),gT(n,qv),Jy({errorCode:n.name,errorMessage:n.message,domainName:e.domainName,targetLang:e.targetLanguage,websiteLanguage:e.websiteLanguage,trigger:e.trigger,characterCount:e.sourceText.length}),TS({itaSessionType:Kr,itaSessionEventType:to,itaErrorType:ro,itaErrorMessage:n.message||n}),n}}))}function wH(e){return r(this,arguments,void 0,(function*({request:e,port:t}){var n,r,o,i,a,s,l,c;try{yield CI(),yield kb({nicheIntegration:e.nicheIntegration||yn,sourceTexts:[e.sourceText],isWriteRequest:!0}),yield KB({sourceText:e.sourceText,requestedLanguage:e.requestedLanguage,domainName:e.domainName,writeTrigger:e.trigger,port:t}),nT()&&console.log(`ITA Write session created for sender: ${null===(r=null===(n=t.sender)||void 0===n?void 0:n.tab)||void 0===r?void 0:r.url}, tab ID: ${null===(i=null===(o=t.sender)||void 0===o?void 0:o.tab)||void 0===i?void 0:i.id}}`)}catch(n){throw nT()&&console.error(`Error creating ITA Write session for sender: ${null===(s=null===(a=t.sender)||void 0===a?void 0:a.tab)||void 0===s?void 0:s.url}, tab ID: ${null===(c=null===(l=t.sender)||void 0===l?void 0:l.tab)||void 0===c?void 0:c.id}}`,n),gT(n,qv),jE(ar,{sourceLength:e.sourceText.length,error:n.name,trigger:e.trigger,domainName:e.domainName}),TS({itaSessionType:Qr,itaSessionEventType:to,itaErrorType:ro,itaErrorMessage:n.message||n}),n}}))}const OH={dlRequestLogin:"dlRequestLogin",dlRequestSignUp:"dlRequestSignUp",dlRequestLogout:"dlRequestLogout",dlGetUserState:"dlGetUserState",dlGetClientState:"dlGetClientState",dlManipulateGetClientState:"dlManipulateGetClientState",dlGetUsersCharacterLimit:"dlGetUsersCharacterLimit"},NH={dlTextToSpeech:"dlTextToSpeech",dlGetSupportedVoices:"dlGetSupportedVoices",dlStopSpeech:"dlStopSpeech"},RH={dlSendNotification:"dlSendNotification"},LH={dlTriggerImproveInline:"dlTriggerImproveInline",dlTriggerImproveInput:"dlTriggerImproveInput",dlRequestAlternatives:"dlRequestAlternatives",dlRequestImproveWriting:"dlRequestImproveWriting"},PH={dlRequestGDocsSplitText:"dlRequestGDocsSplitText"},CH={dlCheckCommandShortcuts:"dlCheckCommandShortcuts",dlGetAppSettings:"dlGetAppSettings",dlUpdateAppSettings:"dlUpdateAppSettings"},xH={dlRequestHtmlTranslation:"dlRequestHtmlTranslation",dlRequestInlineTranslation:"dlRequestInlineTranslation",dlTriggerTranslateInline:"dlTriggerTranslateInline",dlTriggerTranslateInput:"dlTriggerTranslateInput",dlRequestInputTranslation:"dlRequestInputTranslation",dlRequestZendeskInputTranslation:"dlRequestZendeskInputTranslation",dlRequestGmailReceivedEmailTranslation:"dlRequestGmailReceivedEmailTranslation",dlRequestWhatsAppMessageTranslation:"dlRequestWhatsAppMessageTranslation",dlRequestTwitterTweetTranslation:"dlRequestTwitterTweetTranslation",dlRequestYouTubeTranslation:"dlRequestYouTubeTranslation",dlRequestLinkedInPostTranslation:"dlRequestLinkedInPostTranslation",dlRequestZendeskMessageTranslation:"dlRequestZendeskMessageTranslation",dlRequestWhatsAppMessagesTranslation:"dlRequestWhatsAppMessagesTranslation",dlRequestGDocsProcessContent:"dlRequestGDocsProcessContent",dlTranslatedInputTextNotSet:"dlTranslatedInputTextNotSet"},kH={dlRequestTermbases:"dlRequestTermbases",dlGetDictionary:"dlGetDictionary"},DH={dlStoreTranslationLanguages:"dlStoreTranslationLanguages"},UH={dlTrackInlineSettingOpened:"dlTrackInlineSettingOpened",dlTrackPolicyLoginRequiredNotification:"dlTrackPolicyLoginRequiredNotification",dlTrackUpgradeNotificationAction:"dlTrackUpgradeNotificationAction",dlTrackLogoClickedEvent:"dlTrackLogoClickedEvent",dlTrackDetectLanguage:"dlTrackDetectLanguage",dlTrackSidePanelOpened:"dlTrackSidePanelOpened",dlTrackFormalitySelected:"dlTrackFormalitySelected",dlTrackWriteTextTonesChanged:"dlTrackWriteTextTonesChanged",dlTrackWriteTextStylesApplied:"dlTrackWriteTextStylesApplied",dlTrackWriteTextStylesChanged:"dlTrackWriteTextStylesChanged",dlTrackClicksOnAdsButton:"dlTrackClicksOnAdsButton",dlTrackIframeTranslationFailed:"dlTrackIframeTranslationFailed",dlTrackSeeAlternativesClicked:"dlTrackSeeAlternativesClicked",dlTrackAlternativeSelected:"dlTrackAlternativeSelected",dlTrackLanguageDetectionForTextProcessing:"dlTrackLanguageDetectionForTextProcessing",dlTrackUpgradeNotificationClosed:"dlTrackUpgradeNotificationClosed",dlTrackUpgradeNotificationIsDisplayed:"dlTrackUpgradeNotificationIsDisplayed",dlOnSuccessfulZendeskTranslation:"dlOnSuccessfulZendeskTranslation",dlTrackAlternativesEvent:"dlTrackAlternativesEvent",dlTrackGmailCharLimitReached:"dlTrackGmailCharLimitReached",dlTrackCustomizationEnabledEvent:"dlTrackCustomizationEnabledEvent",dlTrackTranslateAcceptOrRevertEvent:"dlTrackTranslateAcceptOrRevertEvent",dlTrackGDocsReplaceText:"dlTrackGDocsReplaceText",dlTrackLandingOnWebsite:"dlTrackLandingOnWebsite",dlTrackOnboardingOpenExternalLink:"dlTrackOnboardingOpenExternalLink",dlTrackOnboardingStepChange:"dlTrackOnboardingStepChange",dlTrackIconHover:"dlTrackIconHover",dlTrackVoiceOverStops:"dlTrackVoiceOverStops",dlTrackInlineListen:"dlTrackInlineListen",dlTrackInlineCopy:"dlTrackInlineCopy",dlTrackFptHide:"dlTrackFptHide",dlTrackInlineDragStart:"dlTrackInlineDragStart",dlTrackInlinePositionChange:"dlTrackInlinePositionChange",dlTrackRightClick:"dlTrackRightClick",dlTrackRecommendToAFriendClick:"dlTrackRecommendToAFriendClick",dlTrackDocTransClick:"dlTrackDocTransClick",dlTrackExtensionOpenedEvent:"dlTrackExtensionOpenedEvent",dlTrackInputTranslationInjection:"dlTrackInputTranslationInjection",dlTrackUseOfShortcut:"dlTrackUseOfShortcut",dlTrackUiAction:"dlTrackUiAction",dlTrackSettingChanged:"dlTrackSettingChanged",dlTrackOpenInputHighlighter:"dlTrackOpenInputHighlighter",dlTrackOpenInlineHighlighter:"dlTrackOpenInlineHighlighter",dlTrackCloseInputHighlighter:"dlTrackCloseInputHighlighter",dlTrackCloseInlineHighlighter:"dlTrackCloseInlineHighlighter",dlTrackDictionaryStatus:"dlTrackDictionaryStatus",dlTrackOpenDictionarySection:"dlTrackOpenDictionarySection",dlTrackDisabledDictionaryHover:"dlTrackDisabledDictionaryHover",dlTrackZendeskCustomizationEvent:"dlTrackZendeskCustomizationEvent",dlTrackZendeskGlossaryOpened:"dlTrackZendeskGlossaryOpened",dlTrackGlossaryEnabled:"dlTrackGlossaryEnabled",dlTrackGlossaryDisabled:"dlTrackGlossaryDisabled",dlTrackDeeplWriteEvent:"dlTrackDeeplWriteEvent",dlTrackLingueeErrorData:"dlTrackLingueeErrorData",dlTrackGdocsMaxCharExceededShown:"dlTrackGdocsMaxCharExceededShown",dlTrackGDocsMaxCharExceededTryProClicked:"dlTrackGDocsMaxCharExceededTryProClicked",dlTrackOnboardingModalShown:"dlTrackOnboardingModalShown",dlTrackUILocationClicked:"dlTrackUILocationClicked",dlTrackIframeTranslationSuccessful:"dlTrackIframeTranslationSuccessful",dlTrackReplaceInField:"dlTrackReplaceInField",dlTrackFptPopupOpen:"dlTrackFptPopupOpen",dlTrackExperimentTrigger:"dlTrackExperimentTrigger",dlTrackOcrTranslationInstructionsClosed:"dlTrackOcrTranslationInstructionsClosed",dlTrackInlineHighlightsShown:"dlTrackInlineHighlightsShown"},MH={dlGetExperiments:"dlGetExperiments"},GH={dlCheckFeatureFlagEnabled:"dlCheckFeatureFlagEnabled",dlGetExperimentParameter:"dlGetExperimentParameter"},VH={dlTestClassicAPI:"dlTestClassicAPI",dlOpenInternalPage:"dlOpenInternalPage",checkForOpenSidePanel:"checkForOpenSidePanel",dlExternalURLRedirect:"dlExternalURLRedirect",newWebsiteState:"newWebsiteState",resetWebsiteState:"resetWebsiteState",dlOpenSidePanel:"dlOpenSidePanel",dlOpenAllBrowserFeedbackSurvey:"dlOpenAllBrowserFeedbackSurvey",dlGetActionLogs:"dlGetActionLogs",dlGetCleanupStats:"dlGetCleanupStats",dlManualCleanupActionLogs:"dlManualCleanupActionLogs"},$H={dlGetCustomLogo:"dlGetCustomLogo"};function FH(e,t,n){return nT()&&!{IS_PROD:!0,BASE_URLS:{auth:"https://auth.deepl.com",legacyAuth:"https://www.deepl.com",dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.70.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.70.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.70.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiFree:"https://oneshot-free.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.www.deepl.com/v1",login:"https://www.deepl.com/auth/login",ssoLogin:"https://w.deepl.com/oidc/auth",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",allBrowserFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_5hVyvZAQlQOL5RQ",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chromewebstore.google.com/detail/deepl-translate-and-write/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-and-writ/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall",accountApi:"https://w.deepl.com/account?request_type=jsonrpc&il=en&method=getCurrentAccount",organizationApi:"https://w.deepl.com/organization",learnWhyGeoBlocked:"https://www.deepl.com/restricted-territories"},APP_VERSION:"1.70.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,IMPROVE_WRITING:!0,INLINE_HIGHLIGHTS:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!1,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,BATCH_TRANSLATE_HTML_REQUEST:!0,SIDE_PANEL_FIREFOX:!0}}.DISABLE_DEBUG_LOGS&&console.log(t.tab?`message from a content script: ${t.tab.url} with tab id: ${t.tab.id}. action: ${e.action}`:`message from the extension with action: ${e.action}`),jH({action:e.action,request:e,sendResponse:n},t)}function jH(e,t){var n,r,o;const{action:i,request:a,sendResponse:s}=e;switch(ZS({action:i}),i){case xH.dlRequestHtmlTranslation:return rw(e.request).then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case xH.dlRequestInlineTranslation:return pR(a).then((e=>{s(e)})).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case xH.dlTriggerTranslateInline:return lR(t.tab.id),!1;case LH.dlTriggerImproveInline:return uR(t.tab.id),!1;case LH.dlTriggerImproveInput:return dR(t.tab.id),!1;case xH.dlTriggerTranslateInput:return cR(t.tab.id),!1;case xH.dlRequestInputTranslation:return gR(a).then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case xH.dlRequestZendeskInputTranslation:return hR(a).then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case xH.dlRequestGmailReceivedEmailTranslation:return cw(a).then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case xH.dlRequestWhatsAppMessageTranslation:return iw(a).then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case xH.dlRequestTwitterTweetTranslation:return sw(a).then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case xH.dlRequestYouTubeTranslation:return ow(a).then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case xH.dlRequestLinkedInPostTranslation:return lw(a).then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case xH.dlRequestZendeskMessageTranslation:return _R(a).then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case xH.dlRequestWhatsAppMessagesTranslation:return aw(a).then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case PH.dlRequestGDocsSplitText:return fR(a).then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case xH.dlRequestGDocsProcessContent:return QL(a).then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case kH.dlRequestTermbases:return mR().then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case UH.dlTrackDetectLanguage:return vR(a),!1;case OH.dlRequestLogin:return GR().then((()=>s(!0))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case OH.dlRequestSignUp:return VR().then((()=>s(!0))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case OH.dlRequestLogout:return $R().then((()=>s(!0))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case CH.dlGetAppSettings:return chrome.storage.sync.get(null,(function(e){s(e)})),!0;case CH.dlUpdateAppSettings:return chrome.storage.sync.set(a.payload,(function(){s(a.payload)})),!0;case xH.dlTranslatedInputTextNotSet:return zy({errorCode:vT,errorMessage:"The translated text could not be set",domainName:a.payload}),!1;case OH.dlGetUserState:return FR().then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case VH.dlExternalURLRedirect:return xo(a.payload),!1;case VH.dlOpenInternalPage:return IH(a),!1;case VH.dlOpenSidePanel:return zR(),!1;case UH.dlTrackInputTranslationInjection:return TR(a.payload),!1;case UH.dlTrackExtensionOpenedEvent:return yR(a.payload),!1;case UH.dlTrackLogoClickedEvent:return ER(a.payload),!1;case UH.dlTrackDocTransClick:return SR(),!1;case UH.dlTrackRecommendToAFriendClick:return IR(),!1;case RH.dlSendNotification:return jR(a.payload),!1;case CH.dlCheckCommandShortcuts:return WR().then((e=>s(e))),!0;case UH.dlTrackUseOfShortcut:return qR(a.payload),!1;case UH.dlTrackUiAction:return BR(a.payload),!1;case UH.dlTrackInlineSettingOpened:return AR(a.payload),!1;case UH.dlTrackSettingChanged:return bR(a.payload),!1;case UH.dlTrackUILocationClicked:return fL(a.payload),!1;case UH.dlTrackRightClick:return wR(a.payload),!1;case UH.dlTrackInlinePositionChange:return OR(a.payload),!1;case UH.dlTrackInlineDragStart:return NR(a.payload),!1;case UH.dlTrackFptHide:return RR(a.payload),!1;case UH.dlTrackInlineCopy:return PR(a.payload),!1;case UH.dlTrackInlineListen:return xR(a.payload),!1;case UH.dlTrackIconHover:return LR(a.payload),!1;case UH.dlTrackVoiceOverStops:return kR(a.payload),!1;case UH.dlTrackOnboardingStepChange:return CR(a.payload),!1;case UH.dlTrackOnboardingOpenExternalLink:return DR(a.payload),!1;case UH.dlTrackLandingOnWebsite:return XR(a.payload),!1;case UH.dlTrackGDocsReplaceText:return UR(a.payload),!1;case MH.dlGetExperiments:return MR(null===(n=a.payload)||void 0===n?void 0:n.forceFetch).then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(e)})),!0;case OH.dlGetClientState:return AL("payload"in a?null===(r=a.payload)||void 0===r?void 0:r.forceFetch:void 0).then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(e)})),!0;case OH.dlManipulateGetClientState:return nT()&&(null===(o=a.payload)||void 0===o?void 0:o.state)&&FL(a.payload.state).then((()=>s())).catch((e=>{ZS({action:i,error:e.message}),s(e)})),!0;case NH.dlTextToSpeech:return ZR(a.payload,t.tab.id).then((()=>s())).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case kH.dlGetDictionary:return aL(a.payload).then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case DH.dlStoreTranslationLanguages:return nP(a.payload.releaseGroups).then((()=>s())).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case NH.dlGetSupportedVoices:return eL().then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case NH.dlStopSpeech:return tL().then((()=>s())).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case UH.dlTrackOpenInputHighlighter:return nL(a.payload),!1;case UH.dlTrackOpenInlineHighlighter:return rL(a.payload),!1;case UH.dlTrackCloseInputHighlighter:return oL(a.payload),!1;case UH.dlTrackCloseInlineHighlighter:return iL(a.payload),!1;case UH.dlTrackDictionaryStatus:return sL(a.payload),!1;case UH.dlTrackOpenDictionarySection:return lL(),!1;case UH.dlTrackDisabledDictionaryHover:return cL(),!1;case UH.dlTrackZendeskCustomizationEvent:return uL(a.payload),!1;case UH.dlTrackZendeskGlossaryOpened:return RL(a.payload).then((()=>s())).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case UH.dlTrackGlossaryEnabled:return LL(a.payload).then((()=>s())).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case UH.dlTrackGlossaryDisabled:return PL(a.payload).then((()=>s())).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case UH.dlTrackDeeplWriteEvent:return _L(a.payload),!1;case UH.dlTrackLingueeErrorData:return dL(a.payload),!1;case UH.dlTrackGdocsMaxCharExceededShown:return pL(a.payload),!1;case UH.dlTrackGDocsMaxCharExceededTryProClicked:return gL(a.payload),!1;case UH.dlTrackOnboardingModalShown:return hL(a.payload),!1;case LH.dlRequestImproveWriting:return mL(a).then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case LH.dlRequestAlternatives:return ML(a).then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e))})),!0;case UH.dlTrackTranslateAcceptOrRevertEvent:return vL(a.payload),!1;case UH.dlTrackCustomizationEnabledEvent:return TL(a.payload),!1;case UH.dlTrackGmailCharLimitReached:return EL(a.payload),!1;case OH.dlGetUsersCharacterLimit:return wL().then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case UH.dlTrackAlternativesEvent:return IL(a.payload),!1;case VH.dlTestClassicAPI:return xL(a.payload).then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case UH.dlOnSuccessfulZendeskTranslation:return KR(),!1;case UH.dlTrackUpgradeNotificationIsDisplayed:return OL(a.payload),!1;case UH.dlTrackUpgradeNotificationClosed:return NL(a.payload),!1;case UH.dlTrackUpgradeNotificationAction:return CL(a.payload),!1;case UH.dlTrackLanguageDetectionForTextProcessing:return kL(a.payload).finally((()=>s())),!0;case UH.dlTrackSeeAlternativesClicked:return DL(),!1;case UH.dlTrackAlternativeSelected:return UL(a.payload),!1;case UH.dlTrackIframeTranslationSuccessful:return GL(),!1;case UH.dlTrackIframeTranslationFailed:return VL(a.payload),!1;case UH.dlTrackClicksOnAdsButton:return $L(),!1;case UH.dlTrackWriteTextStylesChanged:return jL(a.payload),!1;case UH.dlTrackWriteTextStylesApplied:return WL(a.payload),!1;case UH.dlTrackWriteTextTonesChanged:return qL(a.payload),!1;case UH.dlTrackFormalitySelected:return gS(a.payload),!1;case UH.dlTrackSidePanelOpened:return hS(),!1;case UH.dlTrackPolicyLoginRequiredNotification:return Qy(a.payload),!1;case UH.dlTrackReplaceInField:return mS(a.payload),!1;case $H.dlGetCustomLogo:return Wb(a.payload.logoId).then((e=>{s({logoUrl:null==e?void 0:e.imageObjectURL})})).catch((e=>{vA(),ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case VH.dlOpenAllBrowserFeedbackSurvey:return gA(),!1;case UH.dlTrackFptPopupOpen:return ES(a.payload),!1;case VH.dlGetActionLogs:return KS().then((e=>s(e))).catch((e=>{s(UT(e,qv))})),!0;case VH.dlGetCleanupStats:return tI().then((e=>s(e))).catch((e=>{s(UT(e,qv))})),!0;case VH.dlManualCleanupActionLogs:return eI().then((e=>s(Object.assign({success:!0},e)))).catch((e=>{s({success:!1,error:e.message})})),!0;case UH.dlTrackOcrTranslationInstructionsClosed:return zL(),!1;case GH.dlCheckFeatureFlagEnabled:return XL(a.payload.featureFlagName).then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case GH.dlGetExperimentParameter:return KL(a.payload).then((e=>s(e))).catch((e=>{ZS({action:i,error:e.message}),s(UT(e,qv))})),!0;case UH.dlTrackInlineHighlightsShown:return vS(a.payload),!1}return!1}function WH(e){switch(console.log(`Command "${e}" triggered`),e){case Dt:chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:QA.dlTriggerTranslationShortcut})}));break;case Ut:chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"dlChangeLanguageShortcut"})}));break;case Mt:chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.sidePanel.open({windowId:e[0].windowId},(()=>{JR()}))}));try{WR().then((e=>{const t=e.filter((e=>e.name===Mt))[0].shortcut;Zy({shortcutType:Mt,shortcut:t})}))}catch(e){console.error(e)}break;default:Zy({shortcutType:Gt,shortcut:e})}ZS({action:e})}function qH(e){switch(e.name){case vH.syncExperiments:MR();break;case vH.syncClientState:AL();break;case vH.trackClientStateWeb:bL().then((e=>dS(e))).catch((()=>pS()));break;case vH.getAccountInfo:HL();break;case vH.cleanupActionLogs:QS();break;case vH.getSupportedTranslationLanguages:nP()}ZS({action:e.name})}function BH(e,t){e.menuItemId===TH.translateWithDeepL&&(HR(),ZS({action:TH.translateWithDeepL})),t&&e.menuItemId===TH.captureAndTranslate&&chrome.sidePanel.open({windowId:t.windowId}).then((()=>{JR(),ZS({action:TH.captureAndTranslate})})).catch((e=>{const t=e instanceof Error?e.message:String(e)||"";yS({errorCode:TT,errorMessage:t}),ZS({action:TT,error:t})})),e.menuItemId===TH.translateFullPage&&(YR(),ZS({action:TH.translateFullPage}))}function HH(e,t){return r(this,void 0,void 0,(function*(){let n=!1;if("sync"===t)for(let[t,{oldValue:r,newValue:o}]of Object.entries(e))if("installationId"===t&&r!==o){try{yield MR(!0)}catch(e){console.error(`Error fetching experiments after installationId change: ${e}`)}n=!0}if("local"===t){["organizationId","accountId"].some((t=>{const n=e[t];return n&&n.oldValue!==n.newValue}))&&(n=!0)}if(n){(yield sR()).initialize(2e3)}ZS({action:"onStorageChanged"})}))}function JH(e,t){const{type:n,payload:r}=e;switch(nT()&&console.log(`Port message received, port name: ${t.name}, sender: ${t.sender.tab.url}, tab ID: ${t.sender.tab.id}, message type ${n}`),ZS({action:n}),n){case wA:bH({request:r,port:t}).then().catch((e=>{ZS({action:n,error:e.message}),YH(e,t)}));break;case KA.REQUEST.ITA_UPDATE_TARGET_LANGUAGE:vB({port:t,language:r.language});break;case KA.REQUEST.ITA_UPDATE_SOURCE_LANGUAGE:TB({port:t,language:r.language});break;case DA:yB(t,r.formality);break;case LA:_B({itaDocumentState:r.itaDocumentState,domainName:r.domainName,translationTrigger:r.trigger,port:t});break;case NA:wH({request:r,port:t}).then().catch((e=>{ZS({action:n,error:e.message}),YH(e,t)}));break;case VA:eH({port:t,language:r.language});break;case $A:tH(t,r.styleVariant);break;case FA:KB({itaDocumentState:r.itaDocumentState,domainName:r.domainName,writeTrigger:r.trigger,port:t});break;case RA:rH(t,r.sourceText);break;case OA:IB(t);break;case qA:oH(t);break;case XA.REQUEST.ITA_SELECT_ALTERNATIVE:iH(t,r.alternative);break;case KA.REQUEST.ITA_SELECT_ALTERNATIVE:bB(t,r.alternative);break;default:nT()&&console.log(`Unrecognised message type: ${n}`)}}function zH(e){nT()&&console.log(`Port name: ${e.name} disconnected`),pB(e)}function YH(e,t){t.postMessage({type:UA,payload:UT(e,qv)}),ZS({action:UA,error:e.message})}const XH={setBrowserExtensionUserAgent:{type:"modifyHeaders",requestHeaders:[{header:"user-agent",operation:"set",value:`DeepLBrowserExtension/1.70.0 ${navigator.userAgent} `}]}},KH={lingueeDomainFilter:{excludedDomains:["linguee.com"],urlFilter:"*://www-app.linguee.com*",resourceTypes:["xmlhttprequest"]},deeplToolingApiDomainFilter:{excludedDomains:["deepl.com"],urlFilter:"*://*.deepl.com/jsonrpc?client=chrome-extension,*",resourceTypes:["xmlhttprequest"]},deeplStatisticsDomainFilter:{excludedDomains:["deepl.com"],urlFilter:"*://s.deepl.*/chrome/statistics*",resourceTypes:["xmlhttprequest"]},deeplInteractiveTextApiDomainFilter:{excludedDomains:["deepl.com"],urlFilter:"*://ita-*.www*.deepl.com/*",resourceTypes:["xmlhttprequest","websocket"]},deeplOneShotApiDomainFilter:{excludedDomains:["deepl.com"],urlFilter:"*://oneshot-*.www*.deepl.com/*",resourceTypes:["xmlhttprequest"]}};function QH(){var e,t;if(chrome.declarativeNetRequest)chrome.declarativeNetRequest.updateDynamicRules({removeRuleIds:[2,3,4,5,6],addRules:[{id:2,priority:1,action:XH.setBrowserExtensionUserAgent,condition:KH.lingueeDomainFilter},{id:3,priority:1,action:XH.setBrowserExtensionUserAgent,condition:KH.deeplToolingApiDomainFilter},{id:4,priority:1,action:XH.setBrowserExtensionUserAgent,condition:KH.deeplStatisticsDomainFilter},{id:5,priority:1,action:XH.setBrowserExtensionUserAgent,condition:KH.deeplInteractiveTextApiDomainFilter},{id:6,priority:1,action:XH.setBrowserExtensionUserAgent,condition:KH.deeplOneShotApiDomainFilter}]},(e=>r(this,void 0,void 0,(function*(){nT()&&console.log("created",e)}))));else if(null===(e=chrome.webRequest)||void 0===e?void 0:e.onBeforeSendHeaders){const e=nT()?"https://test.deepl.com/":"https://www.deepl.com/";browser.webRequest.onBeforeSendHeaders.addListener((t=>{const n=t.requestHeaders;return n.push({name:"Referer",value:e}),{requestHeaders:n}}),{urls:["*://*.deepl.com/jsonrpc?client=chrome-extension,*"]},["requestHeaders","blocking"]),browser.webRequest.onBeforeSendHeaders.addListener((function(e){for(const t of e.requestHeaders)if("User-Agent"===t.name){t.value=`DeepLBrowserExtension/1.70.0 ${navigator.userAgent}`;break}return{requestHeaders:e.requestHeaders}}),{urls:["*://www-app.linguee.com/*","*://*.deepl.com/jsonrpc?client=chrome-extension,*","https://s.deepl.com/chrome/statistics",...(t=["https://ita-free.www.deepl.com/v1/*","https://ita-pro.www.deepl.com/v1/*","https://oneshot-free.www.deepl.com/v1/*","https://oneshot-pro.www.deepl.com/v1/*"],t.map((e=>e.replace(/^https:\/\//,"*://"))))]},["blocking","requestHeaders"])}}function ZH(e){nT()&&console.log(`Start setup routine after ${null==e?void 0:e.reason}`),function(){return r(this,void 0,void 0,(function*(){let e=!1,t=!1;const n=nT(),r=yield chrome.storage.sync.get(null),o={settingSchemeVersion:47,blacklistDomains:[],blacklistDomainsForReading:[],blacklistDomainsForWriting:[],languagesForTranslation:S.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.langCode]:O})),{}),selectedTargetLanguage:zv(),recentlyUsedLanguages:[],isTargetLanguageConfirmed:!1,deepLProApiKey:{IS_PROD:!0,BASE_URLS:{auth:"https://auth.deepl.com",legacyAuth:"https://www.deepl.com",dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.70.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.70.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.70.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiFree:"https://oneshot-free.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.www.deepl.com/v1",login:"https://www.deepl.com/auth/login",ssoLogin:"https://w.deepl.com/oidc/auth",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",allBrowserFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_5hVyvZAQlQOL5RQ",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chromewebstore.google.com/detail/deepl-translate-and-write/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-and-writ/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall",accountApi:"https://w.deepl.com/account?request_type=jsonrpc&il=en&method=getCurrentAccount",organizationApi:"https://w.deepl.com/organization",learnWhyGeoBlocked:"https://www.deepl.com/restricted-territories"},APP_VERSION:"1.70.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,IMPROVE_WRITING:!0,INLINE_HIGHLIGHTS:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!1,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,BATCH_TRANSLATE_HTML_REQUEST:!0,SIDE_PANEL_FIREFOX:!0}}.DEEPL_PRO_API_KEY,installationId:m(),closeSidebarOnFPT:!0,enableFullPageTranslation:!0,enableInputTranslation:!0,enableInlineTranslation:!0,enableInlineHighlights:!1,languagePreferenceForWriting:Xv(),languagePreferenceForReading:Xv(),languagePreferenceForDeeplWrite:"EN-US",blacklistedPopupWidgets:[],successfulTranslations:0,successfulArabicTranslations:0,isReviewPopupShown:!1,reviewPopupRemindAt:null,shouldDisplayFeedbackPopup:!1,isInputHighlighterShown:!1,isInlineHighlighterShown:!1,hasITAInlineOnboardingBeenShown:!1,hasITAPopupHideRemarkBeenShown:!1,useAdvancedWindowModeForInlineFunctionality:!0,regionalVariant:void 0,isSurveyLinkHidden:!1,isSidePanelSurveyVisible:!1,sidePanelSurveyHasBeenDisplayed:!1,successfulSidepanelTranslations:0,isGlossaryEnabled:!1,activeTermbaseId:null,isZendeskOnboarded:!1,isZendeskEnabled:!0,isZendeskOnboardingShown:!1,zendeskFormality:"auto",zendeskSuccessfulTranslations:0,zendeskActiveTermbase:null,isGDocsEnabled:!0,isGDocsOnboardingShown:!1,gDocsSegmentation:Ir,gDocsWriteLang:null,isGmailEnabled:!0,wasGmailOnboardingShown:!1,successfulTranslationsGmail:0,wasGmailFeedbackPopupShown:!1,isGSlidesEnabled:!0,isGSlidesOnboardingShown:!1,wasGSlidesFeedbackPopupShown:!1,successfulTranslationsGSlides:0,isWhatsAppWebEnabled:!0,isTwitterEnabled:!0,isYoutubeEnabled:!0,customizationsActiveStates:{[On]:!0},hasUserSeenAccountCreationNudge:!1,hasUserSeenPostAccountCreationOnboarding:!1,hasUserSeenProCustomerSegmentationSurvey:!1,firefoxAnonPermissionGranted:!0,firefoxPersonalPermissionGranted:!1,enableItaDev:!1,enableItaWriteDev:!1,enableItaInputDev:!1,freeTrialFTPAnonymousUser:5,freeTrialFTPFreeUser:15,enableAdvancedTriggerIcon:!1,userProfileSurvey2025:{popupShown:!1,remindAt:null},targetLanguageSidePanel:Yv()};if(!r||!r.settingSchemeVersion||r.settingSchemeVersion<o.settingSchemeVersion){let t={};for(const[i,a]of Object.entries(o))i in r&&"settingSchemeVersion"!==i?t[i]=r[i]:("installationId"===i&&(e=!0,n&&console.log("installation id set",a)),t[i]=a);yield chrome.storage.sync.clear(),yield chrome.storage.sync.set(t),n&&console.log("settings set: ",t)}else n&&console.log("No need to update the settings");return(yield vI())||(yield mI(),t=!0,n&&console.log("browser instance id set")),{installationIdWasSet:e,browserInstanceIdWasSet:t}}))}().then((t=>{tJ(e,t)})).catch((t=>{tJ(e).finally((()=>{console.error(t),Hy({errorCode:mT,errorMessage:`setSettingsAfterInstall failed: ${t.message}`})}))}))}function eJ(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get(null);return yield cT(e,Yn.TRANSLATOR)}))}function tJ(e,t){return r(this,void 0,void 0,(function*(){let n,o=nT();o&&console.log("get experiments");try{n=yield MR(!0),o&&console.log("fetched experiments",n)}catch(e){console.error(e),Hy({errorCode:mT,errorMessage:"Unable to fetch experiments in install block"}),ZS({action:mT,error:e.message})}o&&console.log("get client state and set perodic code execution");try{yield AL(!0)}catch(e){console.error(e),Hy({errorCode:mT,errorMessage:e.message}),ZS({action:mT,error:e.message})}try{yield HL()}catch(e){console.error(e),Hy({errorCode:mT,errorMessage:e.message}),ZS({action:mT,error:e.message})}try{yield function(){return r(this,void 0,void 0,(function*(){yield chrome.alarms.clearAll(),yield chrome.alarms.create(vH.syncExperiments,{delayInMinutes:10,periodInMinutes:10}),yield chrome.alarms.create(vH.syncClientState,{delayInMinutes:30,periodInMinutes:30}),yield chrome.alarms.create(vH.trackClientStateWeb,{delayInMinutes:360,periodInMinutes:360}),yield chrome.alarms.create(vH.getAccountInfo,{delayInMinutes:30,periodInMinutes:30}),yield chrome.alarms.create(vH.cleanupActionLogs,{delayInMinutes:5,periodInMinutes:15}),yield chrome.alarms.create(vH.getSupportedTranslationLanguages,{delayInMinutes:30,periodInMinutes:30})}))}()}catch(e){console.error(e),Hy({errorCode:mT,errorMessage:e.message}),ZS({action:mT,error:e.message})}try{yield nP()}catch(e){console.error(e),Hy({errorCode:mT,errorMessage:e.message}),ZS({action:mT,error:e.message})}try{const t=yield chrome.management.getSelf();_S(Object.assign(Object.assign({},t),{installReason:e.reason}))}catch(e){console.error(e)}t?(o&&console.log("start tracking of installation result"),function(e,t){r(this,void 0,void 0,(function*(){const n=nT();if((null==t?void 0:t.browserInstanceIdWasSet)&&e===chrome.runtime.OnInstalledReason.INSTALL){n&&console.log("track - installation successful"),AE(),n&&console.log("track - browser instance id creation"),FE();try{const e=yield bL();uS(e),n&&console.log("track - client state of website",e)}catch(e){pS(),console.error(e)}}else n&&console.log(`install reason: ${e}, no need to track browser instance id creation, install successful event or the web client state`);(null==t?void 0:t.installationIdWasSet)?(n&&console.log("track - installation id creation"),$E()):n&&console.log(`install reason: ${e}, no need to track installation id creation`)}))}(e.reason,t),ZS({action:`INSTALLATION_REASON_${e.reason}`})):o&&console.log("tracking of installation result not needed");try{yield EA(),e.reason===chrome.runtime.OnInstalledReason.UPDATE&&console.log(`Update from version ${e.previousVersion} to ${chrome.runtime.getManifest().version} was completed`);try{yield lH()}catch(e){aT("Error initializing auto login:",e),ZS({action:mT,error:e.message})}e.reason!==chrome.runtime.OnInstalledReason.INSTALL||oT()||(yield iT())||nJ(),chrome.contextMenus.removeAll((function(){return r(this,void 0,void 0,(function*(){const e=yield eJ();chrome.contextMenus.create({id:TH.translateWithDeepL,title:chrome.i18n.getMessage("right_click_menu_translate_with_deepl"),contexts:["selection"],enabled:!0}),chrome.contextMenus.create({id:TH.translateFullPage,title:chrome.i18n.getMessage("right_click_menu_translate_web_page"),contexts:["all"],enabled:e}),!Ro()&&chrome.sidePanel&&chrome.contextMenus.create({id:TH.captureAndTranslate,title:chrome.i18n.getMessage("right_click_menu_capture_and_translate"),contexts:["all"]})}))})),chrome.tabs.query({},(function(e){for(const t of e)yH(t)&&chrome.scripting.executeScript({target:{tabId:t},files:["build/content.js"]})}))}catch(e){Hy({errorCode:mT,errorMessage:e.message}),ZS({action:mT,error:e.message})}}))}chrome.storage.local.onChanged.addListener((()=>r(void 0,void 0,void 0,(function*(){const e=yield eJ();chrome.contextMenus.update(TH.translateFullPage,{enabled:e})}))));const nJ=()=>r(void 0,void 0,void 0,(function*(){const e=yield r(void 0,void 0,void 0,(function*(){var e;const t=yield PI();return null!==(e=null==t?void 0:t.skipOnboarding)&&void 0!==e&&e}));e||(Ro()?IH({payload:{destination:EH.firefox_first_run}}):IH({payload:{destination:EH.create_account}}))})),rJ={log:console.log,error:console.error,warn:console.warn,info:console.info,debug:console.debug},oJ=(e,t={})=>{if(!{IS_PROD:!0,BASE_URLS:{auth:"https://auth.deepl.com",legacyAuth:"https://www.deepl.com",dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.70.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.70.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.70.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.70.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiFree:"https://oneshot-free.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.www.deepl.com/v1",login:"https://www.deepl.com/auth/login",ssoLogin:"https://w.deepl.com/oidc/auth",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",allBrowserFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_5hVyvZAQlQOL5RQ",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chromewebstore.google.com/detail/deepl-translate-and-write/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-and-writ/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall",accountApi:"https://w.deepl.com/account?request_type=jsonrpc&il=en&method=getCurrentAccount",organizationApi:"https://w.deepl.com/organization",learnWhyGeoBlocked:"https://www.deepl.com/restricted-territories"},APP_VERSION:"1.70.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,IMPROVE_WRITING:!0,INLINE_HIGHLIGHTS:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!1,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,BATCH_TRANSLATE_HTML_REQUEST:!0,SIDE_PANEL_FIREFOX:!0}}.LOGGING.SEQ_ENABLED)return;const n=(n,...o)=>{try{let i="";try{for(const e of o)i+=JSON.stringify(e)+" "}catch(e){i=o.toString()}((e,t,...n)=>{r(void 0,[e,t,...n],void 0,(function*(e,t,n={}){try{return yield fetch("http://localhost:5579/api/events/raw",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Events:[{Timestamp:(new Date).toISOString(),Level:e,MessageTemplate:t,Properties:n}]})})}catch(e){}}))})(n,i.trim(),Object.assign({scope:e},t))}catch(e){}};console.log=(...e)=>{rJ.log(...e),n("Information",...e)},console.error=(...e)=>{rJ.error(...e),n("Error",...e)},console.warn=(...e)=>{rJ.warn(...e),n("Warning",...e)},console.info=(...e)=>{rJ.info(...e),n("Information",...e)},console.debug=(...e)=>{rJ.debug(...e),n("Debug",...e)}};var iJ;QS(),nT()&&oJ("background-script"),self.addEventListener("error",(function(e){const t=e.message||"";dT(t)&&e.preventDefault(),ZS({action:"error",error:t})})),self.addEventListener("unhandledrejection",(function(e){const t=e.reason&&e.reason.message||"";dT(t)&&e.preventDefault(),ZS({action:"error",error:t})})),Vp(Object.assign({},pT)),js("appContext",{location:"background"}),iJ=qv,chrome.storage.sync.get(["installationId","session",mo.auth.isLoggedIn,mo.auth.translatorServiceType,mo.auth.writeServiceType],(function(e){var t;iJ.setTag("internal_session_id",null===(t=null==e?void 0:e.session)||void 0===t?void 0:t.id),iJ.setTag("is_translator_pro",cT(e,Yn.TRANSLATOR)),iJ.setTag("is_write_pro",cT(e,Yn.WRITE)),iJ.setTag("is_logged_in",e.isLoggedIn)})),chrome.storage.local.get("browserInstanceId",(function(e){iJ.setTag("browser_instance_id",e.browserInstanceId)})),chrome.storage.onChanged.addListener((e=>{var t,n,r,o;return(null===(t=null==e?void 0:e.session)||void 0===t?void 0:t.newValue)&&iJ.setTag("internal_session_id",e.session.newValue.id),(null===(n=null==e?void 0:e.installationId)||void 0===n?void 0:n.newValue)&&iJ.setUser({id:e.installationId.newValue}),(null==e?void 0:e.browser_instance_id)&&iJ.setTag("browser_instance_id",e.browserInstanceId.newValue),!0!==(null===(r=e.isLoggedIn)||void 0===r?void 0:r.newValue)&&!1!==(null===(o=e.isLoggedIn)||void 0===o?void 0:o.newValue)||iJ.setTag("is_logged_in",e.isLoggedIn.newValue),e.translatorServiceType&&chrome.storage.local.get([mo.auth.isLoggedIn],(t=>iJ.setTag("is_translator_pro",cT(Object.assign(Object.assign({},t),{translatorServiceType:e.translatorServiceType.newValue}),Yn.TRANSLATOR)))),e.writeServiceType&&chrome.storage.local.get([mo.auth.isLoggedIn],(t=>iJ.setTag("is_write_pro",cT(Object.assign(Object.assign({},t),{writeServiceType:e.writeServiceType.newValue}),Yn.WRITE)))),!0})),console.info("Sentry initialised"),JL(),QH(),chrome.runtime.onInstalled.addListener(ZH),chrome.contextMenus.onClicked.addListener(BH),chrome.tabs.onActivated.addListener((function(e){return r(this,void 0,void 0,(function*(){yH((yield chrome.tabs.get(e.tabId)).url)&&chrome.tabs.sendMessage(e.tabId,{action:eb.dlTabChanged});const t=Ro();chrome.tabs.query({},(function(n){t&&(n=n.filter((e=>{var t;return!(null===(t=e.url)||void 0===t?void 0:t.startsWith("about:"))})));for(const t of n)chrome.tabs.sendMessage(t.id,{action:eb.dlChangeActiveTabStatus,payload:{isActive:t.id===e.tabId}})})),AL()}))}));return chrome.runtime.onConnect.addListener((function(e){var t,n;nT()&&console.log(`PORT connected to tab with id: ${null===(n=null===(t=e.sender)||void 0===t?void 0:t.tab)||void 0===n?void 0:n.id}, port name: ${e.name}`),e.onMessage.addListener(JH),e.onDisconnect.addListener(zH)})),chrome.runtime.onConnect.addListener((e=>{e.name===ho&&e.onDisconnect.addListener((()=>{var e;e={action:eb.dlShowPageLoadPopup},chrome.tabs.query({active:!0,currentWindow:!0},(t=>{chrome.tabs.sendMessage(t[0].id,e)})),ES({trigger:go})}))})),chrome.runtime.onMessage.addListener(FH),chrome.storage.onChanged.addListener(HH),chrome.commands.onCommand.addListener(WH),chrome.alarms.onAlarm.addListener(qH),chrome.runtime.onMessage.addListener((e=>("reload"===e&&chrome.tabs.query({active:!0}).then((()=>{chrome.runtime.reload(),chrome.tabs.reload()})),!1))),Ro()||chrome.webRequest.onBeforeSendHeaders.addListener((()=>{}),{urls:["<all_urls>"]},["requestHeaders","extraHeaders"]),BL(),lH(),e.AlternativesSegmentationType={ALTERNATIVES_SEGMENTATION_TYPE_UNSPECIFIED:0,ALTERNATIVES_SEGMENTATION_TYPE_WORD:1,ALTERNATIVES_SEGMENTATION_TYPE_SENTENCE:2},e.BrowserExtensionType={BROWSER_EXTENSION_TYPE_UNSPECIFIED:0,BROWSER_EXTENSION_TYPE_CHROME:1,BROWSER_EXTENSION_TYPE_EDGE:2,BROWSER_EXTENSION_TYPE_FIREFOX:3},e.CONTENT_PROCESS_MODE=wb,e.CONTEXT_MENU_ENTRIES=TH,e.CloseInlineHighlighterTriggerType=$T,e.CloseInputHighlighterTriggerType=VT,e.ContentProcessingModeType={CONTENT_PROCESSING_MODE_TYPE_UNSPECIFIED:0,CONTENT_PROCESSING_MODE_TYPE_TRANSLATE:1,CONTENT_PROCESSING_MODE_TYPE_WRITE:2},e.DictionaryErrorType={DICTIONARY_ERROR_TYPE_UNSPECIFIED:0,DICTIONARY_ERROR_TYPE_ENTRY_NOT_FOUND:1,DICTIONARY_ERROR_TYPE_SERVER_ERRORS:2},e.DictionaryStatusType={DICTIONARY_STATUS_TYPE_UNSPECIFIED:0,DICTIONARY_STATUS_TYPE_ENABLE:1,DICTIONARY_STATUS_TYPE_DISABLE:2},e.EVENT_TYPES=_P,e.ErrorCategory={ERROR_CATEGORY_UNSPECIFIED:0,ERROR_CATEGORY_LOGIN:1,ERROR_CATEGORY_AUTO_LOGIN:2,ERROR_CATEGORY_OCR:3,ERROR_CATEGORY_FPT:4},e.EventID=MT,e.ExtensionDisabledReason={EXTENSION_DISABLED_REASON_UNSPECIFIED:0,EXTENSION_DISABLED_REASON_PERMISSIONS_INCREASE:1,EXTENSION_DISABLED_REASON_UNKNOWN:2},e.ExtensionInstallType={EXTENSION_INSTALL_TYPE_REASON_UNSPECIFIED:0,EXTENSION_INSTALL_TYPE_NORMAL:1,EXTENSION_INSTALL_TYPE_DEVELOPMENT:2,EXTENSION_INSTALL_TYPE_ADMIN:3,EXTENSION_INSTALL_TYPE_SIDELOAD:4,EXTENSION_INSTALL_TYPE_OTHER:5},e.ExtensionOnInstalledReason={EXTENSION_ON_INSTALLED_REASON_UNSPECIFIED:0,EXTENSION_ON_INSTALLED_REASON_INSTALL:1,EXTENSION_ON_INSTALLED_REASON_UPDATE:2,EXTENSION_ON_INSTALLED_REASON_CHROME_UPDATE:3,EXTENSION_ON_INSTALLED_REASON_SHARED_MODULE_UPDATE:4},e.ExtensionOpenedFrom={EXTENSION_OPENED_FROM_UNSPECIFIED:0,EXTENSION_OPENED_FROM_EXTENSION_ICON:1,EXTENSION_OPENED_FROM_FPT_AUTO_INJECT:2},e.FptHideType={FPT_HIDE_TYPE_UNSPECIFIED:0,FPT_HIDE_TYPE_DOMAIN:1,FPT_HIDE_TYPE_LANG:2,FPT_HIDE_TYPE_FPT:3},e.FptPopupOpenDataTriggerType=GT,e.GmailActionType={GMAIL_ACTION_TYPE_UNSPECIFIED:0,GMAIL_ACTION_TYPE_READING_VIEW_TRANSLATE:1,GMAIL_ACTION_TYPE_COMPOSE_VIEW_TRANSLATE:2,GMAIL_ACTION_TYPE_COMPOSE_VIEW_IMPROVE:3},e.INTERNAL_PAGE_FILES=SH,e.INTERNAL_PAGE_KEYS=EH,e.InlineListenActionType={INLINE_LISTEN_ACTION_TYPE_UNSPECIFIED:0,INLINE_LISTEN_ACTION_TYPE_PLAY:1,INLINE_LISTEN_ACTION_TYPE_STOP:2},e.InlineListenContext={INLINE_LISTEN_CONTEXT_UNSPECIFIED:0,INLINE_LISTEN_CONTEXT_TRANSLATE:1,INLINE_LISTEN_CONTEXT_WRITE:2},e.InlineListenTextKind={INLINE_LISTEN_TEXT_KIND_UNSPECIFIED:0,INLINE_LISTEN_TEXT_KIND_SOURCE:1,INLINE_LISTEN_TEXT_KIND_TARGET:2},e.InlinePositionType={INLINE_POSITION_TYPE_UNSPECIFIED:0,INLINE_POSITION_TYPE_TOP:1,INLINE_POSITION_TYPE_RIGHT:2,INLINE_POSITION_TYPE_BOTTOM:3,INLINE_POSITION_TYPE_LEFT:4},e.ItaErrorType=WT,e.ItaParticipationErrorCodes={participant_evicted:"1000_participant_evicted"},e.ItaSessionConnectionErrorCodes=dP,e.ItaSessionEndedErrorCodes=cP,e.ItaSessionEventType=jT,e.ItaSessionSendingErrorCodes=pP,e.ItaSessionStartErrorCodes=uP,e.ItaSessionType=FT,e.ItaUserInteractionType=qT,e.LOGO_CACHE_MAX_AGE_MINUTES=jb,e.LandOnWebsiteType={LAND_ON_WEBSITE_TYPE_UNSPECIFIED:0,LAND_ON_WEBSITE_TYPE_DEEPL:1,LAND_ON_WEBSITE_TYPE_LINGUEE:2,LAND_ON_WEBSITE_TYPE_GOOGLE_TRANSLATE:3,LAND_ON_WEBSITE_TYPE_WORD_365:4,LAND_ON_WEBSITE_TYPE_POWER_POINT_365:5,LAND_ON_WEBSITE_TYPE_JIRA:6,LAND_ON_WEBSITE_TYPE_CONFLUENCE:7,LAND_ON_WEBSITE_TYPE_GMAIL:8},e.LoginTriggerType={LOGIN_TRIGGER_TYPE_UNSPECIFIED:0,LOGIN_TRIGGER_TYPE_USER:1,LOGIN_TRIGGER_TYPE_AUTOMATIC:2},e.LogoClickedFrom={LOGO_CLICKED_FROM_UNSPECIFIED:0,LOGO_CLICKED_FROM_DEFAULT_POPUP:1,LOGO_CLICKED_FROM_INJECTED_FPT_POPUP:2,LOGO_CLICKED_FROM_INLINE_POPUP:3},e.LogoutTriggerType={LOGOUT_TRIGGER_TYPE_UNSPECIFIED:0,LOGOUT_TRIGGER_TYPE_USER:1,LOGOUT_TRIGGER_TYPE_EXTENSION:2},e.NativeMessageAction={NATIVE_MESSAGE_ACTION_UNSPECIFIED:0,NATIVE_MESSAGE_ACTION_HANDSHAKE:1,NATIVE_MESSAGE_ACTION_TRANSLATE:2},e.NativeMessageSourceDesktopApp={NATIVE_MESSAGE_SOURCE_DESKTOP_APP_UNSPECIFIED:0,NATIVE_MESSAGE_SOURCE_DESKTOP_APP_WINDOWS:1,NATIVE_MESSAGE_SOURCE_DESKTOP_APP_MACOS:2},e.NicheIntegrationType={NICHE_INTEGRATION_TYPE_UNSPECIFIED:0,NICHE_INTEGRATION_TYPE_DEFAULT:1,NICHE_INTEGRATION_TYPE_GDOCS:2,NICHE_INTEGRATION_TYPE_WHATSAPPWEB:3,NICHE_INTEGRATION_TYPE_TWITTER:4,NICHE_INTEGRATION_TYPE_ZENDESK:5,NICHE_INTEGRATION_TYPE_GMAIL:6,NICHE_INTEGRATION_TYPE_GSLIDES:7,NICHE_INTEGRATION_TYPE_LINKEDIN:8,NICHE_INTEGRATION_TYPE_YOUTUBE:9},e.NotificationType={NOTIFICATION_TYPE_UNSPECIFIED:0,NOTIFICATION_TYPE_HINT_KEYBOARD_SHORTCUT:1,NOTIFICATION_TYPE_REQUIRE_LOGIN_POLICY:2},e.ONE_SHOT_TRANSLATE_MAXIMUM_TEXTS=100,e.OidcSessionType={OIDC_SESSION_TYPE_UNSPECIFIED:0,OIDC_SESSION_TYPE_NONE:1,OIDC_SESSION_TYPE_PRO:2,OIDC_SESSION_TYPE_FREE:3},e.OnboardingStepChangeTriggerType={ONBOARDING_STEP_CHANGE_TRIGGER_TYPE_UNSPECIFIED:0,ONBOARDING_STEP_CHANGE_TRIGGER_TYPE_OPEN_PAGE:1,ONBOARDING_STEP_CHANGE_TRIGGER_TYPE_BACK_BUTTON:2,ONBOARDING_STEP_CHANGE_TRIGGER_TYPE_NEXT_BUTTON:3,ONBOARDING_STEP_CHANGE_TRIGGER_TYPE_NAVIGATION:4},e.OriginStore={ORIGIN_STORE_UNSPECIFIED:0,ORIGIN_STORE_CHROME:1,ORIGIN_STORE_EDGE:2,ORIGIN_STORE_LOCAL:3,ORIGIN_STORE_FIREFOX:4},e.PERODIC_CODE_EXECUTION_NAMES=vH,e.PageID={PAGE_ID_UNSPECIFIED:0,PAGE_ID_PAGE_HUB:1},e.PermissionAction={PERMISSION_ACTION_UNSPECIFIED:0,PERMISSION_ACTION_GRANTED:1,PERMISSION_ACTION_DECLINED:2,PERMISSION_ACTION_REMOVED:3},e.PermissionType={PERMISSION_TYPE_UNSPECIFIED:0,PERMISSION_TYPE_NATIVE_MESSAGING:1},e.ReplacementType={REPLACEMENT_TYPE_UNSPECIFIED:0,REPLACEMENT_TYPE_TRANSLATION:1,REPLACEMENT_TYPE_IMPROVEMENT:2,REPLACEMENT_TYPE_INLINE_CORRECTION:3},e.ResponseCode={RESPONSE_CODE_UNSPECIFIED:0,RESPONSE_CODE_OK:1,RESPONSE_CODE_ERROR:2,RESPONSE_CODE_INVALID_MESSAGE:3,RESPONSE_CODE_OK_WITH_WARNINGS:4},e.RightClickTranslationType={RIGHT_CLICK_TRANSLATION_TYPE_UNSPECIFIED:0,RIGHT_CLICK_TRANSLATION_TYPE_INLINE:1,RIGHT_CLICK_TRANSLATION_TYPE_INPUT:2,RIGHT_CLICK_TRANSLATION_TYPE_SCREEN_CAPTURE_OCR:3,RIGHT_CLICK_TRANSLATION_TYPE_FPT:4},e.SETTINGS_PAGE_TAB={translator:"translator",write:"write",fpt:"full-page-translation"},e.ServiceLevel={SERVICE_LEVEL_UNSPECIFIED:0,SERVICE_LEVEL_FREE:1,SERVICE_LEVEL_PRO:2,SERVICE_LEVEL_NONE:3},e.SessionTriggerType={SESSION_TRIGGER_TYPE_UNSPECIFIED:0,SESSION_TRIGGER_TYPE_TRANSLATION:1,SESSION_TRIGGER_TYPE_LOGIN:2},e.SettingType={SETTING_TYPE_UNSPECIFIED:0,SETTING_TYPE_DISABLE_EVERYWHERE:1,SETTING_TYPE_DISABLE_PER_SITE:2,SETTING_TYPE_ENABLE_EVERYWHERE:3,SETTING_TYPE_ENABLE_PER_SITE:4},e.ShortcutType={SHORTCUT_TYPE_UNSPECIFIED:0,SHORTCUT_TYPE_TRIGGER_TRANSLATION:1,SHORTCUT_TYPE_SCREENSHOT_TRANSLATION:2},e.StatsigFeatureService=aR,e.StopVoiceOverTriggerType={STOP_VOICE_OVER_TRIGGER_TYPE_UNSPECIFIED:0,STOP_VOICE_OVER_TRIGGER_TYPE_ON_BUTTON_CLOSE:1,STOP_VOICE_OVER_TRIGGER_TYPE_ON_INLINE_MODAL_CLOSE:2},e.TranslationFormalityType={TRANSLATION_FORMALITY_TYPE_UNSPECIFIED:0,TRANSLATION_FORMALITY_TYPE_FORMAL:1,TRANSLATION_FORMALITY_TYPE_INFORMAL:2},e.TranslationTrigger={TRANSLATION_TRIGGER_UNSPECIFIED:0,TRANSLATION_TRIGGER_MANUAL:1,TRANSLATION_TRIGGER_AUTOMATIC:2,TRANSLATION_TRIGGER_INLINE:3,TRANSLATION_TRIGGER_INPUT:4,TRANSLATION_TRIGGER_INPUT_ALTERNATIVES:5,TRANSLATION_TRIGGER_SIDE_PANEL:6,TRANSLATION_TRIGGER_CUSTOMIZATION:7},e.URL_ACTIONS=Lo,e.URL_LIST=Po,e.UiFunction={UI_FUNCTION_UNSPECIFIED:0,UI_FUNCTION_INPUT_TRANSLATION:1,UI_FUNCTION_INLINE_TRANSLATION:2,UI_FUNCTION_FULL_PAGE_TRANSLATION:3},e.UiLocation={UI_LOCATION_UNSPECIFIED:0,UI_LOCATION_INPUT_TRANSLATION_TRIGGER_ICON:1,UI_LOCATION_INLINE_TRANSLATION_TRIGGER_ICON:2,UI_LOCATION_INLINE_TRANSLATION_SETTING_POPUP:3,UI_LOCATION_INPUT_TRANSLATION_SETTING_POPUP:4,UI_LOCATION_SETTINGS_PAGE_FPT:5,UI_LOCATION_SETTINGS_PAGE_READING:6,UI_LOCATION_SETTINGS_PAGE_WRITING:7,UI_LOCATION_FPT_HIDE_MODAL:8,UI_LOCATION_INPUT_TRANSLATION_SETTINGS_ICON:9,UI_LOCATION_INLINE_TRANSLATION_SETTINGS_ICON:10,UI_LOCATION_INPUT_TRANSLATION_READ_MORE_LINK:11,UI_LOCATION_INLINE_TRANSLATION_READ_MORE_LINK:12,UI_LOCATION_FPT_TRANSLATION_READ_MORE_LINK:13,UI_LOCATION_EXTENSION_HUB_TOGGLE_SWITCH:14,UI_LOCATION_HUB_CUSTOMIZE_SHORTCUT:15,UI_LOCATION_HUB_LOGIN_BUTTON:16,UI_LOCATION_HUB_UPGRADE_TO_PRO_LINK:17,UI_LOCATION_HUB_TRY_PRO_LINK:18,UI_LOCATION_SETTINGS_PAGE_CUSTOMIZE_SHORTCUT_BUTTON:19,UI_LOCATION_HUB_FPT_ENABLE_CHECKBOX:20,UI_LOCATION_HUB_FPT_DISABLE_CHECKBOX:21,UI_LOCATION_DEEPL_WRITE_TRIGGER_ICON:22,UI_LOCATION_HUB_VIEW_INTEGRATIONS:23,UI_LOCATION_HUB_CLOSE_CUSTOMIZATIONS_WIDGET:24,UI_LOCATION_GMAIL_ONBOARDING_POPUP:25,UI_LOCATION_GMAIL_ONBOARDING_ICON:26,UI_LOCATION_GMAIL_CHAR_LIMIT_POPUP_LOGIN:27,UI_LOCATION_GMAIL_FEEDBACK_SURVEY:28,UI_LOCATION_GSLIDES_FEEDBACK_SURVEY:29,UI_LOCATION_GSLIDES_CHAR_LIMIT_POPUP_LOGIN:30,UI_LOCATION_ZENDESK_TRY_PRO_LINK:31,UI_LOCATION_SETTINGS_PAGE_INTEGRATIONS:32,UI_LOCATION_ONBOARDING_SIGN_UP:33,UI_LOCATION_ONBOARDING_SKIP_SIGNUP:34,UI_LOCATION_ONBOARDING_LOGIN:35,UI_LOCATION_ONBOARDING_SEE_ALL_INTEGRATIONS:36,UI_LOCATION_INPUT_IMPROVE_TRIGGER_ICON:37,UI_LOCATION_ICON_TOGGLE_IN_HUB_TRANSLATOR:38,UI_LOCATION_ICON_TOGGLE_IN_HUB_WRITE:39,UI_LOCATION_MANAGE_ICON_SETTINGS:40,UI_LOCATION_WRITE_LANGUAGE_SWITCHED_IN_HUB:41,UI_LOCATION_WRITE_LANGUAGE_SWITCHED_IN_SETTINGS:42,UI_LOCATION_SIDE_PANEL_ICON_ON_WEBSITE:43,UI_LOCATION_HUB_ONBOARDING_LINK:44,UI_LOCATION_INLINE_SELECTION_TRANSLATE_ICON:45,UI_LOCATION_INLINE_SELECTION_WRITE_ICON:46,UI_LOCATION_INPUT_SELECTION_TRANSLATE_ICON:47,UI_LOCATION_INPUT_SELECTION_WRITE_ICON:48,UI_LOCATION_INLINE_SELECTION_TRIGGER_OFF_ICON:49,UI_LOCATION_INPUT_SELECTION_TRIGGER_OFF_ICON:50,UI_LOCATION_SIDE_PANEL_LOGIN_BUTTON:51,UI_LOCATION_SIDE_PANEL_SETTINGS_BUTTON:52,UI_LOCATION_SIDE_PANEL_LOGOUT_BUTTON:53,UI_LOCATION_SIDE_PANEL_UPGRADE_BUTTON:54,UI_LOCATION_SIDE_PANEL_TRANSLATOR_TAB:55,UI_LOCATION_SIDE_PANEL_TRANSLATOR_TARGET_LANG:56,UI_LOCATION_SIDE_PANEL_TRANSLATOR_SOURCE_LANG:57,UI_LOCATION_SIDE_PANEL_TRANSLATION_DIR_INDICATOR:58,UI_LOCATION_SIDE_PANEL_SOURCE_TEXT_FIELD:59,UI_LOCATION_SIDE_PANEL_TARGET_TEXT_FIELD:60,UI_LOCATION_SETTING_USE_ADVANCED_WINDOW_FOR_INPUT_FIELDS:61,UI_LOCATION_REVIEW_WINDOW_CLOSE_ICON:62,UI_LOCATION_REVIEW_WINDOW_TRANSLATE_ALTERNATIVES:63,UI_LOCATION_REVIEW_WINDOW_WRITE_ALTERNATIVES:64,UI_LOCATION_USER_PROFILE_SURVEY_CLOSE_BUTTON:65,UI_LOCATION_USER_PROFILE_SURVEY_REMIND_LATER_BUTTON:66,UI_LOCATION_USER_PROFILE_SURVEY_LAUNCH_BUTTON:67,UI_LOCATION_EXPERIENCE_FEEDBACK_AMAZING_BUTTON:68,UI_LOCATION_EXPERIENCE_FEEDBACK_NOT_GOOD_BUTTON:69,UI_LOCATION_FPT_TRANSLATION_POPUP_MENU_OPTION:70,UI_LOCATION_FPT_TRANSLATION_POPUP_OPEN_SETTINGS:71,UI_LOCATION_FPT_TRANSLATION_POPUP_CLOSE_BUTTON:72,UI_LOCATION_FPT_TRANSLATION_POPUP_SHOW_ORIGINAL:73,UI_LOCATION_FPT_TRANSLATION_POPUP_OPEN_SIDEBAR_BUTTON:74,UI_LOCATION_INLINE_TRANSLATION_TOOLBAR_TARGET_LANGUAGE_SELECTOR:75,UI_LOCATION_INLINE_TRANSLATION_WRITE_TOOLBAR_LANGUAGE_SELECTOR:76,UI_LOCATION_INPUT_TRANSLATION_SETTING_LANGUAGE_SELECTOR:77,UI_LOCATION_SETTINGS_PAGE_TRANSLATOR_READING_TARGET_LANGUAGE_SELECTOR:78,UI_LOCATION_SETTINGS_PAGE_TRANSLATOR_WRITING_TARGET_LANGUAGE_SELECTOR:79,UI_LOCATION_SETTINGS_PAGE_FULL_PAGE_TRANSLATION_TARGET_LANGUAGE_SELECTOR:80,UI_LOCATION_EXPERIENCE_FEEDBACK_CLOSE_BUTTON:81,UI_LOCATION_EXPERIENCE_FEEDBACK_REMIND_LATER_BUTTON:82,UI_LOCATION_EXPERIENCE_FEEDBACK_WRITE_REVIEW_BUTTON:83,UI_LOCATION_DOWNLOAD_LOGS_BUTTON:84,UI_LOCATION_SIDE_PANEL_SOURCE_TEXT_FIELD_OCR_ICON:85,UI_LOCATION_OCR_TRANSLATION_INSTRUCTIONS_OPEN_SHORTCUTS_SETTINGS_BUTTON:86,UI_LOCATION_SIDE_PANEL_VIEWPORT:87,UI_LOCATION_INPUT_INLINE_HIGHLIGHT:88,UI_LOCATION_SIDE_PANEL_ENABLE_INLINE_HIGHLIGHTS_BUTTON:89,UI_LOCATION_SIDE_PANEL_DISABLE_INLINE_HIGHLIGHTS_BUTTON:90,UI_LOCATION_SIDE_PANEL_ENABLE_DESKTOP_TRANSLATE_BUTTON:91,UI_LOCATION_SIDE_PANEL_DISABLE_DESKTOP_TRANSLATE_BUTTON:92,UI_LOCATION_DESKTOP_TRANSLATE_BUTTON_SHOW_PERMISSION_PROMPT:93,UI_LOCATION_DESKTOP_TRANSLATE_BUTTON_SHOW_APP_NOT_INSTALLED:94,UI_LOCATION_DESKTOP_TRANSLATE_BUTTON_SEND_TRANSLATION:95,UI_LOCATION_INLINE_HIGHLIGHT_DISMISS_BUTTON:96},e.UpgradeNotificationAction={UPGRADE_NOTIFICATION_ACTION_UNSPECIFIED:0,UPGRADE_NOTIFICATION_ACTION_LOGIN:1,UPGRADE_NOTIFICATION_ACTION_SIGNUP:2,UPGRADE_NOTIFICATION_ACTION_PRO_TRIAL:3},e.UpgradeNotificationType={UPGRADE_NOTIFICATION_TYPE_UNSPECIFIED:0,UPGRADE_NOTIFICATION_TYPE_ANONYMOUS_USER_LIMIT_EXCEEDED:1,UPGRADE_NOTIFICATION_TYPE_FREE_ACCOUNT_LIMIT_EXCEEDED:2,UPGRADE_NOTIFICATION_TYPE_WRITE_ANONYMOUS_USER_LIMIT_EXCEEDED:3,UPGRADE_NOTIFICATION_TYPE_WRITE_FREE_ACCOUNT_LIMIT_EXCEEDED:4},e.UserType={USER_TYPE_UNSPECIFIED:0,USER_TYPE_NOT_LOGGED_IN:1,USER_TYPE_LOGGED_IN_PRO:2,USER_TYPE_LOGGED_IN_FREE:3},e.WhatsappTranslatorType={WHATSAPP_TRANSLATOR_TYPE_UNSPECIFIED:0,WHATSAPP_TRANSLATOR_TYPE_MESSAGE:1,WHATSAPP_TRANSLATOR_TYPE_CHAT:2},e.WriteStyles={WRITE_STYLES_UNSPECIFIED:0,WRITE_STYLES_SIMPLE:1,WRITE_STYLES_BUSINESS:2,WRITE_STYLES_ACADEMIC:3,WRITE_STYLES_CASUAL:4,WRITE_STYLES_ENTHUSIASTIC:5,WRITE_STYLES_FRIENDLY:6,WRITE_STYLES_CONFIDENT:7,WRITE_STYLES_DIPLOMATIC:8},e.WriteTrigger={WRITE_TRIGGER_UNSPECIFIED:0,WRITE_TRIGGER_INLINE:1,WRITE_TRIGGER_INPUT:2,WRITE_TRIGGER_INPUT_ALTERNATIVES:3,WRITE_TRIGGER_CUSTOMIZATION:4,WRITE_TRIGGER_INLINE_HIGHLIGHTS:5},e.auth=uA,e.buildInternalUrl=AH,e.buildOneShotUrl=Bb,e.buildSurveySegmentationParams=hA,e.cacheClientState=qS,e.cacheCustomLogoBlob=zS,e.cacheExperiments=HS,e.checkCommandShortcuts=WR,e.checkFeatureFlagEnabled=XL,e.checkLimitsOrThrow=kb,e.clearLoginTimestamp=gI,e.commandListener=WH,e.connectDatabase=FS,e.createBatches=fA,e.createGlossaryTrackingInfo=Yb,e.createITATranslatorSession=_B,e.createITAWriteSession=KB,e.createInteractiveTranslation=bH,e.createInteractiveWrite=wH,e.deleteAuthTokens=aI,e.deletePortSettings=pB,e.deleteTranslationPortSettings=IP,e.deleteWritePortSettings=OP,e.determineEventType=e=>{if(e.textChangeOperation)return _P.TEXT_CHANGE;if(e.setPropertyOperation){if(mP in e.setPropertyOperation)return _P.TARGET_LANGUAGE_CHANGE;if(vP in e.setPropertyOperation)return _P.FORMALITY_CHANGE;if(TP in e.setPropertyOperation)return _P.WRITE_STYLE_CHANGE}},e.determineOneShotProcessor=tw,e.disposeTranslateSession=IB,e.disposeWriteSession=oH,e.dlSessionCookieName=dH,e.doesContextQualifyForAutologout=mH,e.efficientCleanupActionLogs=QS,e.executeImprovement=gw,e.executeTranslation=nw,e.fetchClientState=dA,e.fetchClientStateWeb=rb,e.fetchExperimentOverrides=UI,e.fetchExperiments=DI,e.fetchLanguageCodes=tP,e.fetchTermbases=mR,e.generateOriginatingSessionMapping=_H,e.getAccountCountryForSurvey=IA,e.getAccountID=TI,e.getAccountInfo=Fb,e.getActionLogs=KS,e.getActionLogsByAction=function(e){return r(this,void 0,void 0,(function*(){return PS||(yield FS()),PS.objectStoreNames.contains(kS)?new Promise(((t,n)=>{const r=PS.transaction(kS,"readonly").objectStore(kS).index("action").getAll(e);r.onsuccess=function(){t(r.result||[])},r.onerror=function(e){n(e)}})):[]}))},e.getActiveTermbase=e=>r(void 0,void 0,void 0,(function*(){if(uT(e)&&e.activeTermbaseId&&e.isGlossaryEnabled&&e.mode!==wb.WRITE){const[t]=yield mR(),n=Db(e.activeTermbaseId,t);if(n)for(let t of n.termDictionaries)if(t.languagePair===`${Jv(e.sourceLang)}>${Jv(e.targetLang)}`.toLowerCase())return{id:n.id,dictionaryId:t.id}}})),e.getActiveTranslator=mB,e.getActiveWriter=QB,e.getAllServiceLevels=AI,e.getAuthTokens=lI,e.getBrowserInstanceId=vI,e.getBrowserQueryParameterForSurvey=SA,e.getCachedClientState=BS,e.getCachedCustomLogoBlob=YS,e.getCachedExperiments=JS,e.getCharacterLimit=SI,e.getCleanupStats=tI,e.getClientState=AL,e.getClientStateWeb=bL,e.getCloseInputHighlighterTriggerType=ky,e.getCurrentExperiments=function(){return r(this,void 0,void 0,(function*(){try{const e=yield WS(US,xS);return e&&e.meta&&e.data?e.data:[]}catch(e){return[]}}))},e.getCustomLogo=Wb,e.getDapAlternativesSegmentationType=Sy,e.getDapApiConfig=BT,e.getDapApiExtensionOpenedFromId=zT,e.getDapApiFptPopupOpenTrigger=Uy,e.getDapApiInlinePositionType=ny,e.getDapApiLingueeError=JT,e.getDapApiLogoClickedFromId=YT,e.getDapApiNotificationType=XT,e.getDapApiSettingType=ty,e.getDapApiShortcutTypes=QT,e.getDapApiTranslationTriggerId=HT,e.getDapApiUiActionEventId=ZT,e.getDapApiUiFunctionality=ey,e.getDapApiUiLocation=KT,e.getDapApiWriteTriggerId=Oy,e.getDapContentProcessingModeType=yy,e.getDapErrorCategory=Ry,e.getDapExtensionDisabledReason=by,e.getDapExtensionInstallType=Ay,e.getDapExtensionOnInstalledReason=wy,e.getDapGmailActionType=vy,e.getDapInputReplacementType=Ny,e.getDapItaErrorType=Cy,e.getDapItaSessionEventType=Py,e.getDapItaSessionType=Ly,e.getDapItaUserInteractionType=xy,e.getDapLoginTrigger=hy,e.getDapLogoutTrigger=gy,e.getDapNicheIntegration=sy,e.getDapOnboardingExternalLink=ry,e.getDapOnboardingStepChangeTrigger=oy,e.getDapOriginStore=iy,e.getDapServiceLevel=my,e.getDapSessionType=Iy,e.getDapSessionTypeTrigger=fy,e.getDapUidCookieValue=bI,e.getDapUpgradeNotificationAction=Ey,e.getDapUpgradeNotificationType=Ty,e.getDapWhatsAppTranslator=_y,e.getDictionary=aL,e.getExperimentParameter=KL,e.getExperiments=MR,e.getExperimentsDataForTracking=yI,e.getExternalUrl=Co,e.getFeatureService=sR,e.getGlossaryProperties=hB,e.getHighlighterCloseTriggerType=Dy,e.getInlineListenContext=cy,e.getInlineListenTextKind=ly,e.getInstallationId=dI,e.getItaError=hP,e.getOrganizationId=RI,e.getRequestSize=_A,e.getSecondsSinceLastLogin=hI,e.getSessionType=uI,e.getSettings=nI,e.getStatsigClient=tR,e.getStatsigUserID=KN,e.getSupportedVoices=eL,e.getTermbases=Lb,e.getTranslateFormality=dy,e.getTranslationLanguages=NI,e.getTranslationSessionSettings=SP,e.getUILanguageForSurvey=AA,e.getUserInfo=_I,e.getUserState=FR,e.getUserType=EI,e.getUserTypeForSurvey=bA,e.getUsersCharacterLimit=wL,e.getWebUserInfoData=Wy,e.getWebsiteIdFromWebsite=ay,e.getWriteSessionSettings=wP,e.getWriteStyle=uy,e.handleJobs=Rb,e.handleSuccessfulGmailTranslationsCount=yL,e.handleSuccessfulGslidesTranslationsCount=SL,e.handleSuccessfulTranslationsCount=QR,e.handleSuccessfulZendeskTranslationsCount=KR,e.improveInputRequest=hw,e.initializeAutoLogin=lH,e.initializeStatsigClient=nR,e.isEligibleForChurnSurvey=yA,e.isItaGeoBlockedError=fP,e.isPayloadNecessaryForUIEvent=py,e.isProServiceLevel=II,e.isStatsigClientInitialized=function(){return void 0!==QN},e.isUserLoggedIn=cI,e.jsonrpc_composeMethodCallDict=jy,e.listenToCookieChanges=pH,e.listenToPerodicCodeExecution=qH,e.logAction=ZS,e.login=tb,e.loginRequest=GR,e.loginViaCookieExchange=fH,e.logout=nb,e.logoutRequest=$R,e.manipulateClientState=FL,e.manualCleanupActionLogs=eI,e.markLoginTimestamp=pI,e.messageListener=FH,e.messageListenerInner=jH,e.onAuthCookieAdded=gH,e.onAuthCookieRemoved=hH,e.onContextMenuClicked=BH,e.onInstalled=ZH,e.onPortDisconnect=zH,e.onStorageChanged=HH,e.openAllBrowserFeedbackSurvey=gA,e.openInternalPage=IH,e.openSidePanel=zR,e.parseReleaseGroupsFromString=ZL,e.performGDocsProcessContent=QL,e.performGDocsSplitText=fR,e.portListener=JH,e.processContent=Ob,e.processImprovement=uw,e.processJobsBatched=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=t.map(((e,n)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:n<t.length-1?[t[n+1].text]:[],raw_en_context_before:n>0?[t[n-1].text]:[],sentences:[Object.assign(Object.assign({},e),{id:n+1})]}))),o=fA(n,24576,(e=>JSON.stringify(e))),i=yield Promise.allSettled(o.map((t=>r(void 0,void 0,void 0,(function*(){const n=Object.assign(Object.assign({},e),{jobs:t});return yield Rb(n)})))));if(i.some((e=>"rejected"===e.status)))throw new Error("Failed to process all jobs");const a=i.filter((e=>"fulfilled"===e.status)).map((e=>e.value)),s=a[0];if(a.length>1)for(let e=1;e<a.length;++e){const t=a[e];s.result.translations.push(...t.result.translations)}return s})),e.processOAuthTokenSet=pA,e.protobufPackage="deepl.pb.analytics.browser_extension",e.qualifiesForExplicitLogin=cH,e.readData=WS,e.redirectToExternalURL=xo,e.refreshAccountState=HL,e.removeAccountInfo=OI,e.requestAlternatives=ML,e.requestDictionary=GI,e.resetExtensionActionIconToDefault=vA,e.resetGlossary=sI,e.runItaOneShot=Hb,e.scheduleStatsigInitialization=oR,e.selectTranslateAlternative=bB,e.selectWriteAlternative=iH,e.sendActionToCurrentTab=e=>{chrome.tabs.query({active:!0,currentWindow:!0},(function(t){chrome.tabs.sendMessage(t[0].id,e)}))},e.sendDAPAlternativeSelected=nS,e.sendDAPAlternativesEvent=QE,e.sendDAPBrowserInstanceIdCreated=FE,e.sendDAPCloseInlineHighlighter=wE,e.sendDAPCloseInputHighlighter=SE,e.sendDAPContentScriptErrorData=zy,e.sendDAPCustomizationEnabled=JE,e.sendDAPDeeplWriteEvent=jE,e.sendDAPDetectLanguage=iE,e.sendDAPDictionaryStatus=OE,e.sendDAPDisabledDictionaryHover=RE,e.sendDAPDocTransClick=tE,e.sendDAPErrorData=Hy,e.sendDAPExtensionInfo=_S,e.sendDAPExtensionOpened=Xy,e.sendDAPFPTHide=gE,e.sendDAPFTPBlockSizeExceeded=function(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_FPT_BLOCK_SIZE_EXCEEDED,fptBlockSizeExceededData:{translationData:{sourceLang:e.websiteLanguage,targetLang:e.targetLanguage,sourceLength:e.characterCount},domainName:e.domainName}})))}))},e.sendDAPFptPopupOpen=ES,e.sendDAPGDocsMaxCharExceededShown=DE,e.sendDAPGDocsMaxCharExceededTryProClicked=UE,e.sendDAPGDocsReplaceText=IE,e.sendDAPGlossaryEnabledOrDisabled=ZE,e.sendDAPGmailCharLimitReached=zE,e.sendDAPIconHover=_E,e.sendDAPInlineCopy=hE,e.sendDAPInlineDragStart=lE,e.sendDAPInlineHighlightsShown=vS,e.sendDAPInlineListen=fE,e.sendDAPInlinePositionChange=sE,e.sendDAPInlineSettingOpened=rE,e.sendDAPInputTranslationInjection=Yy,e.sendDAPInstallSuccess=AE,e.sendDAPInstallationIdCreated=$E,e.sendDAPItaSessionData=TS,e.sendDAPLandingOnSpecificWebsite=TE,e.sendDAPLingueeErrorData=LE,e.sendDAPLoggedIn=qE,e.sendDAPLoggedOut=BE,e.sendDAPLogin=xE,e.sendDAPLogoClicked=Ky,e.sendDAPLogout=kE,e.sendDAPNotificationViewed=Qy,e.sendDAPOnboardingModalShown=GE,e.sendDAPOnboardingOpenExternalPage=vE,e.sendDAPOnboardingStepChange=mE,e.sendDAPOpenDictionarySection=NE,e.sendDAPOpenInlineHighlighter=bE,e.sendDAPOpenInputHighlighter=EE,e.sendDAPRecommendToAFriendClick=nE,e.sendDAPReplaceInFieldInfo=mS,e.sendDAPRightClick=aE,e.sendDAPScreenCaptureErrorData=yS,e.sendDAPSeeAlternativesClicked=tS,e.sendDAPSessionStarted=WE,e.sendDAPSettingsChanged=oE,e.sendDAPShortcutUsed=Zy,e.sendDAPTrackAdsButtonClicked=iS,e.sendDAPTrackAdsShown=aS,e.sendDAPTrackDailyWebsiteUserLoginCheck=dS,e.sendDAPTrackExtensionInstallWithWebsiteUserLoginCheck=uS,e.sendDAPTrackIframeTranslationFailed=oS,e.sendDAPTrackIframeTranslationSuccessful=rS,e.sendDAPTrackLanguageDetectionForTextProcessing=eS,e.sendDAPTrackOcrTranslationInstructionsClosed=SS,e.sendDAPTrackUpgradeNotificationAction=KE,e.sendDAPTrackUpgradeNotificationClosed=XE,e.sendDAPTrackUpgradeNotificationDisplayed=YE,e.sendDAPTrackViewPortDimension=function(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_VIEW_PORT_DIMENSION,viewPortDimensionData:{uiLocation:KT(e.location),width:e.width,height:e.height}})))}))},e.sendDAPTrackWriteTextStylesApplied=lS,e.sendDAPTrackWriteTextStylesChanged=sS,e.sendDAPTrackWriteTextTonesChanged=cS,e.sendDAPTranslateAcceptOrUndoEvent=HE,e.sendDAPTranslationErrorData=Jy,e.sendDAPTranslationRequest=By,e.sendDAPTwitterTweetTranslationFailed=dE,e.sendDAPUILocationClicked=VE,e.sendDAPUiAction=eE,e.sendDAPVoiceOverStops=yE,e.sendDAPWhatsAppMessageTranslated=cE,e.sendDAPWhatsAppMessageTranslationFailed=uE,e.sendDAPYoutubeCommentTranslationFailed=pE,e.sendDAPZendeskCustomizationEvent=PE,e.sendDAPZendeskGlossaryConfigOpened=CE,e.sendDAPtrackSessionType=ME,e.sendDapFormalitySelected=gS,e.sendDapSidePanelOpened=hS,e.sendDapTrackGetWebsiteUserDataFailed=pS,e.sendEvent=TA,e.sendNotification=jR,e.sendSidePanelTranslatorTargetLangChanged=function(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_SIDE_PANEL_TRANSLATOR_TARGET_LANG_CHANGED,sidePanelLanguageChangeData:{lang:e}})))}))},e.sendUIInteractionSidePanel=function(e){return r(this,void 0,void 0,(function*(){return qy((t=>Object.assign(Object.assign({},t),{eventId:MT.EVENT_ID_UI_INTERACTION_SIDE_PANEL,sidePanelInteractionData:{uiLocation:KT(e.uiLocation),isSidePanelOpen:e.isSidePanelOpen}})))}))},e.sendUIInteractionSidePanelFails=fS,e.setAccountInfo=wI,e.setAuthTokens=iI,e.setBrowserInstanceId=mI,e.setExtensionActionIconFromCache=JL,e.setImageAsExtensionIcon=mA,e.setSidePanelAsDefault=BL,e.setUninstallUrl=EA,e.setUserInfoFromClientState=fI,e.shouldInformUser=gP,e.signUpRequest=VR,e.splitText=Nb,e.stopSpeech=tL,e.storageKeys=mo,e.storeActionLog=XS,e.storeTranslationLanguages=nP,e.testClassicApi=xL,e.textToSpeech=ZR,e.trackAlternativeSelected=UL,e.trackAlternativesEvent=IL,e.trackClickOnAdsButton=$L,e.trackCloseInlineHighlighter=iL,e.trackCloseInputHighlighter=oL,e.trackCustomizationEnabled=TL,e.trackDeeplWriteEvent=_L,e.trackDetectLanguage=vR,e.trackDictionaryStatus=sL,e.trackDisabledDictionaryHover=cL,e.trackDocTransClick=SR,e.trackExtensionOpenedEvent=yR,e.trackFptHide=RR,e.trackGDocsMaxCharExceededTryProClicked=gL,e.trackGDocsReplaceText=UR,e.trackGdocsMaxCharExceededShown=pL,e.trackGlossaryDisabled=PL,e.trackGlossaryEnabled=LL,e.trackGmailCharLimitReached=EL,e.trackIconHover=LR,e.trackIframeTranslationFailed=VL,e.trackIframeTranslationSuccessful=GL,e.trackInlineCopy=PR,e.trackInlineDragStart=NR,e.trackInlineListen=xR,e.trackInlinePositionChange=OR,e.trackInlineSettingsOpened=AR,e.trackInputTranslationInjection=TR,e.trackLandingOnWebsite=XR,e.trackLanguageDetectionForTextProcessing=kL,e.trackLingueeErrorData=dL,e.trackLogoClickedEvent=ER,e.trackOcrTranslationInstructionsClosed=zL,e.trackOnboardingModalShown=hL,e.trackOnboardingOpenExternalLink=DR,e.trackOnboardingStepChange=CR,e.trackOpenDictionarySection=lL,e.trackOpenInlineHighlighter=rL,e.trackOpenInputHighlighter=nL,e.trackRecommendToAFriendClick=IR,e.trackRightClick=wR,e.trackSeeAlternativesClicked=DL,e.trackSettingChanged=bR,e.trackTranslateAcceptOrUndoEvent=vL,e.trackUILocationClicked=fL,e.trackUiAction=BR,e.trackUpgradeNotificationAction=CL,e.trackUpgradeNotificationClosed=NL,e.trackUpgradeNotificationDisplayed=OL,e.trackUseOfShortcut=qR,e.trackVoiceOverStops=kR,e.trackWriteTextStylesApplied=WL,e.trackWriteTextStylesChanged=jL,e.trackWriteTextTonesChanged=qL,e.trackZendeskCustomizationEvent=uL,e.trackZendeskGlossaryOpened=RL,e.translateCapture=JR,e.translateGmailReceivedEmail=cw,e.translateHtmlRequest=rw,e.translateInlineRequest=pR,e.translateLinkedInPostRequest=lw,e.translateSelection=HR,e.translateTwitterTweetRequest=sw,e.translateWebPage=YR,e.translateWhatsAppMessageRequest=iw,e.translateWhatsAppMessagesRequest=aw,e.translateYouTubeCommentRequest=ow,e.translateZendeskInputRequest=hR,e.translateZendeskMessageRequest=_R,e.triggerEnforcedSsoAutologin=YL,e.triggerImproveInline=uR,e.triggerImproveInput=dR,e.triggerTranslateInline=lR,e.triggerTranslateInput=cR,e.updateDynamicRules=QH,e.updateGlossaryId=gB,e.updateITAFormality=yB,e.updateITASourceLanguage=TB,e.updateITATargetLanguage=vB,e.updateRequestedLanguage=eH,e.updateSession=oI,e.updateSourceText=rH,e.updateStyleVariant=tH,e.updateTranslationSessionSettings=EP,e.updateWriteSessionSettings=bP,e.writeData=jS,e}({});
//# sourceMappingURL=background.js.map
