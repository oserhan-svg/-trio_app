import{r as O,xa as y}from"./chunk-WDVXKZVL.js";import{d as D}from"./chunk-UD6KQFHW.js";import{c as b}from"./chunk-NJT27E6U.js";import{h as I,i as C}from"./chunk-N3C6FBKY.js";import{d as x}from"./chunk-BMC2QLGD.js";import{d as p,n as f,p as g}from"./chunk-MGLLPATV.js";import{a as F}from"./chunk-SFIUS6XB.js";import{He as P,bd as h}from"./chunk-JPCZ2XYS.js";import{Z as w,a as M,b as A}from"./chunk-TVPT7M2T.js";import{a as l,g as S,i as m,n as d}from"./chunk-WKJYWAXG.js";m();d();var t=S(M(),1);m();d();var H="_19n0krs0";var c=S(A(),1),V=h({days:3}),k=new F,Oi=l(()=>{let i=P(),{isOpen:s}=D(),{data:o,isReady:e}=f(p.AdditionalPermissions),{handleShowModalVisibility:n}=y(),a=e&&!o&&!s;return(0,t.useEffect)(()=>{a&&(n("additionalPermissions"),i.capture("allSitesPermissionsSeen",{data:{uiContext:"interstitial"}}))},[n,a,i]),null},"AdditionalPermissionsInterstitialVisibility");function Di(){let[i,s]=(0,t.useState)(null),[o,e]=(0,t.useState)(!1),{data:n,isReady:a}=f(p.AdditionalPermissions);(0,t.useEffect)(()=>{(async()=>{let r=await b(k);(!r||r&&Date.now()-r>V)&&e(!0)})()},[]),(0,t.useEffect)(()=>{I().then(r=>{s(r)})},[i]);let u=(0,t.useMemo)(()=>i===null?!1:!i,[i]);return{shouldShowAdditionalPermissionsInterstitial:a&&u&&!n&&o}}l(Di,"useAdditionalPermissionsInterstitial");var v=l(()=>{let{t:i}=w(),s=P(),{handleHideModalVisibility:o}=y(),e=g(p.AdditionalPermissions),n=(0,t.useCallback)(()=>{s.capture("allSitesPermissions",{data:{uiContext:"interstitial",oldValue:!1,newValue:!1,choice:"commandDontAllow"}}),e(),o("additionalPermissions")},[o,e,s]),a=(0,t.useCallback)(async()=>{let r=await C();s.capture("allSitesPermissions",{data:{uiContext:"interstitial",oldValue:!1,newValue:r,choice:"commandAllow"}}),e(),o("additionalPermissions")},[o,e,s]),u={icon:(0,c.jsx)("img",{className:H,src:"/images/additional-permissions/interstitial.webp"}),bodyTitle:i("interstitialAdditionalPermissionsTitle"),bodyDescription:i("interstitialAdditionalPermissionsSubtitle"),FooterComponent:l(()=>(0,c.jsx)(x,{primaryText:i("commandAllow"),onPrimaryClicked:a,secondaryText:i("commandDontAllow"),onSecondaryClicked:n}),"FooterComponent"),onDismiss:n};return(0,c.jsx)(O,{...u})},"AdditionalPermissionsInterstitial"),Hi=v;export{Oi as a,Di as b,v as c,Hi as d};
//# sourceMappingURL=chunk-ONUGDOXE.js.map
