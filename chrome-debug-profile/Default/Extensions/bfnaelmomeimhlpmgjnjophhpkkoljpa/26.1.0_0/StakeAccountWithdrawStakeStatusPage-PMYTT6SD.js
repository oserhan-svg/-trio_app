import{a as G}from"./chunk-EIFSRQVC.js";import{a as g}from"./chunk-WP7WOITY.js";import{d as V}from"./chunk-XWY35PVV.js";import{e as Q,f as U,g as q}from"./chunk-7CNQZ75Q.js";import"./chunk-JTOX4ZHH.js";import"./chunk-UD6KQFHW.js";import"./chunk-LTFPTLFB.js";import"./chunk-RXXBC6VZ.js";import"./chunk-R4VJOE5O.js";import"./chunk-DZZUCNXT.js";import"./chunk-N3C6FBKY.js";import{b as A}from"./chunk-YRW45WYY.js";import"./chunk-BMC2QLGD.js";import{db as f}from"./chunk-7677FZEB.js";import{P as K,aa as M}from"./chunk-MGLLPATV.js";import"./chunk-Z3O2IHPJ.js";import"./chunk-247XUEKC.js";import"./chunk-UA65TROS.js";import"./chunk-YJCG6GWC.js";import{o as O,wc as _}from"./chunk-FO7QPK6E.js";import"./chunk-CZNFNFNK.js";import"./chunk-RWWUDPHX.js";import{Wa as B,Xa as F,p as z,q as v}from"./chunk-KUSQMIXV.js";import{Vb as T,ga as N,ja as R,w as m}from"./chunk-JPCZ2XYS.js";import"./chunk-ZRKH4SQM.js";import{Ca as h,Z as H,a as et,b as P}from"./chunk-TVPT7M2T.js";import"./chunk-FNC6PQ53.js";import"./chunk-5QQLABHI.js";import{a as W,g as D,i as x,n as I}from"./chunk-WKJYWAXG.js";x();I();var i=D(et(),1);var e=D(P(),1),ot=W(r=>{let c={stakePubkey:r.stakeAccountPubkey,amount:r.amount,usdPerSol:r.usdPerSol,onClose:r.onClose},{t}=H(),{withdrawStake:d,needsLedgerApproval:l,txHash:n,confirmationStatus:s,isError:u,error:k,onDeny:a}=rt(c);if(l)return(0,e.jsx)(U,{ledgerAction:d,cancel:a});if(u){let o=k,S=o?.message,w=Q(o),p=o?.message.includes(v),E=o?.message.includes(z);return w?(0,e.jsx)(q,{ledgerActionError:o,onRetryClick:d,onCancelClick:a}):p||E?(0,e.jsx)(G,{onCancelClick:a}):(0,e.jsxs)(A,{icon:"error",title:t("stakeAccountWithdrawStakeWithdrawalFailed"),onClose:a,showButton:!!n,children:[(0,e.jsx)(f,{wordBreak:"break-word",color:h.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:S??t("stakeAccountWithdrawStakeWithdrawalFailedDescription")}),(0,e.jsx)(g,{txHash:n,children:t("stakeAccountWithdrawStakeViewTransaction")})]})}return s==="confirmed"||s==="finalized"?(0,e.jsxs)(A,{icon:"success",title:t("stakeAccountWithdrawStakeSolWithdrawn"),onClose:r.onClose,iconSize:"large",children:[(0,e.jsxs)(f,{wordBreak:"break-word",color:h.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:[t("stakeAccountWithdrawStakeSolWithdrawnDescription.part1"),(0,e.jsx)("br",{})," ",t("stakeAccountWithdrawStakeSolWithdrawnDescription.part2")]}),(0,e.jsx)(g,{txHash:n,children:t("stakeAccountWithdrawStakeViewTransaction")})]}):(0,e.jsxs)(A,{icon:"loading",title:t("stakeAccountWithdrawStakeWithdrawingSol"),onClose:r.onClose,iconSize:"large",children:[(0,e.jsx)(f,{wordBreak:"break-word",color:h.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:t("stakeAccountWithdrawStakeWithdrawingSolDescription")}),(0,e.jsx)(g,{txHash:n,children:t("stakeAccountWithdrawStakeViewTransaction")})]})},"StakeAccountWithdrawStakeStatusPage"),Ct=ot,rt=W(({onClose:r,...c})=>{let{data:t,isSuccess:d}=_(),{accountIdentifier:l,isLedgerAccount:n,solanaChainAddress:s,solanaPublicKey:u,connection:k,networkID:a}=(0,i.useMemo)(()=>{let Y=t?.identifier??"",C=(t?.addresses??[]).find(tt=>T.isSolanaNetworkID(tt.networkID)),Z=new m.PublicKey(C?.address??""),$=t?.type===O.Ledger,L=C?.networkID,j=B(F(L));return{accountIdentifier:Y,isLedgerAccount:$,solanaChainAddress:C,solanaPublicKey:Z,connection:j,networkID:L}},[t]),o=V(k),S=(0,i.useCallback)(()=>{o.mutate({...c,accountIdentifier:l,senderAddress:s,stakePubkey:new m.PublicKey(c.stakePubkey),authorizedPubkey:u})},[l,c,s,u,o]),w=K(),p=(0,i.useCallback)(()=>{w.denied({chainType:N.Solana,chainName:R.Solana,networkId:T.getSolanaNetworkIDValue(a),type:"withdraw"}),r()},[a,r,w]);(0,i.useEffect)(()=>{if(d){if(!t||!s)throw new Error("Selected account undefined when trying to perform stake transaction.");n||S()}},[d]);let b=o.data?.id,y=M(k,2e3,b),J=n&&(o.isIdle||o.isPending),X=y.data?.value?.confirmationStatus;return{withdrawStake:S,onDeny:p,needsLedgerApproval:J,txHash:b,confirmationStatus:X,isError:o.isError||y.isError,error:o.error||y.error}},"useWithdrawStakeOnMount");export{ot as StakeAccountWithdrawStakeStatusPage,Ct as default};
//# sourceMappingURL=StakeAccountWithdrawStakeStatusPage-PMYTT6SD.js.map
