import{a as J}from"./chunk-EIFSRQVC.js";import{a as D}from"./chunk-WP7WOITY.js";import"./chunk-XWY35PVV.js";import{e as Y,f as q,g as G}from"./chunk-7CNQZ75Q.js";import"./chunk-JTOX4ZHH.js";import"./chunk-UD6KQFHW.js";import"./chunk-LTFPTLFB.js";import"./chunk-RXXBC6VZ.js";import"./chunk-R4VJOE5O.js";import"./chunk-DZZUCNXT.js";import"./chunk-N3C6FBKY.js";import{b as y}from"./chunk-YRW45WYY.js";import"./chunk-BMC2QLGD.js";import{db as g}from"./chunk-7677FZEB.js";import{P as M,aa as V,t as _,va as Q}from"./chunk-MGLLPATV.js";import"./chunk-Z3O2IHPJ.js";import"./chunk-247XUEKC.js";import"./chunk-UA65TROS.js";import"./chunk-YJCG6GWC.js";import{o as O,wc as H}from"./chunk-FO7QPK6E.js";import"./chunk-CZNFNFNK.js";import"./chunk-RWWUDPHX.js";import{Wa as F,Xa as B,p as U,q as K}from"./chunk-KUSQMIXV.js";import{Vb as C,ga as N,ja as R,w as l}from"./chunk-JPCZ2XYS.js";import"./chunk-ZRKH4SQM.js";import{Ca as A,Z as z,a as oe,b as I}from"./chunk-TVPT7M2T.js";import"./chunk-FNC6PQ53.js";import"./chunk-5QQLABHI.js";import{a as b,g as v,i as x,n as L}from"./chunk-WKJYWAXG.js";x();L();var i=v(oe(),1);var e=v(I(),1),ae=b(a=>{let r={stakePubkey:a.stakeAccountPubkey,stakeAuthorityPubkey:a.stakeAuthorityPubkey,onClose:a.onClose},{t}=z(),{deactivateStake:u,needsLedgerApproval:k,txHash:s,confirmationStatus:c,isError:d,error:S,onDeny:n}=ne(r);if(k)return(0,e.jsx)(q,{ledgerAction:u,cancel:n});if(d){let o=S,m=o?.message,f=Y(o),h=o?.message.includes(K),T=o?.message.includes(U);return f?(0,e.jsx)(G,{ledgerActionError:o,onRetryClick:u,onCancelClick:n}):h||T?(0,e.jsx)(J,{onCancelClick:n}):(0,e.jsxs)(y,{icon:"error",title:t("stakeAccountDeactivateStakeUnstakingFailed"),onClose:n,iconSize:"large",children:[(0,e.jsx)(g,{wordBreak:"break-word",color:A.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:m??t("stakeAccountDeactivateStakeUnstakingFailedDescription")}),(0,e.jsx)(D,{txHash:s,children:t("stakeAccountDeactivateStakeViewTransaction")})]})}return c==="confirmed"||c==="finalized"?(0,e.jsxs)(y,{icon:"success",title:t("stakeAccountDeactivateStakeSolUnstaked"),onClose:a.onClose,iconSize:"large",children:[(0,e.jsx)(g,{wordBreak:"break-word",color:A.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:(0,e.jsxs)(_,{i18nKey:"stakeAccountDeactivateStakeSolUnstakedDescriptionInterpolated",children:["You will be able to withdraw your stake",(0,e.jsx)("br",{})," in the next couple of days once the stake account becomes inactive."]})}),(0,e.jsx)(D,{txHash:s,children:t("stakeAccountDeactivateStakeViewTransaction")})]}):(0,e.jsxs)(y,{icon:"loading",title:t("stakeAccountDeactivateStakeUnstakingSol"),onClose:a.onClose,iconSize:"large",children:[(0,e.jsx)(g,{wordBreak:"break-word",color:A.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:t("stakeAccountDeactivateStakeUnstakingSolDescription")}),(0,e.jsx)(D,{txHash:s,children:t("stakeAccountDeactivateStakeViewTransaction")})]})},"StakeAccountDeactivateStakeStatusPage"),ve=ae,ne=b(({onClose:a,...r})=>{let{data:t,isSuccess:u}=H(),{accountIdentifier:k,isLedgerAccount:s,solanaChainAddress:c,solanaPublicKey:d,connection:S,networkID:n}=(0,i.useMemo)(()=>{let Z=t?.identifier??"",w=(t?.addresses??[]).find(te=>C.isSolanaNetworkID(te.networkID)),$=new l.PublicKey(w?.address??""),j=t?.type===O.Ledger,E=w?.networkID,ee=F(B(E));return{accountIdentifier:Z,isLedgerAccount:j,solanaChainAddress:w,solanaPublicKey:$,connection:ee,networkID:E}},[t]),o=Q(S),m=(0,i.useCallback)(()=>{o.mutate({...r,accountIdentifier:k,senderAddress:c,stakePubkey:new l.PublicKey(r.stakePubkey),stakeAuthorityPubkey:new l.PublicKey(r.stakeAuthorityPubkey),authorizedPubkey:d})},[k,r,o,c,d]),f=M(),h=(0,i.useCallback)(()=>{f.denied({chainType:N.Solana,chainName:R.Solana,networkId:C.getSolanaNetworkIDValue(n),type:"undelegate"}),a()},[n,a,f]);(0,i.useEffect)(()=>{if(u){if(!t||!c)throw new Error("Selected account undefined when trying to perform stake transaction.");s||m()}},[u]);let P=o.data?.id,p=V(S,2e3,P),W=s&&(o.isIdle||o.isPending),X=p.data?.value?.confirmationStatus;return{deactivateStake:m,onDeny:h,needsLedgerApproval:W,txHash:P,confirmationStatus:X,isError:o.isError??p.isError,error:o.error??p.error}},"useDeactivateStakeOnMount");export{ae as StakeAccountDeactivateStakeStatusPage,ve as default};
//# sourceMappingURL=StakeAccountDeactivateStakeStatusPage-ET6YGQ7Z.js.map
