import{a as J}from"./chunk-EIFSRQVC.js";import{a as p}from"./chunk-WP7WOITY.js";import{c as U}from"./chunk-XWY35PVV.js";import{e as Y,f as q,g as G}from"./chunk-7CNQZ75Q.js";import"./chunk-JTOX4ZHH.js";import"./chunk-UD6KQFHW.js";import"./chunk-LTFPTLFB.js";import"./chunk-RXXBC6VZ.js";import"./chunk-R4VJOE5O.js";import"./chunk-DZZUCNXT.js";import"./chunk-N3C6FBKY.js";import{b as D}from"./chunk-YRW45WYY.js";import"./chunk-BMC2QLGD.js";import{db as A}from"./chunk-7677FZEB.js";import{P as V,aa as Q,t as _}from"./chunk-MGLLPATV.js";import"./chunk-Z3O2IHPJ.js";import"./chunk-247XUEKC.js";import"./chunk-UA65TROS.js";import"./chunk-YJCG6GWC.js";import{o as O,wc as H}from"./chunk-FO7QPK6E.js";import"./chunk-CZNFNFNK.js";import"./chunk-RWWUDPHX.js";import{Wa as F,Xa as M,p as K,q as B}from"./chunk-KUSQMIXV.js";import{Vb as b,ga as v,ja as R,w as u}from"./chunk-JPCZ2XYS.js";import"./chunk-ZRKH4SQM.js";import{Ca as f,Z as z,a as oe,b as N}from"./chunk-TVPT7M2T.js";import"./chunk-FNC6PQ53.js";import"./chunk-5QQLABHI.js";import{a as C,g as T,i as P,n as I}from"./chunk-WKJYWAXG.js";P();I();var i=T(oe(),1);var e=T(N(),1),ne=C(n=>{let s={stakePubkey:n.stakeAccountPubkey,votePubkey:n.voteAccountPubkey,onClose:n.onClose},{t}=z(),{delegateStake:c,onDeny:r,needsLedgerApproval:k,txHash:a,confirmationStatus:l,isError:d,error:S}=ae(s);if(k)return(0,e.jsx)(q,{ledgerAction:c,cancel:r});if(d){let o=S,g=o?.message,m=Y(o),y=o?.message.includes(B),E=o?.message.includes(K);return m?(0,e.jsx)(G,{ledgerActionError:o,onRetryClick:c,onCancelClick:r}):y||E?(0,e.jsx)(J,{onCancelClick:r}):(0,e.jsxs)(D,{icon:"error",title:t("stakeAccountDelegateStakeStakingFailed"),onClose:r,showButton:!!a,iconSize:"large",children:[(0,e.jsx)(A,{wordBreak:"break-word",color:f.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:g??t("stakeAccountDelegateStakeStakingFailedDescription")}),(0,e.jsx)(p,{txHash:a,children:t("stakeAccountDelegateStakeViewTransaction")})]})}return l==="confirmed"||l==="finalized"?(0,e.jsxs)(D,{icon:"success",title:t("stakeAccountDelegateStakeSolStaked"),onClose:n.onClose,iconSize:"large",children:[(0,e.jsx)(A,{wordBreak:"break-word",color:f.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:(0,e.jsxs)(_,{i18nKey:"stakeAccountDelegateStakeSolStakedDescriptionInterpolated",children:["Your SOL will begin earning rewards",(0,e.jsx)("br",{})," in the next couple of days once the stake account becomes active."]})}),(0,e.jsx)(p,{txHash:a,children:t("stakeAccountDelegateStakeViewTransaction")})]}):(0,e.jsxs)(D,{icon:"loading",title:t("stakeAccountDelegateStakeStakingSol"),onClose:n.onClose,iconSize:"large",children:[(0,e.jsx)(A,{wordBreak:"break-word",color:f.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:t("stakeAccountDelegateStakeStakingSolDescription")}),(0,e.jsx)(p,{txHash:a,children:t("stakeAccountDelegateStakeViewTransaction")})]})},"StakeAccountDelegateStakeStatusPage"),Te=ne,ae=C(({onClose:n,...s})=>{let{data:t,isSuccess:c}=H(),{accountIdentifier:r,isLedgerAccount:k,solanaChainAddress:a,solanaPublicKey:l,connection:d,networkID:S}=(0,i.useMemo)(()=>{let Z=t?.identifier??"",w=(t?.addresses??[]).find(te=>b.isSolanaNetworkID(te.networkID)),$=new u.PublicKey(w?.address??""),j=t?.type===O.Ledger,x=w?.networkID,ee=F(M(x));return{accountIdentifier:Z,isLedgerAccount:j,solanaChainAddress:w,solanaPublicKey:$,connection:ee,networkID:x}},[t]),o=U(d),g=(0,i.useCallback)(()=>{o.mutate({...s,accountIdentifier:r,senderAddress:a,stakePubkey:new u.PublicKey(s.stakePubkey),authorizedPubkey:l,votePubkey:new u.PublicKey(s.votePubkey)})},[r,s,o,a,l]),m=V(),y=(0,i.useCallback)(()=>{m.denied({chainType:v.Solana,chainName:R.Solana,networkId:b.getSolanaNetworkIDValue(S),type:"delegate"}),n()},[S,n,m]);(0,i.useEffect)(()=>{if(c){if(!t||!a)throw new Error("Selected account undefined when trying to perform stake transaction.");k||g()}},[c]);let L=o.data?.id,h=Q(d,2e3,L),W=k&&(o.isIdle||o.isPending),X=h.data?.value?.confirmationStatus;return{delegateStake:g,onDeny:y,needsLedgerApproval:W,txHash:L,confirmationStatus:X,isError:o.isError||h.isError,error:o.error||h.error}},"useDelegateStakeOnMount");export{ne as StakeAccountDelegateStakeStatusPage,Te as default};
//# sourceMappingURL=StakeAccountDelegateStakeStatusPage-EWSCQQFQ.js.map
