import{C as vs,H as As,Ha as xs,aa as Ss,f as ci,h as ui,n as cn,o as di,t as li,w as vt}from"./chunk-UA65TROS.js";import{Da as Es,E as ls,F as fs,Ka as si,T as ms,Tc as Ts,V as ps,aa as ys,ba as gs,j as $e,qa as ws,wc as Ie}from"./chunk-FO7QPK6E.js";import{$ as ur,$b as fa,$c as ze,$d as Na,Ac as ln,B as pi,C as Ls,Cb as oa,Cd as Sa,Dd as ge,Ed as xa,Fb as sa,Fd as Ca,Ib as aa,Ic as mr,J as Bs,K as Ks,Lb as lr,Ld as gr,Mc as Vt,N as Vs,Nb as ca,Nd as bi,O as Hs,P as qs,Pd as Pa,Qb as ua,R as It,Ra as js,Rb as da,S as or,Sa as At,T as sr,Ta as Ws,U as Ot,Va as Ut,W as ar,Wa as $s,Wb as dn,Wc as ba,X as cr,Xa as dr,Xc as wa,Y as Gs,Ya as zs,Yb as la,Yc as Ea,Z as Qs,Za as Ys,Zb as yi,_c as F,_d as mn,ac as ma,ad as pr,c as z,ca as hi,cc as pa,d as Rt,eb as Xs,g as me,hd as Ta,i as Cs,id as va,j as Ps,jc as ha,jd as Aa,k as ir,kd as hr,l as Ns,lb as Js,lc as ya,m as Ds,mb as Lt,n as fi,o as mi,oc as Bt,qd as fn,r as Ms,rb as Zs,s as Fs,sb as _s,sc as ga,sd as gi,t as ks,tb as ea,td as yr,u as Rs,ub as ta,v as Is,w as Os,wb as na,wc as Kt,x as un,xc as fr,y as Us,yb as ra,zb as ia}from"./chunk-KUSQMIXV.js";import{$b as Me,$d as us,A as on,Aa as wt,Ac as Z,B as $n,Bc as Jn,C as re,Cc as ni,Ec as _o,F as De,Fc as ri,G as zn,Gc as es,Hc as Zn,He as Re,Jc as ts,Lc as ns,Mc as rs,Pc as ne,Qc as V,Sb as Go,Tc as U,Ub as Qo,Vb as v,W as Ce,Xb as de,Yb as jo,Zb as Wo,_b as $o,_d as ii,a as Zd,ab as tl,ac as ie,b as Ft,bd as x,c as el,cc as ti,dc as Et,dd as is,fd as Tt,ge as nr,ha as qo,hd as Fe,he as ds,ja as He,ka as je,la as Yn,ld as _n,nc as zo,ne as oi,oc as Yo,od as er,oe as hs,pc as Xn,pd as os,pe as nl,qd as ss,rd as as,sd as ee,tc as Xo,td as cs,te as an,uc as Jo,ud as We,ue as bs,v as Ho,vc as kt,w as fe,wc as sn,xd as R,y as Wn,yc as Zo,yd as tr}from"./chunk-JPCZ2XYS.js";import{b as ei,d as Jd,t as Ko,u as Vo}from"./chunk-ZRKH4SQM.js";import{D as Qn,F as jn,Ja as ai,Ka as rr,Rb as rl,U as se,Z as ke,a as q,b as _d,d as dt,j as h,k as G,l as X,s as Gn}from"./chunk-TVPT7M2T.js";import{a as o,d as Ve,g as K,i as u,j as y,m as Buffer,n as d}from"./chunk-WKJYWAXG.js";var Fr=Ve(te=>{"use strict";u();d();Object.defineProperty(te,"__esModule",{value:!0});te.MULTIPLE_ACCOUNT_INFO_MAX=te.NAME_HOUSE_PREFIX=te.TLD_HOUSE_PREFIX=te.NFT_RECORD_PREFIX=te.TOKEN_METADATA_PROGRAM_ID=te.SPL_TOKEN_PROGRAM_ID=te.NAME_HOUSE_PROGRAM_ID=te.TLD_HOUSE_PROGRAM_ID=te.ANS_PROGRAM_ID=te.ORIGIN_TLD=te.MAIN_DOMAIN_PREFIX=void 0;var Nn=Ft();te.MAIN_DOMAIN_PREFIX="main_domain";te.ORIGIN_TLD="ANS";te.ANS_PROGRAM_ID=new Nn.PublicKey("ALTNSZ46uaAUU7XUV6awvdorLGqAsPwa9shm7h4uP2FK");te.TLD_HOUSE_PROGRAM_ID=new Nn.PublicKey("TLDHkysf5pCnKsVA4gXpNvmy7psXLPEu4LAdDJthT9S");te.NAME_HOUSE_PROGRAM_ID=new Nn.PublicKey("NH3uX6FtVE2fNREAioP7hm5RaozotZxeL6khU1EHx51");te.SPL_TOKEN_PROGRAM_ID=new Nn.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");te.TOKEN_METADATA_PROGRAM_ID=new Nn.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");te.NFT_RECORD_PREFIX="nft_record";te.TLD_HOUSE_PREFIX="tld_house";te.NAME_HOUSE_PREFIX="name_house";te.MULTIPLE_ACCOUNT_INFO_MAX=100});var $c=Ve(Y=>{"use strict";u();d();var Qf=Y&&Y.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:o(function(){return t[n]},"get")})}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),jf=Y&&Y.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Xe=Y&&Y.__decorate||function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(s=(i<3?a(s):i>3?a(t,n,s):a(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},Wf=Y&&Y.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&Qf(t,e,n);return jf(t,e),t},Gc=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Y,"__esModule",{value:!0});Y.deserializeUnchecked=Y.deserialize=Y.serialize=Y.BinaryReader=Y.BinaryWriter=Y.BorshError=Y.baseDecode=Y.baseEncode=void 0;var ft=Gc(ei()),Qc=Gc(Jd()),$f=Wf(Zd()),zf=typeof self.TextDecoder!="function"?$f.TextDecoder:self.TextDecoder,Yf=new zf("utf-8",{fatal:!0});function Xf(e){return typeof e=="string"&&(e=Buffer.from(e,"utf8")),Qc.default.encode(Buffer.from(e))}o(Xf,"baseEncode");Y.baseEncode=Xf;function Jf(e){return Buffer.from(Qc.default.decode(e))}o(Jf,"baseDecode");Y.baseDecode=Jf;var Xi=1024,ye=class extends Error{static{o(this,"BorshError")}constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};Y.BorshError=ye;var kr=class{static{o(this,"BinaryWriter")}constructor(){this.buf=Buffer.alloc(Xi),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(Xi)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new ft.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new ft.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new ft.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new ft.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(Xi)]),this.length+=t.length}writeString(t){this.maybeResize();let n=Buffer.from(t,"utf8");this.writeU32(n.length),this.writeBuffer(n)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,n){this.maybeResize(),this.writeU32(t.length);for(let r of t)this.maybeResize(),n(r)}toArray(){return this.buf.subarray(0,this.length)}};Y.BinaryWriter=kr;function Je(e,t,n){let r=n.value;n.value=function(...i){try{return r.apply(this,i)}catch(s){if(s instanceof RangeError){let a=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(a)>=0)throw new ye("Reached the end of buffer when deserializing")}throw s}}}o(Je,"handlingRangeError");var Ae=class{static{o(this,"BinaryReader")}constructor(t){this.buf=t,this.offset=0}readU8(){let t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){let t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){let t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){let t=this.readBuffer(8);return new ft.default(t,"le")}readU128(){let t=this.readBuffer(16);return new ft.default(t,"le")}readU256(){let t=this.readBuffer(32);return new ft.default(t,"le")}readU512(){let t=this.readBuffer(64);return new ft.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new ye(`Expected buffer length ${t} isn't within bounds`);let n=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,n}readString(){let t=this.readU32(),n=this.readBuffer(t);try{return Yf.decode(n)}catch(r){throw new ye(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){let n=this.readU32(),r=Array();for(let i=0;i<n;++i)r.push(t());return r}};Xe([Je],Ae.prototype,"readU8",null);Xe([Je],Ae.prototype,"readU16",null);Xe([Je],Ae.prototype,"readU32",null);Xe([Je],Ae.prototype,"readU64",null);Xe([Je],Ae.prototype,"readU128",null);Xe([Je],Ae.prototype,"readU256",null);Xe([Je],Ae.prototype,"readU512",null);Xe([Je],Ae.prototype,"readString",null);Xe([Je],Ae.prototype,"readFixedArray",null);Xe([Je],Ae.prototype,"readArray",null);Y.BinaryReader=Ae;function jc(e){return e.charAt(0).toUpperCase()+e.slice(1)}o(jc,"capitalizeFirstLetter");function Dn(e,t,n,r,i){try{if(typeof r=="string")i[`write${jc(r)}`](n);else if(r instanceof Array)if(typeof r[0]=="number"){if(n.length!==r[0])throw new ye(`Expecting byte array of length ${r[0]}, but got ${n.length} bytes`);i.writeFixedArray(n)}else if(r.length===2&&typeof r[1]=="number"){if(n.length!==r[1])throw new ye(`Expecting byte array of length ${r[1]}, but got ${n.length} bytes`);for(let s=0;s<r[1];s++)Dn(e,null,n[s],r[0],i)}else i.writeArray(n,s=>{Dn(e,t,s,r[0],i)});else if(r.kind!==void 0)switch(r.kind){case"option":{n==null?i.writeU8(0):(i.writeU8(1),Dn(e,t,n,r.type,i));break}default:throw new ye(`FieldType ${r} unrecognized`)}else Wc(e,n,i)}catch(s){throw s instanceof ye&&s.addToFieldPath(t),s}}o(Dn,"serializeField");function Wc(e,t,n){if(typeof t.borshSerialize=="function"){t.borshSerialize(n);return}let r=e.get(t.constructor);if(!r)throw new ye(`Class ${t.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([i,s])=>{Dn(e,i,t[i],s,n)});else if(r.kind==="enum"){let i=t[r.field];for(let s=0;s<r.values.length;++s){let[a,c]=r.values[s];if(a===i){n.writeU8(s),Dn(e,a,t[a],c,n);break}}}else throw new ye(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}o(Wc,"serializeStruct");function Zf(e,t,n=kr){let r=new n;return Wc(e,t,r),r.toArray()}o(Zf,"serialize");Y.serialize=Zf;function Mn(e,t,n,r){try{if(typeof n=="string")return r[`read${jc(n)}`]();if(n instanceof Array){if(typeof n[0]=="number")return r.readFixedArray(n[0]);if(typeof n[1]=="number"){let i=[];for(let s=0;s<n[1];s++)i.push(Mn(e,null,n[0],r));return i}else return r.readArray(()=>Mn(e,t,n[0],r))}return n.kind==="option"?r.readU8()?Mn(e,t,n.type,r):void 0:Ji(e,n,r)}catch(i){throw i instanceof ye&&i.addToFieldPath(t),i}}o(Mn,"deserializeField");function Ji(e,t,n){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(n);let r=e.get(t);if(!r)throw new ye(`Class ${t.name} is missing in schema`);if(r.kind==="struct"){let i={};for(let[s,a]of e.get(t).fields)i[s]=Mn(e,s,a,n);return new t(i)}if(r.kind==="enum"){let i=n.readU8();if(i>=r.values.length)throw new ye(`Enum index: ${i} is out of range`);let[s,a]=r.values[i],c=Mn(e,s,a,n);return new t({[s]:c})}throw new ye(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}o(Ji,"deserializeStruct");function _f(e,t,n,r=Ae){let i=new r(n),s=Ji(e,t,i);if(i.offset<n.length)throw new ye(`Unexpected ${n.length-i.offset} bytes after deserialized data`);return s}o(_f,"deserialize");Y.deserialize=_f;function em(e,t,n,r=Ae){let i=new r(n);return Ji(e,t,i)}o(em,"deserializeUnchecked");Y.deserializeUnchecked=em});var Rr=Ve($t=>{"use strict";u();d();var zc=$t&&$t.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return o(i,"adopt"),new(n||(n=Promise))(function(s,a){function c(m){try{l(r.next(m))}catch(p){a(p)}}o(c,"fulfilled");function f(m){try{l(r.throw(m))}catch(p){a(p)}}o(f,"rejected");function l(m){m.done?s(m.value):i(m.value).then(c,f)}o(l,"step"),l((r=r.apply(e,t||[])).next())})};Object.defineProperty($t,"__esModule",{value:!0});$t.NameRecordHeader=void 0;var Zi=Ft(),Fn=$c(),Dt=class e{static{o(this,"NameRecordHeader")}constructor(t){this.parentName=new Zi.PublicKey(t.parentName),this.nclass=new Zi.PublicKey(t.nclass),this.expiresAt=new Date(new Fn.BinaryReader(Buffer.from(t.expiresAt)).readU64().toNumber()*1e3),this.createdAt=new Date(new Fn.BinaryReader(Buffer.from(t.createdAt)).readU64().toNumber()*1e3),this.nonTransferable=t.nonTransferable[0]!==0;let n=45*24*60*60*1e3;this.isValid=new Fn.BinaryReader(Buffer.from(t.expiresAt)).readU64().toNumber()===0?!0:this.expiresAt.getTime()+n>new Date(Date.now()).getTime(),this.owner=this.isValid?new Zi.PublicKey(t.owner):void 0}static get byteSize(){return 200}static fromAccountAddress(t,n){var r;return zc(this,void 0,void 0,function*(){let i=yield t.getAccountInfo(n,"confirmed");if(!i)return;let s=(0,Fn.deserializeUnchecked)(this.schema,e,i.data);return s.data=(r=i.data)===null||r===void 0?void 0:r.subarray(this.byteSize),s})}static fromMultipileAccountAddresses(t,n){return zc(this,void 0,void 0,function*(){let r=yield t.getMultipleAccountsInfo(n),i=[];return r.forEach(s=>{if(!s){i.push(void 0);return}let a=this.fromAccountInfo(s);if(!a){i.push(void 0);return}i.push(a)}),i})}static fromAccountInfo(t){var n;let r=(0,Fn.deserializeUnchecked)(this.schema,e,t.data);return r.data=(n=t.data)===null||n===void 0?void 0:n.subarray(this.byteSize),r}pretty(){var t;let n=this.data.indexOf(0);return{parentName:this.parentName.toBase58(),owner:(t=this.owner)===null||t===void 0?void 0:t.toBase58(),nclass:this.nclass.toBase58(),expiresAt:this.expiresAt,createdAt:this.createdAt,nonTransferable:this.nonTransferable,isValid:this.isValid,data:this.isValid?this.data.subarray(0,n).toString():void 0}}};$t.NameRecordHeader=Dt;Dt.DISCRIMINATOR=[68,72,88,44,15,167,103,243];Dt.HASH_PREFIX="ALT Name Service";Dt.schema=new Map([[Dt,{kind:"struct",fields:[["discriminator",[8]],["parentName",[32]],["owner",[32]],["nclass",[32]],["expiresAt",[8]],["createdAt",[8]],["nonTransferable",[1]],["padding",[79]]]}]])});var _i=Ve(Pe=>{"use strict";u();d();var tm=Pe&&Pe.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:o(function(){return t[n]},"get")}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),nm=Pe&&Pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),rm=Pe&&Pe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&tm(t,e,n);return nm(t,e),t};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.tagBeet=Pe.Tag=void 0;var im=rm(pi()),Yc;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.ActiveRecord=1]="ActiveRecord",e[e.InactiveRecord=2]="InactiveRecord"})(Yc=Pe.Tag||(Pe.Tag={}));Pe.tagBeet=im.fixedScalarEnum(Yc)});var eo=Ve(ue=>{"use strict";u();d();var om=ue&&ue.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:o(function(){return t[n]},"get")}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),sm=ue&&ue.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Jc=ue&&ue.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&om(t,e,n);return sm(t,e),t},Xc=ue&&ue.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return o(i,"adopt"),new(n||(n=Promise))(function(s,a){function c(m){try{l(r.next(m))}catch(p){a(p)}}o(c,"fulfilled");function f(m){try{l(r.throw(m))}catch(p){a(p)}}o(f,"rejected");function l(m){m.done?s(m.value):i(m.value).then(c,f)}o(l,"step"),l((r=r.apply(e,t||[])).next())})};Object.defineProperty(ue,"__esModule",{value:!0});ue.nftRecordBeet=ue.NftRecord=ue.nftRecordDiscriminator=void 0;var Ir=Jc(pi()),Or=Jc(Ls()),Zc=_i();ue.nftRecordDiscriminator=[174,190,114,100,177,14,90,254];var Ur=class e{static{o(this,"NftRecord")}constructor(t,n,r,i,s,a){this.tag=t,this.bump=n,this.nameAccount=r,this.owner=i,this.nftMintAccount=s,this.tldHouse=a}static fromArgs(t){return new e(t.tag,t.bump,t.nameAccount,t.owner,t.nftMintAccount,t.tldHouse)}static fromAccountInfo(t,n=0){return e.deserialize(t.data,n)}static fromAccountAddress(t,n){return Xc(this,void 0,void 0,function*(){let r=yield t.getAccountInfo(n);if(r==null)throw new Error(`Unable to find NftRecord account at ${n}`);return e.fromAccountInfo(r,0)[0]})}static deserialize(t,n=0){return ue.nftRecordBeet.deserialize(t,n)}serialize(){return ue.nftRecordBeet.serialize(Object.assign({accountDiscriminator:ue.nftRecordDiscriminator},this))}static get byteSize(){return ue.nftRecordBeet.byteSize}static getMinimumBalanceForRentExemption(t,n){return Xc(this,void 0,void 0,function*(){return yield t.getMinimumBalanceForRentExemption(e.byteSize,n)})}static hasCorrectByteSize(t,n=0){return t.byteLength-n===e.byteSize}pretty(){return{tag:"Tag."+Zc.Tag[this.tag],bump:this.bump,nameAccount:this.nameAccount.toBase58(),owner:this.owner.toBase58(),nftMintAccount:this.nftMintAccount.toBase58(),tldHouse:this.tldHouse.toBase58()}}};ue.NftRecord=Ur;ue.nftRecordBeet=new Ir.BeetStruct([["accountDiscriminator",Ir.uniformFixedSizeArray(Ir.u8,8)],["tag",Zc.tagBeet],["bump",Ir.u8],["nameAccount",Or.publicKey],["owner",Or.publicKey],["nftMintAccount",Or.publicKey],["tldHouse",Or.publicKey]],Ur.fromArgs,"NftRecord")});var Lr=Ve(O=>{"use strict";u();d();var Ge=O&&O.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return o(i,"adopt"),new(n||(n=Promise))(function(s,a){function c(m){try{l(r.next(m))}catch(p){a(p)}}o(c,"fulfilled");function f(m){try{l(r.throw(m))}catch(p){a(p)}}o(f,"rejected");function l(m){m.done?s(m.value):i(m.value).then(c,f)}o(l,"step"),l((r=r.apply(e,t||[])).next())})};Object.defineProperty(O,"__esModule",{value:!0});O.splitDomainTld=O.getParsedAllDomainsNftAccountsByOwner=O.delay=O.performReverseLookupBatched=O.findMetadataAddress=O.findNameHouse=O.findTldHouse=O.findNftRecord=O.getMintOwner=O.findAllDomainsForTld=O.getParentAccountFromTldHouseAccountInfo=O.getTldFromTldHouseAccountInfo=O.getAllTld=O.findMainDomain=O.findOwnedNameAccountsForUser=O.getOriginNameAccountKey=O.getHashedName=O.getNameOwner=O.getNameAccountKeyWithBump=void 0;var Be=Ft(),am=ei(),cm=tl(),Te=Fr(),to=Rr(),um=_i(),dm=eo();function no(e,t,n){let r=[e,t?t.toBuffer():Buffer.alloc(32),n?n.toBuffer():Buffer.alloc(32)];return Be.PublicKey.findProgramAddressSync(r,Te.ANS_PROGRAM_ID)}o(no,"getNameAccountKeyWithBump");O.getNameAccountKeyWithBump=no;function lm(e,t,n){return Ge(this,void 0,void 0,function*(){let r=yield to.NameRecordHeader.fromAccountAddress(e,t),i=r.owner;if(!r.isValid)return;if(!n)return i;let[s]=ru(n),[a]=nu(t,s);return i?.toBase58()!==a.toBase58()?i:yield tu(e,a)})}o(lm,"getNameOwner");O.getNameOwner=lm;function ro(e){return Ge(this,void 0,void 0,function*(){let t=to.NameRecordHeader.HASH_PREFIX+e,n=(0,cm.sha256)(Buffer.from(t,"utf8")).slice(2);return Buffer.from(n,"hex")})}o(ro,"getHashedName");O.getHashedName=ro;function fm(e=Te.ORIGIN_TLD){return Ge(this,void 0,void 0,function*(){let t=yield ro(e),[n]=no(t,void 0,void 0);return n})}o(fm,"getOriginNameAccountKey");O.getOriginNameAccountKey=fm;function mm(e,t,n){return Ge(this,void 0,void 0,function*(){let r=[{memcmp:{offset:40,bytes:t.toBase58(),encoding:"base58"}}];return n&&r.push({memcmp:{offset:8,bytes:n.toBase58(),encoding:"base58"}}),(yield e.getProgramAccounts(Te.ANS_PROGRAM_ID,{filters:r})).map(s=>s.pubkey)})}o(mm,"findOwnedNameAccountsForUser");O.findOwnedNameAccountsForUser=mm;function pm(e){return Be.PublicKey.findProgramAddressSync([Buffer.from(Te.MAIN_DOMAIN_PREFIX),e.toBuffer()],Te.TLD_HOUSE_PROGRAM_ID)}o(pm,"findMainDomain");O.findMainDomain=pm;function hm(e){return Ge(this,void 0,void 0,function*(){let n=[{memcmp:{offset:0,bytes:[247,144,135,1,238,173,19,249],encoding:"binary"}}],r=yield e.getProgramAccounts(Te.TLD_HOUSE_PROGRAM_ID,{filters:n}),i=[];return r.map(({account:s})=>{let a=eu(s),c=_c(s);i.push({tld:c,parentAccount:a})}),i})}o(hm,"getAllTld");O.getAllTld=hm;function _c(e){var t;let r=(t=e?.data)===null||t===void 0?void 0:t.subarray(104),i=new am.BN(r?.subarray(0,4),"le").toNumber();return r.subarray(4,4+i).toString().replace(/\0.*$/g,"")}o(_c,"getTldFromTldHouseAccountInfo");O.getTldFromTldHouseAccountInfo=_c;function eu(e){var t;let r=(t=e?.data)===null||t===void 0?void 0:t.subarray(72,104);return new Be.PublicKey(r)}o(eu,"getParentAccountFromTldHouseAccountInfo");O.getParentAccountFromTldHouseAccountInfo=eu;function ym(e,t){return Ge(this,void 0,void 0,function*(){let n=[{memcmp:{offset:8,bytes:t.toBase58(),encoding:"base58"}}];return(yield e.getProgramAccounts(Te.ANS_PROGRAM_ID,{filters:n})).map(i=>i.pubkey)})}o(ym,"findAllDomainsForTld");O.findAllDomainsForTld=ym;function tu(e,t){return Ge(this,void 0,void 0,function*(){try{let n=yield dm.NftRecord.fromAccountAddress(e,t);if(n.tag!==um.Tag.ActiveRecord)return;let r=yield e.getTokenLargestAccounts(n.nftMintAccount),i=yield e.getParsedAccountInfo(r.value[0].address);return i.value.data?new Be.PublicKey(i.value.data.parsed.info.owner):void 0}catch{return}})}o(tu,"getMintOwner");O.getMintOwner=tu;function nu(e,t){return Be.PublicKey.findProgramAddressSync([Buffer.from(Te.NFT_RECORD_PREFIX),t.toBuffer(),e.toBuffer()],Te.NAME_HOUSE_PROGRAM_ID)}o(nu,"findNftRecord");O.findNftRecord=nu;function gm(e){return e=e.toLowerCase(),Be.PublicKey.findProgramAddressSync([Buffer.from(Te.TLD_HOUSE_PREFIX),Buffer.from(e)],Te.TLD_HOUSE_PROGRAM_ID)}o(gm,"findTldHouse");O.findTldHouse=gm;function ru(e){return Be.PublicKey.findProgramAddressSync([Buffer.from(Te.NAME_HOUSE_PREFIX),e.toBuffer()],Te.NAME_HOUSE_PROGRAM_ID)}o(ru,"findNameHouse");O.findNameHouse=ru;var bm=o(e=>Be.PublicKey.findProgramAddressSync([Buffer.from("metadata"),Te.TOKEN_METADATA_PROGRAM_ID.toBuffer(),e.toBuffer()],Te.TOKEN_METADATA_PROGRAM_ID)[0],"findMetadataAddress");O.findMetadataAddress=bm;function wm(e,t,n){return Ge(this,void 0,void 0,function*(){let r=t.map(a=>Ge(this,void 0,void 0,function*(){let c=yield ro(a.toBase58()),[f]=no(c,n,void 0);return f})),i=yield Promise.all(r);return(yield e.getMultipleAccountsInfo(i)).map(a=>a?.data.subarray(to.NameRecordHeader.byteSize,a?.data.length).toString())})}o(wm,"performReverseLookupBatched");O.performReverseLookupBatched=wm;function Em(e){return new Promise(t=>setTimeout(t,e))}o(Em,"delay");O.delay=Em;var Tm=o((e,t,n)=>Ge(void 0,void 0,void 0,function*(){let{value:r}=yield t.getParsedTokenAccountsByOwner(e,{programId:Te.SPL_TOKEN_PROGRAM_ID}),i=r.filter(a=>{var c,f,l,m,p,g,b,w,T,S;let I=(p=(m=(l=(f=(c=a.account)===null||c===void 0?void 0:c.data)===null||f===void 0?void 0:f.parsed)===null||l===void 0?void 0:l.info)===null||m===void 0?void 0:m.tokenAmount)===null||p===void 0?void 0:p.uiAmount;return((S=(T=(w=(b=(g=a.account)===null||g===void 0?void 0:g.data)===null||b===void 0?void 0:b.parsed)===null||w===void 0?void 0:w.info)===null||T===void 0?void 0:T.tokenAmount)===null||S===void 0?void 0:S.decimals)===0&&I===1}).map(a=>{var c,f,l,m;return(m=(l=(f=(c=a.account)===null||c===void 0?void 0:c.data)===null||f===void 0?void 0:f.parsed)===null||l===void 0?void 0:l.info)===null||m===void 0?void 0:m.mint});return yield vm(i,t,n)}),"getParsedAllDomainsNftAccountsByOwner");O.getParsedAllDomainsNftAccountsByOwner=Tm;var vm=o((e,t,n)=>Ge(void 0,void 0,void 0,function*(){let r=[];if(e.length>100)for(;e.length>0;){let a=e.splice(0,100).map(f=>(0,O.findMetadataAddress)(new Be.PublicKey(f))),c=yield t.getMultipleAccountsInfo(a);for(let f of c)if(f){let l=new Be.PublicKey(f.data.subarray(326,358));if(!!f.data.subarray(326,327)&&l.toString()===n.toString()){let p=f.data.subarray(66,101).toString().replace(/\u0000/g,"");r.push(p)}}}else{let a=e.map(f=>(0,O.findMetadataAddress)(new Be.PublicKey(f))),c=yield t.getMultipleAccountsInfo(a);for(let f of c)if(f){let l=new Be.PublicKey(f.data.subarray(326,358));if(!!f.data.subarray(326,327)&&l.toString()===n.toString()){let p=f.data.subarray(66,101).toString().replace(/\u0000/g,"");r.push(p)}}}return r}),"getOwnedDomains");function Am(e){let t=e.split("."),n="",r="",i="";return t.length===1?r=t[0]:(n="."+t[t.length-1],r=t[t.length-2],i=t.slice(0,t.length-2).join(".")),[n,r,i]}o(Am,"splitDomainTld");O.splitDomainTld=Am});var oo=Ve(oe=>{"use strict";u();d();var Sm=oe&&oe.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:o(function(){return t[n]},"get")}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),xm=oe&&oe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),io=oe&&oe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&Sm(t,e,n);return xm(t,e),t},iu=oe&&oe.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return o(i,"adopt"),new(n||(n=Promise))(function(s,a){function c(m){try{l(r.next(m))}catch(p){a(p)}}o(c,"fulfilled");function f(m){try{l(r.throw(m))}catch(p){a(p)}}o(f,"rejected");function l(m){m.done?s(m.value):i(m.value).then(c,f)}o(l,"step"),l((r=r.apply(e,t||[])).next())})};Object.defineProperty(oe,"__esModule",{value:!0});oe.mainDomainBeet=oe.MainDomain=oe.mainDomainDiscriminator=void 0;var Cm=io(Ft()),ou=io(Ls()),kn=io(pi());oe.mainDomainDiscriminator=[109,239,227,199,98,226,66,175];var Br=class e{static{o(this,"MainDomain")}constructor(t,n,r){this.nameAccount=t,this.tld=n,this.domain=r}static fromArgs(t){return new e(t.nameAccount,t.tld,t.domain)}static fromAccountInfo(t,n=0){return e.deserialize(t.data,n)}static fromAccountAddress(t,n,r){return iu(this,void 0,void 0,function*(){let i=yield t.getAccountInfo(n,r);if(i==null)throw new Error(`Unable to find MainDomain account at ${n}`);return e.fromAccountInfo(i,0)[0]})}static gpaBuilder(t=new Cm.PublicKey("TLDHkysf5pCnKsVA4gXpNvmy7psXLPEu4LAdDJthT9S")){return ou.GpaBuilder.fromStruct(t,oe.mainDomainBeet)}static deserialize(t,n=0){return oe.mainDomainBeet.deserialize(t,n)}serialize(){return oe.mainDomainBeet.serialize(Object.assign({accountDiscriminator:oe.mainDomainDiscriminator},this))}static byteSize(t){let n=e.fromArgs(t);return oe.mainDomainBeet.toFixedFromValue(Object.assign({accountDiscriminator:oe.mainDomainDiscriminator},n)).byteSize}static getMinimumBalanceForRentExemption(t,n,r){return iu(this,void 0,void 0,function*(){return yield n.getMinimumBalanceForRentExemption(e.byteSize(t),r)})}pretty(){return{nameAccount:this.nameAccount.toBase58(),tld:this.tld,domain:this.domain}}};oe.MainDomain=Br;oe.mainDomainBeet=new kn.FixableBeetStruct([["accountDiscriminator",kn.uniformFixedSizeArray(kn.u8,8)],["nameAccount",ou.publicKey],["tld",kn.utf8String],["domain",kn.utf8String]],Br.fromArgs,"MainDomain")});var ao=Ve(zt=>{"use strict";u();d();var su=zt&&zt.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return o(i,"adopt"),new(n||(n=Promise))(function(s,a){function c(m){try{l(r.next(m))}catch(p){a(p)}}o(c,"fulfilled");function f(m){try{l(r.throw(m))}catch(p){a(p)}}o(f,"rejected");function l(m){m.done?s(m.value):i(m.value).then(c,f)}o(l,"step"),l((r=r.apply(e,t||[])).next())})};Object.defineProperty(zt,"__esModule",{value:!0});zt.getDomainKey=void 0;var so=Lr(),Pm=o((e,t=!1)=>su(void 0,void 0,void 0,function*(){let n=e.split(".");if(n.length===3){let c="."+n[2],f=n[1],l=n[0],{pubkey:m}=yield ut(c),{pubkey:p}=yield ut(f,m),b=Buffer.from([t?1:0]).toString().concat(l),w=yield ut(b,p);return Object.assign(Object.assign({},w),{isSub:!0,parent:p})}else if(n.length===4&&t){let c="."+n[3],f=n[2],l=n[1],m=n[0],{pubkey:p}=yield ut(c),{pubkey:g}=yield ut(f,p),{pubkey:b}=yield ut("\0".concat(l),g),w=Buffer.from([1]).toString(),T=yield ut(w.concat(m),b);return Object.assign(Object.assign({},T),{isSub:!0,parent:g,isSubRecord:!0})}else if(n.length>4)throw new Error("Invalid derivation input");let r="."+n[1],{pubkey:i}=yield ut(r),s=n[0],a=yield ut(s,i);return Object.assign(Object.assign({},a),{isSub:!1,parent:void 0})}),"getDomainKey");zt.getDomainKey=Pm;var ut=o((e,t)=>su(void 0,void 0,void 0,function*(){t||(t=yield(0,so.getOriginNameAccountKey)());let n=yield(0,so.getHashedName)(e),[r]=yield(0,so.getNameAccountKeyWithBump)(n,void 0,t);return{pubkey:r,hashed:n}}),"_getNameAccount")});var cu=Ve(Yt=>{"use strict";u();d();var Ne=Yt&&Yt.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return o(i,"adopt"),new(n||(n=Promise))(function(s,a){function c(m){try{l(r.next(m))}catch(p){a(p)}}o(c,"fulfilled");function f(m){try{l(r.throw(m))}catch(p){a(p)}}o(f,"rejected");function l(m){m.done?s(m.value):i(m.value).then(c,f)}o(l,"step"),l((r=r.apply(e,t||[])).next())})};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.TldParser=void 0;var Ze=Ft(),Nm=ei(),Dm=oo(),co=Rr(),k=Lr(),mt=Fr(),au=ao(),uo=class{static{o(this,"TldParser")}constructor(t){this.connection=t}getAllUserDomains(t){return Ne(this,void 0,void 0,function*(){return typeof t=="string"&&(t=new Ze.PublicKey(t)),yield(0,k.findOwnedNameAccountsForUser)(this.connection,t,void 0)})}getAllUserDomainsFromTld(t,n){return Ne(this,void 0,void 0,function*(){let r="."+n,i=yield(0,k.getOriginNameAccountKey)(),s=yield(0,k.getHashedName)(r),[a]=(0,k.getNameAccountKeyWithBump)(s,void 0,i);return typeof t=="string"&&(t=new Ze.PublicKey(t)),yield(0,k.findOwnedNameAccountsForUser)(this.connection,t,a)})}getOwnerFromDomainTld(t){return Ne(this,void 0,void 0,function*(){let n=t.split("."),r=n[0],i="."+n[1],s=yield(0,k.getOriginNameAccountKey)(),a=yield(0,k.getHashedName)(i),[c]=(0,k.getNameAccountKeyWithBump)(a,void 0,s),f=yield(0,k.getHashedName)(r),[l]=(0,k.getNameAccountKeyWithBump)(f,void 0,c),[m]=(0,k.findTldHouse)(i);return yield(0,k.getNameOwner)(this.connection,l,m)})}getNameRecordFromDomainTld(t){return Ne(this,void 0,void 0,function*(){let n=t.split("."),r=n[0],i="."+n[1],s=yield(0,k.getOriginNameAccountKey)(),a=yield(0,k.getHashedName)(i),[c]=(0,k.getNameAccountKeyWithBump)(a,void 0,s),f=yield(0,k.getHashedName)(r),[l]=(0,k.getNameAccountKeyWithBump)(f,void 0,c);return yield co.NameRecordHeader.fromAccountAddress(this.connection,l)})}getTldFromParentAccount(t){var n;return Ne(this,void 0,void 0,function*(){typeof t=="string"&&(t=new Ze.PublicKey(t));let r=yield co.NameRecordHeader.fromAccountAddress(this.connection,t),i=yield this.connection.getAccountInfo(r?.owner),a=(n=i?.data)===null||n===void 0?void 0:n.subarray(104),c=new Nm.BN(a?.subarray(0,4),"le").toNumber();return a.subarray(4,4+c).toString().replace(/\0.*$/g,"")})}reverseLookupNameAccount(t,n){var r;return Ne(this,void 0,void 0,function*(){typeof t=="string"&&(t=new Ze.PublicKey(t)),typeof n=="string"&&(n=new Ze.PublicKey(n));let i=yield(0,k.getHashedName)(t.toString()),[s]=(0,k.getNameAccountKeyWithBump)(i,n,void 0),a=yield co.NameRecordHeader.fromAccountAddress(this.connection,s);return(r=a?.data)===null||r===void 0?void 0:r.toString()})}getMainDomain(t){return Ne(this,void 0,void 0,function*(){typeof t=="string"&&(t=new Ze.PublicKey(t));let[n]=(0,k.findMainDomain)(t);return yield Dm.MainDomain.fromAccountAddress(this.connection,n)})}getParsedAllUserDomainsFromTldUnwrapped(t,n){return Ne(this,void 0,void 0,function*(){let r="."+n,i=yield(0,k.getOriginNameAccountKey)(),s=yield(0,k.getHashedName)(r),[a]=(0,k.findTldHouse)(r),[c]=(0,k.getNameAccountKeyWithBump)(s,void 0,i);typeof t=="string"&&(t=new Ze.PublicKey(t));let f=yield(0,k.findOwnedNameAccountsForUser)(this.connection,t,c),l=[];for(let m=0;m<f.length;m+=mt.MULTIPLE_ACCOUNT_INFO_MAX){yield(0,k.delay)(100);let p=Math.min(m+mt.MULTIPLE_ACCOUNT_INFO_MAX,f.length),g=f.slice(m,p),w=(yield(0,k.performReverseLookupBatched)(this.connection,g,a)).map((T,S)=>({nameAccount:g[S],domain:T+r}));w.length>0&&w.sort((T,S)=>T.domain.localeCompare(S.domain,void 0,{numeric:!0,sensitivity:"base"})),l.push(...w)}return l})}getParsedAllUserDomainsFromTld(t,n){return Ne(this,void 0,void 0,function*(){let r="."+n,i=yield(0,k.getOriginNameAccountKey)(),s=yield(0,k.getHashedName)(r),[a]=(0,k.findTldHouse)(r),[c]=(0,k.getNameAccountKeyWithBump)(s,void 0,i);typeof t=="string"&&(t=new Ze.PublicKey(t));let f=yield(0,k.findOwnedNameAccountsForUser)(this.connection,t,c),l=[],p=(yield(0,k.getParsedAllDomainsNftAccountsByOwner)(t,this.connection,(0,k.findNameHouse)(a)[0])).map(b=>b+r),g=yield Promise.all(p.map(b=>Ne(this,void 0,void 0,function*(){return{nameAccount:(yield(0,au.getDomainKey)(b)).pubkey,domain:b}})));l.push(...g);for(let b=0;b<f.length;b+=mt.MULTIPLE_ACCOUNT_INFO_MAX){yield(0,k.delay)(100);let w=Math.min(b+mt.MULTIPLE_ACCOUNT_INFO_MAX,f.length),T=f.slice(b,w),I=(yield(0,k.performReverseLookupBatched)(this.connection,T,a)).map((Q,L)=>({nameAccount:T[L],domain:Q+r}));l.push(...I)}return l.length>0&&l.sort((b,w)=>b.domain.localeCompare(w.domain,void 0,{numeric:!0,sensitivity:"base"})),l})}getParsedAllUserDomainsUnwrapped(t){return Ne(this,void 0,void 0,function*(){let n=yield(0,k.getAllTld)(this.connection),r=[];typeof t=="string"&&(t=new Ze.PublicKey(t));for(let{parentAccount:i,tld:s}of n){let a=s.toString(),[c]=(0,k.findTldHouse)(a),f=yield(0,k.findOwnedNameAccountsForUser)(this.connection,t,i);for(let l=0;l<f.length;l+=mt.MULTIPLE_ACCOUNT_INFO_MAX){yield(0,k.delay)(100);let m=Math.min(l+mt.MULTIPLE_ACCOUNT_INFO_MAX,f.length),p=f.slice(l,m),b=(yield(0,k.performReverseLookupBatched)(this.connection,p,c)).map((w,T)=>({nameAccount:p[T],domain:w+a}));r.push(...b)}}return r.length>0&&r.sort((i,s)=>i.domain.localeCompare(s.domain,void 0,{numeric:!0,sensitivity:"base"})),r})}getParsedAllUserDomains(t){return Ne(this,void 0,void 0,function*(){let n=yield(0,k.getAllTld)(this.connection),r=[];typeof t=="string"&&(t=new Ze.PublicKey(t));for(let{parentAccount:i,tld:s}of n){let a=s.toString(),[c]=(0,k.findTldHouse)(a),f=yield(0,k.findOwnedNameAccountsForUser)(this.connection,t,i),m=(yield(0,k.getParsedAllDomainsNftAccountsByOwner)(t,this.connection,(0,k.findNameHouse)(c)[0])).map(g=>g+a),p=yield Promise.all(m.map(g=>Ne(this,void 0,void 0,function*(){return{nameAccount:(yield(0,au.getDomainKey)(g)).pubkey,domain:g}})));r.push(...p);for(let g=0;g<f.length;g+=mt.MULTIPLE_ACCOUNT_INFO_MAX){yield(0,k.delay)(100);let b=Math.min(g+mt.MULTIPLE_ACCOUNT_INFO_MAX,f.length),w=f.slice(g,b),S=(yield(0,k.performReverseLookupBatched)(this.connection,w,c)).map((I,Q)=>({nameAccount:w[Q],domain:I+a}));r.push(...S)}}return r.length>0&&r.sort((i,s)=>i.domain.localeCompare(s.domain,void 0,{numeric:!0,sensitivity:"base"})),r})}};Yt.TldParser=uo});var uu=Ve(Rn=>{"use strict";u();d();Object.defineProperty(Rn,"__esModule",{value:!0});Rn.Record=void 0;var Mm;(function(e){e.IPFS="IPFS",e.ARWV="ARWV",e.SOL="SOL",e.ETH="ETH",e.BTC="BTC",e.LTC="LTC",e.DOGE="DOGE",e.Email="email",e.Url="url",e.Discord="discord",e.Github="github",e.Reddit="reddit",e.Twitter="twitter",e.Telegram="telegram",e.Pic="pic",e.SHDW="SHDW",e.POINT="POINT"})(Mm=Rn.Record||(Rn.Record={}))});var du=Ve(xe=>{"use strict";u();d();var Fm=xe&&xe.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:o(function(){return t[n]},"get")}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),pt=xe&&xe.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Fm(t,e,n)};Object.defineProperty(xe,"__esModule",{value:!0});pt(Lr(),xe);pt(Fr(),xe);pt(cu(),xe);pt(Rr(),xe);pt(oo(),xe);pt(eo(),xe);pt(ao(),xe);pt(uu(),xe)});u();d();u();d();u();d();var Da=o(e=>{let{accountIdentifier:t,autoConfirmEnabled:n=!1,trustedAppsByAccount:r}=e;if(!t||!r)return;let i=Object.values(r),s=[],a=[];n?(i.forEach(f=>{f.autoConfirm&&vs(f.autoConfirm)?s.push(f):a.push(f)}),s.sort((f,l)=>(l.autoConfirm?.sessionStartTime??0)-(f.autoConfirm?.sessionStartTime??0))):a=i;let c=Es(a.map(f=>{let l=f.lastConnectedTimestamp??0;return{timestamp:l,data:{...f,lastConnectedTimestamp:l}}}));return{autoConfirmEnabledApps:s,timeBucketedApps:c}},"prepareTrustedAppsSections");function Ma(e){return e.map(t=>({lastConnectedTimestamp:t.createdAtMs,expiryTimestamp:t.expiresAtMs,dappMeta:{appUrl:t.origin,imageUrl:t.imageUrl,title:t.title,appId:t.appId}}))}o(Ma,"mapAppPermissionsToTrustedApps");u();d();var Fa=o((e,t)=>{if(!t||e.autoConfirm?.sessionStartTime===void 0||e.autoConfirm?.maxSessionDuration===void 0)return;if(e.expiryTimestamp)return e.expiryTimestamp?si(new Date(e.expiryTimestamp)):void 0;let n=new Date(e.autoConfirm?.sessionStartTime+e.autoConfirm?.maxSessionDuration*1e3);return si(n)},"getTrustedAppRowUntilValue");u();d();var il={...Tt(cn.EmojiSkinTone,[...vt.emojiSkinTone()]),...Tt(cn.IsAnalyticsOptedOut,[...vt.isAnalyticsOptedOut()]),...Tt(tr.UserExplorerPreferenceV2,[...vt.preferredExplorers()]),...Tt(cn.SelectedCurrency,[...vt.selectedCurrency()]),...Tt(tr.UserRecentAddresses,[...vt.recentAddresses()],As()),...Tt(tr.UserSavedAddresses,[...vt.savedAddresses()])};u();d();var ol=0;function D(e,t){let n=`atom${++ol}`,r={toString(){return(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?r.read=e:(r.init=e,r.read=sl,r.write=al),t&&(r.write=t),r}o(D,"atom");function sl(e){return e(this)}o(sl,"defaultRead");function al(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}o(al,"defaultWrite");var ka=o((e,t)=>e.unstable_is?e.unstable_is(t):t===e,"isSelfAtom"),Ei=o(e=>"init"in e,"hasInitialValue"),wi=o(e=>!!e.write,"isActuallyWritableAtom"),wr=new WeakMap,Ti=o(e=>{var t;return vi(e)&&!((t=wr.get(e))!=null&&t[1])},"isPendingPromise"),cl=o((e,t)=>{let n=wr.get(e);if(n)n[1]=!0,n[0].forEach(r=>r(t));else if((import.meta.env?import.meta.env.MODE:void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},"cancelPromise"),ul=o(e=>{if(wr.has(e))return;let t=[new Set,!1];wr.set(e,t);let n=o(()=>{t[1]=!0},"settle");e.then(n,n),e.onCancel=r=>{t[0].add(r)}},"patchPromiseForCancelability"),vi=o(e=>typeof e?.then=="function","isPromiseLike"),Ra=o(e=>"v"in e||"e"in e,"isAtomStateInitialized"),br=o(e=>{if("e"in e)throw e.e;if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},"returnAtomValue"),Ia=o((e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},"addPendingPromiseToDependency"),dl=o((e,t,n,r)=>{var i;if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&n===e)throw new Error("[Bug] atom cannot depend on itself");t.d.set(n,r.n),Ti(t.v)&&Ia(e,t.v,r),(i=r.m)==null||i.t.add(e)},"addDependency"),ll=Symbol.for("JOTAI.EXPERIMENTAL.FLUSHSTOREHOOK"),Oa=o((...e)=>{let[t,n,r,i,s,a]=e,c=o(A=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!A)throw new Error("Atom is undefined or null");let E=t(A);return E||(E={d:new Map,p:new Set,n:0},n(A,E),s?.(A,Ke)),E},"ensureAtomState"),f=new WeakMap,l=new Map,m=new Set,p=new Set,g=o(()=>{var A;let E=[],C=o(P=>{try{P()}catch(M){E.push(M)}},"call");do{(A=Ke[ll])==null||A.call(Ke);let P=new Set,M=P.add.bind(P);l.forEach(N=>{var H;return(H=N.m)==null?void 0:H.l.forEach(M)}),l.clear(),m.forEach(M),m.clear(),p.forEach(M),p.clear(),P.forEach(C),l.size&&Q()}while(l.size||m.size||p.size);if(E.length)throw E[0]},"flushCallbacks"),b=o((A,E,C)=>{let P="v"in E,M=E.v,N=Ti(E.v)?E.v:null;if(vi(C)){ul(C);for(let H of E.d.keys())Ia(A,C,c(H));E.v=C}else E.v=C;delete E.e,(!P||!Object.is(M,E.v))&&(++E.n,N&&cl(N,C))},"setAtomStateValueOrPromise"),w=o(A=>{var E;let C=c(A);if(Ra(C)&&(C.m&&f.get(A)!==C.n||Array.from(C.d).every(([J,_])=>w(J).n===_)))return C;C.d.clear();let P=!0,M=o(()=>{C.m&&(B(A,C),Q(),g())},"mountDependenciesIfAsync"),N=o(J=>{if(ka(A,J)){let Se=c(J);if(!Ra(Se))if(Ei(J))b(J,Se,J.init);else throw new Error("no atom init");return br(Se)}let _=w(J);try{return br(_)}finally{dl(A,C,J,_),P||M()}},"getter"),H,$,ce={get signal(){return H||(H=new AbortController),H.signal},get setSelf(){return(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!wi(A)&&console.warn("setSelf function cannot be used with read-only atom"),!$&&wi(A)&&($=o((...J)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&P&&console.warn("setSelf function cannot be called in sync"),!P)return W(A,...J)},"setSelf")),$}};try{let J=r(A,N,ce);return b(A,C,J),vi(J)&&((E=J.onCancel)==null||E.call(J,()=>H?.abort()),J.then(M,M)),C}catch(J){return delete C.v,C.e=J,++C.n,C}finally{P=!1}},"readAtomState"),T=o(A=>br(w(A)),"readAtom"),S=o(A=>{var E;let C=new Map;for(let P of((E=A.m)==null?void 0:E.t)||[]){let M=c(P);M.m&&C.set(P,M)}for(let P of A.p)C.set(P,c(P));return C},"getMountedOrPendingDependents"),I=o(A=>{let E=[A];for(;E.length;){let C=E.pop();for(let[P,M]of S(C))f.has(P)||(f.set(P,M.n),E.push(M))}},"invalidateDependents"),Q=o(()=>{var A;let E=[],C=new WeakSet,P=new WeakSet,M=Array.from(l);for(;M.length;){let[N,H]=M[M.length-1];if(P.has(N)){M.pop();continue}if(C.has(N)){f.get(N)===H.n?E.push([N,H,H.n]):(f.delete(N),l.set(N,H)),P.add(N),M.pop();continue}C.add(N);for(let[$,ce]of S(H))C.has($)||M.push([$,ce])}for(let N=E.length-1;N>=0;--N){let[H,$,ce]=E[N],J=!1;for(let _ of $.d.keys())if(_!==H&&l.has(_)){J=!0;break}J&&(w(H),B(H,$),ce!==$.n&&(l.set(H,$),(A=$.u)==null||A.call($))),f.delete(H)}},"recomputeInvalidatedAtoms"),L=o((A,...E)=>{let C=!0,P=o(N=>br(w(N)),"getter"),M=o((N,...H)=>{var $;let ce=c(N);try{if(ka(A,N)){if(!Ei(N))throw new Error("atom not writable");let J=ce.n,_=H[0];b(N,ce,_),B(N,ce),J!==ce.n&&(l.set(N,ce),($=ce.u)==null||$.call(ce),I(ce));return}else return L(N,...H)}finally{C||(Q(),g())}},"setter");try{return i(A,P,M,...E)}finally{C=!1}},"writeAtomState"),W=o((A,...E)=>{try{return L(A,...E)}finally{Q(),g()}},"writeAtom"),B=o((A,E)=>{var C;if(E.m&&!Ti(E.v)){for(let[P,M]of E.d)if(!E.m.d.has(P)){let N=c(P);ve(P,N).t.add(A),E.m.d.add(P),M!==N.n&&(l.set(P,N),(C=N.u)==null||C.call(N),I(N))}for(let P of E.m.d||[])if(!E.d.has(P)){E.m.d.delete(P);let M=it(P,c(P));M?.t.delete(A)}}},"mountDependencies"),ve=o((A,E)=>{var C;if(!E.m){w(A);for(let P of E.d.keys())ve(P,c(P)).t.add(A);if(E.m={l:new Set,d:new Set(E.d.keys()),t:new Set},(C=E.h)==null||C.call(E),wi(A)){let P=E.m,M=o(()=>{let N=!0,H=o((...$)=>{try{return L(A,...$)}finally{N||(Q(),g())}},"setAtom");try{let $=a(A,H);$&&(P.u=()=>{N=!0;try{$()}finally{N=!1}})}finally{N=!1}},"processOnMount");p.add(M)}}return E.m},"mountAtom"),it=o((A,E)=>{var C;if(E.m&&!E.m.l.size&&!Array.from(E.m.t).some(P=>{var M;return(M=c(P).m)==null?void 0:M.d.has(A)})){let P=E.m.u;P&&m.add(P),delete E.m,(C=E.h)==null||C.call(E);for(let M of E.d.keys()){let N=it(M,c(M));N?.t.delete(A)}return}return E.m},"unmountAtom"),Ke={get:T,set:W,sub:o((A,E)=>{let C=c(A),M=ve(A,C).l;return M.add(E),g(),()=>{M.delete(E),it(A,C),g()}},"subscribeAtom"),unstable_derive:o(A=>Oa(...A(...e)),"unstable_derive")};return Ke},"buildStore"),fl=o(e=>{let t=new Set,n,r=0,i=e.unstable_derive((...c)=>{let[f,l,,m]=c;return n=f,c[1]=o(function(g,b){l(g,b);let w=b.h;b.h=()=>{w?.(),b.m?t.add(g):t.delete(g)}},"devSetAtomState"),c[3]=o(function(g,b,w,...T){return r?w(g,...T):m(g,b,w,...T)},"devAtomWrite"),c}),s=i.set;return Object.assign(i,{dev4_get_internal_weak_map:o(()=>({get:o(c=>{let f=n(c);if(!(!f||f.n===0))return f},"get")}),"dev4_get_internal_weak_map"),dev4_get_mounted_atoms:o(()=>t,"dev4_get_mounted_atoms"),dev4_restore_atoms:o(c=>{s({read:o(()=>null,"read"),write:o((l,m)=>{++r;try{for(let[p,g]of c)Ei(p)&&m(p,g)}finally{--r}},"write")})},"dev4_restore_atoms")})},"deriveDevStoreRev4"),Ai=o(()=>{let e=new WeakMap,t=Oa(n=>e.get(n),(n,r)=>e.set(n,r).get(n),(n,...r)=>n.read(...r),(n,...r)=>n.write(...r),(n,...r)=>{var i;return(i=n.unstable_onInit)==null?void 0:i.call(n,...r)},(n,...r)=>{var i;return(i=n.onMount)==null?void 0:i.call(n,...r)});return(import.meta.env?import.meta.env.MODE:void 0)!=="production"?fl(t):t},"createStore"),pn,Ua=o(()=>(pn||(pn=Ai(),(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=pn),globalThis.__JOTAI_DEFAULT_STORE__!==pn&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),pn),"getDefaultStore");u();d();var pe=K(q(),1);var Ba=(0,pe.createContext)(void 0),Ka=o(e=>{let t=(0,pe.useContext)(Ba);return e?.store||t||Ua()},"useStore"),Eg=o(({children:e,store:t})=>{let n=(0,pe.useRef)(void 0);return!t&&!n.current&&(n.current=Ai()),(0,pe.createElement)(Ba.Provider,{value:t||n.current},e)},"Provider"),xi=o(e=>typeof e?.then=="function","isPromiseLike"),Va=o(e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},"attachPromiseMeta"),ml=pe.default.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(Va(e),e)}),Si=new WeakMap,La=o(e=>{let t=Si.get(e);return t||(t=new Promise((n,r)=>{let i=e,s=o(f=>l=>{i===f&&n(l)},"onFulfilled"),a=o(f=>l=>{i===f&&r(l)},"onRejected"),c=o(f=>{"onCancel"in f&&typeof f.onCancel=="function"&&f.onCancel(l=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&l===f)throw new Error("[Bug] p is not updated even after cancelation");xi(l)?(Si.set(l,t),i=l,l.then(s(l),a(l)),c(l)):n(l)})},"registerCancelHandler");e.then(s(e),a(e)),c(e)}),Si.set(e,t)),t},"createContinuablePromise");function be(e,t){let n=Ka(t),[[r,i,s],a]=(0,pe.useReducer)(l=>{let m=n.get(e);return Object.is(l[0],m)&&l[1]===n&&l[2]===e?l:[m,n,e]},void 0,()=>[n.get(e),n,e]),c=r;(i!==n||s!==e)&&(a(),c=n.get(e));let f=t?.delay;if((0,pe.useEffect)(()=>{let l=n.sub(e,()=>{if(typeof f=="number"){let m=n.get(e);xi(m)&&Va(La(m)),setTimeout(a,f);return}a()});return a(),l},[n,e,f]),(0,pe.useDebugValue)(c),xi(c)){let l=La(c);return ml(l)}return c}o(be,"useAtomValue");function hn(e,t){let n=Ka(t);return(0,pe.useCallback)((...i)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...i)},[n,e])}o(hn,"useSetAtom");function Tg(e,t){return[be(e,t),hn(e,t)]}o(Tg,"useAtom");u();d();var pl=h.object({data:h.string(),from:h.string(),to:h.string()}),hl=h.object({transaction:pl});async function yl({caip19:e,amount:t,owner:n}){let r=await re.api().post("/tokens/v1/unwrap",{owner:n,caip19:e,amount:t.toNumber()}),i=hl.safeParse(r.data);if(!i.success){let{error:s}=i;throw U.captureError(s,V.Fungibles),new fn(`Failed to get unwrap transaction: ${s.message}`)}return i.data.transaction}o(yl,"getUnwrapTransaction");var gl=o(({caip19:e,amount:t,owner:n})=>R({gcTime:wa.Medium,staleTime:Ea.Never,enabled:n!==""&&t.isGreaterThan(0),queryKey:ge.unwrapTransaction({caip19:e,amount:t,owner:n}),async queryFn(){return await yl({caip19:e,amount:t,owner:n})}}),"useGetUnwrapTransaction");u();d();u();d();u();d();u();d();u();d();var Ha;(function(e){e[e.Every1Second=1e3]="Every1Second",e[e.Every5Seconds=5e3]="Every5Seconds",e[e.Every10Seconds=1e4]="Every10Seconds",e[e.Every30Seconds=3e4]="Every30Seconds",e[e.Every1Minute=6e4]="Every1Minute",e[e.Every5Minutes=3e5]="Every5Minutes"})(Ha||(Ha={}));var St;(function(e){e.Always="always",e.Online="online",e.OfflineFirst="offlineFirst"})(St||(St={}));var Oe=Symbol("array"),Ue=Symbol("record");u();d();var bl=Object.entries,wl=Array.isArray,he=class e{static{o(this,"ValidatorDef")}kind;mask;_optional;_nullable;_nullish;_shapeKey=void 0;_shape;subEntityPaths=void 0;typenameField=void 0;typenameValue=void 0;idField=void 0;values=void 0;_methodsFactory=void 0;_methods=void 0;_entityConfig=void 0;constructor(t,n,r,i=void 0){this.kind=t,this.mask=n,this._shape=r,this.values=i}static cloneWith(t,n,r=void 0){let i=new e(t.kind,n|t.mask,t._shape,r);return i.subEntityPaths=t.subEntityPaths,i.values=t.values,i.typenameField=t.typenameField,i.typenameValue=t.typenameValue,i.idField=t.idField,i._methodsFactory=t._methodsFactory,i._methods=t._methods,i._entityConfig=t._entityConfig,i}reifyShape(){if(this._shapeKey===void 0)switch(this.kind){case 5:{let t=this._shape();this._shape=qa(this,t),this._methodsFactory&&!this._methods&&(this._methods=this._methodsFactory());break}case 0:this._shape=qa(this,this._shape);break;case 1:this._shape=Cl(this,this._shape);break;case 3:case 4:{let t=this._shape,n;t instanceof e?(n=t.shapeKey,t.mask&3072&&(this.mask|=2048)):t instanceof st?n=Z(Array.from(t)):n=Z(t),this._shapeKey=Z([this.kind,this.mask,this.values,n]);break}}}get shape(){return this.reifyShape(),this._shape}get methods(){return this.reifyShape(),this._methods}get shapeKey(){return this.reifyShape(),this._shapeKey}set shapeKey(t){this._shapeKey=t>>>0}get optional(){return this._optional===void 0&&(this._optional=e.cloneWith(this,1)),this._optional}get nullable(){return this._nullable===void 0&&(this._nullable=e.cloneWith(this,2)),this._nullable}get nullish(){return this._nullish===void 0&&(this._nullish=e.cloneWith(this,3)),this._nullish}extend(t,n){if(this.kind!==5&&this.kind!==0)throw new Error("extend() can only be called on Entity or Object types");if(this.kind===5){let r=t,i=this._methodsFactory,s=new e(5,this.mask,()=>{let a=this.shape,c=r();for(let f of Object.keys(c))if(f in a)throw new Error(`Cannot extend: field '${f}' already exists in type definition`);return{...a,...c}});return(i||n)&&(s._methodsFactory=()=>{let a=i?i():{},c=n?n():{};return{...a,...c}}),s._entityConfig=this._entityConfig,s}else{this.reifyShape();let r=this._shape,i=t;for(let s of Object.keys(i))if(s in r)throw new Error(`Cannot extend: field '${s}' already exists in type definition`);return new e(0,this.mask,{...r,...i})}}},st=class extends Set{static{o(this,"CaseInsensitiveSet")}lowercaseMap;constructor(t){super(t),this.lowercaseMap=new Map;for(let n of t)if(typeof n=="string"){let r=n.toLowerCase(),i=this.lowercaseMap.get(r);if(i!==void 0)throw new Error(`Case-insensitive enum cannot have multiple values with the same lowercase form: '${i}' and '${n}' both become '${r}'`);this.lowercaseMap.set(r,n)}}has(t){return this.get(t)!==void 0}get(t){if(typeof t=="string")return this.lowercaseMap.get(t.toLowerCase());if(super.has(t))return t}};function El(e){return new he(3,64,e)}o(El,"defineArray");function Tl(e){return new he(4,288,e)}o(Tl,"defineRecord");function vl(e){return new he(0,32,e)}o(vl,"defineObject");function Er(...e){let t=0,n,r,i;for(let s of e){if(typeof s=="number"){t|=s;continue}if(s instanceof Set){if(i===void 0)i=new Set(s);else for(let a of s)i.add(a);continue}if(n===void 0){n=s;continue}r===void 0&&(r=[n]),r.push(s)}return n===void 0?i===void 0?t:t===0?i:new he(2,t|512,void 0,i):r===void 0?he.cloneWith(n,t|512,i):new he(1,t|512,r,i)}o(Er,"defineUnion");function Al(e){return typeof e=="number"?e|1|2:e instanceof Set?Er(e,1,2):e.nullish}o(Al,"defineNullish");function Sl(e){return typeof e=="number"?e|1:e instanceof Set?Er(e,1):e.optional}o(Sl,"defineOptional");function xl(e){return typeof e=="number"?e|2:e instanceof Set?Er(e,2):e.nullable}o(xl,"defineNullable");function qa(e,t){let n=Z([e.mask,e.values]);for(let[r,i]of bl(t))switch(typeof i){case"number":if(i&128){if(e.idField!==void 0)throw new Error(`Duplicate id field: ${r}`);e.idField=r}n+=Z(r)^i;break;case"string":if(e.typenameField!==void 0&&e.typenameField!==r)throw new Error(`Duplicate typename field: ${r}`);e.typenameField=r,e.typenameValue=i,n+=Z(r)^Z(i);break;case"object":if(i instanceof st){n^=Z(r)^Z(Array.from(i));break}if(i instanceof Set){n^=Z(r)^Z(i);break}n+=Z(r)^i.shapeKey,i.mask&3072&&(e.mask|=2048,e.subEntityPaths===void 0?e.subEntityPaths=r:wl(e.subEntityPaths)?e.subEntityPaths.push(r):e.subEntityPaths=[e.subEntityPaths,r]);break}return e.shapeKey=n>>>0,t}o(qa,"reifyObjectShape");function Cl(e,t){let n=e.mask,r=Object.create(null),i,s=Z([n,e.values]);for(let a of t){let c=a.mask;if(n|=c,s+=a.shapeKey,c&512){let f=a;if(f.typenameField!==void 0){if(i!==void 0&&i!==f.typenameField)throw new Error(`Union typename field conflict: Cannot merge unions with different typename fields ('${i}' vs '${f.typenameField}')`);i=f.typenameField}let l=f.shape;if(l!==void 0)for(let m of[...Object.keys(l),Oe,Ue]){let p=l[m];if(r[m]!==void 0&&r[m]!==p)throw new Error(`Union merge conflict: Duplicate typename value '${String(m)}' found when merging nested unions (${String(r[m])} vs ${String(p)})`);r[m]=p}}else if(c&64){if(r[Oe]!==void 0)throw new Error("Array shape already defined");r[Oe]=a.shape}else if(c&256){if(r[Ue]!==void 0)throw new Error("Record shape already defined");r[Ue]=a.shape}else{let f=a.typenameField,l=a.typenameValue;if(l===void 0)throw new Error("Object definitions must have a typename to be in a union with other objects, records, or arrays");if(i!==void 0&&f!==i)throw new Error("Object definitions must have the same typename field to be in the same union");i=f,r[l]=a}}return e.typenameField=i,e.shapeKey=s>>>0,e.mask=n,r}o(Cl,"reifyUnionShape");function Pl(e){return e}o(Pl,"defineTypename");function Nl(e){return new Set([e])}o(Nl,"defineConst");var Ga=o((...e)=>new Set(e),"defineEnum");Ga.caseInsensitive=(...e)=>new st(e);var Ci=16,Dl=0,Qa=[],Ml=[],ja=new Map,Wa=new Map;function Fl(e){let t=ja.get(e);if(t===void 0)throw new Error(`Format ${e} not registered`);return t}o(Fl,"defineFormatted");function Pi(e){let t=e>>Ci;return Qa[t]}o(Pi,"getFormat");function Ni(e){let t=e>>Ci;return Wa.get(t)}o(Ni,"getFormatName");function Di(e,t,n,r){let i=Dl++;Qa[i]=n,Ml[i]=r,Wa.set(i,e);let s=i<<Ci,a=t===8?8192:4096,c=s|t|a;ja.set(e,c)}o(Di,"registerFormat");Di("date",8,e=>{let t=e.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!t)throw new Error(`Invalid date string: ${e}. Expected YYYY-MM-DD format.`);let[,n,r,i]=t,s=new Date(Date.UTC(parseInt(n,10),parseInt(r,10)-1,parseInt(i,10)));if(isNaN(s.getTime()))throw new Error(`Invalid date string: ${e}`);return s},e=>{let t=e.getUTCFullYear(),n=String(e.getUTCMonth()+1).padStart(2,"0"),r=String(e.getUTCDate()).padStart(2,"0");return`${t}-${n}-${r}`});Di("date-time",8,e=>{let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`Invalid date-time string: ${e}`);return t},e=>e.toISOString());function Mi(e,t,n){let r=new he(5,1056,e);return t&&(r._methodsFactory=t),n&&(r._entityConfig=n),r}o(Mi,"entity");var j={format:Fl,typename:Pl,const:Nl,enum:Ga,id:140,string:8,number:4,boolean:16,null:2,undefined:1,array:El,object:vl,record:Tl,union:Er,nullish:Al,optional:Sl,nullable:xl};function yn(e){if(e instanceof st)return Array.from(e).map(r=>typeof r=="string"?`"${r}"`:String(r)).join(" | ");if(e instanceof Set)return Array.from(e).map(r=>typeof r=="string"?`"${r}"`:String(r)).join(" | ");if(typeof e=="string")return`"${e}"`;if(typeof e=="boolean")return String(e);if(typeof e=="number"){if((e&12288)!==0){let i=Ni(e);if(i)return`"${i}"`}let r=[];return e&1&&r.push("undefined"),e&2&&r.push("null"),e&4&&r.push("number"),e&8&&r.push("string"),e&16&&r.push("boolean"),e&32&&r.push("object"),e&64&&r.push("array"),r.length===0?"unknown":r.length===1?r[0]:r.join(" | ")}let t=e.mask;if(t&512){let n=e,r=[];if(n.values!==void 0&&n.values.size>0)for(let s of n.values){let a=typeof s=="string"?`"${s}"`:String(s);r.push(a)}if(n.shape!==void 0){n.shape[Oe]!==void 0&&r.push(`Array<${yn(n.shape[Oe])}>`),n.shape[Ue]!==void 0&&r.push(`Record<string, ${yn(n.shape[Ue])}>`);for(let[s,a]of Object.entries(n.shape))s!==Oe&&s!==Ue&&r.push(s)}if(t=n.mask,(t&12288)!==0){let s=Ni(t);s&&r.push(`"${s}"`)}return t&1&&r.push("undefined"),t&2&&r.push("null"),t&4&&r.push("number"),t&8&&r.push("string"),t&16&&r.push("boolean"),r.length===0?"union":r.join(" | ")}if(t&1024)return`Entity<${e.typenameValue}>`;if(t&64){let n=e.shape;return`Array<${yn(n)}>`}if(t&256){let n=e.shape;return`Record<string, ${yn(n)}>`}if(t&32){let n=e.typenameValue;return n?`Object<${n}>`:"object"}return"unknown"}o(yn,"typeToString");function Ht(e,t,n){return new TypeError(`Validation error at ${e}: expected ${yn(t)}, got ${typeof n=="object"?n===null?"null":Array.isArray(n)?"array":"object":typeof n}`)}o(Ht,"typeError");u();d();var kl=Array.isArray;function gn(e){if(e===null)return 2;switch(typeof e){case"number":return 4;case"string":return 8;case"boolean":return 16;case"undefined":return 1;case"object":return kl(e)?64:32;default:throw new Error(`Invalid type: ${typeof e}`)}}o(gn,"typeMaskOf");var Fi=Object.entries,Rl=Array.isArray,Tr=new WeakMap;function Il(e,t,n,r){if(e===64){let i=n.shape[Oe];return i===void 0||typeof i=="number"?t:$a(t,i,r)}else{let i=n.typenameField,s=i?t[i]:void 0;if(s===void 0||typeof s!="string"){let c=n.shape[Ue];if(c===void 0||typeof c=="number")throw new Error(`Typename field '${i}' is required for union discrimination but was not found in the data`);return Ol(t,c,r)}let a=n.shape[s];return a===void 0||typeof a=="number"?t:za(t,a,r)}}o(Il,"parseUnionValue");function $a(e,t,n){for(let r=0;r<e.length;r++)e[r]=at(e[r],t,`${n}[${r}]`);return e}o($a,"parseArrayValue");function Ol(e,t,n){for(let[r,i]of Fi(e))e[r]=at(i,t,`${n}["${r}"]`);return e}o(Ol,"parseRecordValue");function za(e,t,n){if(Tr.has(e))return e;let r=t.shape;for(let[i,s]of Fi(r))e[i]=at(e[i],s,`${n}.${i}`);return e}o(za,"parseObjectValue");function at(e,t,n){if(t instanceof st){let r=t.get(e);if(r===void 0)throw Ht(n,t,e);return r}if(t instanceof Set){if(!t.has(e))throw Ht(n,t,e);return e}switch(typeof t){case"string":if(e==null)return t;if(e!==t)throw Ht(n,t,e);return e;case"number":{let r=gn(e);if(!(t&r))throw Ht(n,t,e);return t&12288?Pi(t)(e):e}default:{let r=gn(e),i=t.mask;if(!(i&r)&&!t.values?.has(e))throw Ht(n,i,e);return r<32?i&12288?Pi(i)(e):e:r&512?Il(r,e,t,n):r===64?$a(e,t.shape,n):za(e,t,n)}}}o(at,"parseValue");function vr(e,t){for(let[n,r]of Fi(t))typeof r=="object"&&r!==null&&!Rl(r)&&!Tr.has(r)?vr(e[n],r):e[n]=r;return e}o(vr,"mergeValues");var Ul=Symbol.for("nodejs.util.inspect.custom");function Ya(e,t,n,r,i,s){let a=n.shape,c=n.methods,f=new Map,l=o(()=>({__entityRef:e}),"toJSON"),m,p={get(g,b){if(b==="toJSON")return l;let{data:w,cache:T,notifier:S}=t;if(r?.value,S.consume(),T.has(b))return T.get(b);if(c&&typeof b=="string"&&b in c){let W=f.get(b);return W||(W=es(m,c[b].bind(m)),f.set(b,W)),W}let I=w[b],Q=a[b];if(!Object.hasOwnProperty.call(a,b))return I;let L=at(I,Q,`[[${s}]].${b}`);return T.set(b,L),L},has(g,b){return c&&typeof b=="string"&&b in c?!0:b in a},ownKeys(g){let b=Object.keys(a),w=n.typenameField;if(w&&!b.includes(w)&&b.push(w),c)for(let T of Object.keys(c))b.includes(T)||b.push(T);return b},getOwnPropertyDescriptor(g,b){let w=n.typenameField;if(b in a||b===w)return{enumerable:!0,configurable:!0};if(c&&typeof b=="string"&&b in c)return{enumerable:!1,configurable:!0}}};return m=new Proxy({[Ul]:()=>Object.keys(a).reduce((g,b)=>(g[b]=m[b],g),{})},p),Tr.set(m,e),_o(m,i),m}o(Ya,"createEntityProxy");function Le(e){return Tr.get(e)}o(Le,"getProxyId");var Ar=class{static{o(this,"EntityStore")}map=new Map;queryClient;constructor(t){this.queryClient=t}hasEntity(t){return this.map.has(t)}getEntity(t){return this.map.get(t)}getNestedEntityRefIds(t,n){let r=this.getEntity(t);if(r===void 0)throw new Error(`Entity ${t} not found when getting nested entity ref ids`);if(n.add(t),r.notifier.consume(),r.entityRefs!==void 0)for(let i of r.entityRefs)this.getNestedEntityRefIds(i,n);return n}hydratePreloadedEntity(t,n){let r=this.getEntity(t);if(r===void 0)throw new Error(`Entity ${t} not found`);return r.proxy=this.createEntityProxy(r,n),r}setPreloadedEntity(t,n){let r={key:t,data:n,notifier:sn(),cache:new Map,id:void 0,proxy:void 0,entityRefs:void 0};return this.map.set(t,r),r}setEntity(t,n,r,i){let s=this.map.get(t);return s===void 0?(s=this.setPreloadedEntity(t,n),s.proxy=this.createEntityProxy(s,r)):(s.data=vr(s.data,n),s.notifier.notify(),s.cache.clear()),s.entityRefs=i,s}createEntityProxy(t,n){let r=n.idField;if(r===void 0)throw new Error(`Entity id field is required ${n.typenameValue}`);let i=t.data[r];if(typeof i!="string"&&typeof i!="number")throw console.log(t.data),new Error(`Entity id must be string or number: ${n.typenameValue}`);t.id=i;let s,a=n._entityConfig;return a?.stream&&(s=Zn(c=>{let f=this.queryClient.getContext(),l=o(p=>{let g=t.data,b=vr(g,p);t.data=b,t.notifier.notify(),t.cache.clear()},"onUpdate"),m=a.stream.subscribe(f,i,l);return c.value=t.proxy,m})),Ya(t.key,t,n,s,this.queryClient)}};u();d();var qt=class{static{o(this,"NetworkManager")}onlineSignal;manualOverride=void 0;eventListenersAttached=!1;constructor(t){let n=t??this.detectOnlineStatus();this.onlineSignal=kt(n),this.canAttachListeners()&&this.attachEventListeners()}get isOnline(){return this.manualOverride!==void 0?this.manualOverride:this.onlineSignal.value}setNetworkStatus(t){this.manualOverride=t,this.onlineSignal.value=t}clearManualOverride(){this.manualOverride=void 0,this.onlineSignal.value=this.detectOnlineStatus()}getOnlineSignal(){return this.onlineSignal}detectOnlineStatus(){return typeof navigator<"u"&&"onLine"in navigator?navigator.onLine:!0}canAttachListeners(){return typeof self<"u"&&typeof self.addEventListener=="function"}attachEventListeners(){if(this.eventListenersAttached)return;let t=o(()=>{this.manualOverride===void 0&&(this.onlineSignal.value=!0)},"handleOnline"),n=o(()=>{this.manualOverride===void 0&&(this.onlineSignal.value=!1)},"handleOffline");self.addEventListener("online",t),self.addEventListener("offline",n),this.eventListenersAttached=!0}},ki=class e{static{o(this,"NoOpNetworkManager")}static onlineSignal=kt(!0);get isOnline(){return!0}setNetworkStatus(t){}clearManualOverride(){}getOnlineSignal(){return e.onlineSignal}destroy(){}},Xa=new qt,Ll=Jn(Xa);u();d();u();d();var Ja=Object.entries;function Bl(e,t,n,r,i){if(e===64){let s=n.shape[Oe];return s===void 0||typeof s=="number"?t:Za(t,{mask:64,shape:s,values:void 0},r,i)}else{let s=n.typenameField,a=s?t[s]:void 0;if(a===void 0||typeof a!="string"){let f=n.shape[Ue];if(f===void 0||typeof f=="number")throw new Error(`Typename field '${s}' is required for union discrimination but was not found in the data`);return _a(t,f,r,i)}let c=n.shape[a];return c===void 0||typeof c=="number"?t:bn(t,c,r,i)}}o(Bl,"parseUnionEntities");function Za(e,t,n,r){for(let i=0;i<e.length;i++)e[i]=xt(e[i],t,n,r);return e}o(Za,"parseArrayEntities");function _a(e,t,n,r){if(typeof t=="number")return e;for(let[i,s]of Ja(e))e[i]=xt(s,t,n,r);return e}o(_a,"parseRecordEntities");function bn(e,t,n,r){let i=e.__entityRef;if(typeof i=="number")return n.hydrateEntity(i,t).proxy;let{mask:s}=t,a=s&1024?new Set:r,c=t.shape,f=t.subEntityPaths;if(f!==void 0)if(typeof f=="string"){let l=c[f];e[f]=xt(e[f],l,n,a)}else for(let l of f){let m=c[l];e[l]=xt(e[l],m,n,a)}if(s&1024){let l=t,m=l.typenameValue,p=e[l.idField];if(p===void 0)throw new Error(`Entity id is required: ${m}`);let g=`${m}:${p}`,b=Z(g);return r!==void 0&&r.add(b),n.saveEntity(b,e,l,a).proxy}for(let[l,m]of Ja(c))f!==void 0&&(typeof f=="string"?l===f:f.includes(l))||(e[l]=at(e[l],m,`${t.typenameValue??"object"}.${l}`));return e}o(bn,"parseObjectEntities");function xt(e,t,n,r){let i=gn(e),s=t.mask;return i<32||!(s&i)?e:s&512?Bl(i,e,t,n,r):i===64?Za(e,t.shape,n,r):s&256?_a(e,t.shape,n,r):bn(e,t,n,r)}o(xt,"parseEntities");var Ri=class{static{o(this,"QueryResultExtra")}_streamOrphansNotifier=void 0;_streamOrphans=void 0;_optimisticInsertsNotifier=void 0;_optimisticInserts=void 0;onChanged;constructor(t){this.onChanged=t}get streamOrphansNotifier(){return this._streamOrphansNotifier??(this._streamOrphansNotifier=sn())}get optimisticInsertsNotifier(){return this._optimisticInsertsNotifier??(this._optimisticInsertsNotifier=sn())}get streamOrphans(){return this._streamOrphans??(this._streamOrphans=new Set)}get optimisticInserts(){return this._optimisticInserts??(this._optimisticInserts=new Set)}getExtra(){return this.streamOrphansNotifier.consume(),this.optimisticInsertsNotifier.consume(),{streamOrphans:this.streamOrphans,optimisticInserts:this.optimisticInserts}}addStreamOrphan(t){let n=this.streamOrphans,r=n.size;if(n.add(t),n.size!==r){this.streamOrphansNotifier.notify();let i=Le(t);return i!==void 0&&this.removeOptimisticInsertById(i),this.onChanged(),!0}return!1}addOptimisticInsert(t){let n=this.optimisticInserts,r=n.size;return n.add(t),n.size!==r?(this.optimisticInsertsNotifier.notify(),this.onChanged(),!0):!1}removeOptimisticInsert(t){let n=Le(t);return n===void 0?!1:this.removeOptimisticInsertById(n)}removeOptimisticInsertById(t){let n=this._optimisticInserts;if(n===void 0||n.size===0)return!1;for(let r of n)if(Le(r)===t)return n.delete(r),this.optimisticInsertsNotifier.notify(),this.onChanged(),!0;return!1}hasOrphanWithId(t){let n=this._streamOrphans;if(n===void 0)return!1;for(let r of n)if(Le(r)===t)return!0;return!1}reconcile(t){let n=this._streamOrphans;if(n!==void 0&&n.size>0){let i=!1;for(let s of n){let a=Le(s);a!==void 0&&t.has(a)&&(n.delete(s),i=!0)}i&&this.streamOrphansNotifier.notify()}let r=this._optimisticInserts;if(r!==void 0&&r.size>0){let i=!1;for(let s of r){let a=Le(s);a!==void 0&&(t.has(a)||n!==void 0&&n.has(s))&&(r.delete(s),i=!0)}i&&this.optimisticInsertsNotifier.notify()}}clear(){let t=!1;this._streamOrphans!==void 0&&this._streamOrphans.size>0&&(this._streamOrphans=void 0,this.streamOrphansNotifier.notify(),t=!0),this._optimisticInserts!==void 0&&this._optimisticInserts.size>0&&(this._optimisticInserts=void 0,this.optimisticInsertsNotifier.notify(),t=!0),t&&this.onChanged()}loadFromCache(t,n,r,i){if(t.streamOrphanRefs&&t.streamOrphanRefs.length>0&&r){let s=this.streamOrphans;for(let a of t.streamOrphanRefs){let c=n.hydrateEntity(a,r);s.add(c.proxy)}}if(t.optimisticInsertRefs&&t.optimisticInsertRefs.length>0&&i){let s=this.optimisticInserts;for(let a of t.optimisticInsertRefs){let c=n.hydrateEntity(a,i);s.add(c.proxy)}}}getForPersistence(){let t=this._streamOrphans,n=this._optimisticInserts;if((t===void 0||t.size===0)&&(n===void 0||n.size===0))return;let r={};if(t!==void 0&&t.size>0){r.streamOrphanRefs=[];for(let i of t){let s=Le(i);s!==void 0&&r.streamOrphanRefs.push(s)}}if(n!==void 0&&n.size>0){r.optimisticInsertRefs=[];for(let i of n){let s=Le(i);s!==void 0&&r.optimisticInsertRefs.push(s)}}return r}get hasData(){return this._streamOrphans!==void 0&&this._streamOrphans.size>0||this._optimisticInserts!==void 0&&this._optimisticInserts.size>0}},Sr=class{static{o(this,"QueryResultImpl")}def;queryKey;storageKey=-1;queryClient;initialized=!1;isRefetchingSignal=kt(!1);isFetchingMoreSignal=kt(!1);updatedAt=void 0;params=void 0;refIds=void 0;allNestedRefIdsSignal=void 0;refetchPromise=void 0;fetchMorePromise=void 0;unsubscribe=void 0;relay;_relayState=void 0;wasPaused=!1;currentParams=void 0;debounceTimer=void 0;get relayState(){let t=this._relayState;if(!t)throw new Error("Relay state not initialized");return t}_extra=void 0;get extraData(){return this._extra??(this._extra=new Ri(()=>this.persistExtraData()))}_nextPageParams=void 0;get nextPageParams(){if(this.def.type!=="infiniteQuery")return null;let t=this._nextPageParams,n=this.relayState.value;if(t===void 0&&n!==void 0){if(!Array.isArray(n))throw new Error("Query result is not an array, this is a bug");let i=this.def.pagination?.getNextPageParams?.(n[n.length-1]);if(i===void 0)t=null;else{let s=!1,a={...this.currentParams};for(let[c,f]of Object.entries(i))f!=null&&(a[c]=f,s=!0);this._nextPageParams=t=s?a:null}}return t??null}constructor(t,n,r,i){Zo(this),this.def=t,this.queryClient=n,this.queryKey=r,this.params=i,this.relay=Zn(s=>{this._relayState=s,this.currentParams=Ii(this.params),this.storageKey=wn(this.def,this.currentParams),this.queryClient.activateQuery(this);let a=this.isPaused;this.wasPaused=a,this.initialized?a||((this.def.type==="stream"||this.def.stream)&&this.setupSubscription(),this.def.type!=="stream"&&this.isStale&&this.refetch()):this.initialize();let c=o(()=>{clearTimeout(this.debounceTimer),this.debounceTimer=void 0,this.unsubscribe?.(),this.unsubscribe=void 0,this.def.type!=="stream"&&this.def.cache?.refetchInterval&&this.queryClient.refetchManager.removeQuery(this),this.queryClient.memoryEvictionManager.scheduleEviction(this.queryKey)},"deactivate");return{update:o(()=>{let{wasPaused:f,isPaused:l}=this;if(this.wasPaused=l,l){c();return}let m=Ii(this.params),p=wn(this.def,m),g=p!==this.storageKey;g&&(this.params=m,this.storageKey=p),f?(this.queryClient.activateQuery(this),this.def.type!=="stream"?(this.def.cache?.refreshStaleOnReconnect??!0)&&this.isStale&&s.setPromise(this.runQuery(this.currentParams,!0)):this.setupSubscription()):g&&(this.def.type!=="stream"?this.debouncedRefetch():this.setupSubscription())},"update"),deactivate:c}})}get value(){return this.relay.value}get error(){return this.relay.error}get isPending(){return this.relay.isPending}get isRejected(){return this.relay.isRejected}get isResolved(){return this.relay.isResolved}get isSettled(){return this.relay.isSettled}get isReady(){return this.relay.isReady}get _version(){return this.relay._version}get _signal(){return this.relay._signal}get _flags(){return this.relay._flags}then(t,n){return this.relay.then(t,n)}catch(t){return this.relay.catch(t)}finally(t){return this.relay.finally(t)}get[Symbol.toStringTag](){return"QueryResult"}getAllEntityRefs(){let t=this.allNestedRefIdsSignal;if(!t){let n=this.queryClient;this.allNestedRefIdsSignal=t=ts(()=>{this.relay.value;let r=new Set;if(this.refIds!==void 0)for(let i of this.refIds)n.getNestedEntityRefIds(i,r);return this.extraData.reconcile(r),r})}return t.value}async initialize(){let t=this.relayState;this.initialized=!0;let n;try{if(n=await this.queryClient.loadCachedQuery(this.def,this.storageKey),n!==void 0){if(this.updatedAt=n.updatedAt,this.refIds=n.refIds,n.extra){let i=this.def;this.extraData.loadFromCache(n.extra,this.queryClient,i.stream?.shape,i.optimisticInserts?.shape)}let r=this.def.shape;t.value=r instanceof he?xt(n.value,r,this.queryClient,new Set):at(n.value,r,this.def.id)}}catch(r){this.queryClient.deleteCachedQuery(this.storageKey),this.queryClient.getContext().log?.warn?.("Failed to initialize query, the query cache may be corrupted or invalid",r)}if(!this.isPaused)try{(this.def.type==="stream"||this.def.stream)&&this.setupSubscription(),this.def.type!=="stream"&&(n!==void 0?this.isStale&&(this.def.debounce!==void 0&&this.def.debounce>0?this.debouncedRefetch():this.refetch()):t.setPromise(this.runQuery(this.currentParams,!0)))}catch(r){t.setError(r)}}setupSubscription(){this.unsubscribe?.();let t,n;if(this.def.type==="stream")n=this.def.shape,t=this.def.subscribeFn;else{let i=this.def.stream;if(!i)return;n=i.shape,t=i.subscribeFn}let r=this.currentParams;this.unsubscribe=t(this.queryClient.getContext(),r,i=>{let s=bn(i,n,this.queryClient);if(this.def.type==="stream")this.relayState.value=s,this.updatedAt=Date.now(),this.queryClient.saveQueryData(this.def,this.storageKey,s,this.updatedAt);else{let a=this.getAllEntityRefs(),c=Le(s);c!==void 0&&!a.has(c)&&this.extraData.addStreamOrphan(s)}})}async runQuery(t,n=!1){if(this.isPaused)throw new Error("Query is paused due to network status");let{retries:r,retryDelay:i}=this.getRetryConfig(),s;for(let a=0;a<=r;a++)try{let f=await this.def.fetchFn(this.queryClient.getContext(),t),l,m=this.def.type==="infiniteQuery";m&&!n&&this.refIds!==void 0?l=this.refIds:l=this.refIds=new Set;let p=this.def.shape,g=p instanceof he?xt(f,p,this.queryClient,l):at(f,p,this.def.id),b;if(m){let T=this.relayState.value;b=n||T===void 0?[g]:[...T,g]}else b=g;let w;return n?w=this.updatedAt=Date.now():w=this.updatedAt??=Date.now(),this._nextPageParams=void 0,this.queryClient.saveQueryData(this.def,this.storageKey,b,w,l,this.getExtraForPersistence()),this.updatedAt=Date.now(),b}catch(c){if(s=c,a>=r)throw c;let f=i(a);if(await new Promise(l=>setTimeout(l,f)),this.isPaused)throw new Error("Query is paused due to network status")}throw s}debouncedRefetch(){let t=this.def.debounce;if(t===void 0){this.refetch();return}clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.debounceTimer=void 0,this.refetch()},t)}refetch=o(()=>{if(this.def.type==="stream")throw new Error("Cannot refetch a stream query");if(this.fetchMorePromise)throw new Error("Query is fetching more, cannot refetch");if(this.refetchPromise)return this.refetchPromise;clearTimeout(this.debounceTimer),this.debounceTimer=void 0,this._nextPageParams=void 0,this.isRefetchingSignal.value=!0,this._version.update(n=>n+1);let t=this.runQuery(this.currentParams,!0).then(n=>(this.relayState.value=n,this._extra!==void 0&&this._extra.clear(),n)).catch(n=>(this.relayState.setError(n),Promise.reject(n))).finally(()=>{this._version.update(n=>n+1),this.isRefetchingSignal.value=!1,this.refetchPromise=void 0});return this.refetchPromise=t,t},"refetch");fetchNextPage=o(()=>{if(this.def.type==="stream")throw new Error("Cannot fetch next page on a stream query");if(this.refetchPromise)return Promise.reject(new Error("Query is refetching, cannot fetch next page"));if(this.fetchMorePromise)return this.fetchMorePromise;let t=this.nextPageParams;if(!t)return Promise.reject(new Error("No next page params"));this.isFetchingMoreSignal.value=!0,this._version.update(r=>r+1);let n=this.runQuery(t,!1).then(r=>(this.relayState.value=r,r)).catch(r=>(this.relayState.setError(r),Promise.reject(r))).finally(()=>{this._version.update(r=>r+1),this.isFetchingMoreSignal.value=!1,this.fetchMorePromise=void 0});return this.fetchMorePromise=n,n},"fetchNextPage");get isRefetching(){return this.isRefetchingSignal.value}get isFetchingMore(){return this.isFetchingMoreSignal.value}get isFetching(){return this.relay.isPending||this.isRefetching||this.isFetchingMore}get hasNextPage(){return this.nextPageParams!==null}get extra(){return this.getAllEntityRefs(),this.extraData.getExtra()}persistExtraData(){if(this.updatedAt===void 0)return;let t=this._extra?.getForPersistence();this.queryClient.saveQueryData(this.def,this.storageKey,this.relayState.value,this.updatedAt,this.refIds,t)}getExtraForPersistence(){return this._extra?.getForPersistence()}addOptimisticInsert(t){let r=this.def.optimisticInserts;if(r===void 0)throw new Error("Query does not have optimisticInserts configured. Add optimisticInserts: { type: YourEntity } to the query definition.");let i=Le(t),s=t;if(i===void 0&&(s=bn(t,r.shape,this.queryClient),i=Le(s),i===void 0))throw new Error("Optimistic insert must be or produce an entity proxy");this.getAllEntityRefs().has(i)||this.extraData.hasOrphanWithId(i)||this.extraData.addOptimisticInsert(s)}removeOptimisticInsert(t){this.extraData.removeOptimisticInsert(t)}get isStale(){if(this.def.type==="stream")return!1;if(this.updatedAt===void 0)return!0;let t=this.def.cache?.staleTime??0;return Date.now()-this.updatedAt>=t}get isPaused(){if(this.def.type==="stream")return!1;let t=this.def.cache?.networkMode??St.Online,r=this.queryClient.networkManager.getOnlineSignal().value;switch(t){case St.Always:return!1;case St.Online:return!r;case St.OfflineFirst:return!r&&this.updatedAt===void 0;default:return!1}}getRetryConfig(){if(this.def.type==="stream")return{retries:0,retryDelay:o(()=>0,"retryDelay")};let t=this.def.cache?.retry,n=this.queryClient.isServer,r,i;return t===!1?r=0:t===void 0?r=n?0:3:typeof t=="number"?r=t:r=t.retries,typeof t=="object"&&t.retryDelay?i=t.retryDelay:i=o(s=>1e3*Math.pow(2,s),"retryDelay"),{retries:r,retryDelay:i}}};u();d();var En=class{static{o(this,"RefetchManager")}multiplier;intervalId;clock=0;buckets=new Map;constructor(t=1){this.multiplier=t;let n=1e3*this.multiplier;this.intervalId=setTimeout(()=>this.tick(),n)}addQuery(t){if(t.def.type==="stream")return;let n=t.def.cache?.refetchInterval;if(!n)return;let r=n*this.multiplier,i=this.buckets.get(r);i||(i=new Set,this.buckets.set(r,i)),i.add(t)}removeQuery(t){if(t.def.type==="stream")return;let n=t.def.cache?.refetchInterval;if(!n)return;let r=n*this.multiplier,i=this.buckets.get(r);i&&(i.delete(t),i.size===0&&this.buckets.delete(r))}tick(){this.clock+=1e3*this.multiplier;for(let[n,r]of this.buckets.entries())if(this.clock%n===0)for(let i of r)i&&!i.isFetching&&i.refetch();let t=1e3*this.multiplier;this.intervalId=setTimeout(()=>this.tick(),t)}destroy(){clearTimeout(this.intervalId)}};u();d();var Tn=class{static{o(this,"MemoryEvictionManager")}queryClient;multiplier;intervalId;currentFlush=new Set;nextFlush=new Set;constructor(t,n=1){this.queryClient=t,this.multiplier=n,this.intervalId=setInterval(this.tick,6e4*this.multiplier)}scheduleEviction(t){this.nextFlush.add(t)}cancelEviction(t){this.currentFlush.delete(t),this.nextFlush.delete(t)}tick=o(()=>{if(this.queryClient){for(let t of this.currentFlush)this.queryClient.queryInstances.delete(t);this.currentFlush=this.nextFlush,this.nextFlush=new Set}},"tick");destroy(){clearInterval(this.intervalId)}};function Kl(e){return typeof e=="object"&&e!==null}o(Kl,"isSignal");function Ii(e){if(e===void 0)return;let t={};for(let[n,r]of Object.entries(e))Kl(r)?t[n]=r.value:t[n]=r;return t}o(Ii,"extractParamsForKey");var wn=o((e,t)=>Z([e.id,e.shapeKey,t]),"queryKeyFor"),Oi=class{static{o(this,"QueryClient")}store;context;entityMap;queryInstances=new Map;memoryEvictionManager;refetchManager;networkManager;isServer;constructor(t,n={fetch,log:console},r,i,s){this.store=t,this.context=n,this.memoryEvictionManager=i??new Tn(this,this.context.evictionMultiplier),this.refetchManager=s??new En(this.context.refetchMultiplier),this.networkManager=r??new qt,this.isServer=typeof self>"u",this.entityMap=new Ar(this)}getContext(){return this.context}saveQueryData(t,n,r,i,s,a){let c=s!==void 0?new Set(s):void 0;this.store.saveQuery(t,n,r,i,c,a)}activateQuery(t){let{def:n,queryKey:r,storageKey:i}=t;this.store.activateQuery(n,i),n.type!=="stream"&&n.cache?.refetchInterval&&this.refetchManager.addQuery(t),this.memoryEvictionManager.cancelEviction(r)}loadCachedQuery(t,n){return this.store.loadQuery(t,n,this.entityMap)}deleteCachedQuery(t){this.store.deleteQuery(t)}getQuery(t,n){let r=wn(t,n),i=this.queryInstances.get(r);return i===void 0&&(i=new Sr(t,this,r,n),this.queryInstances.set(r,i)),i}hydrateEntity(t,n){return this.entityMap.hydratePreloadedEntity(t,n)}saveEntity(t,n,r,i){let s=this.entityMap.setEntity(t,n,r,i);return this.store.saveEntity(t,n,i),s}getNestedEntityRefIds(t,n){return this.entityMap.getNestedEntityRefIds(t,n)}destroy(){this.refetchManager.destroy(),this.memoryEvictionManager.destroy()}},xr=Jn(void 0);u();d();u();d();u();d();function ec(e){let t=[],n=[],r=new Set,i=0,s=/\[([^\]]+)\]/g,a;for(;(a=s.exec(e))!==null;)t.push(e.slice(i,a.index)),n.push(a[1]),r.add(a[1]),i=s.lastIndex;return t.push(e.slice(i)),c=>{let f=t[0];for(let m=0;m<n.length;m++)f+=encodeURIComponent(String(c[n[m]]))+t[m+1];let l=null;for(let m in c)!r.has(m)&&c[m]!==void 0&&(l===null&&(l=new URLSearchParams),l.append(m,String(c[m])));return l!==null&&(f+="?"+l.toString()),f}}o(ec,"createPathInterpolator");var tc=new Map;function Vl(e){let t,n=o(()=>{if(t===void 0){let{path:i,method:s="GET",response:a,cache:c,pagination:f,stream:l,optimisticInserts:m,debounce:p}=e(),g=`${s}:${i}`,b,w;typeof a=="object"?a instanceof he?(b=a,w=a.shapeKey):a instanceof Set?(b=a,w=Z(a)):(b=j.object(a),w=b.shapeKey):(b=a,w=Z(b));let T=ec(i),S=o(async(L,W)=>{let B=T(W);return(await L.fetch(B,{method:s})).json()},"fetchFn"),I;if(l){let L,W,B=l.type;typeof B=="object"?B instanceof he?(L=B,W=B.shapeKey):B instanceof Set?(L=B,W=Z(B)):(L=j.object(B),W=L.shapeKey):(L=B,W=Z(L)),I={shape:L,shapeKey:W,subscribeFn:o((ve,it,ot)=>l.subscribe(ve,it,ot),"subscribeFn")}}let Q;if(m){let L,W,B=m.type;typeof B=="object"?B instanceof he?(L=B,W=B.shapeKey):B instanceof Set?(L=B,W=Z(B)):(L=j.object(B),W=L.shapeKey):(L=B,W=Z(L)),Q={shape:L,shapeKey:W}}t={type:f?"infiniteQuery":"query",id:g,shape:b,shapeKey:w,fetchFn:S,pagination:f,cache:c,stream:I,optimisticInserts:Q,debounce:p}}return t},"getQueryDefinition"),r=ri(i=>{let s=ni(xr);if(s===void 0)throw new Error("QueryClient not found");return s.getQuery(n(),i)});return tc.set(r,n),r}o(Vl,"buildQueryFn");function Hl(e){return Vl(e)}o(Hl,"query");function Ui(e){let t,n=o(()=>{if(t===void 0){let{id:i,response:s,subscribe:a,cache:c}=e();if(!(s instanceof he)||!(s.mask&1024))throw new Error("Stream query response must be an EntityDef");t={type:"stream",id:i,shape:s,shapeKey:s.shapeKey,subscribeFn:o((f,l,m)=>a(l,m),"subscribeFn"),cache:c}}return t},"getStreamDefinition"),r=ri(i=>{let s=ni(xr);if(s===void 0)throw new Error("QueryClient not found");return s.getQuery(n(),i)});return tc.set(r,n),r}o(Ui,"streamQuery");u();d();var vn=K(q());u();d();var ql=new Jo({[He.Solana]:{},[He.Ethereum]:{},[He.Polygon]:{},[He.Base]:{},[He.Arbitrum]:{},[He.Monad]:{},[He.Bitcoin]:{},[He.Sui]:{},[He.Hypercore]:{},[He.Hyperevm]:{}}),ct=Xo(ql);u();d();u();d();u();d();var Gl=["UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"],Li=class{static{o(this,"EventSource")}ERROR=-1;CONNECTING=0;OPEN=1;CLOSED=2;CRLF=`\r
`;LF=`
`;CR="\r";lastEventId=null;status=this.CONNECTING;eventHandlers={open:[],message:[],error:[],close:[]};method;timeout;timeoutBeforeConnection;withCredentials;headers;body;debug;interval;lineEndingCharacter;_xhr=null;_pollTimer=null;_lastIndexProcessed=0;url;constructor(t,n={}){if(!t||typeof t!="string"&&typeof t.toString!="function")throw new SyntaxError("[EventSource] Invalid URL argument.");this.url=typeof t.toString=="function"?t.toString():t,this.method=n.method||"GET",this.timeout=n.timeout??0,this.timeoutBeforeConnection=n.timeoutBeforeConnection??0,this.withCredentials=n.withCredentials||!1,this.headers=n.headers||{},this.body=n.body||void 0,this.debug=n.debug||!1,this.interval=n.pollingInterval??5e3,this.lineEndingCharacter=n.lineEndingCharacter||null,this._pollAgain(this.timeoutBeforeConnection,!0)}_pollAgain(t,n){(t>0||n)&&(this._logDebug(`[EventSource] Will open new connection in ${t} ms.`),this._pollTimer=setTimeout(()=>{this.open()},t))}open(){try{this.status=this.CONNECTING,this._lastIndexProcessed=0,this._xhr=new XMLHttpRequest,this._xhr.open(this.method,this.url,!0),this.withCredentials&&(this._xhr.withCredentials=!0),this._xhr.setRequestHeader("Accept","text/event-stream"),this._xhr.setRequestHeader("Cache-Control","no-cache"),this._xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");for(let[t,n]of Object.entries(this.headers))this._xhr.setRequestHeader(t,n);this.lastEventId!==null&&this._xhr.setRequestHeader("Last-Event-ID",this.lastEventId),this._xhr.timeout=this.timeout,this._xhr.onreadystatechange=()=>{if(this.status===this.CLOSED)return;let t=this._xhr;this._logDebug(`[EventSource][onreadystatechange] ReadyState: ${Gl[t.readyState]||"Unknown"}(${t.readyState}), status: ${t.status}`),[XMLHttpRequest.DONE,XMLHttpRequest.LOADING].includes(t.readyState)&&(t.status>=200&&t.status<400?(this.status===this.CONNECTING&&(this.status=this.OPEN,this.dispatch("open",{type:"open"}),this._logDebug("[EventSource][onreadystatechange][OPEN] Connection opened.")),this._handleEvent(t.responseText||""),t.readyState===XMLHttpRequest.DONE&&(this._logDebug("[EventSource][onreadystatechange][DONE] Operation done."),this._pollAgain(this.interval,!1))):t.status!==0&&(this.status=this.ERROR,this.dispatch("error",{type:"error",message:t.responseText,xhrStatus:t.status,xhrState:t.readyState}),t.readyState===XMLHttpRequest.DONE&&(this._logDebug("[EventSource][onreadystatechange][ERROR] Response status error."),this._pollAgain(this.interval,!1))))},this._xhr.onerror=()=>{this.status!==this.CLOSED&&(this.status=this.ERROR,this.dispatch("error",{type:"error",message:this._xhr.responseText,xhrStatus:this._xhr.status,xhrState:this._xhr.readyState}))},this.body?this._xhr.send(this.body):this._xhr.send(),this.timeout>0&&setTimeout(()=>{this._xhr.readyState===XMLHttpRequest.LOADING&&(this.dispatch("error",{type:"timeout"}),this.close())},this.timeout)}catch(t){this.status=this.ERROR,this.dispatch("error",{type:"exception",message:t.message,error:t})}}_logDebug(...t){this.debug&&console.debug(...t)}_handleEvent(t){if(this.lineEndingCharacter===null){let l=this._detectNewlineChar(t);if(l!==null)this._logDebug(`[EventSource] Automatically detected lineEndingCharacter: ${JSON.stringify(l).slice(1,-1)}`),this.lineEndingCharacter=l;else{console.warn("[EventSource] Unable to identify the line ending character. Ensure your server delivers a standard line ending character: \\r\\n, \\n, \\r, or specify your custom character using the 'lineEndingCharacter' option.");return}}let n=this._getLastDoubleNewlineIndex(t);if(n<=this._lastIndexProcessed)return;let r=t.substring(this._lastIndexProcessed,n).split(this.lineEndingCharacter);this._lastIndexProcessed=n;let i,s=null,a=[],c=0,f="";for(let l=0;l<r.length;l++)if(f=r[l].trim(),f.startsWith("event"))i=f.replace(/event:?\s*/,"");else if(f.startsWith("retry"))c=parseInt(f.replace(/retry:?\s*/,""),10),isNaN(c)||(this.interval=c);else if(f.startsWith("data"))a.push(f.replace(/data:?\s*/,""));else if(f.startsWith("id"))s=f.replace(/id:?\s*/,""),s!==""?this.lastEventId=s:this.lastEventId=null;else if(f===""&&a.length>0){let m=i||"message",p={type:m,data:a.join(`
`),url:this.url,lastEventId:this.lastEventId};this.dispatch(m,p),a=[],i=void 0}}_detectNewlineChar(t){let n=[this.CRLF,this.LF,this.CR];for(let r of n)if(t.includes(r))return r;return null}_getLastDoubleNewlineIndex(t){let n=this.lineEndingCharacter+this.lineEndingCharacter,r=t.lastIndexOf(n);return r===-1?-1:r+n.length}addEventListener(t,n){this.eventHandlers[t]===void 0&&(this.eventHandlers[t]=[]),this.eventHandlers[t].push(n)}removeEventListener(t,n){this.eventHandlers[t]!==void 0&&(this.eventHandlers[t]=this.eventHandlers[t].filter(r=>r!==n))}removeAllEventListeners(t){let n=Object.keys(this.eventHandlers);if(t===void 0)for(let r of n)this.eventHandlers[r]=[];else{if(!n.includes(t))throw Error(`[EventSource] '${t}' type is not supported event type.`);this.eventHandlers[t]=[]}}dispatch(t,n){if(Object.keys(this.eventHandlers).includes(t))for(let i of Object.values(this.eventHandlers[t]))i(n)}close(){this.status!==this.CLOSED&&(this.status=this.CLOSED,this.dispatch("close",{type:"close"})),clearTimeout(this._pollTimer),this._xhr&&this._xhr.abort()}},Bi=Li;u();d();var Ki=class{static{o(this,"AbstractStreamEventProducer")}getDefaultHeaders(){let t={"X-Phantom-Version":Qn,"X-Phantom-Platform":jn},n=Wn();return n&&(t["X-Phantom-AnonymousId"]=n),t}getOptions(t={}){return{...t,headers:Object.fromEntries(on(this.getDefaultHeaders(),t.headers).entries())}}getOptionsWithAuth(t,n={}){let r=this.getOptions(n);if(r.withClientAuth!==!1){let i=$n(t,r.headers);return{...r,headers:Object.fromEntries(on(r.headers,i).entries())}}return r}getApiEnvironment(){return Gn()}safeJsonParse(t){try{return t?{success:!0,data:JSON.parse(t)}:{success:!1,error:new Error("No data provided")}}catch(n){return{success:!1,error:n instanceof Error?n:new Error("Failed to parse JSON")}}}createErrorEvent(t,n="error"){return{type:n,error:typeof t=="string"?new Error(t):t}}};u();d();function Vi({url:e,signal:t,customEvent:n}){return{[Symbol.asyncIterator](){let r=[],i=null,s=!1,a={"X-Phantom-Version":Qn,"X-Phantom-Platform":jn},c=Wn();c&&(a["X-Phantom-AnonymousId"]=c);let f=$n(e,a),l={headers:Object.fromEntries(on(a,f).entries()),lineEndingCharacter:`
`},m=new Bi(e,l),p=o(S=>{try{r.push(JSON.parse(S.data??""))}catch{r.push(S.data??"")}if(i){let I=i;i=null,I({value:r.shift(),done:!1})}},"onMessage"),g=o(()=>{s||(s=!0,w(),b())},"onError"),b=o(()=>{if(i){let S=i;i=null,S({value:void 0,done:!0})}},"finish"),w=o(()=>{n&&m.removeEventListener(n,p),m.removeEventListener("message",p),m.removeEventListener("error",g),m.close()},"cleanup");n&&m.addEventListener(n,p),m.addEventListener("message",p),m.addEventListener("error",g);let T=o(()=>{s||(s=!0,w(),b())},"onAbort");return t?.addEventListener("abort",T,{once:!0}),{next(){return s?Promise.resolve({value:void 0,done:!0}):r.length?Promise.resolve({value:r.shift(),done:!1}):new Promise(S=>{i=S})},return(){return s||(s=!0,t?.removeEventListener("abort",T),w()),Promise.resolve({value:void 0,done:!0})},throw(S){return s||(s=!0,t?.removeEventListener("abort",T),w()),Promise.reject(S)}}}}}o(Vi,"sseIterable");u();d();function nc(e){return{usd:e.price??void 0,usd_24h_change:e.priceChange24h??void 0,price:e.price??void 0,priceChange24h:e.priceChange24h??void 0,lastUpdatedAt:e.lastUpdatedAt}}o(nc,"priceUpdateDataToPriceData");var Ql=x({minutes:5}),jl=100,rc=5,Wl=x({seconds:1}),$l=x({seconds:30}),Hi=class{static{o(this,"PriceStreamManager")}subscriptions=new Map;activeConnection=null;currentTokenIds=new Set;subscriptionOrder=[];connectionState="disconnected";reconnectAttempts=0;reconnectTimeoutId=null;subscribe(t,n,r){!this.subscriptions.has(t)&&this.subscriptions.size>=jl&&this.evictOldestToken();let i={priceCallback:n,evictedCallback:r?.onEvicted};return this.subscriptions.has(t)?(this.removeFromSubscriptionOrder(t),this.subscriptionOrder.push(t)):(this.subscriptions.set(t,new Set),this.subscriptionOrder.push(t)),this.subscriptions.get(t).add(i),this.updateConnection(),()=>{let s=this.subscriptions.get(t);if(s){for(let a of s)if(a.priceCallback===n){s.delete(a);break}s.size===0&&(this.subscriptions.delete(t),this.removeFromSubscriptionOrder(t),this.updateConnection())}}}updateConnection(){let t=new Set(this.subscriptions.keys());if(t.size===0){this.disconnect();return}this.setsEqual(this.currentTokenIds,t)&&this.activeConnection&&this.connectionState==="connected"||this.connectionState==="reconnecting"&&this.setsEqual(this.currentTokenIds,t)||(this.disconnect(),this.connect(t))}connect(t){let n=new AbortController;this.activeConnection=n,this.currentTokenIds=new Set(t),this.connectionState="connecting";let r=Array.from(t).map(s=>encodeURIComponent(s)).join(","),i=`${Gn()}/price-stream?throttleMs=5000&tokenIds=${r}`;this.consumeStream(i,n.signal)}async consumeStream(t,n){try{let r=Vi({url:t,signal:n,customEvent:"price-update"});this.connectionState="connected",this.reconnectAttempts=0;for await(let i of r){if(n.aborted)break;this.handlePriceUpdate(i)}}catch{n.aborted||(this.connectionState="disconnected",this.scheduleReconnect())}}handlePriceUpdate(t){let n=t.caip19,r=this.subscriptions.get(n);if(!r)return;if(!t.price){let s=new Date(t.lastUpdatedAt).getTime();if(Date.now()-s<Ql)return}let i=nc(t);r.forEach(s=>{try{s.priceCallback(n,i)}catch{}})}disconnect(){this.cancelReconnection(),this.activeConnection&&(this.activeConnection.abort(),this.activeConnection=null),this.currentTokenIds.clear(),this.connectionState!=="disconnected"&&(this.connectionState="disconnected")}setsEqual(t,n){if(t.size!==n.size)return!1;for(let r of t)if(!n.has(r))return!1;return!0}evictOldestToken(){if(this.subscriptionOrder.length===0)return;let t=this.subscriptionOrder[0],n=this.subscriptions.get(t);n&&(n.forEach(r=>{if(r.evictedCallback)try{r.evictedCallback(t)}catch{}}),n.clear()),this.subscriptions.delete(t),this.removeFromSubscriptionOrder(t),this.updateConnection()}removeFromSubscriptionOrder(t){let n=this.subscriptionOrder.indexOf(t);n>-1&&this.subscriptionOrder.splice(n,1)}scheduleReconnect(){if(this.reconnectAttempts>=rc){this.connectionState="disconnected";return}if(this.subscriptions.size===0)return;this.connectionState="reconnecting",this.reconnectAttempts++;let t=Math.min(Wl*Math.pow(2,this.reconnectAttempts-1),$l);this.reconnectTimeoutId=setTimeout(()=>{if(this.reconnectTimeoutId=null,this.subscriptions.size===0){this.connectionState="disconnected";return}this.connect(new Set(this.subscriptions.keys()))},t)}cancelReconnection(){this.reconnectTimeoutId&&(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=null)}getConnectionState(){return this.connectionState}getStats(){return{connectionState:this.connectionState,activeSubscriptions:this.subscriptions.size,reconnectAttempts:this.reconnectAttempts,maxReconnectAttempts:rc,currentTokenIds:Array.from(this.currentTokenIds)}}forceReconnect(){this.subscriptions.size!==0&&(this.reconnectAttempts=0,this.disconnect(),this.connect(new Set(this.subscriptions.keys())))}destroy(){this.cancelReconnection(),this.disconnect(),this.subscriptions.clear(),this.subscriptionOrder.length=0,this.connectionState="disconnected",this.reconnectAttempts=0}},ic=new Hi;u();d();u();d();u();d();var Gt;(function(e){e[e.Always=1/0]="Always",e[e.Short=x({days:1})]="Short",e[e.Medium=x({days:3})]="Medium",e[e.Long=x({days:7})]="Long",e[e.VeryLong=x({days:30})]="VeryLong",e[e.Never=0]="Never"})(Gt||(Gt={}));var we;(function(e){e[e.Immediate=0]="Immediate",e[e.VeryShort=x({seconds:1})]="VeryShort",e[e.Short=x({seconds:15})]="Short",e[e.Medium=x({minutes:3})]="Medium",e[e.Long=x({minutes:5})]="Long",e[e.VeryLong=x({minutes:10})]="VeryLong",e[e.Never=1/0]="Never"})(we||(we={}));var Ye;(function(e){e[e.VeryShort=x({seconds:2})]="VeryShort",e[e.Short=x({seconds:15})]="Short",e[e.Medium=x({minutes:3})]="Medium",e[e.Long=x({minutes:5})]="Long"})(Ye||(Ye={}));var oc=x({seconds:10}),sc={gcTime:Gt.Short,staleTime:we.Short};u();d();var zl="prices",Cr=o((e,t)=>{if(!zn(e))return;let r=e.response?.status;if(!r||r===0||r>=500||r===404){U.addBreadcrumb(zl,e.message,ne.Info,t);return}r>=400&&r<500&&U.captureError(e,V.Prices)},"captureClientError");var cc=h.object({price:h.number(),priceChange24h:h.number(),lastUpdatedAt:h.string().datetime().optional()}),ac=h.object({prices:h.record(jo,cc)});async function Ct({tokens:e}){try{let t=e.filter(a=>!ct.get(a.chainId)?.pricesDisabled),n={tokens:t.map(a=>({token:a}))},r="/price/v1",i,s=re.timeout(oc).retry(1,200).validateStatus(!0).api();if(t.length===0)return{};if(t.length===1){let a=t[0];r+=`/${a.chainId}`,a.resourceType===de.nativeToken?r+=`/nativeToken/${a.slip44}`:r+=`/address/${a.address}`;let c=await s.get(r);i=ac.parse({prices:{[ie(a)]:c.data}})}else{let a=await s.post(r,n);i=ac.parse(a.data)}return Yl(i.prices)}catch(t){throw Cr(t),t}}o(Ct,"getPrices");function Yl(e){let t={};for(let n of Object.keys(e)){let{price:r,priceChange24h:i,lastUpdatedAt:s}=e[n],a={price:r,usd:r,usd_24h_change:i,lastUpdatedAt:s};t[n]=a}return t}o(Yl,"pricesToPriceMap");u();d();function Pr(e){return{caip19:qi(e)}}o(Pr,"parseCaip19Able");function qi(e){return typeof e=="string"?Me(e):e}o(qi,"fungibledCaip19");u();d();var Nr="prices",Ee={price:o(e=>[Nr,{id:e}],"price"),priceError:o(()=>[Nr,"error"],"priceError"),priceHistory:o((e,t)=>[Nr,e,t],"priceHistory"),priceHistoryInterval:o((e,t,n,r)=>[Nr,e,t,n,...r?[r]:[]],"priceHistoryInterval"),tempPrices:o(e=>["tempPrices",e],"tempPrices")};var uc=new Error("Price not available"),dc=o(e=>{let t=e?e.data:void 0;return t?Xl(t):void 0},"tokenIdFromQuery"),lc=o(({query:e,enabled:t=!0,queryOptions:n={refetchInterval:Ye.Short,staleTime:we.Short,gcTime:we.Short}})=>{let r=dc(e),i=n.refetchInterval,s=n.staleTime,a=n.gcTime,c=e?e.data:void 0,f=c?Pr(c).caip19.chainId:void 0,l=f?!ct.get(f).pricesDisabled:!1;return{enabled:t&&!!r&&l,queryKey:Ee.price(r),refetchInterval(p){return p.state.error===uc?!1:i},staleTime:s,gcTime:a,retry:!1,queryFn:o(async()=>{if(!c||!r)throw new Error("No caip19able provided");let p=qi(c);try{let b=(await Ct({tokens:[p]}))[r];if(!b)throw new Error(`Failed to fetch price for ${c}`);return b}catch(g){let b=g;throw r&&(b.response?.status===404||b.response?.status===400)?uc:g}},"queryFn")}},"getPriceQueryConfig");function Xl(e){return typeof e=="string"?e:ie(e)}o(Xl,"encodedCaip19");var Jl=Mi(()=>({__typename:j.typename("TokenPrice"),id:j.id,usd:j.union(j.number,j.undefined),usd_24h_change:j.union(j.number,j.undefined),price:j.union(j.number,j.undefined),priceChange24h:j.union(j.number,j.undefined),currencyValue:j.union(j.number,j.undefined),currencyChange:j.union(j.number,j.undefined),lastUpdatedAt:j.union(j.string,j.undefined)})),Zl=Ui(()=>({id:"PriceStream",response:Jl,params:{tokenId:j.union(j.string,j.undefined)},subscribe:o((e,t)=>e.tokenId?ic.subscribe(e.tokenId,(n,r)=>{t({...r,__typename:"TokenPrice",id:e.tokenId})}):()=>{},"subscribe")})),_l={data:void 0,error:void 0,isFetched:!1,isFetching:!1,isSuccess:!1,isLoading:!1,isError:!1};function ef(e){let t=Me(e).chainId;return v.isEthereumNetworkID(t)||v.isSolanaNetworkID(t)||v.isPolygonNetworkID(t)||v.isBaseNetworkID(t)}o(ef,"isSupportedStreamingChain");var tf=o((e,t)=>{let[n]=(0,vn.useState)(e),{value:r,error:i,isReady:s,isResolved:a,isPending:c,isRejected:f,isFetching:l}=rs(Zl,{tokenId:n});return(0,vn.useMemo)(()=>t?{data:r,error:i,isFetched:s,isFetching:l,isSuccess:a,isLoading:c,isError:f}:_l,[t,r,i,s,a,c,f,l])},"usePriceLegacyInteropSafe");function Pt({query:e,enabled:t=!0,queryOptions:n={refetchInterval:Ye.Short,staleTime:we.Short,gcTime:we.Short}}){let r=dc(e),[i]=(0,vn.useState)(()=>us("enable-signalium-query-price-streaming")&&!!r&&ef(r)),s=tf(r,i),a=R(lc({query:e,enabled:t&&!i,queryOptions:n}));return i?s:a}o(Pt,"usePrice");u();d();u();d();var hc=K(q());u();d();var fc=o(function(e,t=0){let n=3735928559^t,r=1103547991^t;for(let i=0,s;i<e.length;i++)s=e.charCodeAt(i),n=Math.imul(n^s,2654435761),r=Math.imul(r^s,1597334677);return n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(n^n>>>13,3266489909),4294967296*(2097151&r)+(n>>>0)},"cyrb53");u();d();function mc(e){return e.data.map(Pr)}o(mc,"parseQueries");u();d();var nf=500;async function pc({queryClient:e,queries:t}){let n={};try{let r={},i=[];for(let l of t){let m=l.caip19,p=ie(m);if(r[p])continue;r[p]=!0;let g=Ee.price(p),b=e.getQueryState(g);if(b&&Date.now()-b.dataUpdatedAt<sc.staleTime){n[p]=b.data;continue}i.push(m)}let s=await Promise.allSettled(ms(i,nf).map(l=>Ct({tokens:l}))),a=[],c=s.some(l=>l.status==="rejected"),f=s.reduce((l,m)=>m.status==="rejected"?l:{...l,...m.value},{});for(let l of i){let m=ie(l),p=f[m],g=Ee.price(m);!p&&c&&(p=e.getQueryData(g)),p&&(n[m]=p),a.push(()=>{let b=p??null;e.setQueryData(g,b,{updatedAt:Date.now()})})}if(c){let l=e.getQueryData(Ee.priceError())??0;e.setQueryData(Ee.priceError(),l+1)}else e.removeQueries({queryKey:Ee.priceError()});rf(a,50)}catch(r){Cr(r)}return n}o(pc,"fetchPricesFn");function rf(e,t){let n=e.length,r=0;function i(){let s=e.slice(r,r+t);er.batch(()=>{s.forEach(a=>a())}),r+=t,r<n&&setTimeout(i,0)}o(i,"processNextChunk"),i()}o(rf,"updateCacheInChunks");var of=o(e=>typeof e=="string"?e:e.resourceType==="nativeToken"?e.slip44:e.address,"uniqueStringFromCaip19Able"),sf=o((e,t)=>e.localeCompare(t),"compare"),yc=o(e=>{let t=e.map(of).sort(sf).join(",");return fc(t)},"getPricesKey"),gc=o(({query:e,enabled:t=!0,key:n,queryOptions:r={refetchInterval:Ye.Short},queryClient:i})=>{let{refetchInterval:s}=r,a=mc(e),c=t&&e!=null&&e.data.length>0;return{queryKey:Ee.tempPrices(n),staleTime:we.Immediate,gcTime:Gt.Never,refetchInterval:s,queryFn:o(()=>pc({queryClient:i,queries:a}),"queryFn"),enabled:c}},"getPricesQueryConfig");function Gi({query:e,enabled:t=!0,queryOptions:n={refetchInterval:Ye.Short}}){let r=ee(),i=(0,hc.useMemo)(()=>yc(e.data),[e]);return R(gc({query:e,enabled:t,key:i,queryOptions:n,queryClient:r}))}o(Gi,"usePrices");u();d();var Qi=o(()=>R({queryKey:Ee.priceError(),queryFn:o(()=>{throw new Error("This query is cache-only")},"queryFn"),enabled:!1,initialData:0,staleTime:1/0}),"usePricesErrorCount");u();d();u();d();var JT=h.object({caip19:h.string(),price:h.number().nullish(),priceChange24h:h.number().nullish(),lastUpdatedAt:h.string(),marketCap:h.string().nullish()}),af=[h.literal("1H"),h.literal("1D"),h.literal("1W"),h.literal("1M"),h.literal("YTD"),h.literal("ALL")],ZT=h.union(af).nullish().transform(e=>e??"1D");var cf=[h.literal("1m"),h.literal("5m"),h.literal("1h"),h.literal("4h"),h.literal("1d"),h.literal("1w"),h.literal("4w"),h.literal("1mo")],_T=h.union(cf).nullish().transform(e=>e??"1d"),uf=h.object({unixTime:h.number(),value:h.string()}),bc=h.object({history:h.array(uf)});var An=new Error("Price history unavailable for this token"),ji=new Error("Insufficient data for this time frame and token"),df=o(async({caip19:e,timeFrame:t})=>{let n=Me(e);if(ct.get(n.chainId)?.pricesDisabled)throw An;let i=await re.api().get("/price-history/v1",{params:{token:e,type:t}});if(i.status===400)throw An;let s=bc.safeParse(i.data);if(!s.success)throw An;if(s.data.history.length<2)throw ji;return s.data.history},"fetchPriceHistory"),lf=o(({caip19:e,timeFrame:t})=>({queryKey:Ee.priceHistory(e,t),queryFn:o(()=>df({caip19:e,timeFrame:t}),"queryFn"),staleTime:we.Short,gcTime:we.Short}),"getPriceHistoryQueryConfig"),wc=o(e=>R(lf(e)),"usePriceHistory");u();d();var ff=1*60*1e3,mf=o(e=>{let t=e.queryKey[1];return Object.prototype.hasOwnProperty.call(t??{},"id")?e.state.dataUpdatedAt>Date.now()-ff:String(t)===Ee.priceError()[1]},"pricesShouldDehydrateQueryPredicate");u();d();var ae=K(q());u();d();var Ec=o(({priceHistory:e,realtimePriceUpdates:t})=>{let n=e.at(-1),r=e.at(-2);if(!n||!r)return e.map(c=>({...c,tooltipUnixTime:c.unixTime}));let i=n.unixTime-r.unixTime,s=t.map((c,f)=>({unixTime:n.unixTime+(f+1)*i,value:c.value,tooltipUnixTime:c.unixTime}));return[...e.map(c=>({...c,tooltipUnixTime:c.unixTime})),...s]},"ensureConsistentIntervals");u();d();var Tc=o(({priceHistory:e,currentPrice:t})=>{let n=e.at(-1),r=e.at(-2),i=e.map(c=>({...c,tooltipUnixTime:c.unixTime}));if(t===void 0||!n||!r)return i;let s=n.unixTime-r.unixTime,a={unixTime:n.unixTime+s,value:t.toString(),tooltipUnixTime:n.unixTime+s};return[...i,a]},"ensureLatestPricing");u();d();var vc=K(rl()),Qt=K(q());var Ac=o((e,t=100)=>{let[n,r]=(0,Qt.useState)(e),i=(0,Qt.useMemo)(()=>(0,vc.default)(s=>r(s),t),[t]);return(0,Qt.useEffect)(()=>i(e),[i,e]),n},"useThrottle");var pf=o(({error:e,chainId:t,prices:n,isPending:r})=>{if(ct.get(t).pricesDisabled)return se.t("assetDetailPriceNoValue");if(e===An)return se.t("assetDetailPriceHistoryUnavailable");if(e===ji||!r&&n.length===0)return se.t("assetDetailPriceHistoryInsufficientData");if(e)return se.t("assetDetailPriceHistoryError")},"getErrorText"),hf=o(({caip19:e,userLocale:t="en-US",timeFrame:n="1D"})=>{let{t:r}=ke(),i=Re(),s=ee(),[a,c]=(0,ae.useState)(n),f=(0,ae.useCallback)(_=>{if(_!==a){c(_);try{let{symbol:Se}=s.getQueryData(hr.tokenDetails({caip19:e,includePrice:!0}))||{};i.capture("onPublicFungibleTimeframeChanged",{data:{timeFrame:_,caip19:e,symbol:typeof Se=="string"?Se:void 0}})}catch(Se){console.error("error capturing onPublicFungibleTimeframeChanged",Se)}}},[i,e,s,a]),{data:l,isPending:m,error:p}=wc({caip19:e,timeFrame:a}),{data:g}=Pt({query:{data:e},queryOptions:{refetchInterval:Ye.VeryShort,staleTime:we.VeryShort}}),b=(0,ae.useMemo)(()=>{if(l){if(g?.price&&g.lastUpdatedAt&&l){let _=g.price,Se=new Date(g.lastUpdatedAt),qn={value:_.toString(),unixTime:Math.floor(Se.getTime()/1e3)};return Ec({priceHistory:l,realtimePriceUpdates:[qn]})}return Tc({priceHistory:l,currentPrice:g?.price})}},[l,g?.price,g?.lastUpdatedAt]),T=Me(e).chainId,S=g?.price,I=g?.usd_24h_change,Q=(0,ae.useMemo)(()=>!S||!I?null:S/(1+I/100),[S,I]),[L,W]=(0,ae.useState)(null);(0,ae.useEffect)(()=>{b?.length&&W(b)},[b,W]);let B=(0,ae.useMemo)(()=>b||L||[],[b,L]),ve=pf({error:p,chainId:T,prices:B,isPending:m});(0,ae.useEffect)(()=>{ve&&W(null)},[ve]);let it=(0,ae.useMemo)(()=>[{timeFrame:"1H",label:r("assetDetailTimeFrame1H")},{timeFrame:"1D",label:r("assetDetailTimeFrame1D")},{timeFrame:"1W",label:r("assetDetailTimeFrame1W")},{timeFrame:"1M",label:r("assetDetailTimeFrame1M")},{timeFrame:"YTD",label:r("assetDetailTimeFrameYTD")},{timeFrame:"ALL",label:r("assetDetailTimeFrameAll")}].map(_=>({..._,label:_.label?.toUpperCase()})),[r]),[ot,rn]=(0,ae.useState)(null),Ke=Ac(ot,100),[A,E]=(0,ae.useMemo)(()=>B.length?[new G(B[0].value).toNumber(),S??null]:[Q??null,S??null],[S,Q,B]),C=(0,ae.useMemo)(()=>Ke??E,[Ke,E]),P=(0,ae.useMemo)(()=>E===null||A===null?null:E-A,[A,E]),M=(0,ae.useMemo)(()=>C===null||A===null?null:C-A,[C,A]),N=(0,ae.useMemo)(()=>{if(M===null||A===null||A===0)return null;let _=M/A*100;return`${ws(_,{includePlusPrefix:!0})}%`},[M,A]),H=(0,ae.useCallback)(_=>{let Se=new Date(_*1e3),qn=Se.toLocaleTimeString(t,{hour:"2-digit",minute:"2-digit"}),Lo=Se.toLocaleString(t,{month:"short",day:"2-digit"}),Xd=Se.getFullYear(),Bo=B.at(-1);if(Bo&&Bo.unixTime===_)return r("assetDetailPriceHistoryNow");switch(a){case"1H":case"1D":return qn;case"1W":case"1M":return`${qn}, ${Lo}`;case"YTD":case"ALL":return`${Lo}, ${Xd}`;default:return a}},[t,B,a,r]),$=(0,ae.useMemo)(()=>ct.get(T).pricesDisabled??!1,[T]);return{activeTimeFrame:a,setActiveTimeFrame:f,prices:B,isPending:m,errorText:ve,timeFrames:it,setScrubValue:rn,scrubValue:Ke,currentPrice:C,overallPriceChange:P,currentPriceChange:M,formattedPercentageChange:N,formatTimeFrameText:H,hidePriceAmounts:$,hideTimeFrames:$}},"usePriceHistoryState");u();d();u();d();var Wi=h.object({feerate:h.string()}),Sc=h.object({conservative:Wi,economical:Wi,unset:Wi}),yf=h.object({recommended:h.object({priceEstimates:Sc}),bitcoin_rpc:h.object({priceEstimates:Sc})}),gf=h.object({gasPriceSources:yf}),bf=new X("1.25"),wf=new X("1.5"),xc=o(async(e,t=!0)=>{let n,r,i;try{let{priceEstimates:s}=(await Ef(e)).gasPriceSources.recommended,{conservative:a,economical:c,unset:f}=s;n=new X(a.feerate),r=new X(c.feerate),i=new X(f.feerate)}catch(s){if(!t)throw s;let a=await Ws(e).estimateSmartFee(2,"ECONOMICAL");i=new X(a.feerate),r=i.times(bf),n=i.times(wf)}return{[me.fast]:{btcPerKilobyte:n.multipliedBy(1)},[me.standard]:{btcPerKilobyte:r.multipliedBy(1)},[me.slow]:{btcPerKilobyte:i.multipliedBy(1)}}},"getBitcoinTransactionSpeeds");async function Ef(e){let t=`https://gas-price-oracle.phantom.app/?chainId=${e}`,n=await re.headers({"Content-Type":"application/json"}).get(t);return gf.parse(n.data)}o(Ef,"getBitcoinTransactionUnitCosts");u();d();var jt="gas-estimation";var Tf=3,vf=600,Af=x({seconds:30}),Nt=o(({networkID:e,enableFallback:t=!1,retry:n=Tf,retryDelay:r=vf,enabled:i=!0})=>R({queryFn:o(async()=>{try{if(!e)throw new Error("Missing networkID");if(v.isBitcoinNetworkID(e))return await xc(e,t);if(v.isEVMNetworkID(e))return await Os(e,t);if(v.isSolanaNetworkID(e))throw new Error("Transaction speeds is not supported for Solana.");if(v.isSuiNetworkID(e))throw new Qo("transaction speeds to unit cost");return Ce(e)}catch(s){throw s instanceof Is||(U.addBreadcrumb(jt,`enableFallback: ${t}, networkID: ${e}`,ne.Info),U.captureError(s,V.Transaction)),s}},"queryFn"),queryKey:z.transactionSpeedsToUnitCost(e),refetchOnMount:"always",retry:n,retryDelay:r,staleTime:Af,enabled:i&&!!e&&(v.isEVMNetworkID(e)||v.isBitcoinNetworkID(e)),placeholderData:_n}),"useTransactionSpeedsToUnitCost");u();d();u();d();var Cc=o(async(e,t)=>{let n=Fs(e),r=await Cs.eth_estimateGas(n,[t]);if("error"in r)throw new Error(`[${r.error.code}] ${r.error.message}`);return new X(r.result)},"estimateGas");var zA=new X(21e3),Sf=6,xf=600,Cf=x({seconds:5}),Pf=x({days:1}),$i=o((e,t=!0)=>R({queryFn:o(async()=>{if(!e)throw new Error("Args is required for calculating transaction units.");try{return await Nf(e)}catch(r){throw U.addBreadcrumb(jt,`networkId: ${e?.networkID}`,ne.Info),U.captureError(r,V.Transaction),r}},"queryFn"),queryKey:z.transactionUnitAmount(e),enabled:!!e&&(v.isEVMNetworkID(e.networkID)||v.isBitcoinNetworkID(e.networkID))&&t,retry:Sf,retryDelay:xf,staleTime:Cf,gcTime:Pf}),"useTransactionUnitAmount"),Nf=o(async e=>{if(cr(e)){let{gas:t}=e.unsignedTransaction;if(t)return{gasLimit:new X(t,16)};{let n=await Cc(e.networkID,e.unsignedTransaction);return{gasLimit:new X(Us(n))}}}else if(ar(e)){let t=e.psbtChain,n=t?new X(oi(t.map(i=>i.additionalCost.vb.toNumber()))):new X(0),r=t?new X(oi(t.map(i=>i.additionalCost.sats.toNumber()))):new X(0);return{virtualBytes:new X(e.vb),additionalCosts:{vb:n,sats:r}}}else throw new Error(`Unsupported transaction networkId: ${e.networkID} for calculating transaction units.`)},"getTransactionUnitAmount");u();d();u();d();var Dr=K(el(),1),Nc=K(Ft(),1);var Pc=(0,Dr.struct)([(0,Dr.u8)("instruction")]);function Dc(e,t,n,r=[],i=dn){let s=pa([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],n,r),a=Buffer.alloc(Pc.span);return Pc.encode({instruction:fa.CloseAccount},a),new Nc.TransactionInstruction({keys:s,programId:i,data:a})}o(Dc,"createCloseAccountInstruction");u();d();var Df=x({seconds:30}),Mf=x({minutes:5}),Mc=o(e=>R({queryKey:z.transactionAdditionalCosts(e),queryFn:o(async()=>{if(!e)return new X(0);let t=At.get(e.networkID).additionalTransactionCost;return t?await t(e):new X(0)},"queryFn"),enabled:!!e,staleTime:Df,gcTime:Mf}),"useTransactionAdditionalCosts");var Ff=6,kf=600,Rf=x({seconds:5}),If=x({days:1}),Of=[me.fast,me.standard,me.slow],Uf=o(e=>{if(!e)return me.fast;for(let t of Of)if(e[t])return t;throw new Error("No valid transaction speeds found.")},"getFastestSpeed"),zi=o(e=>{let t=Kf(e),n=e?.queryOptions?.refetchInterval,{data:r,isError:i}=$i(e?.multichainTransaction,t),{data:s}=Nt({networkID:e?.networkID,enableFallback:!0,refetchInterval:n}),{data:a}=Mc(e?.multichainTransaction),c=Bf(e,r,s);return R({queryFn:o(async()=>{try{if(!e)throw new Error("Missing args");let{multichainTransaction:l,transactionSpeed:m=me.standard}=e;if(!l)throw new Error("Multichain transaction is null.");if(i&&Yi(e.networkID))throw new Error("Transaction unit amount is required but errored.");if(cr(l)||ar(l)){if(!s)throw new Error("Missing transactionSpeedsToUnitCost");if(!r)throw new Error("Missing transactionUnit");let p=m==="fastest"?Uf(s):m,g=s[p];if(!g)throw new Error(`Missing transactionSpeedsToUnitCost for ${m}`);return Lt(l.networkID,g,r,a)}if(Gs(l))return l.networkID===Yn.Localnet?{networkID:l.networkID,value:0,highFees:!1}:await ha(l.networkID,l.transaction.map(g=>"version"in g?g.message:g.compileMessage()));if(Qs(l))return await ca(l);Ce(l)}catch(l){throw U.addBreadcrumb(jt,`chainId: ${e?.networkID}`,ne.Info),U.captureError(l,V.Transaction),l}},"queryFn"),queryKey:z.gasEstimation(e?.networkID,e?.multichainTransaction,e?.transactionSpeed,a),enabled:c,retry:Ff,retryDelay:kf,refetchInterval:n,staleTime:Rf,gcTime:If,placeholderData:o(l=>l,"placeholderData")})},"useGasEstimation");function Yi(e){return v.isBitcoinNetworkID(e)||v.isEVMNetworkID(e)?!0:v.isSolanaNetworkID(e)||v.isSuiNetworkID(e)?!1:Ce(e)}o(Yi,"isTransactionUnitAmountRequired");function Lf(e){return v.isBitcoinNetworkID(e)||v.isEVMNetworkID(e)?!0:v.isSolanaNetworkID(e)||v.isSuiNetworkID(e)?!1:Ce(e)}o(Lf,"isTransactionUnitCostsBySpeedRequired");function Bf(e,t,n){if(!e)return!1;let{networkID:r,multichainTransaction:i}=e;return i?(!!t||!Yi(r))&&(!!n||!Lf(r)):!1}o(Bf,"calculateGasEstimationEnabled");function Kf(e){return e?Yi(e.networkID):!1}o(Kf,"calculateTransactionUnitAmountEnabled");u();d();u();d();var Vf=new Error("missing price"),Hf=new Error("Unable to format gas estimation"),Mr=o((e,t)=>{if(!t.usd)throw Vf;try{let n=v.getTokenDecimals(e.networkID);if(sr(e)){let r=_s(e),s=new G(r).div(an(n)).times(new G(t.usd));return{gasEstimationPriceUSD:un(s),gasEstimationPriceUSDNumber:s.toNumber(),gasEstimationAmount:r}}else if(It(e)){let r=ea(e),s=r.div(new G(fe.LAMPORTS_PER_SOL)).times(t.usd);return{gasEstimationPriceUSD:un(s),gasEstimationPriceUSDNumber:s.toNumber(),gasEstimationAmount:r}}else if(or(e)){let i=bs(e.gasBudget,n).times(t.usd);return{gasEstimationPriceUSD:un(i),gasEstimationPriceUSDNumber:i.toNumber(),gasEstimationAmount:e.gasBudget}}else if(Ot(e)){let r=ta(e),s=new G(r).div(an(n)).times(t.usd);return{gasEstimationPriceUSD:un(s),gasEstimationPriceUSDNumber:s.toNumber(),gasEstimationAmount:r}}else throw Ce(e),new Error("unsupported chain type")}catch{throw Hf}},"createGasEstimationPrice");var qf=o((e,t,n)=>{let r=e?v.getChainID(e):null,i=r?Xn(r):void 0,{data:s,isFetched:a}=Pt({query:{data:i}}),c=!!e&&!!t&&a,f=z.gasEstimationPrice(e,t);return R({enabled:c,queryKey:f,queryFn:o(()=>{if(!s||!t)throw new Error("missing args");return Mr(t,s)},"queryFn"),refetchOnMount:!0,placeholderData:_n,...n||{}})},"useGasEstimationPrice");u();d();u();d();var Fc=Object.prototype.hasOwnProperty;function kc(e,t,n){for(n of e.keys())if(Wt(n,t))return n}o(kc,"find");function Wt(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Wt(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=kc(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=kc(t,i),!i)||!Wt(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Fc.call(e,n)&&++r&&!Fc.call(t,n)||!(n in t)||!Wt(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}o(Wt,"dequal");var qe=K(q(),1);u();d();var Sn=K(nl(),1),Rc=K(q(),1);function Ic(e){let t=(0,Rc.useRef)((0,Sn.default)());R({queryKey:["PENDING-TX-POLLER",e],enabled:e.length>0,queryFn:o(()=>Zs(e),"queryFn"),refetchInterval:o(()=>(0,Sn.default)().diff(t.current,"seconds")<30?5*1e3:(0,Sn.default)().diff(t.current,"minutes")<2?15*1e3:(0,Sn.default)().diff(t.current,"minutes")<5?30*1e3:!1,"refetchInterval")})}o(Ic,"usePendingTransactionsFromEndpoint");var xn=o(e=>{let t=(0,qe.useRef)([]),[n,r]=(0,qe.useState)([]),i=(0,qe.useMemo)(()=>e.map(c=>`${c.networkID}:${c.address}`).join(","),[e]);(0,qe.useEffect)(()=>{t.current=[],r([])},[i]);let s=Ys(zs.PendingTransactions);Ic(e);let a=(0,qe.useMemo)(()=>Xs(s??{},e),[e,s]);return(0,qe.useEffect)(()=>{if(!Wt(a,t.current)){let c=t.current.filter(f=>!a.find(l=>l.id===f.id));c.length>0&&r(c),t.current=a}},[a]),(0,qe.useEffect)(()=>{if(n.length>0){let c=setTimeout(()=>{r([])},1e3);return()=>clearTimeout(c)}},[n]),{pendingTransactions:a,removedPendingTransactions:n}},"usePendingTransactions");u();d();var Bc=K(q(),1);u();d();var Oc=o(e=>({connection:Ut(e),cluster:dr(e)}),"solanaNetworkIDToConnection"),Uc=o(()=>Oc(wt.Solana.Mainnet),"getDefaultSolanaConnection"),Lc=o(e=>{let t,n=e?.addresses??[];for(let i of n)if(v.isSolanaNetworkID(i.networkID)){t=i.networkID;break}let r=t??wt.Solana.Mainnet;return Oc(r)},"selectSolanaConnection");var Cn=o(()=>{let e=(0,Bc.useMemo)(()=>Uc(),[]),{data:t=e}=Ie({select:Lc});return t},"useSelectedSolanaConnection");u();d();var Kc=K(_d(),1);u();d();var lt=K(q(),1);var Vc=(0,lt.createContext)(null),Gf=o(({children:e})=>{let{data:t}=xs(),{data:n,isLoading:r}=li(t),i=t&&n?ai[t].languageCode:rr.languageCode,s=t||rr.value,a=t&&n?ai[t].symbol:rr.symbol,c=(0,lt.useCallback)((p,g)=>Intl.NumberFormat(i,{style:"currency",currency:s,...g}).format(p),[s,i]),f=(0,lt.useCallback)(p=>!t||!n?Number(p):G(p).div(G(n)).toNumber(),[t,n]),l=(0,lt.useCallback)((p,g)=>{if(!t||!n)return Number(p);let b=G(p).times(G(n));return g===void 0?b.toNumber():b.decimalPlaces(g).toNumber()},[t,n]),m={isLoading:r,currencyLocale:i,currencySymbol:a,currencyCode:s,toUsd:f,fromUsd:l,formatLocalizedPrice:c};return(0,Kc.jsx)(Vc.Provider,{value:m,children:e})},"LocalizedCurrencyProvider"),Pn=o(()=>{let e=(0,lt.useContext)(Vc);if(!e)throw new Error("useLocalizedCurrency must be used within a LocalizedCurrencyProvider");return e},"useLocalizedCurrency");u();d();u();d();var pu=K(q(),1);u();d();var Hc=o(async e=>{try{return await ks(wt.Ethereum.Mainnet).resolveName(e)}catch(t){return console.error(t),null}},"resolveEVMDomainName");u();d();var qc=o(async(e,t)=>{let n="/uns/v1/resolve";try{let r=await re.api().headers({"Content-Type":"application/json"}).post(n,{query:e,chainId:t});if(!De(r))throw mi;let i=r.data;if(i.address===""||i.status!=="OK")throw mi;return i.address}catch{return null}},"resolveSolanaHandle");u();d();var lu=K(du(),1);var fu=o(async(e,t)=>{try{if(!v.isSolanaNetworkID(t))return null;let n=dr(t),r=$s(n),s=await new lu.TldParser(r).getOwnerFromDomainTld(e);return s?s.toString():null}catch{return null}},"fetchAnsDomainOwner");u();d();var mu=o(async(e,t)=>{try{if(!v.isSuiNetworkID(t))return null;let n=js(t);return e.toLowerCase().endsWith(".sui")&&await n.resolveNameServiceAddress({name:e})||null}catch{return null}},"fetchSuiNsDomainOwner");function lo(e,t){let n=e?.toLowerCase(),r=fo(n,t),i=r.error,s=(0,pu.useMemo)(()=>i===ir?se.t("sendFormErrorInvalidDomain"):i===Ns?se.t("sendFormErrorInvalidSolanaAddress"):i===Ds?se.t("sendFormErrorInvalidTwitterHandle"):i===fi?se.t("sendFormErrorInvalidUsername"):"",[i]);return{...r,error:s}}o(lo,"useResolveDomainOwner");function fo(e,t){let n=Ts(),r=Re(),i=!!e&&!!t,s=z.resolveDomainName(e,t);return R({queryKey:s,queryFn:o(async()=>{if(!e||!t)throw Ps;let c=await hu(e,t,n,r);return{address:c?.owner??null,type:c?.type??null,handle:e}},"queryFn"),enabled:i})}o(fo,"useFetchDomainOwner");var km=o(async(e,t)=>{try{if(e.startsWith("@")||!v.isEVMNetworkID(t))return null;let[n]=fs(e);if(n){let r=await Hc(e);if(!r)throw ir;return r}return null}catch(n){return U.captureError(n instanceof Error?n:new Error(`Unable to resolve EVM domain: ${e}`),V.Transaction),null}},"fetchEVMDomainOwner"),Rm=o(async(e,t,n)=>{try{if(e.startsWith("@")||!v.isSolanaNetworkID(t))return null;let[r,i,s]=ls(e);(r||i||s)&&n.capture("resolveDomainBonfida");let a=r||i||s,c=null;if(a&&(c=await qc(e,t),!c))throw ir;return c}catch(r){return U.captureError(r instanceof Error?r:new Error(`Unable to resolve solana domain: ${e}`),V.Transaction),null}},"fetchSolanaDomainOwner"),Im=o(async(e,t,n)=>{try{if(!e.startsWith("@"))return null;let r=e.slice(1),i=await n.getUserProfileByUsername(r),s=i?.username?.toLowerCase()===r.toLowerCase(),a=i?.addresses?i.addresses?.[t]!==void 0:!1,c=!!i&&s&&a,f=null;if(c&&(f=i.addresses[t],!f))throw fi;return f}catch(r){return U.captureError(r instanceof Error?r:new Error(`Unable to resolve username: ${e}`),V.Auth),null}},"fetchUsernameDomainOwner");async function hu(e,t,n,r){let i=nr.isFeatureEnabled("kill-suins"),s=[{type:"username",fetch:Im(e,t,n)},{type:"solana",fetch:Rm(e,t,r)},{type:"evm",fetch:km(e,t)},{type:"ans",fetch:fu(e,t)}];i||s.push({type:"suins",fetch:mu(e,t)});let a=await Promise.all(s.map(({fetch:f})=>f)),c=a.findIndex(f=>f!==null);return c===-1?null:{type:s[c].type,owner:a[c]}}o(hu,"fetchDomainOwner");u();d();var yu=K(q(),1);function Om(e,t){let n=ys(e,500),{data:r,error:i,isLoading:s}=lo(n,t),c=r?.address??e,f=e.length>0,m=!f||e!==n||s,p=(0,yu.useMemo)(()=>{if(m)return;if(i)return i;if(!zo(c,t))return se.t("sendFormInvalidAddress",{assetName:v.getChainName(t)})},[t,m,i,c]);return{recipientError:p,currentRecipient:c,isStaleRecipient:m,disabledDueToRecipient:!!p||m||!f,isRecipientLoading:s&&e!==""}}o(Om,"useRecipient");u();d();var Um=3,Lm=500,Bm=5e3,Km=o((e,t,n)=>R({async queryFn(){if(v.isEVMNetworkID(e))try{return await Vm(e,t,n)}catch(r){throw U.captureError(r,V.Transaction),r}},queryKey:z.gasEstimationTimeToMine(e,t,n),retry:Um,retryDelay:Lm,refetchInterval:Bm,enabled:v.isEVMNetworkID(e)&&v.isMainnetNetworkID(e)}),"useEvmTimeToMineEstimate");async function Vm(e,t,n){let r=`https://gas-price-oracle.phantom.app/time_to_mine?chainId=${e}&maxFeePerGas=${t}&maxPriorityFeePerGas=${n}`,i={Accept:"application/json","Content-Type":"application/json"},s=await re.headers(i).get(r);if(s.status!==200)throw new Error("Error estimating time to mine");return s.data}o(Vm,"fetchEvmTimeToMineEstimate");u();d();u();d();var Hm=o(({networkID:e,refetchInterval:t,transactionSpeed:n=me.standard,gasLimit:r,enabled:i=!0})=>{let{data:s,status:a,fetchStatus:c,isError:f,isPending:l,isFetched:m,isSuccess:p}=Nt({networkID:e,refetchInterval:t,enableFallback:!0,enabled:i}),g;if(i&&s&&r){let{maxFeePerGas:w,maxPriorityFeePerGas:T}=s[n];g={networkID:e,gasLimit:r,maxFeePerGas:w,maxPriorityFeePerGas:T}}return{status:a,data:g,isError:f,isLoading:l,fetchStatus:c,hasFailed:m&&!p}},"useEvmGasEstimation");u();d();var gu=o(e=>{let t=e[0]?.networkID,n=t?v.getChainID(t):null,r=n?Xn(n):void 0,{data:i}=Pt({query:{data:r}});return cs({queries:e.map(a=>({queryKey:z.gasEstimationPrice(t,a),queryFn:o(()=>{if(!i||!a)throw new Error("missing args");return Mr(a,i)},"queryFn")}))}).map(a=>a.data)},"useGasEstimationPrices");u();d();var bu=K(q(),1);var qm=x({days:5}),Gm=o(()=>{let e=Re(),t=ee(),{data:n={}}=R({queryKey:z.timestamps(),queryFn:o(()=>({...t.getQueryData(z.timestamps())||{}}),"queryFn")});(0,bu.useEffect)(()=>{let r=Object.values(n),{staleTimestampDatas:i,freshTimestampDatas:s}=r.reduce((c,f)=>{let l=Math.max(...Object.values(f.timestamps));return Date.now()-l>qm?c.staleTimestampDatas.push(f):c.freshTimestampDatas.push(f),c},{staleTimestampDatas:[],freshTimestampDatas:[]});Bs(t,i?.map(c=>c.transactionId)??[]);let a=s.filter(c=>c.timestamps.appUpdated);Ks(a,e,t)},[n,e,t])},"useLogTimestamps");u();d();var wu=K(q(),1);var mo=o((e,t,n=!1)=>{let r=ee();return(0,wu.useCallback)((i,s,a)=>{if(i===void 0)return;let c=z.timestamps(),l=r.getQueryData(c)||{[i]:{chainId:t,transactionType:e,isLedger:n,transactionId:i,timestamps:{}}},m=l[i];if(m?.timestamps[s])return;let p={...l,[i]:{...m||{chainId:t,transactionType:e,isLedger:n,transactionId:i,timestamps:{}},timestamps:{...m?.timestamps??{},[s]:a??Date.now()}}};r.setQueryData(c,p)},[t,n,r,e])},"useMarkTimestamp");u();d();function Qm(e){let t=Fe(),n=$e();return We({mutationFn:o(async i=>await Bt({...i,accountSigner:n,connection:e,storage:t}),"mutationFn")})}o(Qm,"useSignAndSendSolanaTransactionAsync");u();d();var In=K(q(),1);var jm={[me.fast]:"gasFast",[me.standard]:"gasAverage",[me.slow]:"gasSlow"};function Wm(e,t,n){let[r,i]=(0,In.useState)(t),s=n??Vs(e),{data:a={}}=Nt({networkID:e}),c=(0,In.useMemo)(()=>Object.keys(a).reduce((S,I)=>{let Q=I,L=a[Q];return L&&(S[Q]=Lt(e,L,s,void 0)),S},{}),[a,e,s]),f=Object.keys(c),l=Object.values(c),m=gu(Object.values(c)),p=l.map(S=>ur(S)),{fromUsd:g,formatLocalizedPrice:b}=Pn(),w=f.map((S,I)=>{let Q=l[I],L=m[I],W=p[I];return $m(L,W,S,Q,g,b)});return{presets:(0,In.useMemo)(()=>w.map((S,I)=>({description:S,title:se.t(jm[f[I]]),selected:r===f[I],onClick:o(()=>i(f[I]),"onClick"),withBorderTop:I!==0})),[w,f,r]),transactionSpeed:r}}o(Wm,"useTransactionSettingsViewState");var $m=o((e,t,n,r,i,s)=>{let a=[],c=e?.gasEstimationPriceUSDNumber?i(e?.gasEstimationPriceUSDNumber):void 0,f=c?s(c,{maximumFractionDigits:4}):void 0,l=f?se.t("gasUpTo",{amount:f}):t?se.t("gasUpTo",{amount:t}):void 0;a.push(l);let m=r?At.get(r.networkID).transactionSettingsRowFeeDescription?.(r):void 0;a.push(m);let p=r?.networkID;if(p){let g=At.get(p).transactionSpeedDescription(n);g&&a.push(se.t(g))}return a.filter(ps).join("  \u2022  ")},"getSpeedDescriptionString");u();d();function zm(e){let t=xn(e?[e]:[]);if(e&&v.isBitcoinNetworkID(e.networkID))return t.pendingTransactions.length===0?void 0:{title:se.t("sendSummaryBitcoinPendingTxTitle"),description:se.t("sendSummaryBitcoinPendingTxDescription"),buttonText:se.t("gotIt")}}o(zm,"useTxSubmissionCheck");u();d();var Eu=K(q(),1);u();d();var Kr=gs(Fe,e=>ia(new ra(e)));var Ym="transactions-utxo-state",Xm=6,Jm=600,Zm=x({seconds:30}),_m=x({seconds:5}),ep=x({minutes:10}),po=o(e=>{let t=Kr(),n=ii("enable-bypass-utxo-protection");return R({queryFn:Tu(e,t,n),queryKey:z.utxoState(e,n),enabled:vu(e),retry:Xm,retryDelay:Jm,refetchInterval:Zm,staleTime:_m,gcTime:ep})},"useUtxoState");function tp(e){let t=Kr(),n=ee(),r=ii("enable-bypass-utxo-protection"),i=z.utxoState(e,r);(0,Eu.useEffect)(()=>{vu(e)&&n.prefetchQuery({queryKey:i,queryFn:Tu(e,t,r)})},[r,e,n,i,t])}o(tp,"usePrefetchUtxoState");function Tu(e,t,n){return async()=>{try{if(!e)throw new Error("chainAddress not provided when fetching utxo state.");if(ti(e)){await t.refetchUtxos(e,n);let[r,i,s]=await Promise.all([t.getSafeToSendUtxos(e.address,n),t.getInscribedUtxos(e.address),t.getRareSatsUtxos(e.address)]);return{safeToSendUtxos:r,inscribedUtxos:i,rareSatsUtxos:s}}else throw new Error(`Unsupported chain address type for fetching utxo state: ${e.addressType}`)}catch(r){if(zn(r)){let i=r.response?.status;oa(r,i,Ym)}throw r}}}o(Tu,"queryFn");function vu(e){return!!e&&ti(e)}o(vu,"enabled");u();d();function np(e,t){let n=e?.toLowerCase(),{data:r}=fo(n,t);return r?.address||e}o(np,"useResolveDomainOwnerIfNecessary");u();d();var rp=o(({networkID:e,gasEstimation:t,gasEstimationPrice:n})=>{let r=ur(t),{fromUsd:i,formatLocalizedPrice:s}=Pn(),a=n?.gasEstimationPriceUSDNumber?i(n?.gasEstimationPriceUSDNumber):void 0,c=a?s(a,{maximumFractionDigits:4}):void 0,f=!v.isMainnetNetworkID(e),l=c&&!f?c:r||void 0;return At.get(e).networkFeeRowString(l,c)},"useNetworkFee");u();d();var Au=K(q(),1);function ip(e,t,n){let r=e.data.transactions[e.data.transactions.length-1],i=xn(n?.addresses||[]),s=e.networkID;(0,Au.useEffect)(()=>{let S=i.pendingTransactions.find(I=>I.id===e.id);(!S||S.data.transactions.some(I=>I.confirmations>0))&&t()},[i.pendingTransactions,t,e]);let a={networkID:s,unsignedTransaction:r.unsignedTransaction},{data:c,status:f}=zi({networkID:s,transactionSpeed:me.fast,multichainTransaction:a,queryOptions:{refetchInterval:!1}}),l=new X(r.unsignedTransaction.maxFeePerGas??"0"),m=c?.maxFeePerGas&&c?.maxFeePerGas.gt(l)?c?.maxFeePerGas:l,p=new X(r.unsignedTransaction.maxPriorityFeePerGas??"0"),g=c?.maxPriorityFeePerGas&&c?.maxPriorityFeePerGas.gt(p)?c?.maxPriorityFeePerGas:p,b=m?.multipliedBy(1.11).integerValue(),w=g?.multipliedBy(1.11).integerValue();return{data:Lt(s,{maxFeePerGas:b,maxPriorityFeePerGas:w},{gasLimit:new X(r.unsignedTransaction.gas??"0")},c?.l1Fee),status:f}}o(ip,"useReplacementEvmTransactionGasEstimate");u();d();var op=o(()=>{let e=nr.getMultivariateAssignment("frontend-transaction-sharing-delay-ms");if(!e)return hi;let t=parseInt(e);return Number.isNaN(t)?hi:t},"getTransactionSharingDelay"),sp=o(()=>({delayMs:op()}),"useTransactionSharingConfig");u();d();u();d();var Su=o(async(e,t,n)=>{let{accountIdentifier:r,nonce:i,pendingTransaction:s,pendingTransactionInput:a,gasEstimation:c}=t,{data:{transactions:f}}=s,l=f[f.length-1],{callPayload:m,unsignedTransaction:p}=l,{networkID:g}=s,b=await lr({accountSigner:e,accountIdentifier:r,networkID:g,unsignedTransaction:{...p,...Js(c),nonce:aa(new X(i))},callPayload:{...m},pendingTransactionInput:a,storage:n});return{networkID:g,id:b}},"speedUpEvmTransaction");function ap(){let e=$e(),t=Fe();return We({mutationFn:o(async r=>Su(e,r,t),"mutationFn")})}o(ap,"useSpeedUpEvmTransaction");u();d();function cp(e,t){let n=Re(),r=!!t,i=z.waitForTransactionConfirmation(t);return R({enabled:r,queryKey:i,queryFn:o(async()=>{if(!t){let a="Missing chainID or transactionReceipt.";throw new Error(a)}try{if(v.isSolanaNetworkID(t.networkID)){let a=Ut(t.networkID);await ya({connection:a,signature:t.id})}else if(v.isEVMNetworkID(t.networkID))await Rs(t.networkID,t.id);else if(v.isBitcoinNetworkID(t.networkID))await sa(t.networkID,t.id);else if(v.isSuiNetworkID(t.networkID))await ua(t.networkID,t.id);else throw new Error("Unsupported transaction receipt type.");return e(t),!0}catch(a){if(a&&a instanceof Ms)throw a;let c="Unable to send transaction.";a.message&&(c=a.message);let{networkID:f}=t,l={chainId:v.getChainID(f),networkId:f};throw n.capture("waitForTransactionConfirmationError",{data:{...l,errorMessage:a.message}}),new Error(c)}},"queryFn")})}o(cp,"useWaitForTransactionConfirmation");u();d();var up=o(e=>{let t=e.transaction.getData();return R({queryKey:z.suiTransaction(t),queryFn:o(()=>da(e),"queryFn")})},"useSuiTransaction");u();d();var dp=/[e|+|-]/i;function lp(e,t){let n=Math.floor(e*t*100)/100;return!Number.isFinite(n)||n.toString().match(dp)?0:n}o(lp,"assetToDollars");function fp(e,t,n){let r=G(e);return t<=0||!r.isFinite()?0:r.dividedBy(t).decimalPlaces(n).toNumber()}o(fp,"dollarsToAsset");u();d();u();d();function ho({balance:e,priceId:t,priceMap:n}){let r=t?n[t]?.usd:void 0,i=t?n[t]?.usd_24h_change:void 0;if(r===void 0)return{usd:void 0,usd_24h_change:void 0,price:r};let s=e.multipliedBy(r),a;return i!==void 0&&(a=s.minus(s.dividedBy(1+i/100))),{usd:s.toNumber(),usd_24h_change:a?.toNumber(),price:r,priceChange24h:i,currencyValue:s.toNumber(),currencyChange:a?.toNumber()}}o(ho,"calculatePriceData");u();d();u();d();u();d();var _e;(function(e){e.AccountIdToHiddenMints="accountIdToHiddenMints"})(_e||(_e={}));var mp=h.union([h.object({version:h.literal(1),value:h.record(h.array(h.string()))}),h.object({version:h.literal(2),value:h.record(h.array(h.object({mintId:h.string(),status:h.nativeEnum(ln)})))})]),pp=o((e,t)=>{let n=t,r=e;return n||r||null},"visibilityOverridesResolver"),[hp,xu,Cu]=is("fungibles",[{key:_e.AccountIdToHiddenMints,type:"object",validator:mp,nullable:!0,resolver:pp,updateOn:"idle"}]),Pu=o((...e)=>ns(hp,...e),"useFungiblesStorage");var Nu=K(q());function yo(e){let t=Pu(_e.AccountIdToHiddenMints);return(0,Nu.useMemo)(()=>{if(!e)return new Map;let i=(Vt(t??null)?.value??{})[e]??[];return new Map(i.map(s=>[s.mintId,s]))},[t,e])}o(yo,"useVisibilityOverrides");u();d();var Du=K(q());var yp=o(()=>{let{connection:e}=Cn(),{data:t}=Ie(),{solanaChainAddress:n,accountIdentifier:r}=(0,Du.useMemo)(()=>({solanaChainAddress:t?.addresses.find(Et),accountIdentifier:t?.identifier??""}),[t]),i=Fe(),s=$e(),{t:a}=ke();return We({mutationFn:o(async c=>{if(!n)throw new Error("solanaChainAddress not loaded");if(c.type!==F.CompressedSPL)throw new Error("SPL is not compressed");let f=await ga({owner:c.data.walletAddress,mint:c.data.mintAddress,amount:c.data.amount,programId:c.data.programId,connection:e}),{networkID:l,address:m}=n,p={ownerAddress:m,networkID:l,data:{signature:""},type:Rt.Decompress,display:{summary:{topLeft:{text:a("assetDetailClaiming")}}}};await Bt({accountIdentifier:r,accountSigner:s,connection:e,feePayer:new fe.PublicKey(m),pendingTransactionInput:p,storage:i,transaction:f,useSubmissionService:!1})},"mutationFn")})},"useDecompressSpl");u();d();u();d();var et=K(q());u();d();function Mu(e){let t,n;for(let{data:r}of e){let{usd:i,usd_24h_change:s}=r;i!==void 0&&(t=t!==void 0?t+i:i),s!==void 0&&(n=n!==void 0?n+s:s)}return{value:t,earnings:n}}o(Mu,"calculatePortfolio");u();d();function Fu(e,t){return e.getQueriesData({predicate:o(r=>r.queryKey[0]===Sa.transferFungibleLoggingContext,"predicate")}).map(([,r])=>r).filter(r=>{if(!r)return!1;let{previousBalance:i,fungibleKey:s}=r,a=t.get(s);return a?!a.data.balance.isEqualTo(i):!1})}o(Fu,"checkForExpectedAppUpdates");u();d();var ku=o((e,t)=>{let n=ge.transferFungibleLoggingContext(e);t.removeQueries({queryKey:n})},"removeLoggingContext");u();d();function Ru({tokens:e,priceMap:t}){let n=[];for(let r of e){let{amount:i,decimals:s}=r.data,a=gr(r),c=ie(a),f=yr(r),l=mn(i,s),m={type:r.type,data:{...r.data,balance:l,key:f}},p,g=ho({priceId:c,balance:l,priceMap:t});if(r.type===F.SPL||r.type===F.CompressedSPL){let{mintAddress:b}=r.data;p=b}else if(r.type===F.ERC20||r.type===F.SuiCoin){let{contractAddress:b}=r.data;p=b}else if(r.type===F.BRC20){let{firstCreatedInscriptionId:b}=r.data;p=b}m.data.tokenAddress=p,m.data.usd=g.usd,m.data.price=g.price,m.data.usd_24h_change=g.usd_24h_change,m.data.priceChange24h=g.priceChange24h,m.data.currencyChange=g.currencyChange,m.data.currencyValue=g.currencyValue,n.push(m)}return n}o(Ru,"tokensToFungibles");function Mt({showHiddenMints:e=!1,keys:t,keyTokens:n,enablePrices:r=!0,enableSorting:i=!0,usePricesQueryOptions:s,useTokenQueryOptions:a}={}){let{data:c}=Ie(),{data:f=[],isPending:l,isRefetching:m,refetch:p,error:g}=Ca({chainAddresses:c?.addresses,keys:t,keyTokens:n,queryOptions:a}),b=g!==null,w=yo(c?.identifier),{query:T}=(0,et.useMemo)(()=>({query:{data:f.map(gr)}}),[f]),{data:S,isPending:I,isRefetching:Q,refetch:L,isError:W}=Gi({query:T,enabled:r&&!l&&c?.identifier!=null,queryOptions:s}),{fungibles:B,fungibleMap:ve}=(0,et.useMemo)(()=>{let C=e?f:f.filter(N=>{let H=yr(N),$=(t||[]).includes(H),ce=mr(w,{key:H,spamStatus:N.data.spamStatus});return $||ce}),P=Ru({tokens:C,priceMap:S??{}});i&&(t===void 0?P=P.sort(Pa):P=P.sort((N,H)=>{let $=t.indexOf(N.data.key),ce=t.indexOf(H.data.key);return $<ce?-1:$>ce?1:0}));let M=new Map;for(let N of P)M.set(N.data.key,N);return{fungibles:P,fungibleMap:M}},[f,t,e,w,S,i]),it=(0,et.useMemo)(()=>!!w&&w.size>0&&f.length>0&&B.length===0,[f,w,B]),ot=ee(),rn=(0,et.useMemo)(()=>Fu(ot,ve),[ve,ot]),Ke=mo("send:fungible",wt.Solana.Mainnet);(0,et.useEffect)(()=>{for(let C of rn)Ke(C.transactionId,"appUpdated"),ku(C.fungibleKey,ot)},[rn,Ke,ot]);let A=(0,et.useMemo)(()=>Mu(B),[B]),E=(0,et.useCallback)(async()=>{await Promise.all([p(),L()])},[p,L]);return{fungibles:B,portfolio:A,visibilityOverrides:w,isHidingAllFungibles:it,isLoadingTokens:l,isLoadingPrices:r?I:!1,isRefetchingTokens:m,isRefetchingPrices:r?Q:!1,isErrorTokens:b,tokensError:g,isErrorPrices:W,refetch:E}}o(Mt,"useGetFungibleBalances");function gp({key:e,keyTokens:t,splTokenAccount:n,...r}){let{fungibles:i,...s}=Mt({...r,keys:e?[e]:[],keyTokens:t}),a;return i.length===1?a=i[0]:i.length>1&&n?a=i.find(c=>c.type===F.SPL&&c.data.splTokenAccountPubkey===n):i.length>1&&(a=i.filter(c=>c.type===F.SPL).reduce((c,f)=>!c||f.data.balance.gt(c.data.balance)?f:c,void 0)),{fungible:a,...s}}o(gp,"useGetFungibleBalance");u();d();var tn=K(q());u();d();u();d();u();d();var Xt=D(new as);function go(){return go=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},go.apply(this,arguments)}o(go,"i");y.NODE_ENV!=="production"&&(Xt.debugPrivate=!0);var bp=o((e,t,n)=>e?.suspense&&wp(t,n),"a"),wp=o((e,t)=>e.isPending&&!t,"p"),Ep=o(({result:e,throwOnError:t,query:n})=>e.isError&&!e.isFetching&&Tp(t,[e.error,n]),"d");function Tp(e,t){return typeof e=="function"?e(...t):!!e}o(Tp,"E");var vp=o(e=>e.suspense&&typeof e.staleTime!="number"?go({},e,{staleTime:1e3}):e,"l");function Iu(e,t,n=r=>r(Xt)){let r=D(0),i=D(n);y.NODE_ENV!=="production"&&(i.debugPrivate=!0);let s=D(()=>new WeakMap);y.NODE_ENV!=="production"&&(s.debugPrivate=!0);let a=D(l=>{let m=l(i),p=e(l),g=m.defaultQueryOptions(p),b=l(s).get(m);return g._optimisticResults="optimistic",b&&b.setOptions(g,{listeners:!1}),vp(g)});y.NODE_ENV!=="production"&&(a.debugPrivate=!0);let c=D(l=>{let m=l(i),p=l(a),g=l(s),b=g.get(m);if(b)return b;let w=new t(m,p);return g.set(m,w),w});y.NODE_ENV!=="production"&&(c.debugPrivate=!0);let f=D(l=>{let m=l(c),p=l(a),g=m.getOptimisticResult(p),b=D(g);return y.NODE_ENV!=="production"&&(b.debugPrivate=!0),b.onMount=w=>{let T=m.subscribe(er.batchCalls(w));return()=>{m.getCurrentResult().isError&&m.getCurrentQuery().reset(),T()}},b});return y.NODE_ENV!=="production"&&(f.debugPrivate=!0),D(l=>{l(r);let m=l(c),p=l(a),g=l(l(f));if(bp(p,g,!1))return m.fetchOptimistic(p);if(Ep({result:g,query:m.getCurrentQuery(),throwOnError:p.throwOnError}))throw g.error;return g},(l,m)=>{m(r,p=>p+1)})}o(Iu,"b");function Ou(e,t=n=>n(Xt)){return Iu(e,os,t)}o(Ou,"O");function Uu(e,t=n=>n(Xt)){return Iu(e,ss,t)}o(Uu,"g");u();d();var zF=Symbol((import.meta.env?import.meta.env.MODE:void 0)!=="production"?"RESET":"");var bo=o((e,t,n)=>(t.has(n)?t:t.set(n,e())).get(n),"getCached$2"),Ap=new WeakMap,Sp=o((e,t,n,r)=>{let i=bo(()=>new WeakMap,Ap,t),s=bo(()=>new WeakMap,i,n);return bo(e,s,r)},"memo3");function tt(e,t,n=Object.is){return Sp(()=>{let r=Symbol(),i=o(([a,c])=>{if(c===r)return t(a);let f=t(a,c);return n(c,f)?c:f},"selectValue"),s=D(a=>{let c=a(s),f=a(e);return i([f,c])});return s.init=r,s},e,t,n)}o(tt,"selectAtom");var xp=o(e=>typeof e?.then=="function","isPromiseLike");function Cp(e=()=>{try{return self.localStorage}catch(n){(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&typeof self<"u"&&console.warn(n);return}},t){var n;let r,i,s={getItem:o((f,l)=>{var m,p;let g=o(w=>{if(w=w||"",r!==w){try{i=JSON.parse(w,t?.reviver)}catch{return l}r=w}return i},"parse"),b=(p=(m=e())==null?void 0:m.getItem(f))!=null?p:null;return xp(b)?b.then(g):g(b)},"getItem"),setItem:o((f,l)=>{var m;return(m=e())==null?void 0:m.setItem(f,JSON.stringify(l,t?.replacer))},"setItem"),removeItem:o(f=>{var l;return(l=e())==null?void 0:l.removeItem(f)},"removeItem")},a=o(f=>(l,m,p)=>f(l,g=>{let b;try{b=JSON.parse(g||"")}catch{b=p}m(b)}),"createHandleSubscribe"),c;try{c=(n=e())==null?void 0:n.subscribe}catch{}return!c&&typeof self<"u"&&typeof self.addEventListener=="function"&&self.Storage&&(c=o((f,l)=>{if(!(e()instanceof self.Storage))return()=>{};let m=o(p=>{p.storageArea===e()&&p.key===f&&l(p.newValue)},"storageEventCallback");return self.addEventListener("storage",m),()=>{self.removeEventListener("storage",m)}},"subscriber")),c&&(s.subscribe=a(c)),s}o(Cp,"createJSONStorage");var YF=Cp();u();d();u();d();u();d();var Pp=o(e=>{let t=pr(e);if(ze(t))return t===F.BitcoinNative,t;if(t===F.SPL&&e.resourceType===de.address||t===F.ERC20&&e.resourceType===de.address)return e.address;if(t===F.BRC20&&e.resourceType===de.address)return`${e.address}-${qo[0]}`;if(t===F.SuiCoin&&e.resourceType===de.address)return e.address},"getLegacyKey"),Lu=Pp;function Np({caip19:e,...t}){let n=Me(e);return{...t,type:e.includes("/nativeToken:")?"native":"fungible",chainName:v.getChainName(n.chainId).toLowerCase(),encodedCaip19:e,decodedCaip19:n,legacyKey:Lu(n)??e}}o(Np,"getDerivedCaip19Values");var Jt=Np;var Dp=h.object({account:h.string(),quantity:h.number(),quantityString:h.string()}),On=h.object({address:h.string(),quantity:h.number(),quantityString:h.string(),lastTransferredDate:h.coerce.date().nullish(),subaccounts:h.array(Dp).optional()}),Zt=h.object({price:h.number(),priceChange24h:h.number().optional(),lastUpdatedAt:h.coerce.date(),marketCap:h.number().optional()}).nullish(),Bu=h.object({id:h.string(),name:h.string(),imageUri:h.string().nullish().transform(e=>e??""),numTokens:h.number()}),Vr=h.object({compression:h.object({compressed:h.boolean()}).optional(),creators:h.array(h.object({address:h.string(),share:h.number(),verified:h.boolean()})).nullish(),tokenProgram:h.string().nullish(),extensions:hs(ba).nullish()}),Ku=fr,Ek=h.object({totalValueUsdCentsCurrent:h.number().optional(),totalValueUsdStringCurrent:h.string().optional(),totalValueUsdCents24h:h.number().optional(),totalValueUsdString24h:h.string().optional(),totalPercentChange24h:h.number().optional()}),Vu=h.object({name:h.string().nullish(),symbol:h.string().nullish(),decimals:h.number(),logoUri:h.string().nullish(),extraMetadata:Vr.optional(),price:Zt}),wo=Vu.extend({type:h.enum(["native","fungible"]),encodedCaip19:h.string(),decodedCaip19:$o,spamStatus:Ku,chainName:h.string(),legacyKey:h.string()}),Mp=Vu.extend({caip19:h.string(),spamStatus:Ku.nullish().transform(e=>e??Kt.NotVerified)}),Hu=h.union([Mp.transform(e=>Jt(e)),wo]),qu=wo.extend({totalQuantity:h.number(),totalQuantityString:h.string(),walletAddress:h.string().optional(),queriedWalletBalances:h.array(On),livePrice:Zt}),Gu=wo.extend({timestamp:h.string().nullish(),totalQuantityString:h.string(),totalQuantity:h.number(),queriedWalletBalances:h.array(On)});u();d();u();d();u();d();function Qe(e){let t=D(0),n=D(()=>({i:0}),(f,l)=>{let m=f(n);return Object.assign(m,{m:!0,peek:f,set:l}),l(t,p=>p+1),()=>{m.m=!1,a(m),c(m)}});n.onMount=f=>f();let r=D(f=>{f(t);let l=f(n);if(!l.m||l.irc||l.i&&!l.irf)return l.p;c(l);let m=new Map,p=o(T=>{let S=f(T);return m.set(T,S),S},"getter");p.peek=l.peek;let g=o((...T)=>{try{return++l.i,l.set(...T)}finally{Array.from(m.keys(),f),--l.i}},"setter");g.recurse=(T,...S)=>{if(l.fc){if(y.NODE_ENV!=="production")throw new Error("set.recurse is not allowed in cleanup");return}try{return l.irc=!0,l.set(T,...S)}finally{l.irc=!1,Array.from(m).some(b)&&s(l)}};function b([T,S]){return f(T)!==S}o(b,"areDifferent"),++l.i;function w(){try{if(l.irf=!1,!l.m)return;a(l),l.c=i.effect(p,g)}catch(T){l.e=T,s(l)}finally{l.p=void 0,--l.i}}return o(w,"runEffect"),l.irf?w():l.p=Promise.resolve().then(w)});if(y.NODE_ENV!=="production"){let f=function(l,m){Object.defineProperty(l,"debugLabel",{get:o(()=>`${i.debugLabel??"effect"}:${m}`,"get")}),l.debugPrivate=!0};o(f,"setLabel"),f(t,"refresh"),f(n,"ref"),f(r,"base")}let i=D(f=>void f(r));return i.effect=e,i;function s(f){try{f.irf=!0,f.set(t,l=>l+1)}finally{f.irf=!1}}o(s,"refresh");function a(f){if(typeof f.c=="function")try{f.fc=!0,f.c()}finally{f.fc=!1,f.c=void 0}}o(a,"cleanup");function c(f){if("e"in f){let l=f.e;throw delete f.e,l}}o(c,"throwPendingError")}o(Qe,"atomEffect");u();d();var Fp=o(()=>{if(typeof self>"u")return!1;try{return typeof chrome<"u"&&(chrome.runtime?.id!==void 0||typeof browser<"u")}catch(e){return console.error("Error checking for extension context:",e),!1}},"isExtensionContext"),Eo=class{static{o(this,"ExtensionStorage")}browser;storage;constructor(t){if(!t||!t.storage||!t.storage.local)throw new Error("[ExtensionStorage] Invalid 'browser' object received.");this.browser=t,this.storage=this.browser.storage.local}async get(t){try{let r=(await this.storage.get(t))[t];return r==null||typeof r!="string"?null:JSON.parse(r)}catch(n){return console.error(`[ExtensionStorage.get] Error getting/parsing key (${t}):`,n),null}}async getAll(t){try{let n=await this.storage.get(t),r={};for(let i in n)if(Object.prototype.hasOwnProperty.call(n,i)){let s=n[i];if(s==null||typeof s!="string")r[i]=null;else try{r[i]=JSON.parse(s)}catch(a){console.error(`[ExtensionStorage.getAll] Error parsing key (${i}):`,a),r[i]=null}}return r}catch(n){let r=`[ExtensionStorage.getAll] Error getting keys (${t}): ${n}`;throw console.error(r),new Error(r)}}async remove(t){try{await this.storage.remove(t)}catch(n){let r=`[ExtensionStorage.remove] Error removing key(s) (${t}): ${n}`;throw console.error(r),new Error(r)}}async set(t,n){try{let r=JSON.stringify(n);await this.storage.set({[t]:r})}catch(r){let i=`[ExtensionStorage.set] Error setting/stringifying key (${t}): ${r}`;throw console.error(i),new Error(i)}}async setAll(t){try{let n={};for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=JSON.stringify(t[r]));await this.storage.set(n)}catch(n){let i=`[ExtensionStorage.setAll] Error setting/stringifying keys (${Object.keys(t)}): ${n}`;throw console.error(i),new Error(i)}}async update(t,n){if(!navigator.locks){let r=await this.get(t),i=await n(r);i===null?await this.remove(t):await this.set(t,i);return}try{await navigator.locks.request(`storage.${t}`,async r=>{let i=await this.get(t),s=await n(i);s===null?await this.remove(t):await this.set(t,s)})}catch(r){let i=`[ExtensionStorage.update] Error updating key (${t}): ${r}`;throw console.error(i),new Error(i)}}async clear(){try{await this.storage.clear()}catch(t){let n=`[ExtensionStorage.clear] Error clearing storage: ${t}`;throw console.error(n),new Error(n)}}},Hr=class{static{o(this,"WebLocalStorage")}_storage;get storage(){if(!this._storage){if(typeof self>"u")throw new Error("WebLocalStorage requires window.localStorage");this._storage=self.localStorage}return this._storage}async get(t){try{let n=this.storage.getItem(t);return n===null||typeof n!="string"?null:JSON.parse(n)}catch(n){return console.error(`[WebLocalStorage.get] Error getting/parsing key (${t}):`,n),null}}async getAll(t){let n={},r=t??Object.keys(this.storage);for(let i of r)try{let s=this.storage.getItem(i);if(t&&s===null)continue;if(s===null||typeof s!="string")n[i]=null;else try{n[i]=JSON.parse(s)}catch(a){console.error(`[WebLocalStorage.getAll] Error parsing key (${i}):`,a),n[i]=null}}catch(s){console.error(`[WebLocalStorage.getAll] Error reading key (${i}) from storage:`,s),t||(n[i]=null)}return n}async remove(t){try{let n=Array.isArray(t)?t:[t];for(let r of n)this.storage.removeItem(r)}catch(n){let r=`[WebLocalStorage.remove] Error removing key(s) (${t}): ${n}`;throw console.error(r),new Error(r)}}async set(t,n){try{let r=JSON.stringify(n);this.storage.setItem(t,r)}catch(r){let i=`[WebLocalStorage.set] Error setting/stringifying key (${t}): ${r}`;throw console.error(i),new Error(i)}}async setAll(t){let n=!1,r=Object.keys(t);for(let i in t)if(Object.prototype.hasOwnProperty.call(t,i))try{await this.set(i,t[i])}catch{n=!0}if(n)throw new Error(`[WebLocalStorage.setAll] One or more errors occurred while setting keys (${r})`)}async update(t,n){if(!navigator.locks){let r=await this.get(t),i=await n(r);i===null?await this.remove(t):await this.set(t,i);return}try{await navigator.locks.request(`storage.${t}`,async r=>{let i=await this.get(t),s=await n(i);s===null?await this.remove(t):await this.set(t,s)})}catch(r){let i=`[WebLocalStorage.update] Error updating key (${t}): ${r}`;throw console.error(i),new Error(i)}}async clear(){try{this.storage.clear()}catch(t){let n=`[WebLocalStorage.clear] Error clearing storage: ${t}`;throw console.error(n),new Error(n)}}},To=class{static{o(this,"LocalStorage")}initPromise;storageImpl=null;constructor(){this.initPromise=this._initialize(),this.initPromise.catch(t=>{console.error("LocalStorage initialization failed:",t)})}async _initialize(){if(!this.storageImpl&&!(typeof self>"u"))if(Fp())try{let n=(await import("./browser-polyfill-UM4GLF6W.js")).default;if(!n||!n.storage||!n.storage.local)throw new Error("webextension-polyfill loaded but missing storage.local API.");this.storageImpl=new Eo(n)}catch{this.storageImpl=new Hr}else this.storageImpl=new Hr}async ensureInitialized(){if(await this.initPromise,!this.storageImpl&&typeof self<"u"&&await this._initialize(),!this.storageImpl)throw new Error("LocalStorage is not initialized. Initialization may have failed or is not available in this context.")}async get(t){return await this.ensureInitialized(),this.storageImpl.get(t)}async getAll(t){return await this.ensureInitialized(),this.storageImpl.getAll(t)}async remove(t){return await this.ensureInitialized(),this.storageImpl.remove(t)}async set(t,n){return await this.ensureInitialized(),this.storageImpl.set(t,n)}async setAll(t){return await this.ensureInitialized(),this.storageImpl.setAll(t)}async update(t,n){return await this.ensureInitialized(),this.storageImpl.update(t,n)}async clear(){return await this.ensureInitialized(),this.storageImpl.clear()}},vo=new To;u();d();u();d();var Un=class{static{o(this,"PersistentStore")}namespaceKey;ttlMilliseconds;storage;onError;data={};isLoaded=!1;constructor(t){this.namespaceKey=t.namespaceKey,this.ttlMilliseconds=t.ttlMilliseconds,this.storage=t.storage,this.onError=t.onError,this._load().then(()=>{if(this._cleanupExpired())return this._save()}).catch(n=>{console.error("Failed to load data",n)})}async _load(){if(!this.isLoaded){try{let t=await this.storage.get(this.namespaceKey);t?(this.data=t,(typeof this.data!="object"||this.data===null)&&(this.onError?.(new Error("Stored data is not a valid object."),"load"),this.data={})):this.data={}}catch(t){this.onError?.(t instanceof Error?t:new Error("Failed to parse stored data"),"load"),this.data={}}this.isLoaded=!0}}async _save(){try{await this.storage.set(this.namespaceKey,this.data)}catch(t){this.onError?.(t instanceof Error?t:new Error("Failed to serialize data for storage"),"save")}}_cleanupExpired(){let t=Date.now(),n=!1;for(let r in this.data)Object.prototype.hasOwnProperty.call(this.data,r)&&this.data[r].expiresAt<=t&&(delete this.data[r],n=!0);return n}_updateExpiration(t){return this.data[t]?(this.data[t].expiresAt=Date.now()+this.ttlMilliseconds,!0):!1}async set(t,n){this.isLoaded||await this._load(),this._cleanupExpired(),this.data[t]={value:n,expiresAt:Date.now()+this.ttlMilliseconds},await this._save()}async get(t,n){this.isLoaded||await this._load();let r=this._cleanupExpired(),i=this.data[t];if(!i)return r&&await this._save(),null;let s=this._updateExpiration(t),a=n.safeParse(i.value);return a.success?((r||s)&&await this._save(),a.data):(this.onError?.(new dt(a.error.issues),`get (validation failed for key: ${t})`),delete this.data[t],await this._save(),null)}async remove(t){let n=this._cleanupExpired(),r=!1;Object.prototype.hasOwnProperty.call(this.data,t)&&(delete this.data[t],r=!0),(n||r)&&await this._save()}async clear(){this.data={},await this._save()}};var Qu=new Map;function kp({storage:e,namespaceKey:t,ttlMs:n}){let r=Qu.get(t);if(r)return r;if(!e)throw new Error("Storage is required");let i=new Un({storage:e,namespaceKey:t,ttlMilliseconds:n,onError:o((s,a)=>{console.error(`[PersistentStore Error - ${a}]:`,s.message),s instanceof dt&&console.error("Zod Issues:",s.issues)},"onError")});return Qu.set(t,i),i}o(kp,"getDataStorage");var Ao=kp;function Rp({atomToStoreOffline:e,namespaceKey:t,ttlMs:n,initialValue:r,schema:i,...s}){let a=D({status:"pending",value:r}),c=D(p=>{if("offlineKey"in s)return p(s.offlineKey);let g=p(e);if("offlineKey"in g&&typeof g.offlineKey=="string")return g.offlineKey;throw new Error("No key provided")}),f=Qe((p,g)=>{Ao({storage:vo,namespaceKey:`.offline.${t}`,ttlMs:n}).get(p(c),i).then(b=>{b&&g(a,{status:"offline",value:b})}).catch(b=>{console.error(b)})}),l=Qe((p,g)=>{p(c),g(a,{status:"pending",value:r})}),m=Qe((p,g)=>{let b=p(e),w=p(c);b.status==="success"&&b.data&&b.data!==p(a).value&&(g(a,{status:"live",value:b.data}),Ao({storage:vo,namespaceKey:`.offline.${t}`,ttlMs:n}).set(w,b.data).catch(T=>{U.addBreadcrumb(V.Tokens,"Error storing offline data",ne.Error,{namespaceKey:t,error:T.toString()})}))});return tt(D(p=>{let g=p(e);p(l),p(f),p(m);let b=p(a);return g.data?{status:"live",value:g.data}:{status:"offline",value:b.value}}),p=>p.value)}o(Rp,"atomWithOfflineStorage");var qr=Rp;u();d();u();d();var Ip=fr,So=h.object({caip19:h.string(),name:h.string().nullish(),symbol:h.string().nullish(),decimals:h.number(),spamStatus:Ip.nullish().transform(e=>e??Kt.NotVerified),logoUri:h.string().nullish()}),ju=So.extend({totalQuantity:h.number(),totalQuantityString:h.string(),queriedWalletBalances:h.array(On),extraMetadata:Vr.optional(),price:Zt}),Wu=ju.transform(Jt),$u=h.object({items:h.array(ju),cursor:h.string().nullish().default(null),errors:h.array(h.object({code:h.string(),message:h.string(),details:h.object({chainId:h.string(),address:h.string()})})).optional()}).transform(e=>{let{items:t,cursor:n,errors:r,...i}=e;return{...i,nextCursor:n,tokens:t,errors:r||[],updatedAt:Date.now()}}),zu=So.extend({timestamp:h.string().nullish(),postQuantityString:h.string(),postQuantity:h.number(),price:Zt,queriedWalletBalances:h.array(On)}),Yu=zu.transform(e=>{let{postQuantity:t,postQuantityString:n,...r}=Jt(e);return{...r,totalQuantity:t,totalQuantityString:n}}),Xu=h.object({cursor:h.string().nullish().default(null),items:h.array(zu)}).transform(e=>({nextCursor:e.cursor,transfers:e.items})),uR=h.object({totalValueUsdCentsCurrent:h.number(),totalValueUsdStringCurrent:h.string(),totalValueUsdCents24h:h.number(),totalValueUsdString24h:h.string(),totalPercentChange24h:h.number(),errors:h.array(h.object({code:h.string(),message:h.string(),details:h.object({chainId:h.string(),address:h.string()})})).optional()}),xo=So.extend({createdDate:h.coerce.date().nullish().default(null),extraMetadata:Vr.extend({id:h.string().nullish().default(null),description:h.string().nullish().default(null),marketCap:h.coerce.number().optional(),circulatingSupply:h.coerce.number().optional(),totalSupply:h.coerce.number().optional(),liquidity:h.coerce.number().optional(),holders:h.coerce.number().optional(),links:h.array(h.object({type:h.string(),url:h.string()})).optional(),volume24hUSD:h.coerce.number().optional(),volume24hUSDChangePercentage:h.coerce.number().optional(),trades24h:h.coerce.number().optional(),trades24hChangePercentage:h.coerce.number().optional(),uniqueWallets24h:h.coerce.number().optional(),uniqueWallets24hChangePercentage:h.coerce.number().optional(),top10HoldersPercent:h.coerce.number().optional(),mintable:h.boolean().optional(),freezable:h.boolean().optional(),mutableMetadata:h.boolean().optional(),ownershipRenounced:h.boolean().optional(),updateAuthority:h.string().optional(),createdDate:h.string().datetime().nullish().default(null)}).optional(),categories:h.array(Bu).optional().default([]),price:Zt}),Ju=xo.transform(Jt);u();d();var Op=o(e=>v.isBitcoinNetworkID(e.decodedCaip19.chainId)&&e.decodedCaip19.resourceType===de.nativeToken?e.queriedWalletBalances.map(r=>{let i=va(e.decodedCaip19.chainId,r.address);if(!i)throw new Error("No legacy key found for bitcoin native token");return{...e,legacyKey:i,queriedWalletBalances:[r],totalQuantity:r.quantity,totalQuantityString:r.quantityString,walletAddress:r.address}}):[e],"explodeBitcoinToken"),Up=o(e=>t=>t.map(n=>e.parse(n)),"createTokenMapper"),gR=Up(Hu),Lp=o(e=>t=>t.flatMap(n=>{let r=e.parse(n);return Op(r)}),"createTokenBalanceMapper"),Zu=Lp(Wu),Bp=o(e=>t=>t.map(n=>e.parse(n)),"createTokenBalanceUpdateMapper"),_u=Bp(Yu);async function Kp(e){let t={walletAddresses:e.walletCaip19s.join(","),includePrices:"true"};"cursor"in e&&(t.cursor=e.cursor),"fromMicroseconds"in e?t.fromTimestamp=e.fromMicroseconds.toString():"from"in e&&(t.fromTimestamp=e.from.toString());let n=await re.api().timeout(x({seconds:30})).get("/portfolio/v1/fungibles/updates",{params:t}).then(r=>{if(De(r))return r.data;throw new Error(r.data?.message||r.data?.error||r.statusText||`Status: ${r.status}`,{cause:r.data?.code??r.data?.name})}).catch(r=>{throw U.addBreadcrumb(V.Tokens,"getTokenBalanceUpdates",ne.Error,{message:r.message,cause:r.cause,...t}),U.captureError(r,V.Tokens),r});try{return Xu.parse(n)}catch(r){throw r instanceof dt&&U.addBreadcrumb(V.Tokens,"getTokenBalanceUpdates parse error",ne.Error,{message:r.message,...r.issues?{issues:JSON.stringify(r.issues)}:{},result:JSON.stringify(n)}),r}}o(Kp,"getTokenBalanceUpdates");async function ed(e){let t=[],n=o(()=>t.at(-1)?.nextCursor,"getNextCursor");do{let r=n(),i=await Kp(r?{walletCaip19s:e.walletCaip19s,cursor:r}:e);t.push(i)}while(n());return _u(t.flatMap(r=>r.transfers))}o(ed,"getTokenBalanceUpdatesAll");u();d();var Vp="25.13.0",Ln=`fungible-tokens-${Vp}`,td=[Ln,"token-updates"];var nd=[Ln,"portfolio-value"],Hp=[Ln,"token-balance"],qp=[Ln,"infinite-token-balances"],Gp=[Ln,"visibility-overrides"],nt={infiniteTokenBalances:o(({walletCaip19s:e})=>[...qp,{walletCaip19s:e}],"infiniteTokenBalances"),tokenBalance:o(({wallets:e,encodedCaip19:t,isSplCompressed:n})=>{let r=e.map(i=>typeof i=="string"?i:ie({chainId:i.networkID,address:i.address,resourceType:de.address})).sort();return[...Hp,{walletCaip19s:r,encodedCaip19:t,isSplCompressed:n}]},"tokenBalance"),tokenUpdates:o(({walletCaip19s:e,from:t})=>[...td,{walletCaip19s:e,from:t}],"tokenUpdates"),portfolioValue:o(({walletCaip19s:e,include:t,exclude:n,isMainnet:r})=>[...nd,{walletCaip19s:e,include:t,exclude:n,isMainnet:r}],"portfolioValue"),visibilityOverrides:o(({accountId:e})=>[...Gp,{accountId:e}],"visibilityOverrides"),tokenDetails:hr.tokenDetails};u();d();u();d();function Qp(e){let t=pr(e.decodedCaip19);return t===F.SPL?e.extraMetadata?.compression?.compressed||"queriedWalletBalances"in e&&e.queriedWalletBalances.some(n=>!n.subaccounts?.length)?F.CompressedSPL:F.SPL:t}o(Qp,"getTokenTypeFromToken");var rd=Qp;function Co({newUpdates:e,existingUpdates:t={}}){return e.reduce((n,r)=>n[r.encodedCaip19]?.totalQuantityString===r.totalQuantityString?n:rd(r)===F.CompressedSPL?{...n,[`${r.encodedCaip19}-compressed`]:r}:r?{...n,[r.encodedCaip19]:r}:n,t)}o(Co,"aggregateUpdates");u();d();function jp(e){let t=e.match(/(.*\d{2}:\d{2}:\d{2})\.(?<fraction>\d+)Z/);if(!t||!t.groups?.fraction)throw new Error("Invalid date format");let n=new Date(e).getTime(),s=t.groups.fraction.padEnd(6,"0").slice(-3);return n*1e3+parseInt(s,10)}o(jp,"getMicrosecondsFromTimestamp");var Po=jp;u();d();var Wp=D(!1),id=Wp;u();d();u();d();u();d();var $p=x({minutes:5}),Bn=0;function dI(){if(!Bn){Bn=Math.floor(Math.random()*1e6);return}Bn++}o(dI,"incrementTokensBalancesCacheBust");async function od({walletCaip19s:e,fungibleCaip19s:t,cursor:n,cacheBust:r}){let i={walletAddresses:e.join(","),includePrices:"true"};n&&(i.cursor=n),(r||Bn)&&(i.cacheBust=r?.toString()||Bn.toString()),t&&t.length>0&&(i.fungibleAddresses=t.sort().join(","));try{let s=await re.api().timeout(x({seconds:30})).get("/portfolio/v1/fungibles/balances",{params:i}).then(c=>{if(De(c))return c.data;throw new Error(c.data?.message||c.data?.error||c.statusText||`Status: ${c.status}`,{cause:c.data?.code})}),a=$u.parse(s);return a.errors&&a.errors.length>0&&a.errors.forEach(c=>{U.addBreadcrumb(V.Tokens,"getTokenBalances_partialError",ne.Info,{code:c.code,message:c.message,chainId:c.details.chainId,address:c.details.address})}),{...a,tokens:Zu(a.tokens)}}catch(s){throw s instanceof Error&&(U.addBreadcrumb(V.Tokens,"getTokenBalances",ne.Error,{...i,message:s.message,...typeof s.cause=="string"||typeof s.cause=="number"?{cause:s.cause}:{}}),U.captureError(s,V.Tokens)),s}}o(od,"getTokenBalances");function sd({walletCaip19s:e,isEnabled:t=!0,cacheBust:n}){return{staleTime:$p,gcTime:x({days:3}),queryKey:nt.infiniteTokenBalances({walletCaip19s:e}),enabled:t&&!!e.length,queryFn:o(async({pageParam:r})=>od({walletCaip19s:e,cursor:r,cacheBust:n}),"queryFn"),initialPageParam:"",getNextPageParam:o(r=>r?.nextCursor||void 0,"getNextPageParam")}}o(sd,"getTokenBalancesQuery");function ad(e){let{walletCaip19s:t,encodedCaip19:n,queryOptions:r={enabled:!0}}=e;return{staleTime:x({seconds:10}),gcTime:x({days:3}),queryKey:nt.tokenBalance({wallets:t,encodedCaip19:n}),enabled:r.enabled&&!!t.length,queryFn:o(async()=>(await od({walletCaip19s:t,fungibleCaip19s:[n]})).tokens,"queryFn")}}o(ad,"getTokenBalanceQuery");u();d();u();d();var zp=D(void 0),Gr=zp;var Yp=D(e=>{let t=e(Gr);return t?t.addresses.map(n=>ie({chainId:n.networkID,address:n.address,resourceType:de.address})).sort():[]}),_t=Yp;var Xp=Uu(e=>{let t=e(_t);return sd({walletCaip19s:t})}),rt=Xp;var Jp=D(e=>{let{data:t}=e(rt),n=t?.pages[0];return!n||!n.tokens.length?0:n.updatedAt}),cd=Jp;u();d();var Zp=tt(Gr,e=>e?.identifier),ht=Zp;var _p=1e3,ud=5e3,dd=Math.ceil(ud*2.25);function ld(e){return x(e)*1e3}o(ld,"toMicroseconds");function eh(e){if(!e?.length)return null;let t=new Date(Date.now()-dd).toISOString();return Math.floor(Math.max(...e.map(({timestamp:n})=>Po(n||t))))}o(eh,"getLastTimestamp");function th(e){let t=eh(e);return t?t-ld({seconds:1}):null}o(th,"getNextTimestamp");var nh=Ou(e=>{let t=e(Xt),n=e(cd),r=Math.floor(n-x({minutes:10})),i=e(_t),s=e(id),a=r>Date.now()-x({days:10}),c=nt.tokenUpdates({walletCaip19s:i,from:r}),f=o(async()=>{let l=t.getQueryData(c)?.lastTimestamp;if(!l){let b=new Date(r-dd).toISOString();return{updates:{},lastTimestamp:Po(b)}}let m=await ed({walletCaip19s:i,fromMicroseconds:l-ld({seconds:30})}),p=t.getQueryData(c)?.updates??{};return{updates:Co({newUpdates:m,existingUpdates:p}),lastTimestamp:Math.max(th(m)??0,l)}},"queryFn");return{meta:{fetchCount:0},enabled:a&&!s&&i.length>0,queryKey:c,refetchInterval:o(l=>{let m=Number(l.meta?.fetchCount??0);return l.meta&&(l.meta.fetchCount=m+1),Math.min(Math.max(m*250,_p),ud)},"refetchInterval"),queryFn:f}}),rh=qr({atomToStoreOffline:nh,offlineKey:D(e=>`${e(ht)??""}:token-balance-updates`),namespaceKey:"fungible-tokens",ttlMs:x({days:10}),initialValue:{updates:{},lastTimestamp:0},schema:h.object({updates:h.record(h.string(),Gu),lastTimestamp:h.number()})}),ih=tt(rh,e=>e?.updates??{},(e,t)=>JSON.stringify(e)===JSON.stringify(t)),Qr=ih;u();d();u();d();function jr(e){return t=>{let n=!1,r={...t};for(let[i,s]of Object.entries(e)){let a=s?.price,c=s?.lastUpdatedAt?new Date(s.lastUpdatedAt):null;if(!a||!c)continue;let f=t[i]?.price!==a&&(!t[i]?.lastUpdatedAt||c>t[i].lastUpdatedAt);n=n||f,f&&(r[i]={price:s.price,priceChange24h:s.priceChange24h,lastUpdatedAt:c})}return n?r:t}}o(jr,"processExtractedPriceData");u();d();var oh=D(e=>{let{data:t,status:n}=e(rt);return{data:t?.pages.flatMap(r=>r.tokens),status:n}}),sh=qr({atomToStoreOffline:oh,offlineKey:D(e=>`${e(ht)??""}:infinite-tokens`),namespaceKey:"fungible-tokens",ttlMs:x({days:10}),initialValue:[],schema:h.array(qu)}),yt=sh;var Wr=D({}),ah=D(e=>e(yt).slice(-100).reduce((r,i)=>(i.price&&(r[i.encodedCaip19]=i.price),r),{})),ch=Qe((e,t)=>{let n=e(ah);!n||Object.keys(n).length===0||t(Wr,jr(n))}),uh=D(e=>{let t=e(Qr);return Object.values(t).reduce((r,i)=>(i.price&&(r[i.encodedCaip19]=i.price),r),{})}),dh=Qe((e,t)=>{let n=e(uh);!n||Object.keys(n).length===0||t(Wr,jr(n))}),lh=D(e=>(e(ch),e(dh),e(Wr)),(e,t,n)=>{t(Wr,n)}),gt=lh;u();d();u();d();var fh=tt(rt,e=>e.hasNextPage),en=fh;var Kn=D(1/0),$r=D(e=>(e(mh),e(ph),e(en)?e(Kn):0),(e,t,n)=>{if(n===null){t(Kn,1/0);return}let r=Math.min(e(Kn),n);r!==e(Kn)&&t(Kn,r)}),fd=$r,mh=Qe((e,t)=>{let{hasNextPage:n}=e(rt),r=e(yt),i=e(gt);if(r.length>0&&!n){t($r,0);return}let s=r.slice(-100).filter(a=>a.type==="fungible").map(a=>{let c=i[a.encodedCaip19]??a.price;return c?a.totalQuantity*c.price/10**a.decimals:1/0});t($r,Math.min(...s))}),ph=Qe((e,t)=>{e(ht)&&t($r,1/0)});function hh(e,t){if(e.type==="native"&&t.type!=="native")return-1;if(e.type!=="native"&&t.type==="native")return 1;if(e.type==="native"&&t.type==="native")return e.name&&t.name?e.name.localeCompare(t.name):0}o(hh,"sortNativeTokensFirst");function yh(e,t){if(!e&&t)return 1;if(e&&!t)return-1}o(yh,"sortTokensWithValidPrice");function md(e,t){if(e&&t)return e.localeCompare(t);if(e&&!t)return-1;if(!e&&t)return 1}o(md,"sortByString");function pd(e,t){if(e!==t)return t-e}o(pd,"sortByNumber");function gh(e){return{totalQuantity:e.totalQuantity,totalQuantityString:e.totalQuantityString}}o(gh,"getUpdatedBalances");var bh=D(e=>{let t=e(yt),n=e(Qr),r=new Set(Object.keys(n)),i=t.map(s=>{let a=s.extraMetadata?.compression?.compressed?`${s.encodedCaip19}-compressed`:s.encodedCaip19,c=n[a];return c?(r.delete(a),{...s,...gh(c)}):s});return r.forEach(s=>{let a=n[s];a&&i.push(a)}),i}),wh=D(e=>{let t=e(gt),n=e(bh),r=e(fd),i=n.filter(s=>s.totalQuantity>0||s.type==="native").map(s=>({...s,livePrice:t[s.encodedCaip19]??s.price})).sort((s,a)=>{let c=s.livePrice?.price,f=a.livePrice?.price,l=yh(c,f);if(l)return l;let m=s.totalQuantity/10**s.decimals,p=a.totalQuantity/10**a.decimals;if(!c&&!f){let S=hh(s,a);if(S)return S;let I=pd(m,p);if(I)return I;let Q=md(s.name,a.name);return Q||0}let g=(c??0)*m,b=(f??0)*p,w=pd(g,b);if(w)return w;let T=v.compareNetworkID(s.decodedCaip19.chainId,a.decodedCaip19.chainId);return T||(md(s.name,a.name)??0)});return r?i.filter(s=>{let a=s.livePrice?.price,c=s.totalQuantity/10**s.decimals;return(a??0)*c>=r}):i}),bt=wh;u();d();function Eh(e){if(e)return typeof e=="string"||typeof e=="number"?new Date(e):e}o(Eh,"toDate");function Th(e,{key:t,newPriceData:n}){let r=e[t];if(!n||r?.price===n?.price)return e;let i=Eh(n.lastUpdatedAt);return!i||!(!r?.lastUpdatedAt||i>r.lastUpdatedAt)?e:{...e,[t]:{price:n.price,priceChange24h:n.priceChange24h??n.usd_24h_change,lastUpdatedAt:i}}}o(Th,"handlePriceAtomUpdate");var zr=Th;var vh=o((e,t,n)=>{let r=e.extraMetadata?.compression?.compressed,i=t.extraMetadata?.compression?.compressed;if(r!==i)return n?r?-1:1:r?1:-1},"sortByCompressed"),Ah=o((e,t,n)=>{let r=e.legacyKey===n,i=t.legacyKey===n;if(r!==i)return r?-1:1},"sortByLegacyKey"),hd=o(({isSplCompressed:e,legacyKey:t},n)=>n.length?n.length===1?n[0]:[...n].sort((i,s)=>{if(e!==void 0&&(i.encodedCaip19.includes("solana:")||s.encodedCaip19.includes("solana:"))){let a=vh(i,s,e);if(a)return a}if(t){let a=Ah(i,s,t);if(a)return a}return s.totalQuantity-i.totalQuantity})[0]:null,"pickBalance"),Yr=o(e=>{let t=be(_t),n=be(bt),r=(0,tn.useMemo)(()=>n.filter(g=>g.encodedCaip19!==e.encodedCaip19?!1:e.legacyKey?g.legacyKey===e.legacyKey:!0),[n,e.encodedCaip19,e.legacyKey]),{isSplCompressed:i,legacyKey:s}=e,a=(0,tn.useMemo)(()=>hd({isSplCompressed:i,legacyKey:s},r),[i,s,r]),c=ad({...e,walletCaip19s:t}),f=R({...c,select:o(g=>hd(e,g),"select")}),l=f.data??null,m=a??l??null,p=hn(gt);return(0,tn.useEffect)(()=>{let g=l;g&&!f.isPlaceholderData&&g.price&&p(b=>{let w=g.encodedCaip19,T=g.price;return zr(b,{key:w,newPriceData:T})})},[f.isPlaceholderData,l,p]),{...f,data:m,isPlaceholderData:a?!1:f.isPlaceholderData}},"useTokenBalance"),Xr=o(({networkID:e,queryOptions:t,addressType:n})=>{let r={chainId:e,slip44:v.getSlip44(e),resourceType:de.nativeToken},i=Ta(e,n),s=ie(r);return Yr({encodedCaip19:s,legacyKey:i,queryOptions:t})},"useNativeTokenBalance"),Sh=o(()=>{let{data:e}=Ie(),t=(0,tn.useMemo)(()=>e?.addresses.find(n=>v.isSolanaNetworkID(n.networkID)),[e]);return Xr({networkID:t?.networkID||Yn.Mainnet,addressType:t?.addressType})},"useSolanaBalance");u();d();u();d();var xh=D(e=>{let{isFetching:t,isPending:n}=e(rt),r=e(yt);return(t||n)&&r.length===0}),Jr=tt(xh,e=>e);u();d();var Ch=new Map,Ph=D(null),Nh=D(e=>{let t=e(ht);if(!t)return Ch;let n=e(Ph),s=(Vt(n??null)?.value??{})[t]??[];return new Map(s.map(a=>[a.mintId,a]))}),nn=Nh;function yd(){let e=be(bt),t=be(Jr),n=be(en),r=be(nn);return{isLoading:t,hasNextPage:n,fungibleTokens:e,visibilityOverrides:r}}o(yd,"useOwnedFungibles");u();d();u();d();var gd=K(q());var Dh=o(({wallets:e,encodedCaip19:t,isSplCompressed:n=!1})=>{let r=ee();return(0,gd.useCallback)(()=>void r.invalidateQueries({queryKey:nt.tokenBalance({wallets:e,encodedCaip19:t,isSplCompressed:n})}),[r,e,t,n])},"useInvalidateFungibleTokensBalance"),Mh=Dh;u();d();u();d();function Fh(e){let t={message:"Failed to parse token details response"};if(e instanceof dt)try{t.zodIssuesJson=JSON.stringify(e.issues.map(n=>({path:n.path.join("."),message:n.message,code:n.code})))}catch{t.zodIssuesJson="Failed to stringify Zod issues"}else t.errorMessage=e instanceof Error?e.message:String(e);return t}o(Fh,"zodErrorToBreadcrumbData");var bd=Fh;function wd(e){return e.resourceType===de.nativeToken?`/fungibles/v1/${e.chainId}/${e.resourceType}/${e.slip44}`:`/fungibles/v1/${e.chainId}/${e.resourceType}/${e.address}`}o(wd,"getUrlPathForDecodedCaip19");function kh(e){return wd(Me(e))}o(kh,"getUrlPathForEncodedCaip19");function Rh(e){let t=new URLSearchParams,n="encodedCaip19"in e?kh(e.encodedCaip19):wd(e.decodedCaip19);return e.includePrice&&t.append("includePrice","true"),e.includeFungibleDetails&&t.append("includeFungibleDetails","true"),[n,{params:t}]}o(Rh,"getUrlParams");async function No(e){let t=await re.api().noBearer().timeout(x({seconds:10})).get(...Rh(e)).then(n=>{if(De(n))return n.data;throw new Error(n.data?.message||n.data?.error||n.statusText||`Status: ${n.status}`,{cause:n.data?.code})}).catch(n=>{throw U.addBreadcrumb(V.Tokens,"getTokenDetails",ne.Error,{message:n.message,cause:n.cause,..."encodedCaip19"in e&&{caip19:e.encodedCaip19},..."decodedCaip19"in e&&{caip19:ie(e.decodedCaip19)}}),U.captureError(n,V.Tokens),n});try{return xo.parse(t)}catch(n){console.error(n);let r=bd(n);throw"encodedCaip19"in e&&typeof e.encodedCaip19=="string"?r.caip19=e.encodedCaip19:"decodedCaip19"in e&&(r.caip19=ie(e.decodedCaip19)),U.addBreadcrumb(V.Tokens,"getTokenDetails.ParseError",ne.Error,r),n}}o(No,"getTokenDetails");u();d();function Ed({tokens:e}){return Ct({tokens:e}).catch(t=>{throw U.addBreadcrumb(V.Tokens,"getTokenPrices",ne.Error,{message:t.message,cause:t.cause,tokens:e.map(ie).join(",")}),U.captureError(t,V.Tokens),t})}o(Ed,"getTokenPrices");u();d();u();d();var Ih=D(e=>{let t=e(nn);return e(bt).filter(r=>mr(t??new Map,{key:r.legacyKey??"",spamStatus:r.spamStatus}))}),Td=Ih;function vd(){let e=be(Td),t=be(Jr),n=be(en),r=be(nn);return{isLoading:t,hasNextPage:n,fungibleTokens:e,visibilityOverrides:r}}o(vd,"useOwnedVisibleFungibles");u();d();var Vn=K(q());function Oh({includePrice:e,encodedCaip19:t,localTokenDetails:n}){return{refetchInterval:x({seconds:e?5:30}),queryKey:nt.tokenDetails({caip19:t,includePrice:e}),queryFn:o(async()=>{let r=await No({encodedCaip19:t,includeFungibleDetails:!0,includePrice:e});return Ju.parse(r)},"queryFn"),...n&&{placeholderData:n}}}o(Oh,"getTokenDetailsQueryOptions");function Uh({caip19:e,includePrice:t}){let n=(0,Vn.useMemo)(()=>typeof e=="string"?e:ie(e),[e]),r=be(bt),i=(0,Vn.useMemo)(()=>{let c=r.find(f=>f.encodedCaip19===n);return c?{chainName:c.chainName,encodedCaip19:n,decodedCaip19:c.decodedCaip19,type:c.type,categories:[],price:c.price,symbol:c.symbol??"",name:c.name??"",decimals:c.decimals,legacyKey:c.legacyKey??n,spamStatus:c.spamStatus??Kt.NotVerified,logoUri:c.logoUri??null,extraMetadata:{description:"",id:"",isMutable:!0,createdDate:null,...c.extraMetadata},createdDate:null}:null},[n]),s=R(Oh({includePrice:t,encodedCaip19:n,localTokenDetails:i})),a=hn(gt);return(0,Vn.useEffect)(()=>{let c=s.data;c&&!s.isPlaceholderData&&t&&c.price&&a(f=>{let l=c.encodedCaip19,m=c.price;return zr(f,{key:l,newPriceData:m})})},[s.data,s.isPlaceholderData,a,t]),s}o(Uh,"useTokenDetails");var Do=Uh;u();d();var ko=K(q());u();d();var Mo=new G(0),Fo=o(({chainAddress:e,type:t,balance:n,decimals:r,recipient:i,gasEstimation:s,clampToZero:a=!0})=>{let{data:c,isPending:f}=po(e);if(!t||!n)return Mo;let l=new G(n).multipliedBy(an(r));if(!ze(t))return l;if(!s)return;let m=new G(0);if(It(s))m=l.minus(new G(s.value));else if(sr(s)){let{gasLimit:p,maxFeePerGas:g,l1Fee:b=new G(0)}=s,w=p.times(g).plus(b);m=l.minus(w)}else if(Ot(s)){if(!e||f)return;let p=e.addressType,g=c?.safeToSendUtxos??[],b=qs(s.btcPerKilobyte),w=i&&Go.safeParse(i).success?i:"bc1p",S=[{value:g.reduce((Q,L)=>Q.plus(new G(L.value)),new G(0)).toNumber(),address:w}],I=na(p,g,S,b.toNumber(),[]);if(I.type==="error")m=new G(I.maxAmount).integerValue(G.ROUND_DOWN);else{let{inputs:Q,fee:L}=I;m=Q.reduce((B,ve)=>B.plus(new G(ve.value)),new G(0)).minus(L).integerValue(G.ROUND_DOWN)}}else if(or(s))m=l.minus(s.gasBudget);else return Ce(s);return m.isGreaterThan(Mo)?m:a?Mo:m},"useTransferFungibleMaxAmount");var Lh=o(({networkID:e,addressType:t,gasEstimation:n,transactionValue:r=new G(0),recipient:i})=>{let{data:s,isLoading:a,isError:c}=Xr({networkID:e,addressType:t}),f=Aa.get(e).nativeFungibleTokenType,l="unknown",m="",p=(0,ko.useMemo)(()=>{let b=s?.queriedWalletBalances[0]?.address;if(!b)return;let w=Yo(e,b);return{networkID:e,address:b,addressType:w}},[s?.queriedWalletBalances,e]),g=Fo({chainAddress:p,type:f,balance:s?.totalQuantityString?new G(s?.totalQuantityString):void 0,decimals:s?.decimals??0,recipient:i,gasEstimation:n,clampToZero:!1});return!c&&s&&g&&(g.gte(r)?l="sufficient":l="insufficient",m=s?.symbol||""),(0,ko.useMemo)(()=>({hasSufficientFunds:l,nativeTokenSymbol:m,isLoading:a,isError:c}),[l,m,a,c])},"useHasSufficientFunds");u();d();var Cd=K(q());u();d();var Ro=K(q());u();d();var Ad=o(({chainAddresses:e=[]})=>{let t=ge.tokensErrorCount(e);return R({queryKey:t,queryFn:o(()=>{throw new Error("This query is cache-only")},"queryFn"),enabled:!1,initialData:0,staleTime:1/0})},"useTokensErrorCount");u();d();var Bh=o(({errors:e})=>e,"select");function Sd({chainAddresses:e,queryOptions:t}){return xa({select:Bh,chainAddresses:e,queryOptions:t})}o(Sd,"useTokensPartialErrors");var xd=3,Kh=1,Io=o(({networkID:e,chainAddresses:t=[]})=>{let{data:n=[]}=Sd({chainAddresses:t}),{data:r=0}=Ad({chainAddresses:t}),i=r>=xd,{data:s=0}=Qi(),a=s>=xd,c=n.length===Kh&&n.some(m=>m.code==="TokensTrimmed"),{t:f}=ke(),l=(0,Ro.useMemo)(()=>{if(i)return f("partialErrorGeneric");let m=n.filter(g=>e?g.details.chainId===e:!0),p=m.length+(a?1:0);return p?p>1?f("partialErrorGeneric"):a?f("partialErrorTokenPrices"):c?f("partialErrorTokensTrimmed"):e?f("partialErrorTokenDetail"):f("partialErrorBalanceChainName",{chainName:v.getChainName(m[0].details.chainId)}):""},[i,n,a,e,c,f]);return(0,Ro.useMemo)(()=>({partialErrorMessage:l,shouldShowPartialError:l!==""}),[l])},"usePartialErrorBanner");function Vh(e){let{onTappingBuy:t,onTappingReceive:n,onTappingSend:r,onTappingSwap:i,account:s}=e,{shouldShowPartialError:a,partialErrorMessage:c}=Io({chainAddresses:s?.addresses});return{ctaActions:Hh({onTappingBuy:t,onTappingReceive:n,onTappingSend:r,onTappingSwap:i}),shouldShowPartialError:a,partialErrorMessage:c}}o(Vh,"useHomeViewState");function Hh(e){let{t}=ke(),n=ds();return(0,Cd.useMemo)(()=>{let r=[];return r.push({text:t("commandSend"),type:"send",onClick:e.onTappingSend}),n?r.push({text:t("commandTrade"),type:"trade",onClick:e.onTappingSwap}):r.push({text:t("commandSwap"),type:"swap",onClick:e.onTappingSwap}),r.push({text:t("commandReceive"),type:"receive",onClick:e.onTappingReceive}),r.push({text:t("commandBuy"),type:"buy",onClick:e.onTappingBuy}),r.sort((i,s)=>(bi.get(i.type)??100)-(bi.get(s.type)??100)),{primary:r,more:[]}},[t,n,e.onTappingSend,e.onTappingSwap,e.onTappingReceive,e.onTappingBuy])}o(Hh,"useHomeCTABarActions");u();d();var Pd=K(q());var qh=o(({networkID:e,unsignedTransaction:t,pendingActivityRows:n,accountIdentifier:r,accountSigner:i,storage:s,includeCallPayload:a})=>({accountSigner:i,accountIdentifier:r,networkID:e,unsignedTransaction:t,...a&&{callPayload:{from:t.from,to:t.to,data:t.data,value:t.value}},pendingTransactionInput:{ownerAddress:t.from,networkID:e,data:{nonce:"",unsignedTransaction:t,hash:""},type:Rt.Swap,display:{summary:n}},storage:s}),"buildArgs"),Gh=o(async({t:e,fungible:t,unsignedUnwrapTx:n,gasEstimation:r,storage:i,accountMetadata:s,accountSigner:a})=>{if(!n)throw new Error("Unsigned unwrap transaction is required");if(!r)throw new Error("Gas estimation is required");let{chain:c,balance:f}=t.data;if(!v.isEthereumNetworkID(c.id))throw new Error(`Chain is not supported: ${c.id}`);let l=c.id,m={topRight:{text:`+${f} ${c.symbol}`},topLeft:{text:e("transactionsPendingSwapping")},bottomRight:{text:`-${f} ${t.data.symbol}`},bottomLeft:{text:`${t.data.name}`}},p=Vo.parse({type:Ko.eip1559,chainId:v.getEVMNetworkIDValue(l),gas:`0x${r.gasLimit.toString(16)}`,maxFeePerGas:`0x${r.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${r.maxPriorityFeePerGas.toString(16)}`,...n}),g=qh({storage:i,accountSigner:a,pendingActivityRows:m,includeCallPayload:!1,networkID:l,unsignedTransaction:p,accountIdentifier:s.accountIdentifier});return lr(g)},"executeUnwrapTransaction"),Qh=o(()=>{let{data:e}=Ie();return(0,Pd.useMemo)(()=>{let t=e?.type,n=e?.name??"",r=e?.identifier??"";return{accountName:n,accountType:t,accountIdentifier:r}},[e])},"useAccountMetadata"),jh=o(e=>{let t=Fe(),n=ee(),{t:r}=ke(),i=Qh(),s=$e();return We({async mutationFn({fungible:a,unsignedUnwrapTx:c,gasEstimation:f}){return await Gh({t:r,fungible:a,unsignedUnwrapTx:c,gasEstimation:f,accountMetadata:i,storage:t,accountSigner:s})},async onSuccess(){await n.invalidateQueries({queryKey:ge.tokens(e)})}})},"useUnwrapTransaction");u();d();var Nd=K(q());function Wh(e){let t=Re(),n=ee();return(0,Nd.useCallback)(async r=>{let i=await Cu(_e.AccountIdToHiddenMints)??{version:2,value:{}},a=Vt(i)?.value??{},c=a[e]??[],f=new Map(c.map(m=>[m.mintId,m]));for(let{fungibleKey:m,...p}of r)if("isHidden"in p){let{isHidden:g}=p;t.capture(g?"hideFungibleToken":"unhideFungibleToken",{data:{fungibleKey:m}}),f.set(m,{mintId:m,status:g?ln.Hidden:ln.Visible})}else{let{visibility:g}=p;f.set(m,{mintId:m,status:g})}a[e]=Array.from(f.values()),await xu(_e.AccountIdToHiddenMints)({version:2,value:a}),await n.invalidateQueries({queryKey:ge.hiddenMints(e)}),await n.invalidateQueries({predicate:o(m=>{let p=m.queryKey;return Array.isArray(p)&&p.length>=2&&typeof p[0]=="string"&&p[0].startsWith("fungible-tokens-")&&p[1]==="visibility-overrides"&&typeof p[2]=="object"&&p[2]!==null&&"accountId"in p[2]&&p[2].accountId===e},"predicate")})},[e,t,n])}o(Wh,"useSetVisibilityOverrides");u();d();u();d();var Dd=K(q());var $h=o((e,t,n)=>{let r=ee(),{fungibles:i}=Mt({keys:[e]}),s=i.length===1?i[0]:void 0;(0,Dd.useEffect)(()=>{if(!s)return;let{type:a,data:c}=s,{balance:f,decimals:l,chain:m}=c,{id:p}=m,g=ze(a)===!0;if(!n||!f||g||f.isEqualTo(t))return;let b=ge.transferFungibleLoggingContext(e),w={transactionId:n,decimals:l,chainId:p,isNativeToken:g,previousBalance:f,fungibleKey:e};r.setQueryData(b,w)},[n,s,e,r,t])},"useTransferFungibleLoggingContext");u();d();var Fd=K(q());u();d();function Md(e,t,n){return fe.PublicKey.findProgramAddressSync([e.toBuffer(),n.toBuffer(),t.toBuffer()],la)[0]}o(Md,"findAssociatedTokenAddress");var zh=new fn("Unable to unwrap SOL. Wrapped SOL Token account does not exist."),Yh=new fn("Unable to unwrap SOL. Token account is not expected mint.");async function Xh(e,t){let n=await e.getAccountInfo(t);if(!n)throw zh;let r=ma.decode(n.data);return new fe.PublicKey(r.mint)}o(Xh,"getMintOfATA");function Jh(e){if(e)return typeof e=="string"?new fe.PublicKey(e):e}o(Jh,"ensurePublicKey");function Zh(){let{connection:e}=Cn(),{data:t}=Ie(),{solanaChainAddress:n,accountIdentifier:r}=(0,Fd.useMemo)(()=>({solanaChainAddress:t?.addresses.find(Et),accountIdentifier:t?.identifier??""}),[t]),i=Fe(),s=$e(),{t:a}=ke();return We({mutationFn:o(async c=>{if(!n)return Promise.reject("solanaChainAddress not loaded");try{let{networkID:f,address:l}=n,m=new fe.PublicKey(l),p=Jh(c?.tokenAccount)??Md(m,yi,dn);if((await Xh(e,p)).toBase58()!==yi.toBase58())throw Yh;let b=Dc(p,m,m,[],dn),w=new Ho.Transaction().add(b),T={ownerAddress:l,networkID:f,data:{signature:""},type:Rt.UnwrapSOL,display:{summary:{topLeft:{text:a("assetDetailUnwrappingSOL")}}}},S=await Bt({accountIdentifier:r,accountSigner:s,connection:e,feePayer:new fe.PublicKey(l),pendingTransactionInput:T,storage:i,transaction:w,useSubmissionService:!1});return{networkID:f,id:S}}catch(f){throw f instanceof Error&&U.captureError(f,V.Tokens),f}},"mutationFn")})}o(Zh,"useUnwrapSOL");u();d();var kd=x({minutes:1}),_h=o((e,t=!0)=>{let n=ge.solanaBalance(e);return R({enabled:!!e&&t&&Et(e),gcTime:kd,staleTime:kd,queryKey:n,async queryFn(){if(!e)throw new Error("No chain address provided");if(Et(e))return Ut(e.networkID).getBalance(new fe.PublicKey(e.address));throw new Error(`SOL balance not implemented for ${e.networkID}`)}})},"useSolanaBalance");u();d();var Rd=K(q());var ey=o(e=>{let{data:t}=Ss();return(0,Rd.useMemo)(()=>{if(!e||!t)return;let n=e.data.chain.id,r=t.explorers[n]??ci.get(n).defaultExplorer,i,s;if(ze(e.type))s="address",i=e.data.walletAddress;else switch(e.type){case F.SuiCoin:{s="token",i=e.data.contractAddress;break}case F.ERC20:{s="address",i=e.data.contractAddress;break}case F.SPL:case F.CompressedSPL:{s="address",i=e.data.mintAddress;break}case F.BRC20:return{explorerName:"Unisat",explorerUrl:`https://unisat.io/brc20?q=${e.data.walletAddress}`}}let a=di({networkID:n,endpoint:s,explorerType:r,param:i});return{explorerName:ui[r],explorerUrl:a}},[e,t])},"useFungibleExplorerUrl");u();d();var Id=K(q());var ty=o(e=>{let t=ee();return(0,Id.useCallback)(()=>t.invalidateQueries({queryKey:ge.tokens(e)}),[t,e])},"useInvalidateTokens");u();d();var Od=K(q());var ny=o((e,t)=>(0,Od.useMemo)(()=>{if(e)if(Ot(e)){let n=Hs(e).toNumber().toLocaleString("en-US");return{leftSubtext:void 0,leftSubtextColor:void 0,rightSubtext:t("satsAmount",{sats:n.toString()})}}else return It(e)&&e.highFees?{leftSubtext:t("notificationTransactionApprovalNetworkFeeHighWarning"),leftSubtextColor:"spotWarning",rightSubtext:""}:void 0},[e,t]),"useNetworkFeeRow");u();d();var Ud=K(q());var ry=o(({caip19:e,fungibleCaip19:t,fungibleKeys:n,isSplCompressed:r})=>{let{fungibles:i,isLoadingTokens:s,refetch:a}=Mt({keys:n}),{data:c,refetch:f,isLoading:l}=Yr({encodedCaip19:e,legacyKey:n?.[0]??null,isSplCompressed:r}),{data:m,isLoading:p}=Do({caip19:e,includePrice:!0}),g=ay(i,r),b=(0,Ud.useMemo)(()=>{if(!g)return;if(!c)return g;let T=mn(c.totalQuantityString,c.decimals);return{...g,data:{...g.data,amount:c.totalQuantityString,balance:T,usd:c.price?.price?T.times(c.price.price).toNumber():void 0,usd_24h_change:c.price?.priceChange24h!==void 0?Ld(T.times(c.price.price).toNumber(),c.price?.priceChange24h):void 0}}},[g,c]);return{derivedFungible:iy({fungible:b,fungibleCaip19:t,tokenDetails:m,tokenBalance:c}),isLoading:s||p||l,refetchFungibleBalance:a,refetchTokenBalance:f}},"useFungibleData");function iy({fungible:e,fungibleCaip19:t,tokenDetails:n,tokenBalance:r}){if(e)return e;if(!n)return;let i=Na(n),s="address"in t?oy(t,i):sy(t,i);if(s){if(r){r.extraMetadata?.compression?.compressed&&(s.type=F.CompressedSPL);let a=mn(r.totalQuantityString,r.decimals);s.data.balance=a,s.data.amount=r.totalQuantityString,s.data.usd=r.price?.price?a.times(r.price.price).toNumber():void 0,s.data.usd_24h_change=r.price?.priceChange24h!==void 0?Ld(a.times(r.price.price).toNumber(),r.price?.priceChange24h):void 0,s.data.walletAddress=r.queriedWalletBalances.find(c=>c.quantity>0)?.address??""}return s}U.addBreadcrumb(V.Tokens,"deriveFungible",ne.Error,{fungibleCaip19:JSON.stringify(t),tokenDetails:JSON.stringify(n),tokenBalance:JSON.stringify(r)}),U.captureError(new Error(`Fungible type could not be derived from ${JSON.stringify(t)}`),V.Fungibles)}o(iy,"deriveFungible");function oy(e,t){let n=gi(e);if(ze(n))throw new Error("Cannot create fake non-native fungible for native token");let r=t.address??e.address,i={amount:"0",balance:G(0),chain:t.chain,decimals:t.decimals,logoUri:t.logoURI??t.logoUri,name:t.name??"Unknown",symbol:t.symbol??"Unknown",key:r,walletAddress:"",spamStatus:t.spamStatus};switch(n){case F.SPL:return{type:n,data:{...i,mintAddress:r,programId:"",splTokenAccountPubkey:""}};case F.CompressedSPL:return{type:n,data:{...i,mintAddress:r,programId:""}};case F.ERC20:case F.SuiCoin:return{type:n,data:{...i,contractAddress:r}};case F.BRC20:return{type:n,data:{...i,firstCreatedInscriptionId:r}};case F.HypercoreAsset:return;default:Ce(n)}}o(oy,"createFakeNonNativeFungible");function sy(e,t){let n=gi(e),r={amount:"0",balance:G(0),chain:t.chain,decimals:t.decimals,logoUri:t.logoURI??t.logoUri,name:t.name??"Unknown",symbol:t.symbol??"Unknown",key:n,walletAddress:"",spamStatus:t.spamStatus};switch(e.slip44){case je.Solana:return{type:F.SolanaNative,data:r};case je.Bitcoin:return{type:F.BitcoinNative,data:r};case je.Ethereum:return{type:F.EthereumNative,data:r};case je.Base:return{type:F.BaseNative,data:r};case je.Monad:return{type:F.MonadNative,data:r};case je.Arbitrum:return{type:F.ArbitrumNative,data:r};case je.Hypercore:return{type:F.HypercoreNative,data:r};case je.Polygon:return{type:F.PolygonNative,data:r};case je.Sui:return{type:F.SuiNative,data:r};default:{let i=new Error("Missing native token implementation when creating fake a Fungible");throw Ce(e.slip44,i),i}}}o(sy,"createFakeNativeFungible");var ay=o((e,t)=>e?.length?[...e].sort((r,i)=>{if(t!==void 0){let s=r.type===F.CompressedSPL,a=i.type===F.CompressedSPL;if(s!==a)return t?s?-1:1:s?1:-1}return i.data.balance.minus(r.data.balance).toNumber()})[0]:void 0,"getSelectedFungible"),Ld=o((e,t)=>{if(t===-100)return-1*e;let n=e/(1+t/100);return e-n},"calculatePriceDifference");u();d();u();d();var Zr;(function(e){e.AF="AF",e.AX="AX",e.AL="AL",e.DZ="DZ",e.AS="AS",e.AD="AD",e.AO="AO",e.AI="AI",e.AQ="AQ",e.AG="AG",e.AR="AR",e.AM="AM",e.AW="AW",e.AU="AU",e.AT="AT",e.AZ="AZ",e.BS="BS",e.BH="BH",e.BD="BD",e.BB="BB",e.BY="BY",e.BE="BE",e.BZ="BZ",e.BJ="BJ",e.BM="BM",e.BT="BT",e.BO="BO",e.BQ="BQ",e.BA="BA",e.BW="BW",e.BV="BV",e.BR="BR",e.IO="IO",e.BN="BN",e.BG="BG",e.BF="BF",e.BI="BI",e.KH="KH",e.CM="CM",e.CA="CA",e.CV="CV",e.KY="KY",e.CF="CF",e.TD="TD",e.CL="CL",e.CX="CX",e.CC="CC",e.CO="CO",e.KM="KM",e.CK="CK",e.CR="CR",e.CI="CI",e.HR="HR",e.CU="CU",e.CW="CW",e.CY="CY",e.CZ="CZ",e.CD="CD",e.DK="DK",e.DJ="DJ",e.DM="DM",e.DO="DO",e.EC="EC",e.EG="EG",e.SV="SV",e.GQ="GQ",e.ER="ER",e.EE="EE",e.SZ="SZ",e.ET="ET",e.FK="FK",e.FO="FO",e.FJ="FJ",e.FI="FI",e.FR="FR",e.GF="GF",e.PF="PF",e.TF="TF",e.GA="GA",e.GE="GE",e.DE="DE",e.GH="GH",e.GI="GI",e.GR="GR",e.GL="GL",e.GD="GD",e.GP="GP",e.GU="GU",e.GT="GT",e.GG="GG",e.GN="GN",e.GW="GW",e.GY="GY",e.HT="HT",e.HM="HM",e.VA="VA",e.HN="HN",e.HK="HK",e.HU="HU",e.IS="IS",e.IN="IN",e.ID="ID",e.IQ="IQ",e.IE="IE",e.IR="IR",e.IM="IM",e.IL="IL",e.IT="IT",e.JM="JM",e.JP="JP",e.JE="JE",e.JO="JO",e.KZ="KZ",e.KE="KE",e.KI="KI",e.XK="XK",e.KW="KW",e.KG="KG",e.LA="LA",e.LV="LV",e.LB="LB",e.LS="LS",e.LR="LR",e.LY="LY",e.LI="LI",e.LT="LT",e.LU="LU",e.MO="MO",e.MG="MG",e.MW="MW",e.MY="MY",e.MV="MV",e.ML="ML",e.MT="MT",e.MH="MH",e.MQ="MQ",e.MR="MR",e.MU="MU",e.YT="YT",e.MX="MX",e.FM="FM",e.MD="MD",e.MC="MC",e.MN="MN",e.ME="ME",e.MS="MS",e.MA="MA",e.MZ="MZ",e.MM="MM",e.NA="NA",e.NR="NR",e.NP="NP",e.NL="NL",e.NC="NC",e.NZ="NZ",e.NI="NI",e.NE="NE",e.NG="NG",e.NU="NU",e.NF="NF",e.KP="KP",e.MP="MP",e.NO="NO",e.OM="OM",e.PK="PK",e.PW="PW",e.PA="PA",e.PG="PG",e.PY="PY",e.CN="CN",e.PE="PE",e.PH="PH",e.PN="PN",e.PL="PL",e.PT="PT",e.PR="PR",e.QA="QA",e.CG="CG",e.GM="GM",e.RE="RE",e.RO="RO",e.RU="RU",e.RW="RW",e.BL="BL",e.SH="SH",e.KN="KN",e.LC="LC",e.MF="MF",e.PM="PM",e.VC="VC",e.WS="WS",e.SM="SM",e.ST="ST",e.SA="SA",e.SN="SN",e.RS="RS",e.SC="SC",e.SL="SL",e.SG="SG",e.SX="SX",e.SK="SK",e.SI="SI",e.SB="SB",e.SO="SO",e.ZA="ZA",e.GS="GS",e.KR="KR",e.SS="SS",e.ES="ES",e.LK="LK",e.PS="PS",e.SD="SD",e.SR="SR",e.SJ="SJ",e.SE="SE",e.CH="CH",e.SY="SY",e.TW="TW",e.TJ="TJ",e.TH="TH",e.MK="MK",e.TL="TL",e.TG="TG",e.TK="TK",e.TO="TO",e.TT="TT",e.TN="TN",e.TR="TR",e.TM="TM",e.TC="TC",e.TV="TV",e.UG="UG",e.UA="UA",e.AE="AE",e.GB="GB",e.TZ="TZ",e.UM="UM",e.US="US",e.UY="UY",e.UZ="UZ",e.VU="VU",e.VE="VE",e.VN="VN",e.VG="VG",e.VI="VI",e.WF="WF",e.EH="EH",e.YE="YE",e.ZM="ZM",e.ZW="ZW"})(Zr||(Zr={}));var le;(function(e){e.FAIL_SEVERE="FAIL_SEVERE",e.FAIL_HIGH="FAIL_HIGH",e.NO_ACTION="NO_ACTION",e.DATA_NOT_FOUND="DATA_NOT_FOUND"})(le||(le={}));var Bd=h.object({action:h.nativeEnum(le),address:Wo,expirationUnixtimeInSec:h.number().nullish().default(null)}),Uo=h.object({addressScreenResults:h.array(Bd)}),Kd=h.object({country:h.nativeEnum(Zr)}),Hn=class extends Error{static{o(this,"WalletScreenError")}constructor(t){super(t),this.name="WalletScreenError"}},Oo;(function(e){e.BURN_COLLECTIBLE="BURN_COLLECTIBLE",e.SEND_COLLECTIBLE="SEND_COLLECTIBLE",e.SEND_FUNGIBLE="SEND_FUNGIBLE",e.STAKE_FUNGIBLE="STAKE_FUNGIBLE",e.SWAP_FUNGIBLE="SWAP_FUNGIBLE",e.INSTANT_SELL="INSTANT_SELL",e.PERPS_FUNDING="PERPS_FUNDING"})(Oo||(Oo={}));u();d();var Wd=K(q());u();d();u();d();var Vd="@phantom/wallet-screening",Hd=`${Vd}:wallet-screen-action`,cy=`${Vd}:wallet-screen-geo`,_r={walletScreenAction(e){return[Hd,e]},walletGeo(){return[cy]}};u();d();var qd=new Error("Failed to fetch wallet screen action.");async function Gd(e){try{let t=await re.api().post("/wallet_screen/v1",e);if(!De(t))throw qd;let n=t.data;return Uo.parse(n)}catch{throw qd}}o(Gd,"fetchWalletScreenAction");var Qd=x({days:7}),jd=o(e=>{let t=e!==void 0&&v.isMainnetNetworkID(e.networkID),n=[];if(e!==void 0){let c=v.isEVMNetworkID(e.networkID)?e.address.toLowerCase():e.address;n=[{chainId:e.networkID,address:c,resourceType:de.address}]}let r={addresses:n},i=ee(),s=_r.walletScreenAction(r),a=[s[0]];return R({enabled:t,queryKey:s,gcTime:Qd,staleTime:Qd,refetchInterval:!1,refetchOnMount:!1,async queryFn(){if(uy(i,a))return le.FAIL_SEVERE;let f=await Gd(r);return dy(f)}})},"useWalletScreenAction"),uy=o((e,t)=>{let n=e.getQueriesData({queryKey:t,exact:!1}),r=!1;for(let[i,s]of n){let a=s;if(a&&a===le.FAIL_SEVERE){r=!0;break}}return r},"findSevereInQueryData"),dy=o(e=>{let t=e.addressScreenResults;return t.some(n=>n.action===le.FAIL_SEVERE)?le.FAIL_SEVERE:t.some(n=>n.action===le.FAIL_HIGH)?le.FAIL_HIGH:t.some(n=>n.action===le.NO_ACTION)?le.NO_ACTION:le.DATA_NOT_FOUND},"getActionFromResponse");var ly=o((e,t)=>{let n=Re(),{data:r}=jd(e);switch((0,Wd.useEffect)(()=>{r&&e&&n.capture("walletScreened",{data:{walletScreen:{action:r.toString(),surface:t},chainId:v.getChainID(e.networkID),networkId:e.networkID}})},[r,e,t,n]),r){case le.FAIL_SEVERE:case le.FAIL_HIGH:throw new Hn(`Transaction disabled: ${t}`);case le.NO_ACTION:case le.DATA_NOT_FOUND:return}},"useThrowIfFailWalletScreen");u();d();u();d();u();d();var $d=new Error("Failed to fetch wallet geo.");async function zd(){try{let e=await re.api().get("/wallet_screen/v1/geo");if(!De(e))throw $d;let t=e.data;return Kd.parse(t).country}catch{throw $d}}o(zd,"fetchWalletGeo");var Yd=x({hours:1}),fy=o(()=>{let e=_r.walletGeo();return R({queryKey:e,staleTime:Yd,refetchInterval:Yd,queryFn:zd})},"useWalletGeo");u();d();export{Wt as a,Da as b,Ma as c,Fa as d,il as e,Dc as f,D as g,Ka as h,Eg as i,be as j,hn as k,Tg as l,Xt as m,Ou as n,tt as o,gl as p,Ct as q,Gi as r,Ha as s,j as t,Oi as u,xr as v,Hl as w,Bi as x,Ki as y,Pt as z,mf as A,hf as B,xc as C,Nt as D,Hm as E,$i as F,zi as G,qf as H,Gm as I,mo as J,xn as K,Lc as L,Cn as M,Qm as N,Gf as O,Pn as P,Wm as Q,zm as R,Kr as S,po as T,tp as U,lo as V,hu as W,np as X,rp as Y,ip as Z,Om as _,sp as $,ap as aa,cp as ba,Km as ca,up as da,lp as ea,fp as fa,_e as ga,Pu as ha,yo as ia,Mt as ja,$h as ka,Fo as la,Zh as ma,yp as na,_h as oa,ey as pa,gp as qa,nt as ra,Mh as sa,Bu as ta,Ek as ua,Hu as va,uR as wa,$p as xa,dI as ya,Qe as za,qr as Aa,rd as Ba,id as Ca,Gr as Da,_t as Ea,rt as Fa,cd as Ga,ht as Ha,nh as Ia,gt as Ja,en as Ka,bt as La,Yr as Ma,Sh as Na,Ed as Oa,Jr as Pa,Ph as Qa,nn as Ra,yd as Sa,Td as Ta,vd as Ua,Do as Va,Lh as Wa,Io as Xa,Vh as Ya,ty as Za,ny as _a,jh as $a,ry as ab,Wh as bb,Hn as cb,Oo as db,Hd as eb,ly as fb,fy as gb};
//# sourceMappingURL=chunk-Z3O2IHPJ.js.map
