import{$ as My,$d as iu,Aa as fn,Ab as Br,Ae as Md,Ba as dn,Bb as Ry,Bc as jy,Be as Xy,C as pt,Cb as st,Cc as Po,Cd as pn,Ce as Ed,Db as Jc,Dd as bs,De as ev,Eb as ur,Ee as tv,F as gs,Fb as Yc,Fc as et,Fe as ou,Gb as Ny,H as hy,Hb as Qc,He as Jt,I as py,Ib as gM,Jb as yM,K as my,Kd as Wy,L as dM,Lb as vM,Lc as Mt,Ld as Hy,Md as $y,N as gy,Nc as zt,Nd as Gy,O as hM,Ob as Dy,Od as Zy,P as yy,Pb as Kt,Pc as X,Q as vy,Qb as Xc,Qc as W,S as _a,Sb as Uy,T as by,Tc as H,U as vd,Ub as wd,Ud as Jy,V as wy,Vb as me,Vd as nu,W as xe,X as oe,Y as xy,Z as Sy,Zc as xd,_ as Ay,aa as yi,ac as Ly,ad as ru,bb as Iy,bd as hn,dd as qy,fa as ys,ga as k,gd as Pa,ia as ka,ib as _y,ie as lr,ja as br,jb as bd,kb as cr,ke as Wi,la as Ey,lb as Bt,le as MM,mb as Zc,nb as ko,nc as Vy,ob as ky,oc as vs,pb as C,pc as Fy,pe as Sd,qb as Py,qe as EM,rb as Oy,sa as Ct,sb as Cy,sd as Rt,se as IM,tb as pM,tc as zy,te as ws,ub as qi,uc as eu,ud as Xe,v as Ia,vb as By,w as fM,wb as Ky,we as Ad,xc as Zt,xd as er,yb as mM,ye as Yy,z as dy,za as Ty,zc as tu,ze as Qy}from"./chunk-JPCZ2XYS.js";import{a as sy,b as uM,d as Ta,f as lM,h as ps,o as ay,q as Hc,r as $c,s as Gc,w as cy,x as uy}from"./chunk-ZRKH4SQM.js";import{U as Kr,Z as Hi,a as nt,b as Wc,ca as bM,da as wM,ga as xM,ha as SM,ia as AM,j as m,k as Xt,m as Ot,n as ms,o as ly,q as fy,s as ar,wa as TM,za as _M}from"./chunk-TVPT7M2T.js";import{a as o,d as le,e as aM,g as te,i as d,j as E,k as cM,l as ln,m as Buffer,n as h}from"./chunk-WKJYWAXG.js";var Rv=le((wK,Kv)=>{d();h();var FE=bM(),zE=wM(),jE=TM(),qE=SM(),WE=xM(),HE=AM(),$E=Object.prototype,GE=$E.hasOwnProperty,ZE=jE(function(e,t){if(WE(t)||qE(t)){zE(t,HE(t),e);return}for(var r in t)GE.call(t,r)&&FE(e,r,t[r])});Kv.exports=ZE});var Vv=le((Qd,Xd)=>{d();h();(function(e,t){typeof Qd=="object"&&typeof Xd<"u"?Xd.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_relativeTime=t()})(Qd,function(){"use strict";return function(e,t,r){e=e||{};var n=t.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function s(f,p,v,A){return n.fromToBase(f,p,v,A)}o(s,"i"),r.en.relativeTime=i,n.fromToBase=function(f,p,v,A,T){for(var I,P,B,K=v.$locale().relativeTime||i,N=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],D=N.length,Z=0;Z<D;Z+=1){var L=N[Z];L.d&&(I=A?r(f).diff(v,L.d,!0):v.diff(f,L.d,!0));var ne=(e.rounding||Math.round)(Math.abs(I));if(B=I>0,ne<=L.r||!L.r){ne<=1&&Z>0&&(L=N[Z-1]);var ie=K[L.l];T&&(ne=T(""+ne)),P=typeof ie=="string"?ie.replace("%d",ne):ie(ne,p,L.l,B);break}}if(p)return P;var re=B?K.future:K.past;return typeof re=="function"?re(P):re.replace("%s",P)},n.to=function(f,p){return s(f,p,this,!0)},n.from=function(f,p){return s(f,p,this)};var c=o(function(f){return f.$u?r.utc():r()},"d");n.toNow=function(f){return this.to(c(this),f)},n.fromNow=function(f){return this.from(c(this),f)}}})});var Fv=le((eh,th)=>{d();h();(function(e,t){typeof eh=="object"&&typeof th<"u"?th.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_utc=t()})(eh,function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,i,s){var c=i.prototype;s.utc=function(P){var B={date:P,utc:!0,args:arguments};return new i(B)},c.utc=function(P){var B=s(this.toDate(),{locale:this.$L,utc:!0});return P?B.add(this.utcOffset(),e):B},c.local=function(){return s(this.toDate(),{locale:this.$L,utc:!1})};var f=c.parse;c.parse=function(P){P.utc&&(this.$u=!0),this.$utils().u(P.$offset)||(this.$offset=P.$offset),f.call(this,P)};var p=c.init;c.init=function(){if(this.$u){var P=this.$d;this.$y=P.getUTCFullYear(),this.$M=P.getUTCMonth(),this.$D=P.getUTCDate(),this.$W=P.getUTCDay(),this.$H=P.getUTCHours(),this.$m=P.getUTCMinutes(),this.$s=P.getUTCSeconds(),this.$ms=P.getUTCMilliseconds()}else p.call(this)};var v=c.utcOffset;c.utcOffset=function(P,B){var K=this.$utils().u;if(K(P))return this.$u?0:K(this.$offset)?v.call(this):this.$offset;if(typeof P=="string"&&(P=function(L){L===void 0&&(L="");var ne=L.match(t);if(!ne)return null;var ie=(""+ne[0]).match(r)||["-",0,0],re=ie[0],ee=60*+ie[1]+ +ie[2];return ee===0?0:re==="+"?ee:-ee}(P),P===null))return this;var N=Math.abs(P)<=16?60*P:P,D=this;if(B)return D.$offset=N,D.$u=P===0,D;if(P!==0){var Z=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(D=this.local().add(N+Z,e)).$offset=N,D.$x.$localOffset=Z}else D=this.utc();return D};var A=c.format;c.format=function(P){var B=P||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return A.call(this,B)},c.valueOf=function(){var P=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*P},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var T=c.toDate;c.toDate=function(P){return P==="s"&&this.$offset?s(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():T.call(this)};var I=c.diff;c.diff=function(P,B,K){if(P&&this.$u===P.$u)return I.call(this,P,B,K);var N=this.local(),D=s(P).local();return I.call(N,D,B,K)}}})});var rb=le((oh,sh)=>{d();h();(function(e,t){typeof oh=="object"&&typeof sh<"u"?sh.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_isToday=t()})(oh,function(){"use strict";return function(e,t,r){t.prototype.isToday=function(){var n="YYYY-MM-DD",i=r();return this.format(n)===i.format(n)}}})});var nb=le((ah,ch)=>{d();h();(function(e,t){typeof ah=="object"&&typeof ch<"u"?ch.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_isYesterday=t()})(ah,function(){"use strict";return function(e,t,r){t.prototype.isYesterday=function(){var n="YYYY-MM-DD",i=r().subtract(1,"day");return this.format(n)===i.format(n)}}})});var Bs=le(Au=>{"use strict";d();h();Object.defineProperty(Au,"__esModule",{value:!0});Au.AppAuthError=void 0;var vT=function(){function e(t,r){this.message=t,this.extras=r}return o(e,"AppAuthError"),e}();Au.AppAuthError=vT});var Mu=le(Kn=>{"use strict";d();h();Object.defineProperty(Kn,"__esModule",{value:!0});Kn.DefaultCrypto=Kn.textEncodeLite=Kn.urlSafe=Kn.bufferToString=void 0;var bT=cM(),bb=Bs(),wb=typeof self<"u"&&!!self.crypto,wT=wb&&!!self.crypto.subtle,gh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function xb(e){for(var t=[],r=0;r<e.byteLength;r+=1){var n=e[r]%gh.length;t.push(gh[n])}return t.join("")}o(xb,"bufferToString");Kn.bufferToString=xb;function Sb(e){var t=bT.fromByteArray(new Uint8Array(e));return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}o(Sb,"urlSafe");Kn.urlSafe=Sb;function Ab(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}o(Ab,"textEncodeLite");Kn.textEncodeLite=Ab;var xT=function(){function e(){}return o(e,"DefaultCrypto"),e.prototype.generateRandom=function(t){var r=new Uint8Array(t);if(wb)self.crypto.getRandomValues(r);else for(var n=0;n<t;n+=1)r[n]=Math.random()*gh.length|0;return xb(r)},e.prototype.deriveChallenge=function(t){return t.length<43||t.length>128?Promise.reject(new bb.AppAuthError("Invalid code length.")):wT?new Promise(function(r,n){self.crypto.subtle.digest("SHA-256",Ab(t)).then(function(i){return r(Sb(new Uint8Array(i)))},function(i){return n(i)})}):Promise.reject(new bb.AppAuthError("window.crypto.subtle is unavailable."))},e}();Kn.DefaultCrypto=xT});var yh=le(xr=>{"use strict";d();h();Object.defineProperty(xr,"__esModule",{value:!0});xr.IS_PROFILE=xr.IS_LOG=xr.setFlag=xr.Flags=void 0;xr.Flags={IS_LOG:!0,IS_PROFILE:!1};function ST(e,t){xr.Flags[e]=t}o(ST,"setFlag");xr.setFlag=ST;xr.IS_LOG=xr.Flags.IS_LOG,xr.IS_PROFILE=xr.Flags.IS_PROFILE});var Ga=le(Yi=>{"use strict";d();h();var vh=Yi&&Yi.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))};Object.defineProperty(Yi,"__esModule",{value:!0});Yi.profile=Yi.log=void 0;var Mb=yh();function bh(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(Mb.Flags.IS_LOG){var n=t?t.length:0;n>0?console.log.apply(console,vh([e],t,!1)):console.log(e)}}o(bh,"log");Yi.log=bh;var AT=typeof self<"u"&&!!self.performance&&!!console.profile;function MT(e,t,r){return Mb.Flags.IS_PROFILE?ET(e,t,r):r}o(MT,"profile");Yi.profile=MT;function ET(e,t,r){var n=r.value,i=n.name;return i||(i="anonymous function"),AT?r.value=function(s){console.profile(i);var c=self.performance.now(),f=n.call.apply(n,vh([this||self],s,!1)),p=self.performance.now()-c;return console.log("".concat(i," took ").concat(p," ms")),console.profileEnd(),f}:r.value=function(s){bh("Profile start ".concat(i));var c=Date.now(),f=n.call.apply(n,vh([this||self],s,!1)),p=Date.now()-c;return bh("Profile end ".concat(i," took ").concat(p," ms.")),f},r}o(ET,"performProfile")});var wh=le(Eu=>{"use strict";d();h();Object.defineProperty(Eu,"__esModule",{value:!0});Eu.AuthorizationRequest=void 0;var TT=Mu(),IT=Ga(),_T=10,kT=o(function(e){return e.generateRandom(_T)},"newState"),PT=function(){function e(t,r,n){r===void 0&&(r=new TT.DefaultCrypto),n===void 0&&(n=!0),this.crypto=r,this.usePkce=n,this.clientId=t.client_id,this.redirectUri=t.redirect_uri,this.scope=t.scope,this.responseType=t.response_type||e.RESPONSE_TYPE_CODE,this.state=t.state||kT(r),this.extras=t.extras,this.internal=t.internal}return o(e,"AuthorizationRequest"),e.prototype.setupCodeVerifier=function(){var t=this;if(this.usePkce){var r=this.crypto.generateRandom(128),n=this.crypto.deriveChallenge(r).catch(function(i){(0,IT.log)("Unable to generate PKCE challenge. Not using PKCE",i)});return n.then(function(i){i&&(t.internal=t.internal||{},t.internal.code_verifier=r,t.extras=t.extras||{},t.extras.code_challenge=i,t.extras.code_challenge_method="S256")})}else return Promise.resolve()},e.prototype.toJson=function(){var t=this;return this.setupCodeVerifier().then(function(){return{response_type:t.responseType,client_id:t.clientId,redirect_uri:t.redirectUri,scope:t.scope,state:t.state,extras:t.extras,internal:t.internal}})},e.RESPONSE_TYPE_TOKEN="token",e.RESPONSE_TYPE_CODE="code",e}();Eu.AuthorizationRequest=PT});var Eb=le(Tu=>{"use strict";d();h();Object.defineProperty(Tu,"__esModule",{value:!0});Tu.requireValidUrl=void 0;var OT=Bs();function CT(e){try{return new URL(e),e}catch{throw new OT.AppAuthError("Invalid input url ".concat(e))}}o(CT,"requireValidUrl");Tu.requireValidUrl=CT});var Sh=le(Ai=>{"use strict";d();h();Object.defineProperty(Ai,"__esModule",{value:!0});Ai.AuthorizationRequestHandler=Ai.BUILT_IN_PARAMETERS=Ai.AuthorizationNotifier=void 0;var xh=Ga(),BT=Eb(),KT=function(){function e(){this.listener=null}return o(e,"AuthorizationNotifier"),e.prototype.setAuthorizationListener=function(t){this.listener=t},e.prototype.onAuthorizationComplete=function(t,r,n){this.listener&&this.listener(t,r,n)},e}();Ai.AuthorizationNotifier=KT;Ai.BUILT_IN_PARAMETERS=["redirect_uri","client_id","response_type","state","scope"];var RT=function(){function e(t,r){this.utils=t,this.crypto=r,this.notifier=null}return o(e,"AuthorizationRequestHandler"),e.prototype.buildRequestUrl=function(t,r){var n={redirect_uri:r.redirectUri,client_id:r.clientId,response_type:r.responseType,state:r.state,scope:r.scope};if(r.extras)for(var i in r.extras)r.extras.hasOwnProperty(i)&&Ai.BUILT_IN_PARAMETERS.indexOf(i)<0&&(n[i]=r.extras[i]);var s=this.utils.stringify(n),c=(0,BT.requireValidUrl)(t.authorizationEndpoint),f="".concat(c,"?").concat(s);return f},e.prototype.completeAuthorizationRequestIfPossible=function(){var t=this;return(0,xh.log)("Checking to see if there is an authorization response to be delivered."),this.notifier||(0,xh.log)(`Notifier is not present on AuthorizationRequest handler.
          No delivery of result will be possible`),this.completeAuthorizationRequest().then(function(r){r||(0,xh.log)("No result is available yet."),r&&t.notifier&&t.notifier.onAuthorizationComplete(r.request,r.response,r.error)})},e.prototype.setAuthorizationNotifier=function(t){return this.notifier=t,this},e}();Ai.AuthorizationRequestHandler=RT});var Ah=le(Ks=>{"use strict";d();h();Object.defineProperty(Ks,"__esModule",{value:!0});Ks.AuthorizationError=Ks.AuthorizationResponse=void 0;var NT=function(){function e(t){this.code=t.code,this.state=t.state}return o(e,"AuthorizationResponse"),e.prototype.toJson=function(){return{code:this.code,state:this.state}},e}();Ks.AuthorizationResponse=NT;var DT=function(){function e(t){this.error=t.error,this.errorDescription=t.error_description,this.errorUri=t.error_uri,this.state=t.state}return o(e,"AuthorizationError"),e.prototype.toJson=function(){return{error:this.error,error_description:this.errorDescription,error_uri:this.errorUri,state:this.state}},e}();Ks.AuthorizationError=DT});var _u=le(Nr=>{"use strict";d();h();var Eh=Nr&&Nr.__extends||function(){var e=o(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}o(n,"__"),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Nr,"__esModule",{value:!0});Nr.TestRequestor=Nr.FetchRequestor=Nr.JQueryRequestor=Nr.Requestor=void 0;var Mh=Bs(),Iu=function(){function e(){}return o(e,"Requestor"),e}();Nr.Requestor=Iu;var UT=function(e){Eh(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return o(t,"JQueryRequestor"),t.prototype.xhr=function(r){var n=$.ajax(r);return new Promise(function(i,s){n.then(function(c,f,p){i(c)},function(c,f,p){s(new Mh.AppAuthError(p))})})},t}(Iu);Nr.JQueryRequestor=UT;var LT=function(e){Eh(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return o(t,"FetchRequestor"),t.prototype.xhr=function(r){if(!r.url)return Promise.reject(new Mh.AppAuthError("A URL must be provided."));var n=new URL(r.url),i={};if(i.method=r.method,i.mode="cors",r.data)if(r.method&&r.method.toUpperCase()==="POST")i.body=r.data;else{var s=new URLSearchParams(r.data);s.forEach(function(p,v){n.searchParams.append(v,p)})}if(i.headers={},r.headers)for(var c in r.headers)r.headers.hasOwnProperty(c)&&(i.headers[c]=r.headers[c]);var f=r.dataType&&r.dataType.toLowerCase()==="json";return f&&(i.headers.Accept="application/json, text/javascript, */*; q=0.01"),fetch(n.toString(),i).then(function(p){if(p.status>=200&&p.status<300){var v=p.headers.get("content-type");return f||v&&v.indexOf("application/json")!==-1?p.json():p.text()}else return Promise.reject(new Mh.AppAuthError(p.status.toString(),p.statusText))})},t}(Iu);Nr.FetchRequestor=LT;var VT=function(e){Eh(t,e);function t(r){var n=e.call(this)||this;return n.promise=r,n}return o(t,"TestRequestor"),t.prototype.xhr=function(r){return this.promise},t}(Iu);Nr.TestRequestor=VT});var Tb=le(ku=>{"use strict";d();h();Object.defineProperty(ku,"__esModule",{value:!0});ku.AuthorizationServiceConfiguration=void 0;var FT=_u(),zT=".well-known",jT="openid-configuration",qT=function(){function e(t){this.authorizationEndpoint=t.authorization_endpoint,this.tokenEndpoint=t.token_endpoint,this.revocationEndpoint=t.revocation_endpoint,this.userInfoEndpoint=t.userinfo_endpoint,this.endSessionEndpoint=t.end_session_endpoint}return o(e,"AuthorizationServiceConfiguration"),e.prototype.toJson=function(){return{authorization_endpoint:this.authorizationEndpoint,token_endpoint:this.tokenEndpoint,revocation_endpoint:this.revocationEndpoint,end_session_endpoint:this.endSessionEndpoint,userinfo_endpoint:this.userInfoEndpoint}},e.fetchFromIssuer=function(t,r){var n="".concat(t,"/").concat(zT,"/").concat(jT),i=r||new FT.JQueryRequestor;return i.xhr({url:n,dataType:"json",method:"GET"}).then(function(s){return new e(s)})},e}();ku.AuthorizationServiceConfiguration=qT});var Ou=le(Pu=>{"use strict";d();h();Object.defineProperty(Pu,"__esModule",{value:!0});Pu.BasicQueryStringUtils=void 0;var WT=function(){function e(){}return o(e,"BasicQueryStringUtils"),e.prototype.parse=function(t,r){return r?this.parseQueryString(t.hash):this.parseQueryString(t.search)},e.prototype.parseQueryString=function(t){var r={};t=t.trim().replace(/^(\?|#|&)/,"");for(var n=t.split("&"),i=0;i<n.length;i+=1){var s=n[i],c=s.split("=");if(c.length>=2){var f=decodeURIComponent(c.shift()),p=c.length>0?c.join("="):null;p&&(r[f]=decodeURIComponent(p))}}return r},e.prototype.stringify=function(t){var r=[];for(var n in t)t.hasOwnProperty(n)&&t[n]&&r.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t[n])));return r.join("&")},e}();Pu.BasicQueryStringUtils=WT});var Th=le(Qi=>{"use strict";d();h();var HT=Qi&&Qi.__extends||function(){var e=o(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}o(n,"__"),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Qi,"__esModule",{value:!0});Qi.LocalStorageBackend=Qi.StorageBackend=void 0;var Ib=function(){function e(){}return o(e,"StorageBackend"),e}();Qi.StorageBackend=Ib;var $T=function(e){HT(t,e);function t(r){var n=e.call(this)||this;return n.storage=r||self.localStorage,n}return o(t,"LocalStorageBackend"),t.prototype.getItem=function(r){var n=this;return new Promise(function(i,s){var c=n.storage.getItem(r);i(c||null)})},t.prototype.removeItem=function(r){var n=this;return new Promise(function(i,s){n.storage.removeItem(r),i()})},t.prototype.clear=function(){var r=this;return new Promise(function(n,i){r.storage.clear(),n()})},t.prototype.setItem=function(r,n){var i=this;return new Promise(function(s,c){i.storage.setItem(r,n),s()})},t}(Ib);Qi.LocalStorageBackend=$T});var Pb=le(Rs=>{"use strict";d();h();var GT=Rs&&Rs.__extends||function(){var e=o(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}o(n,"__"),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Rs,"__esModule",{value:!0});Rs.RedirectRequestHandler=void 0;var ZT=wh(),JT=Sh(),_b=Ah(),YT=Mu(),Cu=Ga(),QT=Ou(),XT=Th(),Ih=o(function(e){return"".concat(e,"_appauth_authorization_request")},"authorizationRequestKey"),kb=o(function(e){return"".concat(e,"_appauth_authorization_service_configuration")},"authorizationServiceConfigurationKey"),_h="appauth_current_authorization_request",eI=function(e){GT(t,e);function t(r,n,i,s){r===void 0&&(r=new XT.LocalStorageBackend),n===void 0&&(n=new QT.BasicQueryStringUtils),i===void 0&&(i=self.location),s===void 0&&(s=new YT.DefaultCrypto);var c=e.call(this,n,s)||this;return c.storageBackend=r,c.locationLike=i,c}return o(t,"RedirectRequestHandler"),t.prototype.performAuthorizationRequest=function(r,n){var i=this,s=this.crypto.generateRandom(10),c=Promise.all([this.storageBackend.setItem(_h,s),n.toJson().then(function(f){return i.storageBackend.setItem(Ih(s),JSON.stringify(f))}),this.storageBackend.setItem(kb(s),JSON.stringify(r.toJson()))]);c.then(function(){var f=i.buildRequestUrl(r,n);(0,Cu.log)("Making a request to ",n,f),i.locationLike.assign(f)})},t.prototype.completeAuthorizationRequest=function(){var r=this;return this.storageBackend.getItem(_h).then(function(n){return n?r.storageBackend.getItem(Ih(n)).then(function(i){return JSON.parse(i)}).then(function(i){return new ZT.AuthorizationRequest(i)}).then(function(i){var s="".concat(r.locationLike.origin).concat(r.locationLike.pathname),c=r.utils.parse(r.locationLike,!0),f=c.state,p=c.code,v=c.error;(0,Cu.log)("Potential authorization request ",s,c,f,p,v);var A=f===i.state,T=null,I=null;if(A){if(v){var P=c.error_uri,B=c.error_description;I=new _b.AuthorizationError({error:v,error_description:B,error_uri:P,state:f})}else T=new _b.AuthorizationResponse({code:p,state:f});return Promise.all([r.storageBackend.removeItem(_h),r.storageBackend.removeItem(Ih(n)),r.storageBackend.removeItem(kb(n))]).then(function(){return(0,Cu.log)("Delivering authorization response"),{request:i,response:T,error:I}})}else return(0,Cu.log)("Mismatched request (state and request_uri) dont match."),Promise.resolve(null)}):null})},t}(JT.AuthorizationRequestHandler);Rs.RedirectRequestHandler=eI});var Ob=le(Bu=>{"use strict";d();h();Object.defineProperty(Bu,"__esModule",{value:!0});Bu.RevokeTokenRequest=void 0;var tI=function(){function e(t){this.token=t.token,this.tokenTypeHint=t.token_type_hint,this.clientId=t.client_id,this.clientSecret=t.client_secret}return o(e,"RevokeTokenRequest"),e.prototype.toJson=function(){var t={token:this.token};return this.tokenTypeHint&&(t.token_type_hint=this.tokenTypeHint),this.clientId&&(t.client_id=this.clientId),this.clientSecret&&(t.client_secret=this.clientSecret),t},e.prototype.toStringMap=function(){var t=this.toJson();return t},e}();Bu.RevokeTokenRequest=tI});var Cb=le(Xi=>{"use strict";d();h();Object.defineProperty(Xi,"__esModule",{value:!0});Xi.TokenRequest=Xi.GRANT_TYPE_REFRESH_TOKEN=Xi.GRANT_TYPE_AUTHORIZATION_CODE=void 0;Xi.GRANT_TYPE_AUTHORIZATION_CODE="authorization_code";Xi.GRANT_TYPE_REFRESH_TOKEN="refresh_token";var rI=function(){function e(t){this.clientId=t.client_id,this.redirectUri=t.redirect_uri,this.grantType=t.grant_type,this.code=t.code,this.refreshToken=t.refresh_token,this.extras=t.extras}return o(e,"TokenRequest"),e.prototype.toJson=function(){return{grant_type:this.grantType,code:this.code,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,client_id:this.clientId,extras:this.extras}},e.prototype.toStringMap=function(){var t={grant_type:this.grantType,client_id:this.clientId,redirect_uri:this.redirectUri};if(this.code&&(t.code=this.code),this.refreshToken&&(t.refresh_token=this.refreshToken),this.extras)for(var r in this.extras)this.extras.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=this.extras[r]);return t},e}();Xi.TokenRequest=rI});var kh=le(Rn=>{"use strict";d();h();Object.defineProperty(Rn,"__esModule",{value:!0});Rn.TokenError=Rn.TokenResponse=Rn.nowInSeconds=void 0;var nI=10*60*-1,iI=o(function(){return Math.round(new Date().getTime()/1e3)},"nowInSeconds");Rn.nowInSeconds=iI;var oI=function(){function e(t){this.accessToken=t.access_token,this.tokenType=t.token_type||"bearer",t.expires_in&&(this.expiresIn=parseInt(t.expires_in,10)),this.refreshToken=t.refresh_token,this.scope=t.scope,this.idToken=t.id_token,this.issuedAt=t.issued_at||(0,Rn.nowInSeconds)()}return o(e,"TokenResponse"),e.prototype.toJson=function(){var t;return{access_token:this.accessToken,id_token:this.idToken,refresh_token:this.refreshToken,scope:this.scope,token_type:this.tokenType,issued_at:this.issuedAt,expires_in:(t=this.expiresIn)===null||t===void 0?void 0:t.toString()}},e.prototype.isValid=function(t){if(t===void 0&&(t=nI),this.expiresIn){var r=(0,Rn.nowInSeconds)();return r<this.issuedAt+this.expiresIn+t}else return!0},e}();Rn.TokenResponse=oI;var sI=function(){function e(t){this.error=t.error,this.errorDescription=t.error_description,this.errorUri=t.error_uri}return o(e,"TokenError"),e.prototype.toJson=function(){return{error:this.error,error_description:this.errorDescription,error_uri:this.errorUri}},e}();Rn.TokenError=sI});var Kb=le(Ku=>{"use strict";d();h();Object.defineProperty(Ku,"__esModule",{value:!0});Ku.BaseTokenRequestHandler=void 0;var aI=Bs(),cI=Ou(),Bb=kh(),uI=_u(),lI=function(){function e(t,r){t===void 0&&(t=new uI.JQueryRequestor),r===void 0&&(r=new cI.BasicQueryStringUtils),this.requestor=t,this.utils=r}return o(e,"BaseTokenRequestHandler"),e.prototype.isTokenResponse=function(t){return t.error===void 0},e.prototype.performRevokeTokenRequest=function(t,r){var n=this.requestor.xhr({url:t.revocationEndpoint,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.utils.stringify(r.toStringMap())});return n.then(function(i){return!0})},e.prototype.performTokenRequest=function(t,r){var n=this,i=this.requestor.xhr({url:t.tokenEndpoint,method:"POST",dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.utils.stringify(r.toStringMap())});return i.then(function(s){return n.isTokenResponse(s)?new Bb.TokenResponse(s):Promise.reject(new aI.AppAuthError(s.error,new Bb.TokenError(s)))})},e}();Ku.BaseTokenRequestHandler=lI});var Nb=le(Rb=>{"use strict";d();h();Object.defineProperty(Rb,"__esModule",{value:!0})});var Ph=le(wt=>{"use strict";d();h();var fI=wt&&wt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:o(function(){return t[r]},"get")}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),qt=wt&&wt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&fI(t,e,r)};Object.defineProperty(wt,"__esModule",{value:!0});qt(wh(),wt);qt(Sh(),wt);qt(Ah(),wt);qt(Tb(),wt);qt(Mu(),wt);qt(Bs(),wt);qt(yh(),wt);qt(Ga(),wt);qt(Ou(),wt);qt(Pb(),wt);qt(Ob(),wt);qt(Th(),wt);qt(Cb(),wt);qt(Kb(),wt);qt(kh(),wt);qt(Nb(),wt);qt(_u(),wt)});var sx=le(Hs=>{"use strict";d();h();Object.defineProperty(Hs,"__esModule",{value:!0});Hs.testnet=Hs.bitcoin=void 0;Hs.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};Hs.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});var ax=le(dt=>{"use strict";d();h();Object.defineProperty(dt,"__esModule",{value:!0});dt.maybe=dt.Boolean=dt.Array=dt.Buffer256bit=dt.Network=dt.typeforce=void 0;dt.typeforce=yM();dt.Network=dt.typeforce.compile({messagePrefix:dt.typeforce.oneOf(dt.typeforce.Buffer,dt.typeforce.String),bip32:{public:dt.typeforce.UInt32,private:dt.typeforce.UInt32},pubKeyHash:dt.typeforce.UInt8,scriptHash:dt.typeforce.UInt8,wif:dt.typeforce.UInt8});dt.Buffer256bit=dt.typeforce.BufferN(32);dt.Array=dt.typeforce.Array;dt.Boolean=dt.typeforce.Boolean;dt.maybe=dt.typeforce.maybe});var cx=le(zl=>{"use strict";d();h();Object.defineProperty(zl,"__esModule",{value:!0});zl.testEcc=void 0;var ve=o(e=>Buffer.from(e,"hex"),"h");function Dk(e){mt(e.isPoint(ve("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),mt(!e.isPoint(ve("030000000000000000000000000000000000000000000000000000000000000005"))),mt(e.isPrivate(ve("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),mt(e.isPrivate(ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),mt(!e.isPrivate(ve("0000000000000000000000000000000000000000000000000000000000000000"))),mt(!e.isPrivate(ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"))),mt(!e.isPrivate(ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364142"))),mt(Buffer.from(e.privateAdd(ve("0000000000000000000000000000000000000000000000000000000000000001"),ve("0000000000000000000000000000000000000000000000000000000000000000"))).equals(ve("0000000000000000000000000000000000000000000000000000000000000001"))),mt(e.privateAdd(ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"),ve("0000000000000000000000000000000000000000000000000000000000000003"))===null),mt(Buffer.from(e.privateAdd(ve("e211078564db65c3ce7704f08262b1f38f1ef412ad15b5ac2d76657a63b2c500"),ve("b51fbb69051255d1becbd683de5848242a89c229348dd72896a87ada94ae8665"))).equals(ve("9730c2ee69edbb958d42db7460bafa18fef9d955325aec99044c81c8282b0a24"))),mt(Buffer.from(e.privateNegate(ve("0000000000000000000000000000000000000000000000000000000000000001"))).equals(ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),mt(Buffer.from(e.privateNegate(ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"))).equals(ve("0000000000000000000000000000000000000000000000000000000000000003"))),mt(Buffer.from(e.privateNegate(ve("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(ve("4eede1bf775995d70a494f0a7bb6bc11e0b8cccd41cce8009ab1132c8b0a3792"))),mt(Buffer.from(e.pointCompress(ve("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!0)).equals(ve("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),mt(Buffer.from(e.pointCompress(ve("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!1)).equals(ve("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),mt(Buffer.from(e.pointCompress(ve("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!0)).equals(ve("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),mt(Buffer.from(e.pointCompress(ve("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!1)).equals(ve("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),mt(Buffer.from(e.pointFromScalar(ve("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(ve("02b07ba9dca9523b7ef4bd97703d43d20399eb698e194704791a25ce77a400df99"))),mt(e.xOnlyPointAddTweak(ve("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))===null);let t=e.xOnlyPointAddTweak(ve("1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b"),ve("a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac"));mt(Buffer.from(t.xOnlyPubkey).equals(ve("e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"))&&t.parity===1),t=e.xOnlyPointAddTweak(ve("2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991"),ve("823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47")),mt(Buffer.from(t.xOnlyPubkey).equals(ve("9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"))&&t.parity===0),mt(Buffer.from(e.sign(ve("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))).equals(ve("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),mt(e.verify(ve("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),ve("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),ve("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),e.signSchnorr&&mt(Buffer.from(e.signSchnorr(ve("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),ve("c90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b14e5c9"),ve("c87aa53824b4d7ae2eb035a2b5bbbccc080e76cdc6d1692c4b0b62d798e6d906"))).equals(ve("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7"))),e.verifySchnorr&&mt(e.verifySchnorr(ve("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),ve("dd308afec5777e13121fa72b9cc1b7cc0139715309b086c960e18fd969774eb8"),ve("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")))}o(Dk,"testEcc");zl.testEcc=Dk;function mt(e){if(!e)throw new Error("ecc library invalid")}o(mt,"assert")});var lx=le($s=>{"use strict";d();h();Object.defineProperty($s,"__esModule",{value:!0});$s.ECPairFactory=$s.networks=void 0;var y0=sx();$s.networks=y0;var rr=ax(),Uk=py(),ux=mM(),Lk=cx(),g0=rr.typeforce.maybe(rr.typeforce.compile({compressed:rr.maybe(rr.Boolean),network:rr.maybe(rr.Network)})),Vk=o(e=>e.length===32?e:e.slice(1,33),"toXOnly");function Fk(e){(0,Lk.testEcc)(e);function t(f){return e.isPoint(f)}o(t,"isPoint");function r(f,p){if(rr.typeforce(rr.Buffer256bit,f),!e.isPrivate(f))throw new TypeError("Private key not in range [1, n)");return rr.typeforce(g0,p),new c(f,void 0,p)}o(r,"fromPrivateKey");function n(f,p){return rr.typeforce(e.isPoint,f),rr.typeforce(g0,p),new c(void 0,f,p)}o(n,"fromPublicKey");function i(f,p){let v=ux.decode(f),A=v.version;if(rr.Array(p)){if(p=p.filter(T=>A===T.wif).pop(),!p)throw new Error("Unknown network version")}else if(p=p||y0.bitcoin,A!==p.wif)throw new Error("Invalid network version");return r(v.privateKey,{compressed:v.compressed,network:p})}o(i,"fromWIF");function s(f){rr.typeforce(g0,f),f===void 0&&(f={});let p=f.rng||Uk,v;do v=p(32),rr.typeforce(rr.Buffer256bit,v);while(!e.isPrivate(v));return r(v,f)}o(s,"makeRandom");class c{static{o(this,"ECPair")}__D;__Q;compressed;network;lowR;constructor(p,v,A){this.__D=p,this.__Q=v,this.lowR=!1,A===void 0&&(A={}),this.compressed=A.compressed===void 0?!0:A.compressed,this.network=A.network||y0.bitcoin,v!==void 0&&(this.__Q=Buffer.from(e.pointCompress(v,this.compressed)))}get privateKey(){return this.__D}get publicKey(){if(!this.__Q){let p=e.pointFromScalar(this.__D,this.compressed);this.__Q=Buffer.from(p)}return this.__Q}toWIF(){if(!this.__D)throw new Error("Missing private key");return ux.encode(this.network.wif,this.__D,this.compressed)}tweak(p){return this.privateKey?this.tweakFromPrivateKey(p):this.tweakFromPublicKey(p)}sign(p,v){if(!this.__D)throw new Error("Missing private key");if(v===void 0&&(v=this.lowR),v===!1)return Buffer.from(e.sign(p,this.__D));{let A=e.sign(p,this.__D),T=Buffer.alloc(32,0),I=0;for(;A[0]>127;)I++,T.writeUIntLE(I,0,6),A=e.sign(p,this.__D,T);return Buffer.from(A)}}signSchnorr(p){if(!this.privateKey)throw new Error("Missing private key");if(!e.signSchnorr)throw new Error("signSchnorr not supported by ecc library");return Buffer.from(e.signSchnorr(p,this.privateKey))}verify(p,v){return e.verify(p,this.publicKey,v)}verifySchnorr(p,v){if(!e.verifySchnorr)throw new Error("verifySchnorr not supported by ecc library");return e.verifySchnorr(p,this.publicKey.subarray(1,33),v)}tweakFromPublicKey(p){let v=Vk(this.publicKey),A=e.xOnlyPointAddTweak(v,p);if(!A||A.xOnlyPubkey===null)throw new Error("Cannot tweak public key!");let T=Buffer.from([A.parity===0?2:3]);return n(Buffer.concat([T,A.xOnlyPubkey]),{network:this.network,compressed:this.compressed})}tweakFromPrivateKey(p){let A=this.publicKey[0]===3||this.publicKey[0]===4&&(this.publicKey[64]&1)===1?e.privateNegate(this.privateKey):this.privateKey,T=e.privateAdd(A,p);if(!T)throw new Error("Invalid tweaked private key!");return r(Buffer.from(T),{network:this.network,compressed:this.compressed})}}return{isPoint:t,fromPrivateKey:r,fromPublicKey:n,fromWIF:i,makeRandom:s}}o(Fk,"ECPairFactory");$s.ECPairFactory=Fk});var fx=le(uo=>{"use strict";d();h();Object.defineProperty(uo,"__esModule",{value:!0});uo.networks=uo.ECPairFactory=uo.default=void 0;var v0=lx();Object.defineProperty(uo,"default",{enumerable:!0,get:o(function(){return v0.ECPairFactory},"get")});Object.defineProperty(uo,"ECPairFactory",{enumerable:!0,get:o(function(){return v0.ECPairFactory},"get")});Object.defineProperty(uo,"networks",{enumerable:!0,get:o(function(){return v0.networks},"get")})});var Zx=le((vne,Gx)=>{d();h();var ut={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function Fr(e,t){if(!e)throw new Error(t)}o(Fr,"assert");function at(e,t,r){if(Fr(t instanceof Uint8Array,`Expected ${e} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){let n=r.join(", "),i=`Expected ${e} to be an Uint8Array with length [${n}]`;Fr(r.includes(t.length),i)}else{let n=`Expected ${e} to be an Uint8Array with length ${r}`;Fr(t.length===r,n)}}o(at,"isUint8Array");function Jo(e){Fr(ea(e)==="Boolean","Expected compressed to be a Boolean")}o(Jo,"isCompressed");function wn(e=r=>new Uint8Array(r),t){return typeof e=="function"&&(e=e(t)),at("output",e,t),e}o(wn,"getAssertedOutput");function ea(e){return Object.prototype.toString.call(e).slice(8,-1)}o(ea,"toTypeString");Gx.exports=e=>({contextRandomize(t){switch(Fr(t===null||t instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),t!==null&&at("seed",t,32),e.contextRandomize(t)){case 1:throw new Error(ut.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(t){return at("private key",t,32),e.privateKeyVerify(t)===0},privateKeyNegate(t){switch(at("private key",t,32),e.privateKeyNegate(t)){case 0:return t;case 1:throw new Error(ut.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(t,r){switch(at("private key",t,32),at("tweak",r,32),e.privateKeyTweakAdd(t,r)){case 0:return t;case 1:throw new Error(ut.TWEAK_ADD)}},privateKeyTweakMul(t,r){switch(at("private key",t,32),at("tweak",r,32),e.privateKeyTweakMul(t,r)){case 0:return t;case 1:throw new Error(ut.TWEAK_MUL)}},publicKeyVerify(t){return at("public key",t,[33,65]),e.publicKeyVerify(t)===0},publicKeyCreate(t,r=!0,n){switch(at("private key",t,32),Jo(r),n=wn(n,r?33:65),e.publicKeyCreate(n,t)){case 0:return n;case 1:throw new Error(ut.SECKEY_INVALID);case 2:throw new Error(ut.PUBKEY_SERIALIZE)}},publicKeyConvert(t,r=!0,n){switch(at("public key",t,[33,65]),Jo(r),n=wn(n,r?33:65),e.publicKeyConvert(n,t)){case 0:return n;case 1:throw new Error(ut.PUBKEY_PARSE);case 2:throw new Error(ut.PUBKEY_SERIALIZE)}},publicKeyNegate(t,r=!0,n){switch(at("public key",t,[33,65]),Jo(r),n=wn(n,r?33:65),e.publicKeyNegate(n,t)){case 0:return n;case 1:throw new Error(ut.PUBKEY_PARSE);case 2:throw new Error(ut.IMPOSSIBLE_CASE);case 3:throw new Error(ut.PUBKEY_SERIALIZE)}},publicKeyCombine(t,r=!0,n){Fr(Array.isArray(t),"Expected public keys to be an Array"),Fr(t.length>0,"Expected public keys array will have more than zero items");for(let i of t)at("public key",i,[33,65]);switch(Jo(r),n=wn(n,r?33:65),e.publicKeyCombine(n,t)){case 0:return n;case 1:throw new Error(ut.PUBKEY_PARSE);case 2:throw new Error(ut.PUBKEY_COMBINE);case 3:throw new Error(ut.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(t,r,n=!0,i){switch(at("public key",t,[33,65]),at("tweak",r,32),Jo(n),i=wn(i,n?33:65),e.publicKeyTweakAdd(i,t,r)){case 0:return i;case 1:throw new Error(ut.PUBKEY_PARSE);case 2:throw new Error(ut.TWEAK_ADD)}},publicKeyTweakMul(t,r,n=!0,i){switch(at("public key",t,[33,65]),at("tweak",r,32),Jo(n),i=wn(i,n?33:65),e.publicKeyTweakMul(i,t,r)){case 0:return i;case 1:throw new Error(ut.PUBKEY_PARSE);case 2:throw new Error(ut.TWEAK_MUL)}},signatureNormalize(t){switch(at("signature",t,64),e.signatureNormalize(t)){case 0:return t;case 1:throw new Error(ut.SIG_PARSE)}},signatureExport(t,r){at("signature",t,64),r=wn(r,72);let n={output:r,outputlen:72};switch(e.signatureExport(n,t)){case 0:return r.slice(0,n.outputlen);case 1:throw new Error(ut.SIG_PARSE);case 2:throw new Error(ut.IMPOSSIBLE_CASE)}},signatureImport(t,r){switch(at("signature",t),r=wn(r,64),e.signatureImport(r,t)){case 0:return r;case 1:throw new Error(ut.SIG_PARSE);case 2:throw new Error(ut.IMPOSSIBLE_CASE)}},ecdsaSign(t,r,n={},i){at("message",t,32),at("private key",r,32),Fr(ea(n)==="Object","Expected options to be an Object"),n.data!==void 0&&at("options.data",n.data),n.noncefn!==void 0&&Fr(ea(n.noncefn)==="Function","Expected options.noncefn to be a Function"),i=wn(i,64);let s={signature:i,recid:null};switch(e.ecdsaSign(s,t,r,n.data,n.noncefn)){case 0:return s;case 1:throw new Error(ut.SIGN);case 2:throw new Error(ut.IMPOSSIBLE_CASE)}},ecdsaVerify(t,r,n){switch(at("signature",t,64),at("message",r,32),at("public key",n,[33,65]),e.ecdsaVerify(t,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(ut.SIG_PARSE);case 2:throw new Error(ut.PUBKEY_PARSE)}},ecdsaRecover(t,r,n,i=!0,s){switch(at("signature",t,64),Fr(ea(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),at("message",n,32),Jo(i),s=wn(s,i?33:65),e.ecdsaRecover(s,t,r,n)){case 0:return s;case 1:throw new Error(ut.SIG_PARSE);case 2:throw new Error(ut.RECOVER);case 3:throw new Error(ut.IMPOSSIBLE_CASE)}},ecdh(t,r,n={},i){switch(at("public key",t,[33,65]),at("private key",r,32),Fr(ea(n)==="Object","Expected options to be an Object"),n.data!==void 0&&at("options.data",n.data),n.hashfn!==void 0?(Fr(ea(n.hashfn)==="Function","Expected options.hashfn to be a Function"),n.xbuf!==void 0&&at("options.xbuf",n.xbuf,32),n.ybuf!==void 0&&at("options.ybuf",n.ybuf,32),at("output",i)):i=wn(i,32),e.ecdh(i,t,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return i;case 1:throw new Error(ut.PUBKEY_PARSE);case 2:throw new Error(ut.ECDH)}}})});var Yx=le((Sne,Jx)=>{d();h();var u3=gy().ec,Fn=new u3("secp256k1"),ot=Fn.curve,ht=ot.n.constructor;function l3(e,t){let r=new ht(t);if(r.cmp(ot.p)>=0)return null;r=r.toRed(ot.red);let n=r.redSqr().redIMul(r).redIAdd(ot.b).redSqrt();return e===3!==n.isOdd()&&(n=n.redNeg()),Fn.keyPair({pub:{x:r,y:n}})}o(l3,"loadCompressedPublicKey");function f3(e,t,r){let n=new ht(t),i=new ht(r);if(n.cmp(ot.p)>=0||i.cmp(ot.p)>=0||(n=n.toRed(ot.red),i=i.toRed(ot.red),(e===6||e===7)&&i.isOdd()!==(e===7)))return null;let s=n.redSqr().redIMul(n);return i.redSqr().redISub(s.redIAdd(ot.b)).isZero()?Fn.keyPair({pub:{x:n,y:i}}):null}o(f3,"loadUncompressedPublicKey");function fo(e){let t=e[0];switch(t){case 2:case 3:return e.length!==33?null:l3(t,e.subarray(1,33));case 4:case 6:case 7:return e.length!==65?null:f3(t,e.subarray(1,33),e.subarray(33,65));default:return null}}o(fo,"loadPublicKey");function Yo(e,t){let r=t.encode(null,e.length===33);for(let n=0;n<e.length;++n)e[n]=r[n]}o(Yo,"savePublicKey");Jx.exports={contextRandomize(){return 0},privateKeyVerify(e){let t=new ht(e);return t.cmp(ot.n)<0&&!t.isZero()?0:1},privateKeyNegate(e){let t=new ht(e),r=ot.n.sub(t).umod(ot.n).toArrayLike(Uint8Array,"be",32);return e.set(r),0},privateKeyTweakAdd(e,t){let r=new ht(t);if(r.cmp(ot.n)>=0||(r.iadd(new ht(e)),r.cmp(ot.n)>=0&&r.isub(ot.n),r.isZero()))return 1;let n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},privateKeyTweakMul(e,t){let r=new ht(t);if(r.cmp(ot.n)>=0||r.isZero())return 1;r.imul(new ht(e)),r.cmp(ot.n)>=0&&(r=r.umod(ot.n));let n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},publicKeyVerify(e){return fo(e)===null?1:0},publicKeyCreate(e,t){let r=new ht(t);if(r.cmp(ot.n)>=0||r.isZero())return 1;let n=Fn.keyFromPrivate(t).getPublic();return Yo(e,n),0},publicKeyConvert(e,t){let r=fo(t);if(r===null)return 1;let n=r.getPublic();return Yo(e,n),0},publicKeyNegate(e,t){let r=fo(t);if(r===null)return 1;let n=r.getPublic();return n.y=n.y.redNeg(),Yo(e,n),0},publicKeyCombine(e,t){let r=new Array(t.length);for(let i=0;i<t.length;++i)if(r[i]=fo(t[i]),r[i]===null)return 1;let n=r[0].getPublic();for(let i=1;i<r.length;++i)n=n.add(r[i].pub);return n.isInfinity()?2:(Yo(e,n),0)},publicKeyTweakAdd(e,t,r){let n=fo(t);if(n===null)return 1;if(r=new ht(r),r.cmp(ot.n)>=0)return 2;let i=n.getPublic().add(ot.g.mul(r));return i.isInfinity()?2:(Yo(e,i),0)},publicKeyTweakMul(e,t,r){let n=fo(t);if(n===null)return 1;if(r=new ht(r),r.cmp(ot.n)>=0||r.isZero())return 2;let i=n.getPublic().mul(r);return Yo(e,i),0},signatureNormalize(e){let t=new ht(e.subarray(0,32)),r=new ht(e.subarray(32,64));return t.cmp(ot.n)>=0||r.cmp(ot.n)>=0?1:(r.cmp(Fn.nh)===1&&e.set(ot.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(e,t){let r=t.subarray(0,32),n=t.subarray(32,64);if(new ht(r).cmp(ot.n)>=0||new ht(n).cmp(ot.n)>=0)return 1;let{output:i}=e,s=i.subarray(4,37);s[0]=0,s.set(r,1);let c=33,f=0;for(;c>1&&s[f]===0&&!(s[f+1]&128);--c,++f);if(s=s.subarray(f),s[0]&128||c>1&&s[0]===0&&!(s[1]&128))return 1;let p=i.subarray(39,72);p[0]=0,p.set(n,1);let v=33,A=0;for(;v>1&&p[A]===0&&!(p[A+1]&128);--v,++A);return p=p.subarray(A),p[0]&128||v>1&&p[0]===0&&!(p[1]&128)?1:(e.outputlen=6+c+v,i[0]=48,i[1]=e.outputlen-2,i[2]=2,i[3]=s.length,i.set(s,4),i[4+c]=2,i[5+c]=p.length,i.set(p,6+c),0)},signatureImport(e,t){if(t.length<8||t.length>72||t[0]!==48||t[1]!==t.length-2||t[2]!==2)return 1;let r=t[3];if(r===0||5+r>=t.length||t[4+r]!==2)return 1;let n=t[5+r];if(n===0||6+r+n!==t.length||t[4]&128||r>1&&t[4]===0&&!(t[5]&128)||t[r+6]&128||n>1&&t[r+6]===0&&!(t[r+7]&128))return 1;let i=t.subarray(4,4+r);if(i.length===33&&i[0]===0&&(i=i.subarray(1)),i.length>32)return 1;let s=t.subarray(6+r);if(s.length===33&&s[0]===0&&(s=s.slice(1)),s.length>32)throw new Error("S length is too long");let c=new ht(i);c.cmp(ot.n)>=0&&(c=new ht(0));let f=new ht(t.subarray(6+r));return f.cmp(ot.n)>=0&&(f=new ht(0)),e.set(c.toArrayLike(Uint8Array,"be",32),0),e.set(f.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(e,t,r,n,i){if(i){let f=i;i=o(p=>{let v=f(t,r,null,n,p);if(!(v instanceof Uint8Array&&v.length===32))throw new Error("This is the way");return new ht(v)},"noncefn")}let s=new ht(r);if(s.cmp(ot.n)>=0||s.isZero())return 1;let c;try{c=Fn.sign(t,r,{canonical:!0,k:i,pers:n})}catch{return 1}return e.signature.set(c.r.toArrayLike(Uint8Array,"be",32),0),e.signature.set(c.s.toArrayLike(Uint8Array,"be",32),32),e.recid=c.recoveryParam,0},ecdsaVerify(e,t,r){let n={r:e.subarray(0,32),s:e.subarray(32,64)},i=new ht(n.r),s=new ht(n.s);if(i.cmp(ot.n)>=0||s.cmp(ot.n)>=0)return 1;if(s.cmp(Fn.nh)===1||i.isZero()||s.isZero())return 3;let c=fo(r);if(c===null)return 2;let f=c.getPublic();return Fn.verify(t,n,f)?0:3},ecdsaRecover(e,t,r,n){let i={r:t.slice(0,32),s:t.slice(32,64)},s=new ht(i.r),c=new ht(i.s);if(s.cmp(ot.n)>=0||c.cmp(ot.n)>=0)return 1;if(s.isZero()||c.isZero())return 2;let f;try{f=Fn.recoverPubKey(n,i,r)}catch{return 2}return Yo(e,f),0},ecdh(e,t,r,n,i,s,c){let f=fo(t);if(f===null)return 1;let p=new ht(r);if(p.cmp(ot.n)>=0||p.isZero())return 2;let v=f.getPublic().mul(p);if(i===void 0){let A=v.encode(null,!0),T=Fn.hash().update(A).digest();for(let I=0;I<32;++I)e[I]=T[I]}else{s||(s=new Uint8Array(32));let A=v.getX().toArray("be",32);for(let B=0;B<32;++B)s[B]=A[B];c||(c=new Uint8Array(32));let T=v.getY().toArray("be",32);for(let B=0;B<32;++B)c[B]=T[B];let I=i(s,c,n);if(!(I instanceof Uint8Array&&I.length===e.length))return 2;e.set(I)}return 0}}});var N0=le((Tne,Qx)=>{d();h();Qx.exports=Zx()(Yx())});var e1=le(Yl=>{"use strict";d();h();Object.defineProperty(Yl,"__esModule",{value:!0});var Xx=py();function d3(e){return new Promise(function(t,r){Xx(e,function(n,i){if(n){r(n);return}t(i)})})}o(d3,"getRandomBytes");Yl.getRandomBytes=d3;function h3(e){return Xx(e)}o(h3,"getRandomBytesSync");Yl.getRandomBytesSync=h3});var i1=le(zn=>{"use strict";d();h();var p3=zn&&zn.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return o(i,"adopt"),new(r||(r=Promise))(function(s,c){function f(A){try{v(n.next(A))}catch(T){c(T)}}o(f,"fulfilled");function p(A){try{v(n.throw(A))}catch(T){c(T)}}o(p,"rejected");function v(A){A.done?s(A.value):i(A.value).then(f,p)}o(v,"step"),v((n=n.apply(e,t||[])).next())})},m3=zn&&zn.__generator||function(e,t){var r={label:0,sent:o(function(){if(s[0]&1)throw s[1];return s[1]},"sent"),trys:[],ops:[]},n,i,s,c;return c={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(v){return function(A){return p([v,A])}}function p(v){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=v[0]&2?i.return:v[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,v[1])).done)return s;switch(i=0,s&&(v=[v[0]&2,s.value]),v[0]){case 0:case 1:s=v;break;case 4:return r.label++,{value:v[1],done:!1};case 5:r.label++,i=v[1],v=[0];continue;case 7:v=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(v[0]===6||v[0]===2)){r=0;continue}if(v[0]===3&&(!s||v[1]>s[0]&&v[1]<s[3])){r.label=v[1];break}if(v[0]===6&&r.label<s[1]){r.label=s[1],s=v;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(v);break}s[2]&&r.ops.pop(),r.trys.pop();continue}v=t.call(e,r)}catch(A){v=[6,A],i=0}finally{n=s=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}};function g3(e){for(var t in e)zn.hasOwnProperty(t)||(zn[t]=e[t])}o(g3,"__export");Object.defineProperty(zn,"__esModule",{value:!0});var t1=N0(),r1=e1(),n1=32;function y3(){return p3(this,void 0,void 0,function(){var e;return m3(this,function(t){switch(t.label){case 0:return[4,r1.getRandomBytes(n1)];case 1:return e=t.sent(),t1.privateKeyVerify(e)?[2,e]:[3,0];case 2:return[2]}})})}o(y3,"createPrivateKey");zn.createPrivateKey=y3;function v3(){for(;;){var e=r1.getRandomBytesSync(n1);if(t1.privateKeyVerify(e))return e}}o(v3,"createPrivateKeySync");zn.createPrivateKeySync=v3;g3(N0())});var Qo=le((o1,D0)=>{d();h();(function(e,t){"use strict";function r(S,a){if(!S)throw new Error(a||"Assertion failed")}o(r,"assert");function n(S,a){S.super_=a;var l=o(function(){},"TempCtor");l.prototype=a.prototype,S.prototype=new l,S.prototype.constructor=S}o(n,"inherits");function i(S,a,l){if(i.isBN(S))return S;this.negative=0,this.words=null,this.length=0,this.red=null,S!==null&&((a==="le"||a==="be")&&(l=a,a=10),this._init(S||0,a||10,l||"be"))}o(i,"BN"),typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var s;try{typeof self<"u"&&typeof self.Buffer<"u"?s=self.Buffer:s=sy().Buffer}catch{}i.isBN=o(function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},"isBN"),i.max=o(function(a,l){return a.cmp(l)>0?a:l},"max"),i.min=o(function(a,l){return a.cmp(l)<0?a:l},"min"),i.prototype._init=o(function(a,l,g){if(typeof a=="number")return this._initNumber(a,l,g);if(typeof a=="object")return this._initArray(a,l,g);l==="hex"&&(l=16),r(l===(l|0)&&l>=2&&l<=36),a=a.toString().replace(/\s+/g,"");var y=0;a[0]==="-"&&(y++,this.negative=1),y<a.length&&(l===16?this._parseHex(a,y,g):(this._parseBase(a,l,y),g==="le"&&this._initArray(this.toArray(),l,g)))},"init"),i.prototype._initNumber=o(function(a,l,g){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(r(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),l,g)},"_initNumber"),i.prototype._initArray=o(function(a,l,g){if(r(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var b,M,_=0;if(g==="be")for(y=a.length-1,b=0;y>=0;y-=3)M=a[y]|a[y-1]<<8|a[y-2]<<16,this.words[b]|=M<<_&67108863,this.words[b+1]=M>>>26-_&67108863,_+=24,_>=26&&(_-=26,b++);else if(g==="le")for(y=0,b=0;y<a.length;y+=3)M=a[y]|a[y+1]<<8|a[y+2]<<16,this.words[b]|=M<<_&67108863,this.words[b+1]=M>>>26-_&67108863,_+=24,_>=26&&(_-=26,b++);return this.strip()},"_initArray");function c(S,a){var l=S.charCodeAt(a);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}o(c,"parseHex4Bits");function f(S,a,l){var g=c(S,l);return l-1>=a&&(g|=c(S,l-1)<<4),g}o(f,"parseHexByte"),i.prototype._parseHex=o(function(a,l,g){this.length=Math.ceil((a.length-l)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var b=0,M=0,_;if(g==="be")for(y=a.length-1;y>=l;y-=2)_=f(a,l,y)<<b,this.words[M]|=_&67108863,b>=18?(b-=18,M+=1,this.words[M]|=_>>>26):b+=8;else{var w=a.length-l;for(y=w%2===0?l+1:l;y<a.length;y+=2)_=f(a,l,y)<<b,this.words[M]|=_&67108863,b>=18?(b-=18,M+=1,this.words[M]|=_>>>26):b+=8}this.strip()},"_parseHex");function p(S,a,l,g){for(var y=0,b=Math.min(S.length,l),M=a;M<b;M++){var _=S.charCodeAt(M)-48;y*=g,_>=49?y+=_-49+10:_>=17?y+=_-17+10:y+=_}return y}o(p,"parseBase"),i.prototype._parseBase=o(function(a,l,g){this.words=[0],this.length=1;for(var y=0,b=1;b<=67108863;b*=l)y++;y--,b=b/l|0;for(var M=a.length-g,_=M%y,w=Math.min(M,M-_)+g,u=0,x=g;x<w;x+=y)u=p(a,x,x+y,l),this.imuln(b),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(_!==0){var F=1;for(u=p(a,x,a.length,l),x=0;x<_;x++)F*=l;this.imuln(F),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},"_parseBase"),i.prototype.copy=o(function(a){a.words=new Array(this.length);for(var l=0;l<this.length;l++)a.words[l]=this.words[l];a.length=this.length,a.negative=this.negative,a.red=this.red},"copy"),i.prototype.clone=o(function(){var a=new i(null);return this.copy(a),a},"clone"),i.prototype._expand=o(function(a){for(;this.length<a;)this.words[this.length++]=0;return this},"_expand"),i.prototype.strip=o(function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},"strip"),i.prototype._normSign=o(function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},"_normSign"),i.prototype.inspect=o(function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"},"inspect");var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],T=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=o(function(a,l){a=a||10,l=l|0||1;var g;if(a===16||a==="hex"){g="";for(var y=0,b=0,M=0;M<this.length;M++){var _=this.words[M],w=((_<<y|b)&16777215).toString(16);b=_>>>24-y&16777215,b!==0||M!==this.length-1?g=v[6-w.length]+w+g:g=w+g,y+=2,y>=26&&(y-=26,M--)}for(b!==0&&(g=b.toString(16)+g);g.length%l!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(a===(a|0)&&a>=2&&a<=36){var u=A[a],x=T[a];g="";var F=this.clone();for(F.negative=0;!F.isZero();){var z=F.modn(x).toString(a);F=F.idivn(x),F.isZero()?g=z+g:g=v[u-z.length]+z+g}for(this.isZero()&&(g="0"+g);g.length%l!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}r(!1,"Base should be between 2 and 36")},"toString"),i.prototype.toNumber=o(function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},"toNumber"),i.prototype.toJSON=o(function(){return this.toString(16)},"toJSON"),i.prototype.toBuffer=o(function(a,l){return r(typeof s<"u"),this.toArrayLike(s,a,l)},"toBuffer"),i.prototype.toArray=o(function(a,l){return this.toArrayLike(Array,a,l)},"toArray"),i.prototype.toArrayLike=o(function(a,l,g){var y=this.byteLength(),b=g||Math.max(1,y);r(y<=b,"byte array longer than desired length"),r(b>0,"Requested array length <= 0"),this.strip();var M=l==="le",_=new a(b),w,u,x=this.clone();if(M){for(u=0;!x.isZero();u++)w=x.andln(255),x.iushrn(8),_[u]=w;for(;u<b;u++)_[u]=0}else{for(u=0;u<b-y;u++)_[u]=0;for(u=0;!x.isZero();u++)w=x.andln(255),x.iushrn(8),_[b-u-1]=w}return _},"toArrayLike"),Math.clz32?i.prototype._countBits=o(function(a){return 32-Math.clz32(a)},"_countBits"):i.prototype._countBits=o(function(a){var l=a,g=0;return l>=4096&&(g+=13,l>>>=13),l>=64&&(g+=7,l>>>=7),l>=8&&(g+=4,l>>>=4),l>=2&&(g+=2,l>>>=2),g+l},"_countBits"),i.prototype._zeroBits=o(function(a){if(a===0)return 26;var l=a,g=0;return l&8191||(g+=13,l>>>=13),l&127||(g+=7,l>>>=7),l&15||(g+=4,l>>>=4),l&3||(g+=2,l>>>=2),l&1||g++,g},"_zeroBits"),i.prototype.bitLength=o(function(){var a=this.words[this.length-1],l=this._countBits(a);return(this.length-1)*26+l},"bitLength");function I(S){for(var a=new Array(S.bitLength()),l=0;l<a.length;l++){var g=l/26|0,y=l%26;a[l]=(S.words[g]&1<<y)>>>y}return a}o(I,"toBitArray"),i.prototype.zeroBits=o(function(){if(this.isZero())return 0;for(var a=0,l=0;l<this.length;l++){var g=this._zeroBits(this.words[l]);if(a+=g,g!==26)break}return a},"zeroBits"),i.prototype.byteLength=o(function(){return Math.ceil(this.bitLength()/8)},"byteLength"),i.prototype.toTwos=o(function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},"toTwos"),i.prototype.fromTwos=o(function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},"fromTwos"),i.prototype.isNeg=o(function(){return this.negative!==0},"isNeg"),i.prototype.neg=o(function(){return this.clone().ineg()},"neg"),i.prototype.ineg=o(function(){return this.isZero()||(this.negative^=1),this},"ineg"),i.prototype.iuor=o(function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var l=0;l<a.length;l++)this.words[l]=this.words[l]|a.words[l];return this.strip()},"iuor"),i.prototype.ior=o(function(a){return r((this.negative|a.negative)===0),this.iuor(a)},"ior"),i.prototype.or=o(function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},"or"),i.prototype.uor=o(function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},"uor"),i.prototype.iuand=o(function(a){var l;this.length>a.length?l=a:l=this;for(var g=0;g<l.length;g++)this.words[g]=this.words[g]&a.words[g];return this.length=l.length,this.strip()},"iuand"),i.prototype.iand=o(function(a){return r((this.negative|a.negative)===0),this.iuand(a)},"iand"),i.prototype.and=o(function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},"and"),i.prototype.uand=o(function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},"uand"),i.prototype.iuxor=o(function(a){var l,g;this.length>a.length?(l=this,g=a):(l=a,g=this);for(var y=0;y<g.length;y++)this.words[y]=l.words[y]^g.words[y];if(this!==l)for(;y<l.length;y++)this.words[y]=l.words[y];return this.length=l.length,this.strip()},"iuxor"),i.prototype.ixor=o(function(a){return r((this.negative|a.negative)===0),this.iuxor(a)},"ixor"),i.prototype.xor=o(function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},"xor"),i.prototype.uxor=o(function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},"uxor"),i.prototype.inotn=o(function(a){r(typeof a=="number"&&a>=0);var l=Math.ceil(a/26)|0,g=a%26;this._expand(l),g>0&&l--;for(var y=0;y<l;y++)this.words[y]=~this.words[y]&67108863;return g>0&&(this.words[y]=~this.words[y]&67108863>>26-g),this.strip()},"inotn"),i.prototype.notn=o(function(a){return this.clone().inotn(a)},"notn"),i.prototype.setn=o(function(a,l){r(typeof a=="number"&&a>=0);var g=a/26|0,y=a%26;return this._expand(g+1),l?this.words[g]=this.words[g]|1<<y:this.words[g]=this.words[g]&~(1<<y),this.strip()},"setn"),i.prototype.iadd=o(function(a){var l;if(this.negative!==0&&a.negative===0)return this.negative=0,l=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,l=this.isub(a),a.negative=1,l._normSign();var g,y;this.length>a.length?(g=this,y=a):(g=a,y=this);for(var b=0,M=0;M<y.length;M++)l=(g.words[M]|0)+(y.words[M]|0)+b,this.words[M]=l&67108863,b=l>>>26;for(;b!==0&&M<g.length;M++)l=(g.words[M]|0)+b,this.words[M]=l&67108863,b=l>>>26;if(this.length=g.length,b!==0)this.words[this.length]=b,this.length++;else if(g!==this)for(;M<g.length;M++)this.words[M]=g.words[M];return this},"iadd"),i.prototype.add=o(function(a){var l;return a.negative!==0&&this.negative===0?(a.negative=0,l=this.sub(a),a.negative^=1,l):a.negative===0&&this.negative!==0?(this.negative=0,l=a.sub(this),this.negative=1,l):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},"add"),i.prototype.isub=o(function(a){if(a.negative!==0){a.negative=0;var l=this.iadd(a);return a.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var g=this.cmp(a);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,b;g>0?(y=this,b=a):(y=a,b=this);for(var M=0,_=0;_<b.length;_++)l=(y.words[_]|0)-(b.words[_]|0)+M,M=l>>26,this.words[_]=l&67108863;for(;M!==0&&_<y.length;_++)l=(y.words[_]|0)+M,M=l>>26,this.words[_]=l&67108863;if(M===0&&_<y.length&&y!==this)for(;_<y.length;_++)this.words[_]=y.words[_];return this.length=Math.max(this.length,_),y!==this&&(this.negative=1),this.strip()},"isub"),i.prototype.sub=o(function(a){return this.clone().isub(a)},"sub");function P(S,a,l){l.negative=a.negative^S.negative;var g=S.length+a.length|0;l.length=g,g=g-1|0;var y=S.words[0]|0,b=a.words[0]|0,M=y*b,_=M&67108863,w=M/67108864|0;l.words[0]=_;for(var u=1;u<g;u++){for(var x=w>>>26,F=w&67108863,z=Math.min(u,a.length-1),q=Math.max(0,u-S.length+1);q<=z;q++){var Q=u-q|0;y=S.words[Q]|0,b=a.words[q]|0,M=y*b+F,x+=M/67108864|0,F=M&67108863}l.words[u]=F|0,w=x|0}return w!==0?l.words[u]=w|0:l.length--,l.strip()}o(P,"smallMulTo");var B=o(function(a,l,g){var y=a.words,b=l.words,M=g.words,_=0,w,u,x,F=y[0]|0,z=F&8191,q=F>>>13,Q=y[1]|0,ce=Q&8191,de=Q>>>13,ft=y[2]|0,pe=ft&8191,R=ft>>>13,V=y[3]|0,U=V&8191,G=V>>>13,se=y[4]|0,j=se&8191,Y=se>>>13,tt=y[5]|0,ge=tt&8191,we=tt>>>13,Cr=y[6]|0,Te=Cr&8191,Ae=Cr>>>13,kn=y[7]|0,Me=kn&8191,Je=kn>>>13,ji=y[8]|0,Ye=ji&8191,Qe=ji>>>13,si=y[9]|0,Ie=si&8191,_e=si>>>13,ai=b[0]|0,ke=ai&8191,Pe=ai>>>13,ci=b[1]|0,Oe=ci&8191,Ce=ci>>>13,ui=b[2]|0,Be=ui&8191,Ke=ui>>>13,li=b[3]|0,Re=li&8191,Ne=li>>>13,fi=b[4]|0,De=fi&8191,Ue=fi>>>13,di=b[5]|0,Le=di&8191,Ve=di>>>13,hi=b[6]|0,Fe=hi&8191,ze=hi>>>13,pi=b[7]|0,je=pi&8191,qe=pi>>>13,mi=b[8]|0,We=mi&8191,He=mi>>>13,gi=b[9]|0,$e=gi&8191,Ge=gi>>>13;g.negative=a.negative^l.negative,g.length=19,w=Math.imul(z,ke),u=Math.imul(z,Pe),u=u+Math.imul(q,ke)|0,x=Math.imul(q,Pe);var Hr=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,w=Math.imul(ce,ke),u=Math.imul(ce,Pe),u=u+Math.imul(de,ke)|0,x=Math.imul(de,Pe),w=w+Math.imul(z,Oe)|0,u=u+Math.imul(z,Ce)|0,u=u+Math.imul(q,Oe)|0,x=x+Math.imul(q,Ce)|0;var $r=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+($r>>>26)|0,$r&=67108863,w=Math.imul(pe,ke),u=Math.imul(pe,Pe),u=u+Math.imul(R,ke)|0,x=Math.imul(R,Pe),w=w+Math.imul(ce,Oe)|0,u=u+Math.imul(ce,Ce)|0,u=u+Math.imul(de,Oe)|0,x=x+Math.imul(de,Ce)|0,w=w+Math.imul(z,Be)|0,u=u+Math.imul(z,Ke)|0,u=u+Math.imul(q,Be)|0,x=x+Math.imul(q,Ke)|0;var Gr=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,w=Math.imul(U,ke),u=Math.imul(U,Pe),u=u+Math.imul(G,ke)|0,x=Math.imul(G,Pe),w=w+Math.imul(pe,Oe)|0,u=u+Math.imul(pe,Ce)|0,u=u+Math.imul(R,Oe)|0,x=x+Math.imul(R,Ce)|0,w=w+Math.imul(ce,Be)|0,u=u+Math.imul(ce,Ke)|0,u=u+Math.imul(de,Be)|0,x=x+Math.imul(de,Ke)|0,w=w+Math.imul(z,Re)|0,u=u+Math.imul(z,Ne)|0,u=u+Math.imul(q,Re)|0,x=x+Math.imul(q,Ne)|0;var Zr=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,w=Math.imul(j,ke),u=Math.imul(j,Pe),u=u+Math.imul(Y,ke)|0,x=Math.imul(Y,Pe),w=w+Math.imul(U,Oe)|0,u=u+Math.imul(U,Ce)|0,u=u+Math.imul(G,Oe)|0,x=x+Math.imul(G,Ce)|0,w=w+Math.imul(pe,Be)|0,u=u+Math.imul(pe,Ke)|0,u=u+Math.imul(R,Be)|0,x=x+Math.imul(R,Ke)|0,w=w+Math.imul(ce,Re)|0,u=u+Math.imul(ce,Ne)|0,u=u+Math.imul(de,Re)|0,x=x+Math.imul(de,Ne)|0,w=w+Math.imul(z,De)|0,u=u+Math.imul(z,Ue)|0,u=u+Math.imul(q,De)|0,x=x+Math.imul(q,Ue)|0;var Jr=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,w=Math.imul(ge,ke),u=Math.imul(ge,Pe),u=u+Math.imul(we,ke)|0,x=Math.imul(we,Pe),w=w+Math.imul(j,Oe)|0,u=u+Math.imul(j,Ce)|0,u=u+Math.imul(Y,Oe)|0,x=x+Math.imul(Y,Ce)|0,w=w+Math.imul(U,Be)|0,u=u+Math.imul(U,Ke)|0,u=u+Math.imul(G,Be)|0,x=x+Math.imul(G,Ke)|0,w=w+Math.imul(pe,Re)|0,u=u+Math.imul(pe,Ne)|0,u=u+Math.imul(R,Re)|0,x=x+Math.imul(R,Ne)|0,w=w+Math.imul(ce,De)|0,u=u+Math.imul(ce,Ue)|0,u=u+Math.imul(de,De)|0,x=x+Math.imul(de,Ue)|0,w=w+Math.imul(z,Le)|0,u=u+Math.imul(z,Ve)|0,u=u+Math.imul(q,Le)|0,x=x+Math.imul(q,Ve)|0;var Yr=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,w=Math.imul(Te,ke),u=Math.imul(Te,Pe),u=u+Math.imul(Ae,ke)|0,x=Math.imul(Ae,Pe),w=w+Math.imul(ge,Oe)|0,u=u+Math.imul(ge,Ce)|0,u=u+Math.imul(we,Oe)|0,x=x+Math.imul(we,Ce)|0,w=w+Math.imul(j,Be)|0,u=u+Math.imul(j,Ke)|0,u=u+Math.imul(Y,Be)|0,x=x+Math.imul(Y,Ke)|0,w=w+Math.imul(U,Re)|0,u=u+Math.imul(U,Ne)|0,u=u+Math.imul(G,Re)|0,x=x+Math.imul(G,Ne)|0,w=w+Math.imul(pe,De)|0,u=u+Math.imul(pe,Ue)|0,u=u+Math.imul(R,De)|0,x=x+Math.imul(R,Ue)|0,w=w+Math.imul(ce,Le)|0,u=u+Math.imul(ce,Ve)|0,u=u+Math.imul(de,Le)|0,x=x+Math.imul(de,Ve)|0,w=w+Math.imul(z,Fe)|0,u=u+Math.imul(z,ze)|0,u=u+Math.imul(q,Fe)|0,x=x+Math.imul(q,ze)|0;var Qr=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,w=Math.imul(Me,ke),u=Math.imul(Me,Pe),u=u+Math.imul(Je,ke)|0,x=Math.imul(Je,Pe),w=w+Math.imul(Te,Oe)|0,u=u+Math.imul(Te,Ce)|0,u=u+Math.imul(Ae,Oe)|0,x=x+Math.imul(Ae,Ce)|0,w=w+Math.imul(ge,Be)|0,u=u+Math.imul(ge,Ke)|0,u=u+Math.imul(we,Be)|0,x=x+Math.imul(we,Ke)|0,w=w+Math.imul(j,Re)|0,u=u+Math.imul(j,Ne)|0,u=u+Math.imul(Y,Re)|0,x=x+Math.imul(Y,Ne)|0,w=w+Math.imul(U,De)|0,u=u+Math.imul(U,Ue)|0,u=u+Math.imul(G,De)|0,x=x+Math.imul(G,Ue)|0,w=w+Math.imul(pe,Le)|0,u=u+Math.imul(pe,Ve)|0,u=u+Math.imul(R,Le)|0,x=x+Math.imul(R,Ve)|0,w=w+Math.imul(ce,Fe)|0,u=u+Math.imul(ce,ze)|0,u=u+Math.imul(de,Fe)|0,x=x+Math.imul(de,ze)|0,w=w+Math.imul(z,je)|0,u=u+Math.imul(z,qe)|0,u=u+Math.imul(q,je)|0,x=x+Math.imul(q,qe)|0;var Xr=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,w=Math.imul(Ye,ke),u=Math.imul(Ye,Pe),u=u+Math.imul(Qe,ke)|0,x=Math.imul(Qe,Pe),w=w+Math.imul(Me,Oe)|0,u=u+Math.imul(Me,Ce)|0,u=u+Math.imul(Je,Oe)|0,x=x+Math.imul(Je,Ce)|0,w=w+Math.imul(Te,Be)|0,u=u+Math.imul(Te,Ke)|0,u=u+Math.imul(Ae,Be)|0,x=x+Math.imul(Ae,Ke)|0,w=w+Math.imul(ge,Re)|0,u=u+Math.imul(ge,Ne)|0,u=u+Math.imul(we,Re)|0,x=x+Math.imul(we,Ne)|0,w=w+Math.imul(j,De)|0,u=u+Math.imul(j,Ue)|0,u=u+Math.imul(Y,De)|0,x=x+Math.imul(Y,Ue)|0,w=w+Math.imul(U,Le)|0,u=u+Math.imul(U,Ve)|0,u=u+Math.imul(G,Le)|0,x=x+Math.imul(G,Ve)|0,w=w+Math.imul(pe,Fe)|0,u=u+Math.imul(pe,ze)|0,u=u+Math.imul(R,Fe)|0,x=x+Math.imul(R,ze)|0,w=w+Math.imul(ce,je)|0,u=u+Math.imul(ce,qe)|0,u=u+Math.imul(de,je)|0,x=x+Math.imul(de,qe)|0,w=w+Math.imul(z,We)|0,u=u+Math.imul(z,He)|0,u=u+Math.imul(q,We)|0,x=x+Math.imul(q,He)|0;var en=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(en>>>26)|0,en&=67108863,w=Math.imul(Ie,ke),u=Math.imul(Ie,Pe),u=u+Math.imul(_e,ke)|0,x=Math.imul(_e,Pe),w=w+Math.imul(Ye,Oe)|0,u=u+Math.imul(Ye,Ce)|0,u=u+Math.imul(Qe,Oe)|0,x=x+Math.imul(Qe,Ce)|0,w=w+Math.imul(Me,Be)|0,u=u+Math.imul(Me,Ke)|0,u=u+Math.imul(Je,Be)|0,x=x+Math.imul(Je,Ke)|0,w=w+Math.imul(Te,Re)|0,u=u+Math.imul(Te,Ne)|0,u=u+Math.imul(Ae,Re)|0,x=x+Math.imul(Ae,Ne)|0,w=w+Math.imul(ge,De)|0,u=u+Math.imul(ge,Ue)|0,u=u+Math.imul(we,De)|0,x=x+Math.imul(we,Ue)|0,w=w+Math.imul(j,Le)|0,u=u+Math.imul(j,Ve)|0,u=u+Math.imul(Y,Le)|0,x=x+Math.imul(Y,Ve)|0,w=w+Math.imul(U,Fe)|0,u=u+Math.imul(U,ze)|0,u=u+Math.imul(G,Fe)|0,x=x+Math.imul(G,ze)|0,w=w+Math.imul(pe,je)|0,u=u+Math.imul(pe,qe)|0,u=u+Math.imul(R,je)|0,x=x+Math.imul(R,qe)|0,w=w+Math.imul(ce,We)|0,u=u+Math.imul(ce,He)|0,u=u+Math.imul(de,We)|0,x=x+Math.imul(de,He)|0,w=w+Math.imul(z,$e)|0,u=u+Math.imul(z,Ge)|0,u=u+Math.imul(q,$e)|0,x=x+Math.imul(q,Ge)|0;var tn=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(tn>>>26)|0,tn&=67108863,w=Math.imul(Ie,Oe),u=Math.imul(Ie,Ce),u=u+Math.imul(_e,Oe)|0,x=Math.imul(_e,Ce),w=w+Math.imul(Ye,Be)|0,u=u+Math.imul(Ye,Ke)|0,u=u+Math.imul(Qe,Be)|0,x=x+Math.imul(Qe,Ke)|0,w=w+Math.imul(Me,Re)|0,u=u+Math.imul(Me,Ne)|0,u=u+Math.imul(Je,Re)|0,x=x+Math.imul(Je,Ne)|0,w=w+Math.imul(Te,De)|0,u=u+Math.imul(Te,Ue)|0,u=u+Math.imul(Ae,De)|0,x=x+Math.imul(Ae,Ue)|0,w=w+Math.imul(ge,Le)|0,u=u+Math.imul(ge,Ve)|0,u=u+Math.imul(we,Le)|0,x=x+Math.imul(we,Ve)|0,w=w+Math.imul(j,Fe)|0,u=u+Math.imul(j,ze)|0,u=u+Math.imul(Y,Fe)|0,x=x+Math.imul(Y,ze)|0,w=w+Math.imul(U,je)|0,u=u+Math.imul(U,qe)|0,u=u+Math.imul(G,je)|0,x=x+Math.imul(G,qe)|0,w=w+Math.imul(pe,We)|0,u=u+Math.imul(pe,He)|0,u=u+Math.imul(R,We)|0,x=x+Math.imul(R,He)|0,w=w+Math.imul(ce,$e)|0,u=u+Math.imul(ce,Ge)|0,u=u+Math.imul(de,$e)|0,x=x+Math.imul(de,Ge)|0;var rn=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(rn>>>26)|0,rn&=67108863,w=Math.imul(Ie,Be),u=Math.imul(Ie,Ke),u=u+Math.imul(_e,Be)|0,x=Math.imul(_e,Ke),w=w+Math.imul(Ye,Re)|0,u=u+Math.imul(Ye,Ne)|0,u=u+Math.imul(Qe,Re)|0,x=x+Math.imul(Qe,Ne)|0,w=w+Math.imul(Me,De)|0,u=u+Math.imul(Me,Ue)|0,u=u+Math.imul(Je,De)|0,x=x+Math.imul(Je,Ue)|0,w=w+Math.imul(Te,Le)|0,u=u+Math.imul(Te,Ve)|0,u=u+Math.imul(Ae,Le)|0,x=x+Math.imul(Ae,Ve)|0,w=w+Math.imul(ge,Fe)|0,u=u+Math.imul(ge,ze)|0,u=u+Math.imul(we,Fe)|0,x=x+Math.imul(we,ze)|0,w=w+Math.imul(j,je)|0,u=u+Math.imul(j,qe)|0,u=u+Math.imul(Y,je)|0,x=x+Math.imul(Y,qe)|0,w=w+Math.imul(U,We)|0,u=u+Math.imul(U,He)|0,u=u+Math.imul(G,We)|0,x=x+Math.imul(G,He)|0,w=w+Math.imul(pe,$e)|0,u=u+Math.imul(pe,Ge)|0,u=u+Math.imul(R,$e)|0,x=x+Math.imul(R,Ge)|0;var nn=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(nn>>>26)|0,nn&=67108863,w=Math.imul(Ie,Re),u=Math.imul(Ie,Ne),u=u+Math.imul(_e,Re)|0,x=Math.imul(_e,Ne),w=w+Math.imul(Ye,De)|0,u=u+Math.imul(Ye,Ue)|0,u=u+Math.imul(Qe,De)|0,x=x+Math.imul(Qe,Ue)|0,w=w+Math.imul(Me,Le)|0,u=u+Math.imul(Me,Ve)|0,u=u+Math.imul(Je,Le)|0,x=x+Math.imul(Je,Ve)|0,w=w+Math.imul(Te,Fe)|0,u=u+Math.imul(Te,ze)|0,u=u+Math.imul(Ae,Fe)|0,x=x+Math.imul(Ae,ze)|0,w=w+Math.imul(ge,je)|0,u=u+Math.imul(ge,qe)|0,u=u+Math.imul(we,je)|0,x=x+Math.imul(we,qe)|0,w=w+Math.imul(j,We)|0,u=u+Math.imul(j,He)|0,u=u+Math.imul(Y,We)|0,x=x+Math.imul(Y,He)|0,w=w+Math.imul(U,$e)|0,u=u+Math.imul(U,Ge)|0,u=u+Math.imul(G,$e)|0,x=x+Math.imul(G,Ge)|0;var on=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(on>>>26)|0,on&=67108863,w=Math.imul(Ie,De),u=Math.imul(Ie,Ue),u=u+Math.imul(_e,De)|0,x=Math.imul(_e,Ue),w=w+Math.imul(Ye,Le)|0,u=u+Math.imul(Ye,Ve)|0,u=u+Math.imul(Qe,Le)|0,x=x+Math.imul(Qe,Ve)|0,w=w+Math.imul(Me,Fe)|0,u=u+Math.imul(Me,ze)|0,u=u+Math.imul(Je,Fe)|0,x=x+Math.imul(Je,ze)|0,w=w+Math.imul(Te,je)|0,u=u+Math.imul(Te,qe)|0,u=u+Math.imul(Ae,je)|0,x=x+Math.imul(Ae,qe)|0,w=w+Math.imul(ge,We)|0,u=u+Math.imul(ge,He)|0,u=u+Math.imul(we,We)|0,x=x+Math.imul(we,He)|0,w=w+Math.imul(j,$e)|0,u=u+Math.imul(j,Ge)|0,u=u+Math.imul(Y,$e)|0,x=x+Math.imul(Y,Ge)|0;var sn=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(sn>>>26)|0,sn&=67108863,w=Math.imul(Ie,Le),u=Math.imul(Ie,Ve),u=u+Math.imul(_e,Le)|0,x=Math.imul(_e,Ve),w=w+Math.imul(Ye,Fe)|0,u=u+Math.imul(Ye,ze)|0,u=u+Math.imul(Qe,Fe)|0,x=x+Math.imul(Qe,ze)|0,w=w+Math.imul(Me,je)|0,u=u+Math.imul(Me,qe)|0,u=u+Math.imul(Je,je)|0,x=x+Math.imul(Je,qe)|0,w=w+Math.imul(Te,We)|0,u=u+Math.imul(Te,He)|0,u=u+Math.imul(Ae,We)|0,x=x+Math.imul(Ae,He)|0,w=w+Math.imul(ge,$e)|0,u=u+Math.imul(ge,Ge)|0,u=u+Math.imul(we,$e)|0,x=x+Math.imul(we,Ge)|0;var an=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(an>>>26)|0,an&=67108863,w=Math.imul(Ie,Fe),u=Math.imul(Ie,ze),u=u+Math.imul(_e,Fe)|0,x=Math.imul(_e,ze),w=w+Math.imul(Ye,je)|0,u=u+Math.imul(Ye,qe)|0,u=u+Math.imul(Qe,je)|0,x=x+Math.imul(Qe,qe)|0,w=w+Math.imul(Me,We)|0,u=u+Math.imul(Me,He)|0,u=u+Math.imul(Je,We)|0,x=x+Math.imul(Je,He)|0,w=w+Math.imul(Te,$e)|0,u=u+Math.imul(Te,Ge)|0,u=u+Math.imul(Ae,$e)|0,x=x+Math.imul(Ae,Ge)|0;var cn=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(cn>>>26)|0,cn&=67108863,w=Math.imul(Ie,je),u=Math.imul(Ie,qe),u=u+Math.imul(_e,je)|0,x=Math.imul(_e,qe),w=w+Math.imul(Ye,We)|0,u=u+Math.imul(Ye,He)|0,u=u+Math.imul(Qe,We)|0,x=x+Math.imul(Qe,He)|0,w=w+Math.imul(Me,$e)|0,u=u+Math.imul(Me,Ge)|0,u=u+Math.imul(Je,$e)|0,x=x+Math.imul(Je,Ge)|0;var un=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(un>>>26)|0,un&=67108863,w=Math.imul(Ie,We),u=Math.imul(Ie,He),u=u+Math.imul(_e,We)|0,x=Math.imul(_e,He),w=w+Math.imul(Ye,$e)|0,u=u+Math.imul(Ye,Ge)|0,u=u+Math.imul(Qe,$e)|0,x=x+Math.imul(Qe,Ge)|0;var Io=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(Io>>>26)|0,Io&=67108863,w=Math.imul(Ie,$e),u=Math.imul(Ie,Ge),u=u+Math.imul(_e,$e)|0,x=Math.imul(_e,Ge);var _o=(_+w|0)+((u&8191)<<13)|0;return _=(x+(u>>>13)|0)+(_o>>>26)|0,_o&=67108863,M[0]=Hr,M[1]=$r,M[2]=Gr,M[3]=Zr,M[4]=Jr,M[5]=Yr,M[6]=Qr,M[7]=Xr,M[8]=en,M[9]=tn,M[10]=rn,M[11]=nn,M[12]=on,M[13]=sn,M[14]=an,M[15]=cn,M[16]=un,M[17]=Io,M[18]=_o,_!==0&&(M[19]=_,g.length++),g},"comb10MulTo");Math.imul||(B=P);function K(S,a,l){l.negative=a.negative^S.negative,l.length=S.length+a.length;for(var g=0,y=0,b=0;b<l.length-1;b++){var M=y;y=0;for(var _=g&67108863,w=Math.min(b,a.length-1),u=Math.max(0,b-S.length+1);u<=w;u++){var x=b-u,F=S.words[x]|0,z=a.words[u]|0,q=F*z,Q=q&67108863;M=M+(q/67108864|0)|0,Q=Q+_|0,_=Q&67108863,M=M+(Q>>>26)|0,y+=M>>>26,M&=67108863}l.words[b]=_,g=M,M=y}return g!==0?l.words[b]=g:l.length--,l.strip()}o(K,"bigMulTo");function N(S,a,l){var g=new D;return g.mulp(S,a,l)}o(N,"jumboMulTo"),i.prototype.mulTo=o(function(a,l){var g,y=this.length+a.length;return this.length===10&&a.length===10?g=B(this,a,l):y<63?g=P(this,a,l):y<1024?g=K(this,a,l):g=N(this,a,l),g},"mulTo");function D(S,a){this.x=S,this.y=a}o(D,"FFTM"),D.prototype.makeRBT=o(function(a){for(var l=new Array(a),g=i.prototype._countBits(a)-1,y=0;y<a;y++)l[y]=this.revBin(y,g,a);return l},"makeRBT"),D.prototype.revBin=o(function(a,l,g){if(a===0||a===g-1)return a;for(var y=0,b=0;b<l;b++)y|=(a&1)<<l-b-1,a>>=1;return y},"revBin"),D.prototype.permute=o(function(a,l,g,y,b,M){for(var _=0;_<M;_++)y[_]=l[a[_]],b[_]=g[a[_]]},"permute"),D.prototype.transform=o(function(a,l,g,y,b,M){this.permute(M,a,l,g,y,b);for(var _=1;_<b;_<<=1)for(var w=_<<1,u=Math.cos(2*Math.PI/w),x=Math.sin(2*Math.PI/w),F=0;F<b;F+=w)for(var z=u,q=x,Q=0;Q<_;Q++){var ce=g[F+Q],de=y[F+Q],ft=g[F+Q+_],pe=y[F+Q+_],R=z*ft-q*pe;pe=z*pe+q*ft,ft=R,g[F+Q]=ce+ft,y[F+Q]=de+pe,g[F+Q+_]=ce-ft,y[F+Q+_]=de-pe,Q!==w&&(R=u*z-x*q,q=u*q+x*z,z=R)}},"transform"),D.prototype.guessLen13b=o(function(a,l){var g=Math.max(l,a)|1,y=g&1,b=0;for(g=g/2|0;g;g=g>>>1)b++;return 1<<b+1+y},"guessLen13b"),D.prototype.conjugate=o(function(a,l,g){if(!(g<=1))for(var y=0;y<g/2;y++){var b=a[y];a[y]=a[g-y-1],a[g-y-1]=b,b=l[y],l[y]=-l[g-y-1],l[g-y-1]=-b}},"conjugate"),D.prototype.normalize13b=o(function(a,l){for(var g=0,y=0;y<l/2;y++){var b=Math.round(a[2*y+1]/l)*8192+Math.round(a[2*y]/l)+g;a[y]=b&67108863,b<67108864?g=0:g=b/67108864|0}return a},"normalize13b"),D.prototype.convert13b=o(function(a,l,g,y){for(var b=0,M=0;M<l;M++)b=b+(a[M]|0),g[2*M]=b&8191,b=b>>>13,g[2*M+1]=b&8191,b=b>>>13;for(M=2*l;M<y;++M)g[M]=0;r(b===0),r((b&-8192)===0)},"convert13b"),D.prototype.stub=o(function(a){for(var l=new Array(a),g=0;g<a;g++)l[g]=0;return l},"stub"),D.prototype.mulp=o(function(a,l,g){var y=2*this.guessLen13b(a.length,l.length),b=this.makeRBT(y),M=this.stub(y),_=new Array(y),w=new Array(y),u=new Array(y),x=new Array(y),F=new Array(y),z=new Array(y),q=g.words;q.length=y,this.convert13b(a.words,a.length,_,y),this.convert13b(l.words,l.length,x,y),this.transform(_,M,w,u,y,b),this.transform(x,M,F,z,y,b);for(var Q=0;Q<y;Q++){var ce=w[Q]*F[Q]-u[Q]*z[Q];u[Q]=w[Q]*z[Q]+u[Q]*F[Q],w[Q]=ce}return this.conjugate(w,u,y),this.transform(w,u,q,M,y,b),this.conjugate(q,M,y),this.normalize13b(q,y),g.negative=a.negative^l.negative,g.length=a.length+l.length,g.strip()},"mulp"),i.prototype.mul=o(function(a){var l=new i(null);return l.words=new Array(this.length+a.length),this.mulTo(a,l)},"mul"),i.prototype.mulf=o(function(a){var l=new i(null);return l.words=new Array(this.length+a.length),N(this,a,l)},"mulf"),i.prototype.imul=o(function(a){return this.clone().mulTo(a,this)},"imul"),i.prototype.imuln=o(function(a){r(typeof a=="number"),r(a<67108864);for(var l=0,g=0;g<this.length;g++){var y=(this.words[g]|0)*a,b=(y&67108863)+(l&67108863);l>>=26,l+=y/67108864|0,l+=b>>>26,this.words[g]=b&67108863}return l!==0&&(this.words[g]=l,this.length++),this},"imuln"),i.prototype.muln=o(function(a){return this.clone().imuln(a)},"muln"),i.prototype.sqr=o(function(){return this.mul(this)},"sqr"),i.prototype.isqr=o(function(){return this.imul(this.clone())},"isqr"),i.prototype.pow=o(function(a){var l=I(a);if(l.length===0)return new i(1);for(var g=this,y=0;y<l.length&&l[y]===0;y++,g=g.sqr());if(++y<l.length)for(var b=g.sqr();y<l.length;y++,b=b.sqr())l[y]!==0&&(g=g.mul(b));return g},"pow"),i.prototype.iushln=o(function(a){r(typeof a=="number"&&a>=0);var l=a%26,g=(a-l)/26,y=67108863>>>26-l<<26-l,b;if(l!==0){var M=0;for(b=0;b<this.length;b++){var _=this.words[b]&y,w=(this.words[b]|0)-_<<l;this.words[b]=w|M,M=_>>>26-l}M&&(this.words[b]=M,this.length++)}if(g!==0){for(b=this.length-1;b>=0;b--)this.words[b+g]=this.words[b];for(b=0;b<g;b++)this.words[b]=0;this.length+=g}return this.strip()},"iushln"),i.prototype.ishln=o(function(a){return r(this.negative===0),this.iushln(a)},"ishln"),i.prototype.iushrn=o(function(a,l,g){r(typeof a=="number"&&a>=0);var y;l?y=(l-l%26)/26:y=0;var b=a%26,M=Math.min((a-b)/26,this.length),_=67108863^67108863>>>b<<b,w=g;if(y-=M,y=Math.max(0,y),w){for(var u=0;u<M;u++)w.words[u]=this.words[u];w.length=M}if(M!==0)if(this.length>M)for(this.length-=M,u=0;u<this.length;u++)this.words[u]=this.words[u+M];else this.words[0]=0,this.length=1;var x=0;for(u=this.length-1;u>=0&&(x!==0||u>=y);u--){var F=this.words[u]|0;this.words[u]=x<<26-b|F>>>b,x=F&_}return w&&x!==0&&(w.words[w.length++]=x),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},"iushrn"),i.prototype.ishrn=o(function(a,l,g){return r(this.negative===0),this.iushrn(a,l,g)},"ishrn"),i.prototype.shln=o(function(a){return this.clone().ishln(a)},"shln"),i.prototype.ushln=o(function(a){return this.clone().iushln(a)},"ushln"),i.prototype.shrn=o(function(a){return this.clone().ishrn(a)},"shrn"),i.prototype.ushrn=o(function(a){return this.clone().iushrn(a)},"ushrn"),i.prototype.testn=o(function(a){r(typeof a=="number"&&a>=0);var l=a%26,g=(a-l)/26,y=1<<l;if(this.length<=g)return!1;var b=this.words[g];return!!(b&y)},"testn"),i.prototype.imaskn=o(function(a){r(typeof a=="number"&&a>=0);var l=a%26,g=(a-l)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(l!==0&&g++,this.length=Math.min(g,this.length),l!==0){var y=67108863^67108863>>>l<<l;this.words[this.length-1]&=y}return this.strip()},"imaskn"),i.prototype.maskn=o(function(a){return this.clone().imaskn(a)},"maskn"),i.prototype.iaddn=o(function(a){return r(typeof a=="number"),r(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},"iaddn"),i.prototype._iaddn=o(function(a){this.words[0]+=a;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},"_iaddn"),i.prototype.isubn=o(function(a){if(r(typeof a=="number"),r(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},"isubn"),i.prototype.addn=o(function(a){return this.clone().iaddn(a)},"addn"),i.prototype.subn=o(function(a){return this.clone().isubn(a)},"subn"),i.prototype.iabs=o(function(){return this.negative=0,this},"iabs"),i.prototype.abs=o(function(){return this.clone().iabs()},"abs"),i.prototype._ishlnsubmul=o(function(a,l,g){var y=a.length+g,b;this._expand(y);var M,_=0;for(b=0;b<a.length;b++){M=(this.words[b+g]|0)+_;var w=(a.words[b]|0)*l;M-=w&67108863,_=(M>>26)-(w/67108864|0),this.words[b+g]=M&67108863}for(;b<this.length-g;b++)M=(this.words[b+g]|0)+_,_=M>>26,this.words[b+g]=M&67108863;if(_===0)return this.strip();for(r(_===-1),_=0,b=0;b<this.length;b++)M=-(this.words[b]|0)+_,_=M>>26,this.words[b]=M&67108863;return this.negative=1,this.strip()},"_ishlnsubmul"),i.prototype._wordDiv=o(function(a,l){var g=this.length-a.length,y=this.clone(),b=a,M=b.words[b.length-1]|0,_=this._countBits(M);g=26-_,g!==0&&(b=b.ushln(g),y.iushln(g),M=b.words[b.length-1]|0);var w=y.length-b.length,u;if(l!=="mod"){u=new i(null),u.length=w+1,u.words=new Array(u.length);for(var x=0;x<u.length;x++)u.words[x]=0}var F=y.clone()._ishlnsubmul(b,1,w);F.negative===0&&(y=F,u&&(u.words[w]=1));for(var z=w-1;z>=0;z--){var q=(y.words[b.length+z]|0)*67108864+(y.words[b.length+z-1]|0);for(q=Math.min(q/M|0,67108863),y._ishlnsubmul(b,q,z);y.negative!==0;)q--,y.negative=0,y._ishlnsubmul(b,1,z),y.isZero()||(y.negative^=1);u&&(u.words[z]=q)}return u&&u.strip(),y.strip(),l!=="div"&&g!==0&&y.iushrn(g),{div:u||null,mod:y}},"_wordDiv"),i.prototype.divmod=o(function(a,l,g){if(r(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var y,b,M;return this.negative!==0&&a.negative===0?(M=this.neg().divmod(a,l),l!=="mod"&&(y=M.div.neg()),l!=="div"&&(b=M.mod.neg(),g&&b.negative!==0&&b.iadd(a)),{div:y,mod:b}):this.negative===0&&a.negative!==0?(M=this.divmod(a.neg(),l),l!=="mod"&&(y=M.div.neg()),{div:y,mod:M.mod}):this.negative&a.negative?(M=this.neg().divmod(a.neg(),l),l!=="div"&&(b=M.mod.neg(),g&&b.negative!==0&&b.isub(a)),{div:M.div,mod:b}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?l==="div"?{div:this.divn(a.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modn(a.words[0]))}:this._wordDiv(a,l)},"divmod"),i.prototype.div=o(function(a){return this.divmod(a,"div",!1).div},"div"),i.prototype.mod=o(function(a){return this.divmod(a,"mod",!1).mod},"mod"),i.prototype.umod=o(function(a){return this.divmod(a,"mod",!0).mod},"umod"),i.prototype.divRound=o(function(a){var l=this.divmod(a);if(l.mod.isZero())return l.div;var g=l.div.negative!==0?l.mod.isub(a):l.mod,y=a.ushrn(1),b=a.andln(1),M=g.cmp(y);return M<0||b===1&&M===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},"divRound"),i.prototype.modn=o(function(a){r(a<=67108863);for(var l=(1<<26)%a,g=0,y=this.length-1;y>=0;y--)g=(l*g+(this.words[y]|0))%a;return g},"modn"),i.prototype.idivn=o(function(a){r(a<=67108863);for(var l=0,g=this.length-1;g>=0;g--){var y=(this.words[g]|0)+l*67108864;this.words[g]=y/a|0,l=y%a}return this.strip()},"idivn"),i.prototype.divn=o(function(a){return this.clone().idivn(a)},"divn"),i.prototype.egcd=o(function(a){r(a.negative===0),r(!a.isZero());var l=this,g=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var y=new i(1),b=new i(0),M=new i(0),_=new i(1),w=0;l.isEven()&&g.isEven();)l.iushrn(1),g.iushrn(1),++w;for(var u=g.clone(),x=l.clone();!l.isZero();){for(var F=0,z=1;!(l.words[0]&z)&&F<26;++F,z<<=1);if(F>0)for(l.iushrn(F);F-- >0;)(y.isOdd()||b.isOdd())&&(y.iadd(u),b.isub(x)),y.iushrn(1),b.iushrn(1);for(var q=0,Q=1;!(g.words[0]&Q)&&q<26;++q,Q<<=1);if(q>0)for(g.iushrn(q);q-- >0;)(M.isOdd()||_.isOdd())&&(M.iadd(u),_.isub(x)),M.iushrn(1),_.iushrn(1);l.cmp(g)>=0?(l.isub(g),y.isub(M),b.isub(_)):(g.isub(l),M.isub(y),_.isub(b))}return{a:M,b:_,gcd:g.iushln(w)}},"egcd"),i.prototype._invmp=o(function(a){r(a.negative===0),r(!a.isZero());var l=this,g=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var y=new i(1),b=new i(0),M=g.clone();l.cmpn(1)>0&&g.cmpn(1)>0;){for(var _=0,w=1;!(l.words[0]&w)&&_<26;++_,w<<=1);if(_>0)for(l.iushrn(_);_-- >0;)y.isOdd()&&y.iadd(M),y.iushrn(1);for(var u=0,x=1;!(g.words[0]&x)&&u<26;++u,x<<=1);if(u>0)for(g.iushrn(u);u-- >0;)b.isOdd()&&b.iadd(M),b.iushrn(1);l.cmp(g)>=0?(l.isub(g),y.isub(b)):(g.isub(l),b.isub(y))}var F;return l.cmpn(1)===0?F=y:F=b,F.cmpn(0)<0&&F.iadd(a),F},"_invmp"),i.prototype.gcd=o(function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var l=this.clone(),g=a.clone();l.negative=0,g.negative=0;for(var y=0;l.isEven()&&g.isEven();y++)l.iushrn(1),g.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;g.isEven();)g.iushrn(1);var b=l.cmp(g);if(b<0){var M=l;l=g,g=M}else if(b===0||g.cmpn(1)===0)break;l.isub(g)}while(!0);return g.iushln(y)},"gcd"),i.prototype.invm=o(function(a){return this.egcd(a).a.umod(a)},"invm"),i.prototype.isEven=o(function(){return(this.words[0]&1)===0},"isEven"),i.prototype.isOdd=o(function(){return(this.words[0]&1)===1},"isOdd"),i.prototype.andln=o(function(a){return this.words[0]&a},"andln"),i.prototype.bincn=o(function(a){r(typeof a=="number");var l=a%26,g=(a-l)/26,y=1<<l;if(this.length<=g)return this._expand(g+1),this.words[g]|=y,this;for(var b=y,M=g;b!==0&&M<this.length;M++){var _=this.words[M]|0;_+=b,b=_>>>26,_&=67108863,this.words[M]=_}return b!==0&&(this.words[M]=b,this.length++),this},"bincn"),i.prototype.isZero=o(function(){return this.length===1&&this.words[0]===0},"isZero"),i.prototype.cmpn=o(function(a){var l=a<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var g;if(this.length>1)g=1;else{l&&(a=-a),r(a<=67108863,"Number is too big");var y=this.words[0]|0;g=y===a?0:y<a?-1:1}return this.negative!==0?-g|0:g},"cmpn"),i.prototype.cmp=o(function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var l=this.ucmp(a);return this.negative!==0?-l|0:l},"cmp"),i.prototype.ucmp=o(function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var l=0,g=this.length-1;g>=0;g--){var y=this.words[g]|0,b=a.words[g]|0;if(y!==b){y<b?l=-1:y>b&&(l=1);break}}return l},"ucmp"),i.prototype.gtn=o(function(a){return this.cmpn(a)===1},"gtn"),i.prototype.gt=o(function(a){return this.cmp(a)===1},"gt"),i.prototype.gten=o(function(a){return this.cmpn(a)>=0},"gten"),i.prototype.gte=o(function(a){return this.cmp(a)>=0},"gte"),i.prototype.ltn=o(function(a){return this.cmpn(a)===-1},"ltn"),i.prototype.lt=o(function(a){return this.cmp(a)===-1},"lt"),i.prototype.lten=o(function(a){return this.cmpn(a)<=0},"lten"),i.prototype.lte=o(function(a){return this.cmp(a)<=0},"lte"),i.prototype.eqn=o(function(a){return this.cmpn(a)===0},"eqn"),i.prototype.eq=o(function(a){return this.cmp(a)===0},"eq"),i.red=o(function(a){return new J(a)},"red"),i.prototype.toRed=o(function(a){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},"toRed"),i.prototype.fromRed=o(function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},"fromRed"),i.prototype._forceRed=o(function(a){return this.red=a,this},"_forceRed"),i.prototype.forceRed=o(function(a){return r(!this.red,"Already a number in reduction context"),this._forceRed(a)},"forceRed"),i.prototype.redAdd=o(function(a){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},"redAdd"),i.prototype.redIAdd=o(function(a){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},"redIAdd"),i.prototype.redSub=o(function(a){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},"redSub"),i.prototype.redISub=o(function(a){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},"redISub"),i.prototype.redShl=o(function(a){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},"redShl"),i.prototype.redMul=o(function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},"redMul"),i.prototype.redIMul=o(function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},"redIMul"),i.prototype.redSqr=o(function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},"redSqr"),i.prototype.redISqr=o(function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},"redISqr"),i.prototype.redSqrt=o(function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},"redSqrt"),i.prototype.redInvm=o(function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},"redInvm"),i.prototype.redNeg=o(function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},"redNeg"),i.prototype.redPow=o(function(a){return r(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)},"redPow");var Z={k256:null,p224:null,p192:null,p25519:null};function L(S,a){this.name=S,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}o(L,"MPrime"),L.prototype._tmp=o(function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},"_tmp"),L.prototype.ireduce=o(function(a){var l=a,g;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),g=l.bitLength();while(g>this.n);var y=g<this.n?-1:l.ucmp(this.p);return y===0?(l.words[0]=0,l.length=1):y>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},"ireduce"),L.prototype.split=o(function(a,l){a.iushrn(this.n,0,l)},"split"),L.prototype.imulK=o(function(a){return a.imul(this.k)},"imulK");function ne(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(ne,"K256"),n(ne,L),ne.prototype.split=o(function(a,l){for(var g=4194303,y=Math.min(a.length,9),b=0;b<y;b++)l.words[b]=a.words[b];if(l.length=y,a.length<=9){a.words[0]=0,a.length=1;return}var M=a.words[9];for(l.words[l.length++]=M&g,b=10;b<a.length;b++){var _=a.words[b]|0;a.words[b-10]=(_&g)<<4|M>>>22,M=_}M>>>=22,a.words[b-10]=M,M===0&&a.length>10?a.length-=10:a.length-=9},"split"),ne.prototype.imulK=o(function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var l=0,g=0;g<a.length;g++){var y=a.words[g]|0;l+=y*977,a.words[g]=l&67108863,l=y*64+(l/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a},"imulK");function ie(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(ie,"P224"),n(ie,L);function re(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(re,"P192"),n(re,L);function ee(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(ee,"P25519"),n(ee,L),ee.prototype.imulK=o(function(a){for(var l=0,g=0;g<a.length;g++){var y=(a.words[g]|0)*19+l,b=y&67108863;y>>>=26,a.words[g]=b,l=y}return l!==0&&(a.words[a.length++]=l),a},"imulK"),i._prime=o(function(a){if(Z[a])return Z[a];var l;if(a==="k256")l=new ne;else if(a==="p224")l=new ie;else if(a==="p192")l=new re;else if(a==="p25519")l=new ee;else throw new Error("Unknown prime "+a);return Z[a]=l,l},"prime");function J(S){if(typeof S=="string"){var a=i._prime(S);this.m=a.p,this.prime=a}else r(S.gtn(1),"modulus must be greater than 1"),this.m=S,this.prime=null}o(J,"Red"),J.prototype._verify1=o(function(a){r(a.negative===0,"red works only with positives"),r(a.red,"red works only with red numbers")},"_verify1"),J.prototype._verify2=o(function(a,l){r((a.negative|l.negative)===0,"red works only with positives"),r(a.red&&a.red===l.red,"red works only with red numbers")},"_verify2"),J.prototype.imod=o(function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},"imod"),J.prototype.neg=o(function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},"neg"),J.prototype.add=o(function(a,l){this._verify2(a,l);var g=a.add(l);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},"add"),J.prototype.iadd=o(function(a,l){this._verify2(a,l);var g=a.iadd(l);return g.cmp(this.m)>=0&&g.isub(this.m),g},"iadd"),J.prototype.sub=o(function(a,l){this._verify2(a,l);var g=a.sub(l);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},"sub"),J.prototype.isub=o(function(a,l){this._verify2(a,l);var g=a.isub(l);return g.cmpn(0)<0&&g.iadd(this.m),g},"isub"),J.prototype.shl=o(function(a,l){return this._verify1(a),this.imod(a.ushln(l))},"shl"),J.prototype.imul=o(function(a,l){return this._verify2(a,l),this.imod(a.imul(l))},"imul"),J.prototype.mul=o(function(a,l){return this._verify2(a,l),this.imod(a.mul(l))},"mul"),J.prototype.isqr=o(function(a){return this.imul(a,a.clone())},"isqr"),J.prototype.sqr=o(function(a){return this.mul(a,a)},"sqr"),J.prototype.sqrt=o(function(a){if(a.isZero())return a.clone();var l=this.m.andln(3);if(r(l%2===1),l===3){var g=this.m.add(new i(1)).iushrn(2);return this.pow(a,g)}for(var y=this.m.subn(1),b=0;!y.isZero()&&y.andln(1)===0;)b++,y.iushrn(1);r(!y.isZero());var M=new i(1).toRed(this),_=M.redNeg(),w=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new i(2*u*u).toRed(this);this.pow(u,w).cmp(_)!==0;)u.redIAdd(_);for(var x=this.pow(u,y),F=this.pow(a,y.addn(1).iushrn(1)),z=this.pow(a,y),q=b;z.cmp(M)!==0;){for(var Q=z,ce=0;Q.cmp(M)!==0;ce++)Q=Q.redSqr();r(ce<q);var de=this.pow(x,new i(1).iushln(q-ce-1));F=F.redMul(de),x=de.redSqr(),z=z.redMul(x),q=ce}return F},"sqrt"),J.prototype.invm=o(function(a){var l=a._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},"invm"),J.prototype.pow=o(function(a,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return a.clone();var g=4,y=new Array(1<<g);y[0]=new i(1).toRed(this),y[1]=a;for(var b=2;b<y.length;b++)y[b]=this.mul(y[b-1],a);var M=y[0],_=0,w=0,u=l.bitLength()%26;for(u===0&&(u=26),b=l.length-1;b>=0;b--){for(var x=l.words[b],F=u-1;F>=0;F--){var z=x>>F&1;if(M!==y[0]&&(M=this.sqr(M)),z===0&&_===0){w=0;continue}_<<=1,_|=z,w++,!(w!==g&&(b!==0||F!==0))&&(M=this.mul(M,y[_]),w=0,_=0)}u=26}return M},"pow"),J.prototype.convertTo=o(function(a){var l=a.umod(this.m);return l===a?l.clone():l},"convertTo"),J.prototype.convertFrom=o(function(a){var l=a.clone();return l.red=null,l},"convertFrom"),i.mont=o(function(a){return new fe(a)},"mont");function fe(S){J.call(this,S),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(fe,"Mont"),n(fe,J),fe.prototype.convertTo=o(function(a){return this.imod(a.ushln(this.shift))},"convertTo"),fe.prototype.convertFrom=o(function(a){var l=this.imod(a.mul(this.rinv));return l.red=null,l},"convertFrom"),fe.prototype.imul=o(function(a,l){if(a.isZero()||l.isZero())return a.words[0]=0,a.length=1,a;var g=a.imul(l),y=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(y).iushrn(this.shift),M=b;return b.cmp(this.m)>=0?M=b.isub(this.m):b.cmpn(0)<0&&(M=b.iadd(this.m)),M._forceRed(this)},"imul"),fe.prototype.mul=o(function(a,l){if(a.isZero()||l.isZero())return new i(0)._forceRed(this);var g=a.mul(l),y=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(y).iushrn(this.shift),M=b;return b.cmp(this.m)>=0?M=b.isub(this.m):b.cmpn(0)<0&&(M=b.iadd(this.m)),M._forceRed(this)},"mul"),fe.prototype.invm=o(function(a){var l=this.imod(a._invmp(this.m).mul(this.r2));return l._forceRed(this)},"invm")})(typeof D0>"u"||D0,o1)});var a1=le(ra=>{"use strict";d();h();Object.defineProperty(ra,"__esModule",{value:!0});var Xo=Qo(),b3=gy().ec,U0=new b3("secp256k1"),ta=U0.curve;ra.privateKeyExport=function(e,t){t===void 0&&(t=!0);var r=new Xo(e);if(r.ucmp(ta.n)>=0)throw new Error("couldn't export to DER format");var n=U0.g.mul(r);return s1(n.getX(),n.getY(),t)};ra.privateKeyModInverse=function(e){var t=new Xo(e);if(t.ucmp(ta.n)>=0||t.isZero())throw new Error("private key range is invalid");return t.invm(ta.n).toArrayLike(Buffer,"be",32)};ra.signatureImport=function(e){var t=new Xo(e.r);t.ucmp(ta.n)>=0&&(t=new Xo(0));var r=new Xo(e.s);return r.ucmp(ta.n)>=0&&(r=new Xo(0)),Buffer.concat([t.toArrayLike(Buffer,"be",32),r.toArrayLike(Buffer,"be",32)])};ra.ecdhUnsafe=function(e,t,r){r===void 0&&(r=!0);var n=U0.keyFromPublic(e),i=new Xo(t);if(i.ucmp(ta.n)>=0||i.isZero())throw new Error("scalar was invalid (zero or overflow)");var s=n.pub.mul(i);return s1(s.getX(),s.getY(),r)};var s1=o(function(e,t,r){var n;return r?(n=Buffer.alloc(33),n[0]=t.isOdd()?3:2,e.toArrayLike(Buffer,"be",32).copy(n,1)):(n=Buffer.alloc(65),n[0]=4,e.toArrayLike(Buffer,"be",32).copy(n,1),t.toArrayLike(Buffer,"be",32).copy(n,33)),n},"toPublicKey")});var c1=le(mc=>{"use strict";d();h();Object.defineProperty(mc,"__esModule",{value:!0});var{Buffer:pc}=ln(),w3=pc.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),x3=pc.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);mc.privateKeyExport=function(e,t,r){r===void 0&&(r=!0);var n=pc.from(r?w3:x3);return e.copy(n,r?8:9),t.copy(n,r?181:214),n};mc.privateKeyImport=function(e){var t=e.length,r=0;if(t<r+1||e[r]!==48||(r+=1,t<r+1||!(e[r]&128)))return null;var n=e[r]&127;if(r+=1,n<1||n>2||t<r+n)return null;var i=e[r+n-1]|(n>1?e[r+n-2]<<8:0);return r+=n,t<r+i||t<r+3||e[r]!==2||e[r+1]!==1||e[r+2]!==1||(r+=3,t<r+2||e[r]!==4||e[r+1]>32||t<r+2+e[r+1])?null:e.slice(r+2,r+2+e[r+1])};mc.signatureImportLax=function(e){var t=pc.alloc(32,0),r=pc.alloc(32,0),n=e.length,i=0;if(e[i++]!==48)return null;var s=e[i++];if(s&128&&(i+=s-128,i>n)||e[i++]!==2)return null;var c=e[i++];if(c&128){if(s=c-128,i+s>n)return null;for(;s>0&&e[i]===0;i+=1,s-=1);for(c=0;s>0;i+=1,s-=1)c=(c<<8)+e[i]}if(c>n-i)return null;var f=i;if(i+=c,e[i++]!==2)return null;var p=e[i++];if(p&128){if(s=p-128,i+s>n)return null;for(;s>0&&e[i]===0;i+=1,s-=1);for(p=0;s>0;i+=1,s-=1)p=(p<<8)+e[i]}if(p>n-i)return null;var v=i;for(i+=p;c>0&&e[f]===0;c-=1,f+=1);if(c>32)return null;var A=e.slice(f,f+c);for(A.copy(t,32-A.length);p>0&&e[v]===0;p-=1,v+=1);if(p>32)return null;var T=e.slice(v,v+p);return T.copy(r,32-T.length),{r:t,s:r}}});var Xl=le(Ee=>{"use strict";d();h();Object.defineProperty(Ee,"__esModule",{value:!0});Ee.ecdhUnsafe=Ee.ecdh=Ee.recover=Ee.verify=Ee.sign=Ee.signatureImportLax=Ee.signatureImport=Ee.signatureExport=Ee.signatureNormalize=Ee.publicKeyCombine=Ee.publicKeyTweakMul=Ee.publicKeyTweakAdd=Ee.publicKeyVerify=Ee.publicKeyConvert=Ee.publicKeyCreate=Ee.privateKeyTweakMul=Ee.privateKeyTweakAdd=Ee.privateKeyModInverse=Ee.privateKeyNegate=Ee.privateKeyImport=Ee.privateKeyExport=Ee.privateKeyVerify=void 0;var Ht=i1(),Ql=a1(),L0=c1();Ee.privateKeyVerify=function(e){return e.length!==32?!1:Ht.privateKeyVerify(Uint8Array.from(e))};Ee.privateKeyExport=function(e,t){if(e.length!==32)throw new RangeError("private key length is invalid");var r=Ql.privateKeyExport(e,t);return L0.privateKeyExport(e,r,t)};Ee.privateKeyImport=function(e){if(e=L0.privateKeyImport(e),e!==null&&e.length===32&&Ee.privateKeyVerify(e))return e;throw new Error("couldn't import from DER format")};Ee.privateKeyNegate=function(e){return Buffer.from(Ht.privateKeyNegate(Uint8Array.from(e)))};Ee.privateKeyModInverse=function(e){if(e.length!==32)throw new Error("private key length is invalid");return Buffer.from(Ql.privateKeyModInverse(Uint8Array.from(e)))};Ee.privateKeyTweakAdd=function(e,t){return Buffer.from(Ht.privateKeyTweakAdd(Uint8Array.from(e),t))};Ee.privateKeyTweakMul=function(e,t){return Buffer.from(Ht.privateKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t)))};Ee.publicKeyCreate=function(e,t){return Buffer.from(Ht.publicKeyCreate(Uint8Array.from(e),t))};Ee.publicKeyConvert=function(e,t){return Buffer.from(Ht.publicKeyConvert(Uint8Array.from(e),t))};Ee.publicKeyVerify=function(e){return e.length!==33&&e.length!==65?!1:Ht.publicKeyVerify(Uint8Array.from(e))};Ee.publicKeyTweakAdd=function(e,t,r){return Buffer.from(Ht.publicKeyTweakAdd(Uint8Array.from(e),Uint8Array.from(t),r))};Ee.publicKeyTweakMul=function(e,t,r){return Buffer.from(Ht.publicKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t),r))};Ee.publicKeyCombine=function(e,t){var r=[];return e.forEach(function(n){r.push(Uint8Array.from(n))}),Buffer.from(Ht.publicKeyCombine(r,t))};Ee.signatureNormalize=function(e){return Buffer.from(Ht.signatureNormalize(Uint8Array.from(e)))};Ee.signatureExport=function(e){return Buffer.from(Ht.signatureExport(Uint8Array.from(e)))};Ee.signatureImport=function(e){return Buffer.from(Ht.signatureImport(Uint8Array.from(e)))};Ee.signatureImportLax=function(e){if(e.length===0)throw new RangeError("signature length is invalid");var t=L0.signatureImportLax(e);if(t===null)throw new Error("couldn't parse DER signature");return Ql.signatureImport(t)};Ee.sign=function(e,t,r){if(r===null)throw new TypeError("options should be an Object");var n=void 0;if(r){if(n={},r.data===null)throw new TypeError("options.data should be a Buffer");if(r.data){if(r.data.length!=32)throw new RangeError("options.data length is invalid");n.data=new Uint8Array(r.data)}if(r.noncefn===null)throw new TypeError("options.noncefn should be a Function");r.noncefn&&(n.noncefn=function(s,c,f,p,v){var A=f!=null?Buffer.from(f):null,T=p!=null?Buffer.from(p):null,I=Buffer.from("");return r.noncefn&&(I=r.noncefn(Buffer.from(s),Buffer.from(c),A,T,v)),new Uint8Array(I)})}var i=Ht.ecdsaSign(Uint8Array.from(e),Uint8Array.from(t),n);return{signature:Buffer.from(i.signature),recovery:i.recid}};Ee.verify=function(e,t,r){return Ht.ecdsaVerify(Uint8Array.from(t),Uint8Array.from(e),r)};Ee.recover=function(e,t,r,n){return Buffer.from(Ht.ecdsaRecover(Uint8Array.from(t),r,Uint8Array.from(e),n))};Ee.ecdh=function(e,t){return Buffer.from(Ht.ecdh(Uint8Array.from(e),Uint8Array.from(t),{}))};Ee.ecdhUnsafe=function(e,t,r){if(e.length!==33&&e.length!==65)throw new RangeError("public key length is invalid");if(t.length!==32)throw new RangeError("private key length is invalid");return Buffer.from(Ql.ecdhUnsafe(Uint8Array.from(e),Uint8Array.from(t),r))}});var V0=le((Jne,u1)=>{d();h();u1.exports=o(function(t){if(typeof t!="string")throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.slice(0,2)==="0x"},"isHexPrefixed")});var f1=le((eie,l1)=>{d();h();var S3=V0();l1.exports=o(function(t){return typeof t!="string"?t:S3(t)?t.slice(2):t},"stripHexPrefix")});var es=le((iie,p1)=>{"use strict";d();h();var A3=V0(),d1=f1();function ef(e){var t=e;if(typeof t!="string")throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}o(ef,"padToEven");function h1(e){var t=e.toString(16);return"0x"+t}o(h1,"intToHex");function M3(e){var t=h1(e);return new Buffer(ef(t.slice(2)),"hex")}o(M3,"intToBuffer");function E3(e){if(typeof e!="string")throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return Buffer.byteLength(e,"utf8")}o(E3,"getBinarySize");function T3(e,t,r){if(Array.isArray(e)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(Array.isArray(t)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[!!r&&"some"||"every"](function(n){return e.indexOf(n)>=0})}o(T3,"arrayContainsArray");function I3(e){var t=new Buffer(ef(d1(e).replace(/^0+|0+$/g,"")),"hex");return t.toString("utf8")}o(I3,"toUtf8");function _3(e){var t="",r=0,n=e.length;for(e.substring(0,2)==="0x"&&(r=2);r<n;r+=2){var i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t}o(_3,"toAscii");function k3(e){var t=new Buffer(e,"utf8");return"0x"+ef(t.toString("hex")).replace(/^0+|0+$/g,"")}o(k3,"fromUtf8");function P3(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r),i=n.toString(16);t+=i.length<2?"0"+i:i}return"0x"+t}o(P3,"fromAscii");function O3(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if(typeof t!="string")throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var n=[],i=0;i<e.length;i++){var s=e[i][t];if(r&&!s)s="";else if(typeof s!="string")throw new Error("invalid abi");n.push(s)}return n}o(O3,"getKeys");function C3(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}o(C3,"isHexString");p1.exports={arrayContainsArray:T3,intToBuffer:M3,getBinarySize:E3,isHexPrefixed:A3,stripHexPrefix:d1,padToEven:ef,intToHex:h1,fromAscii:P3,fromUtf8:k3,toAscii:_3,toUtf8:I3,getKeys:O3,isHexString:C3}});var tf=le(jn=>{"use strict";d();h();var B3=jn&&jn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jn,"__esModule",{value:!0});jn.getLength=jn.decode=jn.encode=void 0;var K3=B3(uM());function g1(e){if(Array.isArray(e)){for(var t=[],r=0;r<e.length;r++)t.push(g1(e[r]));var n=Buffer.concat(t);return Buffer.concat([m1(n.length,192),n])}else{var i=q0(e);return i.length===1&&i[0]<128?i:Buffer.concat([m1(i.length,128),i])}}o(g1,"encode");jn.encode=g1;function F0(e,t){if(e[0]==="0"&&e[1]==="0")throw new Error("invalid RLP: extra zeros");return parseInt(e,t)}o(F0,"safeParseInt");function m1(e,t){if(e<56)return Buffer.from([e+t]);var r=j0(e),n=r.length/2,i=j0(t+55+n);return Buffer.from(i+r,"hex")}o(m1,"encodeLength");function R3(e,t){if(t===void 0&&(t=!1),!e||e.length===0)return Buffer.from([]);var r=q0(e),n=z0(r);if(t)return n;if(n.remainder.length!==0)throw new Error("invalid remainder");return n.data}o(R3,"decode");jn.decode=R3;function N3(e){if(!e||e.length===0)return Buffer.from([]);var t=q0(e),r=t[0];if(r<=127)return t.length;if(r<=183)return r-127;if(r<=191)return r-182;if(r<=247)return r-191;var n=r-246,i=F0(t.slice(1,n).toString("hex"),16);return n+i}o(N3,"getLength");jn.getLength=N3;function z0(e){var t,r,n,i,s,c=[],f=e[0];if(f<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(f<=183){if(t=f-127,f===128?n=Buffer.from([]):n=e.slice(1,t),t===2&&n[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:n,remainder:e.slice(t)}}else if(f<=191){if(r=f-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=F0(e.slice(1,r).toString("hex"),16),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");if(n=e.slice(r,t+r),n.length<t)throw new Error("invalid RLP: not enough bytes for string");return{data:n,remainder:e.slice(t+r)}}else if(f<=247){for(t=f-191,i=e.slice(1,t);i.length;)s=z0(i),c.push(s.data),i=s.remainder;return{data:c,remainder:e.slice(t)}}else{r=f-246,t=F0(e.slice(1,r).toString("hex"),16);var p=r+t;if(p>e.length)throw new Error("invalid rlp: total length is larger than the data");if(i=e.slice(r,p),i.length===0)throw new Error("invalid rlp, List has a invalid length");for(;i.length;)s=z0(i),c.push(s.data),i=s.remainder;return{data:c,remainder:e.slice(p)}}}o(z0,"_decode");function y1(e){return e.slice(0,2)==="0x"}o(y1,"isHexPrefixed");function D3(e){return typeof e!="string"?e:y1(e)?e.slice(2):e}o(D3,"stripHexPrefix");function j0(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}o(j0,"intToHex");function U3(e){return e.length%2?"0"+e:e}o(U3,"padToEven");function L3(e){var t=j0(e);return Buffer.from(t,"hex")}o(L3,"intToBuffer");function q0(e){if(!Buffer.isBuffer(e)){if(typeof e=="string")return y1(e)?Buffer.from(U3(D3(e)),"hex"):Buffer.from(e);if(typeof e=="number"||typeof e=="bigint")return e?L3(e):Buffer.from([]);if(e==null)return Buffer.from([]);if(e instanceof Uint8Array)return Buffer.from(e);if(K3.default.isBN(e))return Buffer.from(e.toArray());throw new Error("invalid type")}return e}o(q0,"toBuffer")});var b1=le(Et=>{"use strict";d();h();Object.defineProperty(Et,"__esModule",{value:!0});Et.KECCAK256_RLP=Et.KECCAK256_RLP_S=Et.KECCAK256_RLP_ARRAY=Et.KECCAK256_RLP_ARRAY_S=Et.KECCAK256_NULL=Et.KECCAK256_NULL_S=Et.TWO_POW256=Et.MAX_INTEGER=void 0;var v1=Qo(),{Buffer:W0}=ln();Et.MAX_INTEGER=new v1("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16);Et.TWO_POW256=new v1("10000000000000000000000000000000000000000000000000000000000000000",16);Et.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";Et.KECCAK256_NULL=W0.from(Et.KECCAK256_NULL_S,"hex");Et.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";Et.KECCAK256_RLP_ARRAY=W0.from(Et.KECCAK256_RLP_ARRAY_S,"hex");Et.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";Et.KECCAK256_RLP=W0.from(Et.KECCAK256_RLP_S,"hex")});var ia=le(it=>{"use strict";d();h();Object.defineProperty(it,"__esModule",{value:!0});it.baToJSON=it.addHexPrefix=it.toUnsigned=it.fromSigned=it.bufferToHex=it.bufferToInt=it.toBuffer=it.stripZeros=it.unpad=it.setLengthRight=it.setLength=it.setLengthLeft=it.zeros=void 0;var na=es(),H0=Qo();it.zeros=function(e){return Buffer.allocUnsafe(e).fill(0)};it.setLengthLeft=function(e,t,r){r===void 0&&(r=!1);var n=it.zeros(t);return e=it.toBuffer(e),r?e.length<t?(e.copy(n),n):e.slice(0,t):e.length<t?(e.copy(n,t-e.length),n):e.slice(-t)};it.setLength=it.setLengthLeft;it.setLengthRight=function(e,t){return it.setLength(e,t,!0)};it.unpad=function(e){e=na.stripHexPrefix(e);for(var t=e[0];e.length>0&&t.toString()==="0";)e=e.slice(1),t=e[0];return e};it.stripZeros=it.unpad;it.toBuffer=function(e){if(!Buffer.isBuffer(e))if(Array.isArray(e))e=Buffer.from(e);else if(typeof e=="string")if(na.isHexString(e))e=Buffer.from(na.padToEven(na.stripHexPrefix(e)),"hex");else throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: "+e);else if(typeof e=="number")e=na.intToBuffer(e);else if(e==null)e=Buffer.allocUnsafe(0);else if(H0.isBN(e))e=e.toArrayLike(Buffer);else if(e.toArray)e=Buffer.from(e.toArray());else throw new Error("invalid type");return e};it.bufferToInt=function(e){return new H0(it.toBuffer(e)).toNumber()};it.bufferToHex=function(e){return e=it.toBuffer(e),"0x"+e.toString("hex")};it.fromSigned=function(e){return new H0(e).fromTwos(256)};it.toUnsigned=function(e){return Buffer.from(e.toTwos(256).toArray())};it.addHexPrefix=function(e){return typeof e!="string"||na.isHexPrefixed(e)?e:"0x"+e};it.baToJSON=function(e){if(Buffer.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var t=[],r=0;r<e.length;r++)t.push(it.baToJSON(e[r]));return t}}});var w1=le($0=>{"use strict";d();h();Object.defineProperty($0,"__esModule",{value:!0});function V3(e){return function(t){var r=e();return r.update(t),Buffer.from(r.digest())}}o(V3,"createHashFunction");$0.createHashFunction=V3});var A1=le((Sie,S1)=>{d();h();var{Transform:F3}=my();S1.exports=e=>class x1 extends F3{static{o(this,"Keccak")}constructor(r,n,i,s,c){super(c),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._hashBitLength=s,this._options=c,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(c){s=c}i(s)}_flush(r){let n=null;try{this.push(this.digest())}catch(i){n=i}r(n)}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new x1(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var T1=le((Tie,E1)=>{d();h();var{Transform:z3}=my();E1.exports=e=>class M1 extends z3{static{o(this,"Shake")}constructor(r,n,i,s){super(s),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._options=s,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(c){s=c}i(s)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(r);return n!==void 0&&(i=i.toString(n)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new M1(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var _1=le((Pie,I1)=>{d();h();var j3=A1(),q3=T1();I1.exports=function(e){let t=j3(e),r=q3(e);return function(n,i){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new t(1152,448,null,224,i);case"keccak256":return new t(1088,512,null,256,i);case"keccak384":return new t(832,768,null,384,i);case"keccak512":return new t(576,1024,null,512,i);case"sha3-224":return new t(1152,448,6,224,i);case"sha3-256":return new t(1088,512,6,256,i);case"sha3-384":return new t(832,768,6,384,i);case"sha3-512":return new t(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw new Error("Invald algorithm: "+n)}}}});var O1=le(P1=>{d();h();var k1=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];P1.p1600=function(e){for(let t=0;t<24;++t){let r=e[0]^e[10]^e[20]^e[30]^e[40],n=e[1]^e[11]^e[21]^e[31]^e[41],i=e[2]^e[12]^e[22]^e[32]^e[42],s=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],f=e[5]^e[15]^e[25]^e[35]^e[45],p=e[6]^e[16]^e[26]^e[36]^e[46],v=e[7]^e[17]^e[27]^e[37]^e[47],A=e[8]^e[18]^e[28]^e[38]^e[48],T=e[9]^e[19]^e[29]^e[39]^e[49],I=A^(i<<1|s>>>31),P=T^(s<<1|i>>>31),B=e[0]^I,K=e[1]^P,N=e[10]^I,D=e[11]^P,Z=e[20]^I,L=e[21]^P,ne=e[30]^I,ie=e[31]^P,re=e[40]^I,ee=e[41]^P;I=r^(c<<1|f>>>31),P=n^(f<<1|c>>>31);let J=e[2]^I,fe=e[3]^P,S=e[12]^I,a=e[13]^P,l=e[22]^I,g=e[23]^P,y=e[32]^I,b=e[33]^P,M=e[42]^I,_=e[43]^P;I=i^(p<<1|v>>>31),P=s^(v<<1|p>>>31);let w=e[4]^I,u=e[5]^P,x=e[14]^I,F=e[15]^P,z=e[24]^I,q=e[25]^P,Q=e[34]^I,ce=e[35]^P,de=e[44]^I,ft=e[45]^P;I=c^(A<<1|T>>>31),P=f^(T<<1|A>>>31);let pe=e[6]^I,R=e[7]^P,V=e[16]^I,U=e[17]^P,G=e[26]^I,se=e[27]^P,j=e[36]^I,Y=e[37]^P,tt=e[46]^I,ge=e[47]^P;I=p^(r<<1|n>>>31),P=v^(n<<1|r>>>31);let we=e[8]^I,Cr=e[9]^P,Te=e[18]^I,Ae=e[19]^P,kn=e[28]^I,Me=e[29]^P,Je=e[38]^I,ji=e[39]^P,Ye=e[48]^I,Qe=e[49]^P,si=B,Ie=K,_e=D<<4|N>>>28,ai=N<<4|D>>>28,ke=Z<<3|L>>>29,Pe=L<<3|Z>>>29,ci=ie<<9|ne>>>23,Oe=ne<<9|ie>>>23,Ce=re<<18|ee>>>14,ui=ee<<18|re>>>14,Be=J<<1|fe>>>31,Ke=fe<<1|J>>>31,li=a<<12|S>>>20,Re=S<<12|a>>>20,Ne=l<<10|g>>>22,fi=g<<10|l>>>22,De=b<<13|y>>>19,Ue=y<<13|b>>>19,di=M<<2|_>>>30,Le=_<<2|M>>>30,Ve=u<<30|w>>>2,hi=w<<30|u>>>2,Fe=x<<6|F>>>26,ze=F<<6|x>>>26,pi=q<<11|z>>>21,je=z<<11|q>>>21,qe=Q<<15|ce>>>17,mi=ce<<15|Q>>>17,We=ft<<29|de>>>3,He=de<<29|ft>>>3,gi=pe<<28|R>>>4,$e=R<<28|pe>>>4,Ge=U<<23|V>>>9,Hr=V<<23|U>>>9,$r=G<<25|se>>>7,Gr=se<<25|G>>>7,Zr=j<<21|Y>>>11,Jr=Y<<21|j>>>11,Yr=ge<<24|tt>>>8,Qr=tt<<24|ge>>>8,Xr=we<<27|Cr>>>5,en=Cr<<27|we>>>5,tn=Te<<20|Ae>>>12,rn=Ae<<20|Te>>>12,nn=Me<<7|kn>>>25,on=kn<<7|Me>>>25,sn=Je<<8|ji>>>24,an=ji<<8|Je>>>24,cn=Ye<<14|Qe>>>18,un=Qe<<14|Ye>>>18;e[0]=si^~li&pi,e[1]=Ie^~Re&je,e[10]=gi^~tn&ke,e[11]=$e^~rn&Pe,e[20]=Be^~Fe&$r,e[21]=Ke^~ze&Gr,e[30]=Xr^~_e&Ne,e[31]=en^~ai&fi,e[40]=Ve^~Ge&nn,e[41]=hi^~Hr&on,e[2]=li^~pi&Zr,e[3]=Re^~je&Jr,e[12]=tn^~ke&De,e[13]=rn^~Pe&Ue,e[22]=Fe^~$r&sn,e[23]=ze^~Gr&an,e[32]=_e^~Ne&qe,e[33]=ai^~fi&mi,e[42]=Ge^~nn&ci,e[43]=Hr^~on&Oe,e[4]=pi^~Zr&cn,e[5]=je^~Jr&un,e[14]=ke^~De&We,e[15]=Pe^~Ue&He,e[24]=$r^~sn&Ce,e[25]=Gr^~an&ui,e[34]=Ne^~qe&Yr,e[35]=fi^~mi&Qr,e[44]=nn^~ci&di,e[45]=on^~Oe&Le,e[6]=Zr^~cn&si,e[7]=Jr^~un&Ie,e[16]=De^~We&gi,e[17]=Ue^~He&$e,e[26]=sn^~Ce&Be,e[27]=an^~ui&Ke,e[36]=qe^~Yr&Xr,e[37]=mi^~Qr&en,e[46]=ci^~di&Ve,e[47]=Oe^~Le&hi,e[8]=cn^~si&li,e[9]=un^~Ie&Re,e[18]=We^~gi&tn,e[19]=He^~$e&rn,e[28]=Ce^~Be&Fe,e[29]=ui^~Ke&ze,e[38]=Yr^~Xr&_e,e[39]=Qr^~en&ai,e[48]=di^~Ve&Ge,e[49]=Le^~hi&Hr,e[0]^=k1[t*2],e[1]^=k1[t*2+1]}}});var B1=le((Nie,C1)=>{d();h();var rf=O1();function oa(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}o(oa,"Keccak");oa.prototype.initialize=function(e,t){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1};oa.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(rf.p1600(this.state),this.count=0)};oa.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<8*(this.count%4),e&128&&this.count===this.blockSize-1&&rf.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),rf.p1600(this.state),this.count=0,this.squeezing=!0};oa.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);let t=Buffer.alloc(e);for(let r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(rf.p1600(this.state),this.count=0);return t};oa.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing};C1.exports=oa});var R1=le((Vie,K1)=>{d();h();K1.exports=_1()(B1())});var N1=le(sa=>{"use strict";d();h();Object.defineProperty(sa,"__esModule",{value:!0});var nf=w1(),of=R1();sa.keccak224=nf.createHashFunction(function(){return of("keccak224")});sa.keccak256=nf.createHashFunction(function(){return of("keccak256")});sa.keccak384=nf.createHashFunction(function(){return of("keccak384")});sa.keccak512=nf.createHashFunction(function(){return of("keccak512")})});var cf=le(dr=>{"use strict";d();h();Object.defineProperty(dr,"__esModule",{value:!0});dr.rlphash=dr.ripemd160=dr.sha256=dr.keccak256=dr.keccak=void 0;var af=N1(),W3=af.keccak224,H3=af.keccak384,$3=af.keccak256,G3=af.keccak512,D1=dM(),Z3=es(),J3=tf(),sf=ia();dr.keccak=function(e,t){switch(t===void 0&&(t=256),typeof e=="string"&&!Z3.isHexString(e)?e=Buffer.from(e,"utf8"):e=sf.toBuffer(e),t||(t=256),t){case 224:return W3(e);case 256:return $3(e);case 384:return H3(e);case 512:return G3(e);default:throw new Error("Invald algorithm: keccak"+t)}};dr.keccak256=function(e){return dr.keccak(e)};dr.sha256=function(e){return e=sf.toBuffer(e),D1("sha256").update(e).digest()};dr.ripemd160=function(e,t){e=sf.toBuffer(e);var r=D1("rmd160").update(e).digest();return t===!0?sf.setLength(r,32):r};dr.rlphash=function(e){return dr.keccak(J3.encode(e))}});var U1=le(rt=>{"use strict";d();h();Object.defineProperty(rt,"__esModule",{value:!0});rt.importPublic=rt.privateToPublic=rt.privateToAddress=rt.publicToAddress=rt.pubToAddress=rt.isValidPublic=rt.isValidPrivate=rt.isPrecompiled=rt.generateAddress2=rt.generateAddress=rt.isValidChecksumAddress=rt.toChecksumAddress=rt.isZeroAddress=rt.isValidAddress=rt.zeroAddress=void 0;var G0=Yy(),Y3=es(),aa=Xl(),Q3=Qo(),xn=ia(),ca=cf();rt.zeroAddress=function(){var e=20,t=xn.zeros(e);return xn.bufferToHex(t)};rt.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)};rt.isZeroAddress=function(e){var t=rt.zeroAddress();return t===xn.addHexPrefix(e)};rt.toChecksumAddress=function(e,t){e=Y3.stripHexPrefix(e).toLowerCase();for(var r=t!==void 0?t.toString()+"0x":"",n=ca.keccak(r+e).toString("hex"),i="0x",s=0;s<e.length;s++)parseInt(n[s],16)>=8?i+=e[s].toUpperCase():i+=e[s];return i};rt.isValidChecksumAddress=function(e,t){return rt.isValidAddress(e)&&rt.toChecksumAddress(e,t)===e};rt.generateAddress=function(e,t){e=xn.toBuffer(e);var r=new Q3(t);return r.isZero()?ca.rlphash([e,null]).slice(-20):ca.rlphash([e,Buffer.from(r.toArray())]).slice(-20)};rt.generateAddress2=function(e,t,r){var n=xn.toBuffer(e),i=xn.toBuffer(t),s=xn.toBuffer(r);G0(n.length===20),G0(i.length===32);var c=ca.keccak256(Buffer.concat([Buffer.from("ff","hex"),n,i,ca.keccak256(s)]));return c.slice(-20)};rt.isPrecompiled=function(e){var t=xn.unpad(e);return t.length===1&&t[0]>=1&&t[0]<=8};rt.isValidPrivate=function(e){return aa.privateKeyVerify(e)};rt.isValidPublic=function(e,t){return t===void 0&&(t=!1),e.length===64?aa.publicKeyVerify(Buffer.concat([Buffer.from([4]),e])):t?aa.publicKeyVerify(e):!1};rt.pubToAddress=function(e,t){return t===void 0&&(t=!1),e=xn.toBuffer(e),t&&e.length!==64&&(e=aa.publicKeyConvert(e,!1).slice(1)),G0(e.length===64),ca.keccak(e).slice(-20)};rt.publicToAddress=rt.pubToAddress;rt.privateToAddress=function(e){return rt.publicToAddress(rt.privateToPublic(e))};rt.privateToPublic=function(e){return e=xn.toBuffer(e),aa.publicKeyCreate(e,!1).slice(1)};rt.importPublic=function(e){return e=xn.toBuffer(e),e.length!==64&&(e=aa.publicKeyConvert(e,!1).slice(1)),e}});var L1=le(hr=>{"use strict";d();h();Object.defineProperty(hr,"__esModule",{value:!0});hr.hashPersonalMessage=hr.isValidSignature=hr.fromRpcSig=hr.toRpcSig=hr.ecrecover=hr.ecsign=void 0;var Z0=Xl(),uf=Qo(),ts=ia(),X3=cf();hr.ecsign=function(e,t,r){var n=Z0.sign(e,t),i=n.recovery,s={r:n.signature.slice(0,32),s:n.signature.slice(32,64),v:r?i+(r*2+35):i+27};return s};hr.ecrecover=function(e,t,r,n,i){var s=Buffer.concat([ts.setLength(r,32),ts.setLength(n,32)],64),c=J0(t,i);if(!Y0(c))throw new Error("Invalid signature v value");var f=Z0.recover(e,s,c);return Z0.publicKeyConvert(f,!1).slice(1)};hr.toRpcSig=function(e,t,r,n){var i=J0(e,n);if(!Y0(i))throw new Error("Invalid signature v value");return ts.bufferToHex(Buffer.concat([ts.setLengthLeft(t,32),ts.setLengthLeft(r,32),ts.toBuffer(e)]))};hr.fromRpcSig=function(e){var t=ts.toBuffer(e);if(t.length!==65)throw new Error("Invalid signature length");var r=t[64];return r<27&&(r+=27),{v:r,r:t.slice(0,32),s:t.slice(32,64)}};hr.isValidSignature=function(e,t,r,n,i){n===void 0&&(n=!0);var s=new uf("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),c=new uf("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(t.length!==32||r.length!==32||!Y0(J0(e,i)))return!1;var f=new uf(t),p=new uf(r);return!(f.isZero()||f.gt(c)||p.isZero()||p.gt(c)||n&&p.cmp(s)===1)};hr.hashPersonalMessage=function(e){var t=Buffer.from(`Ethereum Signed Message:
`+e.length.toString(),"utf-8");return X3.keccak(Buffer.concat([t,e]))};function J0(e,t){return t?e-(2*t+35):e-27}o(J0,"calculateSigRecovery");function Y0(e){return e===0||e===1}o(Y0,"isValidSigRecovery")});var z1=le(ff=>{"use strict";d();h();Object.defineProperty(ff,"__esModule",{value:!0});ff.defineProperties=void 0;var V1=Yy(),e6=es(),F1=tf(),lf=ia();ff.defineProperties=function(e,t,r){if(e.raw=[],e._fields=[],e.toJSON=function(i){if(i===void 0&&(i=!1),i){var s={};return e._fields.forEach(function(c){s[c]="0x"+e[c].toString("hex")}),s}return lf.baToJSON(e.raw)},e.serialize=o(function(){return F1.encode(e.raw)},"serialize"),t.forEach(function(i,s){e._fields.push(i.name);function c(){return e.raw[s]}o(c,"getter");function f(p){p=lf.toBuffer(p),p.toString("hex")==="00"&&!i.allowZero&&(p=Buffer.allocUnsafe(0)),i.allowLess&&i.length?(p=lf.stripZeros(p),V1(i.length>=p.length,"The field "+i.name+" must not have more "+i.length+" bytes")):!(i.allowZero&&p.length===0)&&i.length&&V1(i.length===p.length,"The field "+i.name+" must have byte length of "+i.length),e.raw[s]=p}o(f,"setter"),Object.defineProperty(e,i.name,{enumerable:!0,configurable:!0,get:c,set:f}),i.default&&(e[i.name]=i.default),i.alias&&Object.defineProperty(e,i.alias,{enumerable:!1,configurable:!0,set:f,get:c})}),r)if(typeof r=="string"&&(r=Buffer.from(e6.stripHexPrefix(r),"hex")),Buffer.isBuffer(r)&&(r=F1.decode(r)),Array.isArray(r)){if(r.length>e._fields.length)throw new Error("wrong number of fields in data");r.forEach(function(i,s){e[e._fields[s]]=lf.toBuffer(i)})}else if(typeof r=="object"){var n=Object.keys(r);t.forEach(function(i){n.indexOf(i.name)!==-1&&(e[i.name]=r[i.name]),n.indexOf(i.alias)!==-1&&(e[i.alias]=r[i.alias])})}else throw new Error("invalid data")}});var gc=le(kt=>{"use strict";d();h();var t6=kt&&kt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:o(function(){return t[r]},"get")})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ua=kt&&kt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&t6(t,e,r)};Object.defineProperty(kt,"__esModule",{value:!0});kt.secp256k1=kt.rlp=kt.BN=void 0;var r6=Xl();kt.secp256k1=r6;var n6=es(),i6=Qo();kt.BN=i6;var o6=tf();kt.rlp=o6;Object.assign(kt,n6);ua(b1(),kt);ua(U1(),kt);ua(cf(),kt);ua(L1(),kt);ua(ia(),kt);ua(z1(),kt)});var yc=le(pr=>{"use strict";d();h();Object.defineProperty(pr,"__esModule",{value:!0});pr.normalize=pr.recoverPublicKey=pr.concatSig=pr.legacyToBuffer=pr.isNullish=pr.padWithZeroes=void 0;var zr=gc(),Q0=es();function X0(e,t){if(e!==""&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}o(X0,"padWithZeroes");pr.padWithZeroes=X0;function s6(e){return e==null}o(s6,"isNullish");pr.isNullish=s6;function a6(e){return typeof e=="string"&&!Q0.isHexString(e)?Buffer.from(e):zr.toBuffer(e)}o(a6,"legacyToBuffer");pr.legacyToBuffer=a6;function c6(e,t,r){let n=zr.fromSigned(t),i=zr.fromSigned(r),s=zr.bufferToInt(e),c=X0(zr.toUnsigned(n).toString("hex"),64),f=X0(zr.toUnsigned(i).toString("hex"),64),p=Q0.stripHexPrefix(Q0.intToHex(s));return zr.addHexPrefix(c.concat(f,p))}o(c6,"concatSig");pr.concatSig=c6;function u6(e,t){let r=zr.fromRpcSig(t);return zr.ecrecover(e,r.v,r.r,r.s)}o(u6,"recoverPublicKey");pr.recoverPublicKey=u6;function l6(e){if(e){if(typeof e=="number"){let t=zr.toBuffer(e);e=zr.bufferToHex(t)}if(typeof e!="string"){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return zr.addHexPrefix(e.toLowerCase())}}o(l6,"normalize");pr.normalize=l6});var q1=le(ho=>{"use strict";d();h();Object.defineProperty(ho,"__esModule",{value:!0});ho.extractPublicKey=ho.recoverPersonalSignature=ho.personalSign=void 0;var la=gc(),qn=yc();function f6({privateKey:e,data:t}){if(qn.isNullish(t))throw new Error("Missing data parameter");if(qn.isNullish(e))throw new Error("Missing privateKey parameter");let r=qn.legacyToBuffer(t),n=la.hashPersonalMessage(r),i=la.ecsign(n,e);return qn.concatSig(la.toBuffer(i.v),i.r,i.s)}o(f6,"personalSign");ho.personalSign=f6;function d6({data:e,signature:t}){if(qn.isNullish(e))throw new Error("Missing data parameter");if(qn.isNullish(t))throw new Error("Missing signature parameter");let r=j1(e,t),n=la.publicToAddress(r);return la.bufferToHex(n)}o(d6,"recoverPersonalSignature");ho.recoverPersonalSignature=d6;function h6({data:e,signature:t}){if(qn.isNullish(e))throw new Error("Missing data parameter");if(qn.isNullish(t))throw new Error("Missing signature parameter");return`0x${j1(e,t).toString("hex")}`}o(h6,"extractPublicKey");ho.extractPublicKey=h6;function j1(e,t){let r=la.hashPersonalMessage(qn.legacyToBuffer(e));return qn.recoverPublicKey(r,t)}o(j1,"getPublicKeyFor")});var H1=le((W1,em)=>{d();h();(function(e,t){"use strict";function r(S,a){if(!S)throw new Error(a||"Assertion failed")}o(r,"assert");function n(S,a){S.super_=a;var l=o(function(){},"TempCtor");l.prototype=a.prototype,S.prototype=new l,S.prototype.constructor=S}o(n,"inherits");function i(S,a,l){if(i.isBN(S))return S;this.negative=0,this.words=null,this.length=0,this.red=null,S!==null&&((a==="le"||a==="be")&&(l=a,a=10),this._init(S||0,a||10,l||"be"))}o(i,"BN"),typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var s;try{typeof self<"u"&&typeof self.Buffer<"u"?s=self.Buffer:s=sy().Buffer}catch{}i.isBN=o(function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},"isBN"),i.max=o(function(a,l){return a.cmp(l)>0?a:l},"max"),i.min=o(function(a,l){return a.cmp(l)<0?a:l},"min"),i.prototype._init=o(function(a,l,g){if(typeof a=="number")return this._initNumber(a,l,g);if(typeof a=="object")return this._initArray(a,l,g);l==="hex"&&(l=16),r(l===(l|0)&&l>=2&&l<=36),a=a.toString().replace(/\s+/g,"");var y=0;a[0]==="-"&&(y++,this.negative=1),y<a.length&&(l===16?this._parseHex(a,y,g):(this._parseBase(a,l,y),g==="le"&&this._initArray(this.toArray(),l,g)))},"init"),i.prototype._initNumber=o(function(a,l,g){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(r(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),l,g)},"_initNumber"),i.prototype._initArray=o(function(a,l,g){if(r(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var b,M,_=0;if(g==="be")for(y=a.length-1,b=0;y>=0;y-=3)M=a[y]|a[y-1]<<8|a[y-2]<<16,this.words[b]|=M<<_&67108863,this.words[b+1]=M>>>26-_&67108863,_+=24,_>=26&&(_-=26,b++);else if(g==="le")for(y=0,b=0;y<a.length;y+=3)M=a[y]|a[y+1]<<8|a[y+2]<<16,this.words[b]|=M<<_&67108863,this.words[b+1]=M>>>26-_&67108863,_+=24,_>=26&&(_-=26,b++);return this.strip()},"_initArray");function c(S,a){var l=S.charCodeAt(a);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}o(c,"parseHex4Bits");function f(S,a,l){var g=c(S,l);return l-1>=a&&(g|=c(S,l-1)<<4),g}o(f,"parseHexByte"),i.prototype._parseHex=o(function(a,l,g){this.length=Math.ceil((a.length-l)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var b=0,M=0,_;if(g==="be")for(y=a.length-1;y>=l;y-=2)_=f(a,l,y)<<b,this.words[M]|=_&67108863,b>=18?(b-=18,M+=1,this.words[M]|=_>>>26):b+=8;else{var w=a.length-l;for(y=w%2===0?l+1:l;y<a.length;y+=2)_=f(a,l,y)<<b,this.words[M]|=_&67108863,b>=18?(b-=18,M+=1,this.words[M]|=_>>>26):b+=8}this.strip()},"_parseHex");function p(S,a,l,g){for(var y=0,b=Math.min(S.length,l),M=a;M<b;M++){var _=S.charCodeAt(M)-48;y*=g,_>=49?y+=_-49+10:_>=17?y+=_-17+10:y+=_}return y}o(p,"parseBase"),i.prototype._parseBase=o(function(a,l,g){this.words=[0],this.length=1;for(var y=0,b=1;b<=67108863;b*=l)y++;y--,b=b/l|0;for(var M=a.length-g,_=M%y,w=Math.min(M,M-_)+g,u=0,x=g;x<w;x+=y)u=p(a,x,x+y,l),this.imuln(b),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(_!==0){var F=1;for(u=p(a,x,a.length,l),x=0;x<_;x++)F*=l;this.imuln(F),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},"_parseBase"),i.prototype.copy=o(function(a){a.words=new Array(this.length);for(var l=0;l<this.length;l++)a.words[l]=this.words[l];a.length=this.length,a.negative=this.negative,a.red=this.red},"copy"),i.prototype.clone=o(function(){var a=new i(null);return this.copy(a),a},"clone"),i.prototype._expand=o(function(a){for(;this.length<a;)this.words[this.length++]=0;return this},"_expand"),i.prototype.strip=o(function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},"strip"),i.prototype._normSign=o(function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},"_normSign"),i.prototype.inspect=o(function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"},"inspect");var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],T=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=o(function(a,l){a=a||10,l=l|0||1;var g;if(a===16||a==="hex"){g="";for(var y=0,b=0,M=0;M<this.length;M++){var _=this.words[M],w=((_<<y|b)&16777215).toString(16);b=_>>>24-y&16777215,b!==0||M!==this.length-1?g=v[6-w.length]+w+g:g=w+g,y+=2,y>=26&&(y-=26,M--)}for(b!==0&&(g=b.toString(16)+g);g.length%l!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(a===(a|0)&&a>=2&&a<=36){var u=A[a],x=T[a];g="";var F=this.clone();for(F.negative=0;!F.isZero();){var z=F.modn(x).toString(a);F=F.idivn(x),F.isZero()?g=z+g:g=v[u-z.length]+z+g}for(this.isZero()&&(g="0"+g);g.length%l!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}r(!1,"Base should be between 2 and 36")},"toString"),i.prototype.toNumber=o(function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},"toNumber"),i.prototype.toJSON=o(function(){return this.toString(16)},"toJSON"),i.prototype.toBuffer=o(function(a,l){return r(typeof s<"u"),this.toArrayLike(s,a,l)},"toBuffer"),i.prototype.toArray=o(function(a,l){return this.toArrayLike(Array,a,l)},"toArray"),i.prototype.toArrayLike=o(function(a,l,g){var y=this.byteLength(),b=g||Math.max(1,y);r(y<=b,"byte array longer than desired length"),r(b>0,"Requested array length <= 0"),this.strip();var M=l==="le",_=new a(b),w,u,x=this.clone();if(M){for(u=0;!x.isZero();u++)w=x.andln(255),x.iushrn(8),_[u]=w;for(;u<b;u++)_[u]=0}else{for(u=0;u<b-y;u++)_[u]=0;for(u=0;!x.isZero();u++)w=x.andln(255),x.iushrn(8),_[b-u-1]=w}return _},"toArrayLike"),Math.clz32?i.prototype._countBits=o(function(a){return 32-Math.clz32(a)},"_countBits"):i.prototype._countBits=o(function(a){var l=a,g=0;return l>=4096&&(g+=13,l>>>=13),l>=64&&(g+=7,l>>>=7),l>=8&&(g+=4,l>>>=4),l>=2&&(g+=2,l>>>=2),g+l},"_countBits"),i.prototype._zeroBits=o(function(a){if(a===0)return 26;var l=a,g=0;return l&8191||(g+=13,l>>>=13),l&127||(g+=7,l>>>=7),l&15||(g+=4,l>>>=4),l&3||(g+=2,l>>>=2),l&1||g++,g},"_zeroBits"),i.prototype.bitLength=o(function(){var a=this.words[this.length-1],l=this._countBits(a);return(this.length-1)*26+l},"bitLength");function I(S){for(var a=new Array(S.bitLength()),l=0;l<a.length;l++){var g=l/26|0,y=l%26;a[l]=(S.words[g]&1<<y)>>>y}return a}o(I,"toBitArray"),i.prototype.zeroBits=o(function(){if(this.isZero())return 0;for(var a=0,l=0;l<this.length;l++){var g=this._zeroBits(this.words[l]);if(a+=g,g!==26)break}return a},"zeroBits"),i.prototype.byteLength=o(function(){return Math.ceil(this.bitLength()/8)},"byteLength"),i.prototype.toTwos=o(function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},"toTwos"),i.prototype.fromTwos=o(function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},"fromTwos"),i.prototype.isNeg=o(function(){return this.negative!==0},"isNeg"),i.prototype.neg=o(function(){return this.clone().ineg()},"neg"),i.prototype.ineg=o(function(){return this.isZero()||(this.negative^=1),this},"ineg"),i.prototype.iuor=o(function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var l=0;l<a.length;l++)this.words[l]=this.words[l]|a.words[l];return this.strip()},"iuor"),i.prototype.ior=o(function(a){return r((this.negative|a.negative)===0),this.iuor(a)},"ior"),i.prototype.or=o(function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},"or"),i.prototype.uor=o(function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},"uor"),i.prototype.iuand=o(function(a){var l;this.length>a.length?l=a:l=this;for(var g=0;g<l.length;g++)this.words[g]=this.words[g]&a.words[g];return this.length=l.length,this.strip()},"iuand"),i.prototype.iand=o(function(a){return r((this.negative|a.negative)===0),this.iuand(a)},"iand"),i.prototype.and=o(function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},"and"),i.prototype.uand=o(function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},"uand"),i.prototype.iuxor=o(function(a){var l,g;this.length>a.length?(l=this,g=a):(l=a,g=this);for(var y=0;y<g.length;y++)this.words[y]=l.words[y]^g.words[y];if(this!==l)for(;y<l.length;y++)this.words[y]=l.words[y];return this.length=l.length,this.strip()},"iuxor"),i.prototype.ixor=o(function(a){return r((this.negative|a.negative)===0),this.iuxor(a)},"ixor"),i.prototype.xor=o(function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},"xor"),i.prototype.uxor=o(function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},"uxor"),i.prototype.inotn=o(function(a){r(typeof a=="number"&&a>=0);var l=Math.ceil(a/26)|0,g=a%26;this._expand(l),g>0&&l--;for(var y=0;y<l;y++)this.words[y]=~this.words[y]&67108863;return g>0&&(this.words[y]=~this.words[y]&67108863>>26-g),this.strip()},"inotn"),i.prototype.notn=o(function(a){return this.clone().inotn(a)},"notn"),i.prototype.setn=o(function(a,l){r(typeof a=="number"&&a>=0);var g=a/26|0,y=a%26;return this._expand(g+1),l?this.words[g]=this.words[g]|1<<y:this.words[g]=this.words[g]&~(1<<y),this.strip()},"setn"),i.prototype.iadd=o(function(a){var l;if(this.negative!==0&&a.negative===0)return this.negative=0,l=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,l=this.isub(a),a.negative=1,l._normSign();var g,y;this.length>a.length?(g=this,y=a):(g=a,y=this);for(var b=0,M=0;M<y.length;M++)l=(g.words[M]|0)+(y.words[M]|0)+b,this.words[M]=l&67108863,b=l>>>26;for(;b!==0&&M<g.length;M++)l=(g.words[M]|0)+b,this.words[M]=l&67108863,b=l>>>26;if(this.length=g.length,b!==0)this.words[this.length]=b,this.length++;else if(g!==this)for(;M<g.length;M++)this.words[M]=g.words[M];return this},"iadd"),i.prototype.add=o(function(a){var l;return a.negative!==0&&this.negative===0?(a.negative=0,l=this.sub(a),a.negative^=1,l):a.negative===0&&this.negative!==0?(this.negative=0,l=a.sub(this),this.negative=1,l):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},"add"),i.prototype.isub=o(function(a){if(a.negative!==0){a.negative=0;var l=this.iadd(a);return a.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var g=this.cmp(a);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,b;g>0?(y=this,b=a):(y=a,b=this);for(var M=0,_=0;_<b.length;_++)l=(y.words[_]|0)-(b.words[_]|0)+M,M=l>>26,this.words[_]=l&67108863;for(;M!==0&&_<y.length;_++)l=(y.words[_]|0)+M,M=l>>26,this.words[_]=l&67108863;if(M===0&&_<y.length&&y!==this)for(;_<y.length;_++)this.words[_]=y.words[_];return this.length=Math.max(this.length,_),y!==this&&(this.negative=1),this.strip()},"isub"),i.prototype.sub=o(function(a){return this.clone().isub(a)},"sub");function P(S,a,l){l.negative=a.negative^S.negative;var g=S.length+a.length|0;l.length=g,g=g-1|0;var y=S.words[0]|0,b=a.words[0]|0,M=y*b,_=M&67108863,w=M/67108864|0;l.words[0]=_;for(var u=1;u<g;u++){for(var x=w>>>26,F=w&67108863,z=Math.min(u,a.length-1),q=Math.max(0,u-S.length+1);q<=z;q++){var Q=u-q|0;y=S.words[Q]|0,b=a.words[q]|0,M=y*b+F,x+=M/67108864|0,F=M&67108863}l.words[u]=F|0,w=x|0}return w!==0?l.words[u]=w|0:l.length--,l.strip()}o(P,"smallMulTo");var B=o(function(a,l,g){var y=a.words,b=l.words,M=g.words,_=0,w,u,x,F=y[0]|0,z=F&8191,q=F>>>13,Q=y[1]|0,ce=Q&8191,de=Q>>>13,ft=y[2]|0,pe=ft&8191,R=ft>>>13,V=y[3]|0,U=V&8191,G=V>>>13,se=y[4]|0,j=se&8191,Y=se>>>13,tt=y[5]|0,ge=tt&8191,we=tt>>>13,Cr=y[6]|0,Te=Cr&8191,Ae=Cr>>>13,kn=y[7]|0,Me=kn&8191,Je=kn>>>13,ji=y[8]|0,Ye=ji&8191,Qe=ji>>>13,si=y[9]|0,Ie=si&8191,_e=si>>>13,ai=b[0]|0,ke=ai&8191,Pe=ai>>>13,ci=b[1]|0,Oe=ci&8191,Ce=ci>>>13,ui=b[2]|0,Be=ui&8191,Ke=ui>>>13,li=b[3]|0,Re=li&8191,Ne=li>>>13,fi=b[4]|0,De=fi&8191,Ue=fi>>>13,di=b[5]|0,Le=di&8191,Ve=di>>>13,hi=b[6]|0,Fe=hi&8191,ze=hi>>>13,pi=b[7]|0,je=pi&8191,qe=pi>>>13,mi=b[8]|0,We=mi&8191,He=mi>>>13,gi=b[9]|0,$e=gi&8191,Ge=gi>>>13;g.negative=a.negative^l.negative,g.length=19,w=Math.imul(z,ke),u=Math.imul(z,Pe),u=u+Math.imul(q,ke)|0,x=Math.imul(q,Pe);var Hr=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,w=Math.imul(ce,ke),u=Math.imul(ce,Pe),u=u+Math.imul(de,ke)|0,x=Math.imul(de,Pe),w=w+Math.imul(z,Oe)|0,u=u+Math.imul(z,Ce)|0,u=u+Math.imul(q,Oe)|0,x=x+Math.imul(q,Ce)|0;var $r=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+($r>>>26)|0,$r&=67108863,w=Math.imul(pe,ke),u=Math.imul(pe,Pe),u=u+Math.imul(R,ke)|0,x=Math.imul(R,Pe),w=w+Math.imul(ce,Oe)|0,u=u+Math.imul(ce,Ce)|0,u=u+Math.imul(de,Oe)|0,x=x+Math.imul(de,Ce)|0,w=w+Math.imul(z,Be)|0,u=u+Math.imul(z,Ke)|0,u=u+Math.imul(q,Be)|0,x=x+Math.imul(q,Ke)|0;var Gr=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,w=Math.imul(U,ke),u=Math.imul(U,Pe),u=u+Math.imul(G,ke)|0,x=Math.imul(G,Pe),w=w+Math.imul(pe,Oe)|0,u=u+Math.imul(pe,Ce)|0,u=u+Math.imul(R,Oe)|0,x=x+Math.imul(R,Ce)|0,w=w+Math.imul(ce,Be)|0,u=u+Math.imul(ce,Ke)|0,u=u+Math.imul(de,Be)|0,x=x+Math.imul(de,Ke)|0,w=w+Math.imul(z,Re)|0,u=u+Math.imul(z,Ne)|0,u=u+Math.imul(q,Re)|0,x=x+Math.imul(q,Ne)|0;var Zr=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,w=Math.imul(j,ke),u=Math.imul(j,Pe),u=u+Math.imul(Y,ke)|0,x=Math.imul(Y,Pe),w=w+Math.imul(U,Oe)|0,u=u+Math.imul(U,Ce)|0,u=u+Math.imul(G,Oe)|0,x=x+Math.imul(G,Ce)|0,w=w+Math.imul(pe,Be)|0,u=u+Math.imul(pe,Ke)|0,u=u+Math.imul(R,Be)|0,x=x+Math.imul(R,Ke)|0,w=w+Math.imul(ce,Re)|0,u=u+Math.imul(ce,Ne)|0,u=u+Math.imul(de,Re)|0,x=x+Math.imul(de,Ne)|0,w=w+Math.imul(z,De)|0,u=u+Math.imul(z,Ue)|0,u=u+Math.imul(q,De)|0,x=x+Math.imul(q,Ue)|0;var Jr=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,w=Math.imul(ge,ke),u=Math.imul(ge,Pe),u=u+Math.imul(we,ke)|0,x=Math.imul(we,Pe),w=w+Math.imul(j,Oe)|0,u=u+Math.imul(j,Ce)|0,u=u+Math.imul(Y,Oe)|0,x=x+Math.imul(Y,Ce)|0,w=w+Math.imul(U,Be)|0,u=u+Math.imul(U,Ke)|0,u=u+Math.imul(G,Be)|0,x=x+Math.imul(G,Ke)|0,w=w+Math.imul(pe,Re)|0,u=u+Math.imul(pe,Ne)|0,u=u+Math.imul(R,Re)|0,x=x+Math.imul(R,Ne)|0,w=w+Math.imul(ce,De)|0,u=u+Math.imul(ce,Ue)|0,u=u+Math.imul(de,De)|0,x=x+Math.imul(de,Ue)|0,w=w+Math.imul(z,Le)|0,u=u+Math.imul(z,Ve)|0,u=u+Math.imul(q,Le)|0,x=x+Math.imul(q,Ve)|0;var Yr=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,w=Math.imul(Te,ke),u=Math.imul(Te,Pe),u=u+Math.imul(Ae,ke)|0,x=Math.imul(Ae,Pe),w=w+Math.imul(ge,Oe)|0,u=u+Math.imul(ge,Ce)|0,u=u+Math.imul(we,Oe)|0,x=x+Math.imul(we,Ce)|0,w=w+Math.imul(j,Be)|0,u=u+Math.imul(j,Ke)|0,u=u+Math.imul(Y,Be)|0,x=x+Math.imul(Y,Ke)|0,w=w+Math.imul(U,Re)|0,u=u+Math.imul(U,Ne)|0,u=u+Math.imul(G,Re)|0,x=x+Math.imul(G,Ne)|0,w=w+Math.imul(pe,De)|0,u=u+Math.imul(pe,Ue)|0,u=u+Math.imul(R,De)|0,x=x+Math.imul(R,Ue)|0,w=w+Math.imul(ce,Le)|0,u=u+Math.imul(ce,Ve)|0,u=u+Math.imul(de,Le)|0,x=x+Math.imul(de,Ve)|0,w=w+Math.imul(z,Fe)|0,u=u+Math.imul(z,ze)|0,u=u+Math.imul(q,Fe)|0,x=x+Math.imul(q,ze)|0;var Qr=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,w=Math.imul(Me,ke),u=Math.imul(Me,Pe),u=u+Math.imul(Je,ke)|0,x=Math.imul(Je,Pe),w=w+Math.imul(Te,Oe)|0,u=u+Math.imul(Te,Ce)|0,u=u+Math.imul(Ae,Oe)|0,x=x+Math.imul(Ae,Ce)|0,w=w+Math.imul(ge,Be)|0,u=u+Math.imul(ge,Ke)|0,u=u+Math.imul(we,Be)|0,x=x+Math.imul(we,Ke)|0,w=w+Math.imul(j,Re)|0,u=u+Math.imul(j,Ne)|0,u=u+Math.imul(Y,Re)|0,x=x+Math.imul(Y,Ne)|0,w=w+Math.imul(U,De)|0,u=u+Math.imul(U,Ue)|0,u=u+Math.imul(G,De)|0,x=x+Math.imul(G,Ue)|0,w=w+Math.imul(pe,Le)|0,u=u+Math.imul(pe,Ve)|0,u=u+Math.imul(R,Le)|0,x=x+Math.imul(R,Ve)|0,w=w+Math.imul(ce,Fe)|0,u=u+Math.imul(ce,ze)|0,u=u+Math.imul(de,Fe)|0,x=x+Math.imul(de,ze)|0,w=w+Math.imul(z,je)|0,u=u+Math.imul(z,qe)|0,u=u+Math.imul(q,je)|0,x=x+Math.imul(q,qe)|0;var Xr=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,w=Math.imul(Ye,ke),u=Math.imul(Ye,Pe),u=u+Math.imul(Qe,ke)|0,x=Math.imul(Qe,Pe),w=w+Math.imul(Me,Oe)|0,u=u+Math.imul(Me,Ce)|0,u=u+Math.imul(Je,Oe)|0,x=x+Math.imul(Je,Ce)|0,w=w+Math.imul(Te,Be)|0,u=u+Math.imul(Te,Ke)|0,u=u+Math.imul(Ae,Be)|0,x=x+Math.imul(Ae,Ke)|0,w=w+Math.imul(ge,Re)|0,u=u+Math.imul(ge,Ne)|0,u=u+Math.imul(we,Re)|0,x=x+Math.imul(we,Ne)|0,w=w+Math.imul(j,De)|0,u=u+Math.imul(j,Ue)|0,u=u+Math.imul(Y,De)|0,x=x+Math.imul(Y,Ue)|0,w=w+Math.imul(U,Le)|0,u=u+Math.imul(U,Ve)|0,u=u+Math.imul(G,Le)|0,x=x+Math.imul(G,Ve)|0,w=w+Math.imul(pe,Fe)|0,u=u+Math.imul(pe,ze)|0,u=u+Math.imul(R,Fe)|0,x=x+Math.imul(R,ze)|0,w=w+Math.imul(ce,je)|0,u=u+Math.imul(ce,qe)|0,u=u+Math.imul(de,je)|0,x=x+Math.imul(de,qe)|0,w=w+Math.imul(z,We)|0,u=u+Math.imul(z,He)|0,u=u+Math.imul(q,We)|0,x=x+Math.imul(q,He)|0;var en=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(en>>>26)|0,en&=67108863,w=Math.imul(Ie,ke),u=Math.imul(Ie,Pe),u=u+Math.imul(_e,ke)|0,x=Math.imul(_e,Pe),w=w+Math.imul(Ye,Oe)|0,u=u+Math.imul(Ye,Ce)|0,u=u+Math.imul(Qe,Oe)|0,x=x+Math.imul(Qe,Ce)|0,w=w+Math.imul(Me,Be)|0,u=u+Math.imul(Me,Ke)|0,u=u+Math.imul(Je,Be)|0,x=x+Math.imul(Je,Ke)|0,w=w+Math.imul(Te,Re)|0,u=u+Math.imul(Te,Ne)|0,u=u+Math.imul(Ae,Re)|0,x=x+Math.imul(Ae,Ne)|0,w=w+Math.imul(ge,De)|0,u=u+Math.imul(ge,Ue)|0,u=u+Math.imul(we,De)|0,x=x+Math.imul(we,Ue)|0,w=w+Math.imul(j,Le)|0,u=u+Math.imul(j,Ve)|0,u=u+Math.imul(Y,Le)|0,x=x+Math.imul(Y,Ve)|0,w=w+Math.imul(U,Fe)|0,u=u+Math.imul(U,ze)|0,u=u+Math.imul(G,Fe)|0,x=x+Math.imul(G,ze)|0,w=w+Math.imul(pe,je)|0,u=u+Math.imul(pe,qe)|0,u=u+Math.imul(R,je)|0,x=x+Math.imul(R,qe)|0,w=w+Math.imul(ce,We)|0,u=u+Math.imul(ce,He)|0,u=u+Math.imul(de,We)|0,x=x+Math.imul(de,He)|0,w=w+Math.imul(z,$e)|0,u=u+Math.imul(z,Ge)|0,u=u+Math.imul(q,$e)|0,x=x+Math.imul(q,Ge)|0;var tn=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(tn>>>26)|0,tn&=67108863,w=Math.imul(Ie,Oe),u=Math.imul(Ie,Ce),u=u+Math.imul(_e,Oe)|0,x=Math.imul(_e,Ce),w=w+Math.imul(Ye,Be)|0,u=u+Math.imul(Ye,Ke)|0,u=u+Math.imul(Qe,Be)|0,x=x+Math.imul(Qe,Ke)|0,w=w+Math.imul(Me,Re)|0,u=u+Math.imul(Me,Ne)|0,u=u+Math.imul(Je,Re)|0,x=x+Math.imul(Je,Ne)|0,w=w+Math.imul(Te,De)|0,u=u+Math.imul(Te,Ue)|0,u=u+Math.imul(Ae,De)|0,x=x+Math.imul(Ae,Ue)|0,w=w+Math.imul(ge,Le)|0,u=u+Math.imul(ge,Ve)|0,u=u+Math.imul(we,Le)|0,x=x+Math.imul(we,Ve)|0,w=w+Math.imul(j,Fe)|0,u=u+Math.imul(j,ze)|0,u=u+Math.imul(Y,Fe)|0,x=x+Math.imul(Y,ze)|0,w=w+Math.imul(U,je)|0,u=u+Math.imul(U,qe)|0,u=u+Math.imul(G,je)|0,x=x+Math.imul(G,qe)|0,w=w+Math.imul(pe,We)|0,u=u+Math.imul(pe,He)|0,u=u+Math.imul(R,We)|0,x=x+Math.imul(R,He)|0,w=w+Math.imul(ce,$e)|0,u=u+Math.imul(ce,Ge)|0,u=u+Math.imul(de,$e)|0,x=x+Math.imul(de,Ge)|0;var rn=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(rn>>>26)|0,rn&=67108863,w=Math.imul(Ie,Be),u=Math.imul(Ie,Ke),u=u+Math.imul(_e,Be)|0,x=Math.imul(_e,Ke),w=w+Math.imul(Ye,Re)|0,u=u+Math.imul(Ye,Ne)|0,u=u+Math.imul(Qe,Re)|0,x=x+Math.imul(Qe,Ne)|0,w=w+Math.imul(Me,De)|0,u=u+Math.imul(Me,Ue)|0,u=u+Math.imul(Je,De)|0,x=x+Math.imul(Je,Ue)|0,w=w+Math.imul(Te,Le)|0,u=u+Math.imul(Te,Ve)|0,u=u+Math.imul(Ae,Le)|0,x=x+Math.imul(Ae,Ve)|0,w=w+Math.imul(ge,Fe)|0,u=u+Math.imul(ge,ze)|0,u=u+Math.imul(we,Fe)|0,x=x+Math.imul(we,ze)|0,w=w+Math.imul(j,je)|0,u=u+Math.imul(j,qe)|0,u=u+Math.imul(Y,je)|0,x=x+Math.imul(Y,qe)|0,w=w+Math.imul(U,We)|0,u=u+Math.imul(U,He)|0,u=u+Math.imul(G,We)|0,x=x+Math.imul(G,He)|0,w=w+Math.imul(pe,$e)|0,u=u+Math.imul(pe,Ge)|0,u=u+Math.imul(R,$e)|0,x=x+Math.imul(R,Ge)|0;var nn=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(nn>>>26)|0,nn&=67108863,w=Math.imul(Ie,Re),u=Math.imul(Ie,Ne),u=u+Math.imul(_e,Re)|0,x=Math.imul(_e,Ne),w=w+Math.imul(Ye,De)|0,u=u+Math.imul(Ye,Ue)|0,u=u+Math.imul(Qe,De)|0,x=x+Math.imul(Qe,Ue)|0,w=w+Math.imul(Me,Le)|0,u=u+Math.imul(Me,Ve)|0,u=u+Math.imul(Je,Le)|0,x=x+Math.imul(Je,Ve)|0,w=w+Math.imul(Te,Fe)|0,u=u+Math.imul(Te,ze)|0,u=u+Math.imul(Ae,Fe)|0,x=x+Math.imul(Ae,ze)|0,w=w+Math.imul(ge,je)|0,u=u+Math.imul(ge,qe)|0,u=u+Math.imul(we,je)|0,x=x+Math.imul(we,qe)|0,w=w+Math.imul(j,We)|0,u=u+Math.imul(j,He)|0,u=u+Math.imul(Y,We)|0,x=x+Math.imul(Y,He)|0,w=w+Math.imul(U,$e)|0,u=u+Math.imul(U,Ge)|0,u=u+Math.imul(G,$e)|0,x=x+Math.imul(G,Ge)|0;var on=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(on>>>26)|0,on&=67108863,w=Math.imul(Ie,De),u=Math.imul(Ie,Ue),u=u+Math.imul(_e,De)|0,x=Math.imul(_e,Ue),w=w+Math.imul(Ye,Le)|0,u=u+Math.imul(Ye,Ve)|0,u=u+Math.imul(Qe,Le)|0,x=x+Math.imul(Qe,Ve)|0,w=w+Math.imul(Me,Fe)|0,u=u+Math.imul(Me,ze)|0,u=u+Math.imul(Je,Fe)|0,x=x+Math.imul(Je,ze)|0,w=w+Math.imul(Te,je)|0,u=u+Math.imul(Te,qe)|0,u=u+Math.imul(Ae,je)|0,x=x+Math.imul(Ae,qe)|0,w=w+Math.imul(ge,We)|0,u=u+Math.imul(ge,He)|0,u=u+Math.imul(we,We)|0,x=x+Math.imul(we,He)|0,w=w+Math.imul(j,$e)|0,u=u+Math.imul(j,Ge)|0,u=u+Math.imul(Y,$e)|0,x=x+Math.imul(Y,Ge)|0;var sn=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(sn>>>26)|0,sn&=67108863,w=Math.imul(Ie,Le),u=Math.imul(Ie,Ve),u=u+Math.imul(_e,Le)|0,x=Math.imul(_e,Ve),w=w+Math.imul(Ye,Fe)|0,u=u+Math.imul(Ye,ze)|0,u=u+Math.imul(Qe,Fe)|0,x=x+Math.imul(Qe,ze)|0,w=w+Math.imul(Me,je)|0,u=u+Math.imul(Me,qe)|0,u=u+Math.imul(Je,je)|0,x=x+Math.imul(Je,qe)|0,w=w+Math.imul(Te,We)|0,u=u+Math.imul(Te,He)|0,u=u+Math.imul(Ae,We)|0,x=x+Math.imul(Ae,He)|0,w=w+Math.imul(ge,$e)|0,u=u+Math.imul(ge,Ge)|0,u=u+Math.imul(we,$e)|0,x=x+Math.imul(we,Ge)|0;var an=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(an>>>26)|0,an&=67108863,w=Math.imul(Ie,Fe),u=Math.imul(Ie,ze),u=u+Math.imul(_e,Fe)|0,x=Math.imul(_e,ze),w=w+Math.imul(Ye,je)|0,u=u+Math.imul(Ye,qe)|0,u=u+Math.imul(Qe,je)|0,x=x+Math.imul(Qe,qe)|0,w=w+Math.imul(Me,We)|0,u=u+Math.imul(Me,He)|0,u=u+Math.imul(Je,We)|0,x=x+Math.imul(Je,He)|0,w=w+Math.imul(Te,$e)|0,u=u+Math.imul(Te,Ge)|0,u=u+Math.imul(Ae,$e)|0,x=x+Math.imul(Ae,Ge)|0;var cn=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(cn>>>26)|0,cn&=67108863,w=Math.imul(Ie,je),u=Math.imul(Ie,qe),u=u+Math.imul(_e,je)|0,x=Math.imul(_e,qe),w=w+Math.imul(Ye,We)|0,u=u+Math.imul(Ye,He)|0,u=u+Math.imul(Qe,We)|0,x=x+Math.imul(Qe,He)|0,w=w+Math.imul(Me,$e)|0,u=u+Math.imul(Me,Ge)|0,u=u+Math.imul(Je,$e)|0,x=x+Math.imul(Je,Ge)|0;var un=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(un>>>26)|0,un&=67108863,w=Math.imul(Ie,We),u=Math.imul(Ie,He),u=u+Math.imul(_e,We)|0,x=Math.imul(_e,He),w=w+Math.imul(Ye,$e)|0,u=u+Math.imul(Ye,Ge)|0,u=u+Math.imul(Qe,$e)|0,x=x+Math.imul(Qe,Ge)|0;var Io=(_+w|0)+((u&8191)<<13)|0;_=(x+(u>>>13)|0)+(Io>>>26)|0,Io&=67108863,w=Math.imul(Ie,$e),u=Math.imul(Ie,Ge),u=u+Math.imul(_e,$e)|0,x=Math.imul(_e,Ge);var _o=(_+w|0)+((u&8191)<<13)|0;return _=(x+(u>>>13)|0)+(_o>>>26)|0,_o&=67108863,M[0]=Hr,M[1]=$r,M[2]=Gr,M[3]=Zr,M[4]=Jr,M[5]=Yr,M[6]=Qr,M[7]=Xr,M[8]=en,M[9]=tn,M[10]=rn,M[11]=nn,M[12]=on,M[13]=sn,M[14]=an,M[15]=cn,M[16]=un,M[17]=Io,M[18]=_o,_!==0&&(M[19]=_,g.length++),g},"comb10MulTo");Math.imul||(B=P);function K(S,a,l){l.negative=a.negative^S.negative,l.length=S.length+a.length;for(var g=0,y=0,b=0;b<l.length-1;b++){var M=y;y=0;for(var _=g&67108863,w=Math.min(b,a.length-1),u=Math.max(0,b-S.length+1);u<=w;u++){var x=b-u,F=S.words[x]|0,z=a.words[u]|0,q=F*z,Q=q&67108863;M=M+(q/67108864|0)|0,Q=Q+_|0,_=Q&67108863,M=M+(Q>>>26)|0,y+=M>>>26,M&=67108863}l.words[b]=_,g=M,M=y}return g!==0?l.words[b]=g:l.length--,l.strip()}o(K,"bigMulTo");function N(S,a,l){var g=new D;return g.mulp(S,a,l)}o(N,"jumboMulTo"),i.prototype.mulTo=o(function(a,l){var g,y=this.length+a.length;return this.length===10&&a.length===10?g=B(this,a,l):y<63?g=P(this,a,l):y<1024?g=K(this,a,l):g=N(this,a,l),g},"mulTo");function D(S,a){this.x=S,this.y=a}o(D,"FFTM"),D.prototype.makeRBT=o(function(a){for(var l=new Array(a),g=i.prototype._countBits(a)-1,y=0;y<a;y++)l[y]=this.revBin(y,g,a);return l},"makeRBT"),D.prototype.revBin=o(function(a,l,g){if(a===0||a===g-1)return a;for(var y=0,b=0;b<l;b++)y|=(a&1)<<l-b-1,a>>=1;return y},"revBin"),D.prototype.permute=o(function(a,l,g,y,b,M){for(var _=0;_<M;_++)y[_]=l[a[_]],b[_]=g[a[_]]},"permute"),D.prototype.transform=o(function(a,l,g,y,b,M){this.permute(M,a,l,g,y,b);for(var _=1;_<b;_<<=1)for(var w=_<<1,u=Math.cos(2*Math.PI/w),x=Math.sin(2*Math.PI/w),F=0;F<b;F+=w)for(var z=u,q=x,Q=0;Q<_;Q++){var ce=g[F+Q],de=y[F+Q],ft=g[F+Q+_],pe=y[F+Q+_],R=z*ft-q*pe;pe=z*pe+q*ft,ft=R,g[F+Q]=ce+ft,y[F+Q]=de+pe,g[F+Q+_]=ce-ft,y[F+Q+_]=de-pe,Q!==w&&(R=u*z-x*q,q=u*q+x*z,z=R)}},"transform"),D.prototype.guessLen13b=o(function(a,l){var g=Math.max(l,a)|1,y=g&1,b=0;for(g=g/2|0;g;g=g>>>1)b++;return 1<<b+1+y},"guessLen13b"),D.prototype.conjugate=o(function(a,l,g){if(!(g<=1))for(var y=0;y<g/2;y++){var b=a[y];a[y]=a[g-y-1],a[g-y-1]=b,b=l[y],l[y]=-l[g-y-1],l[g-y-1]=-b}},"conjugate"),D.prototype.normalize13b=o(function(a,l){for(var g=0,y=0;y<l/2;y++){var b=Math.round(a[2*y+1]/l)*8192+Math.round(a[2*y]/l)+g;a[y]=b&67108863,b<67108864?g=0:g=b/67108864|0}return a},"normalize13b"),D.prototype.convert13b=o(function(a,l,g,y){for(var b=0,M=0;M<l;M++)b=b+(a[M]|0),g[2*M]=b&8191,b=b>>>13,g[2*M+1]=b&8191,b=b>>>13;for(M=2*l;M<y;++M)g[M]=0;r(b===0),r((b&-8192)===0)},"convert13b"),D.prototype.stub=o(function(a){for(var l=new Array(a),g=0;g<a;g++)l[g]=0;return l},"stub"),D.prototype.mulp=o(function(a,l,g){var y=2*this.guessLen13b(a.length,l.length),b=this.makeRBT(y),M=this.stub(y),_=new Array(y),w=new Array(y),u=new Array(y),x=new Array(y),F=new Array(y),z=new Array(y),q=g.words;q.length=y,this.convert13b(a.words,a.length,_,y),this.convert13b(l.words,l.length,x,y),this.transform(_,M,w,u,y,b),this.transform(x,M,F,z,y,b);for(var Q=0;Q<y;Q++){var ce=w[Q]*F[Q]-u[Q]*z[Q];u[Q]=w[Q]*z[Q]+u[Q]*F[Q],w[Q]=ce}return this.conjugate(w,u,y),this.transform(w,u,q,M,y,b),this.conjugate(q,M,y),this.normalize13b(q,y),g.negative=a.negative^l.negative,g.length=a.length+l.length,g.strip()},"mulp"),i.prototype.mul=o(function(a){var l=new i(null);return l.words=new Array(this.length+a.length),this.mulTo(a,l)},"mul"),i.prototype.mulf=o(function(a){var l=new i(null);return l.words=new Array(this.length+a.length),N(this,a,l)},"mulf"),i.prototype.imul=o(function(a){return this.clone().mulTo(a,this)},"imul"),i.prototype.imuln=o(function(a){r(typeof a=="number"),r(a<67108864);for(var l=0,g=0;g<this.length;g++){var y=(this.words[g]|0)*a,b=(y&67108863)+(l&67108863);l>>=26,l+=y/67108864|0,l+=b>>>26,this.words[g]=b&67108863}return l!==0&&(this.words[g]=l,this.length++),this},"imuln"),i.prototype.muln=o(function(a){return this.clone().imuln(a)},"muln"),i.prototype.sqr=o(function(){return this.mul(this)},"sqr"),i.prototype.isqr=o(function(){return this.imul(this.clone())},"isqr"),i.prototype.pow=o(function(a){var l=I(a);if(l.length===0)return new i(1);for(var g=this,y=0;y<l.length&&l[y]===0;y++,g=g.sqr());if(++y<l.length)for(var b=g.sqr();y<l.length;y++,b=b.sqr())l[y]!==0&&(g=g.mul(b));return g},"pow"),i.prototype.iushln=o(function(a){r(typeof a=="number"&&a>=0);var l=a%26,g=(a-l)/26,y=67108863>>>26-l<<26-l,b;if(l!==0){var M=0;for(b=0;b<this.length;b++){var _=this.words[b]&y,w=(this.words[b]|0)-_<<l;this.words[b]=w|M,M=_>>>26-l}M&&(this.words[b]=M,this.length++)}if(g!==0){for(b=this.length-1;b>=0;b--)this.words[b+g]=this.words[b];for(b=0;b<g;b++)this.words[b]=0;this.length+=g}return this.strip()},"iushln"),i.prototype.ishln=o(function(a){return r(this.negative===0),this.iushln(a)},"ishln"),i.prototype.iushrn=o(function(a,l,g){r(typeof a=="number"&&a>=0);var y;l?y=(l-l%26)/26:y=0;var b=a%26,M=Math.min((a-b)/26,this.length),_=67108863^67108863>>>b<<b,w=g;if(y-=M,y=Math.max(0,y),w){for(var u=0;u<M;u++)w.words[u]=this.words[u];w.length=M}if(M!==0)if(this.length>M)for(this.length-=M,u=0;u<this.length;u++)this.words[u]=this.words[u+M];else this.words[0]=0,this.length=1;var x=0;for(u=this.length-1;u>=0&&(x!==0||u>=y);u--){var F=this.words[u]|0;this.words[u]=x<<26-b|F>>>b,x=F&_}return w&&x!==0&&(w.words[w.length++]=x),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},"iushrn"),i.prototype.ishrn=o(function(a,l,g){return r(this.negative===0),this.iushrn(a,l,g)},"ishrn"),i.prototype.shln=o(function(a){return this.clone().ishln(a)},"shln"),i.prototype.ushln=o(function(a){return this.clone().iushln(a)},"ushln"),i.prototype.shrn=o(function(a){return this.clone().ishrn(a)},"shrn"),i.prototype.ushrn=o(function(a){return this.clone().iushrn(a)},"ushrn"),i.prototype.testn=o(function(a){r(typeof a=="number"&&a>=0);var l=a%26,g=(a-l)/26,y=1<<l;if(this.length<=g)return!1;var b=this.words[g];return!!(b&y)},"testn"),i.prototype.imaskn=o(function(a){r(typeof a=="number"&&a>=0);var l=a%26,g=(a-l)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(l!==0&&g++,this.length=Math.min(g,this.length),l!==0){var y=67108863^67108863>>>l<<l;this.words[this.length-1]&=y}return this.strip()},"imaskn"),i.prototype.maskn=o(function(a){return this.clone().imaskn(a)},"maskn"),i.prototype.iaddn=o(function(a){return r(typeof a=="number"),r(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},"iaddn"),i.prototype._iaddn=o(function(a){this.words[0]+=a;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},"_iaddn"),i.prototype.isubn=o(function(a){if(r(typeof a=="number"),r(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},"isubn"),i.prototype.addn=o(function(a){return this.clone().iaddn(a)},"addn"),i.prototype.subn=o(function(a){return this.clone().isubn(a)},"subn"),i.prototype.iabs=o(function(){return this.negative=0,this},"iabs"),i.prototype.abs=o(function(){return this.clone().iabs()},"abs"),i.prototype._ishlnsubmul=o(function(a,l,g){var y=a.length+g,b;this._expand(y);var M,_=0;for(b=0;b<a.length;b++){M=(this.words[b+g]|0)+_;var w=(a.words[b]|0)*l;M-=w&67108863,_=(M>>26)-(w/67108864|0),this.words[b+g]=M&67108863}for(;b<this.length-g;b++)M=(this.words[b+g]|0)+_,_=M>>26,this.words[b+g]=M&67108863;if(_===0)return this.strip();for(r(_===-1),_=0,b=0;b<this.length;b++)M=-(this.words[b]|0)+_,_=M>>26,this.words[b]=M&67108863;return this.negative=1,this.strip()},"_ishlnsubmul"),i.prototype._wordDiv=o(function(a,l){var g=this.length-a.length,y=this.clone(),b=a,M=b.words[b.length-1]|0,_=this._countBits(M);g=26-_,g!==0&&(b=b.ushln(g),y.iushln(g),M=b.words[b.length-1]|0);var w=y.length-b.length,u;if(l!=="mod"){u=new i(null),u.length=w+1,u.words=new Array(u.length);for(var x=0;x<u.length;x++)u.words[x]=0}var F=y.clone()._ishlnsubmul(b,1,w);F.negative===0&&(y=F,u&&(u.words[w]=1));for(var z=w-1;z>=0;z--){var q=(y.words[b.length+z]|0)*67108864+(y.words[b.length+z-1]|0);for(q=Math.min(q/M|0,67108863),y._ishlnsubmul(b,q,z);y.negative!==0;)q--,y.negative=0,y._ishlnsubmul(b,1,z),y.isZero()||(y.negative^=1);u&&(u.words[z]=q)}return u&&u.strip(),y.strip(),l!=="div"&&g!==0&&y.iushrn(g),{div:u||null,mod:y}},"_wordDiv"),i.prototype.divmod=o(function(a,l,g){if(r(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var y,b,M;return this.negative!==0&&a.negative===0?(M=this.neg().divmod(a,l),l!=="mod"&&(y=M.div.neg()),l!=="div"&&(b=M.mod.neg(),g&&b.negative!==0&&b.iadd(a)),{div:y,mod:b}):this.negative===0&&a.negative!==0?(M=this.divmod(a.neg(),l),l!=="mod"&&(y=M.div.neg()),{div:y,mod:M.mod}):this.negative&a.negative?(M=this.neg().divmod(a.neg(),l),l!=="div"&&(b=M.mod.neg(),g&&b.negative!==0&&b.isub(a)),{div:M.div,mod:b}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?l==="div"?{div:this.divn(a.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modn(a.words[0]))}:this._wordDiv(a,l)},"divmod"),i.prototype.div=o(function(a){return this.divmod(a,"div",!1).div},"div"),i.prototype.mod=o(function(a){return this.divmod(a,"mod",!1).mod},"mod"),i.prototype.umod=o(function(a){return this.divmod(a,"mod",!0).mod},"umod"),i.prototype.divRound=o(function(a){var l=this.divmod(a);if(l.mod.isZero())return l.div;var g=l.div.negative!==0?l.mod.isub(a):l.mod,y=a.ushrn(1),b=a.andln(1),M=g.cmp(y);return M<0||b===1&&M===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},"divRound"),i.prototype.modn=o(function(a){r(a<=67108863);for(var l=(1<<26)%a,g=0,y=this.length-1;y>=0;y--)g=(l*g+(this.words[y]|0))%a;return g},"modn"),i.prototype.idivn=o(function(a){r(a<=67108863);for(var l=0,g=this.length-1;g>=0;g--){var y=(this.words[g]|0)+l*67108864;this.words[g]=y/a|0,l=y%a}return this.strip()},"idivn"),i.prototype.divn=o(function(a){return this.clone().idivn(a)},"divn"),i.prototype.egcd=o(function(a){r(a.negative===0),r(!a.isZero());var l=this,g=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var y=new i(1),b=new i(0),M=new i(0),_=new i(1),w=0;l.isEven()&&g.isEven();)l.iushrn(1),g.iushrn(1),++w;for(var u=g.clone(),x=l.clone();!l.isZero();){for(var F=0,z=1;!(l.words[0]&z)&&F<26;++F,z<<=1);if(F>0)for(l.iushrn(F);F-- >0;)(y.isOdd()||b.isOdd())&&(y.iadd(u),b.isub(x)),y.iushrn(1),b.iushrn(1);for(var q=0,Q=1;!(g.words[0]&Q)&&q<26;++q,Q<<=1);if(q>0)for(g.iushrn(q);q-- >0;)(M.isOdd()||_.isOdd())&&(M.iadd(u),_.isub(x)),M.iushrn(1),_.iushrn(1);l.cmp(g)>=0?(l.isub(g),y.isub(M),b.isub(_)):(g.isub(l),M.isub(y),_.isub(b))}return{a:M,b:_,gcd:g.iushln(w)}},"egcd"),i.prototype._invmp=o(function(a){r(a.negative===0),r(!a.isZero());var l=this,g=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var y=new i(1),b=new i(0),M=g.clone();l.cmpn(1)>0&&g.cmpn(1)>0;){for(var _=0,w=1;!(l.words[0]&w)&&_<26;++_,w<<=1);if(_>0)for(l.iushrn(_);_-- >0;)y.isOdd()&&y.iadd(M),y.iushrn(1);for(var u=0,x=1;!(g.words[0]&x)&&u<26;++u,x<<=1);if(u>0)for(g.iushrn(u);u-- >0;)b.isOdd()&&b.iadd(M),b.iushrn(1);l.cmp(g)>=0?(l.isub(g),y.isub(b)):(g.isub(l),b.isub(y))}var F;return l.cmpn(1)===0?F=y:F=b,F.cmpn(0)<0&&F.iadd(a),F},"_invmp"),i.prototype.gcd=o(function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var l=this.clone(),g=a.clone();l.negative=0,g.negative=0;for(var y=0;l.isEven()&&g.isEven();y++)l.iushrn(1),g.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;g.isEven();)g.iushrn(1);var b=l.cmp(g);if(b<0){var M=l;l=g,g=M}else if(b===0||g.cmpn(1)===0)break;l.isub(g)}while(!0);return g.iushln(y)},"gcd"),i.prototype.invm=o(function(a){return this.egcd(a).a.umod(a)},"invm"),i.prototype.isEven=o(function(){return(this.words[0]&1)===0},"isEven"),i.prototype.isOdd=o(function(){return(this.words[0]&1)===1},"isOdd"),i.prototype.andln=o(function(a){return this.words[0]&a},"andln"),i.prototype.bincn=o(function(a){r(typeof a=="number");var l=a%26,g=(a-l)/26,y=1<<l;if(this.length<=g)return this._expand(g+1),this.words[g]|=y,this;for(var b=y,M=g;b!==0&&M<this.length;M++){var _=this.words[M]|0;_+=b,b=_>>>26,_&=67108863,this.words[M]=_}return b!==0&&(this.words[M]=b,this.length++),this},"bincn"),i.prototype.isZero=o(function(){return this.length===1&&this.words[0]===0},"isZero"),i.prototype.cmpn=o(function(a){var l=a<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var g;if(this.length>1)g=1;else{l&&(a=-a),r(a<=67108863,"Number is too big");var y=this.words[0]|0;g=y===a?0:y<a?-1:1}return this.negative!==0?-g|0:g},"cmpn"),i.prototype.cmp=o(function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var l=this.ucmp(a);return this.negative!==0?-l|0:l},"cmp"),i.prototype.ucmp=o(function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var l=0,g=this.length-1;g>=0;g--){var y=this.words[g]|0,b=a.words[g]|0;if(y!==b){y<b?l=-1:y>b&&(l=1);break}}return l},"ucmp"),i.prototype.gtn=o(function(a){return this.cmpn(a)===1},"gtn"),i.prototype.gt=o(function(a){return this.cmp(a)===1},"gt"),i.prototype.gten=o(function(a){return this.cmpn(a)>=0},"gten"),i.prototype.gte=o(function(a){return this.cmp(a)>=0},"gte"),i.prototype.ltn=o(function(a){return this.cmpn(a)===-1},"ltn"),i.prototype.lt=o(function(a){return this.cmp(a)===-1},"lt"),i.prototype.lten=o(function(a){return this.cmpn(a)<=0},"lten"),i.prototype.lte=o(function(a){return this.cmp(a)<=0},"lte"),i.prototype.eqn=o(function(a){return this.cmpn(a)===0},"eqn"),i.prototype.eq=o(function(a){return this.cmp(a)===0},"eq"),i.red=o(function(a){return new J(a)},"red"),i.prototype.toRed=o(function(a){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},"toRed"),i.prototype.fromRed=o(function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},"fromRed"),i.prototype._forceRed=o(function(a){return this.red=a,this},"_forceRed"),i.prototype.forceRed=o(function(a){return r(!this.red,"Already a number in reduction context"),this._forceRed(a)},"forceRed"),i.prototype.redAdd=o(function(a){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},"redAdd"),i.prototype.redIAdd=o(function(a){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},"redIAdd"),i.prototype.redSub=o(function(a){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},"redSub"),i.prototype.redISub=o(function(a){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},"redISub"),i.prototype.redShl=o(function(a){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},"redShl"),i.prototype.redMul=o(function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},"redMul"),i.prototype.redIMul=o(function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},"redIMul"),i.prototype.redSqr=o(function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},"redSqr"),i.prototype.redISqr=o(function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},"redISqr"),i.prototype.redSqrt=o(function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},"redSqrt"),i.prototype.redInvm=o(function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},"redInvm"),i.prototype.redNeg=o(function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},"redNeg"),i.prototype.redPow=o(function(a){return r(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)},"redPow");var Z={k256:null,p224:null,p192:null,p25519:null};function L(S,a){this.name=S,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}o(L,"MPrime"),L.prototype._tmp=o(function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},"_tmp"),L.prototype.ireduce=o(function(a){var l=a,g;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),g=l.bitLength();while(g>this.n);var y=g<this.n?-1:l.ucmp(this.p);return y===0?(l.words[0]=0,l.length=1):y>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},"ireduce"),L.prototype.split=o(function(a,l){a.iushrn(this.n,0,l)},"split"),L.prototype.imulK=o(function(a){return a.imul(this.k)},"imulK");function ne(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(ne,"K256"),n(ne,L),ne.prototype.split=o(function(a,l){for(var g=4194303,y=Math.min(a.length,9),b=0;b<y;b++)l.words[b]=a.words[b];if(l.length=y,a.length<=9){a.words[0]=0,a.length=1;return}var M=a.words[9];for(l.words[l.length++]=M&g,b=10;b<a.length;b++){var _=a.words[b]|0;a.words[b-10]=(_&g)<<4|M>>>22,M=_}M>>>=22,a.words[b-10]=M,M===0&&a.length>10?a.length-=10:a.length-=9},"split"),ne.prototype.imulK=o(function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var l=0,g=0;g<a.length;g++){var y=a.words[g]|0;l+=y*977,a.words[g]=l&67108863,l=y*64+(l/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a},"imulK");function ie(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(ie,"P224"),n(ie,L);function re(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(re,"P192"),n(re,L);function ee(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(ee,"P25519"),n(ee,L),ee.prototype.imulK=o(function(a){for(var l=0,g=0;g<a.length;g++){var y=(a.words[g]|0)*19+l,b=y&67108863;y>>>=26,a.words[g]=b,l=y}return l!==0&&(a.words[a.length++]=l),a},"imulK"),i._prime=o(function(a){if(Z[a])return Z[a];var l;if(a==="k256")l=new ne;else if(a==="p224")l=new ie;else if(a==="p192")l=new re;else if(a==="p25519")l=new ee;else throw new Error("Unknown prime "+a);return Z[a]=l,l},"prime");function J(S){if(typeof S=="string"){var a=i._prime(S);this.m=a.p,this.prime=a}else r(S.gtn(1),"modulus must be greater than 1"),this.m=S,this.prime=null}o(J,"Red"),J.prototype._verify1=o(function(a){r(a.negative===0,"red works only with positives"),r(a.red,"red works only with red numbers")},"_verify1"),J.prototype._verify2=o(function(a,l){r((a.negative|l.negative)===0,"red works only with positives"),r(a.red&&a.red===l.red,"red works only with red numbers")},"_verify2"),J.prototype.imod=o(function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},"imod"),J.prototype.neg=o(function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},"neg"),J.prototype.add=o(function(a,l){this._verify2(a,l);var g=a.add(l);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},"add"),J.prototype.iadd=o(function(a,l){this._verify2(a,l);var g=a.iadd(l);return g.cmp(this.m)>=0&&g.isub(this.m),g},"iadd"),J.prototype.sub=o(function(a,l){this._verify2(a,l);var g=a.sub(l);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},"sub"),J.prototype.isub=o(function(a,l){this._verify2(a,l);var g=a.isub(l);return g.cmpn(0)<0&&g.iadd(this.m),g},"isub"),J.prototype.shl=o(function(a,l){return this._verify1(a),this.imod(a.ushln(l))},"shl"),J.prototype.imul=o(function(a,l){return this._verify2(a,l),this.imod(a.imul(l))},"imul"),J.prototype.mul=o(function(a,l){return this._verify2(a,l),this.imod(a.mul(l))},"mul"),J.prototype.isqr=o(function(a){return this.imul(a,a.clone())},"isqr"),J.prototype.sqr=o(function(a){return this.mul(a,a)},"sqr"),J.prototype.sqrt=o(function(a){if(a.isZero())return a.clone();var l=this.m.andln(3);if(r(l%2===1),l===3){var g=this.m.add(new i(1)).iushrn(2);return this.pow(a,g)}for(var y=this.m.subn(1),b=0;!y.isZero()&&y.andln(1)===0;)b++,y.iushrn(1);r(!y.isZero());var M=new i(1).toRed(this),_=M.redNeg(),w=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new i(2*u*u).toRed(this);this.pow(u,w).cmp(_)!==0;)u.redIAdd(_);for(var x=this.pow(u,y),F=this.pow(a,y.addn(1).iushrn(1)),z=this.pow(a,y),q=b;z.cmp(M)!==0;){for(var Q=z,ce=0;Q.cmp(M)!==0;ce++)Q=Q.redSqr();r(ce<q);var de=this.pow(x,new i(1).iushln(q-ce-1));F=F.redMul(de),x=de.redSqr(),z=z.redMul(x),q=ce}return F},"sqrt"),J.prototype.invm=o(function(a){var l=a._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},"invm"),J.prototype.pow=o(function(a,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return a.clone();var g=4,y=new Array(1<<g);y[0]=new i(1).toRed(this),y[1]=a;for(var b=2;b<y.length;b++)y[b]=this.mul(y[b-1],a);var M=y[0],_=0,w=0,u=l.bitLength()%26;for(u===0&&(u=26),b=l.length-1;b>=0;b--){for(var x=l.words[b],F=u-1;F>=0;F--){var z=x>>F&1;if(M!==y[0]&&(M=this.sqr(M)),z===0&&_===0){w=0;continue}_<<=1,_|=z,w++,!(w!==g&&(b!==0||F!==0))&&(M=this.mul(M,y[_]),w=0,_=0)}u=26}return M},"pow"),J.prototype.convertTo=o(function(a){var l=a.umod(this.m);return l===a?l.clone():l},"convertTo"),J.prototype.convertFrom=o(function(a){var l=a.clone();return l.red=null,l},"convertFrom"),i.mont=o(function(a){return new fe(a)},"mont");function fe(S){J.call(this,S),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(fe,"Mont"),n(fe,J),fe.prototype.convertTo=o(function(a){return this.imod(a.ushln(this.shift))},"convertTo"),fe.prototype.convertFrom=o(function(a){var l=this.imod(a.mul(this.rinv));return l.red=null,l},"convertFrom"),fe.prototype.imul=o(function(a,l){if(a.isZero()||l.isZero())return a.words[0]=0,a.length=1,a;var g=a.imul(l),y=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(y).iushrn(this.shift),M=b;return b.cmp(this.m)>=0?M=b.isub(this.m):b.cmpn(0)<0&&(M=b.iadd(this.m)),M._forceRed(this)},"imul"),fe.prototype.mul=o(function(a,l){if(a.isZero()||l.isZero())return new i(0)._forceRed(this);var g=a.mul(l),y=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(y).iushrn(this.shift),M=b;return b.cmp(this.m)>=0?M=b.isub(this.m):b.cmpn(0)<0&&(M=b.iadd(this.m)),M._forceRed(this)},"mul"),fe.prototype.invm=o(function(a){var l=this.imod(a._invmp(this.m).mul(this.r2));return l._forceRed(this)},"invm")})(typeof em>"u"||em,W1)});var J1=le((xoe,Z1)=>{d();h();var Hn=gc(),mr=H1(),vt=o(function(){},"ABI");function df(e){return e.startsWith("int[")?"int256"+e.slice(3):e==="int"?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):e==="uint"?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):e==="fixed"?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):e==="ufixed"?"ufixed128x128":e}o(df,"elementaryName");vt.eventID=function(e,t){var r=e+"("+t.map(df).join(",")+")";return Hn.keccak256(Buffer.from(r))};vt.methodID=function(e,t){return vt.eventID(e,t).slice(0,4)};function po(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}o(po,"parseTypeN");function tm(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}o(tm,"parseTypeNxM");function bc(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?t[2]===""?"dynamic":parseInt(t[2],10):null}o(bc,"parseTypeArray");function rs(e){var t=typeof e;if(t==="string")return Hn.isHexPrefixed(e)?new mr(Hn.stripHexPrefix(e),16):new mr(e,10);if(t==="number")return new mr(e);if(e.toArray)return e;throw new Error("Argument is not a number")}o(rs,"parseNumber");function G1(e){var t=/^(\w+)\((.*)\)$/.exec(e);if(t.length!==3)throw new Error("Invalid method signature");var r=/^(.+)\):\((.+)$/.exec(t[2]);if(r!==null&&r.length===3)return{method:t[1],args:r[1].split(","),retargs:r[2].split(",")};var n=t[2].split(",");return n.length===1&&n[0]===""&&(n=[]),{method:t[1],args:n}}o(G1,"parseSignature");function Wn(e,t){var r,n,i,s;if(e==="address")return Wn("uint160",rs(t));if(e==="bool")return Wn("uint8",t?1:0);if(e==="string")return Wn("bytes",Buffer.from(t,"utf8"));if(vc(e)){if(typeof t.length>"u")throw new Error("Not an array?");if(r=bc(e),r!=="dynamic"&&r!==0&&t.length>r)throw new Error("Elements exceed array size: "+r);i=[],e=e.slice(0,e.lastIndexOf("[")),typeof t=="string"&&(t=JSON.parse(t));for(s in t)i.push(Wn(e,t[s]));if(r==="dynamic"){var c=Wn("uint256",t.length);i.unshift(c)}return Buffer.concat(i)}else{if(e==="bytes")return t=Buffer.from(t),i=Buffer.concat([Wn("uint256",t.length),t]),t.length%32!==0&&(i=Buffer.concat([i,Hn.zeros(32-t.length%32)])),i;if(e.startsWith("bytes")){if(r=po(e),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return Hn.setLengthRight(t,32)}else if(e.startsWith("uint")){if(r=po(e),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(n=rs(t),n.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+n.bitLength());if(n<0)throw new Error("Supplied uint is negative");return n.toArrayLike(Buffer,"be",32)}else if(e.startsWith("int")){if(r=po(e),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(n=rs(t),n.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+n.bitLength());return n.toTwos(256).toArrayLike(Buffer,"be",32)}else if(e.startsWith("ufixed")){if(r=tm(e),n=rs(t),n<0)throw new Error("Supplied ufixed is negative");return Wn("uint256",n.mul(new mr(2).pow(new mr(r[1]))))}else if(e.startsWith("fixed"))return r=tm(e),Wn("int256",rs(t).mul(new mr(2).pow(new mr(r[1]))))}throw new Error("Unsupported or invalid type: "+e)}o(Wn,"encodeSingle");function Sn(e,t,r){typeof e=="string"&&(e=rm(e));var n,i,s,c;if(e.name==="address")return Sn(e.rawType,t,r).toArrayLike(Buffer,"be",20).toString("hex");if(e.name==="bool")return Sn(e.rawType,t,r).toString()===new mr(1).toString();if(e.name==="string"){var f=Sn(e.rawType,t,r);return Buffer.from(f,"utf8").toString()}else if(e.isArray){for(s=[],n=e.size,e.size==="dynamic"&&(r=Sn("uint256",t,r).toNumber(),n=Sn("uint256",t,r).toNumber(),r=r+32),c=0;c<n;c++){var p=Sn(e.subArray,t,r);s.push(p),r+=e.subArray.memoryUsage}return s}else{if(e.name==="bytes")return r=Sn("uint256",t,r).toNumber(),n=Sn("uint256",t,r).toNumber(),t.slice(r+32,r+32+n);if(e.name.startsWith("bytes"))return t.slice(r,r+e.size);if(e.name.startsWith("uint")){if(i=new mr(t.slice(r,r+32),16,"be"),i.bitLength()>e.size)throw new Error("Decoded int exceeds width: "+e.size+" vs "+i.bitLength());return i}else if(e.name.startsWith("int")){if(i=new mr(t.slice(r,r+32),16,"be").fromTwos(256),i.bitLength()>e.size)throw new Error("Decoded uint exceeds width: "+e.size+" vs "+i.bitLength());return i}else if(e.name.startsWith("ufixed")){if(n=new mr(2).pow(new mr(e.size[1])),i=Sn("uint256",t,r),!i.mod(n).isZero())throw new Error("Decimals not supported yet");return i.div(n)}else if(e.name.startsWith("fixed")){if(n=new mr(2).pow(new mr(e.size[1])),i=Sn("int256",t,r),!i.mod(n).isZero())throw new Error("Decimals not supported yet");return i.div(n)}}throw new Error("Unsupported or invalid type: "+e.name)}o(Sn,"decodeSingle");function rm(e){var t,r;if(vc(e)){t=bc(e);var n=e.slice(0,e.lastIndexOf("["));return n=rm(n),r={isArray:!0,name:e,size:t,memoryUsage:t==="dynamic"?32:n.memoryUsage*t,subArray:n},r}else{var i;switch(e){case"address":i="uint160";break;case"bool":i="uint8";break;case"string":i="bytes";break}if(r={rawType:i,name:e,memoryUsage:32},e.startsWith("bytes")&&e!=="bytes"||e.startsWith("uint")||e.startsWith("int")?r.size=po(e):(e.startsWith("ufixed")||e.startsWith("fixed"))&&(r.size=tm(e)),e.startsWith("bytes")&&e!=="bytes"&&(r.size<1||r.size>32))throw new Error("Invalid bytes<N> width: "+r.size);if((e.startsWith("uint")||e.startsWith("int"))&&(r.size%8||r.size<8||r.size>256))throw new Error("Invalid int/uint<N> width: "+r.size);return r}}o(rm,"parseType");function p6(e){return e==="string"||e==="bytes"||bc(e)==="dynamic"}o(p6,"isDynamic");function vc(e){return e.lastIndexOf("]")===e.length-1}o(vc,"isArray");vt.rawEncode=function(e,t){var r=[],n=[],i=0;e.forEach(function(v){if(vc(v)){var A=bc(v);A!=="dynamic"?i+=32*A:i+=32}else i+=32});for(var s=0;s<e.length;s++){var c=df(e[s]),f=t[s],p=Wn(c,f);p6(c)?(r.push(Wn("uint256",i)),n.push(p),i+=p.length):r.push(p)}return Buffer.concat(r.concat(n))};vt.rawDecode=function(e,t){var r=[];t=Buffer.from(t);for(var n=0,i=0;i<e.length;i++){var s=df(e[i]),c=rm(s,t,n),f=Sn(c,t,n);n+=c.memoryUsage,r.push(f)}return r};vt.simpleEncode=function(e){var t=Array.prototype.slice.call(arguments).slice(1),r=G1(e);if(t.length!==r.args.length)throw new Error("Argument count mismatch");return Buffer.concat([vt.methodID(r.method,r.args),vt.rawEncode(r.args,t)])};vt.simpleDecode=function(e,t){var r=G1(e);if(!r.retargs)throw new Error("No return values in method");return vt.rawDecode(r.retargs,t)};function $1(e,t){return e.startsWith("address")||e.startsWith("bytes")?"0x"+t.toString("hex"):t.toString()}o($1,"stringify");vt.stringify=function(e,t){var r=[];for(var n in e){var i=e[n],s=t[n];/^[^\[]+\[.*\]$/.test(i)?s=s.map(function(c){return $1(i,c)}).join(", "):s=$1(i,s),r.push(s)}return r};vt.solidityHexValue=function(e,t,r){var n,i;if(vc(e)){var s=e.replace(/\[.*?\]/,"");if(!vc(s)){var c=bc(e);if(c!=="dynamic"&&c!==0&&t.length>c)throw new Error("Elements exceed array size: "+c)}var f=t.map(function(A){return vt.solidityHexValue(s,A,256)});return Buffer.concat(f)}else{if(e==="bytes")return t;if(e==="string")return Buffer.from(t,"utf8");if(e==="bool"){r=r||8;var p=Array(r/4).join("0");return Buffer.from(t?p+"1":p+"0","hex")}else if(e==="address"){var v=20;return r&&(v=r/8),Hn.setLengthLeft(t,v)}else if(e.startsWith("bytes")){if(n=po(e),n<1||n>32)throw new Error("Invalid bytes<N> width: "+n);return Hn.setLengthRight(t,n)}else if(e.startsWith("uint")){if(n=po(e),n%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);if(i=rs(t),i.bitLength()>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+i.bitLength());return r=r||n,i.toArrayLike(Buffer,"be",r/8)}else if(e.startsWith("int")){if(n=po(e),n%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);if(i=rs(t),i.bitLength()>n)throw new Error("Supplied int exceeds width: "+n+" vs "+i.bitLength());return r=r||n,i.toTwos(n).toArrayLike(Buffer,"be",r/8)}else throw new Error("Unsupported or invalid type: "+e)}};vt.solidityPack=function(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var r=[],n=0;n<e.length;n++){var i=df(e[n]),s=t[n];r.push(vt.solidityHexValue(i,s,null))}return Buffer.concat(r)};vt.soliditySHA3=function(e,t){return Hn.keccak256(vt.solidityPack(e,t))};vt.soliditySHA256=function(e,t){return Hn.sha256(vt.solidityPack(e,t))};vt.solidityRIPEMD160=function(e,t){return Hn.ripemd160(vt.solidityPack(e,t),!0)};function m6(e){return e>="0"&&e<="9"}o(m6,"isNumeric");vt.fromSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="s")t.push("bytes");else if(n==="b"){for(var i="bytes",s=r+1;s<e.length&&m6(e[s]);)i+=e[s]-"0",s++;r=s-1,t.push(i)}else if(n==="i")t.push("int256");else if(n==="a")t.push("int256[]");else throw new Error("Unsupported or invalid type: "+n)}return t};vt.toSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="bytes")t.push("s");else if(n.startsWith("bytes"))t.push("b"+po(n));else if(n==="int256")t.push("i");else if(n==="int256[]")t.push("a");else throw new Error("Unsupported or invalid type: "+n)}return t.join("")};Z1.exports=vt});var Q1=le((Eoe,Y1)=>{d();h();Y1.exports=J1()});var nS=le(Lt=>{"use strict";d();h();Object.defineProperty(Lt,"__esModule",{value:!0});Lt.recoverTypedSignature=Lt.signTypedData=Lt.typedSignatureHash=Lt.TypedDataUtils=Lt.TYPED_MESSAGE_SCHEMA=Lt.SignTypedDataVersion=void 0;var jr=gc(),wc=Q1(),ns=yc(),nr;(function(e){e.V1="V1",e.V3="V3",e.V4="V4"})(nr=Lt.SignTypedDataVersion||(Lt.SignTypedDataVersion={}));Lt.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};function fa(e,t){if(Object.keys(nr).includes(e)){if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}else throw new Error(`Invalid version: '${e}'`)}o(fa,"validateVersion");function X1(e,t,r,n,i){if(fa(i,[nr.V3,nr.V4]),e[r]!==void 0)return["bytes32",i===nr.V4&&n==null?"0x0000000000000000000000000000000000000000000000000000000000000000":jr.keccak(im(r,n,e,i))];if(n===void 0)throw new Error(`missing value for field ${t} of type ${r}`);if(r==="bytes")return["bytes32",jr.keccak(n)];if(r==="string")return typeof n=="string"&&(n=Buffer.from(n,"utf8")),["bytes32",jr.keccak(n)];if(r.lastIndexOf("]")===r.length-1){if(i===nr.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");let s=r.slice(0,r.lastIndexOf("[")),c=n.map(f=>X1(e,t,s,f,i));return["bytes32",jr.keccak(wc.rawEncode(c.map(([f])=>f),c.map(([,f])=>f)))]}return[r,n]}o(X1,"encodeField");function im(e,t,r,n){fa(n,[nr.V3,nr.V4]);let i=["bytes32"],s=[tS(e,r)];for(let c of r[e]){if(n===nr.V3&&t[c.name]===void 0)continue;let[f,p]=X1(r,c.name,c.type,t[c.name],n);i.push(f),s.push(p)}return wc.rawEncode(i,s)}o(im,"encodeData");function eS(e,t){let r="",n=om(e,t);n.delete(e);let i=[e,...Array.from(n).sort()];for(let s of i){if(!t[s])throw new Error(`No type definition specified: ${s}`);r+=`${s}(${t[s].map(({name:f,type:p})=>`${p} ${f}`).join(",")})`}return r}o(eS,"encodeType");function om(e,t,r=new Set){if([e]=e.match(/^\w*/u),r.has(e)||t[e]===void 0)return r;r.add(e);for(let n of t[e])om(n.type,t,r);return r}o(om,"findTypeDependencies");function nm(e,t,r,n){return fa(n,[nr.V3,nr.V4]),jr.keccak(im(e,t,r,n))}o(nm,"hashStruct");function tS(e,t){return jr.keccak(eS(e,t))}o(tS,"hashType");function rS(e){let t={};for(let r in Lt.TYPED_MESSAGE_SCHEMA.properties)e[r]&&(t[r]=e[r]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}o(rS,"sanitizeData");function g6(e,t){fa(t,[nr.V3,nr.V4]);let r=rS(e),n=[Buffer.from("1901","hex")];return n.push(nm("EIP712Domain",r.domain,r.types,t)),r.primaryType!=="EIP712Domain"&&n.push(nm(r.primaryType,r.message,r.types,t)),jr.keccak(Buffer.concat(n))}o(g6,"eip712Hash");Lt.TypedDataUtils={encodeData:im,encodeType:eS,findTypeDependencies:om,hashStruct:nm,hashType:tS,sanitizeData:rS,eip712Hash:g6};function y6(e){let t=sm(e);return jr.bufferToHex(t)}o(y6,"typedSignatureHash");Lt.typedSignatureHash=y6;function sm(e){let t=new Error("Expect argument to be non-empty array");if(typeof e!="object"||!("length"in e)||!e.length)throw t;let r=e.map(function(s){return s.type!=="bytes"?s.value:ns.legacyToBuffer(s.value)}),n=e.map(function(s){return s.type}),i=e.map(function(s){if(!s.name)throw t;return`${s.type} ${s.name}`});return wc.soliditySHA3(["bytes32","bytes32"],[wc.soliditySHA3(new Array(e.length).fill("string"),i),wc.soliditySHA3(n,r)])}o(sm,"_typedSignatureHash");function v6({privateKey:e,data:t,version:r}){if(fa(r),ns.isNullish(t))throw new Error("Missing data parameter");if(ns.isNullish(e))throw new Error("Missing private key parameter");let n=r===nr.V1?sm(t):Lt.TypedDataUtils.eip712Hash(t,r),i=jr.ecsign(n,e);return ns.concatSig(jr.toBuffer(i.v),i.r,i.s)}o(v6,"signTypedData");Lt.signTypedData=v6;function b6({data:e,signature:t,version:r}){if(fa(r),ns.isNullish(e))throw new Error("Missing data parameter");if(ns.isNullish(t))throw new Error("Missing signature parameter");let n=r===nr.V1?sm(e):Lt.TypedDataUtils.eip712Hash(e,r),i=ns.recoverPublicKey(n,t),s=jr.publicToAddress(i);return jr.bufferToHex(s)}o(b6,"recoverTypedSignature");Lt.recoverTypedSignature=b6});var oS=le((iS,hf)=>{d();h();(function(e,t){"use strict";typeof hf<"u"&&hf.exports?hf.exports=t():(e.nacl||(e.nacl={}),e.nacl.util=t())})(iS,function(){"use strict";var e={};function t(r){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(r))throw new TypeError("invalid encoding")}return o(t,"validateBase64"),e.decodeUTF8=function(r){if(typeof r!="string")throw new TypeError("expected string");var n,i=unescape(encodeURIComponent(r)),s=new Uint8Array(i.length);for(n=0;n<i.length;n++)s[n]=i.charCodeAt(n);return s},e.encodeUTF8=function(r){var n,i=[];for(n=0;n<r.length;n++)i.push(String.fromCharCode(r[n]));return decodeURIComponent(escape(i.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(e.encodeBase64=function(r){return Buffer.from(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(Buffer.from(r,"base64"),0))}):(e.encodeBase64=function(r){return new Buffer(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(new Buffer(r,"base64"),0))}):(e.encodeBase64=function(r){var n,i=[],s=r.length;for(n=0;n<s;n++)i.push(String.fromCharCode(r[n]));return btoa(i.join(""))},e.decodeBase64=function(r){t(r);var n,i=atob(r),s=new Uint8Array(i.length);for(n=0;n<i.length;n++)s[n]=i.charCodeAt(n);return s}),e})});var lS=le(Vt=>{"use strict";d();h();var w6=Vt&&Vt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:o(function(){return t[r]},"get")})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),x6=Vt&&Vt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),sS=Vt&&Vt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&w6(t,e,r);return x6(t,e),t};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.getEncryptionPublicKey=Vt.decryptSafely=Vt.decrypt=Vt.encryptSafely=Vt.encrypt=void 0;var is=sS(qi()),An=sS(oS()),$n=yc();function aS({publicKey:e,data:t,version:r}){if($n.isNullish(e))throw new Error("Missing publicKey parameter");if($n.isNullish(t))throw new Error("Missing data parameter");if($n.isNullish(r))throw new Error("Missing version parameter");switch(r){case"x25519-xsalsa20-poly1305":{if(typeof t!="string")throw new Error("Message data must be given as a string");let n=is.box.keyPair(),i;try{i=An.decodeBase64(e)}catch{throw new Error("Bad public key")}let s=An.decodeUTF8(t),c=is.randomBytes(is.box.nonceLength),f=is.box(s,c,i,n.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:An.encodeBase64(c),ephemPublicKey:An.encodeBase64(n.publicKey),ciphertext:An.encodeBase64(f)}}default:throw new Error("Encryption type/version not supported")}}o(aS,"encrypt");Vt.encrypt=aS;function S6({publicKey:e,data:t,version:r}){if($n.isNullish(e))throw new Error("Missing publicKey parameter");if($n.isNullish(t))throw new Error("Missing data parameter");if($n.isNullish(r))throw new Error("Missing version parameter");let n=2**11,i=16;if(typeof t=="object"&&"toJSON"in t)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");let s={data:t,padding:""},f=Buffer.byteLength(JSON.stringify(s),"utf-8")%n,p=0;f>0&&(p=n-f-i),s.padding="0".repeat(p);let v=JSON.stringify(s);return aS({publicKey:e,data:v,version:r})}o(S6,"encryptSafely");Vt.encryptSafely=S6;function cS({encryptedData:e,privateKey:t}){if($n.isNullish(e))throw new Error("Missing encryptedData parameter");if($n.isNullish(t))throw new Error("Missing privateKey parameter");switch(e.version){case"x25519-xsalsa20-poly1305":{let r=uS(t),n=is.box.keyPair.fromSecretKey(r).secretKey,i=An.decodeBase64(e.nonce),s=An.decodeBase64(e.ciphertext),c=An.decodeBase64(e.ephemPublicKey),f=is.box.open(s,i,c,n),p;try{p=An.encodeUTF8(f)}catch{throw new Error("Decryption failed.")}if(p)return p;throw new Error("Decryption failed.")}default:throw new Error("Encryption type/version not supported.")}}o(cS,"decrypt");Vt.decrypt=cS;function A6({encryptedData:e,privateKey:t}){if($n.isNullish(e))throw new Error("Missing encryptedData parameter");if($n.isNullish(t))throw new Error("Missing privateKey parameter");return JSON.parse(cS({encryptedData:e,privateKey:t})).data}o(A6,"decryptSafely");Vt.decryptSafely=A6;function M6(e){let t=uS(e),r=is.box.keyPair.fromSecretKey(t).publicKey;return An.encodeBase64(r)}o(M6,"getEncryptionPublicKey");Vt.getEncryptionPublicKey=M6;function uS(e){let t=Buffer.from(e,"hex").toString("base64");return An.decodeBase64(t)}o(uS,"nacl_decodeHex")});var cm=le(Mr=>{"use strict";d();h();var E6=Mr&&Mr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:o(function(){return t[r]},"get")})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),am=Mr&&Mr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&E6(t,e,r)};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.normalize=Mr.concatSig=void 0;am(q1(),Mr);am(nS(),Mr);am(lS(),Mr);var fS=yc();Object.defineProperty(Mr,"concatSig",{enumerable:!0,get:o(function(){return fS.concatSig},"get")});Object.defineProperty(Mr,"normalize",{enumerable:!0,get:o(function(){return fS.normalize},"get")})});d();h();d();h();var xs;(function(e){e.Image="image",e.Emoji="emoji",e.ReadOnlyDefault="read-only-default",e.Default="default"})(xs||(xs={}));var rv=m.object({type:m.nativeEnum(xs),imageUrl:m.string().optional(),unicode:m.string().optional()}),Ss;(function(e){e.Ledger="ledger"})(Ss||(Ss={}));var As;(function(e){e.BLE="ble"})(As||(As={}));var kM=m.object({version:m.literal(1),connectionType:m.nativeEnum(As),deviceType:m.nativeEnum(Ss),id:m.string().min(1),name:m.string().optional(),model:m.string().optional()}),PM=m.object({value:m.number(),timestamp:m.number()}),OM=m.object({name:m.string(),icon:rv.optional(),connectedDevices:kM.array().optional()}),CM=m.object({balance:PM.optional()});var BM=100,KM={unicode:void 0,imageUrl:void 0,type:xs.Default},RM={version:1,isDeveloperMode:!1};var Ms=fn.Solana.Devnet,Es=fn.Ethereum.Sepolia,Td=fn.Sui.Testnet;function Oa(){return{version:1,setting:{[k.Solana]:Ms,[k.EVM]:Es,[k.Sui]:Td}}}o(Oa,"getDefaultNetworkSetting");function tr(e){return e.map(t=>dn[t].defaultDerivationPathType)}o(tr,"getDefaultDerivationPathTypesForAddressTypes");var NM={[oe.Bip44RootSolana]:oe.Bip44RootEthereum,[oe.Bip44ChangeSolana]:oe.Bip44Ethereum,[oe.Bip44Solana]:oe.Bip44EthereumSecondary,[oe.DeprecatedSolana]:oe.Bip44EthereumTertiary,[oe.Bip44RootEthereum]:null,[oe.Bip44Ethereum]:null,[oe.Bip44EthereumSecondary]:null,[oe.Bip44EthereumTertiary]:null,[oe.BitcoinTaproot]:null,[oe.BitcoinNativeSegwit]:null,[oe.BitcoinNestedSegwit]:null,[oe.BitcoinLegacy]:null,[oe.Bip44Sui]:null},vi={[oe.Bip44RootSolana]:-1,[oe.Bip44RootEthereum]:-1,[oe.BitcoinTaproot]:0,[oe.BitcoinNativeSegwit]:0,[oe.BitcoinNestedSegwit]:0,[oe.BitcoinLegacy]:0,[oe.Bip44ChangeSolana]:0,[oe.Bip44Ethereum]:0,[oe.Bip44Solana]:1,[oe.Bip44EthereumSecondary]:1,[oe.DeprecatedSolana]:2,[oe.Bip44EthereumTertiary]:2,[oe.Bip44Sui]:0},DM="https://help.phantom.com/hc/en-us/articles/4406563212819";var UM="https://help.phantom.com/hc/en-us/articles/21872962238355";d();h();var av=te(Wc());d();h();d();h();var nv=te(Wc()),su=te(nt());var iv=(0,su.createContext)(null);function LM({children:e,vault:t}){return(0,nv.jsx)(iv.Provider,{value:t,children:e})}o(LM,"VaultProxyProvider");function bt(){let e=(0,su.useContext)(iv);if(!e)throw new Error("useVaultProxy must be used within a VaultProxyProvider");return e}o(bt,"useVaultProxy");d();h();d();h();d();h();var au=o((e,t)=>{try{let r=vs(e,t);switch(r){case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:return dn.getDisplayName(r);default:return}}catch(r){H.addBreadcrumb(W.Account,"Failed to get address badge",X.Error,{...r instanceof Error&&{error:r.message},networkId:e,address:t});return}},"getAddressBadge");var ov={badge:o((e,t,r)=>t.filter(Xc).length<=1?"":au(e,r)??"","badge"),showAddressTypeExplainer:o(e=>e.filter(Xc).length>1,"showAddressTypeExplainer"),addressTooltipNetworkName:o((e,t,r)=>r.filter(Xc).length>=2?au(e,t)??me.getChainName(e):me.getChainName(e),"addressTooltipNetworkName")};d();h();var sv={badge:o(()=>"Lite","badge")};var VM=new eu({[br.Solana]:{},[br.Ethereum]:{},[br.Polygon]:{},[br.Base]:{},[br.Arbitrum]:{},[br.Monad]:{},[br.Bitcoin]:ov,[br.Sui]:{},[br.Hypercore]:{},[br.Hyperevm]:sv}),$i=zy(VM);function FM({children:e}){let t=bt(),r=$i.supportedChains.map(i=>[i,$i.get(i)]),n=new eu(Object.fromEntries(r));return(0,av.jsx)(Jy,{effects:{deriveAddresses:o(async()=>{await t.deriveAddresses()},"deriveAddresses")},registry:n,children:e})}o(FM,"AccountsChainDependencyProvider");d();h();var O;(function(e){e.Seed="seed",e.PrivateKey="privateKey",e.Ledger="ledger",e.SeedVault="seedVault",e.ReadOnly="readOnly",e.Seedless="seedless",e.KMSVault="kmsVault"})(O||(O={}));var zM=m.object({derivationIndex:m.number(),addresses:m.array(m.object({pathType:m.union([Sy,Ay]),value:m.string()})),publicKeys:m.array(m.object({pathType:xy,value:m.string()}))}),Pn=class extends Error{static{o(this,"VaultFetchAccountInvalidIdentifier")}message="No account exists in storage for identifier"},Gi=class extends Error{static{o(this,"VaultFetchAccountUndefinedBitcoinAddressError")}message="No account exists in storage for identifier"},Zi=class extends Error{static{o(this,"VaultExportSecretsInvalidAddressType")}message="Address type not found or incompatible with account"},Ca=class extends Error{static{o(this,"VaultExportSecretsHardwareWallet")}message="Hardware wallet account does not have known secr*ts"},Ba=class extends Error{static{o(this,"VaultExportSecretsReadOnlyAccount")}message="Read only account does not have known secr*ts"},Ka=class extends Error{static{o(this,"VaultImportReadOnlyAccount")}message="Invalid configuration for read only account"},Oo=class extends Error{static{o(this,"VaultImportSeedDuplicate")}message="Seed already exists in storage"},bi=class extends Error{static{o(this,"VaultFetchSeedInvalidIdentifier")}message="No seed exists in storage for identifier"},Ra=class extends Error{static{o(this,"VaultImportSeedInvalidDerivationIndex")}message="The derivation index is missing or invalid"},Na=class extends Error{static{o(this,"VaultImportPrivateKeyDuplicate")}message="Private key already exists in storage"},Co=class extends Error{static{o(this,"VaultFetchPrivateKeyInvalidIdentifier")}message="No private key exists in storage for identifier"};var On=class extends Error{static{o(this,"VaultImportAccountDuplicate")}message;constructor(t,r){super(),this.message=`Account of type ${t} found in Vault, while trying to add ${r} account`}},cu=class extends Error{static{o(this,"VaultSeedlessAccountAlreadyExists")}message="Vault already stores a seedless account"},jM=m.union([m.literal("unonboarded"),m.literal("unable-to-load-accounts"),m.literal("storage-temporarily-inaccessible")]),qM=m.union([m.literal("invalid-identifier"),m.literal("fetch-integrity-storage-error"),m.literal("fetch-entropy-storage-error"),m.literal("fetch-pk-storage-error"),m.literal("invalid-entropy"),m.literal("invalid-entropy-bip-39"),m.literal("invalid-checksum-bits"),m.literal("invalid-entropy-bits"),m.literal("invalid-checksum"),m.literal("invalid-entropy-length-less-than-twelve"),m.literal("invalid-entropy-length-more-than-twenty-four"),m.literal("invalid-entropy-length-wrong-word"),m.literal("invalid-pk-address-type"),m.literal("invalid-pk-identifier"),m.literal("invalid-pk"),m.literal("internal-error")]),WM=m.literal("safely-onboarded"),HM=m.union([m.object({status:jM,isOnboarded:m.literal(!1),reonboardingNeeded:m.literal(!1)}),m.object({status:qM,isOnboarded:m.literal(!0),reonboardingNeeded:m.literal(!0)}),m.object({status:WM,isOnboarded:m.literal(!0),reonboardingNeeded:m.literal(!1)})]);d();h();var Da=o((e,t=5)=>{let r=e.length,n=e.startsWith("0x")?t+2:t;return`${e.substring(0,n)}...${e.substring(r-t,r)}`},"formatHashMedium");d();h();d();h();var $M=o(e=>e.includes(".")||e.includes("@")?!1:cy.safeParse(e).success||ay.safeParse(e).success||Uy.safeParse(e).success||uy.safeParse(e).success,"isAddress"),cv=o((e,t=5)=>$M(e)?Da(e,t):e,"formatIfNotHandle");var GM=o((e,t,r,n=4)=>{let i=t?t.name:r,s=cv(e,n);return i?`${i} (${s})`:s},"formatAddress");d();h();var ZM=o(e=>`${e.substring(0,5)}...`,"formatAddressShort");d();h();var uv=class{static{o(this,"TTLCache")}storage;ttlMs;asyncFunction;cacheKey;cacheExpirationKey;constructor(t,r,n,i){this.storage=t,this.ttlMs=r,this.asyncFunction=n,this.cacheKey=`${i}-data`,this.cacheExpirationKey=`${i}-expiration`,this.updateCache()}async updateCache(){try{let t=await this.asyncFunction();await this.storage.set(this.cacheKey,t),await this.storage.set(this.cacheExpirationKey,Date.now()+this.ttlMs)}catch(t){throw new Error("error updating cache: "+t?.message,{cause:t})}}async get(){let t=await this.storage.get(this.cacheKey);try{return t||(await this.updateCache(),await this.storage.get(this.cacheKey))}finally{let r=await this.storage.get(this.cacheExpirationKey);(typeof r!="number"||r<Date.now())&&await this.updateCache()}}};d();h();var Ts=te(nt(),1);function qB(e,t=100){let[r,n]=(0,Ts.useState)(e),i=(0,Ts.useRef)(null);return(0,Ts.useEffect)(()=>(i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{n(e)},t),()=>{i.current&&clearTimeout(i.current)}),[n,e,t]),r}o(qB,"useDebouncedState");d();h();d();h();function wi(e){return Array.isArray?Array.isArray(e):yv(e)==="[object Array]"}o(wi,"isArray");var JM=1/0;function YM(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-JM?"-0":t}o(YM,"baseToString");function QM(e){return e==null?"":YM(e)}o(QM,"toString");function Cn(e){return typeof e=="string"}o(Cn,"isString");function mv(e){return typeof e=="number"}o(mv,"isNumber");function XM(e){return e===!0||e===!1||eE(e)&&yv(e)=="[object Boolean]"}o(XM,"isBoolean");function gv(e){return typeof e=="object"}o(gv,"isObject");function eE(e){return gv(e)&&e!==null}o(eE,"isObjectLike");function wr(e){return e!=null}o(wr,"isDefined");function Id(e){return!e.trim().length}o(Id,"isBlank");function yv(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}o(yv,"getTag");var tE="Incorrect 'index' type",rE=o(e=>`Invalid value for key ${e}`,"LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY"),nE=o(e=>`Pattern length exceeds max of ${e}.`,"PATTERN_LENGTH_TOO_LARGE"),iE=o(e=>`Missing ${e} property in key`,"MISSING_KEY_PROPERTY"),oE=o(e=>`Property 'weight' in key '${e}' must be a positive integer`,"INVALID_KEY_WEIGHT_VALUE"),lv=Object.prototype.hasOwnProperty,_d=class{static{o(this,"KeyStore")}constructor(t){this._keys=[],this._keyMap={};let r=0;t.forEach(n=>{let i=vv(n);this._keys.push(i),this._keyMap[i.id]=i,r+=i.weight}),this._keys.forEach(n=>{n.weight/=r})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function vv(e){let t=null,r=null,n=null,i=1,s=null;if(Cn(e)||wi(e))n=e,t=fv(e),r=kd(e);else{if(!lv.call(e,"name"))throw new Error(iE("name"));let c=e.name;if(n=c,lv.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(oE(c));t=fv(c),r=kd(c),s=e.getFn}return{path:t,id:r,weight:i,src:n,getFn:s}}o(vv,"createKey");function fv(e){return wi(e)?e:e.split(".")}o(fv,"createKeyPath");function kd(e){return wi(e)?e.join("."):e}o(kd,"createKeyId");function sE(e,t){let r=[],n=!1,i=o((s,c,f)=>{if(wr(s))if(!c[f])r.push(s);else{let p=c[f],v=s[p];if(!wr(v))return;if(f===c.length-1&&(Cn(v)||mv(v)||XM(v)))r.push(QM(v));else if(wi(v)){n=!0;for(let A=0,T=v.length;A<T;A+=1)i(v[A],c,f+1)}else c.length&&i(v,c,f+1)}},"deepGet");return i(e,Cn(t)?t.split("."):t,0),n?r:r[0]}o(sE,"get");var aE={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},cE={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:o((e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,"sortFn")},uE={location:0,threshold:.6,distance:100},lE={useExtendedSearch:!1,getFn:sE,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},Ze={...cE,...aE,...uE,...lE},fE=/[^ ]+/g;function dE(e=1,t=3){let r=new Map,n=Math.pow(10,t);return{get(i){let s=i.match(fE).length;if(r.has(s))return r.get(s);let c=1/Math.pow(s,.5*e),f=parseFloat(Math.round(c*n)/n);return r.set(s,f),f},clear(){r.clear()}}}o(dE,"norm");var Ua=class{static{o(this,"FuseIndex")}constructor({getFn:t=Ze.getFn,fieldNormWeight:r=Ze.fieldNormWeight}={}){this.norm=dE(r,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((r,n)=>{this._keysMap[r.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Cn(this.docs[0])?this.docs.forEach((t,r)=>{this._addString(t,r)}):this.docs.forEach((t,r)=>{this._addObject(t,r)}),this.norm.clear())}add(t){let r=this.size();Cn(t)?this._addString(t,r):this._addObject(t,r)}removeAt(t){this.records.splice(t,1);for(let r=t,n=this.size();r<n;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(t,r){return t[this._keysMap[r]]}size(){return this.records.length}_addString(t,r){if(!wr(t)||Id(t))return;let n={v:t,i:r,n:this.norm.get(t)};this.records.push(n)}_addObject(t,r){let n={i:r,$:{}};this.keys.forEach((i,s)=>{let c=i.getFn?i.getFn(t):this.getFn(t,i.path);if(wr(c)){if(wi(c)){let f=[],p=[{nestedArrIndex:-1,value:c}];for(;p.length;){let{nestedArrIndex:v,value:A}=p.pop();if(wr(A))if(Cn(A)&&!Id(A)){let T={v:A,i:v,n:this.norm.get(A)};f.push(T)}else wi(A)&&A.forEach((T,I)=>{p.push({nestedArrIndex:I,value:T})})}n.$[s]=f}else if(Cn(c)&&!Id(c)){let f={v:c,n:this.norm.get(c)};n.$[s]=f}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}};function bv(e,t,{getFn:r=Ze.getFn,fieldNormWeight:n=Ze.fieldNormWeight}={}){let i=new Ua({getFn:r,fieldNormWeight:n});return i.setKeys(e.map(vv)),i.setSources(t),i.create(),i}o(bv,"createIndex");function hE(e,{getFn:t=Ze.getFn,fieldNormWeight:r=Ze.fieldNormWeight}={}){let{keys:n,records:i}=e,s=new Ua({getFn:t,fieldNormWeight:r});return s.setKeys(n),s.setIndexRecords(i),s}o(hE,"parseIndex");function uu(e,{errors:t=0,currentLocation:r=0,expectedLocation:n=0,distance:i=Ze.distance,ignoreLocation:s=Ze.ignoreLocation}={}){let c=t/e.length;if(s)return c;let f=Math.abs(n-r);return i?c+f/i:f?1:c}o(uu,"computeScore$1");function pE(e=[],t=Ze.minMatchCharLength){let r=[],n=-1,i=-1,s=0;for(let c=e.length;s<c;s+=1){let f=e[s];f&&n===-1?n=s:!f&&n!==-1&&(i=s-1,i-n+1>=t&&r.push([n,i]),n=-1)}return e[s-1]&&s-n>=t&&r.push([n,s-1]),r}o(pE,"convertMaskToIndices");var Bo=32;function mE(e,t,r,{location:n=Ze.location,distance:i=Ze.distance,threshold:s=Ze.threshold,findAllMatches:c=Ze.findAllMatches,minMatchCharLength:f=Ze.minMatchCharLength,includeMatches:p=Ze.includeMatches,ignoreLocation:v=Ze.ignoreLocation}={}){if(t.length>Bo)throw new Error(nE(Bo));let A=t.length,T=e.length,I=Math.max(0,Math.min(n,T)),P=s,B=I,K=f>1||p,N=K?Array(T):[],D;for(;(D=e.indexOf(t,B))>-1;){let ee=uu(t,{currentLocation:D,expectedLocation:I,distance:i,ignoreLocation:v});if(P=Math.min(ee,P),B=D+A,K){let J=0;for(;J<A;)N[D+J]=1,J+=1}}B=-1;let Z=[],L=1,ne=A+T,ie=1<<A-1;for(let ee=0;ee<A;ee+=1){let J=0,fe=ne;for(;J<fe;)uu(t,{errors:ee,currentLocation:I+fe,expectedLocation:I,distance:i,ignoreLocation:v})<=P?J=fe:ne=fe,fe=Math.floor((ne-J)/2+J);ne=fe;let S=Math.max(1,I-fe+1),a=c?T:Math.min(I+fe,T)+A,l=Array(a+2);l[a+1]=(1<<ee)-1;for(let y=a;y>=S;y-=1){let b=y-1,M=r[e.charAt(b)];if(K&&(N[b]=+!!M),l[y]=(l[y+1]<<1|1)&M,ee&&(l[y]|=(Z[y+1]|Z[y])<<1|1|Z[y+1]),l[y]&ie&&(L=uu(t,{errors:ee,currentLocation:b,expectedLocation:I,distance:i,ignoreLocation:v}),L<=P)){if(P=L,B=b,B<=I)break;S=Math.max(1,2*I-B)}}if(uu(t,{errors:ee+1,currentLocation:I,expectedLocation:I,distance:i,ignoreLocation:v})>P)break;Z=l}let re={isMatch:B>=0,score:Math.max(.001,L)};if(K){let ee=pE(N,f);ee.length?p&&(re.indices=ee):re.isMatch=!1}return re}o(mE,"search");function gE(e){let t={};for(let r=0,n=e.length;r<n;r+=1){let i=e.charAt(r);t[i]=(t[i]||0)|1<<n-r-1}return t}o(gE,"createPatternAlphabet");var lu=class{static{o(this,"BitapSearch")}constructor(t,{location:r=Ze.location,threshold:n=Ze.threshold,distance:i=Ze.distance,includeMatches:s=Ze.includeMatches,findAllMatches:c=Ze.findAllMatches,minMatchCharLength:f=Ze.minMatchCharLength,isCaseSensitive:p=Ze.isCaseSensitive,ignoreLocation:v=Ze.ignoreLocation}={}){if(this.options={location:r,threshold:n,distance:i,includeMatches:s,findAllMatches:c,minMatchCharLength:f,isCaseSensitive:p,ignoreLocation:v},this.pattern=p?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;let A=o((I,P)=>{this.chunks.push({pattern:I,alphabet:gE(I),startIndex:P})},"addChunk"),T=this.pattern.length;if(T>Bo){let I=0,P=T%Bo,B=T-P;for(;I<B;)A(this.pattern.substr(I,Bo),I),I+=Bo;if(P){let K=T-Bo;A(this.pattern.substr(K),K)}}else A(this.pattern,0)}searchIn(t){let{isCaseSensitive:r,includeMatches:n}=this.options;if(r||(t=t.toLowerCase()),this.pattern===t){let B={isMatch:!0,score:0};return n&&(B.indices=[[0,t.length-1]]),B}let{location:i,distance:s,threshold:c,findAllMatches:f,minMatchCharLength:p,ignoreLocation:v}=this.options,A=[],T=0,I=!1;this.chunks.forEach(({pattern:B,alphabet:K,startIndex:N})=>{let{isMatch:D,score:Z,indices:L}=mE(t,B,K,{location:i+N,distance:s,threshold:c,findAllMatches:f,minMatchCharLength:p,includeMatches:n,ignoreLocation:v});D&&(I=!0),T+=Z,D&&L&&(A=[...A,...L])});let P={isMatch:I,score:I?T/this.chunks.length:1};return I&&n&&(P.indices=A),P}},Bn=class{static{o(this,"BaseMatch")}constructor(t){this.pattern=t}static isMultiMatch(t){return dv(t,this.multiRegex)}static isSingleMatch(t){return dv(t,this.singleRegex)}search(){}};function dv(e,t){let r=e.match(t);return r?r[1]:null}o(dv,"getMatch");var Pd=class extends Bn{static{o(this,"ExactMatch")}constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){let r=t===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}},Od=class extends Bn{static{o(this,"InverseExactMatch")}constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){let n=t.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}},Cd=class extends Bn{static{o(this,"PrefixExactMatch")}constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){let r=t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}},Bd=class extends Bn{static{o(this,"InversePrefixExactMatch")}constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){let r=!t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}},Kd=class extends Bn{static{o(this,"SuffixExactMatch")}constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){let r=t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},Rd=class extends Bn{static{o(this,"InverseSuffixExactMatch")}constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){let r=!t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}},fu=class extends Bn{static{o(this,"FuzzyMatch")}constructor(t,{location:r=Ze.location,threshold:n=Ze.threshold,distance:i=Ze.distance,includeMatches:s=Ze.includeMatches,findAllMatches:c=Ze.findAllMatches,minMatchCharLength:f=Ze.minMatchCharLength,isCaseSensitive:p=Ze.isCaseSensitive,ignoreLocation:v=Ze.ignoreLocation}={}){super(t),this._bitapSearch=new lu(t,{location:r,threshold:n,distance:i,includeMatches:s,findAllMatches:c,minMatchCharLength:f,isCaseSensitive:p,ignoreLocation:v})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}},du=class extends Bn{static{o(this,"IncludeMatch")}constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let r=0,n,i=[],s=this.pattern.length;for(;(n=t.indexOf(this.pattern,r))>-1;)r=n+s,i.push([n,r-1]);let c=!!i.length;return{isMatch:c,score:c?0:1,indices:i}}},Nd=[Pd,du,Cd,Bd,Rd,Kd,Od,fu],hv=Nd.length,yE=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,vE="|";function bE(e,t={}){return e.split(vE).map(r=>{let n=r.trim().split(yE).filter(s=>s&&!!s.trim()),i=[];for(let s=0,c=n.length;s<c;s+=1){let f=n[s],p=!1,v=-1;for(;!p&&++v<hv;){let A=Nd[v],T=A.isMultiMatch(f);T&&(i.push(new A(T,t)),p=!0)}if(!p)for(v=-1;++v<hv;){let A=Nd[v],T=A.isSingleMatch(f);if(T){i.push(new A(T,t));break}}}return i})}o(bE,"parseQuery");var wE=new Set([fu.type,du.type]),Dd=class{static{o(this,"ExtendedSearch")}constructor(t,{isCaseSensitive:r=Ze.isCaseSensitive,includeMatches:n=Ze.includeMatches,minMatchCharLength:i=Ze.minMatchCharLength,ignoreLocation:s=Ze.ignoreLocation,findAllMatches:c=Ze.findAllMatches,location:f=Ze.location,threshold:p=Ze.threshold,distance:v=Ze.distance}={}){this.query=null,this.options={isCaseSensitive:r,includeMatches:n,minMatchCharLength:i,findAllMatches:c,ignoreLocation:s,location:f,threshold:p,distance:v},this.pattern=r?t:t.toLowerCase(),this.query=bE(this.pattern,this.options)}static condition(t,r){return r.useExtendedSearch}searchIn(t){let r=this.query;if(!r)return{isMatch:!1,score:1};let{includeMatches:n,isCaseSensitive:i}=this.options;t=i?t:t.toLowerCase();let s=0,c=[],f=0;for(let p=0,v=r.length;p<v;p+=1){let A=r[p];c.length=0,s=0;for(let T=0,I=A.length;T<I;T+=1){let P=A[T],{isMatch:B,indices:K,score:N}=P.search(t);if(B){if(s+=1,f+=N,n){let D=P.constructor.type;wE.has(D)?c=[...c,...K]:c.push(K)}}else{f=0,s=0,c.length=0;break}}if(s){let T={isMatch:!0,score:f/s};return n&&(T.indices=c),T}}return{isMatch:!1,score:1}}},Ud=[];function xE(...e){Ud.push(...e)}o(xE,"register");function Ld(e,t){for(let r=0,n=Ud.length;r<n;r+=1){let i=Ud[r];if(i.condition(e,t))return new i(e,t)}return new lu(e,t)}o(Ld,"createSearcher");var hu={AND:"$and",OR:"$or"},Vd={PATH:"$path",PATTERN:"$val"},Fd=o(e=>!!(e[hu.AND]||e[hu.OR]),"isExpression"),SE=o(e=>!!e[Vd.PATH],"isPath"),AE=o(e=>!wi(e)&&gv(e)&&!Fd(e),"isLeaf"),pv=o(e=>({[hu.AND]:Object.keys(e).map(t=>({[t]:e[t]}))}),"convertToExplicit");function wv(e,t,{auto:r=!0}={}){let n=o(i=>{let s=Object.keys(i),c=SE(i);if(!c&&s.length>1&&!Fd(i))return n(pv(i));if(AE(i)){let p=c?i[Vd.PATH]:s[0],v=c?i[Vd.PATTERN]:i[p];if(!Cn(v))throw new Error(rE(p));let A={keyId:kd(p),pattern:v};return r&&(A.searcher=Ld(v,t)),A}let f={children:[],operator:s[0]};return s.forEach(p=>{let v=i[p];wi(v)&&v.forEach(A=>{f.children.push(n(A))})}),f},"next");return Fd(e)||(e=pv(e)),n(e)}o(wv,"parse");function ME(e,{ignoreFieldNorm:t=Ze.ignoreFieldNorm}){e.forEach(r=>{let n=1;r.matches.forEach(({key:i,norm:s,score:c})=>{let f=i?i.weight:null;n*=Math.pow(c===0&&f?Number.EPSILON:c,(f||1)*(t?1:s))}),r.score=n})}o(ME,"computeScore");function EE(e,t){let r=e.matches;t.matches=[],wr(r)&&r.forEach(n=>{if(!wr(n.indices)||!n.indices.length)return;let{indices:i,value:s}=n,c={indices:i,value:s};n.key&&(c.key=n.key.src),n.idx>-1&&(c.refIndex=n.idx),t.matches.push(c)})}o(EE,"transformMatches");function TE(e,t){t.score=e.score}o(TE,"transformScore");function IE(e,t,{includeMatches:r=Ze.includeMatches,includeScore:n=Ze.includeScore}={}){let i=[];return r&&i.push(EE),n&&i.push(TE),e.map(s=>{let{idx:c}=s,f={item:t[c],refIndex:c};return i.length&&i.forEach(p=>{p(s,f)}),f})}o(IE,"format");var xi=class{static{o(this,"Fuse")}constructor(t,r={},n){this.options={...Ze,...r},this.options.useExtendedSearch,this._keyStore=new _d(this.options.keys),this.setCollection(t,n)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof Ua))throw new Error(tE);this._myIndex=r||bv(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){wr(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){let r=[];for(let n=0,i=this._docs.length;n<i;n+=1){let s=this._docs[n];t(s,n)&&(this.removeAt(n),n-=1,i-=1,r.push(s))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){let{includeMatches:n,includeScore:i,shouldSort:s,sortFn:c,ignoreFieldNorm:f}=this.options,p=Cn(t)?Cn(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return ME(p,{ignoreFieldNorm:f}),s&&p.sort(c),mv(r)&&r>-1&&(p=p.slice(0,r)),IE(p,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(t){let r=Ld(t,this.options),{records:n}=this._myIndex,i=[];return n.forEach(({v:s,i:c,n:f})=>{if(!wr(s))return;let{isMatch:p,score:v,indices:A}=r.searchIn(s);p&&i.push({item:s,idx:c,matches:[{score:v,value:s,norm:f,indices:A}]})}),i}_searchLogical(t){let r=wv(t,this.options),n=o((f,p,v)=>{if(!f.children){let{keyId:T,searcher:I}=f,P=this._findMatches({key:this._keyStore.get(T),value:this._myIndex.getValueForItemAtKeyId(p,T),searcher:I});return P&&P.length?[{idx:v,item:p,matches:P}]:[]}let A=[];for(let T=0,I=f.children.length;T<I;T+=1){let P=f.children[T],B=n(P,p,v);if(B.length)A.push(...B);else if(f.operator===hu.AND)return[]}return A},"evaluate"),i=this._myIndex.records,s={},c=[];return i.forEach(({$:f,i:p})=>{if(wr(f)){let v=n(r,f,p);v.length&&(s[p]||(s[p]={idx:p,item:f,matches:[]},c.push(s[p])),v.forEach(({matches:A})=>{s[p].matches.push(...A)}))}}),c}_searchObjectList(t){let r=Ld(t,this.options),{keys:n,records:i}=this._myIndex,s=[];return i.forEach(({$:c,i:f})=>{if(!wr(c))return;let p=[];n.forEach((v,A)=>{p.push(...this._findMatches({key:v,value:c[A],searcher:r}))}),p.length&&s.push({idx:f,item:c,matches:p})}),s}_findMatches({key:t,value:r,searcher:n}){if(!wr(r))return[];let i=[];if(wi(r))r.forEach(({v:s,i:c,n:f})=>{if(!wr(s))return;let{isMatch:p,score:v,indices:A}=n.searchIn(s);p&&i.push({score:v,key:t,value:s,idx:c,norm:f,indices:A})});else{let{v:s,n:c}=r,{isMatch:f,score:p,indices:v}=n.searchIn(s);f&&i.push({score:p,key:t,value:s,norm:c,indices:v})}return i}};xi.version="7.0.0";xi.createIndex=bv;xi.parseIndex=hE;xi.config=Ze;xi.parseQuery=wv;xE(Dd);d();h();function gu(e,t,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return o(i,"adopt"),new(r||(r=Promise))(function(s,c){function f(A){try{v(n.next(A))}catch(T){c(T)}}o(f,"fulfilled");function p(A){try{v(n.throw(A))}catch(T){c(T)}}o(p,"rejected");function v(A){A.done?s(A.value):i(A.value).then(f,p)}o(v,"step"),v((n=n.apply(e,t||[])).next())})}o(gu,"__awaiter");var _E="ENTRIES",Ev="KEYS",Tv="VALUES",jt="",La=class{static{o(this,"TreeIterator")}constructor(t,r){let n=t._tree,i=Array.from(n.keys());this.set=t,this._type=r,this._path=i.length>0?[{node:n,keys:i}]:[]}next(){let t=this.dive();return this.backtrack(),t}dive(){if(this._path.length===0)return{done:!0,value:void 0};let{node:t,keys:r}=Is(this._path);if(Is(r)===jt)return{done:!1,value:this.result()};let n=t.get(Is(r));return this._path.push({node:n,keys:Array.from(n.keys())}),this.dive()}backtrack(){if(this._path.length===0)return;let t=Is(this._path).keys;t.pop(),!(t.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:t})=>Is(t)).filter(t=>t!==jt).join("")}value(){return Is(this._path).node.get(jt)}result(){switch(this._type){case Tv:return this.value();case Ev:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}},Is=o(e=>e[e.length-1],"last$1"),kE=o((e,t,r)=>{let n=new Map;if(t===void 0)return n;let i=t.length+1,s=i+r,c=new Uint8Array(s*i).fill(r+1);for(let f=0;f<i;++f)c[f]=f;for(let f=1;f<s;++f)c[f*i]=f;return Iv(e,t,r,n,c,1,i,""),n},"fuzzySearch"),Iv=o((e,t,r,n,i,s,c,f)=>{let p=s*c;e:for(let v of e.keys())if(v===jt){let A=i[p-1];A<=r&&n.set(f,[e.get(v),A])}else{let A=s;for(let T=0;T<v.length;++T,++A){let I=v[T],P=c*A,B=P-c,K=i[P],N=Math.max(0,A-r-1),D=Math.min(c-1,A+r);for(let Z=N;Z<D;++Z){let L=I!==t[Z],ne=i[B+Z]+ +L,ie=i[B+Z+1]+1,re=i[P+Z]+1,ee=i[P+Z+1]=Math.min(ne,ie,re);ee<K&&(K=ee)}if(K>r)continue e}Iv(e.get(v),t,r,n,i,A,c,f+v)}},"recurse"),Va=class e{static{o(this,"SearchableMap")}constructor(t=new Map,r=""){this._size=void 0,this._tree=t,this._prefix=r}atPrefix(t){if(!t.startsWith(this._prefix))throw new Error("Mismatched prefix");let[r,n]=yu(this._tree,t.slice(this._prefix.length));if(r===void 0){let[i,s]=Zd(n);for(let c of i.keys())if(c!==jt&&c.startsWith(s)){let f=new Map;return f.set(c.slice(s.length),i.get(c)),new e(f,t)}}return new e(r,t)}clear(){this._size=void 0,this._tree.clear()}delete(t){return this._size=void 0,PE(this._tree,t)}entries(){return new La(this,_E)}forEach(t){for(let[r,n]of this)t(r,n,this)}fuzzyGet(t,r){return kE(this._tree,t,r)}get(t){let r=Hd(this._tree,t);return r!==void 0?r.get(jt):void 0}has(t){let r=Hd(this._tree,t);return r!==void 0&&r.has(jt)}keys(){return new La(this,Ev)}set(t,r){if(typeof t!="string")throw new Error("key must be a string");return this._size=void 0,zd(this._tree,t).set(jt,r),this}get size(){if(this._size)return this._size;this._size=0;let t=this.entries();for(;!t.next().done;)this._size+=1;return this._size}update(t,r){if(typeof t!="string")throw new Error("key must be a string");this._size=void 0;let n=zd(this._tree,t);return n.set(jt,r(n.get(jt))),this}fetch(t,r){if(typeof t!="string")throw new Error("key must be a string");this._size=void 0;let n=zd(this._tree,t),i=n.get(jt);return i===void 0&&n.set(jt,i=r()),i}values(){return new La(this,Tv)}[Symbol.iterator](){return this.entries()}static from(t){let r=new e;for(let[n,i]of t)r.set(n,i);return r}static fromObject(t){return e.from(Object.entries(t))}},yu=o((e,t,r=[])=>{if(t.length===0||e==null)return[e,r];for(let n of e.keys())if(n!==jt&&t.startsWith(n))return r.push([e,n]),yu(e.get(n),t.slice(n.length),r);return r.push([e,t]),yu(void 0,"",r)},"trackDown"),Hd=o((e,t)=>{if(t.length===0||e==null)return e;for(let r of e.keys())if(r!==jt&&t.startsWith(r))return Hd(e.get(r),t.slice(r.length))},"lookup"),zd=o((e,t)=>{let r=t.length;e:for(let n=0;e&&n<r;){for(let s of e.keys())if(s!==jt&&t[n]===s[0]){let c=Math.min(r-n,s.length),f=1;for(;f<c&&t[n+f]===s[f];)++f;let p=e.get(s);if(f===s.length)e=p;else{let v=new Map;v.set(s.slice(f),p),e.set(t.slice(n,n+f),v),e.delete(s),e=v}n+=f;continue e}let i=new Map;return e.set(t.slice(n),i),i}return e},"createPath"),PE=o((e,t)=>{let[r,n]=yu(e,t);if(r!==void 0){if(r.delete(jt),r.size===0)_v(n);else if(r.size===1){let[i,s]=r.entries().next().value;kv(n,i,s)}}},"remove"),_v=o(e=>{if(e.length===0)return;let[t,r]=Zd(e);if(t.delete(r),t.size===0)_v(e.slice(0,-1));else if(t.size===1){let[n,i]=t.entries().next().value;n!==jt&&kv(e.slice(0,-1),n,i)}},"cleanup"),kv=o((e,t,r)=>{if(e.length===0)return;let[n,i]=Zd(e);n.set(i+t,r),n.delete(i)},"merge"),Zd=o(e=>e[e.length-1],"last"),Jd="or",Pv="and",OE="and_not",Fa=class e{static{o(this,"MiniSearch")}constructor(t){if(t?.fields==null)throw new Error('MiniSearch: option "fields" must be provided');let r=t.autoVacuum==null||t.autoVacuum===!0?Wd:t.autoVacuum;this._options=Object.assign(Object.assign(Object.assign({},qd),t),{autoVacuum:r,searchOptions:Object.assign(Object.assign({},xv),t.searchOptions||{}),autoSuggestOptions:Object.assign(Object.assign({},NE),t.autoSuggestOptions||{})}),this._index=new Va,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=Gd,this.addFields(this._options.fields)}add(t){let{extractField:r,tokenize:n,processTerm:i,fields:s,idField:c}=this._options,f=r(t,c);if(f==null)throw new Error(`MiniSearch: document does not have ID field "${c}"`);if(this._idToShortId.has(f))throw new Error(`MiniSearch: duplicate ID ${f}`);let p=this.addDocumentId(f);this.saveStoredFields(p,t);for(let v of s){let A=r(t,v);if(A==null)continue;let T=n(A.toString(),v),I=this._fieldIds[v],P=new Set(T).size;this.addFieldLength(p,I,this._documentCount-1,P);for(let B of T){let K=i(B,v);if(Array.isArray(K))for(let N of K)this.addTerm(I,p,N);else K&&this.addTerm(I,p,K)}}}addAll(t){for(let r of t)this.add(r)}addAllAsync(t,r={}){let{chunkSize:n=10}=r,i={chunk:[],promise:Promise.resolve()},{chunk:s,promise:c}=t.reduce(({chunk:f,promise:p},v,A)=>(f.push(v),(A+1)%n===0?{chunk:[],promise:p.then(()=>new Promise(T=>setTimeout(T,0))).then(()=>this.addAll(f))}:{chunk:f,promise:p}),i);return c.then(()=>this.addAll(s))}remove(t){let{tokenize:r,processTerm:n,extractField:i,fields:s,idField:c}=this._options,f=i(t,c);if(f==null)throw new Error(`MiniSearch: document does not have ID field "${c}"`);let p=this._idToShortId.get(f);if(p==null)throw new Error(`MiniSearch: cannot remove document with ID ${f}: it is not in the index`);for(let v of s){let A=i(t,v);if(A==null)continue;let T=r(A.toString(),v),I=this._fieldIds[v],P=new Set(T).size;this.removeFieldLength(p,I,this._documentCount,P);for(let B of T){let K=n(B,v);if(Array.isArray(K))for(let N of K)this.removeTerm(I,p,N);else K&&this.removeTerm(I,p,K)}}this._storedFields.delete(p),this._documentIds.delete(p),this._idToShortId.delete(f),this._fieldLength.delete(p),this._documentCount-=1}removeAll(t){if(t)for(let r of t)this.remove(r);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new Va,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(t){let r=this._idToShortId.get(t);if(r==null)throw new Error(`MiniSearch: cannot discard document with ID ${t}: it is not in the index`);this._idToShortId.delete(t),this._documentIds.delete(r),this._storedFields.delete(r),(this._fieldLength.get(r)||[]).forEach((n,i)=>{this.removeFieldLength(r,i,this._documentCount,n)}),this._fieldLength.delete(r),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(this._options.autoVacuum===!1)return;let{minDirtFactor:t,minDirtCount:r,batchSize:n,batchWait:i}=this._options.autoVacuum;this.conditionalVacuum({batchSize:n,batchWait:i},{minDirtCount:r,minDirtFactor:t})}discardAll(t){let r=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(let n of t)this.discard(n)}finally{this._options.autoVacuum=r}this.maybeAutoVacuum()}replace(t){let{idField:r,extractField:n}=this._options,i=n(t,r);this.discard(i),this.add(t)}vacuum(t={}){return this.conditionalVacuum(t)}conditionalVacuum(t,r){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&r,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(()=>{let n=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=Gd,this.performVacuuming(t,n)}),this._enqueuedVacuum)):this.vacuumConditionsMet(r)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(t),this._currentVacuum)}performVacuuming(t,r){return gu(this,void 0,void 0,function*(){let n=this._dirtCount;if(this.vacuumConditionsMet(r)){let i=t.batchSize||$d.batchSize,s=t.batchWait||$d.batchWait,c=1;for(let[f,p]of this._index){for(let[v,A]of p)for(let[T]of A)this._documentIds.has(T)||(A.size<=1?p.delete(v):A.delete(T));this._index.get(f).size===0&&this._index.delete(f),c%i===0&&(yield new Promise(v=>setTimeout(v,s))),c+=1}this._dirtCount-=n}yield null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null})}vacuumConditionsMet(t){if(t==null)return!0;let{minDirtCount:r,minDirtFactor:n}=t;return r=r||Wd.minDirtCount,n=n||Wd.minDirtFactor,this.dirtCount>=r&&this.dirtFactor>=n}get isVacuuming(){return this._currentVacuum!=null}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(t){return this._idToShortId.has(t)}getStoredFields(t){let r=this._idToShortId.get(t);if(r!=null)return this._storedFields.get(r)}search(t,r={}){let{searchOptions:n}=this._options,i=Object.assign(Object.assign({},n),r),s=this.executeQuery(t,r),c=[];for(let[f,{score:p,terms:v,match:A}]of s){let T=v.length||1,I={id:this._documentIds.get(f),score:p*T,terms:Object.keys(A),queryTerms:v,match:A};Object.assign(I,this._storedFields.get(f)),(i.filter==null||i.filter(I))&&c.push(I)}return t===e.wildcard&&i.boostDocument==null||c.sort(Av),c}autoSuggest(t,r={}){r=Object.assign(Object.assign({},this._options.autoSuggestOptions),r);let n=new Map;for(let{score:s,terms:c}of this.search(t,r)){let f=c.join(" "),p=n.get(f);p!=null?(p.score+=s,p.count+=1):n.set(f,{score:s,terms:c,count:1})}let i=[];for(let[s,{score:c,terms:f,count:p}]of n)i.push({suggestion:s,terms:f,score:c/p});return i.sort(Av),i}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(t,r){if(r==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(t),r)}static loadJSONAsync(t,r){return gu(this,void 0,void 0,function*(){if(r==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(t),r)})}static getDefault(t){if(qd.hasOwnProperty(t))return jd(qd,t);throw new Error(`MiniSearch: unknown option "${t}"`)}static loadJS(t,r){let{index:n,documentIds:i,fieldLength:s,storedFields:c,serializationVersion:f}=t,p=this.instantiateMiniSearch(t,r);p._documentIds=pu(i),p._fieldLength=pu(s),p._storedFields=pu(c);for(let[v,A]of p._documentIds)p._idToShortId.set(A,v);for(let[v,A]of n){let T=new Map;for(let I of Object.keys(A)){let P=A[I];f===1&&(P=P.ds),T.set(parseInt(I,10),pu(P))}p._index.set(v,T)}return p}static loadJSAsync(t,r){return gu(this,void 0,void 0,function*(){let{index:n,documentIds:i,fieldLength:s,storedFields:c,serializationVersion:f}=t,p=this.instantiateMiniSearch(t,r);p._documentIds=yield mu(i),p._fieldLength=yield mu(s),p._storedFields=yield mu(c);for(let[A,T]of p._documentIds)p._idToShortId.set(T,A);let v=0;for(let[A,T]of n){let I=new Map;for(let P of Object.keys(T)){let B=T[P];f===1&&(B=B.ds),I.set(parseInt(P,10),yield mu(B))}++v%1e3===0&&(yield Ov(0)),p._index.set(A,I)}return p})}static instantiateMiniSearch(t,r){let{documentCount:n,nextId:i,fieldIds:s,averageFieldLength:c,dirtCount:f,serializationVersion:p}=t;if(p!==1&&p!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");let v=new e(r);return v._documentCount=n,v._nextId=i,v._idToShortId=new Map,v._fieldIds=s,v._avgFieldLength=c,v._dirtCount=f||0,v._index=new Va,v}executeQuery(t,r={}){if(t===e.wildcard)return this.executeWildcardQuery(r);if(typeof t!="string"){let I=Object.assign(Object.assign(Object.assign({},r),t),{queries:void 0}),P=t.queries.map(B=>this.executeQuery(B,I));return this.combineResults(P,I.combineWith)}let{tokenize:n,processTerm:i,searchOptions:s}=this._options,c=Object.assign(Object.assign({tokenize:n,processTerm:i},s),r),{tokenize:f,processTerm:p}=c,T=f(t).flatMap(I=>p(I)).filter(I=>!!I).map(RE(c)).map(I=>this.executeQuerySpec(I,c));return this.combineResults(T,c.combineWith)}executeQuerySpec(t,r){let n=Object.assign(Object.assign({},this._options.searchOptions),r),i=(n.fields||this._options.fields).reduce((K,N)=>Object.assign(Object.assign({},K),{[N]:jd(n.boost,N)||1}),{}),{boostDocument:s,weights:c,maxFuzzy:f,bm25:p}=n,{fuzzy:v,prefix:A}=Object.assign(Object.assign({},xv.weights),c),T=this._index.get(t.term),I=this.termResults(t.term,t.term,1,t.termBoost,T,i,s,p),P,B;if(t.prefix&&(P=this._index.atPrefix(t.term)),t.fuzzy){let K=t.fuzzy===!0?.2:t.fuzzy,N=K<1?Math.min(f,Math.round(t.term.length*K)):K;N&&(B=this._index.fuzzyGet(t.term,N))}if(P)for(let[K,N]of P){let D=K.length-t.term.length;if(!D)continue;B?.delete(K);let Z=A*K.length/(K.length+.3*D);this.termResults(t.term,K,Z,t.termBoost,N,i,s,p,I)}if(B)for(let K of B.keys()){let[N,D]=B.get(K);if(!D)continue;let Z=v*K.length/(K.length+D);this.termResults(t.term,K,Z,t.termBoost,N,i,s,p,I)}return I}executeWildcardQuery(t){let r=new Map,n=Object.assign(Object.assign({},this._options.searchOptions),t);for(let[i,s]of this._documentIds){let c=n.boostDocument?n.boostDocument(s,"",this._storedFields.get(i)):1;r.set(i,{score:c,terms:[],match:{}})}return r}combineResults(t,r=Jd){if(t.length===0)return new Map;let n=r.toLowerCase(),i=CE[n];if(!i)throw new Error(`Invalid combination operator: ${r}`);return t.reduce(i)||new Map}toJSON(){let t=[];for(let[r,n]of this._index){let i={};for(let[s,c]of n)i[s]=Object.fromEntries(c);t.push([r,i])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:t,serializationVersion:2}}termResults(t,r,n,i,s,c,f,p,v=new Map){if(s==null)return v;for(let A of Object.keys(c)){let T=c[A],I=this._fieldIds[A],P=s.get(I);if(P==null)continue;let B=P.size,K=this._avgFieldLength[I];for(let N of P.keys()){if(!this._documentIds.has(N)){this.removeTerm(I,N,r),B-=1;continue}let D=f?f(this._documentIds.get(N),r,this._storedFields.get(N)):1;if(!D)continue;let Z=P.get(N),L=this._fieldLength.get(N)[I],ne=KE(Z,B,this._documentCount,L,K,p),ie=n*i*T*D*ne,re=v.get(N);if(re){re.score+=ie,DE(re.terms,t);let ee=jd(re.match,r);ee?ee.push(A):re.match[r]=[A]}else v.set(N,{score:ie,terms:[t],match:{[r]:[A]}})}}return v}addTerm(t,r,n){let i=this._index.fetch(n,Mv),s=i.get(t);if(s==null)s=new Map,s.set(r,1),i.set(t,s);else{let c=s.get(r);s.set(r,(c||0)+1)}}removeTerm(t,r,n){if(!this._index.has(n)){this.warnDocumentChanged(r,t,n);return}let i=this._index.fetch(n,Mv),s=i.get(t);s==null||s.get(r)==null?this.warnDocumentChanged(r,t,n):s.get(r)<=1?s.size<=1?i.delete(t):s.delete(r):s.set(r,s.get(r)-1),this._index.get(n).size===0&&this._index.delete(n)}warnDocumentChanged(t,r,n){for(let i of Object.keys(this._fieldIds))if(this._fieldIds[i]===r){this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(t)} has changed before removal: term "${n}" was not present in field "${i}". Removing a document after it has changed can corrupt the index!`,"version_conflict");return}}addDocumentId(t){let r=this._nextId;return this._idToShortId.set(t,r),this._documentIds.set(r,t),this._documentCount+=1,this._nextId+=1,r}addFields(t){for(let r=0;r<t.length;r++)this._fieldIds[t[r]]=r}addFieldLength(t,r,n,i){let s=this._fieldLength.get(t);s==null&&this._fieldLength.set(t,s=[]),s[r]=i;let f=(this._avgFieldLength[r]||0)*n+i;this._avgFieldLength[r]=f/(n+1)}removeFieldLength(t,r,n,i){if(n===1){this._avgFieldLength[r]=0;return}let s=this._avgFieldLength[r]*n-i;this._avgFieldLength[r]=s/(n-1)}saveStoredFields(t,r){let{storeFields:n,extractField:i}=this._options;if(n==null||n.length===0)return;let s=this._storedFields.get(t);s==null&&this._storedFields.set(t,s={});for(let c of n){let f=i(r,c);f!==void 0&&(s[c]=f)}}};Fa.wildcard=Symbol("*");var jd=o((e,t)=>Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0,"getOwnProperty"),CE={[Jd]:(e,t)=>{for(let r of t.keys()){let n=e.get(r);if(n==null)e.set(r,t.get(r));else{let{score:i,terms:s,match:c}=t.get(r);n.score=n.score+i,n.match=Object.assign(n.match,c),Sv(n.terms,s)}}return e},[Pv]:(e,t)=>{let r=new Map;for(let n of t.keys()){let i=e.get(n);if(i==null)continue;let{score:s,terms:c,match:f}=t.get(n);Sv(i.terms,c),r.set(n,{score:i.score+s,terms:i.terms,match:Object.assign(i.match,f)})}return r},[OE]:(e,t)=>{for(let r of t.keys())e.delete(r);return e}},BE={k:1.2,b:.7,d:.5},KE=o((e,t,r,n,i,s)=>{let{k:c,b:f,d:p}=s;return Math.log(1+(r-t+.5)/(t+.5))*(p+e*(c+1)/(e+c*(1-f+f*n/i)))},"calcBM25Score"),RE=o(e=>(t,r,n)=>{let i=typeof e.fuzzy=="function"?e.fuzzy(t,r,n):e.fuzzy||!1,s=typeof e.prefix=="function"?e.prefix(t,r,n):e.prefix===!0,c=typeof e.boostTerm=="function"?e.boostTerm(t,r,n):1;return{term:t,fuzzy:i,prefix:s,termBoost:c}},"termToQuerySpec"),qd={idField:"id",extractField:o((e,t)=>e[t],"extractField"),tokenize:o(e=>e.split(UE),"tokenize"),processTerm:o(e=>e.toLowerCase(),"processTerm"),fields:void 0,searchOptions:void 0,storeFields:[],logger:o((e,t)=>{typeof console?.[e]=="function"&&console[e](t)},"logger"),autoVacuum:!0},xv={combineWith:Jd,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:BE},NE={combineWith:Pv,prefix:o((e,t,r)=>t===r.length-1,"prefix")},$d={batchSize:1e3,batchWait:10},Gd={minDirtFactor:.1,minDirtCount:20},Wd=Object.assign(Object.assign({},$d),Gd),DE=o((e,t)=>{e.includes(t)||e.push(t)},"assignUniqueTerm"),Sv=o((e,t)=>{for(let r of t)e.includes(r)||e.push(r)},"assignUniqueTerms"),Av=o(({score:e},{score:t})=>t-e,"byScore"),Mv=o(()=>new Map,"createMap"),pu=o(e=>{let t=new Map;for(let r of Object.keys(e))t.set(parseInt(r,10),e[r]);return t},"objectToNumericMap"),mu=o(e=>gu(void 0,void 0,void 0,function*(){let t=new Map,r=0;for(let n of Object.keys(e))t.set(parseInt(n,10),e[n]),++r%1e3===0&&(yield Ov(0));return t}),"objectToNumericMapAsync"),Ov=o(e=>new Promise(t=>setTimeout(t,e)),"wait"),UE=/[\n\r\p{Z}\p{P}]+/u;var za=te(nt(),1);var oK=o((e,t,r,n=!1)=>{let i=(0,za.useMemo)(()=>n?null:new xi(e,r),[e,r,n]);return(0,za.useMemo)(()=>n||!i?e:t?i.search(t).map(s=>s.item):e,[i,e,t,n])},"useFuse"),sK=o((e,t,r,n=!1)=>{let i=(0,za.useMemo)(()=>{if(n)return null;let s=new Fa(r);return s.addAll(e),s},[e,r,n]);return(0,za.useMemo)(()=>n||!i?e:t?i.search(t).map(s=>s):e,[i,e,t,n])},"useMiniSearch");d();h();var Yd=te(nt(),1);d();h();var Cv=te(nt(),1);function Bv(){let e=(0,Cv.useRef)(!0);return e.current?(e.current=!1,!0):e.current}o(Bv,"useFirstMountState");var LE=o((e,t)=>e===t,"strictEquals");function VE(e,t=LE){let r=(0,Yd.useRef)(void 0),n=(0,Yd.useRef)(e);return!Bv()&&!t(n.current,e)&&(r.current=n.current,n.current=e),r.current}o(VE,"usePreviousDistinct");d();h();d();h();var Nv=te(Rv(),1),Ji=te(IM(),1);(0,Nv.default)(Ji.default.localeData("en"),{abbreviations:{thousand:"K",million:"M",billion:"B",trillion:"T"}});var Dv=1e-5,Uv="0,0.[00000]",JE="0,0.[00]a",YE=1e6,Lv=o((e,t=Uv)=>{let r=new Xt(e);if(r.abs().isGreaterThan(0)&&r.abs().isLessThan(Dv))return`< ${r.isLessThan(0)?"-":""}${Dv}`;let n=(0,Ji.default)(r.toNumber());return t===Uv&&r.isGreaterThanOrEqualTo(YE)?n.format(JE):n.format(t)},"formatTokenAmount");d();h();var RK=o((e,t)=>{let r=new Xt(e).div(ws(t)).toNumber();return Lv(r)},"amountToFormattedAmount");d();h();var FK=o((e,t)=>{let r=t?.format??"0,0.00%";return`${(t?.includePlusPrefix??!1)&&e>0?"+":""}${(0,Ji.default)(e).format(e===0?"0%":r)}`},"formatPercentage");d();h();var HK=o(e=>e.replace(/^(^[\w-_]*:\/\/)?(?:www\.)?/i,"").split("/")[0],"removeWebPrefixes");d();h();var YK=o((e,t)=>{let r=e,n=`${r.substring(0,t)}...`;return n.length>=e.length?e:r.length>t?n:r},"truncateString");d();h();d();h();d();h();var ja=te(Sd(),1),zv=te(EM(),1),jv=te(Vv(),1),qv=te(Fv(),1);ja.default.extend(jv.default);ja.default.extend(zv.default);ja.default.extend(qv.default);var Ko=ja.default,aR=new Date().getTimezoneOffset()*6e4;var vR=o((e,t)=>{let r=Ko(e),n=r.format("MMM D, YYYY"),i=r.format("h:mm a");return`${n} ${t||""} ${i}`},"formatTimestampAsDate");d();h();var rh=te(Sd(),1);var MR=o((e,t)=>{let{compact:r=!1}=t??{},i=new Intl.DateTimeFormat(void 0,{hour:"numeric"}).resolvedOptions().hour12??!0?"h:mm a":"HH:mm",s=(0,rh.default)(),c=(0,rh.default)(e),f=c.format(i),p=s.startOf("day"),A=c.startOf("day").diff(p,"day");if(A===0)return f;if(A===1)return`${f} ${Kr.t("tomorrow")}`;if(A>=2&&A<=7)return`${new Intl.DateTimeFormat(void 0,{weekday:"long"}).format(c.toDate())} ${f}`;let I=!r||c.diff(s,"year",!0)>=1?"MMM D, YYYY":"MMM D";return`${c.format(I)} ${f}`},"formatUntil");d();h();var kR=o(e=>{if(e)try{return new URL(e).origin}catch{return}},"getOrigin");d();h();d();h();var KR=o((e,t)=>Array.apply(0,new Array(Math.ceil(e.length/t))).map((r,n)=>e.slice(n*t,(n+1)*t)),"chunks");d();h();var LR=o(e=>{if(e.length!==0)return e[e.length-1]},"getLast");d();h();function qR(e){return e!=null}o(qR,"nonNullable");d();h();var ZR=o(e=>[...Array(e).keys()],"range");d();h();var Wv=class e{static{o(this,"RingBuffer")}static fromArray(t,r=0){let n=new e(r);return n.fromArray(t,r===0),n}buffer=[];size;pos=0;constructor(t){if(t<0)throw new RangeError("Invalid size.");this.size=t}getSize(){return this.size}getPos(){return this.pos}getBufferLength(){return this.buffer.length}add(...t){t.forEach(r=>{this.buffer[this.pos]=r,this.pos=(this.pos+1)%this.size})}get(t){if(t<0&&(t+=this.buffer.length),!(t<0||t>this.buffer.length))return this.buffer.length<this.size?this.buffer[t]:this.buffer[(this.pos+t)%this.size]}getFirst(){return this.get(0)}getLast(){return this.get(-1)}getFirstN(t){return t===0?[]:t<0?this.getLastN(-t):this.toArray().slice(0,t)}getLastN(t){return t===0?[]:t<0?this.getFirstN(-t):this.toArray().slice(-t)}remove(t,r=1){if(t<0&&(t+=this.buffer.length),t<0||t>this.buffer.length)return[];let n=this.toArray(),i=n.splice(t,r);return this.fromArray(n),i}removeFirst(){return this.remove(0)[0]}removeLast(){return this.remove(-1)[0]}toArray(){return this.buffer.slice(this.pos).concat(this.buffer.slice(0,this.pos))}fromArray(t,r=!1){if(!Array.isArray(t))throw new TypeError("Input value is not an array.");r&&this.resize(t.length),this.size!==0&&(this.buffer=t.slice(-this.size),this.pos=this.buffer.length%this.size)}clear(){this.buffer=[],this.pos=0}resize(t){if(t<0)throw new RangeError("The size does not allow negative values.");if(t===0)this.clear();else if(t!==this.size){let r=this.toArray();this.fromArray(r.slice(-t)),this.pos=this.buffer.length%t}this.size=t}isFull(){return this.buffer.length===this.size}isEmpty(){return this.buffer.length===0}};d();h();var Ro=te(nt(),1);var i8=o((e,t=1e3)=>{let r=(0,Ro.useRef)(!1),n=(0,Ro.useRef)(null);return(0,Ro.useEffect)(()=>()=>{n.current&&clearTimeout(n.current)},[]),(0,Ro.useCallback)((...i)=>{r.current||(r.current=!0,e(...i),n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{r.current=!1},t))},[e,t])},"useDebouncedCallback");d();h();function vu(e,t){let r=new WeakMap;return()=>{let n=e();if(n===void 0)return;let i=r.get(n);return i===void 0&&(i=t(n),r.set(n,i)),i}}o(vu,"createUseDerivedContext");d();h();var _s=te(nt(),1);var h8=o((e,t=1e3)=>{let r=(0,_s.useRef)(void 0);return(0,_s.useEffect)(()=>()=>{r.current&&clearTimeout(r.current)},[]),(0,_s.useCallback)(()=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{r.current=void 0,e()},t)},[e,t])},"useThrottledCallback");d();h();var Hv=te(nt(),1);function $v(e){(0,Hv.useEffect)(e,[])}o($v,"useEffectOnce");d();h();var Gv=te(nt(),1);function nh(e){let t=(0,Gv.useRef)(e);t.current=e,$v(()=>()=>t.current())}o(nh,"useUnmount");d();h();var bu=te(nt(),1);function QE(e){let t=(0,bu.useRef)(void 0);return(0,bu.useEffect)(()=>{t.current=e}),t.current}o(QE,"usePrevious");d();h();var Zv=te(nt(),1);var XE=o(e=>(e+1)%1e6,"updateReducer");function Jv(){let[,e]=(0,Zv.useReducer)(XE,0);return e}o(Jv,"useUpdate");d();h();var mn=te(nt(),1);function Yv(e,t=0){let r=(0,mn.useRef)(!1),n=(0,mn.useRef)(void 0),i=(0,mn.useRef)(e),s=(0,mn.useCallback)(()=>r.current,[]),c=(0,mn.useCallback)(()=>{r.current=!1,n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{r.current=!0,i.current()},t)},[t]),f=(0,mn.useCallback)(()=>{r.current=null,n.current&&clearTimeout(n.current)},[]);return(0,mn.useEffect)(()=>{i.current=e},[e]),(0,mn.useEffect)(()=>(c(),f),[t]),[s,f,c]}o(Yv,"useTimeoutFn");d();h();function eT(e=0){let t=Jv();return Yv(t,e)}o(eT,"useTimeout");d();h();var Xv=te(nt(),1);d();h();var ks=te(nt(),1);function Qv(e){let t=(0,ks.useRef)(0),[r,n]=(0,ks.useState)(e),i=(0,ks.useCallback)(s=>{cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n(s)})},[]);return nh(()=>{cancelAnimationFrame(t.current)}),[r,i]}o(Qv,"useRafState");function tT(e){ly()&&(typeof e!="object"||typeof e.current>"u")&&console.error("`useScroll` expects a single ref argument.");let[t,r]=Qv({x:0,y:0});return(0,Xv.useEffect)(()=>{let n=e.current,i=o(()=>{n&&r({x:n.scrollLeft,y:n.scrollTop})},"handler");return n&&n.addEventListener("scroll",i,{capture:!1,passive:!0}),()=>{n&&n.removeEventListener("scroll",i)}},[r]),t}o(tT,"useScroll");d();h();var qa=te(nt(),1);function rT(e,t,r=["mousedown","touchstart"]){let n=(0,qa.useRef)(t);(0,qa.useEffect)(()=>{n.current=t},[t]),(0,qa.useEffect)(()=>{let i=o(s=>{let c=e.current;c&&!c.contains(s.target)&&n.current(s)},"handler");for(let s of r)document.addEventListener(s,i);return()=>{for(let s of r)document.removeEventListener(s,i)}},[e,r])}o(rT,"useClickAway");d();h();var No=te(nt(),1);var nT={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function iT(){let[e,t]=(0,No.useState)(null),[r,n]=(0,No.useState)(nT),i=(0,No.useMemo)(()=>new ResizeObserver(s=>{if(s[0]){let{x:c,y:f,width:p,height:v,top:A,left:T,bottom:I,right:P}=s[0].contentRect;n({x:c,y:f,width:p,height:v,top:A,left:T,bottom:I,right:P})}}),[]);return(0,No.useLayoutEffect)(()=>{if(e)return i.observe(e),()=>{i.disconnect()}},[e,i]),[t,r]}o(iT,"useMeasure");d();h();function l5(e){return`https://www.google.com/s2/favicons?domain=${e}&sz=256`}o(l5,"getFaviconURL");d();h();var y5=o((e,t)=>new Xt(e).div(ws(t)).toString(),"amountToUiAmountString");d();h();d();h();d();h();var eb=o(e=>{let t=e?Math.floor(Math.log10(e)):0,r=t<0?Math.pow(10,1-t):100;return Math.round(e*r)/r},"roundToTwoTrailingDecimals");var oT=o(e=>{let t=Math.abs(e);if(t<1e3)return e;let r=Math.floor(Math.log10(t)),n=r>=6?1e5:r>=5?1e3:100;return Math.sign(e)*Math.floor(t/n)*n},"floorForDisplay"),tb=o((e,t={})=>{let r=typeof e=="number"?e:Xt(e).toNumber(),{includePlusPrefix:n=!1,prefix:i="",infix:s="",suffix:c="",extendedDecimalsForSmallNumbers:f=!1,minimumAmount:p=.01,format:v="0,0.[00]",decimalFormatSmallNumbers:A="0.[00]",roundDecimals:T=!1}=t,I=r<0?"-":"",P=n&&r>0?"+":I,B=T?eb(Math.abs(r)):Math.abs(r);if(t.compact&&B>=1e3&&(B=Math.abs(oT(r))),Math.abs(r)>=p||r===0){let K=Math.abs(r)>1?t.compact?"0.[00]a":v:A,N=(0,Ji.default)(B).format(K);return`${i}${P}${s}${N}${c}`}else if(f){let K=new Xt(B).abs().toFormat();return`${i}${P}${s}${K}${c}`}else return`${i}${P}<${s}${new Xt(p).toFormat()}${c}`},"formatNumber");var K5=o((e,t={})=>tb(e,{...t,infix:"$",format:t.compact?"0.[00]a":t.format??"0,0.00",decimalFormatSmallNumbers:t.decimalFormatSmallNumbers??"0.00"}),"formatDollarAmount");d();h();var L5=o(e=>e.replace(/,|\.{2,}/g,".").replace(/^[0]+/g,"0").replace(/^\./g,"0.").replace(/[^\d.]/g,""),"formatTokenAmountInputs");d();h();var W5=o((e,t=9)=>{let r=(e.match(/\./g)||[]).length;return e.endsWith(".")&&r>1?e.substring(0,e.length-1):e.length===0||e.endsWith(".")||e.endsWith("0")?e:new Xt(e).decimalPlaces(t).toString()},"formatTokenAmountToMaxDecimals");d();h();var Q5=o((e,t)=>t===0?new Xt(e):new Xt(e).multipliedBy(ws(t)),"uiAmountToAmount");d();h();function nN(e,t,r){let n=t.split("."),i=e;for(let s of n)if(i&&typeof i=="object"&&s in i)i=i[s];else return;return r?r(i):i}o(nN,"getValueByPath");d();h();function ih(e,t){return e in t}o(ih,"hasKey");d();h();var dN=o(async(e,t)=>new Promise((r,n)=>{let i=setTimeout(()=>{n("Promise timed out")},t);e.then(s=>{r(s),clearTimeout(i)}).catch(n)}),"withTimeout");d();h();function yN(e,t,r){let n="...",i=t+r+n.length;if(e.length<=i)return e;let s=e.substring(0,t),c=e.substring(e.length-r);return`${s}${n}${c}`}o(yN,"ellipsize");d();h();var sT=o(e=>e.replace(/\s/g,""),"removeWhitespace");d();h();function TN(e){return e.toLowerCase().replace(/(^|\s|\.)(\w)/g,(t,r,n)=>r+n.toUpperCase())}o(TN,"toTitleCase");d();h();var Wa=te(Sd(),1),ib=te(rb(),1),ob=te(nb(),1);Wa.default.extend(ib.default);Wa.default.extend(ob.default);var RN=o(e=>{let t={Today:[],Yesterday:[],"Last Week":[],Earlier:[]};for(let r of e){let n=r.timestamp??0,i=Wa.default.unix(n/1e3),s="Earlier";i.isToday()?s="Today":i.isYesterday()?s="Yesterday":i.isAfter((0,Wa.default)().subtract(1,"week"))&&(s="Last Week"),t[s].push(r)}return Object.keys(t).reduce((r,n)=>({...r,[n]:t[n].sort((i,s)=>(i.timestamp==null&&(i.timestamp=0),s.timestamp==null&&(s.timestamp=0),i.timestamp<s.timestamp?1:i.timestamp>s.timestamp?-1:0)).map(i=>i.data)}),{})},"bucketByTime");d();h();var FN=hn({seconds:10}),zN=hn({seconds:5});d();h();d();h();var sb=o(e=>e/6e4,"msToMin");var YN=o((e,t)=>{if(!t||t===0)return e("requireAuthImmediately");let r=sb(t);return r===1?`1 ${e("timeUnitMinute")}`:r===60?`1 ${e("timeUnitHour")}`:r===1440?`1 ${e("timeUnitDay")}`:r>60?`${r/60} ${e("timeUnitHours")}`:`${r} ${e("timeUnitMinutes")}`},"formatLockTimer");d();h();var nD=o((e,t=!1)=>{let r=Ko.duration(Ko().diff(Ko(e))),n=[[r.years(),"y"],[r.months(),"mo"],[r.days(),"d"],[r.hours(),"h"],[r.minutes(),"m"],[r.seconds(),"s"],[r.milliseconds(),"ms"]].find(c=>c[0]!==0);if(!n)return"";let[i,s]=n;return t&&(s==="ms"||s==="s")?"< 1m":s==="ms"?"now":s==="s"?i<15?"now":"< 1m":`${i}${s}`},"formatTimestampFromNow");d();h();var cD=o(e=>e*6e4,"minToMs");d();h();var hD=o(e=>{if(e!=null&&!(e.constructor===Object&&Object.keys(e).length===0))return e},"toUndefined");d();h();d();h();var aT=/^(https?:\/\/)?(localhost(:\d+)|[\w-]+(\.[\w-]+)+(:\d+)?)(\/\S*)?/;function ab(e){return e?aT.test(e):!1}o(ab,"isValidUrl");var cT=["localhost","127.0.0.1"],uT={google:o(e=>`https://www.google.com/search?q=${e}`,"google")},AD=o(e=>{try{let t=/^https?:\/\//i.test(e),r=ab(e);if(r&&t)return e;if(!r)throw new Error("Query is not a valid URL");let n=t?e:`http://${e}`,i=new URL(n);if(cT.includes(i.hostname))return n;if(!e.includes("."))throw new Error("missing tld");return i.toString().replace(/^http:\/\//i,"https://").replace(/\/$/,"")}catch{let t=encodeURIComponent(e);return uT.google(t)}},"formatSearchURI");d();h();var _D=o(({url:e,format:t})=>{if(!e)return null;!e.startsWith("http")&&e.split(".").length===2&&(e=`http://${e}`),e.startsWith("www.")&&(e=`https://${e}`),!e.startsWith("http")&&!e.startsWith("https")&&(e=`https://${e}`);try{let{hostname:r,href:n}=new URL(e);switch(t){case"hostname":return r.replace("www.","");case"root":return r.split(".").slice(-2).join(".");case"domain":return r.split(".").slice(-2)[0];case"full":return n;default:return r}}catch{return null}},"formatURL");d();h();var BD=o(e=>{if(e)try{return new URL(e).hostname}catch{return}},"getHostname");d();h();d();h();var lT=["http:","https:","phantom:","solana:"],cb=o((e,{restrictProtocols:t=!0,supportedProtocols:r=lT}={})=>{if(!e)return null;let n=null;if(/^https?:/i.test(e)&&!e.includes("://"))return null;let i=/^(?<specifiedProtocol>[a-zA-Z0-9-]+:)/.exec(e),s=i?.groups?.specifiedProtocol.toLowerCase();if(t&&s&&!r.includes(s))return null;try{if(n=new URL(i?e:`https://${e}`),n&&n.protocol==="http:"&&(n.protocol="https:"),n&&t&&!r.some(c=>c===n?.protocol))return null;if(n.protocol!=="http:"&&n.protocol!=="https:"&&n.protocol!=="phantom:"&&n.protocol!=="solana:"&&n.protocol!=="solana-wallet:"){let c=new URL(e.replace(n.protocol,"https:"));n=new URL(c.toString().replace(c.protocol,n.protocol))}}catch{}return n},"parseURL");var ub={origin:void 0,hostname:void 0},jD=o(e=>{if(!e)return ub;let t=cb(e,{restrictProtocols:!1});if(!t)return ub;let r=`${t.protocol}//${t.host}`,n=t.hostname;return{origin:r,hostname:n}},"getOriginAndHostname");d();h();var fT=["localhost","127.0.0.1"];function GD(e){try{let t=e.trim();if(!t||t.startsWith("//"))return!1;let r=decodeURIComponent(t),i=/^[a-zA-Z][a-zA-Z0-9+.-]*:\/\//.test(r)?r:`http://${r}`,s=new URL(i);if(s.protocol!=="http:"&&s.protocol!=="https:")return!1;let c=s.hostname.toLowerCase();return fT.some(f=>c===f.toLowerCase())}catch{return!1}}o(GD,"isLocalhost");d();h();var lb=te(Wc()),wu=te(nt());var fb=(0,wu.createContext)(null);function dT({children:e,authRepository:t}){return(0,lb.jsx)(fb.Provider,{value:t,children:e})}o(dT,"AuthProvider");function Rr(){let e=(0,wu.useContext)(fb);if(!e)throw new Error("useAuthRepository must be used within an AuthProvider");return e}o(Rr,"useAuthRepository");function Do(){return Rr().useUser()}o(Do,"useUser");d();h();d();h();var dh=te(ln());d();h();d();h();var hT="https://time.phantom.app/utc",pT=m.number().int().positive();async function Uo(){let e=await Ps();return Math.floor(e/1e3)}o(Uo,"time");async function Ps(){let e;try{let t=await pt.noBearer().get(hT);if(t.status!==200)throw new Error("Failed to fetch time from server");e=pT.parse(t.data)}catch{e=Date.now()}return e}o(Ps,"timeMs");d();h();var Ha="https://phantom.app",$a="https://api.phantom.app/oauth2/auth",xu={prod:"a61bc25e-0c4f-4ab3-aa54-b50ec746eea2",staging:"fe26708b-7db7-4146-9fbb-9a9736acfb2b"},db="/login/start",hb="/oauth2/token";var uh;(function(e){e.Apple="apple",e.Google="google"})(uh||(uh={}));var lh=hn({minutes:60}),fh=lh-hn({minutes:15}),Lo="/v1/authentication-keys";var mT=60,gT=o(()=>Math.floor(Date.now()/1e3),"clientTime");async function Os(e=!0){let t={alg:"ES256",type:"JWT"},r=e?await Uo():gT(),n={iss:Ha,aud:$a,nbf:r,exp:r+mT,iat:r};return{header:t,payload:n}}o(Os,"generateUnsignedClientJWT");function Cs(e){let t=st(dh.Buffer.from(JSON.stringify(e.header))),r=st(dh.Buffer.from(JSON.stringify(e.payload)));return[t,r,e.signature].join(".")}o(Cs,"encodeSignedJwt");d();h();var pb=m.object({alg:m.string(),type:m.string(),kid:m.string()}),mb=m.object({sub:m.string(),iss:m.string(),aud:m.string(),nbf:m.number(),exp:m.number(),iat:m.number()}),hh=m.object({header:pb,payload:mb,signature:m.string()}),gb=m.object({alg:m.string(),type:m.string()}),yb=m.object({iss:m.string(),aud:m.string(),nbf:m.number(),exp:m.number(),iat:m.number()}),ph=m.object({header:gb,payload:yb}),mh=m.object({id_token:m.string(),access_token:m.string(),refresh_token:m.string(),scope:m.string(),token_type:m.string(),expires_in:m.number().gte(0)}),yT=m.object({redirectTo:m.string()}),vb=m.object({at_hash:m.string(),aud:m.array(m.string()),auth_time:m.number(),exp:m.number(),iat:m.number(),iss:m.string(),jti:m.string(),rat:m.number(),sid:m.string(),sub:m.string(),email:m.string().optional()}),Su=m.object({authenticationKeys:m.array(m.object({createdAt:m.string().datetime().nullish().default(null),updatedAt:m.string().datetime().nullish().default(null),id:m.string().uuid(),publicKey:m.string(),userId:m.string().uuid()})).optional()}),Si;(function(e){e.User="user",e.UserID="userID",e.AccessToken="accessToken",e.Email="email",e.LoggedOut="loggedOut"})(Si||(Si={}));d();h();var Vo=te(Ph());d();h();var Ns=te(Ph()),Db=te(qi());var Ub={generateRandom:o(e=>{let t=(0,Db.randomBytes)(e);return(0,Ns.bufferToString)(t)},"generateRandom"),async deriveChallenge(e){let t=pn((0,Ns.textEncodeLite)(e));return(0,Ns.urlSafe)(t)}};d();h();var Dr=o(()=>{let e=ar();return e===Ot.Staging?ms.staging:e===Ot.Production?ms.prod:E.BASE_AUTH_ENDPOINT||ms.staging},"getAuthBaseEndpoint"),Oh=o(()=>`${Dr()}${db}`,"getAuthLoginEndpoint"),Ru=o(()=>`${Dr()}${hb}`,"getAuthTokenEndpoint");var Lb=new Vo.BasicQueryStringUtils;async function Nu(e,t){let{url:r,codeVerifier:n}=await dI(e.getClientID(),e.redirectURL,t),i=t.type==="email",s=await e.fetchAuthorizationCode(e.redirectURL,r,i);return await Vb({grantType:"authorization_code",clientID:e.getClientID(),redirectURI:e.redirectURL,tokenEndpoint:Ru(),code:s,codeVerifier:n})}o(Nu,"authenticate");async function dI(e,t,r){let n=Oh(),i,s=["openid","offline_access","user","incognito","seedless"],c;switch(r.type){case"key":{i={type:"key",jwt:Cs(r.clientJWT)};break}case"email":{i={type:"email",provider:r.provider,existingAccessToken:r.existingAccessToken},c=r.prompt,s.push("email");break}case"session":{i={type:"session",existingAccessToken:r.existingAccessToken};break}}let p=await new Vo.AuthorizationRequest({client_id:e,redirect_uri:t,scope:s.join(" "),response_type:"code"},Ub).toJson(),v;switch(i.type){case"key":v=`jwt:${st(Buffer.from(i.jwt,"utf8"))}`;break;case"email":v=`sso:${i.provider}`,i.existingAccessToken&&(v=`${v}:${i.existingAccessToken}`);break;case"session":v=`session:${i.existingAccessToken}`;break}let A={redirect_uri:p.redirect_uri,client_id:p.client_id,response_type:p.response_type,state:p.state??"",scope:p.scope,login_hint:v};c&&(A.prompt=c);let T=p.extras?.code_challenge,I=p.extras?.code_challenge_method,P=p.internal?.code_verifier;if(T&&I&&(A.code_challenge=T,A.code_challenge_method=I),!T||!I||!P)throw new Error("Missing code challenge or code verifier for PKCE.");let B=Lb.stringify(A);return{url:`${n}?${B}`,codeVerifier:P}}o(dI,"createAuthorizationCodeRequest");async function Vb(e){let{grantType:t,tokenEndpoint:r,clientID:n,redirectURI:i}=e,s;t==="authorization_code"?s=new Vo.TokenRequest({client_id:n,redirect_uri:i,grant_type:t,code:e.code,extras:{code_verifier:e.codeVerifier}}):s=new Vo.TokenRequest({client_id:n,redirect_uri:i,grant_type:t,refresh_token:e.refreshToken});let c=await pt.headers({"Content-Type":"application/x-www-form-urlencoded"},{mergeHeaders:!1}).auth(fy()).noBearer().post(r,Lb.stringify(s.toStringMap()));hI(c,t);let f=mh.safeParse(c.data);if(!f.success)throw new Error("Invalid OAuth2Token response.");let{data:p}=f,v=await Uo();return{idToken:p.id_token,accessToken:p.access_token,refreshToken:p.refresh_token,scope:p.scope,tokenType:p.token_type,expiresAt:(v+p.expires_in)*1e3}}o(Vb,"performTokenRequest");async function Du(e,t){return await Vb({clientID:e.getClientID(),redirectURI:e.redirectURL,grantType:"refresh_token",tokenEndpoint:Ru(),refreshToken:t})}o(Du,"refresh");function hI(e,t){if([401,400].includes(e.status)){let r="";if(e.status===401)switch(r="Token Request Unauthorized (401): ",t){case"authorization_code":r+="Authorization code is expired or invalid.";break;case"refresh_token":r+="Refresh token is expired or invalid.";break;default:r+=`Unknown grant type [${t}]. `}if(e.status===400)switch(r="Bad Token Request (400): ",t){case"authorization_code":r="for [authorization_code]. Possible causes: 1. The authorization code is expired or invalid. 2. Redirect URI mismatch. 3. Code verifier mismatch (if using PKCE).";break;case"refresh_token":r="for [refresh_token]. Possible causes: 1. The refresh token is expired, invalid, or revoked. 2. Client ID mismatch. 3. Missing or malformed refresh token in the request.";break;default:r=`for unknown grant type [${t}]. Check the payload and OAuth provider documentation.`}throw new Error(r)}}o(hI,"handleBadRequest");d();h();d();h();d();h();var Za=class{static{o(this,"BaseEventEmitter")}subscribers={};subscribe(t,r){return this.subscribers[t]||(this.subscribers[t]=[]),this.subscribers[t].push(r),()=>{this.subscribers[t].splice(this.subscribers[t].indexOf(r),1)}}emitEvent(t,...r){(this.subscribers[t]??[]).forEach(i=>i(...r))}};var Uu=class extends Za{static{o(this,"AuthEventEmitter")}emit(t){t&&(this.emitEvent(Si.User,t),this.emitEvent(Si.UserID,t.userID),this.emitEvent(Si.AccessToken,t.accessToken),t.email&&this.emitEvent(Si.Email,t.email))}emitLoggedOut(){this.emitEvent(Si.LoggedOut)}};d();h();d();h();function Mi(e,t="expected value not found"){if(e==null)throw new Error(t);return e}o(Mi,"expect");function Fb(e,t="expected value not found"){if(!e)throw new Error(t)}o(Fb,"assert");var Lu=o(async(e,t)=>{let r=Dr(),n=Mi(e.signer,"Signer is required for key-based auth."),i=await n.getAuthenticationPublicKey(t),s=await Os(e.isServerTimeEnabled()),c=await n.sign(s,t),f=await pt.noBearer().get(`${r}${Lo}`,{params:{token:Cs(c)}});if(!gs(f))throw new Error(`Failed to get authentication keys: response is not okay (status ${f.status})`);let p=f.data;return(Su.parse(p).authenticationKeys??[]).some(A=>A.publicKey===i)},"isExistingAuthFactor");d();h();d();h();var zb=o(async e=>{try{let t=await pt.headers({"Content-Type":"application/x-www-form-urlencoded"},{mergeHeaders:!1}).bearer(e).get(`${Dr()}/userinfo`);return gs(t)}catch{return!1}},"isValidToken");d();h();d();h();var Ja=".phantom.auth",Vu=`${Ja}.tokens`,Fu=`${Ja}.tokens.staging`,Ya=`${Ja}.custom-environments`,jb=`${Ja}.authentication-factors`,pI=`${Ja}.email-provider`;async function zu(e){let t=ar();return t===Ot.Production?await e.get(Vu):t===Ot.Staging?await e.get(Fu):(await e.get(Ya))?.[t]??null}o(zu,"getAuthTokens");async function Ds(e,t){let r=ar();r===Ot.Production?await e.set(Vu,t):r===Ot.Staging?await e.set(Fu,t):await e.update(Ya,n=>({...n,[r]:t}))}o(Ds,"setAuthTokens");async function qb(e){let t=ar();if(t===Ot.Production)await e.remove(Vu);else if(t===Ot.Staging)await e.remove(Fu);else{let r=!1;await e.update(Ya,n=>{if(!n||!(t in n))return n??null;let i={...n};return delete i[t],Object.keys(i).length===0&&(r=!0),i}),r&&await e.remove(Ya)}}o(qb,"clearAuthTokens");d();h();var Fo=o(e=>{let t=e.idToken.split(".");if(t.length!==3)throw new Error("Malformed ID token. Expected 3 period-delimited parts to ID token.");let r;try{let n=ur(t[1]).toString("utf-8"),i=JSON.parse(n);r=vb.parse(i)}catch{throw new Error("Unable to parse ID token payload.")}return{accessToken:e.accessToken,userID:r.sub,email:r.email}},"authTokensToUser");d();h();var Wb="@phantom/auth",Wt={user:["auth",`${Wb}:user`],authFactors:["auth",`${Wb}:user-auth-factors`]};d();h();var ju=o(async(e,t,r)=>{let{storage:n,authConfig:i}=e,s,{type:c}=r;switch(c){case"key":{let p=Mi(e.signer,"Signer is required for key-based auth."),v=await Os(e.isServerTimeEnabled()),A=await p.sign(v,r.secretIdentifier);s=await Nu(i,{type:c,clientJWT:A});break}case"email":{s=await Nu(i,{type:c,prompt:r.prompt,provider:r.provider});break}case"session":{s=await Nu(i,{type:c,existingAccessToken:r.accessToken});break}}H.addBreadcrumb(W.Auth,"\u2705 Login succeeded!",X.Debug),await Ds(n,s);let f=Fo(s);return await Promise.all([e.queryClient.setQueryData([...Wt.user,{skipAutoLogin:!0}],f),e.queryClient.setQueryData([...Wt.user,{skipAutoLogin:!1}],f)]),t.emit(f),f},"logIn");var Hb={queryKey:Wt.user,gcTime:fh,staleTime:hn({minutes:5})},Us=o(async(e,t,r)=>{let n=r?.skipAutoLogin??!1;return await e.queryClient.fetchQuery({...Hb,queryKey:[...Wt.user,{skipAutoLogin:n}],queryFn:o(()=>Gb(e,t,n),"queryFn")})},"getUser"),$b=o((e,t)=>er({...Hb,queryKey:[...Wt.user,{skipAutoLogin:!1}],queryFn:o(async()=>{let r=await Gb(e,t,!1);if(!r)throw new Error("Unable to log in.");return r},"queryFn"),retryOnMount:!1}),"useUser"),Gb=o(async(e,t,r)=>e.runExclusive(async()=>{let n=await mI(e);if(n)return t.emit(n),n;if(r||!e.signer)return null;let i=await gI(e,t);return t.emit(i),i}),"queryFn");async function mI({storage:e,authConfig:t,isLocalTokenValidityCheckEnabled:r,isServerTimeEnabled:n}){let i=await zu(e);if(!i)return null;let s=n()?await Uo():Math.floor(Date.now()/1e3),c=Math.floor(i.expiresAt/1e3),f=(lh-fh)/1e3,p=c-f,v=s<p;if(v&&!r()&&(v=await zb(i.accessToken)),v)return H.addBreadcrumb(W.Auth,`\u267B\uFE0F Access token still valid => Expires at ${i.expiresAt}`,X.Debug),Fo(i);if(i.refreshToken)try{let A=await Du(t,i.refreshToken);return H.addBreadcrumb(W.Auth,`\u2705 Refreshed auth token => Expires at ${A.expiresAt}`,X.Debug),await Ds(e,A),Fo(A)}catch(A){return H.addBreadcrumb("Error refreshing auth token.",W.Auth,X.Error),H.captureError(A,W.Auth),null}return null}o(mI,"getOrRefreshUser");async function gI(e,t){let n=await Mi(e.signer,"Unable to log in with key-based auth. Signer is not available.").getAllSecretIdentifiers();if(n.length===0)return H.addBreadcrumb(W.Auth,"Unable to log in with key-based auth. Vault is not yet onboarded or has no secrets that can perform key-based auth.",X.Info),null;let i;try{for(let s of n)if(await Lu(e,s)){i=s;break}}catch(s){throw H.addBreadcrumb(W.Auth,"Unable to log in with key-based auth. Error checking auth factors.",X.Error),s}i||(i=n[0],H.addBreadcrumb(W.Auth,"No auth factor found, creating new user with first secret identifier.",X.Debug));try{return await ju(e,t,{type:"key",secretIdentifier:i})}catch(s){throw H.addBreadcrumb(W.Auth,"Unable to log in with key-based auth. Error performing auth.",X.Error),s}}o(gI,"autoLoginWithKeyBasedAuth");d();h();var Ch=o(async e=>{await e.removeQueries({queryKey:Wt.user})},"removeUser"),Bh=o(async e=>{await e.resetQueries({queryKey:Wt.user})},"resetUser"),zo=o(async e=>{await e.invalidateQueries({queryKey:Wt.user})},"invalidateUser"),Ei=o(async e=>{await e.invalidateQueries({queryKey:Wt.authFactors})},"invalidateUserAuthFactors");var yI=o(e=>{let t=new Uu,r={getUser:o(n=>Us(e,t,n),"getUser"),useUser:o(()=>$b(e,t),"useUser"),refreshTokens:o(()=>vI(e),"refreshTokens"),logIn:o(n=>ju(e,t,n),"logIn"),isExistingAuthFactor:o(n=>Lu(e,n),"isExistingAuthFactor"),getAuthenticationKeys:o(()=>bI(e,t),"getAuthenticationKeys"),getLocalAuthenticationPublicKeys:o(()=>xI(e),"getLocalAuthenticationPublicKeys"),addAuthFactor:o(n=>SI(e,t,n),"addAuthFactor"),deleteAuthFactor:o(n=>AI(e,t,n),"deleteAuthFactor"),deleteAllAuthFactors:o(()=>MI(e,t),"deleteAllAuthFactors"),subscribe:o((n,i)=>t.subscribe(n,i),"subscribe"),logOut:o(()=>EI(e,t),"logOut")};return dy(async(n={})=>{let{refresh:i=!1,skipAutoLogin:s=!1}=n;return i&&await zo(e.queryClient),(await r.getUser({skipAutoLogin:s}))?.accessToken??null}),r},"createAuthRepository"),vI=o(async e=>{let t=await zu(e.storage);if(!t)return!1;let r=await Du(e.authConfig,t.refreshToken);await Ds(e.storage,r);let n=Fo(r);return await Promise.all([e.queryClient.setQueryData([...Wt.user,{skipAutoLogin:!0}],n),e.queryClient.setQueryData([...Wt.user,{skipAutoLogin:!1}],n)]),!0},"refreshTokens"),bI=o(async(e,t)=>({authenticationPublicKeys:(await wI(e,t)).map(n=>n.publicKey)}),"getAuthenticationKeys"),wI=o(async(e,t)=>{let r=Dr(),n=await Us(e,t);if(!n)throw new Error("User not authenticated.");let{data:i}=await pt.bearer(n.accessToken).get(`${r}${Lo}`),s=Su.safeParse(i);if(!s.success)throw new Error("Unable to parse auth factors response.");return s.data.authenticationKeys??[]},"getAuthenticationKeysInternal"),xI=o(async e=>{try{let t=Mi(e.signer,"Signer is required for key-based auth."),r=await t.getAllSecretIdentifiers(),n={};for(let i of r)n[i]=await t.getAuthenticationPublicKey(i);return n}catch{return{}}},"getLocalAuthenticationPublicKeys"),SI=o(async(e,t,{secretIdentifier:r})=>{let n=Dr(),i=Mi(e.signer,"Signer is required for key-based auth."),s=await Us(e,t);if(!s)throw new Error("User not authenticated.");H.addBreadcrumb(W.Auth,`Adding auth factor: ${r}`,X.Info);let c=await Os(e.isServerTimeEnabled()),f=await i.sign(c,r);await pt.bearer(s.accessToken).post(`${n}${Lo}`,{jwt:Cs(f)})},"addAuthFactor"),AI=o(async(e,t,{authenticationPublicKey:r})=>{let n=Dr(),i=await Us(e,t);if(!i)throw new Error("User not authenticated.");H.addBreadcrumb(W.Auth,`Deleting auth factor: ${r}`,X.Info),await pt.bearer(i.accessToken).delete(`${n}${Lo}/${encodeURIComponent(r)}`)},"deleteAuthFactor"),MI=o(async(e,t)=>{let r=Dr(),n=e.storage,i=await Us(e,t);if(!i)throw new Error("User not authenticated.");H.addBreadcrumb(W.Auth,"Deleting all auth factors",X.Info),await pt.bearer(i.accessToken).delete(`${r}${Lo}`),await n.remove(jb)},"deleteAllAuthFactors"),EI=o(async({storage:e},t)=>{await qb(e),t.emitLoggedOut()},"logOut");d();h();var TI=o((e,t)=>{let r=new URL(t);if(!r.toString().startsWith(e))throw new Error("Unexpected redirectURL. RedirectURL from auth flow must match local redirect URL.");let n=r.searchParams.get("code");if(!n)throw new Error("No authorization code");return n},"parseAuthCode");d();h();var II=o((e,t)=>{let r=new URL(t);if(!r.toString().startsWith(e))throw new Error("Unexpected redirectURL. RedirectURL from auth flow must match local redirect URL.");let n=r.searchParams.get("error"),i=r.searchParams.get("error_description");if(n)throw new Error(`${n}: ${i}`,{cause:n});return!1},"redirectHasErrorParam");d();h();var _I=o(()=>ar()===Ot.Production?xu.prod:xu.staging,"getAuthClientID");d();h();var kI=o(()=>{let e=Rr(),{data:t}=Do(),r=Wt.authFactors;return er({queryKey:r,queryFn:o(async()=>{let i=await e.getLocalAuthenticationPublicKeys();if(Object.keys(i).length===0)return{};let s=[];try{if(t){let{authenticationPublicKeys:f=[]}=await e.getAuthenticationKeys();s=f}}catch(f){t&&f instanceof Error&&H.addBreadcrumb(W.Auth,`Unable to fetch existing AuthFactors for user (${t?.userID}): ${f.message}`,X.Error)}let c={};for(let[f,p]of Object.entries(i)){let v=s.includes(p);!v&&await e.isExistingAuthFactor(f)||(c[f]={authenticationPublicKey:p,isExistingAuthFactor:v})}return t&&Object.keys(c).length===0&&H.addBreadcrumb(W.Auth,`Unable to build AuthFactors map: 
- user: ${t?.userID}
- locally available auth factors: ${Object.keys(i).length}
- auth factors registered with user: ${s.length}`,X.Error),c},"queryFn"),retryOnMount:!1})},"useEligibleAuthFactors");d();h();d();h();var Qa=o(()=>{let{data:e}=Do();return!!e},"useIsLoggedIn");function PI(e,t){let r=Qa(),n;return e.enabled===void 0?n=r:typeof e.enabled=="function"?n=o(i=>(Fb(typeof e.enabled=="function","expected enabled to be a function"),r&&e.enabled(i)),"enabled"):typeof e.enabled=="boolean"?n=r&&e.enabled:xe(e.enabled),er({...e,enabled:n},t)}o(PI,"useAuthQuery");d();h();var OI=o(()=>{let e=Rt(),t=Rr(),r=o(async({secretIdentifier:n})=>{await t.addAuthFactor({secretIdentifier:n}),await Ei(e)},"mutationFn");return Xe({mutationFn:o(async n=>{try{return await r(n)}catch(i){H.addBreadcrumb(W.Auth,`Could not add auth factor: ${n.secretIdentifier}`,X.Error);let s;throw i instanceof Error?s=i:s=new Error(`Could not add auth factor: ${n.secretIdentifier}`),H.captureError(s,W.Auth),s}},"mutationFn")})},"useAddAuthFactor");d();h();var CI=o(()=>{let e=Rt(),t=Rr(),r=o(async({authenticationPublicKey:n})=>{await t.deleteAuthFactor({authenticationPublicKey:n}),await Ei(e)},"mutationFn");return Xe({mutationFn:o(async n=>{try{return await r(n)}catch(i){H.addBreadcrumb(W.Auth,"Could not remove auth factor!",X.Error);let s;throw i instanceof Error?s=i:s=new Error("Could not remove auth factor!"),H.captureError(s,W.Auth),s}},"mutationFn")})},"useRemoveAuthFactor");d();h();var BI=o(()=>{let{data:e}=Do();return e?.accessToken},"useAccessToken");d();h();var KI=te(nt());d();h();var Kh=class{static{o(this,"AccountAnalytics")}#e;#t;#r;constructor(t,r,n){this.#e=t,this.#t=r,this.#r=n}identifyAccount=o(async(t,r,n)=>{let i=!!r.addresses.find(B=>me.isSolanaNetworkID(B.networkID)),s=!!r.addresses.find(B=>me.isEthereumNetworkID(B.networkID)),c=!!r.addresses.find(B=>me.isBitcoinNetworkID(B.networkID)),f=!!r.addresses.find(B=>me.isSuiNetworkID(B.networkID)),p={hasSolanaAddress:i,hasEthereumAddress:s,hasBitcoinAddress:c,hasSuiAddress:f},v=n.enabledChainIDs.map(B=>me[B].name).join(", "),A=new Set;for(let B of t)switch(B.type){case O.Seed:case O.Seedless:A.add(B.seedIdentifier);break;case O.ReadOnly:case O.PrivateKey:case O.Ledger:case O.SeedVault:case O.KMSVault:break;default:xe(B);break}let{id:T,type:I}=await this.getIdentifyID(r),P=await this.getUsername();switch(r.type){case O.Seed:case O.Seedless:this.#e.identify(T,{...p,accountType:r.type,rootID:r.seedIdentifier,rootIds:Array.from(A),accountID:r.identifier,isReadOnly:!1,enabledChains:v,idType:I,username:P});break;case O.ReadOnly:this.#e.identify(T,{...p,accountType:r.type,isReadOnly:!0,enabledChains:v,idType:I,username:P});break;case O.PrivateKey:case O.Ledger:case O.SeedVault:case O.KMSVault:this.#e.identify(T,{...p,accountType:r.type,rootIds:Array.from(A),accountID:r.identifier,isReadOnly:!1,enabledChains:v,idType:I,username:P});break;default:xe(r)}},"identifyAccount");getIdentifyID=o(async t=>{let r=await this.#t.getUser().catch(()=>{});return r?{type:"userID",id:r.userID}:{type:"accountID",id:t.identifier}},"getIdentifyID");getUsername=o(async()=>{let t=await this.#r.getUserProfile().catch(()=>{});if(t)return t.username},"getUsername");onAppSessionStart=o(t=>{let r=new Map;for(let n of t){if(n.type===O.ReadOnly)continue;let{addresses:i,identifier:s}=n;for(let c of i){let f=me.getChainName(c.networkID),p={type:n.type,accountId:s,id:c.address};if(!r.get(f))r.set(f,[p]);else{let v=r.get(f)??[];r.set(f,[...v,p])}}}this.#e.capture("appSessionStart",{data:{ids:Object.fromEntries(r)}})},"onAppSessionStart")};var Rh=jy(null);d();h();d();h();var cz=m.string().regex(/^(root-derivation-path-group|(recommended|secondary|tertiary)-group:index-[0-9]+)$/,{message:"Invalid derivation path group."}),Nh;(function(e){e.UnableToCreateBip39Dependency="Unable to create bip39 dependency",e.FailedToFetchBip39Mnemonic="Failed to fetch bip39 mn*monic from storage",e.FailedToParseBip39Mnemonic="Failed to parse bip39 mn*monic as JSON object",e.FailedToDecryptBip39Mnemonic="Failed to decrypt bip39 mn*monic",e.FailedToConstructBip39Entropy="Failed to construct bip39 mn*monic from entropy",e.FailedToFetchDeprecatedMnemonic="Failed to fetch deprecated mn*monic from storage",e.FailedToParseDeprecatedMnemonic="Failed to parse deprecated mn*monic as JSON object",e.FailedToDecryptDeprecatedMnemonic="Failed to decrypt deprecated mn*monic",e.FailedToParseRawDeprecatedMnemonic="Failed to parse deprecated mn*monic from raw JSON",e.FailedToCreateDeprecatedMnemonicString="Failed to create deprecated m*monic from a string",e.FailedToCreateDeprecatedMnemonicStringArray="Failed to create deprecated mn*monic from a string array",e.FailedToCreateDeprecatedMnemonicObjectUint8Array="Failed to create deprecated mn*monic from an object or uint8array",e.FailedToFetchAccountMetas="Failed to fetch account metas from storage",e.NoSeed="No legacy se*d available"})(Nh||(Nh={}));var Dh;(function(e){e.InvalidChecksum="Se*d has invalid checksum",e.InvalidEntropy="Se*d has invalid entropy",e.LessThan12Words="Se*d has less than twelve words",e.InvalidWordCount="Se*d has invalid world count",e.InvalidWords="Se*d has invalid words",e.InternalError="Unknown error fetching se*d"})(Dh||(Dh={}));var Uh;(function(e){e.PrivateKey="privateKey",e.Mnemonic="mnemonic",e.Seedless="seedless"})(Uh||(Uh={}));d();h();var RI=o((e,t,r,n)=>{let i=[];for(let s of t){let c=me.getChainID(s);if(n.includes(c))for(let f of me[c].addressTypes){if(!r.includes(f))continue;let p=e.chains[f];if(p)switch(p.chainType){case k.EVM:case k.Solana:{i.push({networkID:s,addressType:f,address:p.address});break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{i.push({networkID:s,addressType:f,publicKey:p.publicKey,address:p.addresses[s]});break}case k.Sui:{i.push({networkID:s,addressType:f,publicKey:p.publicKey,address:p.address});break}default:xe(p)}}}return i},"getSeedAccountAddresses"),NI=o((e,t,r,n)=>{let i=[];for(let s of t){let c=me.getChainID(s);if(n.includes(c))for(let f of me[c].addressTypes){if(!r.includes(f))continue;let p=e.chains[f];if(p)switch(p.chainType){case k.EVM:case k.Solana:{i.push({networkID:s,addressType:f,address:p.address});break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{i.push({networkID:s,addressType:f,publicKey:p.publicKey,address:p.addresses[s]});break}case k.Sui:{i.push({networkID:s,addressType:f,publicKey:p.publicKey,address:p.address});break}default:xe(p)}}}return i},"getLedgerAccountAddresses"),DI=o((e,t,r,n)=>{let i=[];for(let s of t){let c=me.getChainID(s);if(n.includes(c))for(let f of me[c].addressTypes)r.includes(f)&&e.chainType===f&&i.push({networkID:s,addressType:f,address:e.address})}return i},"getSolanaSeedVaultAccountAddresses"),UI=o((e,t,r,n)=>{let i=[];for(let s of t){let c=me.getChainID(s);if(n.includes(c))for(let f of me[c].addressTypes){if(!r.includes(f))continue;let p=e.chains[f];if(p)switch(p.chainType){case k.EVM:case k.Solana:{i.push({networkID:s,addressType:f,address:p.address});break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{i.push({networkID:s,addressType:f,publicKey:p.publicKey,address:p.addresses[s]});break}case k.Sui:{i.push({networkID:s,addressType:f,publicKey:p.publicKey,address:p.address});break}default:xe(p)}}}return i},"getKMSVaultAccountAddresses"),LI=o((e,t,r,n)=>{let i=[];for(let s of t){let c=me.getChainID(s);if(n.includes(c)){for(let f of me[c].addressTypes)if(r.includes(f)&&e.chainType===f)switch(e.chainType){case k.EVM:case k.Solana:{i.push({networkID:s,addressType:f,address:e.address});break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{i.push({networkID:s,addressType:f,publicKey:e.publicKey,address:e.addresses[s]});break}case k.Sui:{i.push({networkID:s,addressType:f,publicKey:e.publicKey,address:e.address});break}default:xe(e)}}}return i},"getPrivateKeyAccountAddresses"),VI=o((e,t,r,n)=>{let i=[];for(let s of t){let c=me.getChainID(s);if(n.includes(c)){for(let f of me[c].addressTypes)if(r.includes(f))for(let[p,v]of Object.entries(e.addresses))p===f&&i.push({networkID:s,addressType:f,address:v})}}return i},"getReadOnlyAccountAddresses"),qu=o((e,t,r,n,i,s)=>{let c;switch(s?c=Object.values(i.setting):c=t,c=c.sort((f,p)=>me.compareNetworkID(f,p)),e.type){case O.Seedless:case O.Seed:return RI(e,c,r,n);case O.Ledger:return NI(e,c,r,n);case O.SeedVault:return DI(e,c,r,n);case O.KMSVault:return UI(e,c,r,n);case O.PrivateKey:return LI(e,c,r,n);case O.ReadOnly:return VI(e,c,r,n)}},"convertVaultAccountToChainAddresses");d();h();var Zb=te(ln());var Lh=o(()=>({addresses:new Set,publicKeys:new Set}),"createEmptyIdentifiers"),Ls=o((e,t)=>{t&&(t instanceof Uint8Array?e.publicKeys.add(Zb.Buffer.from(t).toString("base64")):typeof t=="string"&&e.publicKeys.add(t))},"addPublicKey"),FI=o((e,t)=>{if(!e||typeof e!="object")return;let r=e,{chainType:n}=r;if(n)switch(n){case k.Solana:case k.EVM:{let i=r,s;typeof i.address=="string"?s=i.address:typeof i.publicKey=="string"&&(s=i.publicKey),s&&t.addresses.add(s);break}case k.Sui:{let i=r.address;typeof i=="string"&&t.addresses.add(i),Ls(t,r.publicKey);break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{let i=r.addresses??{};Object.values(i).forEach(s=>{s&&t.addresses.add(s)}),Ls(t,r.publicKey);break}default:break}},"addChainAddressToSnapshot"),Jb=o((e,t)=>{t.addresses.forEach(r=>e.addresses.add(r)),t.publicKeys.forEach(r=>e.publicKeys.add(r))},"mergeSnapshots"),Wu=o(e=>{let t=Lh();return e&&Object.values(e).forEach(r=>{FI(r,t)}),t},"collectIdentifiersFromChains"),Yb=o(e=>{let t=Lh();switch(e.type){case O.Seed:case O.Seedless:case O.Ledger:case O.KMSVault:{Jb(t,Wu(e.chains));break}case O.PrivateKey:{"addresses"in e?(Object.values(e.addresses??{}).forEach(r=>{r&&t.addresses.add(r)}),Ls(t,e.publicKey)):"address"in e&&"publicKey"in e&&e.chainType===k.Sui?(t.addresses.add(e.address),Ls(t,e.publicKey)):"address"in e&&t.addresses.add(e.address);break}case O.SeedVault:{t.addresses.add(e.address);break}case O.ReadOnly:{Object.values(e.addresses).forEach(r=>{r&&t.addresses.add(r)});break}}return t},"collectIdentifiersFromVaultAccount"),Vh=o(e=>{let t=Lh();switch(e.type){case O.Seed:case O.Seedless:case O.Ledger:case O.KMSVault:{Jb(t,Wu(e.chains));break}case O.PrivateKey:{switch(e.chainType){case k.Solana:case k.EVM:{t.addresses.add(e.publicKey);break}case k.Sui:{t.addresses.add(e.address),Ls(t,e.publicKey);break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{Object.values(e.addresses??{}).forEach(r=>{r&&t.addresses.add(r)}),Ls(t,e.publicKey);break}}break}case O.SeedVault:{t.addresses.add(e.publicKey);break}case O.ReadOnly:{Object.values(e.addresses).forEach(r=>{r&&t.addresses.add(r)});break}}return t},"collectIdentifiersFromVaultStorageAccount");d();h();var zI=o(({index:e,offsetIndex:t})=>({name:Kr.t("onboardingImportAccountsAccountName",{walletIndex:t+e+1})}),"createAccountMetadata");d();h();var Fh=o(e=>{switch(e){case oe.BitcoinTaproot:case oe.BitcoinNativeSegwit:case oe.BitcoinNestedSegwit:case oe.BitcoinLegacy:case oe.Bip44ChangeSolana:case oe.Bip44Ethereum:return!0;case oe.Bip44Solana:case oe.DeprecatedSolana:case oe.Bip44RootSolana:case oe.Bip44RootEthereum:case oe.Bip44EthereumSecondary:case oe.Bip44EthereumTertiary:case oe.Bip44Sui:return!1}},"isRecommendedDerivationPathType");d();h();var jI=o(({pathType:e,index:t})=>{switch(e){case oe.Bip44RootEthereum:case oe.Bip44RootSolana:return"root-derivation-path-group";case oe.Bip44ChangeSolana:case oe.Bip44Ethereum:case oe.Bip44Sui:case oe.BitcoinTaproot:case oe.BitcoinNativeSegwit:case oe.BitcoinNestedSegwit:case oe.BitcoinLegacy:return`recommended-group:index-${t}`;case oe.Bip44EthereumSecondary:case oe.Bip44Solana:return`secondary-group:index-${t}`;case oe.Bip44EthereumTertiary:case oe.DeprecatedSolana:return`tertiary-group:index-${t}`}},"getDerivationPathGroupKey");d();h();var qI=o(e=>e==null?!1:[O.Ledger,O.SeedVault].includes(e),"isHardwareWalletAccountType");d();h();d();h();var Qb="Trying to find a selected account, but there no accounts in the vault.",WI="Missing ChainAvailability.",Xb=o((e,t)=>`No account found! Num accounts: ${e} | Identifier used: ${t}`,"NoAccountFoundFromIdentifierErrorMsg"),zh=new Error("The current account group has no valid bitcoin address"),jh=new Error("The current account group has no valid EIP-155 address"),qh=new Error("The current account group has no valid solana address"),Wh=new Error("The current account group has no valid sui address"),ew=new Error("The current account group has no valid address or the the chain type was unsupported"),$z=new Error("[Legacy Mn*monic Fetch] no legacy mn*monic in storage"),Gz=new Error("[Legacy Mn*monic Fetch] internal error fetching legacy mn*monic");function tw(e,t){let n=(e?.addresses??[]).find(({addressType:i})=>i===t);if(!e?.addresses||!n)switch(t){case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:throw zh;case k.EVM:throw jh;case k.Solana:throw qh;case k.Sui:throw Wh;default:throw ew}return n}o(tw,"getChainAddressByAccount");function HI(e,t){return tw(e,t)?.address}o(HI,"getAddressByAccount");function $I(e){switch(e.type){case O.Seed:case O.Seedless:case O.Ledger:return e.chains?Object.entries(e.chains).map(([t,r])=>({addressType:t,address:"address"in r?r.address:Object.values(r.addresses)[0]})):[];case O.PrivateKey:return e.chainType===k.BitcoinTaproot||e.chainType===k.BitcoinNativeSegwit||e.chainType===k.BitcoinNestedSegwit||e.chainType===k.BitcoinLegacy?Object.entries(e.addresses).map(([t,r])=>({addressType:e.chainType,address:r})):[{addressType:e.chainType,address:"address"in e?e.address:""}];case O.ReadOnly:return Object.entries(e.addresses).map(([t,r])=>({addressType:t,address:r||""}));case O.SeedVault:return[{addressType:"solana",address:e.address}];default:return[]}}o($I,"getAddressesFromAccount");function Ti(e){return e?$I(e).filter(r=>r.address):[]}o(Ti,"getWalletAddressesFromAccount");d();h();var GI=o(e=>{let t=e.toString();return Da(t)},"formatAddressValue");d();h();function ZI(e){let t=e.endsWith(".sol"),r=e==="@",n=e.startsWith("@")&&e.length>1;return[t,r,n]}o(ZI,"parseBonfidaHandle");d();h();function JI(e){return[e.endsWith(".eth")]}o(JI,"parseENSHandle");d();h();var YI=o(async(e,t,r)=>{let i=(await e.fetchAllAccounts()).find(c=>{switch(c.type){case O.Seed:case O.Seedless:return c.seedIdentifier===r;case O.PrivateKey:return c.privateKeyIdentifier===r;case O.Ledger:case O.SeedVault:case O.ReadOnly:case O.KMSVault:return!1;default:xe(c)}});if(!i)throw new Error("Unable to find account to sign client JWT with.");let s=await e.sign(i.identifier,{isJWT:!0,data:t});if(s.status==="error")throw new Error("Error signing over clientJWT.");if(!("signedJWT"in s)||!s.signedJWT)throw new Error("No JWT from vault signing.");return s.signedJWT},"signClientJWT");d();h();d();h();d();h();d();h();var Nt="vault";function Ur(e,t=Nt){return`kms:${e}:${t}`}o(Ur,"getKMSVaultIdentifier");d();h();d();h();d();h();d();h();d();h();d();h();var rw="2025-11-24";d();h();d();h();var $h=m.enum(["Ed25519","Secp256k1"]),Gh=m.enum(["Ethereum","Solana","BitcoinSegwit","Sui","BitcoinTaproot"]),xt=m.object({curve:$h,derivationPath:m.string(),addressFormat:Gh}),eo=xt.extend({address:m.string(),publicKey:m.string().regex(Jc)}),nw=m.object({walletId:m.string(),walletName:m.string(),tags:m.array(m.string())});var QI=m.object({code:m.number(),message:m.string()}),iw=m.object({error:QI,requestId:m.string().optional()}),XI=m.object({kind:m.literal("RLP_ENCODED"),bytes:m.string()}),e_=m.object({kind:m.literal("PSBT"),bytes:m.string()}),t_=m.object({kind:m.literal("SUI_BCS_ENCODED_TRANSACTION_DATA"),bytes:m.string()}),Zh=m.union([m.array(m.number().int().min(0)),m.string(),XI,e_,t_]),$u=m.object({envelope:m.string(),publicKey:m.string(),proof:m.string().optional()}),Nn=m.enum(["Ed25519","Secp256r1","Secp256k1","Secp256k1Keccak256"]),Kj=m.object({publicKey:m.array(m.number().int().min(0)),algorithm:Nn}),Rj=m.discriminatedUnion("authenticatorKind",[m.object({authenticatorKind:m.literal("keypair"),publicKey:m.array(m.number().int().min(0)),algorithm:Nn}),m.object({authenticatorKind:m.literal("passkey")}),m.object({authenticatorKind:m.literal("oidc")})]),Jh=m.discriminatedUnion("authenticatorKind",[m.object({authenticatorKind:m.literal("keypair"),publicKey:m.string(),algorithm:Nn,authenticatorName:m.string()}),m.object({authenticatorKind:m.literal("passkey"),authenticatorName:m.string()}),m.object({authenticatorKind:m.literal("oidc"),authenticatorName:m.string(),jwksUrl:m.string().url(),idTokenClaims:m.object({sub:m.string(),iss:m.string(),aud:m.string().nullish().default(null)})})]),r_=m.discriminatedUnion("authenticatorKind",[m.object({authenticatorKind:m.literal("keypair"),publicKey:m.string(),algorithm:Nn,authenticatorName:m.string(),id:m.string(),createdAtMs:m.number()}),m.object({authenticatorKind:m.literal("passkey"),authenticatorName:m.string(),id:m.string(),createdAtMs:m.number()}),m.object({authenticatorKind:m.literal("oidc"),authenticatorName:m.string(),jwksUrl:m.string().url(),idTokenClaims:m.object({sub:m.string(),iss:m.string(),aud:m.string().nullish().default(null)}),id:m.string(),createdAtMs:m.number()})]),n_=m.object({type:m.literal("CEL"),preset:m.literal("LEGACY_USER_ROLE")}),i_=m.enum(["ALLOW","DENY"]),o_=m.object({expression:m.string().min(1).max(4096),outcome:i_,comment:m.string().min(0).max(200)}),Hh=m.lazy(()=>m.union([m.null(),m.boolean(),m.string(),m.number().finite(),m.array(Hh),m.record(Hh)])),s_=m.object({name:m.string().min(1).max(50),value:Hh,comment:m.string().min(0).max(200)}),a_=m.object({type:m.literal("CEL"),rules:m.array(o_),constants:m.array(s_)}),c_=m.object({usdCentsLimitPerDay:m.number(),memoryAccount:m.string(),memoryId:m.number(),memoryBump:m.number()}),u_=m.object({ethereumMessage:m.boolean(),ethereumTx:m.boolean(),ethereumTypedData:m.boolean(),rawPayload:m.boolean(),solanaTx:m.boolean(),utf8Message:m.boolean()}),l_=m.object({type:m.literal("CEL"),preset:m.literal("DAPP_CONNECTION_USER"),walletId:m.string(),usdLimit:c_.nullish().default(null),allowedMethods:u_.nullish().default(null),solanaProgramAllowlist:m.array(m.string()).nullish().default(null)}),f_=m.union([a_,n_,l_]),d_=m.object({type:m.literal("ROOT")}),Xa=m.union([d_,f_]),ow=m.enum(["ADMIN","USER"]),Gu=m.object({username:m.string(),role:ow.or(Xa).optional(),traits:m.object({appId:m.string().optional()}).optional(),authenticators:m.array(Jh),policy:Xa.optional(),expiresInMs:m.number().optional()}),sw=m.object({username:m.string(),role:ow.optional(),authenticators:m.array(r_),traits:m.record(m.string()).optional().default({}),expiresAtMs:m.number().nullish().default(null),createdAtMs:m.number().nullish().default(null)}),h_=sw.extend({policy:Xa.optional()}),p_=m.union([h_,sw]),Yt=m.object({organizationId:m.string(),organizationName:m.string(),parentOrganizationId:m.string().nullish().default(null),tags:m.array(m.string()),users:m.array(p_)}),m_=m.discriminatedUnion("rule",[m.object({rule:m.literal("SystemInstructionLamportsThreshold"),min:m.number().int().min(0).nullish().default(null),max:m.number().int().min(0).nullish().default(null)}),m.object({rule:m.literal("SystemInstructionRecipientAllowlist"),allowlist:m.array(m.string())})]),g_=m.union([m.object({In:m.array(m.number().int().min(0))}),m.object({Exact:m.number().int().min(0)}),m.literal("Any")]),Hu=m.object({programId:m.string(),discriminator:g_,validate:m.array(m_).optional()}),Nj=m.object({max:m.number().int().min(0)}),Dj=m.object({maxComputeUnitPrice:m.number().int().min(0).nullish().default(null),maxComputeUnits:m.number().int().min(0).nullish().default(null)}),Uj=m.object({allowlist:m.array(Hu)}),Lj=m.object({allowlist:m.array(Hu).optional()}),Vj=m.null().default(null),y_=m.discriminatedUnion("rule",[m.object({rule:m.literal("NoSignerAccountUsage"),allowlist:m.array(Hu).optional()}),m.object({rule:m.literal("BundleSizeLimit"),max:m.number().int().min(0)}),m.object({rule:m.literal("ComputeBudgetLimit"),maxComputeUnitPrice:m.number().int().min(0).nullish().default(null),maxComputeUnits:m.number().int().min(0).nullish().default(null)}),m.object({rule:m.literal("NoAddressLookupTables")}),m.object({rule:m.literal("InstructionAllowlist"),allowlist:m.array(Hu)}),m.object({rule:m.literal("AllowAll")})]),v_=m.object({rules:m.array(y_)}),b_=m.object({version:m.literal("v0"),solana:v_.nullish().default(null)}),ec=b_,w_=m.enum(["owner","signaturePayload","signatureTransaction"]),x_=m.object({version:m.literal("v0"),scopes:m.array(w_),derivationAllowlist:m.array(xt).nullish().default(null)}),tc=x_;var Zu=class e extends Error{static{o(this,"KMSRpcError")}response;method;errorCode;requestId;constructor(t,r){let{message:n,requestId:i,code:s}=S_(r.data),c=`KMS RPC call failed: ${t} returned ${r.status} ${r.statusText} - ${n}${i?` (requestId: ${i})`:""}`;super(c),this.name="KMSRpcError",this.response=r,this.method=t,this.requestId=i,this.errorCode=s,Object.setPrototypeOf(this,e.prototype)}};function S_(e){let t=iw.safeParse(e);if(!t.success)return{message:"Unknown error"};let{error:r,requestId:n}=t.data;return{message:r.message,requestId:n,code:r.code}}o(S_,"extractErrorInfo");var A_="00000000-0000-0000-0000-000000000000",M_="/v1/wallets/kms/rpc";async function Se(e,t,r,n){let i={method:t,params:r,timestampMs:await Ps()},s=await Yh(e,t,i);return n.parse(s)}o(Se,"rpcCall");async function Yh(e,t,r){let n=JSON.stringify(r),i;try{let A=await e.getPublicKey(),T=await e.signRpcPayload(r);i=st(Buffer.from(JSON.stringify({publicKey:A,signature:T,kind:"PKI"}),"utf-8"))}catch(A){throw new Error(`[KMS] Failed to authenticate rpc call: ${A instanceof Error?A.message:"Unknown error"}`)}let s=E.WALLET_SERVICE_API_URL,f=await(s?pt.api("custom",s):pt.api()).noBearer().post(M_,n,{headers:{"Content-Type":"application/json","X-Phantom-Stamp":i,"X-App-Id":A_,"x-api-version":rw},validateStatus:!1}),p=!gs(f),v=f.data&&typeof f.data=="object"&&"error"in f.data;if(p||v)throw new Zu(t,f);return f.data}o(Yh,"baseRpcCall");d();h();d();h();d();h();function to(e,t){return e.users.find(r=>r.authenticators.some(n=>n.authenticatorKind!=="keypair"?!1:Yc(n.publicKey)===t))}o(to,"getByPublicKey");var Qh=m.object({organizationId:m.string(),user:Gu,replaceExpirable:m.boolean().optional()}),Ju=m.object({result:Yt}).transform(e=>({result:e.result,getByPublicKey:o(t=>to(e.result,t),"getByPublicKey")}));function Xh(e,t){return Se(e.authenticator,"addUserToOrganization",t,Ju)}o(Xh,"addUserToOrganization");d();h();var ep=m.object({organizationId:m.string(),importEnvelope:$u,encryptedSecret:m.string().regex(Jc),walletName:m.string(),accounts:m.array(xt),mnemonicLength:m.number().int().min(0).default(24).optional(),tags:m.array(m.string()).optional()}),Yu=m.object({result:m.object({walletId:m.string(),walletName:m.string(),accounts:m.array(eo)})});function tp(e,t){return Se(e.authenticator,"completeImportWallet",t,Yu)}o(tp,"completeImportWallet");d();h();var rp=m.object({organizationId:m.string(),username:m.string(),authenticator:Jh}),Qu=m.object({result:m.discriminatedUnion("authenticatorKind",[m.object({authenticatorKind:m.literal("keypair"),publicKey:m.string(),algorithm:Nn,authenticatorName:m.string(),id:m.string(),createdAtMs:m.number()}),m.object({authenticatorKind:m.literal("passkey"),authenticatorName:m.string(),id:m.string(),createdAtMs:m.number()}),m.object({authenticatorKind:m.literal("oidc"),authenticatorName:m.string(),jwksUrl:m.string().url(),idTokenClaims:m.object({sub:m.string(),iss:m.string(),aud:m.string().nullish().default(null)}),id:m.string(),createdAtMs:m.number()})])});function np(e,t){return Se(e.authenticator,"createAuthenticator",t,Qu)}o(np,"createAuthenticator");d();h();var ip=m.object({organizationName:m.string(),tags:m.array(m.string()).optional(),users:m.array(Gu)}),Xu=m.object({result:Yt}).transform(e=>({result:e.result,getByPublicKey:o(t=>to(e.result,t),"getByPublicKey")}));function op(e,t){return Se(e.authenticator,"createOrganization",t,Xu)}o(op,"createOrganization");d();h();var sp=m.object({walletName:m.string(),organizationId:m.string(),mnemonicLength:m.number().int().min(0).default(24).optional(),accounts:m.array(xt).optional()}),el=m.object({result:m.object({walletId:m.string(),walletName:m.string(),accounts:m.array(m.object({curve:$h,derivationPath:m.string(),addressFormat:Gh,publicKey:m.string()}))})});function ap(e,t){return Se(e.authenticator,"createWallet",t,el)}o(ap,"createWallet");d();h();var cp=m.object({organizationId:m.string(),username:m.string(),authenticatorId:m.string()}),tl=m.object({result:Yt}).transform(e=>({result:e.result,getByPublicKey:o(t=>to(e.result,t),"getByPublicKey")}));function up(e,t){return Se(e.authenticator,"deleteAuthenticator",t,tl)}o(up,"deleteAuthenticator");d();h();var lp=m.object({organizationId:m.string(),username:m.string()}),rl=m.object({result:Yt});function fp(e,t){return Se(e.authenticator,"deleteUserFromOrganization",t,rl)}o(fp,"deleteUserFromOrganization");d();h();var dp=m.object({message:m.string(),organizationId:m.string(),walletId:m.string(),derivationInfo:xt.nullish().default(null),policyName:m.string().optional()}),nl=m.object({result:m.object({signature:m.string(),address:m.string(),publicKey:m.string()})});function hp(e,t){return Se(e.authenticator,"ethereumSignMessage",t,nl)}o(hp,"ethereumSignMessage");d();h();var aw=m.union([Hc,$c,Gc]),pp=m.object({typedData:aw,organizationId:m.string(),walletId:m.string(),derivationInfo:xt.nullish().default(null),policyName:m.string().optional()}),il=m.object({result:m.object({signature:m.string(),address:m.string(),publicKey:m.string()})});function mp(e,t){return Se(e.authenticator,"ethereumSignTypedData",t,il)}o(mp,"ethereumSignTypedData");d();h();var gp=m.object({organizationId:m.string(),walletId:m.string(),publicKey:m.string()}),ol=m.object({result:m.object({encrypted_bundle:m.string()})});function yp(e,t){return Se(e.authenticator,"exportWallet",t,ol)}o(yp,"exportWallet");d();h();var vp=m.object({organizationId:m.string(),walletId:m.string(),accounts:m.array(xt)}),sl=m.object({result:m.array(eo)});function bp(e,t){return Se(e.authenticator,"getAccounts",t,sl)}o(bp,"getAccounts");d();h();var wp=m.object({publicKey:m.string()}),al=m.object({result:Yt});function xp(e,t){return Se(e.authenticator,"getOrCreatePhantomOrganization",t,al)}o(xp,"getOrCreatePhantomOrganization");d();h();var Sp=m.object({walletName:m.string(),organizationId:m.string(),tag:m.string(),mnemonicLength:m.number().int().min(0).default(24).optional(),accounts:m.array(xt).optional()}),cl=m.object({result:m.object({walletId:m.string(),walletName:m.string(),accounts:m.array(eo)})});function Ap(e,t){return Se(e.authenticator,"getOrCreateWalletWithTag",t,cl)}o(Ap,"getOrCreateWalletWithTag");d();h();var Mp=m.object({organizationId:m.string()}),ul=m.object({result:Yt}).transform(e=>({result:e.result,getByPublicKey:o(t=>to(e.result,t),"getByPublicKey")}));function Ep(e,t){return Se(e.authenticator,"getOrganization",t,ul)}o(Ep,"getOrganization");d();h();var Tp=m.object({organizationId:m.string(),limit:m.number().int().min(0).optional(),offset:m.number().int().min(0).optional()}),ll=m.object({result:m.object({wallets:m.array(nw),totalCount:m.number().int().min(0),limit:m.number().int().min(0),offset:m.number().int().min(0)})});function Ip(e,t){return Se(e.authenticator,"getOrganizationWallets",t,ll)}o(Ip,"getOrganizationWallets");d();h();var _p=m.object({}),fl=m.object({result:Yt.nullish()});function kp(e,t){return Se(e.authenticator,"getPhantomOrganization",t,fl)}o(kp,"getPhantomOrganization");d();h();var Pp=m.object({organizationId:m.string(),tag:m.string(),accounts:m.array(xt).optional()}),dl=m.object({result:m.object({walletId:m.string(),walletName:m.string(),accounts:m.array(eo)}).nullish()});function Op(e,t){return Se(e.authenticator,"getWalletWithTag",t,dl)}o(Op,"getWalletWithTag");d();h();var Cp=m.object({ownerOrganizationId:m.string(),targetOrganizationId:m.string(),walletId:m.string(),policy:tc,transactionPolicy:ec.nullish().default(null)}),hl=m.object({result:m.object({organizationId:m.string(),walletId:m.string(),organizationPolicy:tc,transactionPolicy:ec.nullish().default(null)})});function Bp(e,t){return Se(e.authenticator,"grantOrganizationAccess",t,hl)}o(Bp,"grantOrganizationAccess");d();h();var Kp=m.object({organizationId:m.string()}),pl=m.object({result:$u,signature:m.string().optional()});function Rp(e,t){return Se(e.authenticator,"initWalletImport",t,pl)}o(Rp,"initWalletImport");d();h();var Np=m.object({ownerOrganizationId:m.string(),targetOrganizationId:m.string(),walletId:m.string()}),ml=m.object({result:m.object({organizationId:m.string(),walletId:m.string(),organizationPolicy:tc,transactionPolicy:ec.nullish().default(null)})});function Dp(e,t){return Se(e.authenticator,"revokeOrganizationAccess",t,ml)}o(Dp,"revokeOrganizationAccess");d();h();var Up=m.object({payload:m.union([m.array(m.number().int().min(0)),m.string()]),organizationId:m.string(),walletId:m.string(),derivationInfo:xt,algorithm:Nn}),gl=m.object({result:m.object({signature:m.string(),address:m.string(),publicKey:m.string()})});function Lp(e,t){let r=Array.isArray(t.payload)?st(Buffer.from(t.payload)):t.payload;return Se(e.authenticator,"signRawPayload",{...t,payload:r},gl)}o(Lp,"signRawPayload");d();h();var Vp=m.object({transaction:Zh,organizationId:m.string(),walletId:m.string(),derivationInfo:xt.nullish().default(null),policyName:m.string().nullish().default(null)}),yl=m.object({result:m.object({transaction:Zh,address:m.string(),publicKey:m.string(),signature:m.string().optional()})});function Fp(e,t){return Se(e.authenticator,"signTransaction",t,yl)}o(Fp,"signTransaction");d();h();var zp=m.object({message:m.string(),organizationId:m.string(),walletId:m.string(),derivationInfo:xt,algorithm:Nn,policyName:m.string().optional()}),vl=m.object({result:m.object({signature:m.string(),address:m.string(),publicKey:m.string()})});function jp(e,t){return Se(e.authenticator,"signUtf8Message",t,vl)}o(jp,"signUtf8Message");d();h();var qp=m.object({organizationId:m.string(),username:m.string(),newPolicy:Xa.optional(),addTraits:m.record(m.string()).optional(),removeTraits:m.record(m.string()).optional()}),bl=m.object({result:Yt});function Wp(e,t){return Se(e.authenticator,"updateUserInOrganization",t,bl)}o(Wp,"updateUserInOrganization");var E_=20,T_={createOrganization:{request:ip,response:Xu},getOrganization:{request:Mp,response:ul},getOrCreatePhantomOrganization:{request:wp,response:al},getPhantomOrganization:{request:_p,response:fl},addUserToOrganization:{request:Qh,response:Ju},deleteUserFromOrganization:{request:lp,response:rl},updateUserInOrganization:{request:qp,response:bl},createAuthenticator:{request:rp,response:Qu},deleteAuthenticator:{request:cp,response:tl},createWallet:{request:sp,response:el},getOrganizationWallets:{request:Tp,response:ll},getOrCreateWalletWithTag:{request:Sp,response:cl},getWalletWithTag:{request:Pp,response:dl},exportWallet:{request:gp,response:ol},grantOrganizationAccess:{request:Cp,response:hl},revokeOrganizationAccess:{request:Np,response:ml},initWalletImport:{request:Kp,response:pl},completeImportWallet:{request:ep,response:Yu},signRawPayload:{request:Up,response:gl},signTransaction:{request:Vp,response:yl},signUtf8Message:{request:zp,response:vl},ethereumSignMessage:{request:dp,response:nl},ethereumSignTypedData:{request:pp,response:il},getAccounts:{request:vp,response:sl}};async function Hp(e,t){if(t.length===0)return[];let r=[],n=await Ps();for(let i of I_(t,E_)){let s=i.map(p=>({method:p.method,params:p.params,timestampMs:n})),c=await Yh(e,"batch",s);if(!Array.isArray(c))throw new Error("[KMS] Batch RPC call returned non-array response");if(c.length!==i.length)throw new Error(`[KMS] Batch RPC call response length mismatch: expected ${i.length}, got ${c.length}`);let f=i.map((p,v)=>T_[p.method].response.parse(c[v]));r.push(...f)}return r}o(Hp,"batchRpcCall");function cw(e,t){return{method:e,params:t}}o(cw,"createBatchRequest");function I_(e,t){if(e.length<=t)return[e];let r=[];for(let n=0;n<e.length;n+=t)r.push(e.slice(n,n+t));return r}o(I_,"chunk");var Ii;(function(e){e.RLP_ENCODED="RLP_ENCODED",e.PSBT="PSBT",e.EIP_1559="EIP_1559",e.SUI_BCS_ENCODED_TRANSACTION_DATA="SUI_BCS_ENCODED_TRANSACTION_DATA"})(Ii||(Ii={}));function Vs(e){return{createOrganization:o(t=>op(e,t),"createOrganization"),getOrganization:o(t=>Ep(e,t),"getOrganization"),createAuthenticator:o(t=>np(e,t),"createAuthenticator"),deleteAuthenticator:o(t=>up(e,t),"deleteAuthenticator"),deleteUserFromOrganization:o(t=>fp(e,t),"deleteUserFromOrganization"),createWallet:o(t=>ap(e,t),"createWallet"),getOrganizationWallets:o(t=>Ip(e,t),"getOrganizationWallets"),getOrCreateWalletWithTag:o(t=>Ap(e,t),"getOrCreateWalletWithTag"),getWalletWithTag:o(t=>Op(e,t),"getWalletWithTag"),exportWallet:o(t=>yp(e,t),"exportWallet"),grantOrganizationAccess:o(t=>Bp(e,t),"grantOrganizationAccess"),revokeOrganizationAccess:o(t=>Dp(e,t),"revokeOrganizationAccess"),initWalletImport:o(t=>Rp(e,t),"initWalletImport"),completeImportWallet:o(t=>tp(e,t),"completeImportWallet"),getOrCreatePhantomOrganization:o(async()=>{let t=await e.authenticator.getPublicKey();return xp(e,{publicKey:t})},"getOrCreatePhantomOrganization"),getPhantomOrganization:o(t=>kp(e,t),"getPhantomOrganization"),getAuthenticatorPublicKey:o(()=>e.authenticator.getPublicKey(),"getAuthenticatorPublicKey"),signRawPayload:o(t=>Lp(e,t),"signRawPayload"),signTransaction:o(t=>Fp(e,t),"signTransaction"),signUtf8Message:o(t=>jp(e,t),"signUtf8Message"),ethereumSignMessage:o(t=>hp(e,t),"ethereumSignMessage"),ethereumSignTypedData:o(t=>mp(e,t),"ethereumSignTypedData"),getAccounts:o(t=>bp(e,t),"getAccounts"),addUserToOrganization:o(t=>Xh(e,t),"addUserToOrganization"),updateUserInOrganization:o(t=>Wp(e,t),"updateUserInOrganization"),batchRpcCall:o(t=>Hp(e.authenticator,t),"batchRpcCall")}}o(Vs,"createKMS");d();h();var k_=["createOrganization","getOrganization","getOrCreatePhantomOrganization","getPhantomOrganization","addUserToOrganization","deleteUserFromOrganization","updateUserInOrganization","createAuthenticator","deleteAuthenticator","createWallet","getOrganizationWallets","getOrCreateWalletWithTag","getWalletWithTag","exportWallet","grantOrganizationAccess","revokeOrganizationAccess","initWalletImport","completeImportWallet","signRawPayload","signTransaction","signUtf8Message","ethereumSignMessage","ethereumSignTypedData","getAccounts"],lw=m.enum(k_),uw=m.object({method:lw,params:m.record(m.unknown()),timestampMs:m.number().int().positive()}),wl=m.union([uw,m.array(uw)]);function $p(e){return wl.parse(e)}o($p,"validateKMSRpcPayload");d();h();function P_(e){switch(e){case"Solana":case"Sui":return"Ed25519";case"Ethereum":case"BitcoinSegwit":case"BitcoinTaproot":return"Secp256k1";default:return xe(e)}}o(P_,"getExpectedCurve");function O_(e,t){for(let{curve:r,addressFormat:n}of e){let i=P_(n);if(r!==i)throw new Error(`KMS ${t} request expected curve ${i} for address format ${n}, received ${r}.`)}}o(O_,"validateRequestedAccounts");async function Gp(e,t,r){O_(r,"getWalletWithTag");let{result:n}=await e.getPhantomOrganization({});if(!n)return null;let{result:i}=await e.getWalletWithTag({organizationId:n.organizationId,tag:t,accounts:r});return i?{organizationId:n.organizationId,walletId:i.walletId,walletName:i.walletName,accounts:i.accounts}:null}o(Gp,"getKMSWalletByTagIfExists");d();h();d();h();function fw(e){switch(e){case k.Solana:return{curve:"Ed25519",addressFormat:"Solana"};case k.EVM:return{curve:"Secp256k1",addressFormat:"Ethereum"};case k.BitcoinTaproot:return{curve:"Secp256k1",addressFormat:"BitcoinTaproot"};case k.BitcoinNativeSegwit:return{curve:"Secp256k1",addressFormat:"BitcoinSegwit"};case k.BitcoinNestedSegwit:case k.BitcoinLegacy:throw new Error(`KMS accounts do not support Bitcoin address format ${e}.`);case k.Sui:return{curve:"Ed25519",addressFormat:"Sui"};default:throw new Error(`Unsupported chain type: ${e}`)}}o(fw,"getKMSCurveAndFormatForChainType");function dw(e){switch(e){case oe.Bip44RootSolana:case oe.Bip44Solana:case oe.Bip44ChangeSolana:case oe.DeprecatedSolana:return{curve:"Ed25519",addressFormat:"Solana"};case oe.Bip44RootEthereum:case oe.Bip44Ethereum:case oe.Bip44EthereumSecondary:case oe.Bip44EthereumTertiary:return{curve:"Secp256k1",addressFormat:"Ethereum"};case oe.BitcoinTaproot:return{curve:"Secp256k1",addressFormat:"BitcoinTaproot"};case oe.BitcoinNativeSegwit:return{curve:"Secp256k1",addressFormat:"BitcoinSegwit"};case oe.BitcoinNestedSegwit:case oe.BitcoinLegacy:throw new Error(`KMS accounts do not support Bitcoin derivation path ${e}.`);case oe.Bip44Sui:return{curve:"Ed25519",addressFormat:"Sui"};default:throw new Error(`Unsupported derivation path type: ${e}`)}}o(dw,"getKMSCurveAndFormatForPathType");function xl(e,t=0){let r=[];for(let n of e)try{let i=dw(n),s=yi({pathType:n,index:t});r.push({curve:i.curve,derivationPath:s,addressFormat:i.addressFormat})}catch{continue}return r}o(xl,"convertDerivationPathTypesToKMSInfo");async function Zp(e=0){let t=lr().enabledAddressTypes,r=tr(t);return xl(r,e)}o(Zp,"getKMSDerivationPathsForIndex");d();h();d();h();var Xp={};aM(Xp,{bitGet:()=>U_,bitLen:()=>D_,bitMask:()=>rc,bitSet:()=>L_,bytesToHex:()=>jo,bytesToNumberBE:()=>ki,bytesToNumberLE:()=>Al,concatBytes:()=>Fs,createHmacDrbg:()=>Qp,ensureBytes:()=>Sr,equalBytes:()=>R_,hexToBytes:()=>qo,hexToNumber:()=>Yp,isBytes:()=>gn,numberToBytesBE:()=>ro,numberToBytesLE:()=>Ml,numberToHexUnpadded:()=>gw,numberToVarBytesBE:()=>K_,utf8ToBytes:()=>N_,validateObject:()=>no});d();h();var mw=BigInt(0),Sl=BigInt(1),C_=BigInt(2);function gn(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}o(gn,"isBytes");var B_=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function jo(e){if(!gn(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=B_[e[r]];return t}o(jo,"bytesToHex");function gw(e){let t=e.toString(16);return t.length&1?`0${t}`:t}o(gw,"numberToHexUnpadded");function Yp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}o(Yp,"hexToNumber");var _i={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function hw(e){if(e>=_i._0&&e<=_i._9)return e-_i._0;if(e>=_i._A&&e<=_i._F)return e-(_i._A-10);if(e>=_i._a&&e<=_i._f)return e-(_i._a-10)}o(hw,"asciiToBase16");function qo(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){let c=hw(e.charCodeAt(s)),f=hw(e.charCodeAt(s+1));if(c===void 0||f===void 0){let p=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+p+'" at index '+s)}n[i]=c*16+f}return n}o(qo,"hexToBytes");function ki(e){return Yp(jo(e))}o(ki,"bytesToNumberBE");function Al(e){if(!gn(e))throw new Error("Uint8Array expected");return Yp(jo(Uint8Array.from(e).reverse()))}o(Al,"bytesToNumberLE");function ro(e,t){return qo(e.toString(16).padStart(t*2,"0"))}o(ro,"numberToBytesBE");function Ml(e,t){return ro(e,t).reverse()}o(Ml,"numberToBytesLE");function K_(e){return qo(gw(e))}o(K_,"numberToVarBytesBE");function Sr(e,t,r){let n;if(typeof t=="string")try{n=qo(t)}catch(s){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${s}`)}else if(gn(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}o(Sr,"ensureBytes");function Fs(...e){let t=0;for(let i=0;i<e.length;i++){let s=e[i];if(!gn(s))throw new Error("Uint8Array expected");t+=s.length}let r=new Uint8Array(t),n=0;for(let i=0;i<e.length;i++){let s=e[i];r.set(s,n),n+=s.length}return r}o(Fs,"concatBytes");function R_(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}o(R_,"equalBytes");function N_(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}o(N_,"utf8ToBytes");function D_(e){let t;for(t=0;e>mw;e>>=Sl,t+=1);return t}o(D_,"bitLen");function U_(e,t){return e>>BigInt(t)&Sl}o(U_,"bitGet");var L_=o((e,t,r)=>e|(r?Sl:mw)<<BigInt(t),"bitSet"),rc=o(e=>(C_<<BigInt(e-1))-Sl,"bitMask"),Jp=o(e=>new Uint8Array(e),"u8n"),pw=o(e=>Uint8Array.from(e),"u8fr");function Qp(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Jp(e),i=Jp(e),s=0,c=o(()=>{n.fill(1),i.fill(0),s=0},"reset"),f=o((...T)=>r(i,n,...T),"h"),p=o((T=Jp())=>{i=f(pw([0]),T),n=f(),T.length!==0&&(i=f(pw([1]),T),n=f())},"reseed"),v=o(()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let T=0,I=[];for(;T<t;){n=f();let P=n.slice();I.push(P),T+=n.length}return Fs(...I)},"gen");return o((T,I)=>{c(),p(T);let P;for(;!(P=I(v()));)p();return c(),P},"genUntil")}o(Qp,"createHmacDrbg");var V_={bigint:o(e=>typeof e=="bigint","bigint"),function:o(e=>typeof e=="function","function"),boolean:o(e=>typeof e=="boolean","boolean"),string:o(e=>typeof e=="string","string"),stringOrUint8Array:o(e=>typeof e=="string"||gn(e),"stringOrUint8Array"),isSafeInteger:o(e=>Number.isSafeInteger(e),"isSafeInteger"),array:o(e=>Array.isArray(e),"array"),field:o((e,t)=>t.Fp.isValid(e),"field"),hash:o(e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen),"hash")};function no(e,t,r={}){let n=o((i,s,c)=>{let f=V_[s];if(typeof f!="function")throw new Error(`Invalid validator "${s}", expected function`);let p=e[i];if(!(c&&p===void 0)&&!f(p,e))throw new Error(`Invalid param ${String(i)}=${p} (${typeof p}), expected ${s}`)},"checkField");for(let[i,s]of Object.entries(t))n(i,s,!1);for(let[i,s]of Object.entries(r))n(i,s,!0);return e}o(no,"validateObject");var _t=BigInt(0),St=BigInt(1),Wo=BigInt(2),F_=BigInt(3),e0=BigInt(4),yw=BigInt(5),vw=BigInt(8),z_=BigInt(9),j_=BigInt(16);function Qt(e,t){let r=e%t;return r>=_t?r:t+r}o(Qt,"mod");function q_(e,t,r){if(r<=_t||t<_t)throw new Error("Expected power/modulo > 0");if(r===St)return _t;let n=St;for(;t>_t;)t&St&&(n=n*e%r),e=e*e%r,t>>=St;return n}o(q_,"pow");function Ar(e,t,r){let n=e;for(;t-- >_t;)n*=n,n%=r;return n}o(Ar,"pow2");function El(e,t){if(e===_t||t<=_t)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Qt(e,t),n=t,i=_t,s=St,c=St,f=_t;for(;r!==_t;){let v=n/r,A=n%r,T=i-c*v,I=s-f*v;n=r,r=A,i=c,s=f,c=T,f=I}if(n!==St)throw new Error("invert: does not exist");return Qt(i,t)}o(El,"invert");function W_(e){let t=(e-St)/Wo,r,n,i;for(r=e-St,n=0;r%Wo===_t;r/=Wo,n++);for(i=Wo;i<e&&q_(i,t,e)!==e-St;i++);if(n===1){let c=(e+St)/e0;return o(function(p,v){let A=p.pow(v,c);if(!p.eql(p.sqr(A),v))throw new Error("Cannot find square root");return A},"tonelliFast")}let s=(r+St)/Wo;return o(function(f,p){if(f.pow(p,t)===f.neg(f.ONE))throw new Error("Cannot find square root");let v=n,A=f.pow(f.mul(f.ONE,i),r),T=f.pow(p,s),I=f.pow(p,r);for(;!f.eql(I,f.ONE);){if(f.eql(I,f.ZERO))return f.ZERO;let P=1;for(let K=f.sqr(I);P<v&&!f.eql(K,f.ONE);P++)K=f.sqr(K);let B=f.pow(A,St<<BigInt(v-P-1));A=f.sqr(B),T=f.mul(T,B),I=f.mul(I,A),v=P}return T},"tonelliSlow")}o(W_,"tonelliShanks");function H_(e){if(e%e0===F_){let t=(e+St)/e0;return o(function(n,i){let s=n.pow(i,t);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s},"sqrt3mod4")}if(e%vw===yw){let t=(e-yw)/vw;return o(function(n,i){let s=n.mul(i,Wo),c=n.pow(s,t),f=n.mul(i,c),p=n.mul(n.mul(f,Wo),c),v=n.mul(f,n.sub(p,n.ONE));if(!n.eql(n.sqr(v),i))throw new Error("Cannot find square root");return v},"sqrt5mod8")}return e%j_,W_(e)}o(H_,"FpSqrt");var $_=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function t0(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=$_.reduce((n,i)=>(n[i]="function",n),t);return no(e,r)}o(t0,"validateField");function G_(e,t,r){if(r<_t)throw new Error("Expected power > 0");if(r===_t)return e.ONE;if(r===St)return t;let n=e.ONE,i=t;for(;r>_t;)r&St&&(n=e.mul(n,i)),i=e.sqr(i),r>>=St;return n}o(G_,"FpPow");function Z_(e,t){let r=new Array(t.length),n=t.reduce((s,c,f)=>e.is0(c)?s:(r[f]=s,e.mul(s,c)),e.ONE),i=e.inv(n);return t.reduceRight((s,c,f)=>e.is0(c)?s:(r[f]=e.mul(s,r[f]),e.mul(s,c)),i),r}o(Z_,"FpInvertBatch");function r0(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}o(r0,"nLength");function Tl(e,t,r=!1,n={}){if(e<=_t)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:s}=r0(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");let c=H_(e),f=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:rc(i),ZERO:_t,ONE:St,create:o(p=>Qt(p,e),"create"),isValid:o(p=>{if(typeof p!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof p}`);return _t<=p&&p<e},"isValid"),is0:o(p=>p===_t,"is0"),isOdd:o(p=>(p&St)===St,"isOdd"),neg:o(p=>Qt(-p,e),"neg"),eql:o((p,v)=>p===v,"eql"),sqr:o(p=>Qt(p*p,e),"sqr"),add:o((p,v)=>Qt(p+v,e),"add"),sub:o((p,v)=>Qt(p-v,e),"sub"),mul:o((p,v)=>Qt(p*v,e),"mul"),pow:o((p,v)=>G_(f,p,v),"pow"),div:o((p,v)=>Qt(p*El(v,e),e),"div"),sqrN:o(p=>p*p,"sqrN"),addN:o((p,v)=>p+v,"addN"),subN:o((p,v)=>p-v,"subN"),mulN:o((p,v)=>p*v,"mulN"),inv:o(p=>El(p,e),"inv"),sqrt:n.sqrt||(p=>c(f,p)),invertBatch:o(p=>Z_(f,p),"invertBatch"),cmov:o((p,v,A)=>A?v:p,"cmov"),toBytes:o(p=>r?Ml(p,s):ro(p,s),"toBytes"),fromBytes:o(p=>{if(p.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${p.length}`);return r?Al(p):ki(p)},"fromBytes")});return Object.freeze(f)}o(Tl,"Field");function bw(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}o(bw,"getFieldBytesLength");function n0(e){let t=bw(e);return t+Math.ceil(t/2)}o(n0,"getMinHashLength");function Il(e,t,r=!1){let n=e.length,i=bw(t),s=n0(t);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);let c=r?ki(e):Al(e),f=Qt(c,t-St)+St;return r?Ml(f,i):ro(f,i)}o(Il,"mapHashToField");d();h();d();h();d();h();d();h();function xw(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}o(xw,"number");function J_(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}o(J_,"isBytes");function i0(e,...t){if(!J_(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}o(i0,"bytes");function Sw(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");xw(e.outputLen),xw(e.blockLen)}o(Sw,"hash");function zs(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}o(zs,"exists");function Aw(e,t){i0(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}o(Aw,"output");d();h();d();h();var _l=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Mw(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}o(Mw,"isBytes");var kl=o(e=>new DataView(e.buffer,e.byteOffset,e.byteLength),"createView"),yn=o((e,t)=>e<<32-t|e>>>t,"rotr"),Y_=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Y_)throw new Error("Non little-endian hardware is not supported");function Q_(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}o(Q_,"utf8ToBytes");function nc(e){if(typeof e=="string"&&(e=Q_(e)),!Mw(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}o(nc,"toBytes");function Ew(...e){let t=0;for(let n=0;n<e.length;n++){let i=e[n];if(!Mw(i))throw new Error("Uint8Array expected");t+=i.length}let r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let s=e[n];r.set(s,i),i+=s.length}return r}o(Ew,"concatBytes");var js=class{static{o(this,"Hash")}clone(){return this._cloneInto()}},xZ={}.toString;function Tw(e){let t=o(n=>e().update(nc(n)).digest(),"hashC"),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}o(Tw,"wrapConstructor");function Iw(e=32){if(_l&&typeof _l.getRandomValues=="function")return _l.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}o(Iw,"randomBytes");var Pl=class extends js{static{o(this,"HMAC")}constructor(t,r){super(),this.finished=!1,this.destroyed=!1,Sw(t);let n=nc(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?t.create().update(n).digest():n);for(let c=0;c<s.length;c++)s[c]^=54;this.iHash.update(s),this.oHash=t.create();for(let c=0;c<s.length;c++)s[c]^=106;this.oHash.update(s),s.fill(0)}update(t){return zs(this),this.iHash.update(t),this}digestInto(t){zs(this),i0(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:c,outputLen:f}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=c,t.outputLen=f,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},o0=o((e,t,r)=>new Pl(e,t).update(r).digest(),"hmac");o0.create=(e,t)=>new Pl(e,t);d();h();d();h();var X_=BigInt(0),s0=BigInt(1);function _w(e,t){let r=o((i,s)=>{let c=s.negate();return i?c:s},"constTimeNegate"),n=o(i=>{let s=Math.ceil(t/i)+1,c=2**(i-1);return{windows:s,windowSize:c}},"opts");return{constTimeNegate:r,unsafeLadder(i,s){let c=e.ZERO,f=i;for(;s>X_;)s&s0&&(c=c.add(f)),f=f.double(),s>>=s0;return c},precomputeWindow(i,s){let{windows:c,windowSize:f}=n(s),p=[],v=i,A=v;for(let T=0;T<c;T++){A=v,p.push(A);for(let I=1;I<f;I++)A=A.add(v),p.push(A);v=A.double()}return p},wNAF(i,s,c){let{windows:f,windowSize:p}=n(i),v=e.ZERO,A=e.BASE,T=BigInt(2**i-1),I=2**i,P=BigInt(i);for(let B=0;B<f;B++){let K=B*p,N=Number(c&T);c>>=P,N>p&&(N-=I,c+=s0);let D=K,Z=K+Math.abs(N)-1,L=B%2!==0,ne=N<0;N===0?A=A.add(r(L,s[D])):v=v.add(r(ne,s[Z]))}return{p:v,f:A}},wNAFCached(i,s,c,f){let p=i._WINDOW_SIZE||1,v=s.get(i);return v||(v=this.precomputeWindow(i,p),p!==1&&s.set(i,f(v))),this.wNAF(p,v,c)}}}o(_w,"wNAF");function a0(e){return t0(e.Fp),no(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...r0(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}o(a0,"validateBasic");function ek(e){let t=a0(e);no(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}o(ek,"validatePointOpts");var{bytesToNumberBE:tk,hexToBytes:rk}=Xp,Ho={Err:class extends Error{static{o(this,"DERErr")}constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=Ho;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:tk(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=Ho,r=typeof e=="string"?rk(e):e;if(!gn(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:i,l:s}=Ho._parseInt(r.subarray(2)),{d:c,l:f}=Ho._parseInt(s);if(f.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:c}},hexFromSig(e){let t=o(v=>Number.parseInt(v[0],16)&8?"00"+v:v,"slice"),r=o(v=>{let A=v.toString(16);return A.length&1?`0${A}`:A},"h"),n=t(r(e.s)),i=t(r(e.r)),s=n.length/2,c=i.length/2,f=r(s),p=r(c);return`30${r(c+s+4)}02${p}${i}02${f}${n}`}},Pi=BigInt(0),Lr=BigInt(1),FZ=BigInt(2),kw=BigInt(3),zZ=BigInt(4);function nk(e){let t=ek(e),{Fp:r}=t,n=t.toBytes||((B,K,N)=>{let D=K.toAffine();return Fs(Uint8Array.from([4]),r.toBytes(D.x),r.toBytes(D.y))}),i=t.fromBytes||(B=>{let K=B.subarray(1),N=r.fromBytes(K.subarray(0,r.BYTES)),D=r.fromBytes(K.subarray(r.BYTES,2*r.BYTES));return{x:N,y:D}});function s(B){let{a:K,b:N}=t,D=r.sqr(B),Z=r.mul(D,B);return r.add(r.add(Z,r.mul(B,K)),N)}if(o(s,"weierstrassEquation"),!r.eql(r.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function c(B){return typeof B=="bigint"&&Pi<B&&B<t.n}o(c,"isWithinCurveOrder");function f(B){if(!c(B))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}o(f,"assertGE");function p(B){let{allowedPrivateKeyLengths:K,nByteLength:N,wrapPrivateKey:D,n:Z}=t;if(K&&typeof B!="bigint"){if(gn(B)&&(B=jo(B)),typeof B!="string"||!K.includes(B.length))throw new Error("Invalid key");B=B.padStart(N*2,"0")}let L;try{L=typeof B=="bigint"?B:ki(Sr("private key",B,N))}catch{throw new Error(`private key must be ${N} bytes, hex or bigint, not ${typeof B}`)}return D&&(L=Qt(L,Z)),f(L),L}o(p,"normPrivateKeyToScalar");let v=new Map;function A(B){if(!(B instanceof T))throw new Error("ProjectivePoint expected")}o(A,"assertPrjPoint");class T{static{o(this,"Point")}constructor(K,N,D){if(this.px=K,this.py=N,this.pz=D,K==null||!r.isValid(K))throw new Error("x required");if(N==null||!r.isValid(N))throw new Error("y required");if(D==null||!r.isValid(D))throw new Error("z required")}static fromAffine(K){let{x:N,y:D}=K||{};if(!K||!r.isValid(N)||!r.isValid(D))throw new Error("invalid affine point");if(K instanceof T)throw new Error("projective point not allowed");let Z=o(L=>r.eql(L,r.ZERO),"is0");return Z(N)&&Z(D)?T.ZERO:new T(N,D,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(K){let N=r.invertBatch(K.map(D=>D.pz));return K.map((D,Z)=>D.toAffine(N[Z])).map(T.fromAffine)}static fromHex(K){let N=T.fromAffine(i(Sr("pointHex",K)));return N.assertValidity(),N}static fromPrivateKey(K){return T.BASE.multiply(p(K))}_setWindowSize(K){this._WINDOW_SIZE=K,v.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:K,y:N}=this.toAffine();if(!r.isValid(K)||!r.isValid(N))throw new Error("bad point: x or y not FE");let D=r.sqr(N),Z=s(K);if(!r.eql(D,Z))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:K}=this.toAffine();if(r.isOdd)return!r.isOdd(K);throw new Error("Field doesn't support isOdd")}equals(K){A(K);let{px:N,py:D,pz:Z}=this,{px:L,py:ne,pz:ie}=K,re=r.eql(r.mul(N,ie),r.mul(L,Z)),ee=r.eql(r.mul(D,ie),r.mul(ne,Z));return re&&ee}negate(){return new T(this.px,r.neg(this.py),this.pz)}double(){let{a:K,b:N}=t,D=r.mul(N,kw),{px:Z,py:L,pz:ne}=this,ie=r.ZERO,re=r.ZERO,ee=r.ZERO,J=r.mul(Z,Z),fe=r.mul(L,L),S=r.mul(ne,ne),a=r.mul(Z,L);return a=r.add(a,a),ee=r.mul(Z,ne),ee=r.add(ee,ee),ie=r.mul(K,ee),re=r.mul(D,S),re=r.add(ie,re),ie=r.sub(fe,re),re=r.add(fe,re),re=r.mul(ie,re),ie=r.mul(a,ie),ee=r.mul(D,ee),S=r.mul(K,S),a=r.sub(J,S),a=r.mul(K,a),a=r.add(a,ee),ee=r.add(J,J),J=r.add(ee,J),J=r.add(J,S),J=r.mul(J,a),re=r.add(re,J),S=r.mul(L,ne),S=r.add(S,S),J=r.mul(S,a),ie=r.sub(ie,J),ee=r.mul(S,fe),ee=r.add(ee,ee),ee=r.add(ee,ee),new T(ie,re,ee)}add(K){A(K);let{px:N,py:D,pz:Z}=this,{px:L,py:ne,pz:ie}=K,re=r.ZERO,ee=r.ZERO,J=r.ZERO,fe=t.a,S=r.mul(t.b,kw),a=r.mul(N,L),l=r.mul(D,ne),g=r.mul(Z,ie),y=r.add(N,D),b=r.add(L,ne);y=r.mul(y,b),b=r.add(a,l),y=r.sub(y,b),b=r.add(N,Z);let M=r.add(L,ie);return b=r.mul(b,M),M=r.add(a,g),b=r.sub(b,M),M=r.add(D,Z),re=r.add(ne,ie),M=r.mul(M,re),re=r.add(l,g),M=r.sub(M,re),J=r.mul(fe,b),re=r.mul(S,g),J=r.add(re,J),re=r.sub(l,J),J=r.add(l,J),ee=r.mul(re,J),l=r.add(a,a),l=r.add(l,a),g=r.mul(fe,g),b=r.mul(S,b),l=r.add(l,g),g=r.sub(a,g),g=r.mul(fe,g),b=r.add(b,g),a=r.mul(l,b),ee=r.add(ee,a),a=r.mul(M,b),re=r.mul(y,re),re=r.sub(re,a),a=r.mul(y,l),J=r.mul(M,J),J=r.add(J,a),new T(re,ee,J)}subtract(K){return this.add(K.negate())}is0(){return this.equals(T.ZERO)}wNAF(K){return P.wNAFCached(this,v,K,N=>{let D=r.invertBatch(N.map(Z=>Z.pz));return N.map((Z,L)=>Z.toAffine(D[L])).map(T.fromAffine)})}multiplyUnsafe(K){let N=T.ZERO;if(K===Pi)return N;if(f(K),K===Lr)return this;let{endo:D}=t;if(!D)return P.unsafeLadder(this,K);let{k1neg:Z,k1:L,k2neg:ne,k2:ie}=D.splitScalar(K),re=N,ee=N,J=this;for(;L>Pi||ie>Pi;)L&Lr&&(re=re.add(J)),ie&Lr&&(ee=ee.add(J)),J=J.double(),L>>=Lr,ie>>=Lr;return Z&&(re=re.negate()),ne&&(ee=ee.negate()),ee=new T(r.mul(ee.px,D.beta),ee.py,ee.pz),re.add(ee)}multiply(K){f(K);let N=K,D,Z,{endo:L}=t;if(L){let{k1neg:ne,k1:ie,k2neg:re,k2:ee}=L.splitScalar(N),{p:J,f:fe}=this.wNAF(ie),{p:S,f:a}=this.wNAF(ee);J=P.constTimeNegate(ne,J),S=P.constTimeNegate(re,S),S=new T(r.mul(S.px,L.beta),S.py,S.pz),D=J.add(S),Z=fe.add(a)}else{let{p:ne,f:ie}=this.wNAF(N);D=ne,Z=ie}return T.normalizeZ([D,Z])[0]}multiplyAndAddUnsafe(K,N,D){let Z=T.BASE,L=o((ie,re)=>re===Pi||re===Lr||!ie.equals(Z)?ie.multiplyUnsafe(re):ie.multiply(re),"mul"),ne=L(this,N).add(L(K,D));return ne.is0()?void 0:ne}toAffine(K){let{px:N,py:D,pz:Z}=this,L=this.is0();K==null&&(K=L?r.ONE:r.inv(Z));let ne=r.mul(N,K),ie=r.mul(D,K),re=r.mul(Z,K);if(L)return{x:r.ZERO,y:r.ZERO};if(!r.eql(re,r.ONE))throw new Error("invZ was invalid");return{x:ne,y:ie}}isTorsionFree(){let{h:K,isTorsionFree:N}=t;if(K===Lr)return!0;if(N)return N(T,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:K,clearCofactor:N}=t;return K===Lr?this:N?N(T,this):this.multiplyUnsafe(t.h)}toRawBytes(K=!0){return this.assertValidity(),n(T,this,K)}toHex(K=!0){return jo(this.toRawBytes(K))}}T.BASE=new T(t.Gx,t.Gy,r.ONE),T.ZERO=new T(r.ZERO,r.ONE,r.ZERO);let I=t.nBitLength,P=_w(T,t.endo?Math.ceil(I/2):I);return{CURVE:t,ProjectivePoint:T,normPrivateKeyToScalar:p,weierstrassEquation:s,isWithinCurveOrder:c}}o(nk,"weierstrassPoints");function ik(e){let t=a0(e);return no(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}o(ik,"validateOpts");function Pw(e){let t=ik(e),{Fp:r,n}=t,i=r.BYTES+1,s=2*r.BYTES+1;function c(b){return Pi<b&&b<r.ORDER}o(c,"isValidFieldElement");function f(b){return Qt(b,n)}o(f,"modN");function p(b){return El(b,n)}o(p,"invN");let{ProjectivePoint:v,normPrivateKeyToScalar:A,weierstrassEquation:T,isWithinCurveOrder:I}=nk({...t,toBytes(b,M,_){let w=M.toAffine(),u=r.toBytes(w.x),x=Fs;return _?x(Uint8Array.from([M.hasEvenY()?2:3]),u):x(Uint8Array.from([4]),u,r.toBytes(w.y))},fromBytes(b){let M=b.length,_=b[0],w=b.subarray(1);if(M===i&&(_===2||_===3)){let u=ki(w);if(!c(u))throw new Error("Point is not on curve");let x=T(u),F=r.sqrt(x),z=(F&Lr)===Lr;return(_&1)===1!==z&&(F=r.neg(F)),{x:u,y:F}}else if(M===s&&_===4){let u=r.fromBytes(w.subarray(0,r.BYTES)),x=r.fromBytes(w.subarray(r.BYTES,2*r.BYTES));return{x:u,y:x}}else throw new Error(`Point of length ${M} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),P=o(b=>jo(ro(b,t.nByteLength)),"numToNByteStr");function B(b){let M=n>>Lr;return b>M}o(B,"isBiggerThanHalfOrder");function K(b){return B(b)?f(-b):b}o(K,"normalizeS");let N=o((b,M,_)=>ki(b.slice(M,_)),"slcNum");class D{static{o(this,"Signature")}constructor(M,_,w){this.r=M,this.s=_,this.recovery=w,this.assertValidity()}static fromCompact(M){let _=t.nByteLength;return M=Sr("compactSignature",M,_*2),new D(N(M,0,_),N(M,_,2*_))}static fromDER(M){let{r:_,s:w}=Ho.toSig(Sr("DER",M));return new D(_,w)}assertValidity(){if(!I(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!I(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(M){return new D(this.r,this.s,M)}recoverPublicKey(M){let{r:_,s:w,recovery:u}=this,x=ee(Sr("msgHash",M));if(u==null||![0,1,2,3].includes(u))throw new Error("recovery id invalid");let F=u===2||u===3?_+t.n:_;if(F>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let z=u&1?"03":"02",q=v.fromHex(z+P(F)),Q=p(F),ce=f(-x*Q),de=f(w*Q),ft=v.BASE.multiplyAndAddUnsafe(q,ce,de);if(!ft)throw new Error("point at infinify");return ft.assertValidity(),ft}hasHighS(){return B(this.s)}normalizeS(){return this.hasHighS()?new D(this.r,f(-this.s),this.recovery):this}toDERRawBytes(){return qo(this.toDERHex())}toDERHex(){return Ho.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return qo(this.toCompactHex())}toCompactHex(){return P(this.r)+P(this.s)}}let Z={isValidPrivateKey(b){try{return A(b),!0}catch{return!1}},normPrivateKeyToScalar:A,randomPrivateKey:o(()=>{let b=n0(t.n);return Il(t.randomBytes(b),t.n)},"randomPrivateKey"),precompute(b=8,M=v.BASE){return M._setWindowSize(b),M.multiply(BigInt(3)),M}};function L(b,M=!0){return v.fromPrivateKey(b).toRawBytes(M)}o(L,"getPublicKey");function ne(b){let M=gn(b),_=typeof b=="string",w=(M||_)&&b.length;return M?w===i||w===s:_?w===2*i||w===2*s:b instanceof v}o(ne,"isProbPub");function ie(b,M,_=!0){if(ne(b))throw new Error("first arg must be private key");if(!ne(M))throw new Error("second arg must be public key");return v.fromHex(M).multiply(A(b)).toRawBytes(_)}o(ie,"getSharedSecret");let re=t.bits2int||function(b){let M=ki(b),_=b.length*8-t.nBitLength;return _>0?M>>BigInt(_):M},ee=t.bits2int_modN||function(b){return f(re(b))},J=rc(t.nBitLength);function fe(b){if(typeof b!="bigint")throw new Error("bigint expected");if(!(Pi<=b&&b<J))throw new Error(`bigint expected < 2^${t.nBitLength}`);return ro(b,t.nByteLength)}o(fe,"int2octets");function S(b,M,_=a){if(["recovered","canonical"].some(R=>R in _))throw new Error("sign() legacy options not supported");let{hash:w,randomBytes:u}=t,{lowS:x,prehash:F,extraEntropy:z}=_;x==null&&(x=!0),b=Sr("msgHash",b),F&&(b=Sr("prehashed msgHash",w(b)));let q=ee(b),Q=A(M),ce=[fe(Q),fe(q)];if(z!=null){let R=z===!0?u(r.BYTES):z;ce.push(Sr("extraEntropy",R))}let de=Fs(...ce),ft=q;function pe(R){let V=re(R);if(!I(V))return;let U=p(V),G=v.BASE.multiply(V).toAffine(),se=f(G.x);if(se===Pi)return;let j=f(U*f(ft+se*Q));if(j===Pi)return;let Y=(G.x===se?0:2)|Number(G.y&Lr),tt=j;return x&&B(j)&&(tt=K(j),Y^=1),new D(se,tt,Y)}return o(pe,"k2sig"),{seed:de,k2sig:pe}}o(S,"prepSig");let a={lowS:t.lowS,prehash:!1},l={lowS:t.lowS,prehash:!1};function g(b,M,_=a){let{seed:w,k2sig:u}=S(b,M,_),x=t;return Qp(x.hash.outputLen,x.nByteLength,x.hmac)(w,u)}o(g,"sign"),v.BASE._setWindowSize(8);function y(b,M,_,w=l){let u=b;if(M=Sr("msgHash",M),_=Sr("publicKey",_),"strict"in w)throw new Error("options.strict was renamed to lowS");let{lowS:x,prehash:F}=w,z,q;try{if(typeof u=="string"||gn(u))try{z=D.fromDER(u)}catch(G){if(!(G instanceof Ho.Err))throw G;z=D.fromCompact(u)}else if(typeof u=="object"&&typeof u.r=="bigint"&&typeof u.s=="bigint"){let{r:G,s:se}=u;z=new D(G,se)}else throw new Error("PARSE");q=v.fromHex(_)}catch(G){if(G.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(x&&z.hasHighS())return!1;F&&(M=t.hash(M));let{r:Q,s:ce}=z,de=ee(M),ft=p(ce),pe=f(de*ft),R=f(Q*ft),V=v.BASE.multiplyAndAddUnsafe(q,pe,R)?.toAffine();return V?f(V.x)===Q:!1}return o(y,"verify"),{CURVE:t,getPublicKey:L,getSharedSecret:ie,sign:g,verify:y,ProjectivePoint:v,Signature:D,utils:Z}}o(Pw,"weierstrass");function ok(e){return{hash:e,hmac:o((t,...r)=>o0(e,t,Ew(...r)),"hmac"),randomBytes:Iw}}o(ok,"getHash");function Ol(e,t){let r=o(n=>Pw({...e,...ok(n)}),"create");return Object.freeze({...r(t),create:r})}o(Ol,"createCurve");d();h();d();h();function sk(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),s=BigInt(4294967295),c=Number(r>>i&s),f=Number(r&s),p=n?4:0,v=n?0:4;e.setUint32(t+p,c,n),e.setUint32(t+v,f,n)}o(sk,"setBigUint64");var Cl=class extends js{static{o(this,"SHA2")}constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=kl(this.buffer)}update(t){zs(this);let{view:r,buffer:n,blockLen:i}=this;t=nc(t);let s=t.length;for(let c=0;c<s;){let f=Math.min(i-this.pos,s-c);if(f===i){let p=kl(t);for(;i<=s-c;c+=i)this.process(p,c);continue}n.set(t.subarray(c,c+f),this.pos),this.pos+=f,c+=f,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){zs(this),Aw(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:s}=this,{pos:c}=this;r[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>i-c&&(this.process(n,0),c=0);for(let T=c;T<i;T++)r[T]=0;sk(n,i-8,BigInt(this.length*8),s),this.process(n,0);let f=kl(t),p=this.outputLen;if(p%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let v=p/4,A=this.get();if(v>A.length)throw new Error("_sha2: outputLen bigger than state");for(let T=0;T<v;T++)f.setUint32(4*T,A[T],s)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:s,destroyed:c,pos:f}=this;return t.length=i,t.pos=f,t.finished=s,t.destroyed=c,i%r&&t.buffer.set(n),t}};var ak=o((e,t,r)=>e&t^~e&r,"Chi"),ck=o((e,t,r)=>e&t^e&r^t&r,"Maj"),uk=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),io=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),oo=new Uint32Array(64),c0=class extends Cl{static{o(this,"SHA256")}constructor(){super(64,32,8,!1),this.A=io[0]|0,this.B=io[1]|0,this.C=io[2]|0,this.D=io[3]|0,this.E=io[4]|0,this.F=io[5]|0,this.G=io[6]|0,this.H=io[7]|0}get(){let{A:t,B:r,C:n,D:i,E:s,F:c,G:f,H:p}=this;return[t,r,n,i,s,c,f,p]}set(t,r,n,i,s,c,f,p){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=c|0,this.G=f|0,this.H=p|0}process(t,r){for(let T=0;T<16;T++,r+=4)oo[T]=t.getUint32(r,!1);for(let T=16;T<64;T++){let I=oo[T-15],P=oo[T-2],B=yn(I,7)^yn(I,18)^I>>>3,K=yn(P,17)^yn(P,19)^P>>>10;oo[T]=K+oo[T-7]+B+oo[T-16]|0}let{A:n,B:i,C:s,D:c,E:f,F:p,G:v,H:A}=this;for(let T=0;T<64;T++){let I=yn(f,6)^yn(f,11)^yn(f,25),P=A+I+ak(f,p,v)+uk[T]+oo[T]|0,K=(yn(n,2)^yn(n,13)^yn(n,22))+ck(n,i,s)|0;A=v,v=p,p=f,f=c+P|0,c=s,s=i,i=n,n=P+K|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,c=c+this.D|0,f=f+this.E|0,p=p+this.F|0,v=v+this.G|0,A=A+this.H|0,this.set(n,i,s,c,f,p,v,A)}roundClean(){oo.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Bl=Tw(()=>new c0);var Ow=Tl(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),lk=Ow.create(BigInt("-3")),fk=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),$o=Ol({a:lk,b:fk,Fp:Ow,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Bl);d();h();d();h();d();h();async function Cw(e){let t=new Uint8Array(Array.from("mnemonic"+(e.passphrase??"")).map(r=>r.charCodeAt(0)));return e.pbkdf2(e.mnemonic,t,2048,64,"sha512")}o(Cw,"mnemonicToSeed");d();h();var Bw=te(ln());var dk=te(qi());d();h();var u0=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"],SJ=new Set(u0);var hk=o((e,t,r,n,i)=>{let s;switch(i){case"rmd160":case"md5":case"sha":throw new Error(`${i} is unsupported by noble`);case"ripemd160":case"sha1":case"sha224":case"sha384":throw new Error(`${i} is supported by noble, but we don't need it for bip39`);case"sha256":s=pn;break;case"sha512":s=by;break}return bs(s,e,t,{c:r,dkLen:n})},"pbkdf2Noble"),pk=o((e,t,r)=>{for(;e.length<r;)e=t+e;return e},"lpad"),Kw=o(e=>e.map(t=>pk(t.toString(2),"0",8)).join(""),"bytesToBinary"),mk=o(e=>parseInt(e,2),"binaryToByte"),gk=o(e=>{let r=e.length*8/32,n=pn(e);return Kw(Array.from(n)).slice(0,r)},"deriveChecksumBits"),Oi;(function(e){e.InvalidChecksum="InvalidChecksum",e.InvalidChecksumBits="InvalidChecksumBits",e.InvalidEntropy="InvalidEntropy",e.InvalidEntropyBits="InvalidEntropyBits",e.LessThanTwelve="LessThanTwelve",e.ExactlyTwelveOrTwentyFour="ExactlyTwelveOrTwentyFour",e.MoreThanTwentyFour="MoreThanTwentyFour",e.WrongWord="WrongWord"})(Oi||(Oi={}));var ic=o(async e=>{let t=u0;if(e.length<16)throw new Error(Oi.LessThanTwelve);if(e.length>32)throw new Error(Oi.MoreThanTwentyFour);if(e.length%4!==0)throw new Error(Oi.WrongWord);let r,n;try{r=Kw(Array.from(e))}catch{throw new Error(Oi.InvalidEntropyBits)}try{n=gk(e)}catch{throw new Error(Oi.InvalidChecksumBits)}let s=(r+n).match(/(.{1,11})/g);if(!s)throw new Error(Oi.InvalidChecksum);let c=s.map(v=>{let A=mk(v);return t[A]}),f=Bw.Buffer.from(c.join(" "));return{seed:await Cw({mnemonic:f,pbkdf2:hk}),mnemonic:f}},"entropyToSeedAndMnemonic");d();h();d();h();d();h();var oc=te(MM());function yk(e){return e=(0,oc.default)(e),e.accounts.forEach(t=>{switch(t.type){case O.PrivateKey:{switch(t.chainType){case k.EVM:case k.Solana:break;case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:case k.Sui:{Go(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}default:xe(t)}break}case O.ReadOnly:break;case O.Ledger:case O.Seedless:case O.Seed:case O.KMSVault:for(let r of Object.keys(t.chains)){let n=t.chains[r];if(n)switch(n.chainType){case k.EVM:case k.Solana:break;case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:case k.Sui:{Go(n.publicKey)&&(n.publicKey=new Uint8Array(Buffer.from(n.publicKey)));break}default:xe(n)}}break;case O.SeedVault:break;default:xe(t)}}),e}o(yk,"deserializeVaultAccount");function vk(e){return e=(0,oc.default)(e),e.accounts.forEach(t=>{switch(t.type){case O.PrivateKey:{switch(t.chainType){case k.EVM:case k.Solana:break;case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:case k.Sui:{t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}default:xe(t)}break}case O.ReadOnly:break;case O.Ledger:case O.Seedless:case O.Seed:case O.KMSVault:for(let r of Object.keys(t.chains)){let n=t.chains[r];if(n)switch(n.chainType){case k.EVM:case k.Solana:break;case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:case k.Sui:{n.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(n.publicKey).toJSON());break}default:xe(n)}}break;case O.SeedVault:break;default:xe(t)}}),e}o(vk,"serializeVaultAccount");function Rw(e){return e=(0,oc.default)(e),e.accounts.forEach(t=>{switch(t.type){case O.PrivateKey:{t.version===1&&Go(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}case O.ReadOnly:break;case O.KMSVault:case O.Ledger:case O.Seed:case O.Seedless:for(let r of Object.keys(t.chains))if(t.version===1&&Go(t.chains[r]?.publicKey)){let n=t.chains[r];n&&(n.publicKey=new Uint8Array(Buffer.from(n.publicKey)))}break;case O.SeedVault:break;default:xe(t)}}),e}o(Rw,"deserializeVaultStorageAccount");function Nw(e){return e=(0,oc.default)(e),e.accounts.forEach(t=>{switch(t.type){case O.PrivateKey:{t.version===1&&t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}case O.ReadOnly:break;case O.KMSVault:case O.Ledger:case O.Seed:case O.Seedless:for(let r of Object.keys(t.chains))t.version===1&&t.chains[r]?.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(t.chains[r]?.publicKey).toJSON());break;case O.SeedVault:break;default:xe(t)}}),e}o(Nw,"serializeVaultStorageAccount");function Go(e){return!!e&&typeof e=="object"&&ih("type",e)&&typeof e.type=="string"&&ih("data",e)&&Array.isArray(e.data)&&e.data.every(t=>!Number.isNaN(parseInt(t)))}o(Go,"isSerializedBuffer");d();h();var fr=".phantom-labs.vault";var qs=`${fr}.accounts`,Ci=`${fr}.secrets`,Rl=o(e=>`${fr}.privateKey.${e}`,"privateKeyStorageKey"),Nl=o(e=>`${fr}.seed.${e}`,"seedStorageKey"),Dl=o(e=>`${fr}.seedless.${e}`,"seedlessStorageKey"),Kl=`${fr}.integrityCheck`,vn=`${fr}.kmsAuthenticatorMapping`,lt=et(function*(){return(yield Ww())?.accounts??[]}),Ul=et(function*(){let e=yield bn(),t=new Set(e.seedIdentifiers),r=yield lt();for(let i of r)i.type===O.Seed&&t.add(i.seedIdentifier);let n=[];for(let i of t)n.push({identifier:i});return n}),Ll=et(function*(){let e=yield bn(),t=new Set(e.seedlessIdentifiers),r=yield lt();for(let i of r)i.type===O.Seedless&&t.add(i.seedIdentifier);let n=[];for(let i of t)n.push({identifier:i});return n}),bn=et(function*(){let e=Un(Ci);return{privateKeyIdentifiers:e?.privateKeyIdentifiers??[],seedIdentifiers:e?.seedIdentifiers??[],seedlessIdentifiers:e?.seedlessIdentifiers??[]}});async function Lw(e,t){let r=Nl(t),n=await e.secretsStorage.getSecureValue(r);if(n===null){let i=Dl(t);n=await e.secretsStorage.getSecureValue(i)}if(n==null)throw new bi;return Go(n.entropy)?n.entropy=new Uint8Array(Buffer.from(n.entropy)):n.entropy=new Uint8Array(Object.values(n.entropy)),n}o(Lw,"fetchEntropy");async function so(e,t){let r=Rl(t),n=await e.secretsStorage.getSecureValue(r);if(n==null)throw new Co;return Go(n.privateKey)?n.privateKey=new Uint8Array(Buffer.from(n.privateKey)):n.privateKey=new Uint8Array(Object.values(n.privateKey)),n}o(so,"fetchPrivateKey");async function Dt(e,t,r=!0){let n=await Ww();if(!n)n={version:1,accounts:[t]};else{let i=n.accounts,s=wk(i,t);if(s.length>0){if(!r)throw new On(s[0].type,t.type);let c=Uw(t.type);for(let p of s)if(Uw(p.type)>=c)throw new On(p.type,t.type);let f=s.map(p=>p.identifier);return i=i.filter(p=>!f.includes(p.identifier)),i.push(t),await Dn(i),await l0(e)}else i.push(t);n.accounts=i}return Dn(n.accounts)}o(Dt,"storeAccount");async function Dn(e){let t={version:1,accounts:e};return Bi(qs)(Nw(t))}o(Dn,"storeAccounts");async function Vw(e,t){let r=Rl(t.identifier);await e.secretsStorage.setSecureValue(r,t),await Ak(t.identifier)}o(Vw,"storePrivateKey");async function Fw(e,t){let r=Nl(t.identifier);await e.secretsStorage.setSecureValue(r,t),await xk(t.identifier)}o(Fw,"storeSeed");async function zw(e,t){let r=Dl(t.identifier);await e.secretsStorage.setSecureValue(r,t),await Sk(t.identifier)}o(zw,"storeSeedlessSeed");async function l0(e){let t=await lt(),r=new Set,n=new Set;for(let p of t)switch(p.type){case O.Seed:case O.Seedless:r.add(p.seedIdentifier);break;case O.PrivateKey:n.add(p.privateKeyIdentifier);break;case O.Ledger:case O.ReadOnly:case O.SeedVault:case O.KMSVault:break;default:xe(p)}let i=await bn(),s={seedIdentifiers:i.seedIdentifiers.filter(p=>r.has(p)),seedlessIdentifiers:i.seedlessIdentifiers.filter(p=>r.has(p)),privateKeyIdentifiers:i.privateKeyIdentifiers.filter(p=>n.has(p))},c={seedIdentifiers:i.seedIdentifiers.filter(p=>!r.has(p)),seedlessIdentifiers:i.seedlessIdentifiers.filter(p=>!r.has(p)),privateKeyIdentifiers:i.privateKeyIdentifiers.filter(p=>!n.has(p))};await e.generalStorage.set(Ci,{version:1,...s}),Bi(Ci)({version:1,...s}),await e.secretsStorage.removeSecureValue([...c.seedIdentifiers.map(p=>Nl(p)),...c.seedlessIdentifiers.map(p=>Dl(p)),...c.privateKeyIdentifiers.map(p=>Rl(p))])}o(l0,"removeDanglingSecrets");async function f0(e,t){t?await e.secretsStorage.setSecureValue(Kl,t):await e.secretsStorage.removeSecureValue(Kl)}o(f0,"storeIntegrityCheck");async function jw(e){return e.secretsStorage.getSecureValue(Kl)}o(jw,"fetchIntegrityCheck");async function qw(e){await e.secureCache.clear(),await e.generalStorage.remove(qs),await e.generalStorage.remove(vn);let t=await bn(),r=t.privateKeyIdentifiers.map(f=>Rl(f)),n=t.seedIdentifiers.map(f=>Nl(f)),i=t.seedlessIdentifiers.map(f=>Dl(f));await e.secretsStorage.removeSecureValue([...r,...i,...n]),await e.generalStorage.remove(Ci),await e.secretsStorage.removeSecureValue(Kl);let s=Bi(qs),c=Bi(Ci);s(null),c(null)}o(qw,"clearVault");var Ww=et(function*(){let e=Un(qs);return e?(e=Rw(e),e=yield bk(e),e):null});async function bk(e){let t=!1;return e.accounts.forEach(r=>{switch(r.type){case O.PrivateKey:{t=Dw(r)||t;break}case O.ReadOnly:break;case O.Ledger:case O.Seed:case O.Seedless:Object.values(r.chains).forEach(n=>{t=Dw(n)||t});break;case O.SeedVault:case O.KMSVault:break;default:xe(r)}}),e}o(bk,"computeBitcoinAddressesIfNeeded");function Dw(e){let t=!1;switch(e.chainType){case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{Object.values(Ct).forEach(r=>{if(e.addresses&&e.addresses[r])return;let n=Kt({publicKey:e.publicKey,addressType:e.chainType,networkID:r});e.addresses={...e.addresses,[r]:n},t=!0});break}default:}return t}o(Dw,"computeBitcoinAddressesForChain");function wk(e,t){let r=Vh(t),n=[];for(let i of e){let s=Vh(i),c=Array.from(r.addresses).some(p=>s.addresses.has(p)),f=Array.from(r.publicKeys).some(p=>s.publicKeys.has(p));(c||f)&&n.push(i)}return n}o(wk,"existingAccountsMatchingAccount");async function xk(e){let t=await bn();return t.seedIdentifiers=[...new Set([...t.seedIdentifiers,e])],Bi(Ci)({version:1,...t})}o(xk,"storeSecretIdentifierForSeed");async function Sk(e){let t=await bn();return t.seedlessIdentifiers=[...new Set([...t.seedlessIdentifiers,e])],Bi(Ci)({version:1,...t})}o(Sk,"storeSecretIdentifierForSeedless");async function Ak(e){let t=await bn();return t.privateKeyIdentifiers=[...new Set([...t.privateKeyIdentifiers,e])],Bi(Ci)({version:1,...t})}o(Ak,"storeSecretIdentifierForPrivateKey");function Uw(e){switch(e){case O.ReadOnly:return 1;case O.PrivateKey:return 2;case O.Seedless:case O.Seed:return 3;case O.Ledger:return 4;case O.SeedVault:return 5;case O.KMSVault:return 6;default:return 0}}o(Uw,"accountTypeOverridePriority");var Mk=m.object({version:m.literal(1),accounts:m.array(m.any())}),Ek=m.object({version:m.literal(1),seedIdentifiers:m.array(m.string()),seedlessIdentifiers:m.array(m.string()),privateKeyIdentifiers:m.array(m.string())}),Tk=m.object({version:m.literal(1),mapping:m.record(m.string(),m.string())}),[Un,Bi,mY]=ru("vault",[{key:qs,type:"object",validator:Mk,nullable:!0},{key:Ci,type:"object",validator:Ek,nullable:!0},{key:vn,type:"object",validator:Tk,nullable:!0}]);async function Ln(e,t){let r=await Lw(e,t);if(!r)throw new bi;let n=Br.from(r.entropy);return r.entropy.fill(0),n}o(Ln,"exportEntropy");async function Ut(e,t){let r,n=await e.secureCache.getSeed(t);if(n)r=n;else{let s=await Ln(e,t),{seed:c}=await s.foldAsync(ic);r=c,await e.secureCache.setSeed(t,r)}let i=Br.from(r);return r.fill(0),i}o(Ut,"exportSeed");var d0="m/23001'/0'";async function ao(e,t){let r;switch(t.type){case O.Seedless:case O.Seed:r=t.seedIdentifier;break;case O.PrivateKey:r=t.privateKeyIdentifier;break}let n=await e.secureCache.getClientJWTSigner(r,d0);if(n)return{publicKey:n.p256pubkey,privateKey:n.p256privkey};let i;switch(t.type){case O.Seedless:case O.Seed:{i=(await Ut(e,t.seedIdentifier)).fold(c=>new ys(c));break}case O.PrivateKey:{let s=await so(e,t.privateKeyIdentifier);i=new ys(s.privateKey);break}}try{let s=i.derivePath({ellipticCurve:"ed25519",derivationPath:d0,bytesInPrivateKey:64}),c=Il(s.secretKey,$o.CURVE.n),f=$o.getPublicKey(c);return await e.secureCache.setClientJWTSigner(r,d0,{p256pubkey:f,p256privkey:c}),{publicKey:f,privateKey:c}}finally{i.cleanup()}}o(ao,"deriveClientJWTKeypair");d();h();function Ik(e){return e.type===O.Seed||e.type===O.Seedless||e.type===O.PrivateKey}o(Ik,"isKMSAuthenticatorSourceAccount");async function Vl(){let e=await lt(),t=[];for(let r of e)Ik(r)&&t.push(r);return t.sort((r,n)=>{let i=o(s=>s==="seedless"?0:s==="seed"?1:s==="privateKey"?2:3,"priority");return i(r.type)-i(n.type)}),t}o(Vl,"getAllSignerAccounts");function Hw(e,t){let r;async function n(){if(r)return r;let s=await Vl();if(s.length===0)throw new Error("Vault requires a seed, seedless, or private key account to derive the KMS authenticator. Add a local secret before calling getKMSInstance().");if(!iu("enable-kms-authenticator-mapping")||!t)return r=s[0],r;let p=Un(vn)?.mapping;if(!p)throw new Error("KMS authenticator mapping not found. Mapping must be built before creating KMS instances. Rebuild mapping required.");let v=p[t];if(!v)throw new Error(`KMS authenticator mapping missing for ${t}.`);let A=s.find(T=>(T.type===O.PrivateKey?T.privateKeyIdentifier:T.seedIdentifier)===v);if(!A)throw H.addBreadcrumb(W.Account,`KMS authenticator mapping references missing signer account ${v}.`,X.Error),new Error(`KMS authenticator mapping references missing signer account ${v}.`);return r=A,H.addBreadcrumb(W.Account,`Using cached KMS authenticator account ${A.identifier} for ${t}`,X.Debug),r}o(n,"getSigningAccount");async function i(){let s=await n();return ao(e,s)}return o(i,"getKeyPair"),{getPublicKey:o(async()=>st((await i()).publicKey),"getPublicKey"),signRpcPayload:o(async s=>{let c=await i(),f=await e.vaultSigner.signWithKeypair(c,{isKMSPKIAuthenticator:!0,payload:s});if("status"in f&&f.status==="error")throw new Error(f.message);return f.signature},"signRpcPayload")}}o(Hw,"createVaultKMSPKIAuthenticator");function $w(e){return Vs({authenticator:Hw(e)})}o($w,"createVaultKMS");function sc(e,t){let r=Hw(e,t);return Vs({authenticator:r})}o(sc,"createVaultKMSForAccount");function _k(e,t){async function r(){return ao(e,t)}return o(r,"getKeyPair"),{getPublicKey:o(async()=>st((await r()).publicKey),"getPublicKey"),signRpcPayload:o(async n=>{let i=await r(),s=await e.vaultSigner.signWithKeypair(i,{isKMSPKIAuthenticator:!0,payload:n});if("status"in s&&s.status==="error")throw new Error(s.message);return s.signature},"signRpcPayload")}}o(_k,"createAuthenticatorForAccount");async function Gw(e,t,r){try{let n=_k(e,t),i=Vs({authenticator:n}),{result:s}=await i.getPhantomOrganization({})??{result:null};if(!s)return null;if(r===void 0)return s;let c=await i.getWalletWithTag({organizationId:s.organizationId,tag:r.tag,accounts:r.accounts});return c?.result&&r.accountSelector(c.result)?s:null}catch{return null}}o(Gw,"tryGetPhantomOrgForAccount");async function h0(e,t){let r=Bi(vn),n=Un(vn)?.mapping||{},i=t(n);r({version:1,mapping:i})}o(h0,"updateKMSMappingAtomically");async function Zw(e){H.addBreadcrumb(W.Account,"Rebuilding KMS authenticator mapping",X.Info);let r=(await lt()).filter(n=>n.type===O.KMSVault);for(let n of r)await ac(e,n.kms.walletId,n.kms.tag,!1)}o(Zw,"rebuildKMSAuthenticatorMappingInternal");async function ac(e,t,r,n=!0){let i=Ur(t,r);if((Un(vn)?.mapping||{})[i]&&n)return;let c=await Vl();for(let f of c){let p=f.type===O.PrivateKey?f.privateKeyIdentifier:f.seedIdentifier;if(await Gw(e,f,{tag:r,accountSelector:o(A=>A?.walletId===t,"accountSelector")})){await h0(e,A=>({...A,[i]:p})),H.addBreadcrumb(W.Account,`Updated KMS account mapping ${i} to signer ${p}`,X.Debug);return}}H.addBreadcrumb(W.Account,`No signer account found for KMS account ${i}`,X.Error)}o(ac,"updateKMSVaultAccountMapping");async function Jw(e,t){if(!t){H.addBreadcrumb(W.Account,"updateCashAccountMapping called without cashAddress, skipping",X.Debug);return}let r=`cash:${t}`;if((Un(vn)?.mapping||{})[r])return;let i=await Vl(),s=await Zp(0);for(let c of i){let f=c.type===O.PrivateKey?c.privateKeyIdentifier:c.seedIdentifier;try{if(await Gw(e,c,{tag:"cash",accounts:s,accountSelector:o(v=>v?v.accounts.some(A=>A.address.toLowerCase()===t.toLowerCase()):!1,"accountSelector")})){await h0(e,v=>({...v,[r]:f})),H.addBreadcrumb(W.Account,`Updated cash account mapping ${r} to signer ${f}`,X.Debug);return}}catch(p){H.addBreadcrumb(W.Account,`Failed to check cash account for signer ${f}: ${p}`,X.Debug)}}H.addBreadcrumb(W.Account,`No signer account found for cash account ${t}`,X.Error)}o(Jw,"updateCashAccountMapping");async function Yw(e,t,r){let n=Ur(t,r);await h0(e,i=>{if(!i[n])return H.addBreadcrumb(W.Account,`KMS account mapping ${n} not found, nothing to remove`,X.Debug),i;let s={...i};return delete s[n],H.addBreadcrumb(W.Account,`Removed KMS account mapping ${n}`,X.Debug),s})}o(Yw,"removeKMSVaultAccountMapping");d();h();function kk(e){switch(e.chainType){case k.Solana:case k.EVM:case k.Sui:case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:return;default:xe(e)}}o(kk,"assertSupportedKMSChain");function p0(e){switch(kk(e),e.chainType){case k.Solana:case k.EVM:return{chainType:e.chainType,publicKey:e.address,pathType:e.pathType};case k.Sui:return{chainType:e.chainType,publicKey:e.publicKey,address:e.address,pathType:e.pathType};case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{let{addresses:t,...r}=e;return{...r,addresses:{...t}}}default:return xe(e)}}o(p0,"buildVaultStorageKMSChainAddress");function Qw(e){let t={};for(let[,r]of Object.entries(e)){let n=p0(r);t[r.chainType]=n}return t}o(Qw,"buildVaultStorageKMSChainAddresses");async function Xw(e,{organizationId:t,walletId:r,tag:n,derivationIndex:i,chains:s,apiEnvironment:c}){if(H.addBreadcrumb(W.Account,`[addKMSVaultAccount] ENTRY: walletId=${r}`,X.Info),n!==Nt)throw new Error(`KMS vault accounts must use tag "${Nt}", received "${n}".`);let f=Qw(s),p=Ur(r,n),v={version:1,type:O.KMSVault,identifier:p,derivationIndex:i,kms:{organizationId:t,walletId:r,tag:n},chains:f,...c&&{apiEnvironment:c}};return await Dt(e,v),ac(e,r,n).catch(A=>{H.captureError(A,W.Account)}),v}o(Xw,"addKMSVaultAccount");d();h();d();h();var Fl=Object.values(Ct);function ex(e){switch(e.chainType){case k.Solana:case k.EVM:{let t=Pk(e.chainType,e.address,e.publicKey);return{chainType:e.chainType,pathType:e.pathType,address:t}}case k.Sui:{let t=e.address??Kt({publicKey:e.publicKey,addressType:e.chainType});return{chainType:e.chainType,pathType:e.pathType,publicKey:e.publicKey,address:t}}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:return{chainType:e.chainType,pathType:e.pathType,publicKey:e.publicKey,addresses:Ok(e.chainType,e.publicKey,e.addresses)};default:return xe(e)}}o(ex,"normalizeChainAddress");function Pk(e,t,r){if(t)return t;if(r)return Kt({publicKey:r,addressType:e});throw new Error(`Expected address or publicKey for chain type ${e}`)}o(Pk,"getAddressForEvmOrSolana");function Ok(e,t,r){return r?Ck(e,t,r):Bk(e,t)}o(Ok,"getBitcoinAddresses");function Ck(e,t,r){let n={...r};for(let i of Fl)n[i]||(n[i]=Kt({publicKey:t,addressType:e,networkID:i}));return n}o(Ck,"fillMissingBitcoinAddresses");function Bk(e,t){return Fl.reduce((r,n)=>(r[n]=Kt({publicKey:t,addressType:e,networkID:n}),r),{})}o(Bk,"deriveAllBitcoinAddresses");function tx(e){let t=ex(e);switch(t.chainType){case k.Solana:case k.EVM:return t;case k.Sui:return t;case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:return t;default:return xe(t)}}o(tx,"buildVaultChainAddress");function rx(e){let t=ex(e);switch(t.chainType){case k.Solana:case k.EVM:return{chainType:t.chainType,publicKey:t.address,pathType:t.pathType};case k.Sui:return{chainType:t.chainType,publicKey:t.publicKey,address:t.address,pathType:t.pathType};case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:return{chainType:t.chainType,publicKey:t.publicKey,addresses:t.addresses,pathType:t.pathType};default:return xe(t)}}o(rx,"buildVaultStorageChainAddress");function Kk(e,t){let r=!1,n={...e};for(let[i,s]of Object.entries(t)){let c=i,f=p0(s),p=e[c];if(!p){n[c]=f,r=!0;continue}switch(f.chainType){case k.Solana:case k.EVM:case k.Sui:continue;case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{let v=p,A=f,T=v.addresses?{...v.addresses}:{};for(let I of Fl){let P=A.addresses?.[I];P&&T[I]!==P&&(T[I]=P,r=!0)}n[c]={...v,addresses:T};break}default:xe(f)}}return{merged:n,changed:r}}o(Kk,"deepMergeChains");async function nx(e,{organizationId:t,walletId:r,tag:n,derivationIndex:i,chains:s}){if(n!==Nt)throw new Error(`KMS vault accounts must use tag "${Nt}", received "${n}".`);let c=Ur(r,n),f=await lt(),p=f.findIndex(B=>B.type===O.KMSVault&&B.identifier===c);if(p===-1)throw new Error(`KMSVault account not found for identifier ${c}`);let v=f[p];if(v.kms.organizationId!==t||v.kms.walletId!==r||v.kms.tag!==n||v.derivationIndex!==i)throw new Error(`KMS vault metadata mismatch for identifier ${c} (existing data retained, incoming rejected).`);let{merged:A,changed:T}=Kk(v.chains,s);if(!T)return v;let I={...v,chains:A},P=[...f];return P[p]=I,await Dn(P),I}o(nx,"upsertKMSVaultChains");d();h();d();h();var m0=te(ps());function Ws(e){return e.fold(m0.keccak256)}o(Ws,"identifierForSeed");function co(e,t,r){let n=vi[r];return m0.keccak256(`${e}:${t}:${n}`)}o(co,"identifierForSeedAccount");function Vn(e,t,r,n){let i={};for(let s of n){let{publicKey:c}=e.keypairGenerator.generateKeypairFromSeed(t,r,s),f=dn.getAddressType(s),p=Rk({addressType:f,derivationPathType:s,publicKey:c});i[f]=rx(p)}return i}o(Vn,"storageChainAddresses");function Rk({addressType:e,derivationPathType:t,publicKey:r}){switch(e){case k.Solana:case k.EVM:case k.Sui:case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:return{chainType:e,pathType:t,publicKey:r};default:return xe(e)}}o(Rk,"toChainAddressInput");async function ix(e,t){let r=new Set,n=await lt();for(let s of n)s.type===O.Seed&&s.seedIdentifier===t&&vi[Object.values(s.chains)[0].pathType]===0&&r.add(s.derivationIndex);let i=0;for(let s=0;s<=r.size;s++)if(!r.has(s)){i=s;break}return ox(e,t,i)}o(ix,"addAccountForExistingSeed");async function ox(e,t,r){try{return await Nk(e,t,r)}catch(n){if(n instanceof On)return await ox(e,t,r+1);throw n}}o(ox,"addAccountForSeedWithDerivationIndex");async function Nk(e,t,r){let n=await Ut(e,t),i=(await e.fetchChainAvailability()).enabledAddressTypes,s=tr(i),c=await co(t,r,s[0]),f={version:1,type:O.Seed,identifier:c,seedIdentifier:t,derivationIndex:r,chains:Vn(e,n,r,s)};return await Dt(e,f,!1),f}o(Nk,"_addAccountForExistingSeed");d();h();var dx=te(gM());var hx=te(Dy()),px=te(fx()),mx=te(ps());function zk(e,t,r){let n=vi[r];return mx.keccak256(`${e}:${t}:${n}`)}o(zk,"_identifierForLedgerAccount");async function gx(e,t,r){let n=[];for(let i of r){if(i.addresses.length===0&&i.publicKeys.length===0)throw new Error("Must have at least 1 address or public key in account to add Ledger account.");let s=i.addresses[0]?.pathType||i.publicKeys[0]?.pathType,c=zk(t,i.derivationIndex,s);hx.initEccLib(dx);let f=(0,px.ECPairFactory)(dx),p={...i.addresses.reduce((A,T)=>{let I=dn.getAddressType(T.pathType);switch(I){case k.EVM:case k.Solana:{A[I]={chainType:I,pathType:T.pathType,publicKey:T.value};break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:throw new Error("Bitcoin accounts should be using public key not computed addresses");case k.Sui:throw new wd("add ledger account");default:xe(I)}return A},{}),...i.publicKeys.reduce((A,T)=>{let I=dn.getAddressType(T.pathType);switch(I){case k.EVM:case k.Solana:throw new Error("EVM or Solana accounts should be using addreses directly, not public keys");case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{let P=f.fromPublicKey(Buffer.from(T.value,"hex")),B=new Uint8Array(P.publicKey);A[I]={chainType:I,pathType:T.pathType,publicKey:B,addresses:Object.values(Ct).reduce((K,N)=>({...K,[N]:Kt({publicKey:B,addressType:I,networkID:N})}),{})};break}case k.Sui:throw new wd("add ledger account");default:xe(I)}return A},{})},v={version:1,type:O.Ledger,identifier:c,ledgerGroupIdentifier:t,derivationIndex:i.derivationIndex,chains:p};n.push(v),await Dt(e,v)}return n}o(gx,"addLedgerAccounts");d();h();var yx=te(ps());function jk(e){return yx.keccak256(e)}o(jk,"_identifierForPrivateKey");async function vx(e,t,r,n){let i=await e.keypairGenerator.generateKeypairFromPrivateKey(r,t),s=await bn(),c=jk(i.publicKey);if((s?.privateKeyIdentifiers??[]).includes(c))throw new Na;let v={version:1,identifier:c,name:n,chainType:t,privateKey:Buffer.from(i.privateKey)},A=c,T;switch(t){case k.EVM:case k.Solana:{T={version:1,type:O.PrivateKey,identifier:A,privateKeyIdentifier:c,publicKey:Kt({publicKey:i.publicKey,addressType:t}),chainType:t};break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{T={version:1,type:O.PrivateKey,identifier:A,privateKeyIdentifier:c,publicKey:i.publicKey,addresses:Object.values(Ct).reduce((I,P)=>({...I,[P]:Kt({publicKey:i.publicKey,addressType:t,networkID:P})}),{}),chainType:t};break}case k.Sui:{T={version:1,type:O.PrivateKey,identifier:A,privateKeyIdentifier:c,publicKey:i.publicKey,address:Kt({publicKey:i.publicKey,addressType:t}),chainType:t};break}default:xe(t)}if(!T)throw new Error("unable to create a private key account based on the address type");return await Dt(e,T),await Vw(e,v),T}o(vx,"addPrivateKeyAccount");d();h();var bx=te(ps());function qk(e){return bx.keccak256(e)}o(qk,"_identifierForReadOnlyAccount");async function wx(e,t){let r=Object.values(t).find(Boolean);if(!r)throw new Ka;let n=qk(r),i={version:1,type:O.ReadOnly,identifier:n,addresses:t};return await Dt(e,i),i}o(wx,"addReadonlyAccount");d();h();async function xx(e,t){let r=new Set,n=await lt();for(let s of n)s.type===O.Seedless&&s.seedIdentifier===t&&vi[Object.values(s.chains)[0].pathType]===0&&r.add(s.derivationIndex);let i=0;for(let s=0;s<=r.size;s++)if(!r.has(s)){i=s;break}return Sx(e,t,i)}o(xx,"addAccountForExistingSeedless");async function Sx(e,t,r){try{return await Wk(e,t,r)}catch(n){if(n instanceof On)return await Sx(e,t,r+1);throw n}}o(Sx,"addAccountForSeedWithDerivationIndex");async function Wk(e,t,r){let n=await Ut(e,t),i=(await e.fetchChainAvailability()).enabledAddressTypes,s=tr(i),c=await co(t,r,s[0]),f={version:1,type:O.Seedless,identifier:c,seedIdentifier:t,derivationIndex:r,chains:Vn(e,n,r,s)};return await Dt(e,f,!1),f}o(Wk,"_addAccountForExistingSeed");d();h();d();h();d();h();async function Gs(e,t){let r=await bn(),n=Ws(t),i=r?.seedIdentifiers??[],s=r?.seedlessIdentifiers??[];return i.concat(s).includes(n)}o(Gs,"isExistingSeed");async function jl(e,t,r,n){if((await Ll()).length>0)throw new cu;if(n.length===0)throw new Ra;if(await Gs(e,t))throw new Oo;let c=Ws(t),f=t.fold(A=>({version:1,identifier:c,name:r,entropy:new Uint8Array(A)}));await zw(e,f);let p=[],v=await Ut(e,c);for(let A of n){let T=co(c,A.derivationIndex,A.derivationPathTypes[0]),I=Vn(e,v,A.derivationIndex,A.derivationPathTypes),P={version:1,type:O.Seedless,identifier:T,seedIdentifier:c,derivationIndex:A.derivationIndex,chains:I};await Dt(e,P),p.push(P)}return p}o(jl,"addSeedlessWithMultipleAccounts");async function Ax(e,t,r){let n=(await e.fetchChainAvailability()).enabledAddressTypes,i=0,s=tr(n);return(await jl(e,t,r,[{name:r,derivationIndex:i,derivationPathTypes:s}]))[0]}o(Ax,"addSeedlessWithDefaultAccount");d();h();d();h();async function ql(e,t,r,n,i=!1){let s=await Gs(e,t);if(!i&&s)throw new Oo;let c=Ws(t),f=t.fold(A=>({version:1,identifier:c,name:r,entropy:new Uint8Array(A)}));await Fw(e,f);let p=[],v=await Ut(e,c);for(let A of n){let T=await co(c,A.derivationIndex,A.derivationPathTypes[0]),I=Vn(e,v,A.derivationIndex,A.derivationPathTypes),P={version:1,type:O.Seed,identifier:T,seedIdentifier:c,derivationIndex:A.derivationIndex,chains:I};await Dt(e,P),p.push(P)}return p}o(ql,"addSeedWithMultipleAccounts");async function Mx(e,t,r){let n=(await e.fetchChainAvailability()).enabledAddressTypes,i=0,s=tr(n);return(await ql(e,t,r,[{name:r,derivationIndex:i,derivationPathTypes:s}]))[0]}o(Mx,"addSeedWithDefaultAccount");d();h();var Ex=te(ps());function Hk(e){return Ex.keccak256(e)}o(Hk,"_identifierForSolanaSeedVaultAccount");async function Tx(e,t){let r=[];for(let{publicKey:n,derivationPath:i,authToken:s}of t){let c=Hk(n),f={version:1,type:O.SeedVault,identifier:c,derivationPath:i,authToken:s,publicKey:n,chainType:k.Solana};r.push(f),await Dt(e,f)}return r}o(Tx,"addSolanaSeedVaultAccounts");d();h();d();h();async function Wl(e,t,r){let i=(await lt()).find(s=>s.identifier===t);if(!i)throw new Pn;switch(i.type){case O.Seed:case O.Seedless:{let s=i.chains[r]?.pathType;if(!s)throw new Zi;let c=await Ut(e,i.seedIdentifier),f=e.keypairGenerator.generateKeypairFromSeed(c,i.derivationIndex,s);return Br.from(f.privateKey)}case O.PrivateKey:{let s=await so(e,i.privateKeyIdentifier);if(s.chainType!==r)throw new Zi;let c=e.keypairGenerator.generateKeypairFromPrivateKey(Br.from(s.privateKey),r);return Br.from(c.privateKey)}case O.Ledger:case O.SeedVault:case O.KMSVault:throw new Ca;case O.ReadOnly:throw new Ba;default:(s=>{throw new Error("invalid account type")})(i)}}o(Wl,"exportPrivateKey");d();h();d();h();d();h();var uc=new Error("Unknown error"),Hl=new Error("Invalid entropy length"),cc=new Error("Invalid mn*monic sentence length"),x0=new Error("Invalid checksum"),Ix=new RangeError("Invalid mn*monic word"),w0=new RangeError("Invalid wordlist"),S0=new RangeError("Invalid wordlist index"),Vr=o((e,t)=>{if(!e)throw t},"assert");function lo(e){Vr(e>=128,Hl),Vr(e<=256,Hl),Vr(e%32===0,Hl)}o(lo,"assertEntropyLengthIsValid");function lc(e){Vr(e>=12,cc),Vr(e<=24,cc),Vr(e%3===0,cc)}o(lc,"assertMnemonicSentenceLengthIsValid");function Zs(e){Vr(e.length===2048,w0),Vr(e.every(t=>typeof t=="string"),w0)}o(Zs,"assertWordlistIsValid");function A0(e,t){return lc(e),t(e*4/3)}o(A0,"generateEntropy");async function $l(e,t){let r=e.length*8;lo(r);let n=r/32,i=await t(e),[s]=i,c=8-n,f=s>>>c<<c>>>0,p=new Uint8Array(e.length+1);return p.set(e,0),p[p.length-1]=f,p}o($l,"deriveBits");function Gl(e){let t=(e.length-1)*8;lo(t);let r=t/32,n=(t+r)/11,i=new ArrayBuffer(n*4),s=new DataView(i),c=0,f=0,p=0;for(let v of e)if(p+=8,f|=v<<32-p,f>>>=0,p>=11){let A=f>>>21;Vr(A>=0&&A<=2047,S0),s.setUint32(c*4,A,!0),c++,f<<=11,f>>>=0,p-=11}return Vr(c===n,cc),new Uint32Array(i)}o(Gl,"mapBitsToIndexes");function _x(e){let t=e.length;lc(t);let r=11,n=e.length*r,i=new ArrayBuffer(Math.ceil(n/8)),s=new DataView(i),c=new DataView(e.buffer),f=e.length,p=0,v=0,A=0,T=8;for(let I=0;I<f;I++){let P=c.getUint32(I*4,!0);Vr(P<2048,S0);let B=r;for(;B>0;){let K=32-B,N=B>=T?T:B;p|=P>>32-K-N&(1<<N)-1,v+=N,p<<=T-N,p>>>=0,B-=N,T-=N,T<=0&&(T=8),v%8===0&&(s.setUint8(A,p),A++,p=0)}}return f%8!==0&&s.setUint8(A,p),new Uint8Array(i)}o(_x,"mapIndexesToBits");function M0(e){lc(e.length);let t=_x(e),r=t.slice(0,t.length-1);return t.fill(0),r}o(M0,"indexesToEntropy");async function Js(e,t){let r=e.length*8;lo(r);let n=await $l(e,t),i=Gl(n);return n.fill(0),i}o(Js,"entropyToIndexes");function E0(e,t){Zs(t);let r=new Set(t),n=new Uint32Array(24),i=0,s="";for(let f=0;f<e.length;f++){let p=e[f],v=p===32,A=f===e.length-1;if(A&&(s+=String.fromCharCode(p)),v||A){Vr(r.has(s),Ix);let T=0;for(let I of t){if(s===I)break;T++}n[i++]=T,s=""}else s+=String.fromCharCode(p)}lc(i);let c=n.slice(0,i);return n.fill(0),c}o(E0,"mnemonicToIndexes");async function Ys(e,t,r){let n=await Js(e,r),i=new Uint8Array(n.reduce((c,f)=>c+t[f].length+1,-1)),s=0;for(let c of n){s>0&&(i[s++]=32);let f=t[c];for(let p of f)i[s++]=p.charCodeAt(0)}return n.fill(0),i}o(Ys,"entropyToMnemonic");var b0=Uint8Array.of(109,110,101,109,111,110,105,99);async function Ki(e,t,r,n,i){let s=await Ys(e,r,n),c=new Uint8Array(b0.length+t.length);c.set(b0,0),c.set(t,b0.length);let f=await i(s,c,2048,64,"sha512");return c.fill(0),s.fill(0),f}o(Ki,"entropyToSeed");d();h();var Qs=te(hM(),1);d();h();var Zo=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"];async function T0(e){switch(e){case"english":return Zo}}o(T0,"getWordlist");function I0(e){return t=>new e(t)}o(I0,"createFromEntropy");function _0(e,t){return async r=>{let n=null,i=null,s=null,c=null,f=null;try{i=M0(r),s=await $l(i,t),c=Gl(s);let p=r[r.length-1],v=c[c.length-1];if(p!==v)throw x0;f=e.fromEntropy(i)}catch(p){p instanceof Error?n=p:(console.error(p),n=uc)}finally{if(i?.fill(0),s?.fill(0),c?.fill(0),n)throw n;return f}}}o(_0,"createFromIndexes");function k0(e,t){return async r=>{let n=null,i=null,s=null;try{i=E0(r,t),s=await e.fromIndexes(i)}catch(c){c instanceof Error?n=c:(console.error(c),n=uc)}finally{if(i?.fill(0),n)throw n;return s}}}o(k0,"createFromMnemonic");function P0(e,t){return r=>{let n=null,i=null,s=null;try{i=A0(r,t),s=e.fromEntropy(i)}catch(c){c instanceof Error?n=c:(console.error(c),n=uc)}finally{if(i?.fill(0),n)throw n;return s}}}o(P0,"createFromSentenceLength");var O0=class{static{o(this,"Bip39Factory")}static async webCrypto(t){let r=typeof t=="string"?await T0(t):t;Zs(r);let n=o(c=>self.crypto.getRandomValues(new Uint8Array(c)),"random"),i=o(async c=>new Uint8Array(await self.crypto.subtle.digest("SHA-256",c)),"sha256"),s=o(async(c,f,p,v,A)=>{let T="SHA-"+A.substring(3),I=await self.crypto.subtle.importKey("raw",c,"PBKDF2",!1,["deriveBits"]),P=await self.crypto.subtle.deriveBits({name:"PBKDF2",salt:f,iterations:p,hash:T},I,v*8);return new Uint8Array(P)},"pbkdf2");return class fc{static{o(this,"WebCryptoBip39")}static fromEntropy=I0(fc);static fromIndexes=_0(fc,i);static fromMnemonic=k0(fc,r);static fromSentenceLength=P0(fc,n);static wordlist=r;#e;constructor(f){lo(f.length*8),this.#e=f.slice()}deriveSeed=o((f=new Uint8Array)=>Ki(this.#e,f,r,i,s),"deriveSeed");getEntropy=o(()=>this.#e.slice(),"getEntropy");getIndexes=o(()=>Js(this.#e,i),"getIndexes");getMnemonic=o(()=>Ys(this.#e,r,i),"getMnemonic");getSentenceLength=o(()=>{let f=this.#e.length*8,p=f/32;return(f+p)/11},"getSentenceLength")}}static async nodeCrypto(t){let r=typeof t=="string"?await T0(t):t;Zs(r);let n=o(c=>new Uint8Array((0,Qs.randomBytes)(c).buffer),"random"),i=o(c=>new Uint8Array((0,Qs.createHash)("sha256").update(c).digest().buffer),"sha256"),s=o((...c)=>new Promise((f,p)=>{(0,Qs.pbkdf2)(...c,(v,A)=>{if(v)return p(v);f(new Uint8Array(A.buffer))})}),"pbkdf2");return class dc{static{o(this,"NodeCryptoBip39")}static fromEntropy=I0(dc);static fromIndexes=_0(dc,i);static fromMnemonic=k0(dc,r);static fromSentenceLength=P0(dc,n);static wordlist=r;#e;constructor(f){lo(f.length*8),this.#e=f.slice()}deriveSeed=o((f=new Uint8Array)=>Ki(this.#e,f,r,i,s),"deriveSeed");getEntropy=o(()=>this.#e.slice(),"getEntropy");getIndexes=o(()=>Js(this.#e,i),"getIndexes");getMnemonic=o(()=>Ys(this.#e,r,i),"getMnemonic");getSentenceLength=o(()=>{let f=this.#e.length*8,p=f/32;return(f+p)/11},"getSentenceLength")}}static async customCrypto(t,r){let n=typeof t=="string"?await T0(t):t;Zs(n);let{random:i,sha256:s,pbkdf2:c}=r;return class hc{static{o(this,"CustomCryptoBip39")}static fromEntropy=I0(hc);static fromIndexes=_0(hc,s);static fromMnemonic=k0(hc,n);static fromSentenceLength=P0(hc,i);static wordlist=n;#e;constructor(p){lo(p.length*8),this.#e=p.slice()}deriveSeed=o((p=new Uint8Array)=>Ki(this.#e,p,n,s,c),"deriveSeed");getEntropy=o(()=>this.#e.slice(),"getEntropy");getIndexes=o(()=>Js(this.#e,s),"getIndexes");getMnemonic=o(()=>Ys(this.#e,n,s),"getMnemonic");getSentenceLength=o(()=>{let p=this.#e.length*8,v=p/32;return(p+v)/11},"getSentenceLength")}}};async function kx(e,t){let r,n=await e.secureCache.getSeed(t);if(n)r=n;else{let s=await Ln(e,t);try{r=await s.foldAsync(async f=>Ki(f,new Uint8Array,Zo,pn,(p,v,A,T)=>bs(pn,p,v,{c:A,dkLen:T})))}catch{throw new Error("InvalidEntropyBip39")}await e.secureCache.setSeed(t,r)}let i=Br.from(r);return r.fill(0),i}o(kx,"exportSeedV2");var $k=new bi,Gk=new Zi,Zk=new Co,ct={unableToLoadAccounts:{status:"unable-to-load-accounts",isOnboarded:!1,reonboardingNeeded:!1},unonboarded:{status:"unonboarded",isOnboarded:!1,reonboardingNeeded:!1},storageTemporarilyInaccessible:{status:"storage-temporarily-inaccessible",isOnboarded:!1,reonboardingNeeded:!1},invalidIdentifier:{status:"invalid-identifier",isOnboarded:!0,reonboardingNeeded:!0},fetchIntegrityStorageError:{status:"fetch-integrity-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchEntropyStorageError:{status:"fetch-entropy-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchPkStorageError:{status:"fetch-pk-storage-error",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropy:{status:"invalid-entropy",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyBip39:{status:"invalid-entropy-bip-39",isOnboarded:!0,reonboardingNeeded:!0},invalidChecksumBits:{status:"invalid-checksum-bits",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyBits:{status:"invalid-entropy-bits",isOnboarded:!0,reonboardingNeeded:!0},invalidChecksum:{status:"invalid-checksum",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthLessThanTwelve:{status:"invalid-entropy-length-less-than-twelve",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthMoreThanTwentyFour:{status:"invalid-entropy-length-more-than-twenty-four",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthWrongWord:{status:"invalid-entropy-length-wrong-word",isOnboarded:!0,reonboardingNeeded:!0},invalidPkAddressType:{status:"invalid-pk-address-type",isOnboarded:!0,reonboardingNeeded:!0},invalidPkIdentifier:{status:"invalid-pk-identifier",isOnboarded:!0,reonboardingNeeded:!0},invalidPk:{status:"invalid-pk",isOnboarded:!0,reonboardingNeeded:!0},internalError:{status:"internal-error",isOnboarded:!0,reonboardingNeeded:!0},safelyOnboarded:{status:"safely-onboarded",isOnboarded:!0,reonboardingNeeded:!1}},Xs=o(e=>e instanceof Error?e.message.includes("User interaction is not allowed"):!1,"isStorageTemporarilyInaccessibleError"),Cx=o(async e=>Ad(()=>jw(e),Xs,3,200),"fetchIntegrityCheckWithRetry");async function Bx(e){let t;try{if(t=await lt(),t.length===0)return ct.unonboarded}catch{return ct.unableToLoadAccounts}return Jk(e,t)}o(Bx,"checkVaultIntegrity");var Jk=o(async(e,t)=>{let r=await Yk(e,t);if(r.status!=="safely-onboarded")return r;try{let c=await Cx(e);if(c?.version===3&&c?.isSafelyOnboarded)return ct.safelyOnboarded}catch(c){return Xs(c)?ct.storageTemporarilyInaccessible:ct.fetchIntegrityStorageError}let n=await Ox(e,t,O.Seed),i=await Ox(e,t,O.Seedless),s=await Xk(e,t);if(n.status!=="safely-onboarded")return n;if(i.status!=="safely-onboarded")return i;if(s.status!=="safely-onboarded")return s;try{await f0(e,{version:3,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()})}catch(c){H.addBreadcrumb(W.Account,`storeIntegrityCheck (v3) failed: ${c instanceof Error?c.message:"unknown"}`,X.Info)}return ct.safelyOnboarded},"checkAndValidateAllSecrets"),Yk=o(async(e,t)=>{try{if((await Cx(e))?.isSafelyOnboarded)return ct.safelyOnboarded}catch(i){return Xs(i)?ct.storageTemporarilyInaccessible:ct.fetchIntegrityStorageError}let r=await Px(e,t,O.Seed),n=await Px(e,t,O.Seedless);if(r.status!=="safely-onboarded")return r;if(n.status!=="safely-onboarded")return n;try{await f0(e,{version:1,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()})}catch(i){H.addBreadcrumb(W.Account,`storeIntegrityCheck (v1) failed: ${i instanceof Error?i.message:"unknown"}`,X.Info)}return ct.safelyOnboarded},"checkForExistingEntropy"),Px=o(async(e,t,r)=>{let n=new Set;for(let i of t)i.type===r&&n.add(i.seedIdentifier);for(let i of n)try{await Ln(e,i)}catch(s){if(Xs(s))return ct.storageTemporarilyInaccessible;if(s instanceof Error){if(s.message===$k.message)return ct.invalidIdentifier;if(s.message.match(/ExpoSecureStorage/))return ct.fetchEntropyStorageError}return ct.internalError}return ct.safelyOnboarded},"checkExistingEntropy"),Qk=o(e=>{if(Xs(e))return ct.storageTemporarilyInaccessible;if(!(e instanceof Error))return ct.invalidEntropy;let t=[[/ExpoSecureStorage/,ct.fetchEntropyStorageError],[/InvalidEntropyBip39/,ct.invalidEntropyBip39],[/LessThanTwelve/,ct.invalidEntropyLengthLessThanTwelve],[/MoreThanTwentyFour/,ct.invalidEntropyLengthMoreThanTwentyFour],[/WrongWord/,ct.invalidEntropyLengthWrongWord],[/InvalidChecksumBits/,ct.invalidChecksumBits],[/InvalidEntropyBits/,ct.invalidEntropyBits],[/InvalidChecksum/,ct.invalidChecksum]];for(let[r,n]of t)if(e.message.match(r))return n;return ct.invalidEntropy},"getCheckValidEntropyErrorResult"),Ox=o(async(e,t,r)=>{let n=new Set;for(let i of t)i.type===r&&n.add(i.seedIdentifier);for(let i of n)try{await kx(e,i)}catch(s){return Qk(s)}return ct.safelyOnboarded},"checkValidEntropy"),Xk=o(async(e,t)=>{for(let r of t)if(r.type===O.PrivateKey)try{await Wl(e,r.identifier,r.chainType)}catch(n){if(Xs(n))return ct.storageTemporarilyInaccessible;if(n instanceof Error){if(n.message===Gk.message)return ct.invalidPkAddressType;if(n.message===Zk.message)return ct.invalidPkIdentifier;if(n.message.match(/ExpoSecureStorage/))return ct.fetchPkStorageError}return ct.invalidPk}return ct.safelyOnboarded},"checkValidPrivateKeys");d();h();async function Kx(e){let t=(await e.fetchChainAvailability()).enabledAddressTypes,r=!1,n=await lt();if(n.length===0)return r;let i=new Map;for(let s of n){if(s.type!==O.Seed&&s.type!==O.Seedless)continue;let c=i.get(s.seedIdentifier);c?c.push(s):i.set(s.seedIdentifier,[s])}for(let[s,c]of i){let f;for(let p of c)if(!(p.chains&&!Fh(Object.values(p.chains)[0].pathType)))for(let v of t){if(p.chains[v])continue;f||(f=await Ut(e,s));let T=tr([v]),I=Vn(e,f,p.derivationIndex,T);p.chains={...p.chains,...I},r=!0}}return r&&await Dn(n),r}o(Kx,"deriveAddresses");d();h();var C0=class extends Error{static{o(this,"SeedCacheCorruptionError")}sha256Count;mismatchCount;totalSeeds;constructor(t,r,n){super(`IDPLAT-295: Seed cache corruption detected - SHA256: ${t}, Mismatch: ${r}`),this.sha256Count=t,this.mismatchCount=r,this.totalSeeds=n}};async function Nx(e){let t=await Ul(),r=[];for(let{identifier:s}of t){let c=null,f=null,p=null;try{p=await e.secureCache.getSeed(s);let v=await Ln(e,s);if(c=await v.foldAsync(async A=>{let{seed:T}=await ic(A);return T}),!p){r.push({seedIdentifier:s,digest:"uncached"});continue}if(Rx(p,c)){r.push({seedIdentifier:s,digest:"sha512"});continue}if(f=await v.foldAsync(async A=>Ki(A,new Uint8Array,Zo,pn,(T,I,P,B)=>bs(pn,T,I,{c:P,dkLen:B}))),Rx(p,f)){r.push({seedIdentifier:s,digest:"sha256"});continue}r.push({seedIdentifier:s,digest:"mismatch"})}catch(v){r.push({seedIdentifier:s,digest:"error",error:v instanceof Error?v.message:String(v)})}finally{c&&c.fill(0),f&&f.fill(0),p&&p.fill(0)}}let n=r.filter(s=>s.digest==="sha256").length,i=r.filter(s=>s.digest==="mismatch").length;if(n>0||i>0){let s=new C0(n,i,r.length);H.captureError(s,W.Account)}return r}o(Nx,"DO_NOT_USE_diagnoseSeedCacheDigests");var Rx=o((e,t)=>{if(!e||!t||e.length!==t.length)return!1;for(let r=0;r<e.length;r+=1)if(e[r]!==t[r])return!1;return!0},"buffersEqual");d();h();d();h();d();h();d();h();var Lx=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Dx=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),e3=BigInt(1),B0=BigInt(2),Ux=o((e,t)=>(e+t/B0)/t,"divNearest");function t3(e){let t=Lx,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),c=BigInt(23),f=BigInt(44),p=BigInt(88),v=e*e*e%t,A=v*v*e%t,T=Ar(A,r,t)*A%t,I=Ar(T,r,t)*A%t,P=Ar(I,B0,t)*v%t,B=Ar(P,i,t)*P%t,K=Ar(B,s,t)*B%t,N=Ar(K,f,t)*K%t,D=Ar(N,p,t)*N%t,Z=Ar(D,f,t)*K%t,L=Ar(Z,r,t)*A%t,ne=Ar(L,c,t)*B%t,ie=Ar(ne,n,t)*v%t,re=Ar(ie,B0,t);if(!K0.eql(K0.sqr(re),e))throw new Error("Cannot find square root");return re}o(t3,"sqrtMod");var K0=Tl(Lx,void 0,void 0,{sqrt:t3}),Zl=Ol({a:BigInt(0),b:BigInt(7),Fp:K0,n:Dx,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:o(e=>{let t=Dx,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-e3*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,c=BigInt("0x100000000000000000000000000000000"),f=Ux(s*e,t),p=Ux(-n*e,t),v=Qt(e-f*r-p*i,t),A=Qt(-f*n-p*s,t),T=v>c,I=A>c;if(T&&(v=t-v),I&&(A=t-A),v>c||A>c)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:T,k1:v,k2neg:I,k2:A}},"splitScalar")}},Bl),pre=BigInt(0);var mre=Zl.ProjectivePoint;async function Vx(){let e=Zl.utils.randomPrivateKey();return{publicKey:Zl.getPublicKey(e),privateKey:e}}o(Vx,"deriveAgentKeypair");var Fx=o(e=>`${fr}.perps.agent.keypair.${e}`,"agentWalletStorageKey"),Jl=o(async(e,t,r=!1)=>{let n=await r3(e,t);if(n&&!r)return n;let i=await Vx();return await n3(e,i,t),i},"exportAgentWalletKeypair"),r3=o(async(e,t)=>{let r=Fx(t),n=null;try{n=await e.secretsStorage.getSecureValue(r)}catch{}if(!n)return null;let i=n.keyPair,s=new Uint8Array(Buffer.from(i.publicKey.bytes,i.publicKey.encoding)),c=new Uint8Array(Buffer.from(i.privateKey.bytes,i.privateKey.encoding));return{publicKey:s,privateKey:c}},"getAgentWalletFromStorage"),n3=o(async(e,t,r)=>{let n=Fx(r),i={publicKey:{bytes:Buffer.from(t.publicKey).toString("base64"),encoding:"base64"},privateKey:{bytes:Buffer.from(t.privateKey).toString("base64"),encoding:"base64"}},s={version:1,identifier:r,keyPair:i};await e.secretsStorage.setSecureValue(n,s)},"setAgentWalletInStorage");var zx=o(async(e,t,r=!1)=>{let{publicKey:n}=await Jl(e,t,r);return Kt({publicKey:n,addressType:k.EVM})},"getAgentAddress");d();h();var i3=o(e=>e.type===O.Seed||e.type===O.Seedless||e.type===O.PrivateKey,"isAccountWithKey"),jx=o(async(e,t)=>{let r=await lt();if(r.length===0)throw new Error("No accounts, unable to get authentication public key.");let i=r.filter(i3).find(c=>c.type===O.PrivateKey?c.privateKeyIdentifier===t:c.seedIdentifier===t);if(!i)throw new Error("Unable to derive authentication public key for given secret identifier.");let s=await ao(e,i);return st(s.publicKey)},"getAuthenticationPublicKey");d();h();async function qx(e,t){let r=await lt();if(r.length===0)throw new Pn;let n=r.find(c=>c.identifier===t),i=n?.type===O.KMSVault,s=r.filter(c=>c.identifier!==t);if(await Dn(s),await l0(e),i){let c=n;await Yw(e,c.kms.walletId,c.kms.tag)}}o(qx,"removeAccount");d();h();async function Wx(e,t,r){let n=await lt();if(r<0||r>=n.length)throw new Pn;let i=n.map(c=>c.identifier).indexOf(t);if(i<0)throw new Pn;if(i===r)return;let s=n[i];n.splice(i,1),n.splice(r,0,s),await Dn(n)}o(Wx,"reorderAccount");d();h();d();h();var o3="cash",s3="cash",a3={pathType:oe.Bip44ChangeSolana,index:0};async function Hx(e){H.addBreadcrumb(W.Cash,"Getting user's Cash account from KMS",X.Info);let t;try{let{result:r}=await e.getOrCreatePhantomOrganization();H.addBreadcrumb(W.Cash,`Successfully got user's Phantom Org (orgId: ${R0(r.organizationId)})`,X.Info),t=r.organizationId}catch(r){H.addBreadcrumb(W.Cash,"[KMS] Error getting user's Phantom Org",X.Error);let n=r instanceof Error?r:new Error("[KMS] Failed to get user's Phantom Org");throw H.captureError(n,W.Cash),n}try{let{result:{walletId:r,walletName:n,accounts:i}}=await e.getOrCreateWalletWithTag({organizationId:t,walletName:o3,tag:s3,mnemonicLength:24,accounts:[{derivationPath:yi(a3),curve:"Ed25519",addressFormat:"Solana"}]});if(i.length===0)throw new Error("No Cash account found");return H.addBreadcrumb(W.Cash,`Successfully got user's Cash wallet (walletId: ${R0(r)}, walletName: ${n}, orgId: ${R0(t)})`,X.Info),{organizationId:t,walletId:r,walletName:n,account:i[0]}}catch(r){H.addBreadcrumb(W.Cash,"[KMS] Error getting user's Cash wallet",X.Error);let n=r instanceof Error?r:new Error("[KMS] Failed to get user's Cash wallet");throw H.captureError(n,W.Cash),n}}o(Hx,"getCashKMSAccount");var R0=o(e=>e?.slice(0,5)??"","sanitizeString");d();h();var c3="m/24001'/0'",$x=o(async e=>{let t=await lt();if(t.length===0)throw new Error("No accounts, unable to derive cash key.");let r=t[0],n;switch(r.type){case O.Seed:case O.Seedless:{n=(await Ut(e,r.seedIdentifier)).fold(s=>new ys(s));break}case O.PrivateKey:{let i=await so(e,r.privateKeyIdentifier);n=new ys(i.privateKey);break}default:throw new Error(`Account type ${r.type} is not supported, unable to derive cash key.`)}try{let i=n.derivePath({ellipticCurve:"ed25519",derivationPath:c3,bytesInPrivateKey:64});return{publicKey:i.publicKey,privateKey:i.secretKey}}finally{n.cleanup()}},"deriveCashKeypair");d();h();d();h();var xc=te(ln()),Zn=te(cm());d();h();d();h();var T6=m.array(m.object({address:m.string(),signingIndexes:m.array(m.number()),sigHash:m.number().optional(),isScriptSpend:m.boolean().optional()})),dS=m.object({chainType:ka,signingType:m.literal("transaction"),message:m.string().min(1),inputsToSign:T6.optional(),finalize:m.boolean()}),I6=m.object({chainType:ka,signingType:m.literal("message"),message:m.instanceof(Uint8Array)}),_6=dS.or(I6),hS=m.object({chainType:m.literal(k.Sui),signingType:m.literal("transaction"),transaction:m.instanceof(Uint8Array)}),pS=m.object({chainType:m.literal(k.Sui),signingType:m.literal("personalMessage"),message:m.instanceof(Uint8Array)}),k6=hS.or(pS),mS=m.object({chainType:m.literal(k.Solana),signingType:m.literal("transaction"),message:m.union([m.string().min(1),m.instanceof(Uint8Array)])}),gS=m.object({chainType:m.literal(k.Solana),signingType:m.literal("message"),message:m.string().min(1)}),yS=mS.or(gS),vS=m.object({chainType:m.literal(k.EVM),signingType:m.literal("transaction"),message:m.string().min(1)}),um=m.object({chainType:m.literal(k.EVM),signingType:m.literal("message"),message:m.string().min(1)}),lm=m.object({chainType:m.literal(k.EVM),signingType:m.literal("typedData"),version:m.literal(1),data:Hc}),fm=m.object({chainType:m.literal(k.EVM),signingType:m.literal("typedData"),version:m.literal(3),data:$c}),dm=m.object({chainType:m.literal(k.EVM),signingType:m.literal("typedData"),version:m.literal(4),data:Gc}),P6=vS.or(um).or(lm).or(fm).or(dm),O6=m.object({isJWT:m.literal(!0),data:ph}),Gn=m.object({policyName:m.string().optional()}),C6=mS.merge(Gn),B6=gS.merge(Gn),Goe=C6.or(B6),K6=vS.merge(Gn),R6=um.merge(Gn),N6=lm.merge(Gn),D6=fm.merge(Gn),U6=dm.merge(Gn),Zoe=K6.or(R6).or(N6).or(D6).or(U6),Joe=dS.merge(Gn),Yoe=m.union([hS.merge(Gn),pS.merge(Gn)]),L6=m.object({isKMSPKIAuthenticator:m.literal(!0),payload:wl}),Qoe=m.object({organizationId:m.string(),walletId:m.string(),derivationPath:m.string()}),bS=m.object({isCash:m.literal(!0),data:yS}),V6=bS.extend({isCashKMS:m.literal(!0),cashAccountAddress:m.string()}),F6=um.extend({isAgentWallet:m.literal(!0)}),z6=lm.extend({isAgentWallet:m.literal(!0)}),j6=fm.extend({isAgentWallet:m.literal(!0)}),q6=dm.extend({isAgentWallet:m.literal(!0)}),W6=m.union([F6,z6,j6,q6]),H6=m.object({status:m.literal("success"),signature:m.string()}),wS=m.object({status:m.literal("success"),signature:m.string()}),$6=m.object({status:m.literal("success"),signature:m.string(),message:m.instanceof(Uint8Array).optional()}),G6=m.object({status:m.literal("success"),signature:m.string()}),Z6=m.object({status:m.literal("success"),signature:m.string(),signedJWT:hh.optional()}),J6=m.object({status:m.literal("success"),signature:m.string()}),Y6=wS;var hm=yS.or(P6).or(_6).or(k6).or(O6).or(L6).or(W6).or(bS).or(V6),ue;(function(e){e.InvalidInput="invalidInput",e.InvalidAccountId="invalidAccountId",e.InvalidAddressType="invalidAddressType",e.InvalidMessageEncoding="invalidMessageEncoding",e.InvalidDerivationPath="invalidDerivationPath",e.InvalidRpcPayload="invalidRpcPayload",e.LedgerAppNotOpen="ledgerAppNotOpen",e.LedgerNotConnected="ledgerNotConnected",e.LedgerNeedPermission="ledgerNeedPermission",e.LedgerRejectAction="ledgerRejectAction",e.LedgerUnknownSignError="ledgerUnknownSignError",e.UnsupportedOperation="unsupportedOperation",e.InternalError="internalError",e.ExpiredTokenError="expiredToken",e.BeforeIATError="beforeTimeOfIssuance",e.InvalidClaimError="invalidClaim"})(ue||(ue={}));var Q6=m.object({status:m.literal("error"),type:m.nativeEnum(ue),message:m.string()}),X6=m.union([Z6,J6,Y6,$6,H6,wS,G6,Q6]),At;(function(e){e.KeyPair="keyPair",e.Ledger="ledger",e.SeedVault="seedVault",e.KMS="kms"})(At||(At={}));var eP={[ue.InvalidInput]:{message:"Invalid input"},[ue.InvalidAccountId]:{message:"Invalid account identifier."},[ue.InvalidAddressType]:{message:"Invalid chain type."},[ue.InvalidMessageEncoding]:{message:"Invalid message encoding."},[ue.InvalidDerivationPath]:{message:"Invalid derivation path."},[ue.InvalidRpcPayload]:{message:"Invalid KMS RPC payload."},[ue.LedgerAppNotOpen]:{message:"Ledger App not open."},[ue.LedgerNotConnected]:{message:"Ledger not connected."},[ue.LedgerNeedPermission]:{message:"Need permission to connect to Ledger."},[ue.LedgerRejectAction]:{message:"Ledger user rejected action."},[ue.LedgerUnknownSignError]:{message:"Ledger unknown sign error."},[ue.UnsupportedOperation]:{message:"Unsupported operation."},[ue.InternalError]:{message:"Internal error."},[ue.ExpiredTokenError]:{message:"Token is expired"},[ue.BeforeIATError]:{message:"Received token before issuance time"},[ue.InvalidClaimError]:{message:"Claim is invalid"}},ye=o((e,t)=>({status:"error",type:e,message:t??eP[e].message}),"createVaultSignerError");var xS=o(()=>({type:At.KeyPair,sign:o((e,t)=>{try{switch(t.signingType){case"typedData":{switch(t.version){case 1:{let r=xc.Buffer.from(e.privateKey.slice()),n=Zn.SignTypedDataVersion.V1,{data:i}=t,s=(0,Zn.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:s})}case 3:{let r=xc.Buffer.from(e.privateKey.slice()),n=Zn.SignTypedDataVersion.V3,i=t.data,s=(0,Zn.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:s})}case 4:{let r=xc.Buffer.from(e.privateKey.slice()),n=Zn.SignTypedDataVersion.V4,i=t.data,s=(0,Zn.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:s})}}break}case"message":{let r=t.message,n=xc.Buffer.from(e.privateKey);try{let i=(0,Zn.personalSign)({privateKey:n,data:r});return Promise.resolve({status:"success",signature:i})}finally{n.fill(0)}}}}catch(r){return console.error(r),Promise.resolve(ye(ue.InvalidMessageEncoding))}},"sign")}),"createAgentWalletKeypairSigner");d();h();var gr=te(ln());var SS=te(Dy()),pm=te(vM());var mm=o(e=>e.length===32?e:e.slice(1,33),"toXOnly");function tP(e){return gr.Buffer.concat([(0,pm.encode)(e.byteLength),e])}o(tP,"encodeVarString");function rP(e){let{sha256:t}=SS.crypto,n=t(gr.Buffer.from("BIP0322-signed-message"));return t(gr.Buffer.concat([n,n,gr.Buffer.from(e)])).toString("hex")}o(rP,"bip0322Hash");var nP=o((e,t)=>{switch(e){case k.BitcoinTaproot:return wy.getPublicKey(t);case k.BitcoinNestedSegwit:return vd(t,!0);case k.BitcoinNativeSegwit:return vd(t,!0);default:throw new Error("Unsupported Address Type")}},"getSigningPk"),iP=o((e,t)=>{let r=Qy;switch(e){case k.BitcoinTaproot:return ev(t,void 0,r);case k.BitcoinNativeSegwit:return Ed(t,r);case k.BitcoinNestedSegwit:{let n=Ed(t,r);return Xy(n,r)}default:throw new Error("Unsupported Address Type")}},"getSignerScript");function oP(e,t,r,n){let i=ou.fromPSBT(r,{allowUnknownInputs:!0});try{t.forEach(s=>{let c=vs(Ct.Mainnet,s.address),f=e[c];if(!f)throw new Error("missing private key for ("+c+")");let{publicKey:p,privateKey:v}=f;s.signingIndexes.forEach(A=>{let T=i.getInput(A),I=T.witnessUtxo?.script&&tv.decode(T.witnessUtxo.script);if(!s.isScriptSpend&&!T.tapInternalKey&&I?.type==="tr"&&i.updateInput(A,{tapInternalKey:mm(gr.Buffer.from(p))}),s.sigHash)try{i.signIdx(v,A,[s.sigHash],_a(32))}catch{i.signIdx(v,A,void 0,_a(32))}else i.signIdx(v,A,void 0,_a(32));if(n)try{i.finalizeIdx(A)}catch{}})})}catch(s){throw console.error(s),new Error(`Error signing PSBT ${s.toString()}`)}return Promise.resolve(i.toPSBT(0))}o(oP,"signPsbt");var AS=o(()=>({type:At.KeyPair,sign:o(async(e,t)=>{try{switch(t.signingType){case"message":{let r=t.chainType,n=gr.Buffer.from(t.message).toString("utf8"),i=e[t.chainType]?.privateKey;if(!i)throw new Error("missing private key for ("+t.chainType+")");let s=gr.Buffer.from(i).toString("hex"),c=nP(r,s),f=iP(r,c),p=gr.Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),v=0,A=4294967295,T=0,I=Md.encode(["OP_0",gr.Buffer.from(rP(n),"hex")]),P=new ou({allowUnknownOutputs:!0,version:v});P.addOutput({amount:BigInt(0),script:f.script}),P.addInput({txid:p,index:A,sequence:T,finalScriptSig:I});let B=new ou({allowUnknownOutputs:!0,version:v});B.addInput({txid:P.id,index:0,sequence:T,tapInternalKey:r===k.BitcoinTaproot?c:void 0,witnessUtxo:{script:f.script,amount:BigInt(0)},redeemScript:f.redeemScript}),B.addOutput({script:Md.encode(["RETURN"]),amount:BigInt(0)}),B.sign(gr.Buffer.from(s,"hex"),void 0,_a(32)),B.finalize();let K,N=B.getInput(0);if(N.finalScriptWitness?.length){let D=(0,pm.encode)(N.finalScriptWitness?.length);K=gr.Buffer.concat([D,...N.finalScriptWitness.map(Z=>tP(Z))])}else throw new Error("couldnt produce a signature");return{status:"success",signature:K.toString("hex"),message:B.toBytes()}}case"transaction":{let r=await oP(e,t.inputsToSign??[],gr.Buffer.from(t.message??"","hex"),t.finalize??!1);return{status:"success",signature:gr.Buffer.from(r).toString("hex")}}}}catch{return ye(ue.InternalError)}},"sign")}),"createBitcoinKeyPairSigner");d();h();var ES=te(Ta()),TS=te(qi());d();h();var MS=te(Ta());function pf(e,t,r){if(r!==k.Solana)return ye(ue.InvalidAddressType);if(e instanceof Uint8Array)return e;try{return t==="transaction"?MS.default.decode(e):Buffer.from(e,"utf8")}catch(n){return ye(ue.InvalidMessageEncoding,`Failed to decode message: ${n instanceof Error?n.message:"Unknown error"}`)}}o(pf,"decodeSolanaMessage");var IS=o(()=>({type:At.KeyPair,sign:o((e,t)=>{let r=t.data,n=pf(r.message,r.signingType,r.chainType);if("status"in n)return Promise.resolve(n);let i=ES.default.encode(TS.default.sign.detached(n,e.privateKey));return Promise.resolve({status:"success",signature:i})},"sign")}),"createCashVaultSigner");d();h();var da=te(ln()),_S=te(lM());var Jn=te(cm()),kS=te(ps());var PS=o(()=>({type:At.KeyPair,sign:o((e,t)=>{try{switch(t.signingType){case"typedData":{switch(t.version){case 1:{let r=da.Buffer.from(e.privateKey.slice()),n=Jn.SignTypedDataVersion.V1,{data:i}=t,s=(0,Jn.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:s})}case 3:{let r=da.Buffer.from(e.privateKey.slice()),n=Jn.SignTypedDataVersion.V3,i=t.data,s=(0,Jn.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:s})}case 4:{let r=da.Buffer.from(e.privateKey.slice()),n=Jn.SignTypedDataVersion.V4,i=t.data,s=(0,Jn.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:s})}}break}case"message":{let r=t.message,n=(0,Jn.personalSign)({privateKey:da.Buffer.from(e.privateKey),data:r});return Promise.resolve({status:"success",signature:n})}case"transaction":{let r=da.Buffer.from(t.message.replace("0x",""),"hex"),n=new Iy(e.privateKey),i=`0x${(0,kS.keccak256)(r)}`,s=(0,_S.joinSignature)(n.signDigest(i));return Promise.resolve({status:"success",signature:s})}}}catch(r){return console.error(r),Promise.resolve(ye(ue.InvalidMessageEncoding))}},"sign")}),"createEthereumKeyPairSigner");d();h();var os=te(ln());var OS=o(()=>({type:At.KeyPair,sign:o((e,t)=>{if(!t.isJWT)return Promise.resolve(ye(ue.InvalidAddressType));if(t.data.payload.iss!==Ha)return Promise.resolve(ye(ue.InvalidClaimError));if(t.data.payload.aud!==$a)return Promise.resolve(ye(ue.InvalidClaimError));let r={...t.data.header,kid:st(os.Buffer.from(e.publicKey))},n={...t.data.payload,sub:st(os.Buffer.from(e.publicKey))},i=st(os.Buffer.from(JSON.stringify(r)))+"."+st(os.Buffer.from(JSON.stringify(n))),c=$o.sign(os.Buffer.from(i).toString("hex"),e.privateKey,{prehash:!0}).toCompactRawBytes(),f=st(os.Buffer.from(c)),p={header:r,payload:n,signature:f};return Promise.resolve({status:"success",signature:f,signedJWT:p})},"sign")}),"createJWTKeypairSigner");d();h();d();h();d();h();var CS=te(Ta());async function gm(e,t,r){let n=pf(r.message,r.signingType,r.chainType);if("status"in n)return n;try{let i={curve:"Ed25519",derivationPath:t.derivationPath,addressFormat:"Solana"};if(r.signingType==="transaction"){let s=Ia.VersionedMessage.deserialize(n),f=new Ia.VersionedTransaction(s).serialize(),p=st(f),{result:{transaction:v}}=await e.signTransaction({transaction:p,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:i,policyName:r.policyName??null}),A;if(typeof v=="string")A=new Uint8Array(ur(v));else if(Array.isArray(v))A=new Uint8Array(v);else throw new Error("Unexpected transaction format from KMS");let T=Ia.VersionedTransaction.deserialize(A);if(!T.signatures||T.signatures.length===0)throw new Error("Signed transaction has no signatures");return{status:"success",signature:CS.default.encode(T.signatures[0])}}else{let s=new TextDecoder().decode(n),{result:{signature:c}}=await e.signUtf8Message({message:s,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:i,algorithm:"Ed25519",policyName:r.policyName});return{status:"success",signature:Yc(c)}}}catch(i){return ye(ue.InternalError,`KMS Solana signing failed: ${i instanceof Error?i.message:"Unknown error"}`)}}o(gm,"signSolana");d();h();var mf=te(ln());async function ym(e,t,r){try{let n={curve:"Secp256k1",derivationPath:t.derivationPath,addressFormat:"Ethereum"};switch(r.signingType){case"transaction":{let{result:{signature:i}}=await e.signTransaction({transaction:{kind:Ii.RLP_ENCODED,bytes:r.message},organizationId:t.organizationId,walletId:t.walletId,derivationInfo:n,policyName:r.policyName});return typeof i!="string"||!KS(i)?ye(ue.InternalError,"KMS returned invalid Ethereum signature"):{status:"success",signature:i}}case"message":{let i=sP(r.message),s=st(i),{result:{signature:c}}=await e.ethereumSignMessage({message:s,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:n,policyName:r.policyName});return{status:"success",signature:BS(c)}}case"typedData":{let{result:{signature:i}}=await e.ethereumSignTypedData({typedData:r.data,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:n,policyName:r.policyName});return{status:"success",signature:BS(i)}}}}catch(n){return ye(ue.InternalError,`KMS EVM signing failed: ${n instanceof Error?n.message:"Unknown error"}`)}}o(ym,"signEVM");function BS(e){let t=ur(e);return`0x${mf.Buffer.from(t).toString("hex")}`}o(BS,"base64UrlSignatureToHex");function sP(e){if(KS(e)){let t=e.slice(2),r=t.length%2===0?t:`0${t}`;return mf.Buffer.from(r,"hex")}return mf.Buffer.from(e,"utf8")}o(sP,"normalizePersonalSignPayload");function KS(e){return e.length<3||!(e.startsWith("0x")||e.startsWith("0X"))||e.length%2!==0?!1:/^[0-9a-fA-F]+$/.test(e.slice(2))}o(KS,"looksLikeHex");d();h();function RS(e,t){let r=ur(e),n=ur(t);return Buffer.concat([Buffer.from([0]),r,n]).toString("base64")}o(RS,"serializeSuiSignature");async function vm(e,t,r){try{let n={curve:"Ed25519",derivationPath:t.derivationPath,addressFormat:"Sui"};switch(r.signingType){case"transaction":{let i=st(r.transaction),{result:{signature:s,publicKey:c}}=await e.signTransaction({transaction:{kind:Ii.SUI_BCS_ENCODED_TRANSACTION_DATA,bytes:i},organizationId:t.organizationId,walletId:t.walletId,derivationInfo:n,policyName:r.policyName??null});return!s||!c?ye(ue.InternalError,"KMS Sui signing failed: signature or public key not returned in response"):{status:"success",signature:RS(s,c)}}case"personalMessage":{let i=new TextDecoder().decode(r.message),{result:{signature:s,publicKey:c}}=await e.signUtf8Message({message:i,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:n,algorithm:"Ed25519",policyName:r.policyName});return!s||!c?ye(ue.InternalError,"KMS Sui signing failed: signature or public key not returned in response"):{status:"success",signature:RS(s,c)}}}return ye(ue.UnsupportedOperation,`Unsupported Sui signingType: ${r.signingType}`)}catch(n){return ye(ue.InternalError,`KMS Sui signing failed: ${n instanceof Error?n.message:"Unknown error"}`)}}o(vm,"signSui");d();h();async function bm(e,t,r){try{if(r.signingType!=="transaction")return ye(ue.UnsupportedOperation,"KMS does not support Bitcoin message signing");let n=null;switch(r.chainType){case k.BitcoinTaproot:n="BitcoinTaproot";break;case k.BitcoinNativeSegwit:n="BitcoinSegwit";break}if(!n)return ye(ue.UnsupportedOperation,`KMS does not yet support Bitcoin address type: ${r.chainType}`);let i={curve:"Secp256k1",derivationPath:t.derivationPath,addressFormat:n},s=r.message,c=Ny(s),f=c.length%2===0?c:`0${c}`,p=vy(f),v=st(p),{result:{transaction:A}}=await e.signTransaction({transaction:{kind:Ii.PSBT,bytes:v},organizationId:t.organizationId,walletId:t.walletId,derivationInfo:i,policyName:void 0}),T;if(typeof A=="string")T=ur(A);else if(Array.isArray(A))T=new Uint8Array(A);else return ye(ue.InternalError,"Unexpected Bitcoin transaction response format from KMS");return{status:"success",signature:yy(T)}}catch(n){return ye(ue.InternalError,`KMS Bitcoin signing failed: ${n instanceof Error?n.message:"Unknown error"}`)}}o(bm,"signBitcoin");var NS=o(()=>({type:At.KMS,sign:o(async(e,t,r)=>{switch(r.chainType){case k.Solana:return gm(e,t,r);case k.EVM:return ym(e,t,r);case k.Sui:return vm(e,t,r);case k.BitcoinTaproot:case k.BitcoinNativeSegwit:return bm(e,t,r);default:return ye(ue.UnsupportedOperation,`KMS signer does not support chain type: ${r.chainType}`)}},"sign")}),"createKMSSigner");d();h();var DS=o(()=>({type:At.KeyPair,sign:o(async(e,t)=>{if(!t.isKMSPKIAuthenticator)return ye(ue.InvalidAddressType);try{let r=$p(t.payload),n=JSON.stringify(r),i=Buffer.from(n).toString("hex"),c=$o.sign(i,e.privateKey,{prehash:!0}).toCompactRawBytes();return{status:"success",signature:st(c)}}catch(r){if(r instanceof m.ZodError)return ye(ue.InvalidRpcPayload,`Invalid KMS RPC payload: ${r.message}`);let n=r instanceof Error?r.message:"Failed to authenticate KMS RPC request";return ye(ue.InternalError,n)}},"sign")}),"createKMSPKIAuthenticatorSigner");d();h();var US=te(ln());var wm=te(Ta()),LS=te(qi());var VS=o(()=>({type:At.KeyPair,sign:o((e,t)=>{if(t.chainType!==k.Solana)return Promise.resolve(ye(ue.InvalidAddressType));let r;try{typeof t.message=="string"?t.signingType==="transaction"?r=wm.default.decode(t.message):r=US.Buffer.from(t.message,"utf8"):r=t.message}catch{return Promise.resolve(ye(ue.InvalidMessageEncoding))}let n=wm.default.encode(LS.default.sign.detached(r,e.privateKey));return Promise.resolve({status:"success",signature:n})},"sign")}),"createSolanaKeyPairSigner");d();h();d();h();d();h();var ls=te(qi(),1);d();h();d();h();d();h();d();h();d();h();function aP(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}o(aP,"isBytes");function ha(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}o(ha,"anumber");function Ni(e,...t){if(!aP(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}o(Ni,"abytes");function zS(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ha(e.outputLen),ha(e.blockLen)}o(zS,"ahash");function Di(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}o(Di,"aexists");function gf(e,t){Ni(e);let r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}o(gf,"aoutput");function Sc(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}o(Sc,"u32");function Mn(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}o(Mn,"clean");function yf(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}o(yf,"createView");var jS=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function qS(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}o(qS,"byteSwap");var Yn=jS?e=>e:e=>qS(e);function cP(e){for(let t=0;t<e.length;t++)e[t]=qS(e[t]);return e}o(cP,"byteSwap32");var ss=jS?e=>e:cP,WS=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",uP=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function vf(e){if(Ni(e),WS)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=uP[e[r]];return t}o(vf,"bytesToHex");var Ri={_0:48,_9:57,A:65,F:70,a:97,f:102};function FS(e){if(e>=Ri._0&&e<=Ri._9)return e-Ri._0;if(e>=Ri.A&&e<=Ri.F)return e-(Ri.A-10);if(e>=Ri.a&&e<=Ri.f)return e-(Ri.a-10)}o(FS,"asciiToBase16");function HS(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(WS)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){let c=FS(e.charCodeAt(s)),f=FS(e.charCodeAt(s+1));if(c===void 0||f===void 0){let p=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+p+'" at index '+s)}n[i]=c*16+f}return n}o(HS,"hexToBytes");function lP(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}o(lP,"utf8ToBytes");function En(e){return typeof e=="string"&&(e=lP(e)),Ni(e),e}o(En,"toBytes");var mo=class{static{o(this,"Hash")}};function $S(e){let t=o(n=>e().update(En(n)).digest(),"hashC"),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}o($S,"createHasher");function GS(e){let t=o((n,i)=>e(i).update(En(n)).digest(),"hashC"),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}o(GS,"createOptHasher");var ZS=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]);d();h();function fP(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),s=BigInt(4294967295),c=Number(r>>i&s),f=Number(r&s),p=n?4:0,v=n?0:4;e.setUint32(t+p,c,n),e.setUint32(t+v,f,n)}o(fP,"setBigUint64");var bf=class extends mo{static{o(this,"HashMD")}constructor(t,r,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(t),this.view=yf(this.buffer)}update(t){Di(this),t=En(t),Ni(t);let{view:r,buffer:n,blockLen:i}=this,s=t.length;for(let c=0;c<s;){let f=Math.min(i-this.pos,s-c);if(f===i){let p=yf(t);for(;i<=s-c;c+=i)this.process(p,c);continue}n.set(t.subarray(c,c+f),this.pos),this.pos+=f,c+=f,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Di(this),gf(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:s}=this,{pos:c}=this;r[c++]=128,Mn(this.buffer.subarray(c)),this.padOffset>i-c&&(this.process(n,0),c=0);for(let T=c;T<i;T++)r[T]=0;fP(n,i-8,BigInt(this.length*8),s),this.process(n,0);let f=yf(t),p=this.outputLen;if(p%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let v=p/4,A=this.get();if(v>A.length)throw new Error("_sha2: outputLen bigger than state");for(let T=0;T<v;T++)f.setUint32(4*T,A[T],s)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:s,destroyed:c,pos:f}=this;return t.destroyed=c,t.finished=s,t.length=i,t.pos=f,i%r&&t.buffer.set(n),t}clone(){return this._cloneInto()}};var $t=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);d();h();var wf=BigInt(4294967295),JS=BigInt(32);function xm(e,t=!1){return t?{h:Number(e&wf),l:Number(e>>JS&wf)}:{h:Number(e>>JS&wf)|0,l:Number(e&wf)|0}}o(xm,"fromBig");function YS(e,t=!1){let r=e.length,n=new Uint32Array(r),i=new Uint32Array(r);for(let s=0;s<r;s++){let{h:c,l:f}=xm(e[s],t);[n[s],i[s]]=[c,f]}return[n,i]}o(YS,"split");var Sm=o((e,t,r)=>e>>>r,"shrSH"),Am=o((e,t,r)=>e<<32-r|t>>>r,"shrSL"),Qn=o((e,t,r)=>e>>>r|t<<32-r,"rotrSH"),Xn=o((e,t,r)=>e<<32-r|t>>>r,"rotrSL"),as=o((e,t,r)=>e<<64-r|t>>>r-32,"rotrBH"),cs=o((e,t,r)=>e>>>r-32|t<<64-r,"rotrBL"),QS=o((e,t)=>t,"rotr32H"),XS=o((e,t)=>e,"rotr32L");function Er(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}o(Er,"add");var Ac=o((e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),"add3L"),Mc=o((e,t,r,n)=>t+r+n+(e/2**32|0)|0,"add3H"),eA=o((e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),"add4L"),tA=o((e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,"add4H"),rA=o((e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),"add5L"),nA=o((e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0,"add5H");var Pt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ae=new Uint32Array(32);function go(e,t,r,n,i,s){let c=i[s],f=i[s+1],p=ae[2*e],v=ae[2*e+1],A=ae[2*t],T=ae[2*t+1],I=ae[2*r],P=ae[2*r+1],B=ae[2*n],K=ae[2*n+1],N=Ac(p,A,c);v=Mc(N,v,T,f),p=N|0,{Dh:K,Dl:B}={Dh:K^v,Dl:B^p},{Dh:K,Dl:B}={Dh:QS(K,B),Dl:XS(K,B)},{h:P,l:I}=Er(P,I,K,B),{Bh:T,Bl:A}={Bh:T^P,Bl:A^I},{Bh:T,Bl:A}={Bh:Qn(T,A,24),Bl:Xn(T,A,24)},ae[2*e]=p,ae[2*e+1]=v,ae[2*t]=A,ae[2*t+1]=T,ae[2*r]=I,ae[2*r+1]=P,ae[2*n]=B,ae[2*n+1]=K}o(go,"G1b");function yo(e,t,r,n,i,s){let c=i[s],f=i[s+1],p=ae[2*e],v=ae[2*e+1],A=ae[2*t],T=ae[2*t+1],I=ae[2*r],P=ae[2*r+1],B=ae[2*n],K=ae[2*n+1],N=Ac(p,A,c);v=Mc(N,v,T,f),p=N|0,{Dh:K,Dl:B}={Dh:K^v,Dl:B^p},{Dh:K,Dl:B}={Dh:Qn(K,B,16),Dl:Xn(K,B,16)},{h:P,l:I}=Er(P,I,K,B),{Bh:T,Bl:A}={Bh:T^P,Bl:A^I},{Bh:T,Bl:A}={Bh:as(T,A,63),Bl:cs(T,A,63)},ae[2*e]=p,ae[2*e+1]=v,ae[2*t]=A,ae[2*t+1]=T,ae[2*r]=I,ae[2*r+1]=P,ae[2*n]=B,ae[2*n+1]=K}o(yo,"G2b");function dP(e,t={},r,n,i){if(ha(r),e<0||e>r)throw new Error("outputLen bigger than keyLen");let{key:s,salt:c,personalization:f}=t;if(s!==void 0&&(s.length<1||s.length>r))throw new Error("key length must be undefined or 1.."+r);if(c!==void 0&&c.length!==n)throw new Error("salt must be undefined or "+n);if(f!==void 0&&f.length!==i)throw new Error("personalization must be undefined or "+i)}o(dP,"checkBlake2Opts");var Mm=class extends mo{static{o(this,"BLAKE2")}constructor(t,r){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,ha(t),ha(r),this.blockLen=t,this.outputLen=r,this.buffer=new Uint8Array(t),this.buffer32=Sc(this.buffer)}update(t){Di(this),t=En(t),Ni(t);let{blockLen:r,buffer:n,buffer32:i}=this,s=t.length,c=t.byteOffset,f=t.buffer;for(let p=0;p<s;){this.pos===r&&(ss(i),this.compress(i,0,!1),ss(i),this.pos=0);let v=Math.min(r-this.pos,s-p),A=c+p;if(v===r&&!(A%4)&&p+v<s){let T=new Uint32Array(f,A,Math.floor((s-p)/4));ss(T);for(let I=0;p+r<s;I+=i.length,p+=r)this.length+=r,this.compress(T,I,!1);ss(T);continue}n.set(t.subarray(p,p+v),this.pos),this.pos+=v,this.length+=v,p+=v}return this}digestInto(t){Di(this),gf(t,this);let{pos:r,buffer32:n}=this;this.finished=!0,Mn(this.buffer.subarray(r)),ss(n),this.compress(n,0,!0),ss(n);let i=Sc(t);this.get().forEach((s,c)=>i[c]=Yn(s))}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){let{buffer:r,length:n,finished:i,destroyed:s,outputLen:c,pos:f}=this;return t||(t=new this.constructor({dkLen:c})),t.set(...this.get()),t.buffer.set(r),t.destroyed=s,t.finished=i,t.length=n,t.pos=f,t.outputLen=c,t}clone(){return this._cloneInto()}},xf=class extends Mm{static{o(this,"BLAKE2b")}constructor(t={}){let r=t.dkLen===void 0?64:t.dkLen;super(128,r),this.v0l=Pt[0]|0,this.v0h=Pt[1]|0,this.v1l=Pt[2]|0,this.v1h=Pt[3]|0,this.v2l=Pt[4]|0,this.v2h=Pt[5]|0,this.v3l=Pt[6]|0,this.v3h=Pt[7]|0,this.v4l=Pt[8]|0,this.v4h=Pt[9]|0,this.v5l=Pt[10]|0,this.v5h=Pt[11]|0,this.v6l=Pt[12]|0,this.v6h=Pt[13]|0,this.v7l=Pt[14]|0,this.v7h=Pt[15]|0,dP(r,t,64,16,16);let{key:n,personalization:i,salt:s}=t,c=0;if(n!==void 0&&(n=En(n),c=n.length),this.v0l^=this.outputLen|c<<8|65536|1<<24,s!==void 0){s=En(s);let f=Sc(s);this.v4l^=Yn(f[0]),this.v4h^=Yn(f[1]),this.v5l^=Yn(f[2]),this.v5h^=Yn(f[3])}if(i!==void 0){i=En(i);let f=Sc(i);this.v6l^=Yn(f[0]),this.v6h^=Yn(f[1]),this.v7l^=Yn(f[2]),this.v7h^=Yn(f[3])}if(n!==void 0){let f=new Uint8Array(this.blockLen);f.set(n),this.update(f)}}get(){let{v0l:t,v0h:r,v1l:n,v1h:i,v2l:s,v2h:c,v3l:f,v3h:p,v4l:v,v4h:A,v5l:T,v5h:I,v6l:P,v6h:B,v7l:K,v7h:N}=this;return[t,r,n,i,s,c,f,p,v,A,T,I,P,B,K,N]}set(t,r,n,i,s,c,f,p,v,A,T,I,P,B,K,N){this.v0l=t|0,this.v0h=r|0,this.v1l=n|0,this.v1h=i|0,this.v2l=s|0,this.v2h=c|0,this.v3l=f|0,this.v3h=p|0,this.v4l=v|0,this.v4h=A|0,this.v5l=T|0,this.v5h=I|0,this.v6l=P|0,this.v6h=B|0,this.v7l=K|0,this.v7h=N|0}compress(t,r,n){this.get().forEach((p,v)=>ae[v]=p),ae.set(Pt,16);let{h:i,l:s}=xm(BigInt(this.length));ae[24]=Pt[8]^s,ae[25]=Pt[9]^i,n&&(ae[28]=~ae[28],ae[29]=~ae[29]);let c=0,f=ZS;for(let p=0;p<12;p++)go(0,4,8,12,t,r+2*f[c++]),yo(0,4,8,12,t,r+2*f[c++]),go(1,5,9,13,t,r+2*f[c++]),yo(1,5,9,13,t,r+2*f[c++]),go(2,6,10,14,t,r+2*f[c++]),yo(2,6,10,14,t,r+2*f[c++]),go(3,7,11,15,t,r+2*f[c++]),yo(3,7,11,15,t,r+2*f[c++]),go(0,5,10,15,t,r+2*f[c++]),yo(0,5,10,15,t,r+2*f[c++]),go(1,6,11,12,t,r+2*f[c++]),yo(1,6,11,12,t,r+2*f[c++]),go(2,7,8,13,t,r+2*f[c++]),yo(2,7,8,13,t,r+2*f[c++]),go(3,4,9,14,t,r+2*f[c++]),yo(3,4,9,14,t,r+2*f[c++]);this.v0l^=ae[0]^ae[16],this.v0h^=ae[1]^ae[17],this.v1l^=ae[2]^ae[18],this.v1h^=ae[3]^ae[19],this.v2l^=ae[4]^ae[20],this.v2h^=ae[5]^ae[21],this.v3l^=ae[6]^ae[22],this.v3h^=ae[7]^ae[23],this.v4l^=ae[8]^ae[24],this.v4h^=ae[9]^ae[25],this.v5l^=ae[10]^ae[26],this.v5h^=ae[11]^ae[27],this.v6l^=ae[12]^ae[28],this.v6h^=ae[13]^ae[29],this.v7l^=ae[14]^ae[30],this.v7h^=ae[15]^ae[31],Mn(ae)}destroy(){this.destroyed=!0,Mn(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},oA=GS(e=>new xf(e));var us=oA;var _c=te(pM(),1);d();h();d();h();d();h();d();h();var vo=32;function sA(e){return hP(e)&&pP(e)===vo}o(sA,"isValidSuiAddress");function ei(e,t=!1){let r=e.toLowerCase();return!t&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(vo*2,"0")}`}o(ei,"normalizeSuiAddress");function hP(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}o(hP,"isHex");function pP(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}o(pP,"getHexByteLength");d();h();var mP=/^vector<(.+)>$/,gP=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,Ec=class e{static{o(this,"TypeTagSerializer")}static parseFromStr(t,r=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};let n=t.match(mP);if(n)return{vector:e.parseFromStr(n[1],r)};let i=t.match(gP);if(i)return{struct:{address:r?ei(i[1]):i[1],module:i[2],name:i[3],typeParams:i[5]===void 0?[]:e.parseStructTypeArgs(i[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,r=!1){return ky(t).map(n=>e.parseFromStr(n,r))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${e.tagToString(t.vector)}>`;if("struct"in t){let r=t.struct,n=r.typeParams.map(e.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}};function yP(e){return C.u64({name:"unsafe_u64",...e}).transform({input:o(t=>t,"input"),output:o(t=>Number(t),"output")})}o(yP,"unsafe_u64");function vP(e){return C.enum("Option",{None:null,Some:e})}o(vP,"optionEnum");var gt=C.bytes(vo).transform({validate:o(e=>{let t=typeof e=="string"?e:ko(e);if(!t||!sA(ei(t)))throw new Error(`Invalid Sui address ${t}`)},"validate"),input:o(e=>typeof e=="string"?Zc(ei(e)):e,"input"),output:o(e=>ei(ko(e)),"output")}),Tr=C.vector(C.u8()).transform({name:"ObjectDigest",input:o(e=>bd(e),"input"),output:o(e=>_y(new Uint8Array(e)),"output"),validate:o(e=>{if(bd(e).length!==32)throw new Error("ObjectDigest must be 32 bytes")},"validate")}),yr=C.struct("SuiObjectRef",{objectId:gt,version:C.u64(),digest:Tr}),Em=C.struct("SharedObjectRef",{objectId:gt,initialSharedVersion:C.u64(),mutable:C.bool()}),Tm=C.enum("ObjectArg",{ImmOrOwnedObject:yr,SharedObject:Em,Receiving:yr}),Im=C.enum("CallArg",{Pure:C.struct("Pure",{bytes:C.vector(C.u8()).transform({input:o(e=>typeof e=="string"?cr(e):e,"input"),output:o(e=>Bt(new Uint8Array(e)),"output")})}),Object:Tm}),_m=C.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:C.lazy(()=>_m),struct:C.lazy(()=>Km),u16:null,u32:null,u256:null}),Sf=_m.transform({input:o(e=>typeof e=="string"?Ec.parseFromStr(e,!0):e,"input"),output:o(e=>Ec.tagToString(e),"output")}),Tn=C.enum("Argument",{GasCoin:null,Input:C.u16(),Result:C.u16(),NestedResult:C.tuple([C.u16(),C.u16()])}),km=C.struct("ProgrammableMoveCall",{package:gt,module:C.string(),function:C.string(),typeArguments:C.vector(Sf),arguments:C.vector(Tn)}),Pm=C.enum("Command",{MoveCall:km,TransferObjects:C.struct("TransferObjects",{objects:C.vector(Tn),address:Tn}),SplitCoins:C.struct("SplitCoins",{coin:Tn,amounts:C.vector(Tn)}),MergeCoins:C.struct("MergeCoins",{destination:Tn,sources:C.vector(Tn)}),Publish:C.struct("Publish",{modules:C.vector(C.vector(C.u8()).transform({input:o(e=>typeof e=="string"?cr(e):e,"input"),output:o(e=>Bt(new Uint8Array(e)),"output")})),dependencies:C.vector(gt)}),MakeMoveVec:C.struct("MakeMoveVec",{type:vP(Sf).transform({input:o(e=>e===null?{None:!0}:{Some:e},"input"),output:o(e=>e.Some??null,"output")}),elements:C.vector(Tn)}),Upgrade:C.struct("Upgrade",{modules:C.vector(C.vector(C.u8()).transform({input:o(e=>typeof e=="string"?cr(e):e,"input"),output:o(e=>Bt(new Uint8Array(e)),"output")})),dependencies:C.vector(gt),package:gt,ticket:Tn})}),Om=C.struct("ProgrammableTransaction",{inputs:C.vector(Im),commands:C.vector(Pm)}),Cm=C.enum("TransactionKind",{ProgrammableTransaction:Om,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),Bm=C.enum("TransactionExpiration",{None:null,Epoch:yP()}),Km=C.struct("StructTag",{address:gt,module:C.string(),name:C.string(),typeParams:C.vector(_m)}),Rm=C.struct("GasData",{payment:C.vector(yr),owner:gt,price:C.u64(),budget:C.u64()}),Nm=C.struct("TransactionDataV1",{kind:Cm,sender:gt,gasData:Rm,expiration:Bm}),Dm=C.enum("TransactionData",{V1:Nm}),Um=C.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Lm=C.enum("IntentVersion",{V0:null}),Vm=C.enum("AppId",{Sui:null}),Fm=C.struct("Intent",{scope:Um,version:Lm,appId:Vm});function zm(e){return C.struct(`IntentMessage<${e.name}>`,{intent:Fm,value:e})}o(zm,"IntentMessage");var jm=C.enum("CompressedSignature",{ED25519:C.fixedArray(64,C.u8()),Secp256k1:C.fixedArray(64,C.u8()),Secp256r1:C.fixedArray(64,C.u8()),ZkLogin:C.vector(C.u8())}),qm=C.enum("PublicKey",{ED25519:C.fixedArray(32,C.u8()),Secp256k1:C.fixedArray(33,C.u8()),Secp256r1:C.fixedArray(33,C.u8()),ZkLogin:C.vector(C.u8())}),Wm=C.struct("MultiSigPkMap",{pubKey:qm,weight:C.u8()}),Hm=C.struct("MultiSigPublicKey",{pk_map:C.vector(Wm),threshold:C.u16()}),aA=C.struct("MultiSig",{sigs:C.vector(jm),bitmap:C.u16(),multisig_pk:Hm}),bP=C.vector(C.u8()).transform({input:o(e=>typeof e=="string"?cr(e):e,"input"),output:o(e=>Bt(new Uint8Array(e)),"output")}),$m=C.struct("SenderSignedTransaction",{intentMessage:zm(Dm),txSignatures:C.vector(bP)}),cA=C.vector($m,{name:"SenderSignedData"});d();h();var wP=C.enum("PackageUpgradeError",{UnableToFetchPackage:C.struct("UnableToFetchPackage",{packageId:gt}),NotAPackage:C.struct("NotAPackage",{objectId:gt}),IncompatibleUpgrade:null,DigestDoesNotMatch:C.struct("DigestDoesNotMatch",{digest:C.vector(C.u8())}),UnknownUpgradePolicy:C.struct("UnknownUpgradePolicy",{policy:C.u8()}),PackageIDDoesNotMatch:C.struct("PackageIDDoesNotMatch",{packageId:gt,ticketId:gt})}),xP=C.struct("ModuleId",{address:gt,name:C.string()}),uA=C.struct("MoveLocation",{module:xP,function:C.u16(),instruction:C.u16(),functionName:C.option(C.string())}),SP=C.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:C.struct("IndexOutOfBounds",{idx:C.u16()}),SecondaryIndexOutOfBounds:C.struct("SecondaryIndexOutOfBounds",{resultIdx:C.u16(),secondaryIdx:C.u16()}),InvalidResultArity:C.struct("InvalidResultArity",{resultIdx:C.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),AP=C.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),MP=C.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:C.struct("MoveObjectTooBig",{objectSize:C.u64(),maxObjectSize:C.u64()}),MovePackageTooBig:C.struct("MovePackageTooBig",{objectSize:C.u64(),maxObjectSize:C.u64()}),CircularObjectOwnership:C.struct("CircularObjectOwnership",{object:gt}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:C.option(uA),MoveAbort:C.tuple([uA,C.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:C.struct("CommandArgumentError",{argIdx:C.u16(),kind:SP}),TypeArgumentError:C.struct("TypeArgumentError",{argumentIdx:C.u16(),kind:AP}),UnusedValueWithoutDrop:C.struct("UnusedValueWithoutDrop",{resultIdx:C.u16(),secondaryIdx:C.u16()}),InvalidPublicFunctionReturnType:C.struct("InvalidPublicFunctionReturnType",{idx:C.u16()}),InvalidTransferObject:null,EffectsTooLarge:C.struct("EffectsTooLarge",{currentSize:C.u64(),maxSize:C.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:C.struct("PackageUpgradeError",{upgradeError:wP}),WrittenObjectsTooLarge:C.struct("WrittenObjectsTooLarge",{currentSize:C.u64(),maxSize:C.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:C.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:C.vector(gt)}),AddressDeniedForCoin:C.struct("AddressDeniedForCoin",{address:gt,coinType:C.string()}),CoinTypeGlobalPause:C.struct("CoinTypeGlobalPause",{coinType:C.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),lA=C.enum("ExecutionStatus",{Success:null,Failed:C.struct("ExecutionFailed",{error:MP,command:C.option(C.u64())})}),fA=C.struct("GasCostSummary",{computationCost:C.u64(),storageCost:C.u64(),storageRebate:C.u64(),nonRefundableStorageFee:C.u64()}),pa=C.enum("Owner",{AddressOwner:gt,ObjectOwner:gt,Shared:C.struct("Shared",{initialSharedVersion:C.u64()}),Immutable:null}),EP=C.struct("TransactionEffectsV1",{status:lA,executedEpoch:C.u64(),gasUsed:fA,modifiedAtVersions:C.vector(C.tuple([gt,C.u64()])),sharedObjects:C.vector(yr),transactionDigest:Tr,created:C.vector(C.tuple([yr,pa])),mutated:C.vector(C.tuple([yr,pa])),unwrapped:C.vector(C.tuple([yr,pa])),deleted:C.vector(yr),unwrappedThenDeleted:C.vector(yr),wrapped:C.vector(yr),gasObject:C.tuple([yr,pa]),eventsDigest:C.option(Tr),dependencies:C.vector(Tr)}),Gm=C.tuple([C.u64(),Tr]),TP=C.enum("ObjectIn",{NotExist:null,Exist:C.tuple([Gm,pa])}),IP=C.enum("ObjectOut",{NotExist:null,ObjectWrite:C.tuple([Tr,pa]),PackageWrite:Gm}),_P=C.enum("IDOperation",{None:null,Created:null,Deleted:null}),kP=C.struct("EffectsObjectChange",{inputState:TP,outputState:IP,idOperation:_P}),PP=C.enum("UnchangedSharedKind",{ReadOnlyRoot:Gm,MutateDeleted:C.u64(),ReadDeleted:C.u64(),Cancelled:C.u64(),PerEpochConfig:null}),OP=C.struct("TransactionEffectsV2",{status:lA,executedEpoch:C.u64(),gasUsed:fA,transactionDigest:Tr,gasObjectIndex:C.option(C.u32()),eventsDigest:C.option(Tr),dependencies:C.vector(Tr),lamportVersion:C.u64(),changedObjects:C.vector(C.tuple([gt,kP])),unchangedSharedObjects:C.vector(C.tuple([gt,PP])),auxDataDigest:C.option(Tr)}),dA=C.enum("TransactionEffects",{V1:EP,V2:OP});var Ui={...C,U8:C.u8(),U16:C.u16(),U32:C.u32(),U64:C.u64(),U128:C.u128(),U256:C.u256(),ULEB128:C.uleb128(),Bool:C.bool(),String:C.string(),Address:gt,AppId:Vm,Argument:Tn,CallArg:Im,CompressedSignature:jm,GasData:Rm,Intent:Fm,IntentMessage:zm,IntentScope:Um,IntentVersion:Lm,MultiSig:aA,MultiSigPkMap:Wm,MultiSigPublicKey:Hm,ObjectArg:Tm,ObjectDigest:Tr,ProgrammableMoveCall:km,ProgrammableTransaction:Om,PublicKey:qm,SenderSignedData:cA,SenderSignedTransaction:$m,SharedObjectRef:Em,StructTag:Km,SuiObjectRef:yr,Command:Pm,TransactionData:Dm,TransactionDataV1:Nm,TransactionExpiration:Bm,TransactionKind:Cm,TypeTag:Sf,TransactionEffects:dA};function Af(e,t){return Ui.IntentMessage(Ui.fixedArray(t.length,Ui.u8())).serialize({intent:{scope:{[e]:!0},version:{V0:!0},appId:{Sui:!0}},value:t}).toBytes()}o(Af,"messageWithIntent");d();h();var Li={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5},hA={ED25519:32,Secp256k1:33,Secp256r1:33},Mf={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin"};d();h();d();h();d();h();function Zm(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}o(Zm,"bytesEqual");var ma=class{static{o(this,"PublicKey")}equals(t){return Zm(this.toRawBytes(),t.toRawBytes())}toBase64(){return Bt(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){let t=this.toSuiBytes();return Bt(t)}verifyWithIntent(t,r,n){let i=Af(n,t),s=us(i,{dkLen:32});return this.verify(s,r)}verifyPersonalMessage(t,r){return this.verifyWithIntent(Ui.vector(Ui.u8()).serialize(t).toBytes(),r,"PersonalMessage")}verifyTransaction(t,r){return this.verifyWithIntent(t,r,"TransactionData")}toSuiBytes(){let t=this.toRawBytes(),r=new Uint8Array(t.length+1);return r.set([this.flag()]),r.set(t,1),r}toSuiAddress(){return ei(vf(us(this.toSuiBytes(),{dkLen:32})).slice(0,vo*2))}};d();h();var pA=o(e=>{throw TypeError(e)},"__typeError"),mA=o((e,t,r)=>t.has(e)||pA("Cannot "+r),"__accessCheck"),Ef=o((e,t,r)=>(mA(e,t,"read from private field"),r?r.call(e):t.get(e)),"__privateGet"),Tf=o((e,t,r)=>t.has(e)?pA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),"__privateAdd"),If=o((e,t,r,n)=>(mA(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),"__privateSet"),_f,kf,Pf,Of,Jm=class extends Error{static{o(this,"SuiGraphQLRequestError")}},Cf=class{static{o(this,"SuiGraphQLClient")}constructor({url:t,fetch:r=fetch,headers:n={},queries:i={}}){Tf(this,_f),Tf(this,kf),Tf(this,Pf),Tf(this,Of),If(this,_f,t),If(this,kf,i),If(this,Pf,n),If(this,Of,(...s)=>r(...s))}async query(t){let r=await Ef(this,Of).call(this,Ef(this,_f),{method:"POST",headers:{"Content-Type":"application/json",...Ef(this,Pf)},body:JSON.stringify({query:typeof t.query=="string"?String(t.query):Py(t.query),variables:t.variables,extensions:t.extensions,operationName:t.operationName})});if(!r.ok)throw new Jm(`GraphQL request failed: ${r.statusText} (${r.status})`);return await r.json()}async execute(t,r){return this.query({...r,query:Ef(this,kf)[t]})}};_f=new WeakMap;kf=new WeakMap;Pf=new WeakMap;Of=new WeakMap;d();h();var gA=Oy();d();h();function CP(e){if(e.length!==1)throw new Error("Invalid base64Url character: "+e);let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(e);if(r===-1)throw new Error("Invalid base64Url character: "+e);let n=r.toString(2).padStart(6,"0");return Array.from(n).map(Number)}o(CP,"base64UrlCharTo6Bits");function BP(e){let t=[];for(let r=0;r<e.length;r++){let n=e.charAt(r),i=CP(n);t=t.concat(i)}return t}o(BP,"base64UrlStringToBitVector");function KP(e,t){if(e.length<2)throw new Error(`Input (s = ${e}) is not tightly packed because s.length < 2`);let r=BP(e),n=t%4;if(n!==0)if(n===1)r=r.slice(2);else if(n===2)r=r.slice(4);else throw new Error(`Input (s = ${e}) is not tightly packed because i%4 = 3 (i = ${t}))`);let i=(t+e.length-1)%4;if(i!==3)if(i===2)r=r.slice(0,r.length-2);else if(i===1)r=r.slice(0,r.length-4);else throw new Error(`Input (s = ${e}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${t}))`);if(r.length%8!==0)throw new Error("We should never reach here...");let s=new Uint8Array(Math.floor(r.length/8)),c=0;for(let f=0;f<r.length;f+=8){let p=r.slice(f,f+8),v=parseInt(p.join(""),2);s[c++]=v}return new TextDecoder().decode(s)}o(KP,"decodeBase64URL");function RP(e){if(!(e.slice(-1)==="}"||e.slice(-1)===","))throw new Error("Invalid claim");let t=JSON.parse("{"+e.slice(0,-1)+"}");if(Object.keys(t).length!==1)throw new Error("Invalid claim");let r=Object.keys(t)[0];return[r,t[r]]}o(RP,"verifyExtendedClaim");function yA(e,t){let r=KP(e.value,e.indexMod4),[n,i]=RP(r);if(n!==t)throw new Error(`Invalid field name: found ${n} expected ${t}`);return i}o(yA,"extractClaimValue");d();h();d();h();var vA=C.struct("ZkLoginSignature",{inputs:C.struct("ZkLoginSignatureInputs",{proofPoints:C.struct("ZkLoginSignatureInputsProofPoints",{a:C.vector(C.string()),b:C.vector(C.vector(C.string())),c:C.vector(C.string())}),issBase64Details:C.struct("ZkLoginSignatureInputsClaim",{value:C.string(),indexMod4:C.u8()}),headerBase64:C.string(),addressSeed:C.string()}),maxEpoch:C.u64(),userSignature:C.vector(C.u8())});function bA(e){return vA.parse(typeof e=="string"?cr(e):e)}o(bA,"parseZkLoginSignature");d();h();function NP(e){for(let t=0;t<e.length;t++)if(e[t]!==0)return t;return-1}o(NP,"findFirstNonZeroIndex");function Bf(e,t){let r=e.toString(16);return HS(r.padStart(t*2,"0").slice(-t*2))}o(Bf,"toPaddedBigEndianBytes");function Ym(e,t){let r=Bf(e,t),n=NP(r);return n===-1?new Uint8Array([0]):r.slice(n)}o(Ym,"toBigEndianBytes");var SA=o(e=>{throw TypeError(e)},"__typeError"),AA=o((e,t,r)=>t.has(e)||SA("Cannot "+r),"__accessCheck"),Vi=o((e,t,r)=>(AA(e,t,"read from private field"),r?r.call(e):t.get(e)),"__privateGet"),Qm=o((e,t,r)=>t.has(e)?SA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),"__privateAdd"),ga=o((e,t,r,n)=>(AA(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),"__privateSet"),In,Tc,Ic,DP=class Xm extends ma{static{o(this,"_ZkLoginPublicIdentifier")}constructor(t,{client:r}={}){super(),Qm(this,In),Qm(this,Tc),Qm(this,Ic),ga(this,Tc,r),typeof t=="string"?ga(this,In,cr(t)):t instanceof Uint8Array?ga(this,In,t):ga(this,In,Uint8Array.from(t)),ga(this,Ic,Vi(this,In).length!==Vi(this,In)[0]+1+32),Vi(this,Ic)&&ga(this,In,wA(Vi(this,In)))}equals(t){return super.equals(t)}toSuiAddress(){if(Vi(this,Ic)){let t=wA(Vi(this,In),!0),r=new Uint8Array(t.length+1);return r[0]=this.flag(),r.set(t,1),ei(vf(us(r,{dkLen:32})).slice(0,vo*2))}return super.toSuiAddress()}toRawBytes(){return Vi(this,In)}flag(){return Li.ZkLogin}async verify(t,r){throw Error("does not support")}verifyPersonalMessage(t,r){let n=Kf(r),i=new Xm(n.publicKey).toSuiAddress();return xA({address:i,bytes:Bt(t),signature:n.serializedSignature,intentScope:"PERSONAL_MESSAGE",client:Vi(this,Tc)})}verifyTransaction(t,r){let n=Kf(r),i=new Xm(n.publicKey).toSuiAddress();return xA({address:i,bytes:Bt(t),signature:n.serializedSignature,intentScope:"TRANSACTION_DATA",client:Vi(this,Tc)})}};In=new WeakMap;Tc=new WeakMap;Ic=new WeakMap;var UP=DP;function LP(e,t,r){let n=r?.legacyAddress?Ym(e,32):Bf(e,32),i=new TextEncoder().encode(t),s=new Uint8Array(1+i.length+n.length);return s.set([i.length],0),s.set(i,1),s.set(n,1+i.length),new UP(s,r)}o(LP,"toZkLoginPublicIdentifier");var VP=gA(`
	query Zklogin(
		$bytes: Base64!
		$signature: Base64!
		$intentScope: ZkLoginIntentScope!
		$author: SuiAddress!
	) {
		verifyZkloginSignature(
			bytes: $bytes
			signature: $signature
			intentScope: $intentScope
			author: $author
		) {
			success
			errors
		}
	}
`);function wA(e,t=!1){let r=e[0]+1,n=BigInt(`0x${ko(e.slice(r))}`),i=t?Ym(n,32):Bf(n,32),s=new Uint8Array(r+i.length);return s.set(e.slice(0,r),0),s.set(i,r),s}o(wA,"normalizeZkLoginPublicKeyBytes");async function xA({address:e,bytes:t,signature:r,intentScope:n,client:i=new Cf({url:"https://sui-mainnet.mystenlabs.com/graphql"})}){let s=await i.query({query:VP,variables:{bytes:t,signature:r,intentScope:n,author:e}});return s.data?.verifyZkloginSignature.success===!0&&s.data?.verifyZkloginSignature.errors.length===0}o(xA,"graphqlVerifyZkLoginSignature");function Kf(e){let t=typeof e=="string"?cr(e):e;if(t[0]!==Li.ZkLogin)throw new Error("Invalid signature scheme");let r=t.slice(1),{inputs:n,maxEpoch:i,userSignature:s}=bA(r),{issBase64Details:c,addressSeed:f}=n,p=yA(c,"iss"),v=LP(BigInt(f),p);return{serializedSignature:Bt(t),signatureScheme:"ZkLogin",zkLogin:{inputs:n,maxEpoch:i,userSignature:s,iss:p,addressSeed:BigInt(f)},signature:t,publicKey:v.toRawBytes()}}o(Kf,"parseSerializedZkLoginSignature");function MA({signature:e,signatureScheme:t,publicKey:r}){if(!r)throw new Error("`publicKey` is required");let n=r.toRawBytes(),i=new Uint8Array(1+e.length+n.length);return i.set([Li[t]]),i.set(e,1),i.set(n,1+e.length),Bt(i)}o(MA,"toSerializedSignature");function EA(e){let t=cr(e),r=Mf[t[0]];switch(r){case"MultiSig":let n=Ui.MultiSig.parse(t.slice(1));return{serializedSignature:e,signatureScheme:r,multisig:n,bytes:t};case"ZkLogin":return Kf(e);case"ED25519":case"Secp256k1":case"Secp256r1":let i=hA[r],s=t.slice(1,t.length-i),c=t.slice(1+s.length);return{serializedSignature:e,signatureScheme:r,signature:s,publicKey:c,bytes:t};default:throw new Error("Unsupported signature scheme")}}o(EA,"parseSerializedSignature");var kc=32;var TA="suiprivkey",eg=class{static{o(this,"Signer")}async signWithIntent(t,r){let n=Af(r,t),i=us(n,{dkLen:32});return{signature:MA({signature:await this.sign(i),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:Bt(t)}}async signTransaction(t){return this.signWithIntent(t,"TransactionData")}async signPersonalMessage(t){let{signature:r}=await this.signWithIntent(C.vector(C.u8()).serialize(t).toBytes(),"PersonalMessage");return{bytes:Bt(t),signature:r}}toSuiAddress(){return this.getPublicKey().toSuiAddress()}},Rf=class extends eg{static{o(this,"Keypair")}};function IA(e){let{prefix:t,words:r}=_c.bech32.decode(e);if(t!==TA)throw new Error("invalid private key prefix");let n=new Uint8Array(_c.bech32.fromWords(r)),i=n.slice(1);return{schema:Mf[n[0]],secretKey:i}}o(IA,"decodeSuiPrivateKey");function _A(e,t){if(e.length!==kc)throw new Error("Invalid bytes length");let r=Li[t],n=new Uint8Array(e.length+1);return n.set([r]),n.set(e,1),_c.bech32.encode(TA,_c.bech32.toWords(n))}o(_A,"encodeSuiPrivateKey");d();h();function tg(e){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(e)}o(tg,"isValidHardenedPath");function FP(e){return Cy(e,"")}o(FP,"mnemonicToSeed");function kA(e){return ko(FP(e))}o(kA,"mnemonicToSeedHex");d();h();d();h();var Nf=class extends mo{static{o(this,"HMAC")}constructor(t,r){super(),this.finished=!1,this.destroyed=!1,zS(t);let n=En(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?t.create().update(n).digest():n);for(let c=0;c<s.length;c++)s[c]^=54;this.iHash.update(s),this.oHash=t.create();for(let c=0;c<s.length;c++)s[c]^=106;this.oHash.update(s),Mn(s)}update(t){return Di(this),this.iHash.update(t),this}digestInto(t){Di(this),Ni(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:c,outputLen:f}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=c,t.outputLen=f,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Df=o((e,t,r)=>new Nf(e,t).update(r).digest(),"hmac");Df.create=(e,t)=>new Nf(e,t);d();h();d();h();var PA=YS(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),zP=PA[0],jP=PA[1],bo=new Uint32Array(80),wo=new Uint32Array(80),Uf=class extends bf{static{o(this,"SHA512")}constructor(t=64){super(128,t,16,!1),this.Ah=$t[0]|0,this.Al=$t[1]|0,this.Bh=$t[2]|0,this.Bl=$t[3]|0,this.Ch=$t[4]|0,this.Cl=$t[5]|0,this.Dh=$t[6]|0,this.Dl=$t[7]|0,this.Eh=$t[8]|0,this.El=$t[9]|0,this.Fh=$t[10]|0,this.Fl=$t[11]|0,this.Gh=$t[12]|0,this.Gl=$t[13]|0,this.Hh=$t[14]|0,this.Hl=$t[15]|0}get(){let{Ah:t,Al:r,Bh:n,Bl:i,Ch:s,Cl:c,Dh:f,Dl:p,Eh:v,El:A,Fh:T,Fl:I,Gh:P,Gl:B,Hh:K,Hl:N}=this;return[t,r,n,i,s,c,f,p,v,A,T,I,P,B,K,N]}set(t,r,n,i,s,c,f,p,v,A,T,I,P,B,K,N){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=c|0,this.Dh=f|0,this.Dl=p|0,this.Eh=v|0,this.El=A|0,this.Fh=T|0,this.Fl=I|0,this.Gh=P|0,this.Gl=B|0,this.Hh=K|0,this.Hl=N|0}process(t,r){for(let L=0;L<16;L++,r+=4)bo[L]=t.getUint32(r),wo[L]=t.getUint32(r+=4);for(let L=16;L<80;L++){let ne=bo[L-15]|0,ie=wo[L-15]|0,re=Qn(ne,ie,1)^Qn(ne,ie,8)^Sm(ne,ie,7),ee=Xn(ne,ie,1)^Xn(ne,ie,8)^Am(ne,ie,7),J=bo[L-2]|0,fe=wo[L-2]|0,S=Qn(J,fe,19)^as(J,fe,61)^Sm(J,fe,6),a=Xn(J,fe,19)^cs(J,fe,61)^Am(J,fe,6),l=eA(ee,a,wo[L-7],wo[L-16]),g=tA(l,re,S,bo[L-7],bo[L-16]);bo[L]=g|0,wo[L]=l|0}let{Ah:n,Al:i,Bh:s,Bl:c,Ch:f,Cl:p,Dh:v,Dl:A,Eh:T,El:I,Fh:P,Fl:B,Gh:K,Gl:N,Hh:D,Hl:Z}=this;for(let L=0;L<80;L++){let ne=Qn(T,I,14)^Qn(T,I,18)^as(T,I,41),ie=Xn(T,I,14)^Xn(T,I,18)^cs(T,I,41),re=T&P^~T&K,ee=I&B^~I&N,J=rA(Z,ie,ee,jP[L],wo[L]),fe=nA(J,D,ne,re,zP[L],bo[L]),S=J|0,a=Qn(n,i,28)^as(n,i,34)^as(n,i,39),l=Xn(n,i,28)^cs(n,i,34)^cs(n,i,39),g=n&s^n&f^s&f,y=i&c^i&p^c&p;D=K|0,Z=N|0,K=P|0,N=B|0,P=T|0,B=I|0,{h:T,l:I}=Er(v|0,A|0,fe|0,S|0),v=f|0,A=p|0,f=s|0,p=c|0,s=n|0,c=i|0;let b=Ac(S,l,y);n=Mc(b,fe,a,g),i=b|0}({h:n,l:i}=Er(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:c}=Er(this.Bh|0,this.Bl|0,s|0,c|0),{h:f,l:p}=Er(this.Ch|0,this.Cl|0,f|0,p|0),{h:v,l:A}=Er(this.Dh|0,this.Dl|0,v|0,A|0),{h:T,l:I}=Er(this.Eh|0,this.El|0,T|0,I|0),{h:P,l:B}=Er(this.Fh|0,this.Fl|0,P|0,B|0),{h:K,l:N}=Er(this.Gh|0,this.Gl|0,K|0,N|0),{h:D,l:Z}=Er(this.Hh|0,this.Hl|0,D|0,Z|0),this.set(n,i,s,c,f,p,v,A,T,I,P,B,K,N,D,Z)}roundClean(){Mn(bo,wo)}destroy(){Mn(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var OA=$S(()=>new Uf);var rg=OA;var qP=te(qi(),1);var WP="ed25519 seed",HP=2147483648,$P=new RegExp("^m(\\/[0-9]+')+$"),CA=o(e=>e.replace("'",""),"replaceDerive"),GP=o(e=>{let r=Df.create(rg,WP).update(Zc(e)).digest(),n=r.slice(0,32),i=r.slice(32);return{key:n,chainCode:i}},"getMasterKeyFromSeed"),ZP=o(({key:e,chainCode:t},r)=>{let n=new ArrayBuffer(4);new DataView(n).setUint32(0,r);let s=new Uint8Array(1+e.length+n.byteLength);s.set(new Uint8Array(1).fill(0)),s.set(e,1),s.set(new Uint8Array(n,0,n.byteLength),e.length+1);let c=Df.create(rg,t).update(s).digest(),f=c.slice(0,32),p=c.slice(32);return{key:f,chainCode:p}},"CKDPriv");var JP=o(e=>$P.test(e)?!e.split("/").slice(1).map(CA).some(isNaN):!1,"isValidPath"),ng=o((e,t,r=HP)=>{if(!JP(e))throw new Error("Invalid derivation path");let{key:n,chainCode:i}=GP(t);return e.split("/").slice(1).map(CA).map(c=>parseInt(c,10)).reduce((c,f)=>ZP(c,f+r),{key:n,chainCode:i})},"derivePath");d();h();var BA=te(qi(),1);var ig=32,Pc=class extends ma{static{o(this,"Ed25519PublicKey")}constructor(t){if(super(),typeof t=="string"?this.data=cr(t):t instanceof Uint8Array?this.data=t:this.data=Uint8Array.from(t),this.data.length!==ig)throw new Error(`Invalid public key input. Expected ${ig} bytes, got ${this.data.length}`)}equals(t){return super.equals(t)}toRawBytes(){return this.data}flag(){return Li.ED25519}async verify(t,r){let n;if(typeof r=="string"){let i=EA(r);if(i.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!Zm(this.toRawBytes(),i.publicKey))throw new Error("Signature does not match public key");n=i.signature}else n=r;return BA.default.sign.detached.verify(t,n,this.toRawBytes())}};Pc.SIZE=ig;var og="m/44'/784'/0'/0'/0'",Oc=class e extends Rf{static{o(this,"Ed25519Keypair")}constructor(t){super(),t?this.keypair=t:this.keypair=ls.default.sign.keyPair()}getKeyScheme(){return"ED25519"}static generate(){return new e(ls.default.sign.keyPair())}static fromSecretKey(t,r){if(typeof t=="string"){let s=IA(t);if(s.schema!=="ED25519")throw new Error(`Expected a ED25519 keypair, got ${s.schema}`);return this.fromSecretKey(s.secretKey,r)}let n=t.length;if(n!==kc)throw new Error(`Wrong secretKey size. Expected ${kc} bytes, got ${n}.`);let i=ls.default.sign.keyPair.fromSeed(t);if(!r||!r.skipValidation){let c=new TextEncoder().encode("sui validation"),f=ls.default.sign.detached(c,i.secretKey);if(!ls.default.sign.detached.verify(c,f,i.publicKey))throw new Error("provided secretKey is invalid")}return new e(i)}getPublicKey(){return new Pc(this.keypair.publicKey)}getSecretKey(){return _A(this.keypair.secretKey.slice(0,kc),this.getKeyScheme())}async sign(t){return ls.default.sign.detached(t,this.keypair.secretKey)}static deriveKeypair(t,r){if(r==null&&(r=og),!tg(r))throw new Error("Invalid derivation path");let{key:n}=ng(r,kA(t));return e.fromSecretKey(n)}static deriveKeypairFromSeed(t,r){if(r==null&&(r=og),!tg(r))throw new Error("Invalid derivation path");let{key:n}=ng(r,t);return e.fromSecretKey(n)}};var KA=o(()=>({type:At.KeyPair,sign:o(async(e,t)=>{let r=Oc.fromSecretKey(e.privateKey);try{let n;switch(t.signingType){case"personalMessage":{n=await r.signPersonalMessage(t.message);break}case"transaction":{n=await r.signTransaction(t.transaction);break}}return Promise.resolve({status:"success",signature:n.signature})}catch(n){return console.error(n),Promise.resolve(ye(ue.InvalidMessageEncoding))}},"sign")}),"createSuiKeyPairSigner");d();h();var Lf=class{static{o(this,"MultiChainVaultSigner")}#e;constructor(t){this.#e=t}async signWithKeypair(t,r){if("isJWT"in r)return this.#e.keyPair.JWT.sign(t,r);if("isKMSPKIAuthenticator"in r)return this.#e.keyPair.KMSPKIAuthenticator.sign(t,r);if("isAgentWallet"in r)return this.#e.keyPair.Agent.sign(t,r);if("isCash"in r)return this.#e.keyPair.Cash.sign(t,r);let n=r.chainType;switch(n){case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:return this.#e.keyPair[n].sign(t,r);case k.EVM:return this.#e.keyPair[n].sign(t,r);case k.Solana:return this.#e.keyPair[n].sign(t,r);case k.Sui:return this.#e.keyPair[n].sign(t,r)}}async signWithHardware(t,r,n){return this.#e.ledger.sign(t,r,n)}async signWithSolanaSeedVault(t,r,n){return this.#e.seedVault.sign(t,r,n)}async signWithKMS(t,r,n){return this.#e.kms.sign(t,r,n)}};d();h();var RA=o(e=>hm.safeParse(e).success,"isVaultSignerParams");async function Vf(e,t,r){let n=t.chains[r]?.pathType;if(!n)return ye(ue.InvalidAddressType,`Seed Account does not contain a chain address for the chain type ${r}.`);let i=await Ut(e,t.seedIdentifier);return e.keypairGenerator.generateKeypairFromSeed(i,t.derivationIndex,n)}o(Vf,"deriveKeyPairFromAddressType");async function NA(e,t,r){let n=await lt(),i=n.find(s=>s.identifier===t);if(!i)return ye(ue.InvalidAccountId,`Vault (${n.length} account(s) found) does not contain an account for the given identifier: ${t}`);if("isAgentWallet"in r)switch(i.type){case O.KMSVault:case O.Seedless:case O.Seed:case O.PrivateKey:{let s=await Jl(e,i.identifier);return e.vaultSigner.signWithKeypair(s,r)}default:return ye(ue.UnsupportedOperation,"Invalid signingAccount type provided for paramType")}if("isJWT"in r)switch(i.type){case O.Seedless:case O.Seed:case O.PrivateKey:{let s=await ao(e,i);return e.vaultSigner.signWithKeypair(s,r)}default:return ye(ue.UnsupportedOperation,"Invalid signingAccount type provided for paramType")}if("isKMSPKIAuthenticator"in r)return ye(ue.UnsupportedOperation,"Signing with the KMS PKI authenticator key is not supported through the external vault interface, as this key is reserved for internal authentication purposes.");if("isCash"in r){if("isCashKMS"in r){let c=sc(e,`cash:${r.cashAccountAddress}`),f=await Hx(c);return e.vaultSigner.signWithKMS(c,{organizationId:f.organizationId,walletId:f.walletId,derivationPath:f.account.derivationPath},r.data)}let s=await $x(e);return e.vaultSigner.signWithKeypair(s,r)}switch(i.type){case O.KMSVault:{await ac(e,i.kms.walletId,i.kms.tag);let s=i.chains[r.chainType],c=sc(e,Ur(i.kms.walletId,i.kms.tag)),{organizationId:f,walletId:p}=i.kms;if(!s)return ye(ue.InvalidAddressType,`KMSVault account does not have a derivation path for chain type ${r.chainType}`);let v=yi({pathType:s.pathType,index:i.derivationIndex});return e.vaultSigner.signWithKMS(c,{organizationId:f,walletId:p,derivationPath:v},r)}case O.Seedless:case O.Seed:{switch(r.chainType){case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{let{enabledAddressTypes:s}=await e.fetchChainAvailability(),c={},f=Object.keys(i.chains).filter(p=>ka.safeParse(p).success).filter(p=>s.includes(p));for(let p of f){let v=await Vf(e,i,p);if("status"in v&&v.status==="error")return v;c[p]=v}return e.vaultSigner.signWithKeypair(c,r)}case k.EVM:{let s=await Vf(e,i,r.chainType);return"status"in s&&s.status==="error"?s:e.vaultSigner.signWithKeypair(s,r)}case k.Solana:{let s=await Vf(e,i,r.chainType);return"status"in s&&s.status==="error"?s:e.vaultSigner.signWithKeypair(s,r)}case k.Sui:{let s=await Vf(e,i,r.chainType);return"status"in s&&s.status==="error"?s:e.vaultSigner.signWithKeypair(s,r)}}break}case O.PrivateKey:{let s=await so(e,i.privateKeyIdentifier);if(s.chainType!==r.chainType)return ye(ue.InvalidAddressType,`Private Key account from accountID is a different chain type from params. Expected ${s.chainType}, got ${r.chainType}`);let c=e.keypairGenerator.generateKeypairFromPrivateKey(Br.from(s.privateKey),r.chainType);switch(r.chainType){case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:return e.vaultSigner.signWithKeypair({[r.chainType]:c},r);case k.EVM:return e.vaultSigner.signWithKeypair(c,r);case k.Solana:return e.vaultSigner.signWithKeypair(c,r);case k.Sui:return e.vaultSigner.signWithKeypair(c,r)}break}case O.Ledger:{let s=i.chains[r.chainType];if(!s)return ye(ue.InvalidAddressType,`Ledger Account does not contain a chain address for the chain type ${r.chainType}.`);let c=My.safeParse({pathType:s.pathType,index:i.derivationIndex});if(!c.success)return ye(ue.InvalidDerivationPath,"Unsupported Derivation Path. Ledger account derivation path type is incompatible with ChainType in signing params.");let f=yi(c.data);return e.vaultSigner.signWithHardware(t,f,r)}case O.SeedVault:{let{authToken:s,derivationPath:c,chainType:f}=i;return f!==r.chainType?ye(ue.InvalidAddressType,`Solana Seed Vault account from accountID is a different chain type from params. Expected ${f}, got ${r.chainType}`):e.vaultSigner.signWithSolanaSeedVault(s,c,r)}case O.ReadOnly:return ye(ue.UnsupportedOperation,"Read Only Accounts cannot sign transactions.");default:(s=>{throw new Error("invalid account type")})(i)}}o(NA,"sign");d();h();function DA(e){switch(e.type){case O.Seed:return Cc(e);case O.Seedless:return Bc(e);case O.PrivateKey:return ag(e);case O.Ledger:return sg(e);case O.SeedVault:return cg(e);case O.ReadOnly:return e;case O.KMSVault:return Ff(e)}}o(DA,"toExternalVaultAccount");function Ff(e){let{chains:t,version:r,...n}=e,i={};for(let s of Object.keys(t)){let c=t[s];if(!c)continue;let f;switch(c.chainType){case k.Solana:case k.EVM:{let{publicKey:p,...v}=c;f={...v,address:p};break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{let{addresses:p,...v}=c,A=Object.values(Ct).reduce((T,I)=>{let P=p?p[I]:void 0;if(!P)throw new Gi;return{...T,[I]:P}},{});f={...v,addresses:A};break}case k.Sui:{f=c;break}}i[s]=f}return{...n,chains:i}}o(Ff,"toExternalKMSVaultAccount");function sg(e){let{chains:t,version:r,...n}=e,i={};for(let s of Object.keys(t)){let c=t[s];if(!c)continue;let f;switch(c.chainType){case k.Solana:case k.EVM:{let{publicKey:p,...v}=c;f={...v,address:p};break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{let{addresses:p,...v}=c,A=Object.values(Ct).reduce((T,I)=>{let P=p?p[I]:void 0;if(!P)throw new Gi;return{...T,[I]:P}},{});f={...v,addresses:A};break}case k.Sui:{f=c;break}}i[s]=f}return{...n,chains:i}}o(sg,"toExternalVaultLedgerAccount");function ag(e){switch(e.chainType){case k.Solana:case k.EVM:{let{publicKey:t,version:r,...n}=e;return{...n,address:t}}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{let{addresses:t,version:r,...n}=e,i=Object.values(Ct).reduce((s,c)=>{let f=t?t[c]:void 0;if(!f)throw new Gi;return{...s,[c]:f}},{});return{...n,addresses:i}}case k.Sui:return e}}o(ag,"toExternalVaultPrivateKeyAccount");function cg(e){let{publicKey:t,version:r,...n}=e;return{...n,address:t}}o(cg,"toExternalSolanaSeedVaultAccount");function Cc(e){let{chains:t,version:r,...n}=e,i={};for(let s of Object.keys(t)){let c=t[s];if(!c)continue;let f;switch(c.chainType){case k.Solana:case k.EVM:{let{publicKey:p,...v}=c;f={...v,address:p};break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{let{addresses:p,...v}=c,A=Object.values(Ct).reduce((T,I)=>{let P=p?p[I]:void 0;if(!P)throw new Gi;return{...T,[I]:P}},{});f={...v,addresses:A};break}case k.Sui:{f=c;break}}i[s]=f}return{...n,chains:i}}o(Cc,"toExternalVaultSeedAccount");function Bc(e){let{chains:t,version:r,...n}=e,i={};for(let s of Object.keys(t)){let c=t[s];if(!c)continue;let f;switch(c.chainType){case k.Solana:case k.EVM:{let{publicKey:p,...v}=c;f={...v,address:p};break}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{let{addresses:p,...v}=c,A=Object.values(Ct).reduce((T,I)=>{let P=p?p[I]:void 0;if(!P)throw new Gi;return{...T,[I]:P}},{});f={...v,addresses:A};break}case k.Sui:f=c}i[s]=f}return{...n,chains:i}}o(Bc,"toExternalVaultSeedlessAccount");d();h();function UA(e){return e.find(t=>t.type===O.Seedless)??e.find(t=>t.type===O.Seed)??e.find(t=>t.type===O.PrivateKey)}o(UA,"selectKMSAuthenticatorSourceAccount");var ti=et(function*(){return(yield lt()).map(DA)}),zf=Ll,jf=Ul;function YP(e){return{addSeedWithDefaultAccount:o((t,r)=>Mx(e,t,r).then(Cc),"addSeedWithDefaultAccount"),addAccountForExistingSeed:o(t=>ix(e,t).then(Cc),"addAccountForExistingSeed"),addSeedWithMultipleAccounts:o((t,r,n,i)=>ql(e,t,r,n,i).then(s=>s.map(Cc)),"addSeedWithMultipleAccounts"),addPrivateKeyAccount:o((t,r,n)=>vx(e,t,r,n).then(ag),"addPrivateKeyAccount"),addLedgerAccounts:o((t,r)=>gx(e,t,r).then(n=>n.map(sg)),"addLedgerAccounts"),addSolanaSeedVaultAccounts:o(t=>Tx(e,t).then(r=>r.map(cg)),"addSolanaSeedVaultAccounts"),addReadonlyAccount:o(t=>wx(e,t),"addReadonlyAccount"),addKMSVaultAccount:o(async({organizationId:t,walletId:r,tag:n,derivationIndex:i,chains:s,apiEnvironment:c})=>Xw(e,{organizationId:t,walletId:r,tag:n,derivationIndex:i,chains:s,apiEnvironment:c}).then(Ff),"addKMSVaultAccount"),upsertKMSVaultChains:o(async({organizationId:t,walletId:r,tag:n,derivationIndex:i,chains:s})=>nx(e,{organizationId:t,walletId:r,tag:n,derivationIndex:i,chains:s}).then(Ff),"upsertKMSVaultChains"),deriveAddresses:o(()=>Kx(e),"deriveAddresses"),removeAccount:o(t=>qx(e,t),"removeAccount"),reorderAccount:o((t,r)=>Wx(e,t,r),"reorderAccount"),exportEntropy:o(t=>Ln(e,t),"exportEntropy"),exportPrivateKey:o((t,r)=>Wl(e,t,r),"exportPrivateKey"),fetchAllAccounts:ti,fetchAllSeedMetas:jf,fetchAllSeedlessMetas:zf,sign:o((t,r)=>NA(e,t,r),"sign"),isExistingSeed:o(t=>Gs(e,t),"isExistingSeed"),checkVaultIntegrity:o(()=>Bx(e),"checkVaultIntegrity"),clearVault:o(()=>qw(e),"clearVault"),addSeedlessWithMultipleAccounts:o((t,r,n)=>jl(e,t,r,n).then(i=>i.map(Bc)),"addSeedlessWithMultipleAccounts"),addSeedlessWithDefaultAccount:o((t,r)=>Ax(e,t,r).then(Bc),"addSeedlessWithDefaultAccount"),addAccountForExistingSeedless:o(t=>xx(e,t).then(Bc),"addAccountForExistingSeedless"),getAuthenticationPublicKey:o(t=>jx(e,t),"getAuthenticationPublicKey"),getAgentAddress:o((t,r)=>zx(e,t,r),"getAgentAddress"),getKMSInstance:o(t=>t===void 0?$w(e):sc(e,t),"getKMSInstance"),canDeriveKMSAuthenticator:o(async()=>{let t=await ti();return!!UA(t)},"canDeriveKMSAuthenticator"),DO_NOT_USE_diagnoseSeedCacheDigests:o(()=>Nx(e),"DO_NOT_USE_diagnoseSeedCacheDigests"),rebuildKMSAuthenticatorMapping:o(async()=>{await Zw(e)},"rebuildKMSAuthenticatorMapping"),updateCashAccountMapping:o(async t=>{await Jw(e,t)},"updateCashAccountMapping")}}o(YP,"createVault");var QP=et(function*(){return[...(yield ti()).reduce(Zt((r,n)=>{switch(n.type){case O.Seed:case O.Seedless:{r.add(n.seedIdentifier);break}case O.PrivateKey:{r.add(n.privateKeyIdentifier);break}case O.Ledger:case O.SeedVault:case O.ReadOnly:case O.KMSVault:break;default:xe(n);break}return r},0),new Set)]});d();h();var XP=o((e,t)=>e.filter(r=>{switch(r.type){case O.Seed:case O.Seedless:return r.seedIdentifier===t;case O.PrivateKey:return r.privateKeyIdentifier===t;case O.Ledger:case O.SeedVault:case O.ReadOnly:case O.KMSVault:return!1;default:xe(r);return}}),"getAccountsForSecretId");d();h();function e4(e){return $i.get(e).networkNameOverride?.(e)??me.getNetworkName(e,!0)}o(e4,"getBadgedNetworkName");d();h();function t4(){return{version:1,setting:{[k.Solana]:Ms,[k.EVM]:Es,[k.Sui]:Td}}}o(t4,"getDefaultNetworkSetting");d();h();var r4=new Set([k.Solana,k.EVM,k.Sui,k.BitcoinNativeSegwit,k.BitcoinTaproot]);async function n4(e=0){let r=(await lr()).enabledAddressTypes.filter(i=>r4.has(i));return tr(r).map(i=>({chainType:dn.getAddressType(i),derivationIndex:e,pathType:i}))}o(n4,"getDefaultKMSVaultChainConfigs");async function qf(e=0){let t=await n4(e),r=t.map(s=>s.pathType),n=xl(r,e),i=t.map(({chainType:s,pathType:c})=>{let{addressFormat:f}=fw(s);return{chainType:s,pathType:c,derivationPath:yi({pathType:c,index:e}),addressFormat:f}});return{derivations:n,conversionMetadata:i}}o(qf,"getDefaultKMSVaultDerivationsAndMetadata");d();h();function LA(e,t){return`${e}:${t}`}o(LA,"descriptorKey");function Wf(e,t){let r={},n=new Map;for(let i of t){let s=LA(i.addressFormat,i.derivationPath);if(n.has(s))throw new Error(`Duplicate KMS account request for ${s}`);n.set(s,{descriptor:i,used:!1})}for(let i of e){let{addressFormat:s,derivationPath:c,address:f,publicKey:p}=i,v=LA(s,c),A=n.get(v);if(!A)continue;if(A.used)throw new Error(`KMS returned duplicate account data for format=${s}, derivationPath=${c}.`);A.used=!0;let{chainType:T,pathType:I}=A.descriptor;r[T]=tx(i4({chainType:T,pathType:I,address:f,publicKey:p}))}for(let{descriptor:i,used:s}of n.values())if(!s)throw new Error(`KMS did not return data for requested chain ${i.chainType} with path ${i.derivationPath}`);return{chains:r}}o(Wf,"convertKMSWalletToVaultAccountParams");function i4({chainType:e,pathType:t,address:r,publicKey:n}){switch(e){case k.Solana:return{chainType:e,pathType:t,address:r};case k.EVM:return{chainType:e,pathType:t,address:r};case k.Sui:{if(!n)throw new Error("KMS response missing required public key for Sui account conversion.");let i=ur(n);return{chainType:e,pathType:t,address:r,publicKey:i}}case k.BitcoinTaproot:case k.BitcoinNativeSegwit:case k.BitcoinNestedSegwit:case k.BitcoinLegacy:{if(!n)throw new Error("KMS response missing required public key for Bitcoin account conversion.");let i=ur(n),s=r?{[Ct.Mainnet]:r}:void 0;return{chainType:e,pathType:t,publicKey:i,addresses:s}}default:throw new Error(`Unsupported chain type ${e} returned from KMS conversion.`)}}o(i4,"createChainAddressInput");d();h();async function o4(e){try{return iu("enable-kms-authenticator-mapping")?(H.addBreadcrumb(W.Account,"Starting KMS authenticator mapping sync",X.Info),await e.rebuildKMSAuthenticatorMapping(),H.addBreadcrumb(W.Account,"Successfully rebuilt KMS authenticator mapping",X.Info),{success:!0,action:"built",message:"Mapping rebuilt successfully"}):(H.addBreadcrumb(W.Account,"KMS authenticator mapping sync skipped: feature flag disabled",X.Info),{success:!0,action:"skipped",message:"Mapping sync skipped (feature flag disabled)"})}catch(t){return H.captureError(t,W.Account),{success:!1,action:"error",message:t.message}}}o(o4,"syncKMSAuthenticatorMapping");d();h();d();h();d();h();d();h();function Gt(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(E.NODE_ENV!=="production"){var i=h4[e],s=i?typeof i=="function"?i.apply(null,r):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(c){return"'"+c+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}o(Gt,"n");function ya(e){return!!e&&!!e[Ir]}o(ya,"r");function ds(e){return!!e&&(function(t){if(!t||typeof t!="object")return!1;var r=Object.getPrototypeOf(t);if(r===null)return!0;var n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===p4}(e)||Array.isArray(e)||!!e[$A]||!!e.constructor[$A]||vg(e)||bg(e))}o(ds,"t");function Rc(e,t,r){r===void 0&&(r=!1),ba(e)===0?(r?Object.keys:Mg)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,i){return t(i,n,e)})}o(Rc,"i");function ba(e){var t=e[Ir];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:vg(e)?2:bg(e)?3:0}o(ba,"o");function hg(e,t){return ba(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}o(hg,"u");function s4(e,t){return ba(e)===2?e.get(t):e[t]}o(s4,"a");function GA(e,t,r){var n=ba(e);n===2?e.set(t,r):n===3?(e.delete(t),e.add(r)):e[t]=r}o(GA,"f");function a4(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}o(a4,"c");function vg(e){return f4&&e instanceof Map}o(vg,"s");function bg(e){return d4&&e instanceof Set}o(bg,"v");function fs(e){return e.o||e.t}o(fs,"p");function wg(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=m4(e);delete t[Ir];for(var r=Mg(t),n=0;n<r.length;n++){var i=r[n],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}o(wg,"l");function xg(e,t){return t===void 0&&(t=!1),Sg(e)||ya(e)||!ds(e)||(ba(e)>1&&(e.set=e.add=e.clear=e.delete=c4),Object.freeze(e),t&&Rc(e,function(r,n){return xg(n,!0)},!0)),e}o(xg,"d");function c4(){Gt(2)}o(c4,"h");function Sg(e){return e==null||typeof e!="object"||Object.isFrozen(e)}o(Sg,"y");function ri(e){var t=g4[e];return t||Gt(18,e),t}o(ri,"b");function VA(){return E.NODE_ENV==="production"||va||Gt(0),va}o(VA,"_");function ug(e,t){t&&(ri("Patches"),e.u=[],e.s=[],e.v=t)}o(ug,"j");function Hf(e){pg(e),e.p.forEach(u4),e.p=null}o(Hf,"O");function pg(e){e===va&&(va=e.l)}o(pg,"g");function FA(e){return va={p:[],l:va,h:e,m:!0,_:0}}o(FA,"w");function u4(e){var t=e[Ir];t.i===0||t.i===1?t.j():t.O=!0}o(u4,"S");function lg(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.g||ri("ES5").S(t,e,n),n?(r[Ir].P&&(Hf(t),Gt(4)),ds(e)&&(e=$f(t,e),t.l||Gf(t,e)),t.u&&ri("Patches").M(r[Ir].t,e,t.u,t.s)):e=$f(t,r,[]),Hf(t),t.u&&t.v(t.u,t.s),e!==ZA?e:void 0}o(lg,"P");function $f(e,t,r){if(Sg(t))return t;var n=t[Ir];if(!n)return Rc(t,function(s,c){return zA(e,n,t,s,c,r)},!0),t;if(n.A!==e)return t;if(!n.P)return Gf(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=wg(n.k):n.o;Rc(n.i===3?new Set(i):i,function(s,c){return zA(e,n,i,s,c,r)}),Gf(e,i,!1),r&&e.u&&ri("Patches").R(n,r,e.u,e.s)}return n.o}o($f,"M");function zA(e,t,r,n,i,s){if(E.NODE_ENV!=="production"&&i===r&&Gt(5),ya(i)){var c=$f(e,i,s&&t&&t.i!==3&&!hg(t.D,n)?s.concat(n):void 0);if(GA(r,n,c),!ya(c))return;e.m=!1}if(ds(i)&&!Sg(i)){if(!e.h.F&&e._<1)return;$f(e,i),t&&t.A.l||Gf(e,i)}}o(zA,"A");function Gf(e,t,r){r===void 0&&(r=!1),e.h.F&&e.m&&xg(t,r)}o(Gf,"x");function fg(e,t){var r=e[Ir];return(r?fs(r):e)[t]}o(fg,"z");function jA(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}o(jA,"I");function mg(e){e.P||(e.P=!0,e.l&&mg(e.l))}o(mg,"k");function dg(e){e.o||(e.o=wg(e.t))}o(dg,"E");function gg(e,t,r){var n=vg(t)?ri("MapSet").N(t,r):bg(t)?ri("MapSet").T(t,r):e.g?function(i,s){var c=Array.isArray(i),f={i:c?1:0,A:s?s.A:VA(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},p=f,v=yg;c&&(p=[f],v=Kc);var A=Proxy.revocable(p,v),T=A.revoke,I=A.proxy;return f.k=I,f.j=T,I}(t,r):ri("ES5").J(t,r);return(r?r.A:VA()).p.push(n),n}o(gg,"R");function l4(e){return ya(e)||Gt(22,e),o(function t(r){if(!ds(r))return r;var n,i=r[Ir],s=ba(r);if(i){if(!i.P&&(i.i<4||!ri("ES5").K(i)))return i.t;i.I=!0,n=qA(r,s),i.I=!1}else n=qA(r,s);return Rc(n,function(c,f){i&&s4(i.t,c)===f||GA(n,c,t(f))}),s===3?new Set(n):n},"n")(e)}o(l4,"D");function qA(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return wg(e)}o(qA,"F");var WA,va,Ag=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",f4=typeof Map<"u",d4=typeof Set<"u",HA=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",ZA=Ag?Symbol.for("immer-nothing"):((WA={})["immer-nothing"]=!0,WA),$A=Ag?Symbol.for("immer-draftable"):"__$immer_draftable",Ir=Ag?Symbol.for("immer-state"):"__$immer_state";var h4={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},p4=""+Object.prototype.constructor,Mg=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,m4=Object.getOwnPropertyDescriptors||function(e){var t={};return Mg(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},g4={},yg={get:o(function(e,t){if(t===Ir)return e;var r=fs(e);if(!hg(r,t))return function(i,s,c){var f,p=jA(s,c);return p?"value"in p?p.value:(f=p.get)===null||f===void 0?void 0:f.call(i.k):void 0}(e,r,t);var n=r[t];return e.I||!ds(n)?n:n===fg(e.t,t)?(dg(e),e.o[t]=gg(e.A.h,n,e)):n},"get"),has:o(function(e,t){return t in fs(e)},"has"),ownKeys:o(function(e){return Reflect.ownKeys(fs(e))},"ownKeys"),set:o(function(e,t,r){var n=jA(fs(e),t);if(n?.set)return n.set.call(e.k,r),!0;if(!e.P){var i=fg(fs(e),t),s=i?.[Ir];if(s&&s.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(a4(r,i)&&(r!==void 0||hg(e.t,t)))return!0;dg(e),mg(e)}return e.o[t]===r&&typeof r!="number"&&(r!==void 0||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},"set"),deleteProperty:o(function(e,t){return fg(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,dg(e),mg(e)):delete e.D[t],e.o&&delete e.o[t],!0},"deleteProperty"),getOwnPropertyDescriptor:o(function(e,t){var r=fs(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},"getOwnPropertyDescriptor"),defineProperty:o(function(){Gt(11)},"defineProperty"),getPrototypeOf:o(function(e){return Object.getPrototypeOf(e.t)},"getPrototypeOf"),setPrototypeOf:o(function(){Gt(12)},"setPrototypeOf")},Kc={};Rc(yg,function(e,t){Kc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Kc.deleteProperty=function(e,t){return E.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Gt(13),Kc.set.call(this,e,t,void 0)},Kc.set=function(e,t,r){return E.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Gt(14),yg.set.call(this,e[0],t,r,e[0])};var y4=function(){function e(r){var n=this;this.g=HA,this.F=!0,this.produce=function(i,s,c){if(typeof i=="function"&&typeof s!="function"){var f=s;s=i;var p=n;return function(K){var N=this;K===void 0&&(K=f);for(var D=arguments.length,Z=Array(D>1?D-1:0),L=1;L<D;L++)Z[L-1]=arguments[L];return p.produce(K,function(ne){var ie;return(ie=s).call.apply(ie,[N,ne].concat(Z))})}}var v;if(typeof s!="function"&&Gt(6),c!==void 0&&typeof c!="function"&&Gt(7),ds(i)){var A=FA(n),T=gg(n,i,void 0),I=!0;try{v=s(T),I=!1}finally{I?Hf(A):pg(A)}return typeof Promise<"u"&&v instanceof Promise?v.then(function(K){return ug(A,c),lg(K,A)},function(K){throw Hf(A),K}):(ug(A,c),lg(v,A))}if(!i||typeof i!="object"){if((v=s(i))===void 0&&(v=i),v===ZA&&(v=void 0),n.F&&xg(v,!0),c){var P=[],B=[];ri("Patches").M(i,v,P,B),c(P,B)}return v}Gt(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(v){for(var A=arguments.length,T=Array(A>1?A-1:0),I=1;I<A;I++)T[I-1]=arguments[I];return n.produceWithPatches(v,function(P){return i.apply(void 0,[P].concat(T))})};var c,f,p=n.produce(i,s,function(v,A){c=v,f=A});return typeof Promise<"u"&&p instanceof Promise?p.then(function(v){return[v,c,f]}):[p,c,f]},typeof r?.useProxies=="boolean"&&this.setUseProxies(r.useProxies),typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze)}o(e,"e");var t=e.prototype;return t.createDraft=function(r){ds(r)||Gt(8),ya(r)&&(r=l4(r));var n=FA(this),i=gg(this,r,void 0);return i[Ir].C=!0,pg(n),i},t.finishDraft=function(r,n){var i=r&&r[Ir];E.NODE_ENV!=="production"&&(i&&i.C||Gt(9),i.I&&Gt(10));var s=i.A;return ug(s,n),lg(void 0,s)},t.setAutoFreeze=function(r){this.F=r},t.setUseProxies=function(r){r&&!HA&&Gt(20),this.g=r},t.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var s=n[i];if(s.path.length===0&&s.op==="replace"){r=s.value;break}}i>-1&&(n=n.slice(i+1));var c=ri("Patches").$;return ya(r)?c(r,n):this.produce(r,function(f){return c(f,n)})},e}(),_r=new y4,Eg=_r.produce,Ope=_r.produceWithPatches.bind(_r),Cpe=_r.setAutoFreeze.bind(_r),Bpe=_r.setUseProxies.bind(_r),Kpe=_r.applyPatches.bind(_r),Rpe=_r.createDraft.bind(_r),Npe=_r.finishDraft.bind(_r),Dpe=Eg;d();h();var be;(function(e){e.TermsHaveBeenAcknowledgedLastSeenVersion="termsHaveBeenAcknowledgedLastSeenVersion",e.NotificationsHaveBeenAcknowledgedLastSeenVersion="notificationsHaveBeenAcknowledgedLastSeenVersion",e.NetworkSetting="networkSetting",e.DeveloperMode="developerMode",e.SelectedAccount=".phantom-labs.account.selectedAccount",e.AccountsMetadata=".phantom-labs.account.accountMetadata",e.AccountsBalanceMetadata=".phantom-labs.account.accountMetadata.balance",e.MigratedWithInvalidChecksum=".phantom-labs.account.migratedWithInvalidChecksum",e.AccountMetas="accountMetas"})(be||(be={}));var v4=[be.AccountsMetadata,be.DeveloperMode,be.NetworkSetting,be.SelectedAccount,be.TermsHaveBeenAcknowledgedLastSeenVersion,be.NotificationsHaveBeenAcknowledgedLastSeenVersion];var $pe=new Error("Failed to clear selected account index"),Tg=et(function*(){try{let e=Wr(be.SelectedAccount);return e?.version===2?e.identifier:null}catch{throw b4}}),b4=new Error("Failed to get selected account identifier");async function qr(e){try{let t={version:2,identifier:e};return ni(be.SelectedAccount)(t)}catch{throw new Error("Failed to set selected account identifier")}}o(qr,"setSelectedAccountIdentifier");var w4=m.object({version:m.literal(1),isDeveloperMode:m.boolean()}),x4=m.object({version:m.literal(1),setting:m.record(m.string())}),S4=m.union([m.object({version:m.literal(1),index:m.number()}),m.object({version:m.literal(2),identifier:m.string()})]),A4=m.object({version:m.literal(1),accounts:m.record(m.any())}),M4=m.object({version:m.literal(1),accounts:m.record(m.any())}),Gpe=m.object({version:m.literal(1),accounts:m.array(m.any())}),Zpe=m.object({version:m.literal(1),seedIdentifiers:m.array(m.string()),seedlessIdentifiers:m.array(m.string()),privateKeyIdentifiers:m.array(m.string())}),E4=o((e,t)=>{let r=e,n=t;return!r&&!n?null:{version:1,accounts:{...r?.accounts??{},...n?.accounts??{}}}},"accountsMetadataResolver"),[xo,wa,Jpe]=qy("accounts",[{key:be.AccountsMetadata,type:"object",validator:A4,nullable:!0,resolver:E4,updateOn:"change"}]);var[Wr,ni,JA]=ru("accounts",[{key:be.DeveloperMode,type:"object",validator:w4,nullable:!0},{key:be.NetworkSetting,type:"object",validator:x4,nullable:!0},{key:be.SelectedAccount,type:"object",validator:S4,nullable:!0},{key:be.AccountsBalanceMetadata,type:"object",validator:M4,nullable:!0},{key:be.MigratedWithInvalidChecksum,type:"boolean",nullable:!0}]);var YA=new Error("Failed to add user account metadata to storage"),Ig=new Error("Could not find account metadata in storage");async function QA(e,t){let r=xo(be.AccountsMetadata);if(!r)throw Ig;let n=r.accounts[e];n?n.name=t:(n={name:t},r.accounts[e]=n),wa(be.AccountsMetadata)(r)}o(QA,"setMultiChainAccountName");async function XA(e,t){let r=xo(be.AccountsMetadata);if(!r)throw Ig;let n=r.accounts[e];n?n.icon=t:(n={icon:t,name:Kr.t("onboardingImportAccountsAccountName",{walletIndex:""})},r.accounts[e]=n),wa(be.AccountsMetadata)(r)}o(XA,"setMultiChainAccountIcon");async function e2(e,t){let r=Wr(be.AccountsBalanceMetadata);r||(r={version:1,accounts:{}});let n=r.accounts[e];n?n.balance=t:(n={balance:t},r.accounts[e]=n),ni(be.AccountsBalanceMetadata)(r)}o(e2,"setAccountBalance");async function So(e,t){try{let r=xo(be.AccountsMetadata);r?r.accounts[e]=t:r={version:1,accounts:{[e]:t}},wa(be.AccountsMetadata)(r)}catch{throw YA}}o(So,"addMultiChainAccountMetadata");async function t2(e){try{let t=xo(be.AccountsMetadata);t?t.accounts=Eg(t.accounts,n=>{for(let[i,s]of Object.entries(e))n[i]||(n[i]={name:""}),n[i].name=s.name,n[i].icon=s.icon??n[i].icon,n[i].connectedDevices=s.connectedDevices??n[i].connectedDevices}):t={version:1,accounts:{...e}},wa(be.AccountsMetadata)(t)}catch{throw YA}}o(t2,"addAccountMetadataBatch");var r2=et(function*(e){let t=Wr(be.AccountsBalanceMetadata);t||(t={version:1,accounts:{}});let r=t.accounts[e];return r||(r={}),r}),n2=et(function*(e){let t=xo(be.AccountsMetadata);t||(t={version:1,accounts:{}});let r=t.accounts[e],n=Kr.t("onboardingImportAccountsAccountName",{walletIndex:""}),c=(yield Po(Pa)?.get(be.AccountsMetadata))?.accounts?.[e]?.name;return r&&r.name===n&&c&&(r.name=c),r||(r={name:c||n}),{...r}}),i2=et(function*(){let e=Wr(be.AccountsBalanceMetadata);return e?e.accounts:{}}),o2=et(function*(){let e=xo(be.AccountsMetadata),t={},r=new Set([...Object.keys(e?.accounts||{})]),i=yield Po(Pa)?.get(be.AccountsMetadata),s=Kr.t("onboardingImportAccountsAccountName",{walletIndex:""});for(let c of r){let f=e?.accounts[c],p=i?.accounts?.[c]?.name;f&&f.name===s&&p&&(f.name=p),f||(f={name:p||s}),t[c]={...f}}return t});async function T4(e){let t=Wr(be.AccountsBalanceMetadata);t&&(delete t.accounts[e],ni(be.AccountsBalanceMetadata)(t))}o(T4,"removeMultiChainAccountBalanceMetadata");async function Zf(e){let t=xo(be.AccountsMetadata);if(!t)throw Ig;delete t.accounts[e],wa(be.AccountsMetadata)(t),await T4(e)}o(Zf,"removeMultiChainAccountMetadata");function Jf(e,t,r,n){let i=Ur(t,r);return e.find(s=>s.type===O.KMSVault&&s.identifier===i&&(!s.apiEnvironment||s.apiEnvironment===n))}o(Jf,"findExistingKMSVaultAccount");function Yf(e,t,r){let i=Wu(t).addresses;return e.some(s=>{if(s.type===O.KMSVault||"apiEnvironment"in s&&s.apiEnvironment&&s.apiEnvironment!==r)return!1;let c=Yb(s);for(let f of c.addresses)if(i.has(f))return!0;return!1})}o(Yf,"hasMatchingNonKMSAccount");function s2(e){let t=e+1;return Kr.t("onboardingImportAccountsAccountName",{walletIndex:t})}o(s2,"generateKMSAccountName");async function Qf(e,t,r,n,i,s,c){H.addBreadcrumb(W.Account,"Adding KMS vault account to local storage",X.Info);let f=await e.addKMSVaultAccount({organizationId:t,walletId:r,tag:n,derivationIndex:0,chains:i,apiEnvironment:c});H.addBreadcrumb(W.Account,"Added KMS vault account to vault storage",X.Info);let p=s2(s.length);return await So(f.identifier,{name:p,icon:void 0}),H.addBreadcrumb(W.Account,`Set account metadata with name: ${p}`,X.Info),f}o(Qf,"addKMSVaultAccountWithMetadata");async function I4(e){try{H.addBreadcrumb(W.Account,"Starting KMS vault account sync (read-only)",X.Info);let t=await e.fetchAllAccounts();if(t.some(A=>A.type===O.Seedless))return H.addBreadcrumb(W.Account,"KMS vault sync skipped: user has seedless accounts (will migrate separately)",X.Info),{success:!1,action:"skipped_seedless",message:"Sync skipped for seedless accounts"};let n=e.getKMSInstance(),{derivations:i,conversionMetadata:s}=await qf(0);H.addBreadcrumb(W.Account,`Checking for KMS vault with tag "${Nt}"`,X.Info);let c=await Gp(n,Nt,i);if(!c)return H.addBreadcrumb(W.Account,"KMS vault account not found remotely",X.Info),{success:!1,action:"not_found",message:"Vault account not found in KMS"};H.addBreadcrumb(W.Account,`Found KMS vault: ${c.walletId}`,X.Info);let{chains:f}=Wf(c.accounts,s),p=ar()===Ot.Production?"production":"staging";return Jf(t,c.walletId,Nt,p)?(H.addBreadcrumb(W.Account,"Upserting missing chains for existing KMS vault account",X.Info),await e.upsertKMSVaultChains({organizationId:c.organizationId,walletId:c.walletId,tag:Nt,derivationIndex:0,chains:f}),{success:!0,action:"already_synced",message:"Account already synced (updated chains)",walletId:c.walletId}):Yf(t,f,p)?(H.addBreadcrumb(W.Account,"KMS vault sync skipped: matching non-KMS local account found by address",X.Info),{success:!0,action:"already_synced",message:"Matching non-KMS local account detected by address; skipping duplicate",walletId:c.walletId}):(await Qf(e,c.organizationId,c.walletId,Nt,f,t,p),H.addBreadcrumb(W.Account,"Successfully synced KMS vault account to local storage",X.Info),{success:!0,action:"synced",message:"Account synced successfully",walletId:c.walletId})}catch(t){return H.captureError(t,W.Account),{success:!1,action:"error",message:t.message}}}o(I4,"syncKMSVaultAccount");d();h();async function _4(e,t,r){try{H.addBreadcrumb(W.Account,"Storing KMS vault account from existing data",X.Info);let n=await t.fetchAllAccounts(),{conversionMetadata:i}=await qf(0),{chains:s}=Wf(e.accounts,i),c=ar()===Ot.Production?"production":"staging",f=Jf(n,e.walletId,Nt,c);if(f)return H.addBreadcrumb(W.Account,"KMS vault account already exists locally",X.Info),await t.upsertKMSVaultChains({organizationId:e.organizationId,walletId:e.walletId,tag:Nt,derivationIndex:0,chains:s}),{isNewAccount:!1,account:f,message:"Account already exists (chains updated if needed)"};if(Yf(n,s,c))return H.addBreadcrumb(W.Account,"KMS vault account matches existing non-KMS account by address - skipping",X.Info),{isNewAccount:!1,account:null,message:"Matching non-KMS account detected by address"};H.addBreadcrumb(W.Account,"Adding new KMS vault account to local storage",X.Info);let p=await Qf(t,e.organizationId,e.walletId,Nt,s,n,c);return H.addBreadcrumb(W.Account,"Successfully stored new KMS vault account",X.Info),{isNewAccount:!0,account:p,message:"Account created successfully"}}catch(n){return H.captureError(n,W.Account),{isNewAccount:!1,account:null,message:n.message}}}o(_4,"storeKMSVaultAccountFromData");d();h();var k4=o(e=>({getSeed:o(t=>P4(e,t),"getSeed"),setSeed:o((t,r)=>O4(e,t,r),"setSeed"),getClientJWTSigner:o((t,r)=>C4(e,t,r),"getClientJWTSigner"),setClientJWTSigner:o((t,r,n)=>B4(e,t,r,n),"setClientJWTSigner"),removeSeeds:o(t=>a2(e,t),"removeSeeds"),removeClientJWTKeypairs:o(t=>c2(e,t),"removeClientJWTKeypairs"),clear:o(async()=>{await a2(e,"all"),await c2(e,"all")},"clear")}),"createVaultCache"),Ao=`${fr}.cache.secrets`,_g=o(e=>`${fr}.cache.seed.${e}`,"seedCacheKey"),kg=o(e=>`${fr}.cache.client-jwt.${e}`,"clientJWTKeypairKey"),P4=o(async({isEnabled:e,secretsStorage:t},r)=>{if(!e())return null;let n=_g(r),i=null;try{i=await t.getSecureValue(n)}catch{}if(!i)return null;let{bytes:s,encoding:c}=i.seed;return new Uint8Array(Buffer.from(s,c))},"getSeed"),O4=o(async({isEnabled:e,generalStorage:t,secretsStorage:r},n,i)=>{if(!e())return;let s=_g(n);await r.setSecureValue(s,{version:1,identifier:n,seed:{bytes:Buffer.from(i).toString("base64"),encoding:"base64"}});let c=await t.get(Ao);if(!c)c={version:1,seedIdentifiers:[n],clientJWTKeypairIdentifiers:[]};else{let f=new Set(c.seedIdentifiers);f.add(n),c.seedIdentifiers=Array.from(f)}await t.set(Ao,c)},"setSeed"),a2=o(async({generalStorage:e,secretsStorage:t},r)=>{let n=await e.get(Ao);if(!n)return;let i=r==="all"?n.seedIdentifiers:r,s=new Set(i),c=n.seedIdentifiers.filter(f=>s.has(f));await t.removeSecureValue(c.map(_g)),await e.set(Ao,{version:1,seedIdentifiers:n.seedIdentifiers.filter(f=>!s.has(f)),clientJWTKeypairIdentifiers:n.clientJWTKeypairIdentifiers??[]})},"removeSeeds"),C4=o(async({isEnabled:e,secretsStorage:t},r,n)=>{if(!e())return null;let i=kg(r),s=null;try{s=await t.getSecureValue(i)}catch{}if(!s||!s.keyPairs[n])return null;let c=s.keyPairs[n],f=new Uint8Array(Buffer.from(c.p256pubkey.bytes,c.p256pubkey.encoding)),p=new Uint8Array(Buffer.from(c.p256privkey.bytes,c.p256privkey.encoding));return{p256pubkey:f,p256privkey:p}},"getClientJWTSigner"),B4=o(async({isEnabled:e,generalStorage:t,secretsStorage:r},n,i,s)=>{if(!e())return;let c=kg(n),f=await r.getSecureValue(c)??{version:1,identifier:n,keyPairs:{}};f.keyPairs[i]={p256pubkey:{bytes:st(Buffer.from(s.p256pubkey)),encoding:"base64"},p256privkey:{bytes:st(Buffer.from(s.p256privkey)),encoding:"base64"}},await r.setSecureValue(c,f);let p=await t.get(Ao);if(!p)p={version:1,seedIdentifiers:[],clientJWTKeypairIdentifiers:[n]};else{let v=new Set(p.clientJWTKeypairIdentifiers??[]);v.add(n),p.clientJWTKeypairIdentifiers=Array.from(v)}await t.set(Ao,p)},"setClientJWTSigner"),c2=o(async({generalStorage:e,secretsStorage:t},r)=>{let n=await e.get(Ao);if(!n||!n.clientJWTKeypairIdentifiers||n.clientJWTKeypairIdentifiers.length===0)return;let i=r==="all"?n.clientJWTKeypairIdentifiers:r,s=new Set(i);await t.removeSecureValue(i.map(kg)),await e.set(Ao,{version:1,seedIdentifiers:n.seedIdentifiers,clientJWTKeypairIdentifiers:n.clientJWTKeypairIdentifiers.filter(c=>!s.has(c))})},"removeClientJWTKeypairs");d();h();var Xf=te(nt());d();h();var Nc=o(()=>({isReady:!0,value:Mt(lr)}),"useChainAvailability");d();h();var Pg=o(()=>{let e=Rt();return Xe({mutationFn:o(async({addressTypes:r})=>{for(let n of r)await Zy(n);Wi(e)},"mutationFn")})},"useDisableAddressTypes");d();h();var K4=o(()=>{let e=Rt();return Xe({mutationFn:o(async({chainIDs:r})=>{await Hy(r),Wi(e)},"mutationFn")})},"useDisableChains");d();h();var Og=o(()=>{let e=Rt(),{deriveAddresses:t}=nu();return Xe({mutationFn:o(async({addressTypes:n})=>{for(let i of n)await Gy(i);await t(),await Wi(e)},"mutationFn")})},"useEnableAddressTypes");d();h();var R4=o(()=>{let e=Rt(),{deriveAddresses:t}=nu();return Xe({mutationFn:o(async({chainIDs:n})=>{await Wy(n),await t(),await Wi(e)},"mutationFn")})},"useEnableChains");d();h();var N4=o(()=>{let{mutateAsync:e}=Pg(),{mutateAsync:t}=Og();return Xe({mutationFn:o(async({addressTypes:n})=>{if(await $y())await t({addressTypes:n});else{let s=new Set(me.bitcoin.addressTypes);for(let c of n)s.delete(c);if(s.size===me.bitcoin.addressTypes.length&&s.delete(k.BitcoinNativeSegwit),s.size>0){let c=Array.from(s);await e({addressTypes:c})}}},"mutationFn")})},"useUpdateVisibleBitcoinAddressTypes");var Cg=me.getAllChainIDs().filter(e=>me.isChainDefaultEnabled(e)),u2=Cg.map(e=>me.getMainnetNetworkID(e)),D4=u2.flatMap(e=>me.getAddressTypes(e)),l2=o(()=>Nc().value?.enabledAddressTypes??D4,"useEnabledAddressTypes"),xa=o(()=>Nc().value?.enabledChainIDs??Cg,"useEnabledChains"),Hge=o(()=>Nc().value?.supportedChainIDs??Cg,"useAllChains"),$ge=o(e=>{let t=Nc().value;return t?e?t.enabledNetworkIDs:t.enabledMainnetOnlyNetworkIDs:u2},"useEnabledNetworkIDs"),Gge=o(()=>xa().length===1,"useIsSingleChainEnabled"),Zge=o(()=>{let e=xa();return(0,Xf.useMemo)(()=>me.getChainIDs(k.EVM).some(t=>e.includes(t)),[e])},"useIsEvmChainEnabled"),Jge=o(()=>{let e=xa();return(0,Xf.useMemo)(()=>e.length===1&&e.includes(br.Solana),[e])},"useIsSolanaOnlyEnabled"),Yge=o(e=>{let t=xa();return(0,Xf.useMemo)(()=>e.map(r=>t.includes(r)),[t,e])},"useIsEnabledChains");d();h();var F4=te(nt());d();h();d();h();var Sa=et(function*(){let e=Wr(be.NetworkSetting);if(!e)return Oa();let t=U4(e);return L4(t)});function U4(e){let t={...e,setting:{...e.setting}};return t.setting[k.Sui]||(t.setting[k.Sui]=Oa().setting[k.Sui]),t}o(U4,"ensureChainSetting");var L4=o(async e=>{let t=!1;V4(e)&&(t=!0);let r=e.setting[k.Solana];r&&me.isMainnetNetworkID(r)&&(e.setting[k.Solana]=Ms,t=!0);let n=e.setting[k.EVM];return n&&me.isMainnetNetworkID(n)&&(e.setting[k.EVM]=Es,t=!0),t&&await ni(be.NetworkSetting)(e),e},"overrideMainnetNetworksIfNeeded"),V4=o(e=>{let t=!1,r=e.setting[k.EVM];return r&&(r.toString()==="eip155:5"&&(e.setting[k.EVM]=fn.Ethereum.Sepolia,t=!0),r.toString()==="eip155:80001"&&(e.setting[k.EVM]=fn.Polygon.Amoy,t=!0)),t},"migrateDeprecatedTestnets");var Mo=et(function*(){let e=lr(),t=yield ti();if(t.length===0)return[];let r=ar()===Ot.Production?"production":"staging",n=t.filter(Zt(P=>P.type===O.KMSVault?!P.apiEnvironment||P.apiEnvironment===r:!0,0,[r])),i=Wr(be.DeveloperMode),s=Sa(),c=o2(),[f,p,v]=yield tu.all([i,s,c]),T=yield Po(Pa)?.get(be.AccountsMetadata),I=Kr.t("onboardingImportAccountsAccountName",{walletIndex:""});return n.map(Zt(P=>{let B=v[P.identifier],K=T?.accounts?.[P.identifier]?.name;B&&B.name===I&&K&&(B.name=K),B||(B={name:K||I});let N={name:B.name,icon:B.icon,identifier:P.identifier,addresses:qu(P,e.enabledMainnetOnlyNetworkIDs,e.enabledAddressTypes,e.enabledChainIDs,p,f?.isDeveloperMode??!1)};return P.type===O.Seed?{...N,type:O.Seed,seedIdentifier:P.seedIdentifier,isReadOnly:!1}:P.type===O.Seedless?{...N,type:O.Seedless,seedIdentifier:P.seedIdentifier,isReadOnly:!1}:P.type===O.ReadOnly?{...N,type:O.ReadOnly,isReadOnly:!0}:P.type===O.PrivateKey?{...N,privateKeyIdentifier:P.privateKeyIdentifier,type:O.PrivateKey,isReadOnly:!1}:{...N,type:P.type,isReadOnly:!1}},1,[v,T,I,e,p,f]))});var Bg=et(function*(){let e=yield Mo();return H.addBreadcrumb(W.Account,`Finished fetching all accounts. Num accounts: ${e.length}`,X.Info),e});function Kg(e){let t=Mt(Mo);return zt(t,e)}o(Kg,"useAllMultiChainAccountsQuery");d();h();d();h();function Rg(){return Xe({mutationFn:o(async({metadataBatch:r})=>{H.addBreadcrumb(W.Account,`Adding Account Metadata Batch: ${Object.entries(r).length} entries`,X.Info),await t2(r)},"mutationFn"),onError:o(r=>{H.captureError(r,W.Account)},"onError")})}o(Rg,"useAddAccountMetadataBatch");function z4(){let{mutateAsync:e}=Rg(),t=bt(),{t:r}=Hi();return Xe({mutationFn:o(async({accounts:s,pairedBLEDevice:c})=>{let f=hy(),p=await t.connectLedgerAccounts(f,s),v=p.reduce((T,I,P)=>{let{name:B,accountIndex:K}=s[P],N;!B||B.length===0?N=r("onboardingImportAccountsLedgerAccountName",{walletIndex:1+K}):N=B;let D;c&&(D=[{...c,version:1,connectionType:As.BLE,deviceType:Ss.Ledger}]);let Z={name:N,icon:void 0,connectedDevices:D};return T[I.identifier]=Z,T},{});await e({metadataBatch:v});let A=p[0]?.identifier;return A||(A=(await t.fetchAllAccounts())[0].identifier),await qr(A),p},"mutationFn"),onError:o(s=>H.captureError(s,W.Account),"onError")})}o(z4,"useConnectLedgerAccounts");d();h();d();h();var Eo=et(function*(e){if(e.length===0)throw new Error(Qb);let t=yield Tg(),r=e.find(Zt(n=>n.identifier===t,0,[t]));return r||e[0]});var f2=et(function*(){let e=yield Mo(),t=yield Eo(e),r=Po(Rh);if(r){let n=lr();r.identifyAccount(e,t,n)}return H.addBreadcrumb(W.Account,`Finished fetching selected account: ${t.identifier}`,X.Info),t}),j4=et(e=>{let t=f2();return{isPending:t.isPending,isLoading:t.isPending,isSuccess:t.isResolved,isFetching:t.isPending,isError:t.isRejected,isFetched:t.isSettled,status:t.isPending?"pending":t.isResolved?"success":"error",data:t.value?e?e(t.value):t.value:void 0,error:t.error}});function kr({select:e}={}){return Mt(j4,e)}o(kr,"useSelectedMultiChainAccount");d();h();var d2=te(Wc()),ed=te(nt());var h2=(0,ed.createContext)(null);function q4({children:e,userRepository:t}){return(0,d2.jsx)(h2.Provider,{value:{userRepository:t},children:e})}o(q4,"UserProvider");function W4(){let e=(0,ed.useContext)(h2);if(!e)throw new Error("useUserContext must be used within a UserProvider");return e}o(W4,"useUserContext");function Pr(){return W4().userRepository}o(Pr,"useUserRepository");d();h();d();h();d();h();var Dc=o(e=>`/user/v1/users/${e}/profile`,"userProfileByUserIdEndpoint"),td=o(e=>`/user/v1/profiles/${e}`,"userProfileByUsernameOrUserProfileIdEndpoint"),p2=o(()=>"/user/v1/profiles/creation-check","userEligibleToClaimEndpoint");d();h();d();h();var To;(function(e){e.PUBLIC="public",e.PRIVATE="private",e.INVISIBLE="invisible",e.HIDDEN="hidden"})(To||(To={}));var H4=Object.values(To),y2=m.string().brand("ProfileId"),Uc=m.object({id:y2,username:m.string(),icon:m.string().nullish(),addresses:m.record(m.string(),m.string()),privacyState:m.nativeEnum(To).optional().default(To.PUBLIC),biography:m.string().nullish(),phantomJoinDate:m.string().nullish()}),Ng=m.string().url().brand("ActorId"),$4=m.object({id:m.string().optional(),orderedItems:Ng.array(),next:m.string().optional()}),m2=m.object({id:m.string().url(),current:$4.optional(),totalItems:m.number().optional()}),g2=m.object({type:m.string(),value:m.string().optional(),name:m.string().optional()}),G4=m.object({id:m.string().url().optional(),name:m.string().optional(),type:m.string()}),Z4=m.object({id:Ng,name:m.string(),preferredUsername:m.string(),manuallyApprovesFollowers:m.boolean(),followers:m.union([m2,m.string().url()]),following:m.union([m2,m.string().url()]),icon:G4.nullish(),attachment:m.union([g2,m.array(g2)]).optional(),summary:m.string().nullish(),published:m.string().nullish()}).transform(e=>{let{attachment:t,...r}=e,n={},i=!1,s=!1,c=!1,f=!1,p=!1,v=!0,A=null;if(t){let T=Array.isArray(t)?t:[t];for(let I of T)if(!(!I.name||!I.value)){if(I.name.endsWith(":address")){let P=Ty.safeParse(I.name.replace(":address",""));if(P.success){let B=P.data;n[B]=I.value}}I.name==="requesting"&&(i=I.value==="true"),I.name==="requestedBy"&&(s=I.value==="true"),I.name==="blocking"&&(c=I.value==="true"),I.name==="following"&&(f=I.value==="true"),I.name==="followedBy"&&(p=I.value==="true"),I.name==="notificationsEnabled"&&(v=I.value==="true"),I.name==="tradeCount"&&(A=I.value??null)}}return{...r,addresses:n,isSentFollowRequestPending:i,hasPendingFollowRequest:s,isBlocking:c,isFollowing:f,isFollowedBy:p,areNotificationsEnabled:v,tradeCount:A}}),J4={Image:"image",Emoji:"emoji",ReadOnlyDefault:"read-only-default",Default:"default"},Y4=m.object({type:m.nativeEnum(J4),imageUrl:m.string().optional(),unicode:m.string().optional()}),Dg=m.object({error:m.object({message:m.string()})});var Ug=o(async e=>{let r=await pt.api().get(td(e)),n=Uc.safeParse(r.data);return n.success?n.data:null},"getUserProfileByUsernameOrUserProfileId");var Q4=o(e=>({getUsernameAvailability:o(t=>X4(t),"getUsernameAvailability"),getUserProfile:o(()=>eO(e),"getUserProfile"),getUserProfileByUsername:o(t=>Ug(t),"getUserProfileByUsername"),getUserProfileByUsernameOrUserProfileId:o(t=>Ug(t),"getUserProfileByUsernameOrUserProfileId"),setUserProfile:o(({username:t,addresses:r,icon:n,privacyState:i})=>tO(e,{username:t,addresses:r,icon:n,privacyState:i}),"setUserProfile"),patchUserProfile:o(t=>rO(e,t),"patchUserProfile"),deleteUserProfile:o(()=>nO(e),"deleteUserProfile"),isEligibleToClaim:o(t=>iO(t),"isEligibleToClaim")}),"createUserRepository"),X4=o(async e=>{switch((await pt.api().get(td(e))).status){case 200:return!1;case 403:return!1;case 404:return!0;default:throw new Error("Failed to check for username availability.")}},"getUsernameAvailability"),eO=o(async({authRepository:e})=>{let t=await e.getUser({skipAutoLogin:!0});if(!t)throw new Error("User is not logged in, unable to get user profile.");let{userID:r,accessToken:n}=t,i=await pt.api().bearer(n).get(Dc(r)),s=Uc.safeParse(i.data);return s.success?s.data:null},"getUserProfile"),tO=o(async({authRepository:e},{username:t,addresses:r,icon:n,privacyState:i})=>{let s=await e.getUser();if(!s)throw new Error("User is not logged in, unable to claim username.");let{userID:c,accessToken:f}=s,p=await pt.api().bearer(f).post(Dc(c),{username:t,icon:n,addresses:r,privacyState:i});if(p.status===201){let T=Uc.safeParse(p.data);if(T.success)return T.data;throw new Error("Failed to parse created profile")}let v=Dg.safeParse(p.data);throw v.success?new Error(v.data.error.message):new Error("Unknown error")},"setUserProfile"),rO=o(async({authRepository:e},{username:t,addresses:r,icon:n,privacyState:i,biography:s})=>{let c=await e.getUser();if(!c)throw new Error("User is not logged in, unable to claim username.");let{userID:f,accessToken:p}=c,v=await pt.api().bearer(p).patch(Dc(f),{username:t,addresses:r,icon:n,privacyState:i,biography:s});if(v.status===200)return;H.captureMessage(`Failed to patch user profile: ${v.status} ${JSON.stringify(v.data)}`,W.Auth);let A=Dg.safeParse(v.data);throw A.success?new Error(A.data.error.message):new Error("Unknown error")},"patchUserProfile"),nO=o(async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to sync down accounts.");let{userID:r,accessToken:n}=t,i=await pt.api().bearer(n).delete(Dc(r));return 200<=i.status&&i.status<300},"deleteUserProfile"),iO=o(async e=>{try{return(await pt.api().post(p2(),{addresses:e})).status===200}catch{return!1}},"isEligibleToClaim");d();h();var Lg="@phantom/users",ir={checkUsernameAvailability(e){return["user",`${Lg}:check-username-availability`,{username:e}]},userProfile(){return["user",`${Lg}:user-profile`]},userProfileAttributeEffect(e){return["user",`${Lg}:user-profile-attribute-effect`,{username:e}]}};d();h();var oO=new Set([ir.userProfile()[1]]),sO=o(e=>{let t=e.queryKey[1];return typeof t!="string"||!t?!1:oO.has(t)},"userShouldDehydrateQueryPredicate");d();h();d();h();var rd=vu(Jt,e=>new Vg(e)),Vg=class{static{o(this,"ClaimUsernameAnalytics")}#e;constructor(t){this.#e=t}onClaimFlowStart(){this.#e.capture("userUsernameClaimFlowStart")}onCheckAvailability(t,r){this.#e.capture("userUsernameCheckAvailability",{data:{username:t,isAvailable:r}})}onAvatarSaved(t){this.#e.capture("userUsernameClaimFlowAvatarSaved",{data:{avatarType:t}})}onAnonymousAuthSaved(t,r){this.#e.capture("userUsernameClaimFlowAnonymousAuthSaved",{data:{numAuthFactorsSaved:t,numAuthFactorsShown:r}})}onLinkWalletsSaved(t,r){this.#e.capture("userUsernameClaimFlowLinkWalletsSaved",{data:{numWalletsSaved:t,numWalletsShown:r}})}onPublicAddressesSaved(){this.#e.capture("userUsernameClaimFlowPublicAddressesSaved")}onClaimFlowComplete(t,r){this.#e.capture("userUsernameClaimComplete",{data:{username:t,authUserID:r}})}};d();h();var Fg=o(async e=>{await e.removeQueries({queryKey:ir.userProfile()})},"removeUserProfile"),zg=o(async e=>{await e.resetQueries({queryKey:ir.userProfile()})},"resetUserProfile"),hs=o(async e=>{await e.invalidateQueries({queryKey:ir.userProfile()})},"invalidateUserProfile");function aO(){let e=rd(),t=Rr(),r=Pr(),n=Rt(),i=o(async({username:s,addresses:c,icon:f})=>{H.addBreadcrumb(W.Auth,`Claiming Username: ${s}.`,X.Debug);let p=await t.getUser();if(!p)throw new Error("Unable to claim username. User not authenticated.");H.addBreadcrumb(W.Auth,"Creating user profile to claim username",X.Debug);let v=await r.setUserProfile({username:s,addresses:c,icon:f,privacyState:To.PUBLIC});return H.addBreadcrumb(W.Auth,"\u2705 Username Claimed!",X.Debug),await Bh(n),await zg(n),await zo(n),await hs(n),await Ei(n),e.onClaimFlowComplete(s,p.userID),v},"mutationFn");return Xe({mutationFn:o(async s=>{try{return await i(s)}catch(c){H.addBreadcrumb(W.Auth,"Could not claim username",X.Error);let f;throw c instanceof Error?f=c:f=new Error("Unable to claim username"),H.captureError(f,W.Auth),f}},"mutationFn")})}o(aO,"useClaimUsername");d();h();function cO(e,t){let r=rd(),n=Pr(),i=ir.checkUsernameAvailability(e),s=o(async()=>{if(!e)return!1;let f=await n.getUsernameAvailability(e);return r.onCheckAvailability(e,f),f},"queryFn"),c=t?.enabled??!!e.trim();return er({enabled:c,queryKey:i,queryFn:s})}o(cO,"useCheckUsernameAvailability");d();h();d();h();var Lc=class extends Error{static{o(this,"NoUserProfileError")}constructor(t="No user profile."){super(t),this.name="NoUserProfileError"}},jg=class extends Error{static{o(this,"MissingRequiredUsernameClaimParamsError")}constructor(t="Missing required username claim params."){super(t),this.name="MissingRequiredUsernameClaimParamsError"}};var uO=hn({days:1}),lO=hn({minutes:1});function qg(e){let t=Pr(),r=Qa(),n=e?.enabled!==void 0?e.enabled:r,i=ir.userProfile();return er({enabled:n,queryKey:i,queryFn:o(async()=>{let c=await t.getUserProfile();if(!c)throw new Lc;return c},"queryFn"),gcTime:uO,staleTime:lO})}o(qg,"useUserProfile");d();h();var fO=o(()=>{let e=Rt(),t=Rr(),r=Pr();return Xe({mutationFn:o(async()=>{await r.deleteUserProfile(),await t.deleteAllAuthFactors(),await t.logOut(),await Fg(e),await Ch(e),await hs(e),await zo(e),await Ei(e)},"mutationFn")})},"useDeleteUserProfile");d();h();var Wg=o(()=>{let e=Rt(),t=Pr(),r=o(async n=>{await t.patchUserProfile(n),await hs(e)},"mutationFn");return Xe({mutationFn:o(async n=>{try{return await r(n)}catch(i){H.addBreadcrumb(W.Auth,`Could not update user profile: ${JSON.stringify(n)}`,X.Error);let s;throw i instanceof Error?s=i:s=new Error("Could not update user profile!"),H.captureError(s,W.Auth),s}},"mutationFn"),onMutate:o(async n=>{let i=ir.userProfile();await e.cancelQueries({queryKey:i});let s=e.getQueryData(i);return e.setQueryData(i,{...s,...n}),{previousData:s}},"onMutate"),onSuccess:o((n,i)=>{let s=ir.userProfile(),c=e.getQueryData(s);if(c){let f={...c,...i};e.setQueryData(s,f)}},"onSuccess"),onError:o((n,i,s)=>{s&&e.setQueryData(ir.userProfile(),s.previousData)},"onError")})},"usePatchUserProfile");d();h();var dO=vu(Jt,e=>new nd(e)),nd=class{static{o(this,"ManageUserProfileAnalytics")}#e;constructor(t){this.#e=t}onAvatarUpdated(t){this.#e.capture("userManageProfileAvatarUpdated",{data:{avatarType:t}})}onAuthFactorsUpdated(t,r){this.#e.capture("userManageProfileAuthFactorsUpdated",{data:{numAuthFactorsSaved:t,numAuthFactorsShown:r}})}onLinkedWalletsUpdated(t,r){this.#e.capture("userManageProfileLinkedWalletsUpdated",{data:{numWalletsSaved:t,numWalletsShown:r}})}onPrivacyStateUpdated(t){this.#e.capture("userManageProfilePrivacyStateUpdated",{data:{privacyState:t}})}onBiographyUpdated(){this.#e.capture("userManageProfileBiographyUpdated")}onPublicAddressesUpdated(t){this.#e.capture("userManageProfilePublicAddressesUpdated",{data:{networkIdsSaved:t}})}};d();h();var id=te(nt());var hO=o(e=>{let t=(0,id.useMemo)(()=>{if(e){if(pO(e))return n=>n.address===e.address&&n.networkID===e.networkID;if(me.isNetworkID(e))return n=>n.networkID===e;if(Ky(e))return n=>n.addressType===e;throw new Error(`Unrecognized filter type: ${e}`)}else return()=>!1},[e]),r=(0,id.useCallback)(n=>{let i=n.addresses.filter(t);if(i.length>1)throw new Error(`Multiple addresses match filter: ${e}`);return i[0]},[e,t]);return kr({select:r})},"useSelectedChainAddress");function pO(e){return typeof e=="object"&&"address"in e&&(typeof e.address=="string"||e.address===void 0)&&"networkID"in e}o(pO,"isAddressNetworkIDFilter");d();h();d();h();d();h();var v2=et(function*(e){return(yield r2(e))?.balance}),b2=et(function*(){return yield i2()});var mO=o((e="",t=!0)=>{let r=Mt(v2,e);return zt(r)},"useAccountBalance"),gO=o((e=!0)=>{let t=Mt(b2);return zt(t)},"useAllAccountBalances");d();h();var yO=et(function*(e){let t=yield Bg(),r=t.find(Zt(n=>n.identifier===e,0,[e]));if(!r)throw new Error(Xb(t.length,e));return r});function vO(e){let t=Mt(yO,e);return zt(t)}o(vO,"useAccountWithIdentifier");d();h();function bO(){let e=bt();return Xe({mutationFn:o(async({name:i,addresses:s,icon:c})=>{let f=await e.addReadonlyAccount(s),p={name:i,icon:c};return await So(f.identifier,p),await qr(f.identifier),f},"mutationFn"),onSettled:o(async()=>{},"onSettled"),onError:o(i=>H.captureError(i,W.Account),"onError")})}o(bO,"useAddReadOnlyAccount");d();h();function wO(){let{t:e}=Hi(),t=Jt(),{fetchAllAccounts:r,addAccountForSeed:n,addAccountForSeedless:i,fetchAllSeedlessMetas:s}=bt();return Xe({mutationFn:o(async({name:v,icon:A,seedIdentifier:T})=>{H.addBreadcrumb(W.Account,`Adding new account for s**d: ${T}`,X.Info);let P=(await s()).find(N=>N.identifier===T),B=P?await i(T):await n(T);await So(B.identifier,{name:v||e("onboardingImportAccountsAccountName",{walletIndex:(await r()).length}),icon:A}),await qr(B.identifier);let K=Ti(B);return t.capture("addSeedAccount",{data:{seedIdentifier:T,accountType:P?"seedless":"seed",walletAddresses:K}}),B},"mutationFn"),onSettled:o(async()=>{},"onSettled"),onError:o(v=>H.captureError(v,W.Account),"onError")})}o(wO,"useAddSeedAccount");d();h();var xO=et(function*(e){try{let t;switch(e){case"all":{let r=yield jf();t=[...yield zf(),...r];break}case"local-only":{t=[...yield jf()];break}case"recoverable-only":{t=[...yield zf()];break}}return t}catch(t){throw t instanceof Error&&H.captureError(t,W.Account),t}});function od(e){let t=Mt(xO,e);return zt(t)}o(od,"useAllSeeds");d();h();function Hg(){let e=Mt(JA,be.DeveloperMode);return zt(e)}o(Hg,"useDeveloperMode");d();h();function SO(){let e=bt();return Xe({mutationFn:o(async({chainType:r,privateKey:n,name:i,icon:s})=>{H.addBreadcrumb(W.Account,"Importing Private Key Account... \u23F3",X.Info);let c=await e.importPrivateKeyAccount(r,n),f={name:i,icon:s};return await So(c.identifier,f),await qr(c.identifier),H.addBreadcrumb(W.Account,`Imported Private Key Account \u2705: ${c.identifier}`,X.Info),c},"mutationFn")})}o(SO,"useImportPrivateKeyAccount");d();h();function AO(){let e=Mt(Sa);return zt(e)}o(AO,"useMultiChainNetworkSetting");d();h();function MO(){let e=Jt(),t=bt();return Xe({mutationFn:o(async({identifier:n})=>{H.addBreadcrumb(W.Account,`Removing Account... \u23F3: ${n}`,X.Info);let s=(await t.fetchAllAccounts()).find(p=>p.identifier===n),c=Ti(s);await Promise.all([t.removeAccount(n),Zf(n)]);let f=await Eo(await t.fetchAllAccounts());await qr(f.identifier),e.capture("removeAccount",{data:{walletAddresses:c}}),H.addBreadcrumb(W.Account,`Removed Account \u2705: ${n}`,X.Info)},"mutationFn")})}o(MO,"useRemoveAccount");d();h();function EO(){let e=Jt(),t=bt();return Xe({mutationFn:o(async({seedIdentifier:i})=>{let s=await t.fetchAllAccounts(),c=[];for(let p of s)switch(p.type){case O.PrivateKey:case O.Ledger:case O.SeedVault:case O.ReadOnly:case O.KMSVault:continue;case O.Seed:case O.Seedless:p.seedIdentifier===i&&c.push(p);break;default:xe(p)}let f=c.flatMap(p=>Ti(p));for(let p of c)await Promise.all([t.removeAccount(p.identifier),Zf(p.identifier)]);e.capture("removeSeed",{data:{numOfAccounts:c.length,walletAddresses:f}})},"mutationFn"),onError:o(i=>{H.captureError(i,W.Account)},"onError")})}o(EO,"useRemoveMultiChainSeed");d();h();function TO(){return Xe({mutationFn:o(async({identifier:r,name:n})=>{H.addBreadcrumb(W.Account,"Renaming Multichain Account",X.Info),await QA(r,n)},"mutationFn"),onError:o(r=>H.captureError(r,W.Account),"onError")})}o(TO,"useRenameMultiChainAccount");d();h();function IO(){let e=bt();return Xe({mutationFn:o(async({identifier:r,toIndex:n})=>{await e.reorderAccount(r,n)},"mutationFn")})}o(IO,"useReorderMultiChainAccount");d();h();var _O=et(function*(){try{let e=yield ti(),r=(yield Eo(e)).identifier;if(!r)throw new Error("Unable to resolve selected account identifier => no available accounts or identifier!");return r}catch(e){throw e instanceof Error&&H.captureError(e,W.Account),e}});function kO(){let e=Mt(_O);return zt(e)}o(kO,"useSelectedAccountIdentifier");d();h();function PO(){return Xe({mutationFn:o(async({identifier:t,balance:r})=>(await e2(t,r),{identifier:t,balance:r}),"mutationFn")})}o(PO,"useSetAccountBalance");d();h();var w2=te(nt());function OO(){return{mutate:(0,w2.useCallback)(async({developerMode:t})=>{await ni(be.DeveloperMode)(t)},[])}}o(OO,"useSetDeveloperMode");d();h();function CO(){return Xe({mutationFn:o(async({identifier:t,icon:r})=>{H.addBreadcrumb(W.Account,"Setting Multichain Account Icon",X.Info),await XA(t,r)},"mutationFn")})}o(CO,"useSetMultiChainAccountIcon");d();h();var x2=te(nt());function BO(){return{mutate:(0,x2.useCallback)(async({networkSetting:t})=>{await ni(be.NetworkSetting)(t)},[])}}o(BO,"useSetMultiChainNetworkSetting");d();h();function KO(){let e=Jt(),t=bt();return Xe({mutationFn:o(async({identifier:i})=>{await qr(i);let c=(await t.fetchAllAccounts()).find(p=>p.identifier===i),f=c?Ti(c):[];return e.capture("changeAccount",{data:{identifier:i,walletAddresses:f}}),i},"mutationFn"),onError:o(i=>H.captureError(i,W.Account),"onError")})}o(KO,"useSetSelectedMultiChainAccountIdentifier");d();h();var sd=te(nt());d();h();var S2=te(nt());var Vc=o(()=>{let{data:e}=kr();return(0,S2.useMemo)(()=>{let t=e?.addresses??[];return[...new Set(t.map(r=>r.networkID))]},[e])},"useSelectedNetworks");var RO=o(()=>{let{data:e,isFetching:t}=Kg(),{data:r,isFetching:n}=kr(),i=bt(),s=Vc(),{data:c=[],isFetching:f,error:p}=NO(i),{data:v,isFetching:A}=DO();return(0,sd.useEffect)(()=>{p&&(A2(p)||H.captureError(p,W.Account))},[p]),(0,sd.useMemo)(()=>({data:{"All Accounts":xd(e),"Selected Account":xd(r),"Selected Networks":s.map(T=>me.getNetworkName(T)),"Seed Cache Digests (IDPLAT-295)":c,"KMS Authenticator Mapping":v},isFetching:t||n||f||A}),[e,t,n,f,c,r,s,A,v])},"useAccountsExport"),A2=o(e=>!(e instanceof Error)||!e.message?!1:/not supported|not implemented|vault locked/i.test(e.message),"isExpectedSeedCacheDigestError"),NO=o(e=>er({queryKey:["seed-cache-digests","IDPLAT-295"],queryFn:o(async()=>{try{let t=await e.DO_NOT_USE_diagnoseSeedCacheDigests();return!t||t.length===0?[]:t}catch(t){if(A2(t))return[];throw t}},"queryFn"),retry:!1,staleTime:5*60*1e3}),"useSeedCacheDigestReports"),DO=o(()=>er({queryKey:["kms-authenticator-mapping"],queryFn:o(async()=>Un(vn)?.mapping||{},"queryFn"),retry:!1,staleTime:5*60*1e3}),"useKMSAuthenticatorMapping");d();h();var M2=te(nt());var UO=o((e=[])=>{let t=xa();return(0,M2.useMemo)(()=>e.filter(r=>{let n=me.getParentChain(r.networkID);return n?t.includes(n):!1}),[e,t])},"useAdditionalNetworks");d();h();var Z2=te(_M()),md=te(nt());d();h();var yt=te(nt(),1);var qc=o(e=>e.type==="checkbox","isCheckBoxInput"),Ma=o(e=>e instanceof Date,"isDateObject"),vr=o(e=>e==null,"isNullOrUndefined"),R2=o(e=>typeof e=="object","isObjectType"),Ft=o(e=>!vr(e)&&!Array.isArray(e)&&R2(e)&&!Ma(e),"isObject"),N2=o(e=>Ft(e)&&e.target?qc(e.target)?e.target.checked:e.target.value:e,"getEventValue"),LO=o(e=>e.substring(0,e.search(/.\d/))||e,"getNodeParentName"),D2=o((e,t)=>[...e].some(r=>LO(t)===r),"isNameInFieldArray"),dd=o(e=>e.filter(Boolean),"compact"),Tt=o(e=>e===void 0,"isUndefined"),he=o((e,t,r)=>{if(!t||!Ft(e))return r;let n=dd(t.split(/[,[\].]+?/)).reduce((i,s)=>vr(i)?i:i[s],e);return Tt(n)||n===e?Tt(e[t])?r:e[t]:n},"get"),Jg={BLUR:"blur",CHANGE:"change"},_n={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Fi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Xg=o((e,t)=>{let r=Object.assign({},e);return delete r[t],r},"omit"),VO=yt.default.createContext(null),ey=o(()=>yt.default.useContext(VO),"useFormContext");var U2=o((e,t,r,n=!0)=>{function i(c){return()=>{if(c in e)return t[c]!==_n.all&&(t[c]=!n||_n.all),r&&(r[c]=!0),e[c]}}o(i,"createGetter");let s={};for(let c in e)Object.defineProperty(s,c,{get:i(c)});return s},"getProxyFormState"),Or=o(e=>Ft(e)&&!Object.keys(e).length,"isEmptyObject"),L2=o((e,t,r)=>{let n=Xg(e,"name");return Or(n)||Object.keys(n).length>=Object.keys(t).length||Object.keys(n).find(i=>t[i]===(!r||_n.all))},"shouldRenderFormState"),ad=o(e=>Array.isArray(e)?e:[e],"convertToArrayPayload"),V2=o((e,t,r)=>r&&t?e===t:!e||!t||e===t||ad(e).some(n=>n&&(n.startsWith(t)||t.startsWith(n))),"shouldSubscribeByName");function ty(e){let t=yt.default.useRef(e);t.current=e,yt.default.useEffect(()=>{let r=o(i=>{i&&i.unsubscribe()},"tearDown"),n=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>r(n)},[e.disabled])}o(ty,"useSubscribe");function FO(e){let t=ey(),{control:r=t.control,disabled:n,name:i,exact:s}=e||{},[c,f]=yt.default.useState(r._formState),p=yt.default.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),v=yt.default.useRef(i),A=yt.default.useRef(!0);v.current=i;let T=yt.default.useCallback(I=>A.current&&V2(v.current,I.name,s)&&L2(I,p.current)&&f(Object.assign(Object.assign({},r._formState),I)),[r,s]);return ty({disabled:n,callback:T,subject:r._subjects.state}),yt.default.useEffect(()=>()=>{A.current=!1},[]),U2(c,r._proxyFormState,p.current,!1)}o(FO,"useFormState");var ii=o(e=>typeof e=="string","isString"),F2=o((e,t,r,n)=>{let i=Array.isArray(e);return ii(e)?(n&&t.watch.add(e),he(r,e)):i?e.map(s=>(n&&t.watch.add(s),he(r,s))):(n&&(t.watchAll=!0),r)},"generateWatchOutput"),hd=o(e=>typeof e=="function","isFunction"),ry=o(e=>{for(let t in e)if(hd(e[t]))return!0;return!1},"objectHasFunction");function zO(e){let t=ey(),{control:r=t.control,name:n,defaultValue:i,disabled:s,exact:c}=e||{},f=yt.default.useRef(n);f.current=n;let p=yt.default.useCallback(T=>{if(V2(f.current,T.name,c)){let I=F2(f.current,r._names,T.values||r._formValues);A(Tt(f.current)||Ft(I)&&!ry(I)?Object.assign({},I):Array.isArray(I)?[...I]:Tt(I)?i:I)}},[r,c,i]);ty({disabled:s,subject:r._subjects.watch,callback:p});let[v,A]=yt.default.useState(Tt(i)?r._getWatch(n):i);return yt.default.useEffect(()=>{r._removeUnmounted()}),v}o(zO,"useWatch");function jO(e){let t=ey(),{name:r,control:n=t.control,shouldUnregister:i}=e,s=D2(n._names.array,r),c=zO({control:n,name:r,defaultValue:he(n._formValues,r,he(n._defaultValues,r,e.defaultValue)),exact:!s}),f=FO({control:n,name:r}),p=yt.default.useRef(n.register(r,Object.assign(Object.assign({},e.rules),{value:c})));return yt.default.useEffect(()=>{let v=o((A,T)=>{let I=he(n._fields,A);I&&(I._f.mount=T)},"updateMounted");return v(r,!0),()=>{let A=n._options.shouldUnregister||i;s?A&&n._stateFlags.action:A?n.unregister(r):v(r,!1)}},[r,n,s,i]),{field:{name:r,value:c,onChange:yt.default.useCallback(v=>{p.current.onChange({target:{value:N2(v),name:r},type:Jg.CHANGE})},[r]),onBlur:yt.default.useCallback(()=>{p.current.onBlur({target:{value:he(n._formValues,r),name:r},type:Jg.BLUR})},[r,n]),ref:yt.default.useCallback(v=>{let A=he(n._fields,r);v&&A&&v.focus&&(A._f.ref={focus:o(()=>v.focus(),"focus"),setCustomValidity:o(T=>v.setCustomValidity(T),"setCustomValidity"),reportValidity:o(()=>v.reportValidity(),"reportValidity")})},[r,n])},formState:f,fieldState:{invalid:!!he(f.errors,r),isDirty:!!he(f.dirtyFields,r),isTouched:!!he(f.touchedFields,r),error:he(f.errors,r)}}}o(jO,"useController");var z2=o(e=>e.render(jO(e)),"Controller"),qO=o((e,t,r,n,i)=>t?Object.assign(Object.assign({},r[e]),{types:Object.assign(Object.assign({},r[e]&&r[e].types?r[e].types:{}),{[n]:i||!0})}):{},"appendErrors"),ny=o(e=>/^\w*$/.test(e),"isKey"),j2=o(e=>dd(e.replace(/["|']|\]/g,"").split(/\.|\[/)),"stringToPath");function It(e,t,r){let n=-1,i=ny(t)?[t]:j2(t),s=i.length,c=s-1;for(;++n<s;){let f=i[n],p=r;if(n!==c){let v=e[f];p=Ft(v)||Array.isArray(v)?v:isNaN(+i[n+1])?{}:[]}e[f]=p,e=e[f]}return e}o(It,"set");var Yg=o((e,t,r)=>{for(let n of r||Object.keys(e)){let i=he(e,n);if(i){let s=i._f,c=Xg(i,"_f");if(s&&t(s.name)){if(s.ref.focus&&Tt(s.ref.focus()))break;if(s.refs){s.refs[0].focus();break}}else Ft(c)&&Yg(c,t)}}},"focusFieldBy");var E2=o((e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length)))),"isWatched");function zc(e){let t,r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(r||Ft(e)){t=r?[]:{};for(let n in e){if(hd(e[n])){t=e;break}t[n]=zc(e[n])}}else return e;return t}o(zc,"cloneObject");function $g(){let e=[];return{get observers(){return e},next:o(i=>{for(let s of e)s.next(i)},"next"),subscribe:o(i=>(e.push(i),{unsubscribe:o(()=>{e=e.filter(s=>s!==i)},"unsubscribe")}),"subscribe"),unsubscribe:o(()=>{e=[]},"unsubscribe")}}o($g,"createSubject");var ud=o(e=>vr(e)||!R2(e),"isPrimitive");function Ea(e,t){if(ud(e)||ud(t))return e===t;if(Ma(e)&&Ma(t))return e.getTime()===t.getTime();let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i of r){let s=e[i];if(!n.includes(i))return!1;if(i!=="ref"){let c=t[i];if(Ma(s)&&Ma(c)||Ft(s)&&Ft(c)||Array.isArray(s)&&Array.isArray(c)?!Ea(s,c):s!==c)return!1}}return!0}o(Ea,"deepEqual");var T2=o(e=>({isOnSubmit:!e||e===_n.onSubmit,isOnBlur:e===_n.onBlur,isOnChange:e===_n.onChange,isOnAll:e===_n.all,isOnTouch:e===_n.onTouched}),"getValidationModes"),jc=o(e=>typeof e=="boolean","isBoolean"),iy=o(e=>e.type==="file","isFileInput"),Qg=o(e=>e instanceof HTMLElement,"isHTMLElement"),q2=o(e=>e.type==="select-multiple","isMultipleSelect"),oy=o(e=>e.type==="radio","isRadioInput"),WO=o(e=>oy(e)||qc(e),"isRadioOrCheckbox"),I2=typeof self<"u"&&typeof self.HTMLElement<"u"&&typeof document<"u",Gg=o(e=>Qg(e)&&e.isConnected,"live");function HO(e,t){let r=t.slice(0,-1).length,n=0;for(;n<r;)e=Tt(e)?n++:e[t[n++]];return e}o(HO,"baseGet");function or(e,t){let r=ny(t)?[t]:j2(t),n=r.length==1?e:HO(e,r),i=r[r.length-1],s;n&&delete n[i];for(let c=0;c<r.slice(0,-1).length;c++){let f=-1,p,v=r.slice(0,-(c+1)),A=v.length-1;for(c>0&&(s=e);++f<v.length;){let T=v[f];p=p?p[T]:e[T],A===f&&(Ft(p)&&Or(p)||Array.isArray(p)&&!p.filter(I=>Ft(I)&&!Or(I)||jc(I)).length)&&(s?delete s[T]:delete e[T]),s=p}}return e}o(or,"unset");function ld(e,t={}){let r=Array.isArray(e);if(Ft(e)||r)for(let n in e)Array.isArray(e[n])||Ft(e[n])&&!ry(e[n])?(t[n]=Array.isArray(e[n])?[]:{},ld(e[n],t[n])):vr(e[n])||(t[n]=!0);return t}o(ld,"markFieldsDirty");function W2(e,t,r){let n=Array.isArray(e);if(Ft(e)||n)for(let i in e)Array.isArray(e[i])||Ft(e[i])&&!ry(e[i])?Tt(t)||ud(r[i])?r[i]=Array.isArray(e[i])?ld(e[i],[]):Object.assign({},ld(e[i])):W2(e[i],vr(t)?{}:t[i],r[i]):r[i]=!Ea(e[i],t[i]);return r}o(W2,"getDirtyFieldsFromDefaultValues");var _2=o((e,t)=>W2(e,t,ld(t)),"getDirtyFields"),k2={value:!1,isValid:!1},P2={value:!0,isValid:!0},H2=o(e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Tt(e[0].attributes.value)?Tt(e[0].value)||e[0].value===""?P2:{value:e[0].value,isValid:!0}:P2:k2}return k2},"getCheckboxValue"),$2=o((e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Tt(e)?e:t?e===""?NaN:+e:r&&ii(e)?new Date(e):n?n(e):e,"getFieldValueAs"),O2={isValid:!1,value:null},G2=o(e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,O2):O2,"getRadioValue");function Zg(e){let t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return iy(t)?t.files:oy(t)?G2(e.refs).value:q2(t)?[...t.selectedOptions].map(({value:r})=>r):qc(t)?H2(e.refs).value:$2(Tt(t.value)?e.ref.value:t.value,e)}o(Zg,"getFieldValue");var $O=o((e,t,r,n)=>{let i={};for(let s of e){let c=he(t,s);c&&It(i,s,c._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}},"getResolverOptions"),fd=o(e=>e instanceof RegExp,"isRegex"),Fc=o(e=>Tt(e)?void 0:fd(e)?e.source:Ft(e)?fd(e.value)?e.value.source:e.value:e,"getRuleValue"),GO=o(e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),"hasValidation");function C2(e,t,r){let n=he(e,r);if(n||ny(r))return{error:n,name:r};let i=r.split(".");for(;i.length;){let s=i.join("."),c=he(t,s),f=he(e,s);if(c&&!Array.isArray(c)&&r!==s)return{name:r};if(f&&f.type)return{name:s,error:f};i.pop()}return{name:r}}o(C2,"schemaErrorLookup");var ZO=o((e,t,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(t||e):(r?n.isOnBlur:i.isOnBlur)?!e:(r?n.isOnChange:i.isOnChange)?e:!0,"skipValidation"),JO=o((e,t)=>!dd(he(e,t)).length&&or(e,t),"unsetEmptyArray"),cd=o(e=>ii(e)||yt.default.isValidElement(e),"isMessage");function B2(e,t,r="validate"){if(cd(e)||Array.isArray(e)&&e.every(cd)||jc(e)&&!e)return{type:r,message:cd(e)?e:"",ref:t}}o(B2,"getValidateError");var Aa=o(e=>Ft(e)&&!fd(e)?e:{value:e,message:""},"getValueAndMessage"),K2=o(async(e,t,r,n)=>{let{ref:i,refs:s,required:c,maxLength:f,minLength:p,min:v,max:A,pattern:T,validate:I,name:P,valueAsNumber:B,mount:K,disabled:N}=e._f;if(!K||N)return{};let D=s?s[0]:i,Z=o(S=>{n&&D.reportValidity&&(D.setCustomValidity(jc(S)?"":S||" "),D.reportValidity())},"setCustomValidity"),L={},ne=oy(i),ie=qc(i),re=ne||ie,ee=(B||iy(i))&&!i.value||t===""||Array.isArray(t)&&!t.length,J=qO.bind(null,P,r,L),fe=o((S,a,l,g=Fi.maxLength,y=Fi.minLength)=>{let b=S?a:l;L[P]=Object.assign({type:S?g:y,message:b,ref:i},J(S?g:y,b))},"getMinMaxMessage");if(c&&(!re&&(ee||vr(t))||jc(t)&&!t||ie&&!H2(s).isValid||ne&&!G2(s).isValid)){let{value:S,message:a}=cd(c)?{value:!!c,message:c}:Aa(c);if(S&&(L[P]=Object.assign({type:Fi.required,message:a,ref:D},J(Fi.required,a)),!r))return Z(a),L}if(!ee&&(!vr(v)||!vr(A))){let S,a,l=Aa(A),g=Aa(v);if(isNaN(t)){let y=i.valueAsDate||new Date(t);ii(l.value)&&(S=y>new Date(l.value)),ii(g.value)&&(a=y<new Date(g.value))}else{let y=i.valueAsNumber||parseFloat(t);vr(l.value)||(S=y>l.value),vr(g.value)||(a=y<g.value)}if((S||a)&&(fe(!!S,l.message,g.message,Fi.max,Fi.min),!r))return Z(L[P].message),L}if((f||p)&&!ee&&ii(t)){let S=Aa(f),a=Aa(p),l=!vr(S.value)&&t.length>S.value,g=!vr(a.value)&&t.length<a.value;if((l||g)&&(fe(l,S.message,a.message),!r))return Z(L[P].message),L}if(T&&!ee&&ii(t)){let{value:S,message:a}=Aa(T);if(fd(S)&&!t.match(S)&&(L[P]=Object.assign({type:Fi.pattern,message:a,ref:i},J(Fi.pattern,a)),!r))return Z(a),L}if(I){if(hd(I)){let S=await I(t),a=B2(S,D);if(a&&(L[P]=Object.assign(Object.assign({},a),J(Fi.validate,a.message)),!r))return Z(a.message),L}else if(Ft(I)){let S={};for(let a in I){if(!Or(S)&&!r)break;let l=B2(await I[a](t),D,a);l&&(S=Object.assign(Object.assign({},l),J(a,l.message)),Z(l.message),r&&(L[P]=S))}if(!Or(S)&&(L[P]=Object.assign({ref:D},S),!r))return L}}return Z(!0),L},"validateField"),YO={mode:_n.onSubmit,reValidateMode:_n.onChange,shouldFocusError:!0};function QO(e={}){let t=Object.assign(Object.assign({},YO),e),r={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},n={},i=t.defaultValues||{},s=t.shouldUnregister?{}:zc(i),c={action:!1,mount:!1,watch:!1},f={mount:new Set,unMount:new Set,array:new Set,watch:new Set},p,v=0,A={},T={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},I={watch:$g(),array:$g(),state:$g()},P=T2(t.mode),B=T2(t.reValidateMode),K=t.criteriaMode===_n.all,N=o((R,V)=>(...U)=>{clearTimeout(v),v=self.setTimeout(()=>R(...U),V)},"debounce"),D=o(async R=>{let V=!1;return T.isValid&&(V=t.resolver?Or((await ee()).errors):await fe(n,!0),!R&&V!==r.isValid&&(r.isValid=V,I.state.next({isValid:V}))),V},"_updateValid"),Z=o((R,V,U,G=[],se=!0,j=!0)=>{if(c.action=!0,j&&Array.isArray(he(n,R))){let Y=V(he(n,R),U.argA,U.argB);se&&It(n,R,Y)}if(T.errors&&j&&Array.isArray(he(r.errors,R))){let Y=V(he(r.errors,R),U.argA,U.argB);se&&It(r.errors,R,Y),JO(r.errors,R)}if(T.touchedFields&&Array.isArray(he(r.touchedFields,R))){let Y=V(he(r.touchedFields,R),U.argA,U.argB);se&&It(r.touchedFields,R,Y)}T.dirtyFields&&(r.dirtyFields=_2(i,s)),I.state.next({isDirty:a(R,G),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})},"_updateFieldArray"),L=o((R,V)=>(It(r.errors,R,V),I.state.next({errors:r.errors})),"updateErrors"),ne=o((R,V,U,G)=>{let se=he(n,R);if(se){let j=he(s,R,Tt(U)?he(i,R):U);Tt(j)||G&&G.defaultChecked||V?It(s,R,V?j:Zg(se._f)):y(R,j),c.mount&&D()}},"updateValidAndValue"),ie=o((R,V,U,G,se)=>{let j=!1,Y={name:R},tt=he(r.touchedFields,R);if(T.isDirty){let ge=r.isDirty;r.isDirty=Y.isDirty=a(),j=ge!==Y.isDirty}if(T.dirtyFields&&(!U||G)){let ge=he(r.dirtyFields,R);Ea(he(i,R),V)?or(r.dirtyFields,R):It(r.dirtyFields,R,!0),Y.dirtyFields=r.dirtyFields,j=j||ge!==he(r.dirtyFields,R)}return U&&!tt&&(It(r.touchedFields,R,U),Y.touchedFields=r.touchedFields,j=j||T.touchedFields&&tt!==U),j&&se&&I.state.next(Y),j?Y:{}},"updateTouchAndDirty"),re=o(async(R,V,U,G,se)=>{let j=he(r.errors,V),Y=T.isValid&&r.isValid!==U;if(e.delayError&&G?(p=p||N(L,e.delayError),p(V,G)):(clearTimeout(v),G?It(r.errors,V,G):or(r.errors,V)),((G?!Ea(j,G):j)||!Or(se)||Y)&&!R){let tt=Object.assign(Object.assign(Object.assign({},se),Y?{isValid:U}:{}),{errors:r.errors,name:V});r=Object.assign(Object.assign({},r),tt),I.state.next(tt)}A[V]--,T.isValidating&&!A[V]&&(I.state.next({isValidating:!1}),A={})},"shouldRenderByError"),ee=o(async R=>t.resolver?await t.resolver(Object.assign({},s),t.context,$O(R||f.mount,n,t.criteriaMode,t.shouldUseNativeValidation)):{},"_executeSchema"),J=o(async R=>{let{errors:V}=await ee();if(R)for(let U of R){let G=he(V,U);G?It(r.errors,U,G):or(r.errors,U)}else r.errors=V;return V},"executeSchemaAndUpdateState"),fe=o(async(R,V,U={valid:!0})=>{for(let G in R){let se=R[G];if(se){let j=se._f,Y=Xg(se,"_f");if(j){let tt=await K2(se,he(s,j.name),K,t.shouldUseNativeValidation);if(tt[j.name]&&(U.valid=!1,V))break;V||(tt[j.name]?It(r.errors,j.name,tt[j.name]):or(r.errors,j.name))}Y&&await fe(Y,V,U)}}return U.valid},"executeBuildInValidation"),S=o(()=>{for(let R of f.unMount){let V=he(n,R);V&&(V._f.refs?V._f.refs.every(U=>!Gg(U)):!Gg(V._f.ref))&&q(R)}f.unMount=new Set},"_removeUnmounted"),a=o((R,V)=>(R&&V&&It(s,R,V),!Ea(u(),i)),"_getDirty"),l=o((R,V,U)=>{let G=Object.assign({},c.mount?s:Tt(V)?i:ii(R)?{[R]:V}:V);return F2(R,f,G,U)},"_getWatch"),g=o(R=>dd(he(c.mount?s:i,R,e.shouldUnregister?he(i,R,[]):[])),"_getFieldArray"),y=o((R,V,U={})=>{let G=he(n,R),se=V;if(G){let j=G._f;j&&(!j.disabled&&It(s,R,$2(V,j)),se=I2&&Qg(j.ref)&&vr(V)?"":V,q2(j.ref)?[...j.ref.options].forEach(Y=>Y.selected=se.includes(Y.value)):j.refs?qc(j.ref)?j.refs.length>1?j.refs.forEach(Y=>Y.checked=Array.isArray(se)?!!se.find(tt=>tt===Y.value):se===Y.value):j.refs[0]&&(j.refs[0].checked=!!se):j.refs.forEach(Y=>Y.checked=Y.value===se):iy(j.ref)||(j.ref.value=se,j.ref.type||I.watch.next({name:R})))}(U.shouldDirty||U.shouldTouch)&&ie(R,se,U.shouldTouch,U.shouldDirty,!0),U.shouldValidate&&w(R)},"setFieldValue"),b=o((R,V,U)=>{for(let G in V){let se=V[G],j=`${R}.${G}`,Y=he(n,j);(f.array.has(R)||!ud(se)||Y&&!Y._f)&&!Ma(se)?b(j,se,U):y(j,se,U)}},"setValues"),M=o((R,V,U={})=>{let G=he(n,R),se=f.array.has(R);It(s,R,V),se?(I.array.next({name:R,values:s}),(T.isDirty||T.dirtyFields)&&U.shouldDirty&&(r.dirtyFields=_2(i,s),I.state.next({name:R,dirtyFields:r.dirtyFields,isDirty:a(R,V)}))):G&&!G._f&&!vr(V)?b(R,V,U):y(R,V,U),E2(R,f)&&I.state.next({}),I.watch.next({name:R})},"setValue"),_=o(async R=>{let V=R.target,U=V.name,G=he(n,U);if(G){let se,j,Y=V.type?Zg(G._f):N2(R),tt=R.type===Jg.BLUR,ge=!GO(G._f)&&!t.resolver&&!he(r.errors,U)&&!G._f.deps||ZO(tt,he(r.touchedFields,U),r.isSubmitted,B,P),we=E2(U,f,tt);It(s,U,Y),tt?G._f.onBlur&&G._f.onBlur(R):G._f.onChange&&G._f.onChange(R);let Cr=ie(U,Y,tt,!1),Te=!Or(Cr)||we;if(!tt&&I.watch.next({name:U,type:R.type}),ge)return Te&&I.state.next(Object.assign({name:U},we?{}:Cr));if(!tt&&we&&I.state.next({}),A[U]=(A[U],1),T.isValidating&&I.state.next({isValidating:!0}),t.resolver){let{errors:Ae}=await ee([U]),kn=C2(r.errors,n,U),Me=C2(Ae,n,kn.name||U);se=Me.error,U=Me.name,j=Or(Ae)}else se=(await K2(G,he(s,U),K,t.shouldUseNativeValidation))[U],j=await D(!0);G._f.deps&&w(G._f.deps),re(!1,U,j,se,Cr)}},"onChange"),w=o(async(R,V={})=>{let U,G,se=ad(R);if(I.state.next({isValidating:!0}),t.resolver){let j=await J(Tt(R)?R:se);U=Or(j),G=R?!se.some(Y=>he(j,Y)):U}else R?(G=(await Promise.all(se.map(async j=>{let Y=he(n,j);return await fe(Y&&Y._f?{[j]:Y}:Y)}))).every(Boolean),!(!G&&!r.isValid)&&D()):G=U=await fe(n);return I.state.next(Object.assign(Object.assign(Object.assign({},!ii(R)||T.isValid&&U!==r.isValid?{}:{name:R}),t.resolver?{isValid:U}:{}),{errors:r.errors,isValidating:!1})),V.shouldFocus&&!G&&Yg(n,j=>he(r.errors,j),R?se:f.mount),G},"trigger"),u=o(R=>{let V=Object.assign(Object.assign({},i),c.mount?s:{});return Tt(R)?V:ii(R)?he(V,R):R.map(U=>he(V,U))},"getValues"),x=o(R=>{R?ad(R).forEach(V=>or(r.errors,V)):r.errors={},I.state.next({errors:r.errors})},"clearErrors"),F=o((R,V,U)=>{let G=(he(n,R,{_f:{}})._f||{}).ref;It(r.errors,R,Object.assign(Object.assign({},V),{ref:G})),I.state.next({name:R,errors:r.errors,isValid:!1}),U&&U.shouldFocus&&G&&G.focus&&G.focus()},"setError"),z=o((R,V)=>hd(R)?I.watch.subscribe({next:o(U=>R(l(void 0,V),U),"next")}):l(R,V,!0),"watch"),q=o((R,V={})=>{for(let U of R?ad(R):f.mount)f.mount.delete(U),f.array.delete(U),he(n,U)&&(V.keepValue||(or(n,U),or(s,U)),!V.keepError&&or(r.errors,U),!V.keepDirty&&or(r.dirtyFields,U),!V.keepTouched&&or(r.touchedFields,U),!t.shouldUnregister&&!V.keepDefaultValue&&or(i,U));I.watch.next({}),I.state.next(Object.assign(Object.assign({},r),V.keepDirty?{isDirty:a()}:{})),!V.keepIsValid&&D()},"unregister"),Q=o((R,V={})=>{let U=he(n,R),G=jc(V.disabled);return It(n,R,{_f:Object.assign(Object.assign(Object.assign({},U&&U._f?U._f:{ref:{name:R}}),{name:R,mount:!0}),V)}),f.mount.add(R),U?G&&It(s,R,V.disabled?void 0:he(s,R,Zg(U._f))):ne(R,!0,V.value),Object.assign(Object.assign(Object.assign({},G?{disabled:V.disabled}:{}),t.shouldUseNativeValidation?{required:!!V.required,min:Fc(V.min),max:Fc(V.max),minLength:Fc(V.minLength),maxLength:Fc(V.maxLength),pattern:Fc(V.pattern)}:{}),{name:R,onChange:_,onBlur:_,ref:o(se=>{if(se){Q(R,V),U=he(n,R);let j=Tt(se.value)&&se.querySelectorAll&&se.querySelectorAll("input,select,textarea")[0]||se,Y=WO(j),tt=U._f.refs||[];if(Y?tt.find(ge=>ge===j):j===U._f.ref)return;It(n,R,{_f:Object.assign(Object.assign({},U._f),Y?{refs:tt.concat(j).filter(Gg),ref:{type:j.type,name:R}}:{ref:j})}),ne(R,!1,void 0,j)}else U=he(n,R,{}),U._f&&(U._f.mount=!1),(t.shouldUnregister||V.shouldUnregister)&&!(D2(f.array,R)&&c.action)&&f.unMount.add(R)},"ref")})},"register");return{control:{register:Q,unregister:q,_executeSchema:ee,_getWatch:l,_getDirty:a,_updateValid:D,_removeUnmounted:S,_updateFieldArray:Z,_getFieldArray:g,_subjects:I,_proxyFormState:T,get _fields(){return n},set _fields(R){n=R},get _formValues(){return s},set _formValues(R){s=R},get _stateFlags(){return c},set _stateFlags(R){c=R},get _defaultValues(){return i},set _defaultValues(R){i=R},get _names(){return f},set _names(R){f=R},get _formState(){return r},set _formState(R){r=R},get _options(){return t},set _options(R){t=Object.assign(Object.assign({},t),R)}},trigger:w,register:Q,handleSubmit:o((R,V)=>async U=>{U&&(U.preventDefault&&U.preventDefault(),U.persist&&U.persist());let G=!0,se=t.shouldUnregister?zc(s):Object.assign({},s);I.state.next({isSubmitting:!0});try{if(t.resolver){let{errors:j,values:Y}=await ee();r.errors=j,se=Y}else await fe(n);Or(r.errors)&&Object.keys(r.errors).every(j=>he(se,j))?(I.state.next({errors:{},isSubmitting:!0}),await R(se,U)):(V&&await V(r.errors,U),t.shouldFocusError&&Yg(n,j=>he(r.errors,j),f.mount))}catch(j){throw G=!1,j}finally{r.isSubmitted=!0,I.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Or(r.errors)&&G,submitCount:r.submitCount+1,errors:r.errors})}},"handleSubmit"),watch:z,setValue:M,getValues:u,reset:o((R,V={})=>{let U=R||i,G=zc(U),se=R&&!Or(R)?G:i;if(V.keepDefaultValues||(i=U),!V.keepValues){if(I2&&Tt(R))for(let j of f.mount){let Y=he(n,j);if(Y&&Y._f){let tt=Array.isArray(Y._f.refs)?Y._f.refs[0]:Y._f.ref;try{Qg(tt)&&tt.closest("form").reset();break}catch{}}}s=e.shouldUnregister?V.keepDefaultValues?zc(i):{}:G,n={},I.array.next({values:se}),I.watch.next({values:se})}f={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!T.isValid||!!V.keepIsValid,c.watch=!!e.shouldUnregister,I.state.next({submitCount:V.keepSubmitCount?r.submitCount:0,isDirty:V.keepDirty?r.isDirty:V.keepDefaultValues?!Ea(R,i):!1,isSubmitted:V.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:V.keepDirty?r.dirtyFields:V.keepDefaultValues&&R?Object.entries(R).reduce((j,[Y,tt])=>Object.assign(Object.assign({},j),{[Y]:tt!==he(i,Y)}),{}):{},touchedFields:V.keepTouched?r.touchedFields:{},errors:V.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},"reset"),resetField:o((R,V={})=>{he(n,R)&&(Tt(V.defaultValue)?M(R,he(i,R)):(M(R,V.defaultValue),It(i,R,V.defaultValue)),V.keepTouched||or(r.touchedFields,R),V.keepDirty||(or(r.dirtyFields,R),r.isDirty=V.defaultValue?a(R,he(i,R)):a()),V.keepError||(or(r.errors,R),T.isValid&&D()),I.state.next(Object.assign({},r)))},"resetField"),clearErrors:x,unregister:q,setError:F,setFocus:o(R=>{let V=he(n,R)._f;(V.ref.focus?V.ref:V.refs[0]).focus()},"setFocus")}}o(QO,"createFormControl");function pd(e={}){let t=yt.default.useRef(),[r,n]=yt.default.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});t.current?t.current.control._options=e:t.current=Object.assign(Object.assign({},QO(e)),{formState:r});let i=t.current.control,s=yt.default.useCallback(c=>{L2(c,i._proxyFormState,!0)&&(i._formState=Object.assign(Object.assign({},i._formState),c),n(Object.assign({},i._formState)))},[i]);return ty({subject:i._subjects.state,callback:s}),yt.default.useEffect(()=>{i._stateFlags.mount||(i._proxyFormState.isValid&&i._updateValid(),i._stateFlags.mount=!0),i._stateFlags.watch&&(i._stateFlags.watch=!1,i._subjects.state.next({})),i._removeUnmounted()}),t.current.formState=U2(r,i._proxyFormState),t.current}o(pd,"useForm");var XO=o(({accounts:e,enabledAddressTypes:t,enableAddressTypes:r,editableAccountMetadata:n,addReadOnlyAccount:i,fetchDomainOwner:s})=>{let c=Pr(),{t:f}=Hi(),p=Jt(),v=n?.networkID||fn.Solana.Mainnet,{formState:{errors:A},control:T,clearErrors:I,getValues:P,setValue:B,register:K,handleSubmit:N,watch:D,trigger:Z}=pd({mode:"all"}),{networkID:L,name:ne,address:ie,resolvedAddress:re}=D(),ee={required:!0},J=(0,md.useMemo)(()=>({required:{value:!0,message:f("addAccountImportAccountPublicKeyRequired")},validate:(0,Z2.default)(async a=>{if(a==="")return!0;if(!Vy(a,L||v))try{let b=(await s(a,L,c,p))?.owner;return b?(B("resolvedAddress",b),e.find(_=>_.addresses.map(w=>w.address).includes(b))?f("addAccountImportAccountDuplicateAddress"):!0):f("addAccountImportAccountIncorrectFormat")}catch{return f("sendFormErrorInvalidDomain")}return B("resolvedAddress",a),e.find(y=>y.addresses.map(b=>b.address).includes(a))?f("addAccountImportAccountDuplicateAddress"):!0},500)}),[f,L,v,B,e,s,c,p]),fe=ne&&re&&!A.name&&!A.address,S=(0,md.useCallback)(async({networkID:a,name:l,resolvedAddress:g},y)=>{let b=vs(a,g);t.includes(b)||await r({addressTypes:[b]});let M={};M[b]=g,i({name:l,addresses:M,icon:n?.icon}),y(),p.capture("addReadOnlyAccount",{data:{networkID:a,chainType:b,walletAddress:g}})},[i,n?.icon,r,t,p]);return{Controller:z2,canSubmit:fe,control:T,errors:A,nameValidations:ee,address:ie,addressValidations:J,clearErrors:I,getValues:P,handleSubmit:N,onSubmit:S,register:K,setValue:B,trigger:Z}},"useAddReadOnlyAccountForm");d();h();function eC(e){let t=l2();return e.map(r=>$i.get(r.networkID).addressTooltipNetworkName?.(r.networkID,r.address,t)??me.getNetworkName(r.networkID))}o(eC,"useAddressTooltipNetworkName");d();h();var J2=te(nt());var tC=o(()=>{let{data:e}=kr(),t=(0,J2.useMemo)(()=>{if(!e||!e.addresses.length)return me.getChainID(Ey.Mainnet);let r=e.addresses[0];return me.getChainID(r.networkID)},[e]);return{caip19:Ly(Fy(t)),tokenName:me.getChainName(t),tokenSymbol:me.getTokenSymbol(t)}},"useDefaultNativeTokenForSelectedAccount");d();h();var rC=o(()=>Oa(),"useDefaultNetworkSettings");d();h();var nC=o(()=>{let{data:e}=kr();return e?e.type===O.Ledger:void 0},"useIsSelectedLedgerAccount");d();h();var iC=o(()=>{let{data:e}=Hg();return!!e?.isDeveloperMode},"useIsTestnetMode"),oC=o(()=>Vc().some(t=>me.isLocalNetworkID(t)),"useIsLocalnetMode");d();h();var Q2=te(nt());d();h();var sC=et(function*({user:e}){let t=lr(),r=yield Mo();if(!t||!r||!e)return null;let{enabledNetworkIDs:n}=t,i=n?.reduce(Zt((A,T)=>{let I=r.find(Zt(P=>P.addresses.some(Zt(B=>B.networkID===T,0,[T])),0,[T]))?.addresses.find(Zt(P=>P.networkID===T,1,[T]))?.address;return I&&(A[T]=I),A},0,[r]),{})??{},s=e?.addresses,c=s?Object.keys(s).filter(me.isNetworkID):[],f=(n??[]).filter(Zt(A=>!c.includes(A),1,[c])).reduce(Zt((A,T)=>{let I=i[T];return I&&(A[T]=I),A},2,[i]),{});return Object.keys(f).length>0?{addresses:{...f,...s},addedAddresses:f}:null}),Y2=o(()=>{let{data:e}=qg(),t=Mt(sC,{user:e});return zt(t)},"usePatchProfileAddresses");var aC=o(()=>{let{data:e}=Y2(),{mutate:t}=Wg(),r=Jt();(0,Q2.useEffect)(()=>{if(e){let{addresses:n,addedAddresses:i}=e,s=Object.keys(i);r.capture("autoSyncUsernameAddresses",{data:{addedChains:s}}),t({addresses:n})}},[e,t,r])},"usePatchAddressesIfNeeded");d();h();var X2=te(nt());var cC=o(e=>{let t=(0,X2.useCallback)(r=>r.addresses.find(n=>e===me.getChainID(n.networkID))?.networkID,[e]);return kr({select:t})},"useSelectedNetwork");d();h();var eM=te(nt());var uC=o(({accountBalance:e,accountId:t,enabled:r,value:n,setAccountBalance:i})=>{(0,eM.useEffect)(()=>{if(r&&t&&n!==void 0&&n!==e){let s=Date.now();i({identifier:t,balance:{timestamp:s,value:n}})}},[e,t,r,n,i])},"useSetAccountBalanceEffect");d();h();var tM=te(nt());var lC=o(()=>{let{data:e=[]}=od("local-only"),{data:t=[]}=od("recoverable-only");return(0,tM.useMemo)(()=>e.length+t.length>1,[e.length,t.length])},"useShowRemoveSecretPhrase");d();h();d();h();d();h();var sr=te(nt());function fC(e){let t,r=new Set,n=o((v,A)=>{let T=typeof v=="function"?v(t):v;if(T!==t){let I=t;t=A?T:Object.assign({},t,T),r.forEach(P=>P(t,I))}},"setState"),i=o(()=>t,"getState"),s=o((v,A=i,T=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let I=A(t);function P(){let B=A(t);if(!T(I,B)){let K=I;v(I=B,K)}}return o(P,"listenerToAdd"),r.add(P),()=>r.delete(P)},"subscribeWithSelector"),p={setState:n,getState:i,subscribe:o((v,A,T)=>A||T?s(v,A,T):(r.add(v),()=>r.delete(v)),"subscribe"),destroy:o(()=>r.clear(),"destroy")};return t=e(n,i,p),p}o(fC,"createStore");var dC=typeof self>"u"||!self.navigator||/ServerSideRendering|^Deno\//.test(self.navigator.userAgent),rM=dC?sr.useEffect:sr.useLayoutEffect;function gd(e){let t=typeof e=="function"?fC(e):e,r=o((n=t.getState,i=Object.is)=>{let[,s]=(0,sr.useReducer)(N=>N+1,0),c=t.getState(),f=(0,sr.useRef)(c),p=(0,sr.useRef)(n),v=(0,sr.useRef)(i),A=(0,sr.useRef)(!1),T=(0,sr.useRef)();T.current===void 0&&(T.current=n(c));let I,P=!1;(f.current!==c||p.current!==n||v.current!==i||A.current)&&(I=n(c),P=!i(T.current,I)),rM(()=>{P&&(T.current=I),f.current=c,p.current=n,v.current=i,A.current=!1});let B=(0,sr.useRef)(c);rM(()=>{let N=o(()=>{try{let Z=t.getState(),L=p.current(Z);v.current(T.current,L)||(f.current=Z,T.current=L,s())}catch{A.current=!0,s()}},"listener"),D=t.subscribe(N);return t.getState()!==B.current&&N(),D},[]);let K=P?I:T.current;return(0,sr.useDebugValue)(K),K},"useStore");return Object.assign(r,t),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");let n=[r,t];return{next(){let i=n.length<=0;return{value:n.shift(),done:i}}}},r}o(gd,"create");var hC={editableAccountMetadata:void 0,setEditableAccountMetadata:o(()=>{},"setEditableAccountMetadata")},yd=gd(e=>({...hC,setEditableAccountMetadata:o(t=>{e({editableAccountMetadata:t})},"setEditableAccountMetadata")}));d();h();var nM={username:"",available:null,usernameAvailabilityError:null,icon:null,secretIdentifiers:[],accountIdentifiersToSync:[],addresses:{}},iM=gd((e,t)=>({...nM,setUsername:o(r=>e({username:r}),"setUsername"),setUsernameAvailabilityError:o(r=>e({usernameAvailabilityError:r}),"setUsernameAvailabilityError"),setAvailable:o(r=>e({available:r}),"setAvailable"),setIcon:o(r=>e({icon:r}),"setIcon"),addSecretIdentifier:o(r=>{let n=[...t().secretIdentifiers];n.includes(r)||n.push(r),e({secretIdentifiers:n})},"addSecretIdentifier"),removeSecretIdentifier:o(r=>{e({secretIdentifiers:t().secretIdentifiers.filter(n=>n!==r)})},"removeSecretIdentifier"),addAccountIdentifierToSync:o(r=>{let n=[...t().accountIdentifiersToSync];n.includes(r)||n.push(r),e({accountIdentifiersToSync:n})},"addAccountIdentifierToSync"),removeAccountIdentifierToSync:o(r=>{e({accountIdentifiersToSync:t().accountIdentifiersToSync.filter(n=>n!==r)})},"removeAccountIdentifierToSync"),clearAccountIdentifiersToSync:o(()=>e({accountIdentifiersToSync:[]}),"clearAccountIdentifiersToSync"),setAccountIdentifiersToSync:o(r=>e({accountIdentifiersToSync:r}),"setAccountIdentifiersToSync"),addAddress:o((r,n)=>{let i={...t().addresses};i[r]=n,e({addresses:i})},"addAddress"),removeAddress:o((r,n)=>{let i={...t().addresses};i[r]===n&&delete i[r],e({addresses:i})},"removeAddress"),clearAddresses:o(()=>{e({addresses:{}})},"clearAddresses"),reset:o(()=>{e(nM)},"reset")}));d();h();var oM=te(Ta()),oi=te(nt());var pC=o(({importPrivateKeyCallback:e,existingAccounts:t,editableAccountMetadata:r,analytics:n})=>{let{t:i}=Hi(),{formState:{errors:s},control:c,clearErrors:f,getValues:p,setValue:v,register:A,handleSubmit:T,watch:I,trigger:P}=pd({mode:"all",defaultValues:{addressType:r?.addressType||k.Solana,networkID:r?.networkID||fn.Solana.Mainnet}}),[B,K]=(0,oi.useState)(null),N=yd(l=>l.setEditableAccountMetadata),{name:D}=I(),Z=r?.secrets,L=p("networkID"),ne=p("addressType"),ie=p("privateKey"),re=(0,oi.useMemo)(()=>new By,[]),ee={required:!0},J=(0,oi.useMemo)(()=>({required:{value:!0,message:i("addAccountImportAccountPrivateKeyRequired")},onChange:o(l=>{l.target.value||K(null)},"onChange"),validate:o(l=>{try{let g=p("networkID"),y=p("addressType");if(/\s/.test(l)||!y)return i("addAccountImportAccountIncorrectFormat");let b=me.getNetworkDefinition(g).value,M=Qc({privateKey:l,addressType:y,networkIDValue:b});N({...r,secrets:M});let _=re.generateKeypairFromPrivateKey(M,y);return t.find(u=>!u.isReadOnly&&(u.addresses.map(x=>x.address).includes(Kt({publicKey:_.publicKey,addressType:y,networkID:g}))||u.addresses.filter(x=>"publicKey"in x).map(x=>x.publicKey).find(x=>x?Buffer.from(x).equals(Buffer.from(_.publicKey)):!1)))?i("addAccountImportAccountDuplicatePrivateKey"):!0}catch{return i("addAccountImportAccountIncorrectFormat")}},"validate")}),[i,re,t,r,N,p]);(0,oi.useEffect)(()=>{if(s.privateKey){K(null);return}if(ie||Z)try{let l=me.getNetworkDefinition(L).value,g=Z||Qc({privateKey:ie,addressType:ne,networkIDValue:l}),y=re.generateKeypairFromPrivateKey(g,ne);if(!ie){let b="";switch(ne){case k.Solana:{b=oM.default.encode(y.privateKey);break}case k.EVM:{b="0x"+Buffer.from(y.privateKey).toString("hex");break}case k.Sui:{b=Ry(y.privateKey);break}}v("privateKey",b)}K(Kt({publicKey:y.publicKey,addressType:ne,networkID:L}))}catch{K(null)}},[s.privateKey,ne,re,ie,Z,v,L]);let fe=(0,oi.useMemo)(()=>!!(D&&ie&&!s.name&&!s.privateKey),[s.name,s.privateKey,D,ie]),S=(0,oi.useCallback)(async({networkID:l,name:g,privateKey:y,addressType:b})=>{let M=me.getNetworkDefinition(l).value,_=Qc({privateKey:y,addressType:b,networkIDValue:M});await e({chainType:b,name:g,icon:r?.icon,privateKey:_}),n.capture("addPrivateKeyAccount",{data:{networkID:l,chainType:b,walletAddress:B}})},[e,r?.icon,n,B]);return{formOnSubmitHandler:T(l=>S(l)),canSubmit:fe,control:c,getValues:p,register:A,setValue:v,trigger:P,errors:s,clearErrors:f,nameValidations:ee,privateKey:ie,privateKeyValidations:J,addressPreview:B}},"useImportPrivateKeyForm");d();h();d();h();var zi="@phantom/accounts",rMe=`${zi}:account-identifier`,nMe=`${zi}:selected-account`,iMe=`${zi}:all-accounts`,oMe=`${zi}:all-seeds`,sMe=`${zi}:all-secrets`,aMe=`${zi}:account-balance`,sM={trustedApps(){return[`${zi}:trusted-apps`]},patchProfileAddresses(e){return[`${zi}:patch-profile-addresses`,e]},canUseCash(){return[`${zi}:can-use-cash`]}};var mC=o(e=>{let t=bt(),r=sM.canUseCash(),n=o(async()=>{if(!t?.canDeriveKMSAuthenticator)return!1;try{return await t.canDeriveKMSAuthenticator()}catch{return!1}},"queryFn"),{data:i,isPending:s}=er({queryKey:r,queryFn:n,...e});return{canUseCash:i??!1,isLoading:s}},"useCanAccountUseCash");d();h();var gC=et(function*(){let e=lr(),{enabledAddressTypes:t,enabledChainIDs:r,enabledMainnetOnlyNetworkIDs:n}=e,[i,s]=yield tu.all([Wr(be.DeveloperMode),Sa()]),c=yield ti(),f=yield Eo(c),p=yield n2(f.identifier),v={name:p.name,icon:p.icon,identifier:f.identifier,addresses:qu(f,n,t,r,s,i?.isDeveloperMode??!1)};return f.type===O.Seed?{...v,type:O.Seed,seedIdentifier:f.seedIdentifier,isReadOnly:!1}:f.type===O.Seedless?{...v,type:O.Seedless,seedIdentifier:f.seedIdentifier,isReadOnly:!1}:f.type===O.ReadOnly?{...v,type:O.ReadOnly,isReadOnly:!0}:f.type===O.PrivateKey?{...v,privateKeyIdentifier:f.privateKeyIdentifier,type:O.PrivateKey,isReadOnly:!1}:{...v,type:f.type,isReadOnly:!1}});export{xs as a,rv as b,BM as c,KM as d,RM as e,tr as f,DM as g,UM as h,LM as i,bt as j,au as k,$i as l,FM as m,Uh as n,O as o,zM as p,zI as q,Fh as r,jI as s,qI as t,WI as u,zh as v,Wh as w,tw as x,HI as y,Ti as z,Da as A,GI as B,GM as C,ZM as D,ZI as E,JI as F,YI as G,Ur as H,l_ as I,cw as J,Zp as K,ic as L,ih as M,yk as N,vk as O,fr as P,qs as Q,Un as R,fx as S,KR as T,LR as U,qR as V,ZR as W,Wv as X,uv as Y,Fv as Z,Ko as _,i8 as $,qB as aa,vu as ba,oK as ca,sK as da,h8 as ea,nh as fa,QE as ga,VE as ha,eT as ia,tT as ja,rT as ka,iT as la,l5 as ma,Lv as na,RK as oa,y5 as pa,tb as qa,K5 as ra,FK as sa,L5 as ta,W5 as ua,Q5 as va,nN as wa,dN as xa,yN as ya,HK as za,sT as Aa,TN as Ba,YK as Ca,RN as Da,zN as Ea,sb as Fa,YN as Ga,vR as Ha,nD as Ia,cD as Ja,MR as Ka,hD as La,AD as Ma,_D as Na,BD as Oa,kR as Pa,cb as Qa,jD as Ra,GD as Sa,O0 as Ta,cm as Ua,uh as Va,Si as Wa,Dr as Xa,Za as Ya,pI as Za,Bh as _a,zo as $a,Ei as ab,yI as bb,TI as cb,II as db,dT as eb,Rr as fb,Do as gb,_I as hb,kI as ib,Qa as jb,PI as kb,OI as lb,CI as mb,BI as nb,hm as ob,ue as pb,At as qb,ye as rb,xS as sb,mm as tb,AS as ub,IS as vb,PS as wb,OS as xb,NS as yb,DS as zb,VS as Ab,KA as Bb,Lf as Cb,RA as Db,YP as Eb,QP as Fb,XP as Gb,e4 as Hb,t4 as Ib,o4 as Jb,Dpe as Kb,be as Lb,v4 as Mb,xo as Nb,Wr as Ob,JA as Pb,s2 as Qb,I4 as Rb,_4 as Sb,k4 as Tb,Kh as Ub,Rh as Vb,Nc as Wb,Pg as Xb,K4 as Yb,Og as Zb,R4 as _b,N4 as $b,l2 as ac,xa as bc,Hge as cc,$ge as dc,Gge as ec,Zge as fc,Jge as gc,Yge as hc,mO as ic,gO as jc,Mo as kc,Bg as lc,Kg as mc,vO as nc,Rg as oc,bO as pc,wO as qc,od as rc,z4 as sc,Hg as tc,SO as uc,f2 as vc,kr as wc,AO as xc,MO as yc,EO as zc,TO as Ac,IO as Bc,kO as Cc,PO as Dc,OO as Ec,CO as Fc,BO as Gc,KO as Hc,Vc as Ic,RO as Jc,UO as Kc,To as Lc,y2 as Mc,Z4 as Nc,J4 as Oc,Q4 as Pc,ir as Qc,sO as Rc,q4 as Sc,Pr as Tc,zg as Uc,hs as Vc,aO as Wc,cO as Xc,Lc as Yc,jg as Zc,qg as _c,fO as $c,Wg as ad,dO as bd,jO as cd,z2 as dd,pd as ed,XO as fd,eC as gd,tC as hd,rC as id,nC as jd,iC as kd,oC as ld,aC as md,hO as nd,cC as od,uC as pd,lC as qd,gd as rd,yd as sd,iM as td,pC as ud,mC as vd,gC as wd};
/*! Bundled license information:

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-FO7QPK6E.js.map
