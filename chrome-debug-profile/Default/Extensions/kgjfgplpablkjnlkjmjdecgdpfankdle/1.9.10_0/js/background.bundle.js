(()=>{"use strict";var e,t={541:()=>{},588:(e,t,a)=>{var o=a(909),i=a(46),n=a(336),r=a(78),s=a(663);let l;async function p(e){let t=parseInt(await n.A.getValue("zoom_login_req_option_tabid"));if(!isNaN(t))if(1===e){n.A.removeValue("zoom_login_req_option_tabid");let a=parseInt(await n.A.getValue("zoom_popup_tabpage_tabid"));n.A.removeValue("zoom_popup_tabpage_tabid"),chrome.tabs.remove(a,(function(){chrome.runtime.lastError}));let o=await n.A.getValue("zoom_login_req_need_reload");chrome.tabs.update(t,{active:!0},(function(a){if(!chrome.runtime.lastError)if(o)chrome.tabs.reload(t);else{let a={type:"authenticationSigninResult",state:e};chrome.tabs.sendMessage(t,a)}})),n.A.removeValue("zoom_login_req_need_reload")}else{let e=parseInt(await n.A.getValue("zoom_popup_tabpage_tabid"));chrome.tabs.update(e,{active:!0},(function(t){if(!chrome.runtime.lastError){let t={type:"signinResultMessage",msg:r.errors[6]};chrome.tabs.sendMessage(e,t)}}))}}var c;function u(e){e&&chrome.tabs.query({},(function(t){t.length>1?chrome.tabs.remove(e,(function(){chrome.runtime.lastError})):chrome.tabs.update(e,{url:"about:blank"},(function(){chrome.runtime.lastError}))}))}function g(e,t,a,o){l&&l.postMessage({error:!0,errorMsg:e,syncState:t,noReviveSchedule:!!a,alertMessage:o})}function d(e,t){return new Promise(((a,o)=>{chrome.tabs.sendMessage(e,t,(e=>{chrome.runtime.lastError?o(chrome.runtime.lastError):a(e)}))}))}async function m(e,t){if(e&&"function"===s.type(t)){if(3105==e.errorCode||9002==e.errorCode||9011==e.errorCode){let e={syncState:1,errorMessage:r.tips[14]};t(e);try{await o.A.toSyncImmediate(),t({syncState:2,errorMessage:r.tips[15]})}catch(e){t({syncState:3,errorMessage:r.tips[16]})}return e}if(3113==e.errorCode){let a={syncState:1,errorMessage:r.tips[14],alertMessage:e.errorMessage};t(a);try{await o.A.toSyncImmediate(),t({syncState:2,errorMessage:r.tips[15],noReviveSchedule:!0})}catch(e){t({syncState:3,errorMessage:r.tips[16]})}return a}return t(e),e}}chrome.runtime.onInstalled.addListener((e=>{"update"===e.reason&&o.A.checkSyncFoVersionOrTime()})),chrome.runtime.onMessage.addListener((c=async function(e,t){let a,i,l,c=await n.A.getZoomData(),d=!1;c&&(c.assistants&&(a=c.assistants),c.forcelogin&&(i=c.forcelogin),c.trackfields&&(l=c.trackfields),c.scheduleDefaultLockOption&&(d="true"===c.scheduleDefaultLockOption.usePMISchedule_locked));let f,h=!1,y=!1;if(c&&c.audiopac&&(f=c.audiopac),f&&f.option_pac_enable&&(h=!0),c&&c.option_freeuser&&(y=!!c.option_freeuser&&await n.A.hasZoomRqToken()),"getZoomToken"==e.type){let e=await n.A.getZoomZakRequestToken();if(e){let{inputManualPwd:t,voidable:r}=await o.A.checkNeedPasswordForPopup(),s=!1;if(c?.enableExtensionPopupNewFlow||(s=!!await n.A.getValue("zoom_config_fixed_popup")),!s){let{pwEnable:e,wrEnable:t,authEnable:a,updateAuthOptionItem:i}=await o.A.getSecurityResult();!(await n.A.getSecurity()).security3c1||e||t||a||(s=!0)}return{baseurl:await n.A.getUserBaseUrl(),token:e,fte:await n.A.getValue("zoom_config_fte"),showSetting:s,inputManualPwd:t,pwdVoidable:r,showDomainInput:i&&i.domain_login,hasAssistants:a&&a.length>0,requireTracking:l&&l.length>0,schedulePmiLock:d,trackfields:l,zoom_config_pmi_saved_pwd:await o.A.getPmiSavedPwd(),zoom_config_pmi:Boolean(await n.A.getValue("zoom_config_pmi")),meetingPwdSettingsMap:await o.A.getMeetingPwdSettingsMap(),iSFreeAccount:c&&c.iSFreeAccount,embedPasscode:c&&c.embedPasscode}}return o.A.popupLogin(),{}}if("getInitData"==e.type){let e=null;try{e=await o.A.checkSyncFoVersionOrTime()}catch(e){}if(null!==e&&(c=await n.A.getZoomData()),c){let e=c.meetingTrashUrl,t="",a=await n.A.getUserBaseUrl();return e&&("string"===s.type(e)&&"/"===e[0]&&(e=e.slice(1)),t=a+e),{meetingTrashUrl:t,meetingTrashcanExpiredDays:c.meetingTrashcanExpiredDays||7,email:c.email||"",zoomBaseUrl:a}}return""}if("saveValue"==e.type)return e.key&&await n.A.saveValue(e.key,e.value),{};if("getReadyToSchedule"==e.type)return{readyToSchedule:await o.A.getReadyToSchedule()};if("loadAppConfig"==e.type)return{type:"postAppConfig",info:r};if("passZoomExtLoginSession"==e.type){let a=t?.tab?.id;try{await o.A._ssologin(e.info.url),u(a),n.A.saveZoomSSOValidDate(new Date),n.A.saveValue("zoom_auth_type",2),p(1)}catch(e){n.A.clearAllData(),u(a),p(2)}return{}}if("supportPAC"==e.type)return{hasPac:h};if("quickschedule"==e.type){if(!await n.A.hasZoomRqToken())return o.A.popupLogin(),{};{let t=!!await n.A.getValue("zoom_config_pmi"),{pwEnable:a,wrEnable:i,authEnable:r,updateAuthOptionItem:s}=await o.A.getSecurityResult(),l=await n.A.getSecurity();if(l.security3c1&&!a&&!i&&!r)return{resetpwd:!0};if(a&&t){let t=await o.A.getPmiSavedPwd();if(!t&&!i&&l.security3c1)return{resetpwd:!0};e.info.securityRes={pwd:t}}try{return await o.A._scheduleMeeting(e.info)}catch(e){let t=e.data;if(t||(t={errorMessage:e.statusText}),201==t.errorCode)return o.A.popupLogin(),{};{let e=await m(t,(function(e){e.syncState&&g(e.errorMessage,e.syncState,e.noReviveSchedule,e.alertMessage)}));return e||{}}}}}else{if("validateAltHost"==e.type){if(await n.A.hasZoomRqToken())try{return await o.A.validAlternateHost(e.althosts)}catch(e){return e}else o.A.popupLogin();return{}}if("checkUserType"==e.type)return{freeUser:y};if("checkShowFree40MinsTip"==e.type)return{showFree40MinsTip:c?.showFree40MinsTip,isPaidAccount:c?.isPaidAccount};if("isNoMeetingLicenseUser"==e.type)return{noLicenseUser:c&&c.no_meeting_license_user};if("getWhiteboardData"==e.type)return await n.A.hasZoomRqToken()?{hasLogin:!0,whiteboard:c?.whiteboard}:{hasLogin:!1};if("getWhiteboardUrl"==e.type)return await n.A.hasZoomRqToken()?{whiteboardUrl:await o.A.getWhiteboardUrl(),baseurl:await n.A.getUserBaseUrl()}:(o.A.popupLogin(),{});if("checkPreloadWb"==e.type)return await n.A.hasZoomRqToken()?{hasLogin:!0,support:c?.whiteboard?.support,allowPreloadWb:await n.A.getAllowPreloadWb(),whiteboardUrl:await o.A.getWhiteboardUrl(),baseurl:await n.A.getUserBaseUrl()}:{hasLogin:!1};if("getEmailConsistencyCheckData"==e.type)return await n.A.hasZoomRqToken()?{hasLogin:!0,enableEmailConsistencyCheck:!!c?.enableEmailConsistencyCheck,email:c?.email||""}:{hasLogin:!1};if("forceLogoutExtension"==e.type)return o.A.logout((function(){!async function(){let[e]=await chrome.tabs.query({active:!0,currentWindow:!0});try{chrome.tabs.sendMessage(e.id,{type:"notificationSignout"},(function(){chrome.runtime.lastError}))}catch(e){}}()})),{};if("getAccountEmail"==e.type)return await n.A.hasZoomRqToken()?{email:c?.email||""}:{email:""};if("openUrl"==e.type){let t=e.url;return t&&chrome.tabs.create({url:t}),{}}if("getWorkspaceData"==e.type)return await n.A.hasZoomRqToken()?{hasLogin:!0,zak:await n.A.getZoomZakRequestToken(),haveShownWsTips:await n.A.getHaveShownWsTips(),...await n.A.getWorkspaceData()}:{};if("getWorkspaceToken"==e.type){if(await n.A.hasZoomRqToken()){let e=await o.A.getWorkspaceToken();return e?.success&&e?.data?.accessToken?{token:e.data}:{}}}else{if("getReservedRooms"==e.type){if(await n.A.hasZoomRqToken()){const t=e.info,a=!1;return await o.A.getReservedRooms(t.token,t.eventId,a)}return{}}if("saveWorkspace"==e.type){if(await n.A.hasZoomRqToken()){const t=e.info,a=!1;return await o.A.saveWorkspace(t.token,t.data,a)}return{}}if("checkReservedRooms"==e.type){if(await n.A.hasZoomRqToken()){const t=e.info,a=!1;return await o.A.checkReservedRooms(t.token,t.data,a)}return{}}if("getWorkspaceRoomImg"==e.type)return await n.A.hasZoomRqToken()?await o.A.getWorkspaceRoomImg(e.info.url):{};"setHaveShownWsTips"==e.type?await n.A.hasZoomRqToken()&&n.A.setHaveShownWsTips(e.value):"callPopupLogin"==e.type&&o.A.popupLogin()}}},function(e,t,a){return Promise.resolve(c(e,t)).then(a),!0})),chrome.runtime.onConnect.addListener((function(e){async function t(t){try{await o.A.editMeeting(t);t?.isNewSchedule&&await async function(){let e=await n.A.getZoomData();if(e?.showBiSyncPopup&&!await n.A.getValue("dontShowBiSyncPopup")){let e=await n.A.getValue("showBiSyncPopupDate"),t=(new Date).getDate().toString();if(e!==t)return await n.A.saveValue("showBiSyncPopupDate",t),!0}return!1}()&&e.postMessage({type:"showBiSyncPopup"})}catch(t){if(t.data){let a=await n.A.getZoomData();a&&a.hideError4SpecialUser||e.postMessage({type:"editFailed",errorCode:t.data.errorCode,errorMsg:t.data.errorMessage})}}}async function a(t){try{let a={type:"schedule"};0;let i=await o.A._scheduleMeeting(t);n.A.saveValue("zoom_config_fte",!1),a.meeting=i.result,e.postMessage(a)}catch(t){let a=t.data;a||(a={errorMessage:t.statusText}),201==a.errorCode?(e.postMessage({type:"restoreScheduleBtn"}),o.A.popupLogin()):m(a,(function(e){g(e.errorMessage||r.errors[5],e.syncState,e.noReviveSchedule,e.alertMessage)}))}}console.assert("Zoom"==e.name),l=e,e.onMessage.addListener((async function(s){if("ping"==s.type)e.postMessage({type:"pong"});else if("schedule"==s.type){await n.A.hasZoomRqToken()?a(s.info):o.A.popupLogin()}else if("schedulepac"==s.type){if(await n.A.hasZoomRqToken())try{let t=await o.A.schedulePACMeeting(s.info);e.postMessage({type:"schedule",meeting:t.result})}catch(e){g(201==e?.data?.errorCode?"login###again":r.errors[5])}else o.A.popupLogin()}else if("update"==s.type){await n.A.hasZoomRqToken()&&t(s.info)}else if("delete"==s.type){if(await n.A.hasZoomRqToken())try{let t=await o.A.deleteMeeting(s.info);e.postMessage({type:"delSuccess",meeting:t.result})}catch(e){}}else if("icon_delete"==s.type){if(await n.A.hasZoomRqToken())try{let t=await o.A.deleteMeeting(s.info);e.postMessage({type:"iconDeleteSuccess",meeting:t.result})}catch(t){e.postMessage({type:"iconDeleteFailed",showMsg:t?.data?.showMsg})}else e.postMessage({type:"iconDeleteFailed"}),o.A.popupLogin()}else if("deleteonly"==s.type){if(await n.A.hasZoomRqToken())try{await o.A.deleteMeeting(s.info)}catch(e){}}else if("loadZoomOptions"==s.type)e.postMessage({type:"updateZmOptions",zmOpt:await o.A.getZoomSetting()});else if("saveOptionsAndSchedule"==s.type)if(await n.A.hasZoomRqToken()){let{securityRes:e,allowDenyRes:t,templateRes:i,enable_alternative_host_edit_poll:l,enable_alternative_host_summary:p,enable_alternative_host_recording:c,focusModeValue:u,record_id:d,qa:m,pmc:f,cmcFeatureUserType:h,enableInterpretation:y,interpretation:w,topic:A,scheduleTime:_,meetingSummary:k,meetingQuery:v,whoCanAskQuestion:b,whoReceiveSummary:S,enable_unmute_all:M,enable_moderate_unmute:T,meetingWallpaper:R,waitingRoom:Z,enableSmartAgendaFor3rd:P,...q}=s.info;0;try{let i=q.zoom_config_pmi,f=q.e2ee?.pmiEnable,h=await o.A.updateZoomSetting(q);h?.status?(i&&(n.A.updateSecurity(e),n.A.updateAllowDeny(t),n.A.updateFocusMode(u),await n.A.updateZoomDataForPMI({record_id:d,qa:m,meetingSummary:k,whoReceiveSummary:S,meetingQuery:v,whoCanAskQuestion:b,enable_unmute_all:M,enable_moderate_unmute:T,meetingWallpaper:JSON.stringify(R),waitingRoom:Z},i)),n.A.updateAlternativeHost({zoom_config_alternativehost:q.zoom_config_alternativehost,enable_alternative_host_edit_poll:l,enable_alternative_host_summary:p,enable_alternative_host_recording:c,zoom_config_pmi:i,e2eeEnableForPMI:f}),a(s.info)):201==h?.errorCode?o.A.popupLogin(!0):g(r.errors[5])}catch(e){g(r.errors[5])}}else o.A.popupLogin();else if("saveOptionsAndQuickSchedule"==s.type)if(await n.A.hasZoomRqToken())if(s.info.changepwd){let e=await n.A.getSecurity(),t=s.info.securityRes.pwd;t&&""!=t&&(e.pmi.passcode.value=t,n.A.setSecurity(e)),a(s.info)}else try{await o.A.updateSettingForQucik(s.info),a(s.info)}catch(e){}else o.A.popupLogin();else if("sendLog"==s.type)await n.A.hasZoomRqToken()&&i.A.sendLog(s.info,(function(){}));else if("sendAllLogs"==s.type)await n.A.hasZoomRqToken()&&i.A.sendAllLogs();else if("sync"==s.type){try{o.A.toSync()}catch(e){}s.info?.updateTimeStampForUseWb&&n.A.updateTimeStampForUseWb()}else if("saveNewCalendarEvent"==s.type)try{await o.A.createMeetingMp(s.info)}catch(e){}else if("removeCalendarEvent"==s.type){i.A.sendLog({msgType:3,msg:{info:"zm-observer trigger to delete.",baseid:s.info.event_baseid},operaType:1});try{let t=await o.A.deleteMeeting(s.info);e.postMessage({type:"delSuccess",meeting:t.result})}catch(e){}}else if("updateTimeAndTimezone"==s.type)try{await o.A.updateMeetingTimeAndTimezone(s.info)}catch(t){const a=t?.data?.errorCode;let o=!1;if(3161==a)o=!0;else if(9020==a){const e=await n.A.getZoomData();e?.hideError4SpecialUser||(o=!0)}o&&e.postMessage({type:"updateTimeAndTimezoneFailed",errorCode:a,errorMsg:t.data.errorMessage})}else if("saveInvitee"==s.type)try{await o.A.saveInvitee(s.info)}catch(e){}else if("getCalendarEvent"==s.type);else if("signWithGoogleEvent"==s.type);else if("workemailSigninEvent"==s.type);else if("ssoSigninEvent"==s.type);else if("saveStorageData"==s.type){let e=s.key,t=s.val;n.A.saveValue(e,t)}else if("loadAppConfig"==s.type)e.postMessage({type:"postAppConfig",info:r});else if("callPopupLogin"==s.type)o.A.popupLogin();else if("remoteCheckPwd"==s.type){if(s.info.pwd)try{let t=await o.A.remoteCheckPassword(s.info.pwd);201==t.errorCode?o.A.popupLogin(!0):e.postMessage({type:"remoteCheckPwdResult",exception:!1,info:{res:t.status,msg:t.errorMessage,errortype:1,channel:s.info.channel}})}catch(t){e.postMessage({type:"remoteCheckPwdResult",exception:!0,info:{channel:s.info.channel}})}}else if("viewTemplateDetail"==s.type){let e=s.info.templateId;if(e){let t=await o.A.getAdminTemplateDetailUrl(e);chrome.tabs.create({url:t})}}else if("getWhiteboardToken"==s.type)if(await n.A.hasZoomRqToken())try{let t=await o.A.getWhiteboardToken();if(t.status){let a=0,o=t?.result;o?.expire_time&&o?.create_time&&(a=1e3*(o?.expire_time-o?.create_time)),e.postMessage({type:"getWhiteboardTokenResult",exception:!1,info:{res:t.status,msg:t.errorMessage,access_token:o?.access_token,token_exp:a}})}}catch(t){e.postMessage({type:"getWhiteboardTokenResult",exception:!0,info:{msg:t?.data?.errorMessage||t}})}else e.postMessage({type:"getWhiteboardTokenResult",exception:!0,info:{}}),o.A.popupLogin(!0);else if("getWhiteboardInfo"==s.type)if(await n.A.hasZoomRqToken())try{let t=await o.A.getWhiteboardInfo(s.token,s.docId);if(!t?.docId)throw error;e.postMessage({type:"getWhiteboardInfoResult",exception:!1,info:{data:t}})}catch(t){e.postMessage({type:"getWhiteboardInfoResult",exception:!0,info:{data:{docId:s.docId},msg:t}})}else e.postMessage({type:"getWhiteboardInfoResult",exception:!0,info:{data:{docId:s.docId},msg:""}});else if("executeEditWB"==s.type){await n.A.hasZoomRqToken()&&await o.A.executeEditWB(s.info)}else if("executeDeleteWB"==s.type){await n.A.hasZoomRqToken()&&await o.A.executeDeleteWB(s.info)}else if("saveDontShowBiSyncPopup"==s.type){await n.A.hasZoomRqToken()&&await async function(){await n.A.saveValue("dontShowBiSyncPopup",!0),await o.A.saveDontShowBiSyncPopup()}()}}))})),chrome.storage.onChanged.addListener(((e,t)=>{"local"===t&&e.zoom_data&&chrome.tabs.query({url:"https://calendar.google.com/*"},(e=>{for(const t of e)d(t.id,{type:"STORAGE_UPDATED",key:"zoomData"}).catch((e=>{console.log("error: ",e?.message)}))}))})),chrome.runtime.onMessageExternal.addListener((function(e,t,a){return e&&e.message&&"version"==e.message&&a({version:1}),!0}))}},a={};function o(e){var i=a[e];if(void 0!==i)return i.exports;var n=a[e]={exports:{}};return t[e].call(n.exports,n,n.exports,o),n.exports}o.m=t,e=[],o.O=(t,a,i,n)=>{if(!a){var r=1/0;for(c=0;c<e.length;c++){for(var[a,i,n]=e[c],s=!0,l=0;l<a.length;l++)(!1&n||r>=n)&&Object.keys(o.O).every((e=>o.O[e](a[l])))?a.splice(l--,1):(s=!1,n<r&&(r=n));if(s){e.splice(c--,1);var p=i();void 0!==p&&(t=p)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[a,i,n]},o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.j=471,(()=>{var e={471:0,997:0};o.O.j=t=>0===e[t];var t=(t,a)=>{var i,n,[r,s,l]=a,p=0;if(r.some((t=>0!==e[t]))){for(i in s)o.o(s,i)&&(o.m[i]=s[i]);if(l)var c=l(o)}for(t&&t(a);p<r.length;p++)n=r[p],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(c)},a=self.webpackChunkextension=self.webpackChunkextension||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var i=o.O(void 0,[997,628,738],(()=>o(588)));i=o.O(i)})();