var SIH;(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:r+""}const n=new(function(){return t=function t(){var e,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,o=function(t,e){var r=document.createElement("style");r.textContent=e,t.appendChild(r)},(n=r(n="injectInlineStylesInShadow"))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o},n=[{key:"createElement",value:function(t,e,r){var n=document.createElement("div");n.id=t;var o=n.attachShadow({mode:"open"});if(o.innerHTML=e,r){var i=document.createElement("style");i.textContent=r,o.appendChild(i)}return{host:n}}},{key:"querySelectorAllShadows",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body,n=Array.from(r.querySelectorAll("*")).map((function(t){return t.shadowRoot})).filter(Boolean).map((function(r){return e.querySelectorAllShadows(t,r)}));return Array.from(r.querySelectorAll(t)).concat(n).flat()}}],n&&e(t.prototype,n),o&&e(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,o}());var o=function(t){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SYNC_STORAGE",data:t},(function(t){e(t)}))}))},i=function(t){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_LOCAL_STORAGE",data:t},(function(t){e(t)}))}))},a=function(t,e){return new Promise((function(r){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_SET_LOCAL_STORAGE",data:{key:t,value:e}},(function(t){r(t)}))}))};function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */u=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var i=e&&e.prototype instanceof w?e:w,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:P(t,r,c)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var v="suspendedStart",d="suspendedYield",y="executing",g="completed",m={};function w(){}function b(){}function _(){}var x={};f(x,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(G([])));S&&S!==r&&n.call(S,a)&&(x=S);var L=_.prototype=w.prototype=Object.create(x);function O(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,i,a,u){var s=p(t[o],t,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==c(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=v;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===v)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=p(e,r,n);if("normal"===s.type){if(o=n.done?g:d,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=g,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function G(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(c(e)+" is not iterable")}return b.prototype=_,o(L,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:b,configurable:!0}),b.displayName=f(_,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,f(t,l,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},O(k.prototype),f(k.prototype,s,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new k(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(L),f(L,l,"Generator"),f(L,a,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=G,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:G(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function s(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){s(i,n,o,a,c,"next",t)}function c(t){s(i,n,o,a,c,"throw",t)}a(void 0)}))}}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function h(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function p(t,e,r){return(e=v(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v(t){var e=function(t,e){if("object"!=c(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c(e)?e:e+""}function d(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function y(t,e){return t.get(function(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}(t,e))}var g=new WeakMap,m=new WeakMap,w=new WeakMap,b=new WeakMap;const _=h((function t(){var e,r,n,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,g,"n/a"),d(this,m,"n/a"),d(this,w,"n/a"),d(this,b,"n/a"),p(this,"parseUserInfo",(function(){var t=("function"==typeof $J?$J:$)("#application_config");if(t.length){var e,r,n,o,a,c=t.attr("data-config"),u=t.attr("data-userinfo");return{lang:c?null===(e=JSON.parse(c))||void 0===e||null===(r=e.LANGUAGE)||void 0===r?void 0:r.toLowerCase():y(g,i),country:c?null===(n=JSON.parse(c))||void 0===n||null===(o=n.COUNTRY)||void 0===o?void 0:o.toLowerCase():y(m,i),steamId:u?null===(a=JSON.parse(u))||void 0===a?void 0:a.steamid:y(b,i)}}return{lang:"en",country:"us",steamId:null}})),p(this,"parseUid",l(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=l(u().mark((function t(e){var r,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o("sih_token");case 2:r=t.sent,n=r.sih_token,e(n||y(w,i));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))));var a=this.parseUserInfo();this.lang=null!==(e=window)&&void 0!==e&&e.g_strLanguage?g_strLanguage.toLowerCase():null!=a&&a.lang?null==a?void 0:a.lang:y(g,this),this.country=null!==(r=window)&&void 0!==r&&r.g_strCountryCode?g_strCountryCode.toLowerCase():null!=a&&a.country?null==a?void 0:a.country:y(m,this),this.steamId=null!==(n=window)&&void 0!==n&&n.g_steamID?g_steamID:null!=a&&a.steamId?a.steamId:y(b,this)}));function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function E(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */E=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:P(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",v="executing",d="completed",y={};function g(){}function m(){}function w(){}var b={};s(b,a,(function(){return this}));var _=Object.getPrototypeOf,S=_&&_(_(G([])));S&&S!==r&&n.call(S,a)&&(b=S);var L=w.prototype=g.prototype=Object.create(b);function O(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==x(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=h;return function(i,a){if(o===v)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?d:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=d,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function G(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(x(e)+" is not iterable")}return m.prototype=w,o(L,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:m,configurable:!0}),m.displayName=s(w,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},O(k.prototype),s(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=G,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:G(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function S(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function L(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(Object(r),!0).forEach((function(e){G(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function O(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function k(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){O(i,n,o,a,c,"next",t)}function c(t){O(i,n,o,a,c,"throw",t)}a(void 0)}))}}function P(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,D(n.key),n)}}function j(t,e,r){return e=N(e),function(t,e){if(e&&("object"==x(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,I()?Reflect.construct(e,r||[],N(t).constructor):e.apply(t,r))}function I(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(I=function(){return!!t})()}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function G(t,e,r){return(e=D(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function D(t){var e=function(t,e){if("object"!=x(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==x(e)?e:e+""}function C(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function M(t,e){return t.get(function(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}(t,e))}var A=new WeakMap,J=new WeakMap,H=new WeakMap;const U=new(function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),C(t=j(this,e),A,"case-open-feat"),C(t,J,"button"),C(t,H,"click"),G(t,"set",function(){var e=k(E().mark((function e(r){var n,o,i,a,c,u,s,l,f;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.group,o=r.target,i=r.targetType,a=r.action,c=r.properties,u=r.lang,s=r.country,l=r.uid,f=r.steamId,e.abrupt("return",new Promise(function(){var e=k(E().mark((function e(r){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=chrome.runtime,e.t1=SIHID,e.t2=L,e.t3=L({group:n||t.group,target:o,targetType:i||t.targetType,action:a||t.action},c),e.t4={},e.t5=u||t.lang,e.t6=s||t.country,!l){e.next=11;break}e.t7=l,e.next=14;break;case 11:return e.next=13,t.parseUid();case 13:e.t7=e.sent;case 14:e.t8=e.t7,e.t9=f||t.steamId,e.t10={lang:e.t5,country:e.t6,uid:e.t8,steamId:e.t9},e.t11=(0,e.t2)(e.t3,e.t4,e.t10),e.t12={type:"BACKGROUND_SET_EVENT_REGISTRATION_V2",data:e.t11},e.t13=function(t){r(t)},e.t0.sendMessage.call(e.t0,e.t1,e.t12,e.t13);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.group=M(A,t),t.targetType=M(J,t),t.action=M(H,t),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(e,t),r=e,n&&P(r.prototype,n),o&&P(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(_));var W=1,R=2;function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function B(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */B=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new I(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",v="executing",d="completed",y={};function g(){}function m(){}function w(){}var b={};s(b,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(N([])));x&&x!==r&&n.call(x,a)&&(b=x);var E=w.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==F(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===v)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?d:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=d,n.method="throw",n.arg=s.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(F(e)+" is not iterable")}return m.prototype=w,o(E,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:m,configurable:!0}),m.displayName=s(w,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(L.prototype),s(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function Y(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function q(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Y(i,n,o,a,c,"next",t)}function c(t){Y(i,n,o,a,c,"throw",t)}a(void 0)}))}}function z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Q(n.key),n)}}function K(t,e,r){return e&&z(t.prototype,e),r&&z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function V(t,e,r){return(e=Q(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q(t){var e=function(t,e){if("object"!=F(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==F(e)?e:e+""}function X(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function Z(t,e){return t.get(function(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}(t,e))}var tt=new WeakMap,et=new WeakMap,rt=new WeakMap,nt=new WeakMap,ot=new WeakMap,it=new WeakMap,at=new WeakMap,ct=new WeakMap,ut=new WeakMap,st=new WeakMap,lt=new WeakMap,ft=new WeakMap,ht=new WeakMap,pt=new WeakMap,vt=new WeakMap,dt=new WeakMap,yt=new WeakMap;const gt=new(K((function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),X(this,tt,"https://store-site-backend-static-ipv4.ak.epicgames.com/freeGamesPromotions"),X(this,et,"https://store.epicgames.com/graphql"),X(this,rt,"https://store-content-ipv4.ak.epicgames.com/api/en-US/content"),X(this,nt,"https://www.epicgames.com/store/purchase"),X(this,ot,"https://www.epicgames.com/id/login"),X(this,it,"875a3b57d3a640a6b7f9b4e883463ab4"),X(this,at,q(B().mark((function t(){var e;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=$J("egs-footer"),t.abrupt("return",e.attr("countrycode"));case 5:t.prev=5,t.t0=t.catch(0),console.error("Error when getting countryCode, game search will not take account region into account");case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))),X(this,ct,(function(t){return new Promise((function(e,r){$J.ajax({url:t,type:"GET",success:function(t){e(t)},error:function(t){r(t)}})}))})),X(this,ut,q(B().mark((function t(){var r,n,o,i,a,c,u,s,l=arguments;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=l.length>0&&void 0!==l[0]?l[0]:"US",a=new URLSearchParams({locale:"en-US",country:i,allowCountries:i}),t.next=4,Z(ct,e).call(e,"".concat(Z(tt,e),"?").concat(a.toString()));case 4:if(c=t.sent,u=null===(r=c.data)||void 0===r||null===(n=r.Catalog)||void 0===n||null===(o=n.searchStore)||void 0===o?void 0:o.elements){t.next=8;break}throw new Error("Error when parsing free games ".concat(JSON.stringify(c)));case 8:return s=new Date,t.abrupt("return",u.filter((function(t){var e=!1;return t.promotions&&t.promotions.promotionalOffers.forEach((function(t){t.promotionalOffers.forEach((function(t){var r=new Date(t.startDate),n=new Date(t.endDate),o=0===t.discountSetting.discountPercentage;r<=s&&s<=n&&o&&(e=!0)}))})),e})));case 10:case"end":return t.stop()}}),t)})))),X(this,st,function(){var t=q(B().mark((function t(r,n){var o;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(r.map(function(){var t=q(B().mark((function t(r){var o,i,a,c,u,s,l,f,h,p;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=(null==r||null===(o=r.catalogNs)||void 0===o||null===(i=o.mappings)||void 0===i||null===(a=i.find((function(t){return"productHome"===t.pageType})))||void 0===a?void 0:a.pageSlug)||r.productSlug,u=r.productSlug,s=r.offerType,l=r.id,f=r.namespace,!c||!u){t.next=15;break}return t.next=6,Z(lt,e).call(e,c);case 6:if((h=t.sent).mappings.offer){t.next=13;break}return c=h.pageSlug,t.next=11,Z(ft,e).call(e,c,s,n);case 11:return p=t.sent,t.abrupt("return",p.filter((function(t){return null==t?void 0:t.hasOffer})).map((function(t){return{offerNamespace:t.namespace,offerId:t.id,productName:r.title,productSlug:c}})));case 13:l=h.mappings.offer.id,f=h.mappings.offer.namespace;case 15:return t.abrupt("return",[{offerNamespace:f,offerId:l,productName:r.title,productSlug:c}]);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:return o=t.sent,t.abrupt("return",o.flat());case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),X(this,lt,function(){var t=q(B().mark((function t(r){var n,o,i,a;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={pageSlug:r,locale:"en-US"},o={persistedQuery:{version:1,sha256Hash:"781fd69ec8116125fa8dc245c0838198cdf5283e31647d08dfa27f45ee8b1f30"}},i=new URLSearchParams({operationName:"getMappingByPageSlug",variables:JSON.stringify(n),extensions:JSON.stringify(o)}),t.next=5,Z(ct,e).call(e,"".concat(Z(et,e),"?").concat(i.toString()));case 5:return a=t.sent,t.abrupt("return",a.data.StorePageMapping.mapping);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),X(this,ft,function(){var t=q(B().mark((function t(r,n,o){var i,a,c,u;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=(i="BUNDLE"===n)?"bundles":"products",t.next=4,Z(ct,e).call(e,"".concat(Z(rt,e),"/").concat(a,"/").concat(r));case 4:if(c=t.sent,!i){t.next=9;break}return t.abrupt("return",[c.offer]);case 9:if(null===(u=c.regionBlock)||void 0===u||!u.includes(o)){t.next=13;break}return t.abrupt("return",[]);case 13:return t.abrupt("return",c.pages.map((function(t){return t.offer})));case 14:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()),X(this,ht,function(){var t=q(B().mark((function t(r,n){var o,i,a,c,u,s,l=arguments;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={locale:"en-US",country:o=l.length>2&&void 0!==l[2]?l[2]:"US",offerId:r,sandboxId:n},a={persistedQuery:{version:1,sha256Hash:"abafd6e0aa80535c43676f533f0283c7f5214a59e9fae6ebfb37bed1b1bb2e9b"}},c=new URLSearchParams({operationName:"getCatalogOffer",variables:JSON.stringify(i),extensions:JSON.stringify(a)}),t.next=6,fetch("".concat(Z(et,e),"?").concat(c.toString()));case 6:return t.next=8,t.sent.json();case 8:if(u=t.sent,s=u.data.Catalog.catalogOffer,!Z(pt,e).call(e,s,o)){t.next=14;break}return t.abrupt("return",{offerId:s.id,offerNamespace:s.namespace,productName:s.title,productSlug:s.productSlug,productPrice:s.price.totalPrice,productImages:s.keyImages});case 14:return t.abrupt("return",null);case 15:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),X(this,pt,(function(t,e){var r,n,o,i=0===(null===(r=t.price)||void 0===r||null===(n=r.totalPrice)||void 0===n?void 0:n.discountPrice),a=!!t.expiryDate&&new Date(t.expiryDate)<new Date,c=null===(o=t.countriesBlacklist)||void 0===o?void 0:o.includes(e);return!(a||!i||c)})),X(this,vt,function(){var t=q(B().mark((function t(r){var n;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(r.map(function(){var t=q(B().mark((function t(r){return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=r,t.next=3,Z(dt,e).call(e,r.offerId,r.offerNamespace);case 3:return t.t1=t.sent,t.abrupt("return",{offer:t.t0,canPurchase:t.t1});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:return n=t.sent,t.abrupt("return",n.filter((function(t){return t.canPurchase})).map((function(t){return t.offer})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),X(this,dt,function(){var t=q(B().mark((function t(r,n){var o,i,a,c,u,s,l,f,h,p,v;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l={offers:[{offerId:r,namespace:n}]},f={persistedQuery:{version:1,sha256Hash:"3c9bb0f213f6d0cb6bf056e6b206ba166c8dd59d014618e4d59bff11689f403a"}},h=new URLSearchParams({operationName:"getOffersValidation",variables:JSON.stringify(l),extensions:JSON.stringify(f)}),t.next=5,Z(ct,e).call(e,"".concat(Z(et,e),"?").concat(h.toString()));case 5:return p=t.sent,v=null===(o=p.data)||void 0===o||null===(i=o.Entitlements)||void 0===i?void 0:i.cartOffersValidation,t.abrupt("return",!(null!=v&&null!==(a=v.missingPrerequisites)&&void 0!==a&&a.length||null!=v&&null!==(c=v.conflictingOffers)&&void 0!==c&&c.length||null!=v&&null!==(u=v.fullyOwnedOffers)&&void 0!==u&&u.length||null!=v&&null!==(s=v.unablePartiallyUpgradeOffers)&&void 0!==s&&s.length));case 8:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),X(this,yt,(function(t){var r=new URL(Z(ot,e));return r.searchParams.set("noHostRedirect","true"),r.searchParams.set("redirectUrl",t),r.searchParams.set("client_id",Z(it,e)),r.toString()})),V(this,"getAllGames",q(B().mark((function t(){var r,n,o,i;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z(at,e).call(e);case 2:return r=t.sent,t.next=5,Z(ut,e).call(e,r);case 5:return n=t.sent,t.next=8,Z(st,e).call(e,n,r);case 8:return o=t.sent,t.next=11,Promise.all(o.map(function(){var t=q(B().mark((function t(n){return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Z(ht,e).call(e,n.offerId,n.offerNamespace,r));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 11:return i=t.sent.filter(Boolean),t.next=14,Z(vt,e).call(e,i);case 14:return t.abrupt("return",t.sent);case 15:case"end":return t.stop()}}),t)})))),V(this,"generateCheckoutUrl",(function(t){var r=t.map((function(t){return"&offers=1-".concat(t.offerNamespace,"-").concat(t.offerId)})).join(""),n="".concat(Z(nt,e),"?highlightColor=0078f2").concat(r,"&orderId&purchaseToken&showNavigation=true");return Z(yt,e).call(e,n)}))})));function mt(t){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mt(t)}function wt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=mt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bt(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */bt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new I(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",v="executing",d="completed",y={};function g(){}function m(){}function w(){}var b={};s(b,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(N([])));x&&x!==r&&n.call(x,a)&&(b=x);var E=w.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==mt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===v)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?d:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=d,n.method="throw",n.arg=s.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(mt(e)+" is not iterable")}return m.prototype=w,o(E,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:m,configurable:!0}),m.displayName=s(w,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(L.prototype),s(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function _t(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function xt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){_t(i,n,o,a,c,"next",t)}function c(t){_t(i,n,o,a,c,"throw",t)}a(void 0)}))}}var Et=function(){var t=xt(bt().mark((function t(){var e,r;return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return St(),Lt(),t.prev=2,t.next=5,gt.getAllGames();case 5:(e=t.sent).length?(r=gt.generateCheckoutUrl(e),kt(e,r)):Ot(R),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),Ot(W);case 12:Pt();case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(){return t.apply(this,arguments)}}(),St=function(){var t=$J("body"),e=$J('<div class="sih-egs-free">\n      <div class="sih-egs-free__fade"></div>\n      <div class="sih-modal sih-global">\n        <div class="sih-modal__close"></div>\n        <div class="sih-modal__inner sih-modal__column"></div>\n      </div>\n    </div>');t.find(".sih-egs-free").length||(t.append(e),t.css("overflow","hidden"))},Lt=function(){var t=$J(' <div class="sih-egs-free__preloader">\n      <img class="sih-egs-free__img" src="chrome-extension://'.concat(SIHID,'/assets/epicGames/loader-face.gif" alt="loading" />\n      <div>').concat(SIHLang.egs_free.preloader_text,"</div>\n    </div>"));$J(".sih-egs-free .sih-modal__inner").empty().append(t)},Ot=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=wt(wt({},W,SIHLang.egs_free.error.something_wrong),R,SIHLang.egs_free.error.none_available),r=$J('<div class="sih-egs-free__error">\n      <img src="chrome-extension://'.concat(SIHID,'/assets/epicGames/sad-face.svg" alt="sad" />\n      <div class="column gap-12 items-center">\n        <div>').concat(e[t],'</div>\n        <button class="sih-egs-free__btn">').concat(SIHLang.egs_free.error.btn,"</button>\n      </div>\n    </div>"));$J(".sih-egs-free .sih-modal__inner").empty().append(r)},kt=function(t,e){var r=$J('<div class="sih-egs-free__games-info column gap-12">\n      <div class="row justify-between">\n        <div class="row gap-8 items-center">\n          <img class="w-24" src="chrome-extension://'.concat(SIHID,'/assets/epicGames/monotone-free.svg" alt="free" />\n          <div class="fs-20">').concat(SIHLang.egs_free.title,'</div>\n        </div>\n        <div class="row gap-12">\n          <img class="w-102" src="chrome-extension://').concat(SIHID,'/assets/common/powered_sih.svg" alt="sih-powered" />\n        </div>\n      </div>\n      <div class="sih-egs-free__games-list row gap-12"></div>\n      <div class="row justify-center mt-5">\n        <div id="sih-egs-free-redirect-link" data-url="').concat(e,'" class="sih-egs-free__btn">\n          ').concat(SIHLang.egs_free.claim_all,"\n        </div>\n      </div>\n    </div>"));t.forEach((function(t){var e=t.productImages.find((function(t){return"OfferImageTall"===t.type}));r.find(".sih-egs-free__games-list").append('<div class="column gap-8">\n        <img class="sih-egs-free__game-img" src="'.concat(e.url,'" alt="').concat(t.productName,'" />\n        <div>').concat(t.productName,'</div>\n        <div class="row gap-4">\n          <span class="line-through text_grey-600">').concat(t.productPrice.fmtPrice.originalPrice,"</span>\n          <span>").concat(SIHLang.egs_free.free_price,"</span>\n        </div>\n      </div>"))})),$J(".sih-egs-free .sih-modal__inner").empty().append(r)},Pt=function(){jt(),It(),Nt()},jt=function(){var t=$J(".sih-egs-free");t.on("click",".sih-egs-free__fade, .sih-modal__close, .sih-egs-free__error .sih-egs-free__btn",(function(){t.hide().remove(),$J("body").css("overflow","auto")}))},It=function(){$J(".sih-egs-free").on("wheel",".sih-egs-free__games-list",(function(t){var e=t.originalEvent,r=1;e.deltaMode===e.DOM_DELTA_LINE?r=parseInt(getComputedStyle(this).lineHeight):e.deltaMode===e.DOM_DELTA_PAGE&&(r=this.clientHeight),0!==e.deltaY&&(this.scrollLeft+=r*e.deltaY,e.preventDefault())}))},Nt=function(){$J(".sih-egs-free").on("click","#sih-egs-free-redirect-link",(function(){U.set({group:"sih-menu",target:"Epic Games Free",targetType:"button-all"}),chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_OPEN_TAB_SETTINGS",data:{url:$J(this).attr("data-url")}},(function(){}))}))},Tt=function(){var t=n.querySelectorAllShadows("#egs-free-collector-btn");t.length&&$J(t).click((function(){Et()}))};var Gt=function(){var t=$J('<li class="egs-free-collector">\n      <img\n        class="egs-free-collector__case"\n        alt=""\n        src="chrome-extension://'.concat(SIHID,'/assets/epicGames/freeGames/header-btn-case.svg"\n      />\n      <button id="egs-free-collector-btn" class="egs-free-collector__get-button">\n        <span class="egs-free-collector__text">').concat(SIHLang.egs_free.header_btn_text,'</span>\n        <span class="egs-free-collector__powered">POWERED BY SIH</span>\n      </button>\n    </li>')),e=n.querySelectorAllShadows(".global-header__drawer .main-nav ul.main-nav__list");e.length&&(n.injectInlineStylesInShadow(e[0],".egs-free-collector{display:flex;align-items:center;position:relative}.egs-free-collector__case{width:88px;height:54px;z-index:1}.egs-free-collector__get-button{position:absolute;background:#0d91ec;color:#fff;border:none;border-radius:8px;cursor:pointer;padding:2px 32px 2px 70px;font-family:Roboto;font-weight:600;letter-spacing:0;text-align:center;white-space:nowrap;display:flex;flex-direction:column;align-items:center;left:23px;transition:all .2s ease-in}.egs-free-collector__get-button:hover{opacity:.8}.egs-free-collector__text{font-size:14px;line-height:20px}.egs-free-collector__powered{font-size:12px;line-height:16px;opacity:.5}"),$J(e).find(".main-nav__list-filler").before(t))};(function(){var t=xt(bt().mark((function t(){var e;return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i("need_open_egs_free_modal");case 2:e=t.sent,e.need_open_egs_free_modal&&(Et(),a("need_open_egs_free_modal",!1));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()(),Gt(),Tt(),SIH={}})();