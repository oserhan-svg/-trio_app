try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="8f1ebd08-88b6-4ef4-8fdc-8eaba4a9ab92",e._sentryDebugIdIdentifier="sentry-dbid-8f1ebd08-88b6-4ef4-8fdc-8eaba4a9ab92")}catch(e){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"2.9.7"};(()=>{var e,t={BACKGROUND_GET_PRICES_FOR_EXTERNAL:1,GetRates:1,BACKGROUND_GET_SIH_ID:1,BACKGROUND_GET_EXTERNAL_TOKEN:1,BACKGROUND_CHECK_SUBSCRIBE_ADS:1},n="",o={},a={},i={},s="";function d(t,n,a){chrome.runtime.sendMessage(chrome.runtime.id,{type:t,data:n||{}},(function(n){"BACKGROUND_GET_EXTERNAL_TOKEN"===t&&(e=n),a&&(o[a]=n),window.dispatchEvent(new CustomEvent("PassToSiteExt",{detail:n}))}))}window.addEventListener("PassToContentScript",(function(a){var c,r,l=a.detail;r=window.location.href,s!==r&&(i[r]={count:0,timestamp:Date.now()},s=r);var f=Date.now(),E=i[window.location.href];switch(f-E.timestamp>6e4&&(E.count=0,E.timestamp=f),l.type){case"GetRates":c="rates";break;case"BACKGROUND_GET_SIH_ID":c="SIHID";break;case"BACKGROUND_CHECK_SUBSCRIBE_ADS":c="subscribe";break;case"BACKGROUND_GET_PRICES_FOR_EXTERNAL":c=l.data.items[0]}n!==window.location.href&&(n=window.location.href,Object.keys(t).forEach((function(e){t[e]=1})));if(t[l.type])t[l.type]=t[l.type]-1,d(l.type,l.data,c);else if(l.token&&l.token===e&&"BACKGROUND_GET_PRICES_FOR_EXTERNAL"===l.type&&E.count<20&&function(){try{return["dmarket.com","cs.money","tradeit.gg","skinbaron.de"].some((function(e){return window.location.hostname===e}))}catch(e){return!1}}())E.count++,d(l.type,l.data,c);else if(e&&l.token===e&&E.count>=20){e=null;var u=c?o[c]:null;window.dispatchEvent(new CustomEvent("PassToSiteExt",{detail:u}))}else{var w=c?o[c]:null;window.dispatchEvent(new CustomEvent("PassToSiteExt",{detail:w}))}}),!1),["en","ru","zh_CN"].forEach((function(e){var t;t=e,fetch("chrome-extension://".concat(chrome.runtime.id,"/_locales/").concat(t,"/controls.json")).then((function(e){if(e.ok)return e.json();throw Error("Failed to load localization file: ".concat(e.statusText))})).then((function(e){a[t.toLowerCase()]=e})).catch((function(e){console.error("Error loading localization file:",e)}))})),window.addEventListener("GetLocalesFromContentScript",(function(e){window.dispatchEvent(new CustomEvent("PassLocalesToSiteExt",{detail:a}))}),!1)})();